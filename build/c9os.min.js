(function(){(function(){(function(){function o(e){var i=function(e,t){return r("",e,t)},s=t;e&&(t[e]||(t[e]={}),s=t[e]);if(!s.define||!s.define.packaged)n.original=s.define,s.define=n,s.define.packaged=!0;if(!s.require||!s.require.packaged)r.original=s.require,s.require=i,s.require.packaged=!0}var e="",t=function(){return this}();if(!e&&typeof requirejs!="undefined")return;var n=function(e,t,r){if(typeof e!="string"){n.original?n.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(r=t),n.modules||(n.modules={},n.payloads={}),n.payloads[e]=r,n.modules[e]=null},r=function(e,t,n){if(Object.prototype.toString.call(t)==="[object Array]"){var i=[];for(var o=0,u=t.length;o<u;++o){var a=s(e,t[o]);if(!a&&r.original)return r.original.apply(window,arguments);i.push(a)}n&&n.apply(null,i)}else{if(typeof t=="string"){var f=s(e,t);return!f&&r.original?r.original.apply(window,arguments):(n&&n(),f)}if(r.original)return r.original.apply(window,arguments)}},i=function(e,t){if(t.indexOf("!")!==-1){var n=t.split("!");return i(e,n[0])+"!"+i(e,n[1])}if(t.charAt(0)=="."){var r=e.split("/").slice(0,-1).join("/");t=r+"/"+t;while(t.indexOf(".")!==-1&&s!=t){var s=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},s=function(e,t){t=i(e,t);var s=n.modules[t];if(!s){s=n.payloads[t];if(typeof s=="function"){var o={},u={id:t,uri:"",exports:o,packaged:!0},a=function(e,n){return r(t,e,n)},f=s(a,o,u);o=f||u.exports,n.modules[t]=o,delete n.payloads[t]}s=n.modules[t]=o||s}return s};o(e)})(),define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/multi_select","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/mode/folding/fold_mode","ace/theme/textmate","ace/config"],function(e,t,n){e("./lib/fixoldbrowsers");var r=e("./lib/dom"),i=e("./lib/event"),s=e("./editor").Editor,o=e("./edit_session").EditSession,u=e("./undomanager").UndoManager,a=e("./virtual_renderer").VirtualRenderer,f=e("./multi_select").MultiSelect;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./mode/folding/fold_mode"),e("./theme/textmate"),t.config=e("./config"),t.require=e,t.edit=function(e){if(typeof e=="string"){var n=e,e=document.getElementById(n);if(!e)throw"ace.edit can't find div #"+n}if(e.env&&e.env.editor instanceof s)return e.env.editor;var o=t.createEditSession(r.getInnerText(e));e.innerHTML="";var u=new s(new a(e));new f(u),u.setSession(o);var l={document:o,editor:u,onResize:u.resize.bind(u,null)};return i.addListener(window,"resize",l.onResize),u.on("destroy",function(){i.removeListener(window,"resize",l.onResize)}),e.env=u.env=l,u},t.createEditSession=function(e,t){var n=new o(e,t);return n.setUndoManager(new u),n},t.EditSession=o,t.UndoManager=u}),define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e,t,n){e("./regexp"),e("./es5-shim")}),define("ace/lib/regexp",["require","exports","module"],function(e,t,n){function o(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function u(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var r=n||0;r<e.length;r++)if(e[r]===t)return r;return-1}var r={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},i=r.exec.call(/()??/,"")[1]===undefined,s=function(){var e=/^/g;return r.test.call(e,""),!e.lastIndex}();if(s&&i)return;RegExp.prototype.exec=function(e){var t=r.exec.apply(this,arguments),n,a;if(typeof e=="string"&&t){!i&&t.length>1&&u(t,"")>-1&&(a=RegExp(this.source,r.replace.call(o(this),"g","")),r.replace.call(e.slice(t.index),a,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===undefined&&(t[e]=undefined)}));if(this._xregexp&&this._xregexp.captureNames)for(var f=1;f<t.length;f++)n=this._xregexp.captureNames[f-1],n&&(t[n]=t[f]);!s&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--}return t},s||(RegExp.prototype.test=function(e){var t=r.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t})}),define("ace/lib/es5-shim",["require","exports","module"],function(e,t,n){function r(){}function w(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}function H(e){return e=+e,e!==e?e=0:e!==0&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function B(e){var t=typeof e;return e===null||t==="undefined"||t==="boolean"||t==="number"||t==="string"}function j(e){var t,n,r;if(B(e))return e;n=e.valueOf;if(typeof n=="function"){t=n.call(e);if(B(t))return t}r=e.toString;if(typeof r=="function"){t=r.call(e);if(B(t))return t}throw new TypeError}Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError("Function.prototype.bind called on incompatible "+n);var i=u.call(arguments,1),s=function(){if(this instanceof s){var e=n.apply(this,i.concat(u.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(u.call(arguments)))};return n.prototype&&(r.prototype=n.prototype,s.prototype=new r,r.prototype=null),s});var i=Function.prototype.call,s=Array.prototype,o=Object.prototype,u=s.slice,a=i.bind(o.toString),f=i.bind(o.hasOwnProperty),l,c,h,p,d;if(d=f(o,"__defineGetter__"))l=i.bind(o.__defineGetter__),c=i.bind(o.__defineSetter__),h=i.bind(o.__lookupGetter__),p=i.bind(o.__lookupSetter__);if([1,2].splice(0).length!=2)if(!function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var t=[],n;t.splice.apply(t,e(20)),t.splice.apply(t,e(26)),n=t.length,t.splice(5,0,"XXX"),n+1==t.length;if(n+1==t.length)return!0}())Array.prototype.splice=function(e,t){var n=this.length;e>0?e>n&&(e=n):e==void 0?e=0:e<0&&(e=Math.max(n+e,0)),e+t<n||(t=n-e);var r=this.slice(e,e+t),i=u.call(arguments,2),s=i.length;if(e===n)s&&this.push.apply(this,i);else{var o=Math.min(t,n-e),a=e+o,f=a+s-o,l=n-a,c=n-o;if(f<a)for(var h=0;h<l;++h)this[f+h]=this[a+h];else if(f>a)for(h=l;h--;)this[f+h]=this[a+h];if(s&&e===c)this.length=c,this.push.apply(this,i);else{this.length=c+s;for(h=0;h<s;++h)this[e+h]=i[h]}}return r};else{var v=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?v.apply(this,[e===void 0?0:e,t===void 0?this.length-e:t].concat(u.call(arguments,2))):[]}}Array.isArray||(Array.isArray=function(t){return a(t)=="[object Array]"});var m=Object("a"),g=m[0]!="a"||!(0 in m);Array.prototype.forEach||(Array.prototype.forEach=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=arguments[1],s=-1,o=r.length>>>0;if(a(t)!="[object Function]")throw new TypeError;while(++s<o)s in r&&t.call(i,r[s],s,n)}),Array.prototype.map||(Array.prototype.map=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=Array(i),o=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var u=0;u<i;u++)u in r&&(s[u]=t.call(o,r[u],u,n));return s}),Array.prototype.filter||(Array.prototype.filter=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=[],o,u=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var f=0;f<i;f++)f in r&&(o=r[f],t.call(u,o,f,n)&&s.push(o));return s}),Array.prototype.every||(Array.prototype.every=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&!t.call(s,r[o],o,n))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&t.call(s,r[o],o,n))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0;if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");if(!i&&arguments.length==1)throw new TypeError("reduce of empty array with no initial value");var s=0,o;if(arguments.length>=2)o=arguments[1];else do{if(s in r){o=r[s++];break}if(++s>=i)throw new TypeError("reduce of empty array with no initial value")}while(!0);for(;s<i;s++)s in r&&(o=t.call(void 0,o,r[s],s,n));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0;if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");if(!i&&arguments.length==1)throw new TypeError("reduceRight of empty array with no initial value");var s,o=i-1;if(arguments.length>=2)s=arguments[1];else do{if(o in r){s=r[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}while(!0);do o in this&&(s=t.call(void 0,s,r[o],o,n));while(o--);return s});if(!Array.prototype.indexOf||[0,1].indexOf(1,2)!=-1)Array.prototype.indexOf=function(t){var n=g&&a(this)=="[object String]"?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=0;arguments.length>1&&(i=H(arguments[1])),i=i>=0?i:Math.max(0,r+i);for(;i<r;i++)if(i in n&&n[i]===t)return i;return-1};if(!Array.prototype.lastIndexOf||[0,1].lastIndexOf(0,-3)!=-1)Array.prototype.lastIndexOf=function(t){var n=g&&a(this)=="[object String]"?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=r-1;arguments.length>1&&(i=Math.min(i,H(arguments[1]))),i=i>=0?i:r-Math.abs(i);for(;i>=0;i--)if(i in n&&t===n[i])return i;return-1};Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:o)});if(!Object.getOwnPropertyDescriptor){var y="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(t,n){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(y+t);if(!f(t,n))return;var r,i,s;r={enumerable:!0,configurable:!0};if(d){var u=t.__proto__;t.__proto__=o;var i=h(t,n),s=p(t,n);t.__proto__=u;if(i||s)return i&&(r.get=i),s&&(r.set=s),r}return r.value=t[n],r}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)});if(!Object.create){var b;Object.prototype.__proto__===null?b=function(){return{__proto__:null}}:b=function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(t,n){var r;if(t===null)r=b();else{if(typeof t!="object")throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,r=new i,r.__proto__=t}return n!==void 0&&Object.defineProperties(r,n),r}}if(Object.defineProperty){var E=w({}),S=typeof document=="undefined"||w(document.createElement("div"));if(!E||!S)var x=Object.defineProperty}if(!Object.defineProperty||x){var T="Property description must be an object: ",N="Object.defineProperty called on non-object: ",C="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,n,r){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(N+t);if(typeof r!="object"&&typeof r!="function"||r===null)throw new TypeError(T+r);if(x)try{return x.call(Object,t,n,r)}catch(i){}if(f(r,"value"))if(d&&(h(t,n)||p(t,n))){var s=t.__proto__;t.__proto__=o,delete t[n],t[n]=r.value,t.__proto__=s}else t[n]=r.value;else{if(!d)throw new TypeError(C);f(r,"get")&&l(t,n,r.get),f(r,"set")&&c(t,n,r.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,n){for(var r in n)f(n,r)&&Object.defineProperty(t,r,n[r]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(k){Object.freeze=function(t){return function(n){return typeof n=="function"?n:t(n)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;var n="";while(f(t,n))n+="?";t[n]=!0;var r=f(t,n);return delete t[n],r});if(!Object.keys){var L=!0,A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],O=A.length;for(var M in{toString:null})L=!1;Object.keys=function I(e){if(typeof e!="object"&&typeof e!="function"||e===null)throw new TypeError("Object.keys called on a non-object");var I=[];for(var t in e)f(e,t)&&I.push(t);if(L)for(var n=0,r=O;n<r;n++){var i=A[n];f(e,i)&&I.push(i)}return I}}Date.now||(Date.now=function(){return(new Date).getTime()});var _="	\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||_.trim()){_="["+_+"]";var D=new RegExp("^"+_+_+"*"),P=new RegExp(_+_+"*$");String.prototype.trim=function(){return String(this).replace(D,"").replace(P,"")}}var F=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),define("ace/lib/dom",["require","exports","module"],function(e,t,n){if(typeof document=="undefined")return;var r="http://www.w3.org/1999/xhtml";t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||r,e):document.createElement(e)},t.hasCssClass=function(e,t){var n=e.className.split(/\s+/g);return n.indexOf(t)!==-1},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){var n=e.className.split(/\s+/g);for(;;){var r=n.indexOf(t);if(r==-1)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){var n=e.className.split(/\s+/g),r=!0;for(;;){var i=n.indexOf(t);if(i==-1)break;r=!1,n.splice(i,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n=0,r;t=t||document;if(t.createStyleSheet&&(r=t.styleSheets)){while(n<r.length)if(r[n++].owningElement.id===e)return!0}else if(r=t.getElementsByTagName("style"))while(n<r.length)if(r[n++].id===e)return!0;return!1},t.importCssString=function(n,i,s){s=s||document;if(i&&t.hasCssString(i,s))return null;var o;s.createStyleSheet?(o=s.createStyleSheet(),o.cssText=n,i&&(o.owningElement.id=i)):(o=s.createElementNS?s.createElementNS(r,"style"):s.createElement("style"),o.appendChild(s.createTextNode(n)),i&&(o.id=i),t.getDocumentHead(s).appendChild(o))},t.importCssStylsheet=function(e,n){if(n.createStyleSheet)n.createStyleSheet(e);else{var r=t.createElement("link");r.rel="stylesheet",r.href=e,t.getDocumentHead(n).appendChild(r)}},t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth},t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight},window.pageYOffset!==undefined?(t.getPageScrollTop=function(){return window.pageYOffset},t.getPageScrollLeft=function(){return window.pageXOffset}):(t.getPageScrollTop=function(){return document.body.scrollTop},t.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?t.computedStyle=function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:t.computedStyle=function(e,t){return t?e.currentStyle[t]:e.currentStyle},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=t.createElement("ace_outer"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",r.appendChild(n);var s=e.documentElement;s.appendChild(r);var o=n.offsetWidth;i.overflow="scroll";var u=n.offsetWidth;return o==u&&(u=r.clientWidth),s.removeChild(r),o-u},t.setInnerHtml=function(e,t){var n=e.cloneNode(!1);return n.innerHTML=t,e.parentNode.replaceChild(n,e),n},"textContent"in document.documentElement?(t.setInnerText=function(e,t){e.textContent=t},t.getInnerText=function(e){return e.textContent}):(t.setInnerText=function(e,t){e.innerText=t},t.getInnerText=function(e){return e.innerText}),t.getParentWindow=function(e){return e.defaultView||e.parentWindow}}),define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent","ace/lib/dom"],function(e,t,n){function o(e,t,n){var s=0;!i.isOpera||"KeyboardEvent"in window||!i.isMac?s=0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0):s=0|(t.metaKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.ctrlKey?8:0);if(!i.isMac&&u){if(u[91]||u[92])s|=8;if(u.altGr){if((3&s)==3)return;u.altGr=0}if(n==18||n==17){var o=t.location||t.keyLocation;if(n==17&&o==1)a=t.timeStamp;else if(n==18&&s==3&&o==2){var f=-a;a=t.timeStamp,f+=a,f<3&&(u.altGr=!0)}}}if(n in r.MODIFIER_KEYS){switch(r.MODIFIER_KEYS[n]){case"Alt":s=2;break;case"Shift":s=4;break;case"Ctrl":s=1;break;default:s=8}n=0}s&8&&(n==91||n==93)&&(n=0);if(!s&&n==13)if(t.keyLocation||t.location==3){e(t,s,-n);if(t.defaultPrevented)return}return!!s||n in r.FUNCTION_KEYS||n in r.PRINTABLE_KEYS?e(t,s,n):!1}var r=e("./keys"),i=e("./useragent"),s=e("./dom");t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var r=function(){n(window.event)};n._wrapper=r,e.attachEvent("on"+t,r)}},t.removeListener=function(e,t,n){if(e.removeEventListener)return e.removeEventListener(t,n,!1);e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return e.type=="dblclick"?0:e.type=="contextmenu"||e.ctrlKey&&i.isMac?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},document.documentElement.setCapture?t.capture=function(e,n,r){function s(o){n(o),i||(i=!0,r(o)),t.removeListener(e,"mousemove",n),t.removeListener(e,"mouseup",s),t.removeListener(e,"losecapture",s),e.releaseCapture()}var i=!1;t.addListener(e,"mousemove",n),t.addListener(e,"mouseup",s),t.addListener(e,"losecapture",s),e.setCapture()}:t.capture=function(e,t,n){function r(e){t&&t(e),n&&n(e),document.removeEventListener("mousemove",t,!0),document.removeEventListener("mouseup",r,!0),e.stopPropagation()}document.addEventListener("mousemove",t,!0),document.addEventListener("mouseup",r,!0)},t.addMouseWheelListener=function(e,n){if("onmousewheel"in e){var r=8;t.addListener(e,"mousewheel",function(e){e.wheelDeltaX!==undefined?(e.wheelX=-e.wheelDeltaX/r,e.wheelY=-e.wheelDeltaY/r):(e.wheelX=0,e.wheelY=-e.wheelDelta/r),n(e)})}else"onwheel"in e?t.addListener(e,"wheel",function(e){e.wheelX=(e.deltaX||0)*5,e.wheelY=(e.deltaY||0)*5,n(e)}):t.addListener(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=(e.detail||0)*5,e.wheelY=0):(e.wheelX=0,e.wheelY=(e.detail||0)*5),n(e)})},t.addMultiMouseDownListener=function(e,n,r,s){var o=0,u,a,f,l={2:"dblclick",3:"tripleclick",4:"quadclick"};t.addListener(e,"mousedown",function(e){if(t.getButton(e)!=0)o=0;else{var i=Math.abs(e.clientX-u)>5||Math.abs(e.clientY-a)>5;if(!f||i)o=0;o+=1,f&&clearTimeout(f),f=setTimeout(function(){f=null},n[o-1]||600)}o==1&&(u=e.clientX,a=e.clientY),r[s]("mousedown",e);if(o>4)o=0;else if(o>1)return r[s](l[o],e)}),i.isOldIE&&t.addListener(e,"dblclick",function(e){o=2,f&&clearTimeout(f),f=setTimeout(function(){f=null},n[o-1]||600),r[s]("mousedown",e),r[s](l[o],e)})};var u=null,a=0;t.addCommandKeyListener=function(e,n){var r=t.addListener;if(i.isOldGecko||i.isOpera&&!("KeyboardEvent"in window)){var s=null;r(e,"keydown",function(e){s=e.keyCode}),r(e,"keypress",function(e){return o(n,e,s)})}else{var a=null;r(e,"keydown",function(e){u[e.keyCode]=!0;var t=o(n,e,e.keyCode);return a=e.defaultPrevented,t}),r(e,"keypress",function(e){a&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),a=null)}),r(e,"keyup",function(e){u[e.keyCode]=null}),u||(u=Object.create(null),r(window,"focus",function(e){u=Object.create(null)}))}};if(window.postMessage&&!i.isOldIE){var f=1;t.nextTick=function(e,n){n=n||window;var r="zero-timeout-message-"+f;t.addListener(n,"message",function i(s){s.data==r&&(t.stopPropagation(s),t.removeListener(n,"message",i),e())}),n.postMessage(r,"*")}}t.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){var r=e("./oop"),i=function(){var e={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}};for(var t in e.FUNCTION_KEYS){var n=e.FUNCTION_KEYS[t].toLowerCase();e[n]=parseInt(t,10)}return r.mixin(e,e.MODIFIER_KEYS),r.mixin(e,e.PRINTABLE_KEYS),r.mixin(e,e.FUNCTION_KEYS),e.enter=e["return"],e.escape=e.esc,e.del=e["delete"],e[173]="-",e}();r.mixin(t,i),t.keyCodeToString=function(e){return(i[e]||String.fromCharCode(e)).toLowerCase()}}),define("ace/lib/oop",["require","exports","module"],function(e,t,n){t.inherits=function(){var e=function(){};return function(t,n){e.prototype=n.prototype,t.super_=n.prototype,t.prototype=new e,t.prototype.constructor=t}}(),t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}}),define("ace/lib/useragent",["require","exports","module"],function(e,t,n){t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};if(typeof navigator!="object")return;var r=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),i=navigator.userAgent;t.isWin=r=="win",t.isMac=r=="mac",t.isLinux=r=="linux",t.isIE=(navigator.appName=="Microsoft Internet Explorer"||navigator.appName.indexOf("MSAppHost")>=0)&&parseFloat(navigator.userAgent.match(/MSIE ([0-9]+[\.0-9]+)/)[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=window.controllers&&window.navigator.product==="Gecko",t.isOldGecko=t.isGecko&&parseInt((navigator.userAgent.match(/rv\:(\d+)/)||[])[1],10)<4,t.isOpera=window.opera&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(i.split("WebKit/")[1])||undefined,t.isChrome=parseFloat(i.split(" Chrome/")[1])||undefined,t.isAIR=i.indexOf("AdobeAIR")>=0,t.isIPad=i.indexOf("iPad")>=0,t.isTouchPad=i.indexOf("TouchPad")>=0}),define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config"],function(e,t,n){e("./lib/fixoldbrowsers");var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/lang"),o=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,a=e("./mouse/mouse_handler").MouseHandler,f=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,c=e("./edit_session").EditSession,h=e("./search").Search,p=e("./range").Range,d=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,g=e("./config"),y=function(e,t){var n=e.getContainerElement();this.container=n,this.renderer=e,this.commands=new v(o.isMac?"mac":"win",m),this.textInput=new u(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new l(this),this.$mouseHandler=new a(this),new f(this),this.$blockScrolling=0,this.$search=(new h).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this.setSession(t||new c("")),g.resetOptions(this),g._emit("editor",this)};(function(){r.implement(this,d),this.$initOperationListeners=function(){function e(e){return e[e.length-1]}this.selections=[],this.commands.on("exec",function(t){this.startOperation(t);var n=t.command;if(n.group=="fileJump"){var r=this.prevOp;if(!r||r.command.group!="fileJump")this.lastFileJumpPos=e(this.selections)}else this.lastFileJumpPos=null}.bind(this),!0),this.commands.on("afterExec",function(e){var t=e.command;if(t.group=="fileJump"&&this.lastFileJumpPos&&!this.curOp.selectionChanged){this.selection.fromJSON(this.lastFileJumpPos);return}this.endOperation(e)}.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp={command:e.command||{},args:e.args},this.selections.push(this.selection.toJSON())},this.endOperation=function(){this.curOp&&(this.prevOp=this.curOp,this.curOp=null)},this.$historyTracker=function(e){if(!this.$mergeUndoDeltas)return;var t=this.prevOp,n=["backspace","del","insertstring"],r=t.command&&e.command.name==t.command.name;if(e.command.name=="insertstring"){var i=e.args;this.mergeNextCommand===undefined&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(i)||/\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&n.indexOf(e.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:n.indexOf(e.command.name)!==-1&&(this.sequenceStartTime=Date.now())},this.setKeyboardHandler=function(e){if(!e)this.keyBinding.setKeyboardHandler(null);else if(typeof e=="string"){this.$keybindingId=e;var t=this;g.loadModule(["keybinding",e],function(n){t.$keybindingId==e&&t.keyBinding.setKeyboardHandler(n&&n.handler)})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e)},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session==e)return;if(this.session){var t=this.session;this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.removeEventListener("changeCursor",this.$onCursorChange),n.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=e,this.$onDocumentChange=this.onDocumentChange.bind(this),e.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull(),this._emit("changeSession",{session:e,oldSession:t})},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?t==1?this.navigateFileEnd():t==-1&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e){this.renderer.setTheme(e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||i.computedStyle(this.container,"fontSize")},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null);if(this.$highlightPending)return;var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session.findMatchingBracket(e.getCursorPosition());if(t)var n=new p(t.row,t.column,t.row,t.column+1);else if(e.session.$mode.getMatching)var n=e.session.$mode.getMatching(e.session);n&&(e.session.$bracketHighlight=e.session.addMarker(n,"ace_bracket","text"))},50)},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(){if(this.$isFocused)return;this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus")},this.onBlur=function(){if(!this.$isFocused)return;this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur")},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t=e.data,n=t.range,r;n.start.row==n.end.row&&t.action!="insertLines"&&t.action!="removeLines"?r=n.end.row:r=Infinity,this.renderer.updateLines(n.start.row,r),this._emit("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||this.renderer.scrollCursorIntoView(),this.$highlightBrackets(),this.$updateHighlightActiveLine(),this._emit("changeSelection")},this.$updateHighlightActiveLine=function(){var e=this.getSession(),t;if(this.$highlightActiveLine){if(this.$selectionStyle!="line"||!this.selection.isMultiLine())t=this.getCursorPosition();this.renderer.$maxLines&&this.session.getLength()===1&&(t=!1)}if(e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new p(t.row,t.column,t.row,Infinity);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._emit("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null;if(!this.selection.isEmpty()){var n=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",r)}else this.$updateHighlightActiveLine();var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._emit("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(t.isEmpty()||t.isMultiLine())return;var n=t.start.column-1,r=t.end.column+1,i=e.getLine(t.start.row),s=i.length,o=i.substring(Math.max(n,0),Math.min(r,s));if(n>=0&&/^[\w\d]/.test(o)||r<=s&&/[\w\d]$/.test(o))return;o=i.substring(t.start.column,t.end.column);if(!/^[\w\d]+$/.test(o))return;var u=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o});return u},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getCopyText=function(){var e="";return this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange())),this._emit("copy",e),e},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e){if(this.$readOnly)return;this._emit("paste",e),this.insert(e)},this.execCommand=function(e,t){this.commands.exec(e,this,t)},this.insert=function(e){var t=this.session,n=t.getMode(),r=this.getCursorPosition();if(this.getBehavioursEnabled()){var i=n.transformAction(t.getState(r.row),"insertion",this,t,e);i&&(e!==i.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),e=i.text)}e=="	"&&(e=this.session.getTabString());if(!this.selection.isEmpty()){var s=this.getSelectionRange();r=this.session.remove(s),this.clearSelection()}else if(this.session.getOverwrite()){var s=new p.fromPoints(r,r);s.end.column+=e.length,this.session.remove(s)}if(e=="\n"||e=="\r\n"){var o=t.getLine(r.row);if(r.column>o.search(/\S|$/)){var u=o.substr(r.column).search(/\S|$/);t.doc.removeInLine(r.row,r.column,r.column+u)}}this.clearSelection();var a=r.column,f=t.getState(r.row),o=t.getLine(r.row),l=n.checkOutdent(f,o,e),c=t.insert(r,e);i&&i.selection&&(i.selection.length==2?this.selection.setSelectionRange(new p(r.row,a+i.selection[0],r.row,a+i.selection[1])):this.selection.setSelectionRange(new p(r.row+i.selection[0],i.selection[1],r.row+i.selection[2],i.selection[3])));if(t.getDocument().isNewLine(e)){var h=n.getNextLineIndent(f,o.slice(0,r.column),t.getTabString());t.insert({row:r.row+1,column:0},h)}l&&n.autoOutdent(f,t,r.row)},this.onTextInput=function(e){this.keyBinding.onTextInput(e)},this.onCommandKey=function(e,t,n){this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&(e=="left"?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(t.start.row),i=n.getMode().transformAction(r,"deletion",this,n,t);if(t.end.column==0){var s=n.getTextRange(t);if(s[s.length-1]=="\n"){var o=n.getLine(t.end.row);/^\s+$/.test(o)&&(t.end.column=o.length)}}i&&(t=i)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(!this.selection.isEmpty())return;var e=this.getCursorPosition(),t=e.column;if(t===0)return;var n=this.session.getLine(e.row),r,i;t<n.length?(r=n.charAt(t)+n.charAt(t-1),i=new p(e.row,t-1,e.row,t+1)):(r=n.charAt(t-1)+n.charAt(t-2),i=new p(e.row,t-2,e.row,t)),this.session.replace(i,r)},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"	");return}if(t.start.column<t.end.column){var r=e.getTextRange(t);if(!/^\s+$/.test(r)){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"	");return}}var i=e.getLine(t.start.row),o=t.start,u=e.getTabSize(),a=e.documentToScreenColumn(o.row,o.column);if(this.session.getUseSoftTabs())var f=u-a%u,l=s.stringRepeat(" ",f);else{var f=a%u;while(i[t.start.column]==" "&&f)t.start.column--,f--;this.selection.setSelectionRange(t),l="	"}return this.insert(l)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"	")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){var e=this.$getSelectedRows(),t=this.session,n=[];for(i=e.first;i<=e.last;i++)n.push(t.getLine(i));n.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});var r=new p(0,0,0,0);for(var i=e.first;i<=e.last;i++){var s=t.getLine(i);r.start.row=i,r.end.row=i,r.end.column=s.length,t.replace(r,n[i-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;var r=this.session.getLine(e);while(n.lastIndex<t){var i=n.exec(r);if(i.index<=t&&i.index+i[0].length>=t){var s={value:i[0],start:i.index,end:i.index+i[0].length};return s}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new p(t,n-1,t,n),i=this.session.getTextRange(r);if(!isNaN(parseFloat(i))&&isFinite(i)){var s=this.getNumberAt(t,n);if(s){var o=s.value.indexOf(".")>=0?s.start+s.value.indexOf(".")+1:s.end,u=s.start+s.value.length-o,a=parseFloat(s.value);a*=Math.pow(10,u),o!==s.end&&n<o?e*=Math.pow(10,s.end-n-1):e*=Math.pow(10,s.end-n),a+=e,a/=Math.pow(10,u);var f=a.toFixed(u),l=new p(t,s.start,t,s.end);this.session.replace(l,f),this.moveCursorTo(t,Math.max(s.start+1,n+f.length-s.value.length))}}},this.removeLines=function(){var e=this.$getSelectedRows(),t;e.first===0||e.last+1<this.session.getLength()?t=new p(e.first,0,e.last+1,0):t=new p(e.first-1,this.session.getLine(e.first-1).length,e.last,this.session.getLine(e.last).length),this.session.remove(t),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),r=e.isBackwards();if(n.isEmpty()){var i=n.start.row;t.duplicateLines(i,i)}else{var s=r?n.start:n.end,o=t.insert(s,t.getTextRange(n),!1);n.start=s,n.end=o,e.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(function(e,t){return this.session.moveLinesDown(e,t)})},this.moveLinesUp=function(){this.$moveLines(function(e,t){return this.session.moveLinesUp(e,t)})},this.moveText=function(e,t){return this.session.moveText(e,t)},this.copyLinesUp=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t),0})},this.copyLinesDown=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t)})},this.$moveLines=function(e){var t=this.selection;if(!t.inMultiSelectMode||this.inVirtualSelectionMode){var n=t.toOrientedRange(),r=this.$getSelectedRows(n),i=e.call(this,r.first,r.last);n.moveBy(i,0),t.fromOrientedRange(n)}else{var s=t.rangeList.ranges;t.rangeList.detach(this.session);for(var o=s.length;o--;){var u=o,r=s[o].collapseRows(),a=r.end.row,f=r.start.row;while(o--){var r=s[o].collapseRows();if(!(f-r.end.row<=1))break;f=r.end.row}o++;var i=e.call(this,f,a);while(u>=o)s[u].moveBy(i,0),u--}t.fromOrientedRange(t.ranges[0]),t.rangeList.attach(this.session)}},this.$getSelectedRows=function(){var e=this.getSelectionRange().collapseRows();return{first:e.start.row,last:e.end.row}},this.onCompositionStart=function(e){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,r=this.renderer.layerConfig,i=e*Math.floor(r.height/r.lineHeight);this.$blockScrolling++,t==1?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):t==0&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection()),this.$blockScrolling--;var s=n.scrollTop;n.scrollBy(0,i*r.lineHeight),t!=null&&n.scrollCursorIntoView(null,.5),n.animateScrolling(s)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,r){this.renderer.scrollToLine(e,t,n,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e){var t=this.getCursorPosition(),n=this.session.getBracketRange(t);if(!n){n=this.find({needle:/[{}()\[\]]/g,preventScroll:!0,start:{row:t.row,column:t.column-1}});if(!n)return;var r=n.start;r.row==t.row&&Math.abs(r.column-t.column)<2&&(n=this.session.getBracketRange(r))}r=n&&n.cursor||r,r&&(e?n&&n.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(r.row,r.column):(this.clearSelection(),this.moveCursorTo(r.row,r.column)))},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.$blockScrolling-=1,this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),e=e||1,this.selection.moveCursorBy(-e,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),e=e||1,this.selection.moveCursorBy(e,0)},this.navigateLeft=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorLeft()}this.clearSelection()},this.navigateRight=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorRight()}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){var e=this.renderer.scrollTop;this.selection.moveCursorFileEnd(),this.clearSelection(),this.renderer.animateScrolling(e)},this.navigateFileStart=function(){var e=this.renderer.scrollTop;this.selection.moveCursorFileStart(),this.clearSelection(),this.renderer.animateScrolling(e)},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,e)&&(r=1),n!==null&&(this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;this.$blockScrolling+=1;var i=this.getSelectionRange();this.clearSelection(),this.selection.moveCursorTo(0,0);for(var s=n.length-1;s>=0;--s)this.$tryReplace(n[s],e)&&r++;return this.selection.setSelectionRange(i),this.$blockScrolling-=1,r},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return t=this.$search.replace(n,t),t!==null?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),typeof e=="string"||e instanceof RegExp?t.needle=e:typeof e=="object"&&r.mixin(t,e);var i=this.selection.getRange();t.needle==null&&(e=this.session.getTextRange(i)||this.$search.$options.needle,e||(i=this.session.getWordRange(i.start.row,i.start.column),e=this.session.getTextRange(i)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:i});var s=this.$search.find(this.session);if(t.preventScroll)return s;if(s)return this.revealRange(s,n),s;t.backwards?i.start=i.end:i.end=i.start,this.selection.setRange(i)},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.$blockScrolling+=1,this.session.unfold(e),this.selection.setSelectionRange(e),this.$blockScrolling-=1;var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),t!=0&&this.renderer.animateScrolling(n)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._emit("destroy",this)},this.setAutoScrollEditorIntoView=function(e){if(e===!1)return;var t,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var i=this.$scrollAnchor;i.style.cssText="position:absolute",this.container.insertBefore(i,this.container.firstChild);var s=this.on("changeSelection",function(){r=!0}),o=this.renderer.on("beforeRender",function(){r&&(t=n.renderer.container.getBoundingClientRect())}),u=this.renderer.on("afterRender",function(){if(r&&t&&n.isFocused()){var e=n.renderer,s=e.$cursorLayer.$pixelPos,o=e.layerConfig,u=s.top-o.offset;s.top>=0&&u+t.top<0?r=!0:s.top<o.height&&s.top+t.top+o.lineHeight>window.innerHeight?r=!1:r=null,r!=null&&(i.style.top=u+"px",i.style.left=s.left+"px",i.style.height=o.lineHeight+"px",i.scrollIntoView(r)),r=t=null}});this.setAutoScrollEditorIntoView=function(e){if(e===!0)return;delete this.setAutoScrollEditorIntoView,this.removeEventListener("changeSelection",s),this.renderer.removeEventListener("afterRender",u),this.renderer.removeEventListener("beforeRender",o)}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;if(!t)return;t.setSmoothBlinking(e=="smooth"),t.isBlinking=!this.$readOnly&&e!="wide"}}).call(y.prototype),g.defineOptions(y.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._emit("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},hScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",focusTimout:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",foldStyle:"session"}),t.Editor=y}),define("ace/lib/lang",["require","exports","module"],function(e,t,n){t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){var n="";while(t>0){t&1&&(n+=e);if(t>>=1)e+=e}return n};var r=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)e[n]&&typeof e[n]=="object"?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function(e){if(typeof e!="object")return e;var t=e.constructor();for(var n in e)typeof e[n]=="object"?t[n]=this.deepCopy(e[n]):t[n]=e[n];return t},t.arrayToMap=function(e){var t={};for(var n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)};return i.delay=i,i.schedule=function(e){n==null&&(n=setTimeout(r,e||0))},i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(e,t,n){var r=e("../lib/event"),i=e("../lib/useragent"),s=e("../lib/dom"),o=e("../lib/lang"),u=i.isChrome<18,a=function(e,t){function b(e){if(h)return;if(k)t=0,r=e?0:n.value.length-1;else var t=e?2:1,r=2;try{n.setSelectionRange(t,r)}catch(i){}}function w(){if(h)return;n.value=a,i.isWebKit&&y.schedule()}function F(){setTimeout(function(){p&&(n.style.cssText=p,p=""),t.renderer.$keepTextAreaAtCursor==null&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},0)}var n=s.createElement("textarea");n.className="ace_text-input",i.isTouchPad&&n.setAttribute("x-palm-disable-auto-cap",!0),n.wrap="off",n.autocorrect="off",n.autocapitalize="off",n.spellcheck=!1,n.style.bottom="2000em",e.insertBefore(n,e.firstChild);var a="",f=!1,l=!1,c=!1,h=!1,p="",d=!0;try{var v=document.activeElement===n}catch(m){}r.addListener(n,"blur",function(){t.onBlur(),v=!1}),r.addListener(n,"focus",function(){v=!0,t.onFocus(),b()}),this.focus=function(){n.focus()},this.blur=function(){n.blur()},this.isFocused=function(){return v};var g=o.delayedCall(function(){v&&b(d)}),y=o.delayedCall(function(){h||(n.value=a,v&&b())});i.isWebKit||t.addEventListener("changeSelection",function(){t.selection.isEmpty()!=d&&(d=!d,g.schedule())}),w(),v&&t.onFocus();var E=function(e){return e.selectionStart===0&&e.selectionEnd===e.value.length};!n.setSelectionRange&&n.createTextRange&&(n.setSelectionRange=function(e,t){var n=this.createTextRange();n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t),n.select()},E=function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.text==e.value});if(i.isOldIE){var S=!1,x=function(e){if(S)return;var t=n.value;if(h||!t||t==a)return;if(e&&t==a[0])return T.schedule();A(t),S=!0,w(),S=!1},T=o.delayedCall(x);r.addListener(n,"propertychange",x);var N={13:1,27:1};r.addListener(n,"keyup",function(e){h&&(!n.value||N[e.keyCode])&&setTimeout(B,0);if((n.value.charCodeAt(0)||0)<129)return;h?H():P()})}var C=function(e){f?f=!1:l?l=!1:E(n)?(t.selectAll(),b()):k&&b(t.selection.isEmpty())},k=null;this.setInputHandler=function(e){k=e},this.getInputHandler=function(){return k};var L=!1,A=function(e){k&&(e=k(e),k=null),c?(b(),e&&t.onPaste(e),c=!1):e==a[0]?L&&t.execCommand("del",{source:"ace"}):(e.substring(0,2)==a?e=e.substr(2):e[0]==a[0]?e=e.substr(1):e[e.length-1]==a[0]&&(e=e.slice(0,-1)),e[e.length-1]==a[0]&&(e=e.slice(0,-1)),e&&t.onTextInput(e)),L&&(L=!1)},O=function(e){if(h)return;var t=n.value;A(t),w()},M=function(e){var i=t.getCopyText();if(!i){r.preventDefault(e);return}var s=e.clipboardData||window.clipboardData;if(s&&!u){var o=s.setData("Text",i);o&&(t.onCut(),r.preventDefault(e))}o||(f=!0,n.value=i,n.select(),setTimeout(function(){f=!1,w(),b(),t.onCut()}))},_=function(e){var i=t.getCopyText();if(!i){r.preventDefault(e);return}var s=e.clipboardData||window.clipboardData;if(s&&!u){var o=s.setData("Text",i);o&&(t.onCopy(),r.preventDefault(e))}o||(l=!0,n.value=i,n.select(),setTimeout(function(){l=!1,w(),b(),t.onCopy()}))},D=function(e){var s=e.clipboardData||window.clipboardData;if(s){var o=s.getData("Text");o&&t.onPaste(o),i.isIE&&setTimeout(b),r.preventDefault(e)}else n.value="",c=!0};r.addCommandKeyListener(n,t.onCommandKey.bind(t)),r.addListener(n,"select",C),r.addListener(n,"input",O),r.addListener(n,"cut",M),r.addListener(n,"copy",_),r.addListener(n,"paste",D),(!("oncut"in n)||!("oncopy"in n)||!("onpaste"in n))&&r.addListener(e,"keydown",function(e){if(i.isMac&&!e.metaKey||!e.ctrlKey)return;switch(e.keyCode){case 67:_(e);break;case 86:D(e);break;case 88:M(e)}});var P=function(e){if(h)return;h={},t.onCompositionStart(),setTimeout(H,0),t.on("mousedown",B),t.selection.isEmpty()||(t.insert(""),t.session.markUndoGroup(),t.selection.clearSelection()),t.session.markUndoGroup()},H=function(){if(!h)return;t.onCompositionUpdate(n.value),h.lastValue&&t.undo(),h.lastValue=n.value.replace(/\x01/g,"");if(h.lastValue){var e=t.selection.getRange();t.insert(h.lastValue),t.session.markUndoGroup(),h.range=t.selection.getRange(),t.selection.setRange(e),t.selection.clearSelection()}},B=function(e){var r=h;h=!1;var i=setTimeout(function(){var e=n.value.replace(/\x01/g,"");if(h)return;e==r.lastValue?w():!r.lastValue&&e&&(w(),A(e))});k=function(n){return clearTimeout(i),n=n.replace(/\x01/g,""),n==r.lastValue?"":(r.lastValue&&t.undo(),n)},t.onCompositionEnd(),t.removeListener("mousedown",B),e.type=="compositionend"&&r.range&&t.selection.setRange(r.range)},j=o.delayedCall(H,50);r.addListener(n,"compositionstart",P),r.addListener(n,i.isGecko?"text":"keyup",function(){j.schedule()}),r.addListener(n,"compositionend",B),this.getElement=function(){return n},this.setReadOnly=function(e){n.readOnly=e},this.onContextMenu=function(e){L=!0,p||(p=n.style.cssText),n.style.cssText="z-index:100000;"+(i.isIE?"opacity:0.1;":""),b(t.selection.isEmpty()),t._emit("nativecontextmenu",{target:t,domEvent:e});var o=t.container.getBoundingClientRect(),u=s.computedStyle(t.container),a=o.top+(parseInt(u.borderTopWidth)||0),f=o.left+(parseInt(o.borderLeftWidth)||0),l=o.bottom-a-n.clientHeight,c=function(e){n.style.left=e.clientX-f-2+"px",n.style.top=Math.min(e.clientY-a-2,l)+"px"};c(e);if(e.type!="mousedown")return;t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),i.isWin&&r.capture(t.container,c,F)},this.onContextMenuClose=F,(!i.isGecko||i.isMac)&&r.addListener(n,"contextmenu",function(e){t.textInput.onContextMenu(e),F()})};t.TextInput=a}),define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop","ace/config"],function(e,t,n){var r=e("../lib/event"),i=e("../lib/useragent"),s=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,u=e("./mouse_event").MouseEvent,a=e("./dragdrop").DragdropHandler,f=e("../config"),l=function(e){this.editor=e,new s(this),new o(this),new a(this);var t=e.renderer.getMouseEventTarget();r.addListener(t,"click",this.onMouseEvent.bind(this,"click")),r.addListener(t,"mousemove",this.onMouseMove.bind(this,"mousemove")),r.addMultiMouseDownListener(t,[300,300,250],this,"onMouseEvent"),r.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"));var n=e.renderer.$gutter;r.addListener(n,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),r.addListener(n,"click",this.onMouseEvent.bind(this,"gutterclick")),r.addListener(n,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),r.addListener(n,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),r.addListener(t,"mousedown",function(t){return e.focus(),r.preventDefault(t)}),r.addListener(n,"mousedown",function(t){return e.focus(),r.preventDefault(t)})};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new u(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;if(!n||!n.length)return;this.editor._emit(e,new u(t,this.editor))},this.onMouseWheel=function(e,t){var n=new u(t,this.editor);n.speed=this.$scrollSpeed*2,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){t&&this.setState(t),this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor.renderer;n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=null);var s=this,o=function(e){s.x=e.clientX,s.y=e.clientY},u=function(e){clearInterval(f),a(),s[s.state+"End"]&&s[s.state+"End"](e),s.$clickSelection=null,n.$keepTextAreaAtCursor==null&&(n.$keepTextAreaAtCursor=!0,n.$moveTextAreaToCursor()),s.isMousePressed=!1,s.onMouseEvent("mouseup",e)},a=function(){s[s.state]&&s[s.state]()};if(i.isOldIE&&e.domEvent.type=="dblclick")return setTimeout(function(){u(e)});r.capture(this.editor.container,o,u);var f=setInterval(a,20)}}).call(l.prototype),f.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:150},focusTimout:{initialValue:0}}),t.MouseHandler=l}),define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/useragent"],function(e,t,n){function o(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));var n=["select","startSelect","drag","dragEnd","dragWait","dragWaitEnd","startDrag","focusWait"];n.forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function u(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}function a(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row==e.end.row-1&&!e.start.column&&!e.end.column)var n=t.column-4;else var n=2*t.row-e.start.row-e.end.row;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var r=e("../lib/dom"),i=e("../lib/useragent"),s=0;(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var r=this.editor,i=e.getButton();if(i!==0){var s=r.getSelectionRange(),o=s.isEmpty();o&&(r.moveCursorToPosition(n),r.selection.clearSelection()),r.textInput.onContextMenu(e.domEvent);return}if(t&&!r.isFocused()){r.focus();if(this.$focusTimout&&!this.$clickSelection&&!r.inMultiSelectMode)return this.setState("focusWait"),this.captureMouse(e),e.preventDefault()}return!t||this.$clickSelection||e.getShiftKey()||r.inMultiSelectMode?this.startSelect(n):t&&(this.mousedownEvent.time=(new Date).getTime(),this.setState("dragWait")),this.captureMouse(e),e.preventDefault()},this.startSelect=function(e){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y),this.mousedownEvent.getShiftKey()?this.editor.selection.selectToPosition(e):this.$clickSelection||(this.editor.moveCursorToPosition(e),this.editor.selection.clearSelection()),this.setState("select")},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(r==-1)e=this.$clickSelection.end;else if(r==1)e=this.$clickSelection.start;else{var i=a(this.$clickSelection,n);n=i.cursor,e=i.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),i=n.selection[e](r.row,r.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(i.start),o=this.$clickSelection.comparePoint(i.end);if(s==-1&&o<=0){t=this.$clickSelection.end;if(i.end.row!=r.row||i.end.column!=r.column)r=i.start}else if(o==1&&s>=0){t=this.$clickSelection.start;if(i.start.row!=r.row||i.start.column!=r.column)r=i.end}else if(s==-1&&o==1)r=i.end,t=i.start;else{var u=a(this.$clickSelection,r);r=u.cursor,t=u.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(r),n.renderer.scrollCursorIntoView()},this.startDrag=function(){var e=this.editor;this.setState("drag"),this.dragRange=e.getSelectionRange();var t=e.getSelectionStyle();this.dragSelectionMarker=e.session.addMarker(this.dragRange,"ace_selection",t),e.clearSelection(),r.addCssClass(e.container,"ace_dragging"),this.$dragKeybinding||(this.$dragKeybinding={handleKeyboard:function(e,t,n,r){if(n=="esc")return{command:this.command}},command:{exec:function(e){var t=e.$mouseHandler;t.dragCursor=null,t.dragEnd(),t.startSelect()}}}),e.keyBinding.addKeyboardHandler(this.$dragKeybinding)},this.focusWait=function(){var e=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=(new Date).getTime();(e>s||t-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.dragWait=function(e){var t=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),n=(new Date).getTime(),r=this.editor;t>s?this.startSelect(this.mousedownEvent.getDocumentPosition()):n-this.mousedownEvent.time>r.$mouseHandler.$dragDelay&&this.startDrag()},this.dragWaitEnd=function(e){this.mousedownEvent.domEvent=e,this.startSelect()},this.drag=function(){var e=this.editor;this.dragCursor=e.renderer.screenToTextCoordinates(this.x,this.y),e.moveCursorToPosition(this.dragCursor),e.renderer.scrollCursorIntoView()},this.dragEnd=function(e){var t=this.editor,n=this.dragCursor,i=this.dragRange;r.removeCssClass(t.container,"ace_dragging"),t.session.removeMarker(this.dragSelectionMarker),t.keyBinding.removeKeyboardHandler(this.$dragKeybinding);if(!n)return;t.clearSelection();if(e&&(e.ctrlKey||e.altKey)){var s=t.session,o=i;o.end=s.insert(n,s.getTextRange(i)),o.start=n}else{if(i.contains(n.row,n.column))return;var o=t.moveText(i,n)}if(!o)return;t.selection.setSelectionRange(o)},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,r=n.session,i=r.getBracketRange(t);if(i){i.isEmpty()&&(i.start.column--,i.end.column++),this.$clickSelection=i,this.setState("select");return}this.$clickSelection=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines"),this.$clickSelection=n.selection.getLineRange(t.row)},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("null")},this.onMouseWheel=function(e){if(e.getShiftKey()||e.getAccelKey())return;var t=e.domEvent.timeStamp,n=t-(this.$lastScrollTime||0),r=this.editor,i=r.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed);if(i||n<200)return this.$lastScrollTime=t,r.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()}}).call(o.prototype),t.DefaultHandlers=o}),define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event"],function(e,t,n){function s(e){function f(){u=r.createElement("div"),u.className="ace_gutter-tooltip",u.style.display="none",t.container.appendChild(u)}function l(){u||f();var e=o.getDocumentPosition().row,r=n.$annotations[e];if(!r)return c();var i=t.session.getLength();if(e==i){var s=t.renderer.pixelToScreenCoordinates(0,o.y).row,l=o.$pos;if(s>t.session.documentToScreenRow(l.row,l.column))return c()}if(a==r)return;a=r.text.join("<br/>"),u.style.display="block",u.innerHTML=a,t.on("mousewheel",c),h(o)}function c(){s&&(s=clearTimeout(s)),a&&(u.style.display="none",a=null,t.removeEventListener("mousewheel",c))}function h(e){var n=t.renderer.$gutter.getBoundingClientRect();u.style.left=e.x+15+"px",e.y+3*t.renderer.lineHeight+15<n.bottom?(u.style.bottom="",u.style.top=e.y+15+"px"):(u.style.top="",u.style.bottom=n.bottom-e.y+5+"px")}var t=e.editor,n=t.renderer.$gutterLayer;e.editor.setDefaultHandler("guttermousedown",function(r){if(!t.isFocused()||r.getButton()!=0)return;var i=n.getRegion(r);if(i=="foldWidgets")return;var s=r.getDocumentPosition().row,o=t.session.selection;if(r.getShiftKey())o.selectTo(s,0);else{if(r.domEvent.detail==2)return t.selectAll(),r.preventDefault();e.$clickSelection=t.selection.getLineRange(s)}return e.captureMouse(r,"selectByLines"),r.preventDefault()});var s,o,u,a;e.editor.setDefaultHandler("guttermousemove",function(t){var n=t.domEvent.target||t.domEvent.srcElement;if(r.hasCssClass(n,"ace_fold-widget"))return c();a&&h(t),o=t;if(s)return;s=setTimeout(function(){s=null,o&&!e.isMousePressed?l():c()},50)}),i.addListener(t.renderer.$gutter,"mouseout",function(e){o=null;if(!a||s)return;s=setTimeout(function(){s=null,c()},50)}),t.on("changeSession",c)}var r=e("../lib/dom"),i=e("../lib/event");t.GutterHandler=s}),define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var r=e("../lib/event"),i=e("../lib/useragent"),s=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var e=this.editor;if(e.getReadOnly())this.$inSelection=!1;else{var t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(s.prototype)}),define("ace/mouse/dragdrop",["require","exports","module","ace/lib/event"],function(e,t,n){var r=e("../lib/event"),i=function(e){function h(){u=t.selection.toOrientedRange(),n=t.session.addMarker(u,"ace_selection",t.getSelectionStyle()),t.clearSelection(),clearInterval(o),o=setInterval(c,20),f=0,r.addListener(document,"mousemove",v)}function p(){clearInterval(o),t.session.removeMarker(n),n=null,t.selection.fromOrientedRange(u),f=0,r.removeListener(document,"mousemove",v)}function v(){d==null&&(d=setTimeout(function(){d!=null&&n&&p()},20))}var t=e.editor,n,i,s,o,u,a,f=0,l=t.container;r.addListener(l,"dragenter",function(e){if(t.getReadOnly())return;var i=e.dataTransfer.types;if(i&&Array.prototype.indexOf.call(i,"text/plain")===-1)return;return n||h(),f++,r.preventDefault(e)}),r.addListener(l,"dragover",function(e){if(t.getReadOnly())return;var n=e.dataTransfer.types;if(n&&Array.prototype.indexOf.call(n,"text/plain")===-1)return;return d!==null&&(d=null),i=e.clientX,s=e.clientY,r.preventDefault(e)});var c=function(){a=t.renderer.screenToTextCoordinates(i,s),t.moveCursorToPosition(a),t.renderer.scrollCursorIntoView()};r.addListener(l,"dragleave",function(e){f--;if(f<=0&&n)return p(),r.preventDefault(e)}),r.addListener(l,"drop",function(e){if(!n)return;return u.end=t.session.insert(a,e.dataTransfer.getData("Text")),u.start=a,p(),t.focus(),r.preventDefault(e)});var d=null};t.DragdropHandler=i}),define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/event_emitter"],function(e,t,n){"no use strict";function f(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./lib/net"),o=e("./lib/event_emitter").EventEmitter,u=function(){return this}(),a={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};t.get=function(e){if(!a.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return a[e]},t.set=function(e,t){if(!a.hasOwnProperty(e))throw new Error("Unknown config key: "+e);a[e]=t},t.all=function(){return r.copyObject(a)},i.implement(t,o),t.moduleUrl=function(e,t){if(a.$moduleUrls[e])return a.$moduleUrls[e];var n=e.split("/");t=t||n[n.length-2]||"";var r=t=="snippets"?"/":"-",i=n[n.length-1];if(r=="-"){var s=new RegExp("^"+t+"[-_]|[-_]"+t+"$","g");i=i.replace(s,"")}(!i||i==t)&&n.length>1&&(i=n[n.length-2]);var o=a[t+"Path"];return o==null?o=a.basePath:r=="/"&&(t=r=""),o&&o.slice(-1)!="/"&&(o+="/"),o+t+r+i+this.get("suffix")},t.setModuleUrl=function(e,t){return a.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,r){var i,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{i=e(n)}catch(u){}if(i&&!t.$loading[n])return r&&r(i);t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(r);if(t.$loading[n].length>1)return;var a=function(){e([n],function(e){t._emit("load.module",{name:n,module:e});var r=t.$loading[n];t.$loading[n]=null,r.forEach(function(t){t&&t(e)})})};if(!t.get("packaged"))return a();s.loadScript(t.moduleUrl(n,o),a)},t.init=function(){a.packaged=e.packaged||n.packaged||u.define&&define.packaged;if(!u.document)return"";var r={},i="",s=document.getElementsByTagName("script");for(var o=0;o<s.length;o++){var l=s[o],c=l.src||l.getAttribute("src");if(!c)continue;var h=l.attributes;for(var p=0,d=h.length;p<d;p++){var v=h[p];v.name.indexOf("data-ace-")===0&&(r[f(v.name.replace(/^data-ace-/,""))]=v.value)}var m=c.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);m&&(i=m[1])}i&&(r.base=r.base||i,r.packaged=!0),r.basePath=r.base,r.workerPath=r.workerPath||r.base,r.modePath=r.modePath||r.base,r.themePath=r.themePath||r.base,delete r.base;for(var g in r)typeof r[g]!="undefined"&&t.set(g,r[g])};var l={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};return e?Array.isArray(e)||(t=e,e=Object.keys(t)):e=Object.keys(this.$options),e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]===t)return;var n=this.$options[e];if(!n)return undefined;if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:undefined}},c={};t.defineOptions=function(e,t,n){return e.$options||(c[t]=e.$options={}),Object.keys(n).forEach(function(t){var r=n[t];typeof r=="string"&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,"initialValue"in r&&(e["$"+r.name]=r.initialValue)}),i.implement(e,l),this},t.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)})},t.setDefaultValue=function(e,n,r){var i=c[e]||(c[e]={});i[n]&&(i.forwardTo?t.setDefaultValue(i.forwardTo,n,r):i[n].value=r)},t.setDefaultValues=function(e,n){Object.keys(n).forEach(function(r){t.setDefaultValue(e,r,n[r])})}}),define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){var r=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=r.getDocumentHead(),i=document.createElement("script");i.src=e,n.appendChild(i),i.onload=i.onreadystatechange=function(e,n){if(n||!i.readyState||i.readyState=="loaded"||i.readyState=="complete")i=i.onload=i.onreadystatechange=null,n||t()}}}),define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){var r={},i=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(!n.length&&!r)return;if(typeof t!="object"||!t)t={};t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=i),t.preventDefault||(t.preventDefault=s);for(var o=0;o<n.length;o++){n[o](t,this);if(t.propagationStopped)break}if(r&&!t.defaultPrevented)return r(t,this)},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(!n)return;for(var r=0;r<n.length;r++)n[r](t,this)},r.once=function(e,t){var n=this;t&&this.addEventListener(e,function r(){n.removeEventListener(e,r),t.apply(null,arguments)})},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;n||(n=this._defaultHandlers={_disabled_:{}});if(n[e]){var r=n[e],i=n._disabled_[e];i||(n._disabled_[e]=i=[]),i.push(r);var s=i.indexOf(t);s!=-1&&i.splice(s,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(!n)return;var r=n._disabled_[e];if(n[e]==t){var i=n[e];r&&this.setDefaultHandler(e,r.pop())}else if(r){var s=r.indexOf(t);s!=-1&&r.splice(s,1)}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),r.indexOf(t)==-1&&r[n?"unshift":"push"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(!n)return;var r=n.indexOf(t);r!==-1&&n.splice(r,1)},r.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=r}),define("ace/mouse/fold_handler",["require","exports","module"],function(e,t,n){function r(e){e.on("click",function(t){var n=t.getDocumentPosition(),r=e.session,i=r.getFoldAt(n.row,n.column,1);i&&(t.getAccelKey()?r.removeFold(i):r.expandFold(i),t.stop())}),e.on("gutterclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if(n=="foldWidgets"){var r=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[r]&&e.session.onFoldWidgetClick(r,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if(n=="foldWidgets"){var r=t.getDocumentPosition().row,i=e.session,s=i.getParentFoldRangeData(r,!0),o=s.range||s.firstRange;if(o){var r=o.start.row,u=i.getFoldAt(r,i.getLine(r).length,1);u?i.removeFold(u):(i.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}})}t.FoldHandler=r}),define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){var r=e("../lib/keys"),i=e("../lib/event"),s=function(e){this.$editor=e,this.$data={},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0),this.$data={editor:this.$editor}},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]==e)return;while(t[t.length-1]&&t[t.length-1]!=this.$defaultHandler)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)},this.addKeyboardHandler=function(e,t){if(!e)return;var n=this.$handlers.indexOf(e);n!=-1&&this.$handlers.splice(n,1),t==undefined?this.$handlers.push(e):this.$handlers.splice(t,0,e),n==-1&&e.attach&&e.attach(this.$editor)},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return t==-1?!1:(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.$callKeyboardHandlers=function(e,t,n,r){var s,o=!1,u=this.$editor.commands;for(var a=this.$handlers.length;a--;){s=this.$handlers[a].handleKeyboard(this.$data,e,t,n,r);if(!s||!s.command)continue;s.command=="null"?o=!0:o=u.exec(s.command,this.$editor,s.args,r),o&&r&&e!=-1&&s.passEvent!=1&&i.stopEvent(r);if(o)break}return o},this.onCommandKey=function(e,t,n){var i=r.keyCodeToString(n);this.$callKeyboardHandlers(t,i,n,e)},this.onTextInput=function(e){var t=this.$callKeyboardHandlers(-1,e);t||this.$editor.commands.exec("insertstring",this.$editor,e)}}).call(s.prototype),t.KeyBinding=s}),define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./config"),o=e("./lib/event_emitter").EventEmitter,u=e("./selection").Selection,a=e("./mode/text").Mode,f=e("./range").Range,l=e("./document").Document,c=e("./background_tokenizer").BackgroundTokenizer,h=e("./search_highlight").SearchHighlight,p=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this);if(typeof e!="object"||!e.getLine)e=new l(e);this.setDocument(e),this.selection=new u(this),s.resetOptions(this),this.setMode(t),s._emit("session",this)};(function(){function g(e){return e<4352?!1:e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510}r.implement(this,o),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e){this.$docRowCache=[],this.$screenRowCache=[];return}var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){var n=0,r=e.length-1;while(n<=r){var i=n+r>>1,s=e[i];if(t>s)n=i+1;else{if(!(t<s))return i;r=i-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){var t=e.data;this.$modified=!0,this.$resetRowCache(t.range.start.row);var n=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&!t.ignore&&(this.$deltasDoc.push(t),n&&n.length!=0&&this.$deltasFold.push({action:"removeFolds",folds:n}),this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(t),this._emit("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveCursorTo(0,0),this.selection.clearSelection(),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n=this.bgTokenizer.getTokens(e),r,i=0;if(t==null)s=n.length-1,i=this.getLine(e).length;else for(var s=0;s<n.length;s++){i+=n[s].value.length;if(i>=t)break}return r=n[s],r?(r.index=s,r.start=i-r.value.length,r):null},this.setUndoManager=function(e){this.$undoManager=e,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel();if(e){var t=this;this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.$deltasFold.length&&(t.$deltas.push({group:"fold",deltas:t.$deltasFold}),t.$deltasFold=[]),t.$deltasDoc.length&&(t.$deltas.push({group:"doc",deltas:t.$deltasDoc}),t.$deltasDoc=[]),t.$deltas.length>0&&e.execute({action:"aceupdate",args:[t.$deltas,t],merge:t.mergeUndoDeltas}),t.mergeUndoDeltas=!1,t.$deltas=[]},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize==0},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._emit("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._emit("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._emit("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._emit("changeBreakpoint",{})},this.setBreakpoint=function(e,t){t===undefined&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._emit("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._emit("changeBreakpoint",{})},this.addMarker=function(e,t,n,r){var i=this.$markerId++,s={range:e,type:n||"line",renderer:typeof n=="function"?n:null,clazz:t,inFront:!!r,id:i};return r?(this.$frontMarkers[i]=s,this._emit("changeFrontMarker")):(this.$backMarkers[i]=s,this._emit("changeBackMarker")),i},this.addDynamicMarker=function(e,t){if(!e.update)return;var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._emit("changeFrontMarker")):(this.$backMarkers[n]=e,this._emit("changeBackMarker")),e},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(!t)return;var n=t.inFront?this.$frontMarkers:this.$backMarkers;t&&(delete n[e],this._emit(t.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new h(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,r){typeof t!="number"&&(n=t,t=e),n||(n="ace_step");var i=new f(e,0,t,Infinity);return i.id=this.addMarker(i,n,"fullLine",r),i},this.setAnnotations=function(e){this.$annotations=e,this._emit("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);t?this.$autoNewLine=t[1]:this.$autoNewLine="\n"},this.getWordRange=function(e,t){var n=this.getLine(e),r=!1;t>0&&(r=!!n.charAt(t-1).match(this.tokenRe)),r||(r=!!n.charAt(t).match(this.tokenRe));if(r)var i=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))var i=/\s/;else var i=this.nonTokenRe;var s=t;if(s>0){do s--;while(s>=0&&n.charAt(s).match(i));s++}var o=t;while(o<n.length&&n.charAt(o).match(i))o++;return new f(e,s,e,o)},this.getAWordRange=function(e,t){var n=this.getWordRange(e,t),r=this.getLine(n.end.row);while(r.charAt(n.end.column).match(/[ \t]/))n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._emit("tokenizerUpdate",e)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&typeof e=="object"){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,r=n.path}else r=e||"ace/mode/text";this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new a);if(this.$modes[r]&&!n)return this.$onChangeMode(this.$modes[r]);this.$modeId=r,s.loadModule(["mode",r],function(e){if(this.$modeId!==r)return t&&t();if(this.$modes[r]&&!n)return this.$onChangeMode(this.$modes[r]);e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e),t&&t(this.mode))}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){t||(this.$modeId=e.$id);if(this.$mode===e)return;this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=e.getTokenizer();if(n.addEventListener!==undefined){var r=this.onReloadTokenizer.bind(this);n.addEventListener("update",r)}if(!this.bgTokenizer){this.bgTokenizer=new c(n);var i=this;this.bgTokenizer.addEventListener("update",function(e){i._emit("tokenizerUpdate",e)})}else this.bgTokenizer.setTokenizer(n);this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,this.$options.wrapMethod.set.call(this,this.$wrapMethod),t||(this.$setFolding(e.foldingRules),this._emit("changeMode"),this.bgTokenizer.start(0))},this.$stopWorker=function(){this.$worker&&this.$worker.terminate(),this.$worker=null},this.$startWorker=function(){if(typeof Worker!="undefined"&&!e.noWorker)try{this.$worker=this.$mode.createWorker(this)}catch(t){console.log("Could not load worker"),console.log(t),this.$worker=null}else this.$worker=null},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){e=Math.round(e);if(this.$scrollTop===e||isNaN(e))return;this.$scrollTop=e,this._signal("changeScrollTop",e)},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){e=Math.round(e);if(this.$scrollLeft===e||isNaN(e))return;this.$scrollLeft=e,this._signal("changeScrollLeft",e)},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.screenWidth},this.$computeWidth=function(e){if(this.$modified||e){this.$modified=!1;if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit;var t=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,i=0,s=this.$foldData[i],o=s?s.start.row:Infinity,u=t.length;for(var a=0;a<u;a++){if(a>o){a=s.end.row+1;if(a>=u)break;s=this.$foldData[i++],o=s?s.start.row:Infinity}n[a]==null&&(n[a]=this.$getStringScreenWidth(t[a])[0]),n[a]>r&&(r=n[a])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.undoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;var n=null;for(var r=e.length-1;r!=-1;r--){var i=e[r];i.group=="doc"?(this.doc.revertDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!0,n)):i.deltas.forEach(function(e){this.addFolds(e.folds)},this)}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n},this.redoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;var n=null;for(var r=0;r<e.length;r++){var i=e[r];i.group=="doc"&&(this.doc.applyDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!1,n))}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t,n){function r(e){var n=e.action==="insertText"||e.action==="insertLines";return t?!n:n}var i=e[0],s,o,u=!1;r(i)?(s=f.fromPoints(i.range.start,i.range.end),u=!0):(s=f.fromPoints(i.range.start,i.range.start),u=!1);for(var a=1;a<e.length;a++)i=e[a],r(i)?(o=i.range.start,s.compare(o.row,o.column)==-1&&s.setStart(i.range.start),o=i.range.end,s.compare(o.row,o.column)==1&&s.setEnd(i.range.end),u=!0):(o=i.range.start,s.compare(o.row,o.column)==-1&&(s=f.fromPoints(i.range.start,i.range.start)),u=!1);if(n!=null){f.comparePoints(n.start,s.start)==0&&(n.start.column+=s.end.column-s.start.column,n.end.column+=s.end.column-s.start.column);var l=n.compareRange(s);l==1?s.setStart(n.start):l==-1&&s.setEnd(n.end)}return s},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var r=this.getTextRange(e),i=this.getFoldsInRange(e),s=f.fromPoints(t,t);if(!n){this.remove(e);var o=e.start.row-e.end.row,u=o?-e.end.column:e.start.column-e.end.column;u&&(s.start.row==e.end.row&&s.start.column>e.end.column&&(s.start.column+=u),s.end.row==e.end.row&&s.end.column>e.end.column&&(s.end.column+=u)),o&&s.start.row>=e.end.row&&(s.start.row+=o,s.end.row+=o)}this.insert(s.start,r);if(i.length){var a=e.start,l=s.start,o=l.row-a.row,u=l.column-a.column;this.addFolds(i.map(function(e){return e=e.clone(),e.start.row==a.row&&(e.start.column+=u),e.end.row==a.row&&(e.end.column+=u),e.start.row+=o,e.end.row+=o,e}))}return s},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var r=e;r<=t;r++)this.insert({row:r,column:0},n)},this.outdentRows=function(e){var t=e.collapseRows(),n=new f(0,0,0,0),r=this.getTabSize();for(var i=t.start.row;i<=t.end.row;++i){var s=this.getLine(i);n.start.row=i,n.end.row=i;for(var o=0;o<r;++o)if(s.charAt(o)!=" ")break;o<r&&s.charAt(o)=="	"?(n.start.column=o,n.end.column=o+1):(n.start.column=0,n.end.column=o),this.remove(n)}},this.$moveLines=function(e,t,n){e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t);if(n<0){var r=this.getRowFoldStart(e+n);if(r<0)return 0;var i=r-e}else if(n>0){var r=this.getRowFoldEnd(t+n);if(r>this.doc.getLength()-1)return 0;var i=r-t}else{e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t);var i=t-e+1}var s=new f(e,0,t,Number.MAX_VALUE),o=this.getFoldsInRange(s).map(function(e){return e=e.clone(),e.start.row+=i,e.end.row+=i,e}),u=n==0?this.doc.getLines(e,t):this.doc.removeLines(e,t);return this.doc.insertLines(e+i,u),o.length&&this.addFolds(o),i},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){t=Math.max(0,t);if(e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0);if(e){var t=this.getLength();this.$wrapData=[];for(var n=0;n<t;n++)this.$wrapData.push([]);this.$updateWrapData(0,t-1)}this._emit("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){if(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t)this.$wrapLimitRange.min=e,this.$wrapLimitRange.max=t,this.$modified=!0,this._emit("changeWrapMode")},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var r=this.$constrainWrapLimit(e,n.min,n.max);return r!=this.$wrapLimit&&r>1?(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._emit("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n,r=e.data.action,i=e.data.range.start.row,s=e.data.range.end.row,o=e.data.range.start,u=e.data.range.end,a=null;r.indexOf("Lines")!=-1?(r=="insertLines"?s=i+e.data.lines.length:s=i,n=e.data.lines?e.data.lines.length:s-i):n=s-i,this.$updating=!0;if(n!=0)if(r.indexOf("remove")!=-1){this[t?"$wrapData":"$rowLengthCache"].splice(i,n);var f=this.$foldData;a=this.getFoldsInRange(e.data.range),this.removeFolds(a);var l=this.getFoldLine(u.row),c=0;if(l){l.addRemoveChars(u.row,u.column,o.column-u.column),l.shiftRow(-n);var h=this.getFoldLine(i);h&&h!==l&&(h.merge(l),l=h),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=u.row&&l.shiftRow(-n)}s=i}else{var p;if(t){p=[i,0];for(var d=0;d<n;d++)p.push([]);this.$wrapData.splice.apply(this.$wrapData,p)}else p=Array(n),p.unshift(i,0),this.$rowLengthCache.splice.apply(this.$rowLengthCache,p);var f=this.$foldData,l=this.getFoldLine(i),c=0;if(l){var v=l.range.compareInside(o.row,o.column);v==0?(l=l.split(o.row,o.column),l.shiftRow(n),l.addRemoveChars(s,0,u.column-o.column)):v==-1&&(l.addRemoveChars(i,0,u.column-o.column),l.shiftRow(n)),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=i&&l.shiftRow(n)}}else{n=Math.abs(e.data.range.start.column-e.data.range.end.column),r.indexOf("remove")!=-1&&(a=this.getFoldsInRange(e.data.range),this.removeFolds(a),n=-n);var l=this.getFoldLine(i);l&&l.addRemoveChars(i,o.column,n)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(i,s):this.$updateRowLengthCache(i,s),a},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var n=this.doc.getAllLines(),r=this.getTabSize(),i=this.$wrapData,s=this.$wrapLimit,o,a,f=e;t=Math.min(t,n.length-1);while(f<=t)a=this.getFoldLine(f,a),a?(o=[],a.walk(function(e,t,r,i){var s;if(e!=null){s=this.$getDisplayTokens(e,o.length),s[0]=u;for(var a=1;a<s.length;a++)s[a]=l}else s=this.$getDisplayTokens(n[t].substring(i,r),o.length);o=o.concat(s)}.bind(this),a.end.row,n[a.end.row].length+1),i[a.start.row]=this.$computeWrapSplits(o,s,r),f=a.end.row+1):(o=this.$getDisplayTokens(n[f]),i[f]=this.$computeWrapSplits(o,s,r),f++)};var t=1,n=2,u=3,l=4,p=9,d=10,v=11,m=12;this.$computeWrapSplits=function(e,t){function a(t){var r=e.slice(i,t),o=r.length;r.join("").replace(/12/g,function(){o-=1}).replace(/2/g,function(){o-=1}),s+=o,n.push(s),i=t}if(e.length==0)return[];var n=[],r=e.length,i=0,s=0,o=this.$wrapAsCode;while(r-i>t){var f=i+t;if(e[f-1]>=d&&e[f]>=d){a(f);continue}if(e[f]==u||e[f]==l){for(f;f!=i-1;f--)if(e[f]==u)break;if(f>i){a(f);continue}f=i+t;for(f;f<e.length;f++)if(e[f]!=l)break;if(f==e.length)break;a(f);continue}var c=Math.max(f-(o?10:t-(t>>2)),i-1);while(f>c&&e[f]<u)f--;if(o){while(f>c&&e[f]<u)f--;while(f>c&&e[f]==p)f--}else while(f>c&&e[f]<d)f--;if(f>c){a(++f);continue}f=i+t,a(f)}return n},this.$getDisplayTokens=function(e,r){var i=[],s;r=r||0;for(var o=0;o<e.length;o++){var u=e.charCodeAt(o);if(u==9){s=this.getScreenTabSize(i.length+r),i.push(v);for(var a=1;a<s;a++)i.push(m)}else u==32?i.push(d):u>39&&u<48||u>57&&u<64?i.push(p):u>=4352&&g(u)?i.push(t,n):i.push(t)}return i},this.$getStringScreenWidth=function(e,t,n){if(t==0)return[0,0];t==null&&(t=Infinity),n=n||0;var r,i;for(i=0;i<e.length;i++){r=e.charCodeAt(i),r==9?n+=this.getScreenTabSize(n):r>=4352&&g(r)?n+=2:n+=1;if(n>t)break}return[n,i]},this.getRowLength=function(e){return!this.$useWrapMode||!this.$wrapData[e]?1:this.$wrapData[e].length+1},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:undefined},this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t){if(e<0)return{row:0,column:0};var n,r=0,i=0,s,o=0,u=0,a=this.$screenRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0)var o=a[f],r=this.$docRowCache[f],c=e>a[l-1];else var c=!l;var h=this.getLength()-1,p=this.getNextFoldLine(r),d=p?p.start.row:Infinity;while(o<=e){u=this.getRowLength(r);if(o+u-1>=e||r>=h)break;o+=u,r++,r>d&&(r=p.end.row+1,p=this.getNextFoldLine(r,p),d=p?p.start.row:Infinity),c&&(this.$docRowCache.push(r),this.$screenRowCache.push(o))}if(p&&p.start.row<=r)n=this.getFoldDisplayLine(p),r=p.start.row;else{if(o+u<=e||r>h)return{row:h,column:this.getLine(h).length};n=this.getLine(r),p=null}if(this.$useWrapMode){var v=this.$wrapData[r];v&&(s=v[e-o],e>o&&v.length&&(i=v[e-o-1]||v[v.length-1],n=n.substring(i)))}return i+=this.$getStringScreenWidth(n,t)[1],this.$useWrapMode&&i>=s&&(i=s-1),p?p.idxToPosition(i):{row:r,column:i}},this.documentToScreenPosition=function(e,t){if(typeof t=="undefined")var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var r=0,i=null,s=null;s=this.getFoldAt(e,t,1),s&&(e=s.start.row,t=s.start.column);var o,u=0,a=this.$docRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0)var u=a[f],r=this.$screenRowCache[f],c=e>a[l-1];else var c=!l;var h=this.getNextFoldLine(u),p=h?h.start.row:Infinity;while(u<e){if(u>=p){o=h.end.row+1;if(o>e)break;h=this.getNextFoldLine(o,h),p=h?h.start.row:Infinity}else o=u+1;r+=this.getRowLength(u),u=o,c&&(this.$docRowCache.push(u),this.$screenRowCache.push(r))}var d="";h&&u>=p?(d=this.getFoldDisplayLine(h,e,t),i=h.start.row):(d=this.getLine(e).substring(0,t),i=e);if(this.$useWrapMode){var v=this.$wrapData[i],m=0;while(d.length>=v[m])r++,m++;d=d.substring(v[m-1]||0,d.length)}return{row:r,column:this.$getStringScreenWidth(d)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(!this.$useWrapMode){e=this.getLength();var n=this.$foldData;for(var r=0;r<n.length;r++)t=n[r],e-=t.end.row-t.start.row}else{var i=this.$wrapData.length,s=0,r=0,t=this.$foldData[r++],o=t?t.start.row:Infinity;while(s<i)e+=this.$wrapData[s].length+1,s++,s>o&&(s=t.end.row+1,t=this.$foldData[r++],o=t?t.start.row:Infinity)}return e}}).call(p.prototype),e("./edit_session/folding").Folding.call(p.prototype),e("./edit_session/bracket_match").BracketMatch.call(p.prototype),s.defineOptions(p.prototype,"session",{wrap:{set:function(e){!e||e=="off"?e=!1:e=="free"?e=!0:e=="printMargin"?e=-1:typeof e=="string"&&(e=parseInt(e,10)||!1);if(this.$wrap==e)return;if(!e)this.setUseWrapMode(!1);else{var t=typeof e=="number"?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}this.$wrap=e},get:function(){return this.getUseWrapMode()?this.getWrapLimitRange().min||"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){e=="auto"?this.$wrapAsCode=this.$mode.type!="text":this.$wrapAsCode=e!="text"},initialValue:"auto"},firstLineNumber:{set:function(){this._emit("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){if(isNaN(e)||this.$tabSize===e)return;this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._emit("changeTabSize")},initialValue:4,handlesSet:!0},overwrite:{set:function(e){this._emit("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0}}),t.EditSession=p}),define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var t=this;this.lead.on("change",function(e){t._emit("changeCursor"),t.$isEmpty||t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column&&(t.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){t.$isEmpty||t._emit("changeSelection")})};(function(){r.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return this.isEmpty()?!1:this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(e){if(this.$isEmpty){this.moveCursorTo(this.lead.row,this.lead.column+e);return}var t=this.getSelectionAnchor(),n=this.getSelectionLead(),r=this.isBackwards();(!r||t.column!==0)&&this.setSelectionAnchor(t.row,t.column+e),(r||n.column!==0)&&this.$moveSelection(function(){this.moveCursorTo(n.row,n.column+e)})},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.isEmpty()?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var e=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(e,this.doc.getLine(e).length)},this.setRange=this.setSelectionRange=function(e,t){t?(this.setSelectionAnchor(e.end.row,e.end.column),this.selectTo(e.start.row,e.start.column)):(this.setSelectionAnchor(e.start.row,e.start.column),this.selectTo(e.end.row,e.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(typeof t=="undefined"){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n=typeof e=="number"?e:this.lead.row,r,i=this.session.getFoldLine(n);return i?(n=i.start.row,r=i.end.row):r=n,t?new o(n,0,r,this.session.getLine(r).length):new o(n,0,r+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(e.column==0)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column-n,e.column).split(" ").length-1==n?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),e=this.lead;this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column,e.column+n).split(" ").length-1==n?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(n,0),i=this.session.getDisplayLine(e,null,r.row,r.column),s=i.match(/^\s*/);s[0].length!=t&&!this.session.$useEmacsStyleLineStart&&(r.column+=s[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var r=n.search(/\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i;this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var s=this.session.getFoldAt(e,t,1);if(s){this.moveCursorTo(s.end.row,s.end.column);return}if(i=this.session.nonTokenRe.exec(r))t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(t);if(t>=n.length){this.moveCursorTo(e,n.length),this.moveCursorRight(),e<this.doc.getLength()-1&&this.moveCursorWordRight();return}if(i=this.session.tokenRe.exec(r))t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0;this.moveCursorTo(e,t)},this.moveCursorLongWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1)){this.moveCursorTo(n.start.row,n.start.column);return}var r=this.session.getFoldStringAt(e,t,-1);r==null&&(r=this.doc.getLine(e).substring(0,t));var s=i.stringReverse(r),o;this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;if(o=this.session.nonTokenRe.exec(s))t-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0;if(t<=0){this.moveCursorTo(e,0),this.moveCursorLeft(),e>0&&this.moveCursorWordLeft();return}if(o=this.session.tokenRe.exec(s))t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0;this.moveCursorTo(e,t)},this.$shortWordEndIndex=function(e){var t,n=0,r,i=/\s/,s=this.session.tokenRe;s.lastIndex=0;if(t=this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{while((r=e[n])&&i.test(r))n++;if(n<1){s.lastIndex=0;while((r=e[n])&&!s.test(r)){s.lastIndex=0,n++;if(i.test(r)){if(n>2){n--;break}while((r=e[n])&&i.test(r))n++;if(n>2)break}}}}return s.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i=this.session.getFoldAt(e,t,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(t==n.length){var s=this.doc.getLength();do e++,r=this.doc.getLine(e);while(e<s&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var o=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+o)},this.moveCursorShortWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var r=this.session.getLine(e).substring(0,t);if(t==0){do e--,r=this.doc.getLine(e);while(e>0&&/^\s*$/.test(r));t=r.length,/\s+$/.test(r)||(r="")}var s=i.stringReverse(r),o=this.$shortWordEndIndex(s);return this.moveCursorTo(e,t-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);t===0&&(this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);var r=this.session.screenToDocumentPosition(n.row+e,n.column);this.moveCursorTo(r.row,r.column+t,t===0)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e},this.fromJSON=function(e){if(e.start==undefined){if(this.rangeList){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=o.fromPoints(e[t].start,e[t].end);e.isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(u.prototype),t.Selection=u}),define("ace/range",["require","exports","module"],function(e,t,n){var r=function(e,t){return e.row-t.row||e.column-t.column},i=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return this.compare(e,t)==0},this.compareRange=function(e){var t,n=e.end,r=e.start;return t=this.compare(n.row,n.column),t==1?(t=this.compare(r.row,r.column),t==1?2:t==0?1:0):t==-1?-2:(t=this.compare(r.row,r.column),t==-1?-1:t==1?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return this.comparePoint(e.start)==0&&this.comparePoint(e.end)==0},this.intersects=function(e){var t=this.compareRange(e);return t==-1||t==0||t==1},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){typeof e=="object"?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){typeof e=="object"?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)||this.isStart(e,t)?!1:!0:!1},this.insideStart=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)?!1:!0:!1},this.insideEnd=function(e,t){return this.compare(e,t)==0?this.isStart(e,t)?!1:!0:!1},this.compare=function(e,t){return!this.isMultiLine()&&e===this.start.row?t<this.start.column?-1:t>this.end.column?1:0:e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)var n={row:e,column:0};if(this.start.row>t)var r={row:t+1,column:0};else if(this.start.row<e)var r={row:e,column:0};return i.fromPoints(r||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(n==0)return this;if(n==-1)var r={row:e,column:t};else var s={row:e,column:t};return i.fromPoints(r||this.start,s||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new i(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(i.prototype),i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=r,i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i}),define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){var r=e("../tokenizer").Tokenizer,i=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour").Behaviour,o=e("../unicode"),u=e("../lib/lang"),a=e("../token_iterator").TokenIterator,f=e("../range").Range,l=function(){this.$tokenizer=new r((new i).getRules()),this.$behaviour=new s};(function(){this.tokenRe=new RegExp("^["+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]|s])+","g"),this.getTokenizer=function(){return this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,r){function w(e){for(var t=n;t<=r;t++)e(i.getLine(t),t)}var i=t.doc,s=!0,o=!0,a=Infinity,f=t.getTabSize(),l=!1;if(!this.lineCommentStart){if(!this.blockComment)return!1;var c=this.blockComment.start,h=this.blockComment.end,p=new RegExp("^(\\s*)(?:"+u.escapeRegExp(c)+")"),d=new RegExp("(?:"+u.escapeRegExp(h)+")\\s*$"),v=function(e,t){if(g(e,t))return;if(!s||/\S/.test(e))i.insertInLine({row:t,column:e.length},h),i.insertInLine({row:t,column:a},c)},m=function(e,t){var n;(n=e.match(d))&&i.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(p))&&i.removeInLine(t,n[1].length,n[0].length)},g=function(e,n){if(p.test(e))return!0;var r=t.getTokens(n);for(var i=0;i<r.length;i++)if(r[i].type==="comment")return!0}}else{if(Array.isArray(this.lineCommentStart))var p=this.lineCommentStart.map(u.escapeRegExp).join("|"),c=this.lineCommentStart[0];else var p=u.escapeRegExp(this.lineCommentStart),c=this.lineCommentStart;p=new RegExp("^(\\s*)(?:"+p+") ?"),l=t.getUseSoftTabs();var m=function(e,t){var n=e.match(p);if(!n)return;var r=n[1].length,s=n[0].length;!b(e,r,s)&&n[0][s-1]==" "&&s--,i.removeInLine(t,r,s)},y=c+" ",v=function(e,t){if(!s||/\S/.test(e))b(e,a,a)?i.insertInLine({row:t,column:a},y):i.insertInLine({row:t,column:a},c)},g=function(e,t){return p.test(e)},b=function(e,t,n){var r=0;while(t--&&e.charAt(t)==" ")r++;if(r%f!=0)return!1;var r=0;while(e.charAt(n++)==" ")r++;return f>2?r%f!=f-1:r%f==0}}var E=Infinity;w(function(e,t){var n=e.search(/\S/);n!==-1?(n<a&&(a=n),o&&!g(e,t)&&(o=!1)):E>e.length&&(E=e.length)}),a==Infinity&&(a=E,s=!1,o=!1),l&&a%f!=0&&(a=Math.floor(a/f)*f),w(o?m:v)},this.toggleBlockComment=function(e,t,n,r){var i=this.blockComment;if(!i)return;!i.start&&i[0]&&(i=i[0]);var s=new a(t,r.row,r.column),o=s.getCurrentToken(),u=t.selection,l=t.selection.toOrientedRange(),c,h;if(o&&/comment/.test(o.type)){var p,d;while(o&&/comment/.test(o.type)){var v=o.value.indexOf(i.start);if(v!=-1){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;p=new f(m,g,m,g+i.start.length);break}o=s.stepBackward()}var s=new a(t,r.row,r.column),o=s.getCurrentToken();while(o&&/comment/.test(o.type)){var v=o.value.indexOf(i.end);if(v!=-1){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;d=new f(m,g,m,g+i.end.length);break}o=s.stepForward()}d&&t.remove(d),p&&(t.remove(p),c=p.start.row,h=-i.start.length)}else h=i.start.length,c=n.start.row,t.insert(n.end,i.end),t.insert(n.start,i.start);l.start.row==c&&(l.start.column+=h),l.end.row==c&&(l.end.column+=h),t.selection.fromOrientedRange(l)},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){if(!this.$embeds)return;this.$modes={};for(var t=0;t<this.$embeds.length;t++)e[this.$embeds[t]]&&(this.$modes[this.$embeds[t]]=new e[this.$embeds[t]]);var n=["toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction"];for(var t=0;t<n.length;t++)(function(e){var r=n[t],i=e[r];e[n[t]]=function(){return this.$delegator(r,arguments,i)}})(this)},this.$delegator=function(e,t,n){var r=t[0];typeof r!="string"&&(r=r[0]);for(var i=0;i<this.$embeds.length;i++){if(!this.$modes[this.$embeds[i]])continue;var s=r.split(this.$embeds[i]);if(!s[0]&&s[1]){t[0]=s[1];var o=this.$modes[this.$embeds[i]];return o[e].apply(o,t)}}var u=n.apply(this,t);return n?u:undefined},this.transformAction=function(e,t,n,r,i){if(this.$behaviour){var s=this.$behaviour.getBehaviours();for(var o in s)if(s[o][t]){var u=s[o][t].apply(this,arguments);if(u)return u}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var r in t){var i=t[r];for(var s=0,o=i.length;s<o;s++)if(typeof i[s].token=="string")/keyword|support|storage/.test(i[s].token)&&n.push(i[s].regex);else if(typeof i[s].token=="object")for(var u=0,a=i[s].token.length;u<a;u++)if(/keyword|support|storage/.test(i[s].token[u])){var r=i[s].regex.match(/\(.+?\)/g)[u];n.push(r.substr(1,r.length-2))}}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList}}).call(l.prototype),t.Mode=l}),define("ace/tokenizer",["require","exports","module"],function(e,t,n){var r=1e3,i=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){var n=this.states[t],r=[],i=0,s=this.matchMappings[t]={defaultToken:"text"},o="g",u=[];for(var a=0;a<n.length;a++){var f=n[a];f.defaultToken&&(s.defaultToken=f.defaultToken),f.caseInsensitive&&(o="gi");if(f.regex==null)continue;f.regex instanceof RegExp&&(f.regex=f.regex.toString().slice(1,-1));var l=f.regex,c=(new RegExp("(?:("+l+")|(.))")).exec("a").length-2;if(Array.isArray(f.token))if(f.token.length==1||c==1)f.token=f.token[0];else{if(c-1!=f.token.length)throw new Error("number of classes and regexp groups in '"+f.token+"'\n'"+f.regex+"' doesn't match\n"+(c-1)+"!="+f.token.length);f.tokenArray=f.token,f.token=null,f.onMatch=this.$arrayTokens}else typeof f.token=="function"&&!f.onMatch&&(c>1?f.onMatch=this.$applyToken:f.onMatch=f.token);c>1&&(/\\\d/.test(f.regex)?l=f.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+i+1)}):(c=1,l=this.removeCapturingGroups(f.regex)),!f.splitRegex&&typeof f.token!="string"&&u.push(f)),s[i]=a,i+=c,r.push(l),f.onMatch||(f.onMatch=null),f.__proto__=null}u.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,o)},this),this.regExps[t]=new RegExp("("+r.join(")|(")+")|($)",o)}};(function(){this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if(typeof n=="string")return[{type:n,value:e}];var r=[];for(var i=0,s=n.length;i<s;i++)t[i]&&(r[r.length]={type:n[i],value:t[i]});return r},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";var n=[],r=this.tokenArray;for(var i=0,s=r.length;i<s;i++)t[i+1]&&(n[n.length]={type:r[i],value:t[i+1]});return n},this.removeCapturingGroups=function(e){var t=e.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e});return t},this.createSplitterRegexp=function(e,t){if(e.indexOf("(?=")!=-1){var n=0,r=!1,i={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,s,o,u,a){return r?r=u!="]":u?r=!0:o?(n==i.stack&&(i.end=a+1,i.stack=-1),n--):s&&(n++,s.length!=1&&(i.stack=n,i.start=a)),e}),i.end!=null&&/^\)*$/.test(e.substr(i.end))&&(e=e.substring(0,i.start)+e.substr(i.end))}return new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&typeof t!="string"){var n=t.slice(0);t=n[0]}else var n=[];var i=t||"start",s=this.states[i],o=this.matchMappings[i],u=this.regExps[i];u.lastIndex=0;var a,f=[],l=0,c={type:null,value:""};while(a=u.exec(e)){var h=o.defaultToken,p=null,d=a[0],v=u.lastIndex;if(v-d.length>l){var m=e.substring(l,v-d.length);c.type==h?c.value+=m:(c.type&&f.push(c),c={type:h,value:m})}for(var g=0;g<a.length-2;g++){if(a[g+1]===undefined)continue;p=s[o[g]],p.onMatch?h=p.onMatch(d,i,n):h=p.token,p.next&&(typeof p.next=="string"?i=p.next:i=p.next(i,n),s=this.states[i],s||(window.console&&console.error&&console.error(i,"doesn't exist"),i="start",s=this.states[i]),o=this.matchMappings[i],l=v,u=this.regExps[i],u.lastIndex=v);break}if(d)if(typeof h=="string")!!p&&p.merge===!1||c.type!==h?(c.type&&f.push(c),c={type:h,value:d}):c.value+=d;else if(h){c.type&&f.push(c),c={type:null,value:""};for(var g=0;g<h.length;g++)f.push(h[g])}if(l==e.length)break;l=v;if(f.length>r){while(l<e.length)c.type&&f.push(c),c={value:e.substring(l,l+=2e3),type:"overflow"};i="start",n=[];break}}return c.type&&f.push(c),{tokens:f,state:n.length?n:i}}}).call(i.prototype),t.Tokenizer=i}),define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,n){var r=e("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(!t){for(var n in e)this.$rules[n]=e[n];return}for(var n in e){var r=e[n];for(var i=0;i<r.length;i++){var s=r[i];s.next&&(typeof s.next!="string"?s.nextState&&s.nextState.indexOf(t)!==0&&(s.nextState=t+s.nextState):s.next.indexOf(t)!==0&&(s.next=t+s.next))}this.$rules[t+n]=r}},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,i,s){var o=(new e).getRules();if(i)for(var u=0;u<i.length;u++)i[u]=t+i[u];else{i=[];for(var a in o)i.push(t+a)}this.addRules(o,t);if(n){var f=Array.prototype[s?"push":"unshift"];for(var u=0;u<i.length;u++)f.apply(this.$rules[i[u]],r.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return e!="start"&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t[0]!==e?"start":(t.shift(),t.shift())};this.normalizeRules=function(){function i(s){var o=r[s];o.processed=!0;for(var u=0;u<o.length;u++){var a=o[u];!a.regex&&a.start&&(a.regex=a.start,a.next||(a.next=[]),a.next.push({defaultToken:a.token},{token:a.token+".end",regex:a.end||a.start,next:"pop"}),a.token=a.token+".start",a.push=!0);var f=a.next||a.push;if(f&&Array.isArray(f)){var l=a.stateName;l||(l=a.token,typeof l!="string"&&(l=l[0]||""),r[l]&&(l+=n++)),r[l]=f,a.next=l,i(l)}else f=="pop"&&(a.next=t);a.push&&(a.nextState=a.next||a.push,a.next=e,delete a.push);if(a.rules)for(var c in a.rules)r[c]?r[c].push&&r[c].push.apply(r[c],a.rules[c]):r[c]=a.rules[c];if(a.include||typeof a=="string")var h=a.include||a,p=r[h];else Array.isArray(a)&&(p=a);if(p){var d=[u,1].concat(p);a.noEscape&&(d=d.filter(function(e){return!e.next})),o.splice.apply(o,d),u--,p=null}a.keywordMap&&(a.token=this.createKeywordMapper(a.keywordMap,a.defaultToken||"text",a.caseInsensitive),delete a.defaultToken)}}var n=0,r=this.$rules;Object.keys(r).forEach(i,this)},this.createKeywordMapper=function(e,t,n,r){var i=Object.create(null);return Object.keys(e).forEach(function(t){var s=e[t];n&&(s=s.toLowerCase());var o=s.split(r||"|");for(var u=o.length;u--;)i[o[u]]=t}),this.$keywordList=Object.keys(i),e=null,n?function(e){return i[e.toLowerCase()]||t}:function(e){return i[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),t.TextHighlightRules=i}),define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){var r=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if(typeof e=="function")var n=(new e).getBehaviours(t);else var n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(!e)return this.$behaviours;var t={};for(var n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}}).call(r.prototype),t.Behaviour=r}),define("ace/unicode",["require","exports","module"],function(e,t,n){function r(e){var n=/\w{4}/g;for(var r in e)t.packages[r]=e[r].replace(n,"\\u$&")}t.packages={},r({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),define("ace/token_iterator",["require","exports","module"],function(e,t,n){var r=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){this.$tokenIndex-=1;while(this.$tokenIndex<0){this.$row-=1;if(this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;var e;while(this.$tokenIndex>=this.$rowTokens.length){this.$row+=1,e||(e=this.$session.getLength());if(this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(n!==undefined)return n;n=0;while(t>0)t-=1,n+=e[t].value.length;return n}}).call(r.prototype),t.TokenIterator=r}),define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,o=e("./anchor").Anchor,u=function(e){this.$lines=[],e.length==0?this.$lines=[""]:Array.isArray(e)?this._insertLines(0,e):this.insert({row:0,column:0},e)};(function(){r.implement(this,i),this.setValue=function(e){var t=this.getLength();this.remove(new s(0,0,t,this.getLine(t-1).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new o(this,e,t)},"aaa".split(/a/).length==0?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine}},this.$autoNewLine="\n",this.$newLineMode="auto",this.setNewLineMode=function(e){if(this.$newLineMode===e)return;this.$newLineMode=e},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return e=="\r\n"||e=="\r"||e=="\n"},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){if(e.start.row==e.end.row)return this.getLine(e.start.row).substring(e.start.column,e.end.column);var t=this.getLines(e.start.row,e.end.row);t[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;return e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column)),t.join(this.getNewLineCharacter())},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):e.row<0&&(e.row=0),e},this.insert=function(e,t){if(!t||t.length===0)return e;e=this.$clipPosition(e),this.getLength()<=1&&this.$detectNewLine(t);var n=this.$split(t),r=n.splice(0,1)[0],i=n.length==0?null:n.splice(n.length-1,1)[0];return e=this.insertInLine(e,r),i!==null&&(e=this.insertNewLine(e),e=this._insertLines(e.row,n),e=this.insertInLine(e,i||"")),e},this.insertLines=function(e,t){return e>=this.getLength()?this.insert({row:e,column:0},"\n"+t.join("\n")):this._insertLines(Math.max(e,0),t)},this._insertLines=function(e,t){if(t.length==0)return{row:e,column:0};if(t.length>65535){var n=this._insertLines(e,t.slice(65535));t=t.slice(0,65535)}var r=[e,0];r.push.apply(r,t),this.$lines.splice.apply(this.$lines,r);var i=new s(e,0,e+t.length,0),o={action:"insertLines",range:i,lines:t};return this._emit("change",{data:o}),n||i.end},this.insertNewLine=function(e){e=this.$clipPosition(e);var t=this.$lines[e.row]||"";this.$lines[e.row]=t.substring(0,e.column),this.$lines.splice(e.row+1,0,t.substring(e.column,t.length));var n={row:e.row+1,column:0},r={action:"insertText",range:s.fromPoints(e,n),text:this.getNewLineCharacter()};return this._emit("change",{data:r}),n},this.insertInLine=function(e,t){if(t.length==0)return e;var n=this.$lines[e.row]||"";this.$lines[e.row]=n.substring(0,e.column)+t+n.substring(e.column);var r={row:e.row,column:e.column+t.length},i={action:"insertText",range:s.fromPoints(e,r),text:t};return this._emit("change",{data:i}),r},this.remove=function(e){e.start=this.$clipPosition(e.start),e.end=this.$clipPosition(e.end);if(e.isEmpty())return e.start;var t=e.start.row,n=e.end.row;if(e.isMultiLine()){var r=e.start.column==0?t:t+1,i=n-1;e.end.column>0&&this.removeInLine(n,0,e.end.column),i>=r&&this._removeLines(r,i),r!=t&&(this.removeInLine(t,e.start.column,this.getLine(t).length),this.removeNewLine(e.start.row))}else this.removeInLine(t,e.start.column,e.end.column);return e.start},this.removeInLine=function(e,t,n){if(t==n)return;var r=new s(e,t,e,n),i=this.getLine(e),o=i.substring(t,n),u=i.substring(0,t)+i.substring(n,i.length);this.$lines.splice(e,1,u);var a={action:"removeText",range:r,text:o};return this._emit("change",{data:a}),r.start},this.removeLines=function(e,t){return e<0||t>=this.getLength()?this.remove(new s(e,0,t+1,0)):this._removeLines(e,t)},this._removeLines=function(e,t){var n=new s(e,0,t+1,0),r=this.$lines.splice(e,t-e+1),i={action:"removeLines",range:n,nl:this.getNewLineCharacter(),lines:r};return this._emit("change",{data:i}),r},this.removeNewLine=function(e){var t=this.getLine(e),n=this.getLine(e+1),r=new s(e,t.length,e+1,0),i=t+n;this.$lines.splice(e,2,i);var o={action:"removeText",range:r,text:this.getNewLineCharacter()};this._emit("change",{data:o})},this.replace=function(e,t){if(t.length==0&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);if(t)var n=this.insert(e.start,t);else n=e.start;return n},this.applyDeltas=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=s.fromPoints(n.range.start,n.range.end);n.action=="insertLines"?this.insertLines(r.start.row,n.lines):n.action=="insertText"?this.insert(r.start,n.text):n.action=="removeLines"?this._removeLines(r.start.row,r.end.row-1):n.action=="removeText"&&this.remove(r)}},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t],r=s.fromPoints(n.range.start,n.range.end);n.action=="insertLines"?this._removeLines(r.start.row,r.end.row-1):n.action=="insertText"?this.remove(r):n.action=="removeLines"?this._insertLines(r.start.row,n.lines):n.action=="removeText"&&this.insert(r.start,n.text)}},this.indexToPosition=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length;for(var i=t||0,s=n.length;i<s;i++){e-=n[i].length+r;if(e<0)return{row:i,column:e+n[i].length+r}}return{row:s-1,column:n[s-1].length}},this.positionToIndex=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,s=Math.min(e.row,n.length);for(var o=t||0;o<s;++o)i+=n[o].length+r;return i+e.column}}).call(u.prototype),t.Document=u}),define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),typeof n=="undefined"?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.onChange=function(e){var t=e.data,n=t.range;if(n.start.row==n.end.row&&n.start.row!=this.row)return;if(n.start.row>this.row)return;if(n.start.row==this.row&&n.start.column>this.column)return;var r=this.row,i=this.column,s=n.start,o=n.end;t.action==="insertText"?s.row===r&&s.column<=i?s.row===o.row?i+=o.column-s.column:(i-=s.column,r+=o.row-s.row):s.row!==o.row&&s.row<r&&(r+=o.row-s.row):t.action==="insertLines"?s.row<=r&&(r+=o.row-s.row):t.action==="removeText"?s.row===r&&s.column<i?o.column>=i?i=s.column:i=Math.max(0,i-(o.column-s.column)):s.row!==o.row&&s.row<r?(o.row===r&&(i=Math.max(0,i-o.column)+s.column),r-=o.row-s.row):o.row===r&&(r-=o.row-s.row,i=Math.max(0,i-o.column)+s.column):t.action=="removeLines"&&s.row<=r&&(o.row<=r?r-=o.row-s.row:(r=s.row,i=0)),this.setPosition(r,i,!0)},this.setPosition=function(e,t,n){var r;n?r={row:e,column:t}:r=this.$clipPositionToDocument(e,t);if(this.row==r.row&&this.column==r.column)return;var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._emit("change",{old:i,value:r})},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(s.prototype)}),define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(!n.running)return;var e=new Date,t=n.currentLine,r=-1,i=n.doc;while(n.lines[t])t++;var s=t,o=i.getLength(),u=0;n.running=!1;while(t<o){n.$tokenizeRow(t),r=t;do t++;while(n.lines[t]);u++;if(u%5==0&&new Date-e>20){n.running=setTimeout(n.$worker,20),n.currentLine=t;return}}n.currentLine=t,s<=r&&n.fireUpdateEvent(s,r)}};(function(){r.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._emit("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.$updateOnChange=function(e){var t=e.range,n=t.start.row,r=t.end.row-n;if(r===0)this.lines[n]=null;else if(e.action=="removeText"||e.action=="removeLines")this.lines.splice(n,r+1,null),this.states.splice(n,r+1,null);else{var i=Array(r+1);i.unshift(n,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(n,this.currentLine,this.doc.getLength()),this.stop(),this.running=setTimeout(this.$worker,700)},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],r=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!=r.state+""?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens}}).call(s.prototype),t.BackgroundTokenizer=s}),define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){if(this.regExp+""==e+"")return;this.regExp=e,this.cache=[]},this.update=function(e,t,n,i){if(!this.regExp)return;var o=i.firstRow,u=i.lastRow;for(var a=o;a<=u;a++){var f=this.cache[a];f==null&&(f=r.getMatchOffsets(n.getLine(a),this.regExp),f.length>this.MAX_RANGES&&(f=f.slice(0,this.MAX_RANGES)),f=f.map(function(e){return new s(a,e.offset,a,e.offset+e.length)}),this.cache[a]=f.length?f:"");for(var l=f.length;l--;)t.drawSingleLineMarker(e,f[l].toScreenRange(n),this.clazz,i)}}}).call(o.prototype),t.SearchHighlight=o}),define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,n){function u(){this.getFoldAt=function(e,t,n){var r=this.getFoldLine(e);if(!r)return null;var i=r.folds;for(var s=0;s<i.length;s++){var o=i[s];if(o.range.contains(e,t)){if(n==1&&o.range.isEnd(e,t))continue;if(n==-1&&o.range.isStart(e,t))continue;return o}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,r=this.$foldData,i=[];t.column+=1,n.column-=1;for(var s=0;s<r.length;s++){var o=r[s].range.compareRange(e);if(o==2)continue;if(o==-2)break;var u=r[s].folds;for(var a=0;a<u.length;a++){var f=u[a];o=f.range.compareRange(e);if(o==-2)break;if(o==2)continue;if(o==42)break;i.push(f)}}return t.column-=1,n.column+=1,i},this.getAllFolds=function(){function n(t){e.push(t)}var e=[],t=this.$foldData;for(var r=0;r<t.length;r++)for(var i=0;i<t[r].folds.length;i++)n(t[r].folds[i]);return e},this.getFoldStringAt=function(e,t,n,r){r=r||this.getFoldLine(e);if(!r)return null;var i={end:{column:0}},s,o;for(var u=0;u<r.folds.length;u++){o=r.folds[u];var a=o.range.compareEnd(e,t);if(a==-1){s=this.getLine(o.start.row).substring(i.end.column,o.start.column);break}if(a===0)return null;i=o}return s||(s=this.getLine(o.start.row).substring(i.end.column)),n==-1?s.substring(0,t-i.end.column):n==1?s.substring(t-i.end.column):s},this.getFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.start.row<=e&&i.end.row>=e)return i;if(i.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.end.row>=e)return i}return null},this.getFoldedRowCount=function(e,t){var n=this.$foldData,r=t-e+1;for(var i=0;i<n.length;i++){var s=n[i],o=s.end.row,u=s.start.row;if(o>=t){u<t&&(u>=e?r-=t-u:r=0);break}o>=e&&(u>=e?r-=o-u:r-=o-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var n=this.$foldData,r=!1,o;e instanceof s?o=e:(o=new s(t,e),o.collapseChildren=t.collapseChildren),this.$clipRangeToDocument(o.range);var u=o.start.row,a=o.start.column,f=o.end.row,l=o.end.column;if(u==f&&l-a<2)throw"The range has to be at least 2 characters width";var c=this.getFoldAt(u,a,1),h=this.getFoldAt(f,l,-1);if(c&&h==c)return c.addSubFold(o);if(c&&!c.range.isStart(u,a)||h&&!h.range.isEnd(f,l))throw"A fold can't intersect already existing fold"+o.range+c.range;var p=this.getFoldsInRange(o.range);p.length>0&&(this.removeFolds(p),p.forEach(function(e){o.addSubFold(e)}));for(var d=0;d<n.length;d++){var v=n[d];if(f==v.start.row){v.addFold(o),r=!0;break}if(u==v.end.row){v.addFold(o),r=!0;if(!o.sameRow){var m=n[d+1];if(m&&m.start.row==f){v.merge(m);break}}break}if(f<=v.start.row)break}return r||(v=this.$addFoldLine(new i(this.$foldData,o))),this.$useWrapMode?this.$updateWrapData(v.start.row,v.start.row):this.$updateRowLengthCache(v.start.row,v.start.row),this.$modified=!0,this._emit("changeFold",{data:o,action:"add"}),o},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,r=t.end.row,i=this.$foldData,s=t.folds;if(s.length==1)i.splice(i.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))s.pop(),t.end.row=s[s.length-1].end.row,t.end.column=s[s.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))s.shift(),t.start.row=s[0].start.row,t.start.column=s[0].start.column;else if(e.sameRow)s.splice(s.indexOf(e),1);else{var o=t.split(e.start.row,e.start.column);s=o.folds,s.shift(),o.start.row=s[0].start.row,o.start.column=s[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._emit("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,i;e==null?(n=new r(0,0,this.getLength(),0),t=!0):typeof e=="number"?n=new r(e,0,e,this.getLine(e).length):"row"in e?n=r.fromPoints(e,e):n=e,i=this.getFoldsInRange(n);if(t)this.removeFolds(i);else while(i.length)this.expandFolds(i),i=this.getFoldsInRange(n)},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,r,i){r==null&&(r=e.start.row,i=0),t==null&&(t=e.end.row,n=this.getLine(t).length);var s=this.doc,o="";return e.walk(function(e,t,n,u){if(t<r)return;if(t==r){if(n<i)return;u=Math.max(i,u)}e!=null?o+=e:o+=s.getLine(t).substring(u,n)},t,n),o},this.getDisplayLine=function(e,t,n,r){var i=this.getFoldLine(e);if(!i){var s;return s=this.doc.getLine(e),s.substring(r||0,t||s.length)}return this.getFoldDisplayLine(i,e,t,n,r)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new i(e,n)}),e},this.toggleFold=function(e){var t=this.selection,n=t.getRange(),r,i;if(n.isEmpty()){var s=n.start;r=this.getFoldAt(s.row,s.column);if(r){this.expandFold(r);return}(i=this.findMatchingBracket(s))?n.comparePoint(i)==1?n.end=i:(n.start=i,n.start.column++,n.end.column--):(i=this.findMatchingBracket({row:s.row,column:s.column+1}))?(n.comparePoint(i)==1?n.end=i:n.start=i,n.start.column++):n=this.getCommentFoldRange(s.row,s.column)||n}else{var o=this.getFoldsInRange(n);if(e&&o.length){this.expandFolds(o);return}o.length==1&&(r=o[0])}r||(r=this.getFoldAt(n.start.row,n.start.column));if(r&&r.range.toString()==n.toString()){this.expandFold(r);return}var u="...";if(!n.isMultiLine()){u=this.getTextRange(n);if(u.length<4)return;u=u.trim().substring(0,2)+".."}this.addFold(u,n)},this.getCommentFoldRange=function(e,t,n){var i=new o(this,e,t),s=i.getCurrentToken();if(s&&/^comment|string/.test(s.type)){var u=new r,a=new RegExp(s.type.replace(/\..*/,"\\."));if(n!=1){do s=i.stepBackward();while(s&&a.test(s.type));i.stepForward()}u.start.row=i.getCurrentTokenRow(),u.start.column=i.getCurrentTokenColumn()+2,i=new o(this,e,t);if(n!=-1){do s=i.stepForward();while(s&&a.test(s.type));s=i.stepBackward()}else s=i.getCurrentToken();return u.end.row=i.getCurrentTokenRow(),u.end.column=i.getCurrentTokenColumn()+s.value.length-2,u}},this.foldAll=function(e,t,n){n==undefined&&(n=1e5);var r=this.foldWidgets;t=t||this.getLength();for(var i=e||0;i<t;i++){r[i]==null&&(r[i]=this.getFoldWidget(i));if(r[i]!="start")continue;var s=this.getFoldWidgetRange(i);if(s&&s.end.row<=t)try{var o=this.addFold("...",s);o.collapseChildren=n,i=s.end.row}catch(u){}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle==e)return;this.$foldStyle=e,e=="manual"&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)},this.$setFolding=function(e){if(this.$foldMode==e)return;this.$foldMode=e,this.removeListener("change",this.$updateFoldWidgets),this._emit("changeAnnotation");if(!e||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets)},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};var r=e-1,i;while(r>=0){var s=n[r];s==null&&(s=n[r]=this.getFoldWidget(r));if(s=="start"){var o=this.getFoldWidgetRange(r);i||(i=o);if(o&&o.end.row>=e)break}r--}return{range:r!==-1&&o,firstRange:i}},this.onFoldWidgetClick=function(e,t){var n=this.getFoldWidget(e),r=this.getLine(e);t=t.domEvent;var i=t.shiftKey,s=t.ctrlKey||t.metaKey,o=t.altKey,u=n==="end"?-1:1,a=this.getFoldAt(e,u===-1?0:r.length,u);if(a){i||s?this.removeFold(a):this.expandFold(a);return}var f=this.getFoldWidgetRange(e);if(f&&!f.isMultiLine()){a=this.getFoldAt(f.start.row,f.start.column,1);if(a&&f.isEqual(a.range)){this.removeFold(a);return}}if(o){var l=this.getParentFoldRangeData(e);if(l.range)var c=l.range.start.row+1,h=l.range.end.row;this.foldAll(c,h,s?1e4:0)}else if(i){var h=f?f.end.row:this.getLength();this.foldAll(e+1,f.end.row,s?1e4:0)}else f&&(s&&(f.collapseChildren=1e4),this.addFold("...",f));f||((t.target||t.srcElement).className+=" ace_invalid")},this.updateFoldWidgets=function(e){var t=e.data,n=t.range,r=n.start.row,i=n.end.row-r;if(i===0)this.foldWidgets[r]=null;else if(t.action=="removeText"||t.action=="removeLines")this.foldWidgets.splice(r,i+1,null);else{var s=Array(i+1);s.unshift(r,1),this.foldWidgets.splice.apply(this.foldWidgets,s)}}}var r=e("../range").Range,i=e("./fold_line").FoldLine,s=e("./fold").Fold,o=e("../token_iterator").TokenIterator;t.Folding=u}),define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var r=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw"Can't add a fold to this FoldLine as it has no connection";this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw"Trying to add fold to FoldRow that doesn't have a matching row";this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var r=0,i=this.folds,s,o,u,a=!0;t==null&&(t=this.end.row,n=this.end.column);for(var f=0;f<i.length;f++){s=i[f],o=s.range.compareStart(t,n);if(o==-1){e(null,t,n,r,a);return}u=e(null,s.start.row,s.start.column,r,a),u=!u&&e(s.placeholder,s.start.row,s.start.column,r);if(u||o==0)return;a=!s.sameRow,r=s.end.column}e(null,t,n,r,a)},this.getNextFoldTo=function(e,t){var n,r;for(var i=0;i<this.folds.length;i++){n=this.folds[i],r=n.range.compareEnd(e,t);if(r==-1)return{fold:n,kind:"after"};if(r==0)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var r=this.getNextFoldTo(e,t),i,s;if(r){i=r.fold;if(r.kind=="inside"&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){s=this.folds;var o=s.indexOf(i);o==0&&(this.start.column+=n);for(o;o<s.length;o++){i=s[o],i.start.column+=n;if(!i.sameRow)return;i.end.column+=n}this.end.column+=n}}},this.split=function(e,t){var n=this.getNextFoldTo(e,t).fold,r=this.folds,s=this.foldData;if(!n)return null;var o=r.indexOf(n),u=r[o-1];this.end.row=u.end.row,this.end.column=u.end.column,r=r.splice(o,r.length-o);var a=new i(s,r);return s.splice(s.indexOf(this)+1,0,a),a},this.merge=function(e){var t=e.folds;for(var n=0;n<t.length;n++)this.addFold(t[n]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){var t=0,n;for(var r=0;r<this.folds.length;r++){var n=this.folds[r];e-=n.start.column-t;if(e<0)return{row:n.start.row,column:n.start.column+e};e-=n.placeholder.length;if(e<0)return n.start;t=n.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(e,t,n){function u(e,t){e.row-=t.row,e.row==0&&(e.column-=t.column)}function a(e,t){u(e.start,t),u(e.end,t)}function f(e,t){e.row==0&&(e.column+=t.column),e.row+=t.row}function l(e,t){f(e.start,t),f(e.end,t)}var r=e("../range").Range,i=e("../range_list").RangeList,s=e("../lib/oop"),o=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};s.inherits(o,i),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new o(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(this.range.isEqual(e))return;if(!this.range.containsRange(e))throw"A fold can't intersect already existing fold"+e.range+this.range;a(e,this.start);var t=e.start.row,n=e.start.column;for(var r=0,i=-1;r<this.subFolds.length;r++){i=this.subFolds[r].range.compare(t,n);if(i!=1)break}var s=this.subFolds[r];if(i==0)return s.addSubFold(e);var t=e.range.end.row,n=e.range.end.column;for(var o=r,i=-1;o<this.subFolds.length;o++){i=this.subFolds[o].range.compare(t,n);if(i!=1)break}var u=this.subFolds[o];if(i==0)throw"A fold can't intersect already existing fold"+e.range+this.range;var f=this.subFolds.splice(r,o-r,e);return e.setFoldLine(this.foldLine),e},this.restoreRange=function(e){return l(e,this.start)}}.call(o.prototype)}),define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){var r=e("./range").Range,i=r.comparePoints,s=function(){this.ranges=[]};(function(){this.comparePoints=i,this.pointIndex=function(e,t,n){var r=this.ranges;for(var s=n||0;s<r.length;s++){var o=r[s],u=i(e,o.end);if(u>0)continue;var a=i(e,o.start);return u===0?t&&a!==0?-s-2:s:a>0||a===0&&!t?s:-s-1}return-s-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var r=this.pointIndex(e.end,t,n);return r<0?r=-r-1:r++,this.ranges.splice(n,r-n,e)},this.addList=function(e){var t=[];for(var n=e.length;n--;)t.push.call(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){var e=[],t=this.ranges;t=t.sort(function(e,t){return i(e.start,t.start)});var n=t[0],r;for(var s=1;s<t.length;s++){r=n,n=t[s];var o=i(r.end,n.start);if(o<0)continue;if(o==0&&!r.isEmpty()&&!n.isEmpty())continue;i(r.end,n.end)<0&&(r.end.row=n.end.row,r.end.column=n.end.column),t.splice(s,1),e.push(n),n=r,s--}return this.ranges=t,e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});r<0&&(r=-r-1);var i=this.pointIndex({row:t,column:0},r);i<0&&(i=-i-1);var s=[];for(var o=r;o<i;o++)s.push(n[o]);return s},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){if(!this.session)return;this.session.removeListener("change",this.onChange),this.session=null},this.$onChange=function(e){var t=e.data.range;if(e.data.action[0]=="i")var n=t.start,r=t.end;else var r=t.start,n=t.end;var i=n.row,s=r.row,o=s-i,u=-n.column+r.column,a=this.ranges;for(var f=0,l=a.length;f<l;f++){var c=a[f];if(c.end.row<i)continue;if(c.start.row>i)break;c.start.row==i&&c.start.column>=n.column&&(c.start.column+=u,c.start.row+=o),c.end.row==i&&c.end.column>=n.column&&(c.end.column==n.column&&u>0&&f<l-1&&c.end.column>c.start.column&&c.end.column==a[f+1].start.column&&(c.end.column-=u),c.end.column+=u,c.end.row+=o)}if(o!=0&&f<l)for(;f<l;f++){var c=a[f];c.start.row+=o,c.end.row+=o}}}).call(s.prototype),t.RangeList=s}),define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){function s(){this.findMatchingBracket=function(e,t){if(e.column==0)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(n=="")return null;var r=n.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e):null},this.getBracketRange=function(e){var t=this.getLine(e.row),n=!0,r,s=t.charAt(e.column-1),o=s&&s.match(/([\(\[\{])|([\)\]\}])/);o||(s=t.charAt(e.column),e={row:e.row,column:e.column+1},o=s&&s.match(/([\(\[\{])|([\)\]\}])/),n=!1);if(!o)return null;if(o[1]){var u=this.$findClosingBracket(o[1],e);if(!u)return null;r=i.fromPoints(e,u),n||(r.end.column++,r.start.column--),r.cursor=r.end}else{var u=this.$findOpeningBracket(o[2],e);if(!u)return null;r=i.fromPoints(u,e),n||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("rparen",".paren")+")+"));var a=t.column-o.getCurrentTokenColumn()-2,f=u.value;for(;;){while(a>=0){var l=f.charAt(a);if(l==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else l==e&&(s+=1);a-=1}do u=o.stepBackward();while(u&&!n.test(u.type));if(u==null)break;f=u.value,a=f.length-1}return null},this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("lparen",".paren")+")+"));var a=t.column-o.getCurrentTokenColumn();for(;;){var f=u.value,l=f.length;while(a<l){var c=f.charAt(a);if(c==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else c==e&&(s+=1);a+=1}do u=o.stepForward();while(u&&!n.test(u.type));if(u==null)break;a=0}return null}}var r=e("../token_iterator").TokenIterator,i=e("../range").Range;t.BracketMatch=s}),define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(){this.$options={}};(function(){this.set=function(e){return i.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$matchIterator(e,this.$options);if(!t)return!1;var n=null;return t.forEach(function(e,t,r){if(!e.start){var i=e.offset+(r||0);n=new s(t,i,t,i+e.length)}else n=e;return!0}),n},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,i=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),o=[],u=t.re;if(t.$isMultiLine){var a=u.length,f=i.length-a;for(var l=u.offset||0;l<=f;l++){for(var c=0;c<a;c++)if(i[l+c].search(u[c])==-1)break;var h=i[l],p=i[l+a-1],d=h.match(u[0])[0].length,v=p.match(u[a-1])[0].length;o.push(new s(l,h.length-d,l+a-1,v))}}else for(var m=0;m<i.length;m++){var g=r.getMatchOffsets(i[m],u);for(var c=0;c<g.length;c++){var y=g[c];o.push(new s(m,y.offset,m,y.offset+y.length))}}if(n){var b=n.start.column,w=n.start.column,m=0,c=o.length-1;while(m<c&&o[m].start.column<b&&o[m].start.row==n.start.row)m++;while(m<c&&o[c].end.column>w&&o[c].end.row==n.end.row)c--;o=o.slice(m,c+1);for(m=0,c=o.length;m<c;m++)o[m].start.row+=n.start.row,o[m].end.row+=n.start.row}return o},this.replace=function(e,t){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(!r)return;var i=r.exec(e);if(!i||i[0].length!=e.length)return null;t=e.replace(r,t);if(n.preserveCase){t=t.split("");for(var s=Math.min(e.length,e.length);s--;){var o=e[s];o&&o.toLowerCase()!=o?t[s]=t[s].toUpperCase():t[s]=t[s].toLowerCase()}t=t.join("")}return t},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var i=this,o,u=t.backwards;if(t.$isMultiLine)var a=n.length,f=function(t,r,i){var u=t.search(n[0]);if(u==-1)return;for(var f=1;f<a;f++){t=e.getLine(r+f);if(t.search(n[f])==-1)return}var l=t.match(n[a-1])[0].length,c=new s(r,u,r+a-1,l);n.offset==1?(c.start.row--,c.start.column=Number.MAX_VALUE):i&&(c.start.column+=i);if(o(c))return!0};else if(u)var f=function(e,t,i){var s=r.getMatchOffsets(e,n);for(var u=s.length-1;u>=0;u--)if(o(s[u],t,i))return!0};else var f=function(e,t,i){var s=r.getMatchOffsets(e,n);for(var u=0;u<s.length;u++)if(o(s[u],t,i))return!0};return{forEach:function(n){o=n,i.$lineIterator(e,t).forEach(f)}}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=r.escapeRegExp(n)),e.wholeWord&&(n="\\b"+n+"\\b");var i=e.caseSensitive?"g":"gi";e.$isMultiLine=!t&&/[\n\r]/.test(n);if(e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,i);try{var s=new RegExp(n,i)}catch(o){s=!1}return e.re=s},this.$assembleMultilineRegExp=function(e,t){var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[];for(var i=0;i<n.length;i++)try{r.push(new RegExp(n[i],t))}catch(s){return!1}return n[0]==""?(r.shift(),r.offset=1):r.offset=0,r},this.$lineIterator=function(e,t){var n=t.backwards==1,r=t.skipCurrent!=0,i=t.range,s=t.start;s||(s=i?i[n?"end":"start"]:e.selection.getRange()),s.start&&(s=s[r!=n?"end":"start"]);var o=i?i.start.row:0,u=i?i.end.row:e.getLength()-1,a=n?function(n){var r=s.row,i=e.getLine(r).substring(0,s.column);if(n(i,r))return;for(r--;r>=o;r--)if(n(e.getLine(r),r))return;if(t.wrap==0)return;for(r=u,o=s.row;r>=o;r--)if(n(e.getLine(r),r))return}:function(n){var r=s.row,i=e.getLine(r).substr(s.column);if(n(i,r,s.column))return;for(r+=1;r<=u;r++)if(n(e.getLine(r),r))return;if(t.wrap==0)return;for(r=o,u=s.row;r<=u;r++)if(n(e.getLine(r),r))return};return{forEach:a}}}).call(o.prototype),t.Search=o}),define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../keyboard/hash_handler").HashHandler,s=e("../lib/event_emitter").EventEmitter,o=function(e,t){this.platform=e,this.commands=this.byName={},this.commmandKeyBinding={},this.addCommands(t),this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};r.inherits(o,i),function(){r.implement(this,s),this.exec=function(e,t,n){typeof e=="string"&&(e=this.commands[e]);if(!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;var r={editor:t,command:e,args:n},i=this._emit("exec",r);return this._signal("afterExec",r),i===!1?!1:!0},this.toggleRecording=function(e){if(this.$inReplay)return;return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(this.$inReplay||!this.macro)return;if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){typeof t=="string"?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}},this.trimMacro=function(e){return e.map(function(e){return typeof e[0]!="string"&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(o.prototype),t.CommandManager=o}),define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){function s(e,t){this.platform=t||(i.isMac?"mac":"win"),this.commands={},this.commmandKeyBinding={},this.addCommands(e)}var r=e("../lib/keys"),i=e("../lib/useragent");(function(){this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e){var t=typeof e=="string"?e:e.name;e=this.commands[t],delete this.commands[t];var n=this.commmandKeyBinding;for(var r in n)for(var i in n[r])n[r][i]==e&&delete n[r][i]},this.bindKey=function(e,t){if(!e)return;if(typeof t=="function"){this.addCommand({exec:t,bindKey:e,name:t.name||e});return}var n=this.commmandKeyBinding;e.split("|").forEach(function(e){var r=this.parseKeys(e,t),i=r.hashId;(n[i]||(n[i]={}))[r.key]=t},this)},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];if(typeof n=="string")return this.bindKey(n,t);typeof n=="function"&&(n={exec:n}),n.name||(n.name=t),this.addCommand(n)},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){var t=e.bindKey;if(!t)return;var n=typeof t=="string"?t:t[this.platform];this.bindKey(n,e)},this.parseKeys=function(e){e.indexOf(" ")!=-1&&(e=e.split(/\s+/).pop());var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),n=t.pop(),i=r[n];if(r.FUNCTION_KEYS[i])n=r.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(t.length==1&&t[0]=="shift")return{key:n.toUpperCase(),hashId:-1}}var s=0;for(var o=t.length;o--;){var u=r.KEY_MODS[t[o]];if(u==null)return typeof console!="undefined"&&console.error("invalid modifier "+t[o]+" in "+e),!1;s|=u}return{key:n,hashId:s}},this.findKeyCommand=function(t,n){var r=this.commmandKeyBinding;return r[t]&&r[t][n]},this.handleKeyboard=function(e,t,n,r){return{command:this.findKeyCommand(t,n)}}}).call(s.prototype),t.HashHandler=s}),define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config"],function(e,t,n){function s(e,t){return{win:e,mac:t}}var r=e("../lib/lang"),i=e("../config");t.commands=[{name:"showSettingsMenu",bindKey:s("Ctrl-,","Command-,"),exec:function(e){i.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"selectall",bindKey:s("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",bindKey:s(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:s("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10);isNaN(t)||e.gotoLine(t)},readOnly:!0},{name:"fold",bindKey:s("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},readOnly:!0},{name:"unfold",bindKey:s("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},readOnly:!0},{name:"foldall",bindKey:s("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll()},readOnly:!0},{name:"unfoldall",bindKey:s("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},readOnly:!0},{name:"findnext",bindKey:s("Ctrl-K","Command-G"),exec:function(e){e.findNext()},readOnly:!0},{name:"findprevious",bindKey:s("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},readOnly:!0},{name:"find",bindKey:s("Ctrl-F","Command-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:s("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,group:"fileJump"},{name:"gotostart",bindKey:s("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,group:"fileJump"},{name:"selectup",bindKey:s("Shift-Up","Shift-Up"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",readOnly:!0},{name:"golineup",bindKey:s("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selecttoend",bindKey:s("Ctrl-Shift-End","Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,group:"fileJump"},{name:"gotoend",bindKey:s("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,group:"fileJump"},{name:"selectdown",bindKey:s("Shift-Down","Shift-Down"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",readOnly:!0},{name:"golinedown",bindKey:s("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selectwordleft",bindKey:s("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",readOnly:!0},{name:"gotowordleft",bindKey:s("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttolinestart",bindKey:s("Alt-Shift-Left","Command-Shift-Left"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",readOnly:!0},{name:"gotolinestart",bindKey:s("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",readOnly:!0},{name:"selectleft",bindKey:s("Shift-Left","Shift-Left"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",readOnly:!0},{name:"gotoleft",bindKey:s("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selectwordright",bindKey:s("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",readOnly:!0},{name:"gotowordright",bindKey:s("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttolineend",bindKey:s("Alt-Shift-Right","Command-Shift-Right"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"gotolineend",bindKey:s("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"selectright",bindKey:s("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",readOnly:!0},{name:"gotoright",bindKey:s("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:s(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:s("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:s(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:s("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:s("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"togglerecording",bindKey:s("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",bindKey:s("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",bindKey:s("Ctrl-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttomatching",bindKey:s("Ctrl-Shift-P",null),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",readOnly:!0},{name:"cut",exec:function(e){var t=e.getSelectionRange();e._emit("cut",t),e.selection.isEmpty()||(e.session.remove(t),e.clearSelection())},multiSelectAction:"forEach"},{name:"removeline",bindKey:s("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:s("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},multiSelectAction:"forEach"},{name:"sortlines",bindKey:s("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:s("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine"},{name:"toggleBlockComment",bindKey:s("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach"},{name:"modifyNumberUp",bindKey:s("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:s("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},multiSelectAction:"forEach"},{name:"replace",bindKey:s("Ctrl-H","Command-Option-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",bindKey:s("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:s("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:s("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()}},{name:"movelinesup",bindKey:s("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()}},{name:"copylinesdown",bindKey:s("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()}},{name:"movelinesdown",bindKey:s("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()}},{name:"del",bindKey:s("Delete","Delete|Ctrl-D"),exec:function(e){e.remove("right")},multiSelectAction:"forEach"},{name:"backspace",bindKey:s("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach"},{name:"removetolinestart",bindKey:s("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach"},{name:"removetolineend",bindKey:s("Alt-Delete","Ctrl-K"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach"},{name:"removewordleft",bindKey:s("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach"},{name:"removewordright",bindKey:s("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach"},{name:"outdent",bindKey:s("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach"},{name:"indent",bindKey:s("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach"},{name:"blockoutdent",bindKey:s("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine"},{name:"blockindent",bindKey:s("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach"},{name:"inserttext",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach"},{name:"splitline",bindKey:s(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach"},{name:"transposeletters",bindKey:s("Ctrl-T","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)}},{name:"touppercase",bindKey:s("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach"},{name:"tolowercase",bindKey:s("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach"}]}),define("ace/undomanager",["require","exports","module"],function(e,t,n){var r=function(){this.reset()};(function(){this.execute=function(e){var t=e.args[0];this.$doc=e.args[1],e.merge&&this.hasUndo()&&(t=this.$undoStack.pop().concat(t)),this.$undoStack.push(t),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(e){var t=this.$undoStack.pop(),n=null;return t&&(n=this.$doc.undoChanges(t,e),this.$redoStack.push(t),this.dirtyCounter--),n},this.redo=function(e){var t=this.$redoStack.pop(),n=null;return t&&(n=this.$doc.redoChanges(t,e),this.$undoStack.push(t),this.dirtyCounter++),n},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return this.dirtyCounter===0}}).call(r.prototype),t.UndoManager=r}),define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/useragent","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/renderloop","ace/lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/useragent"),o=e("./config"),u=e("./layer/gutter").Gutter,a=e("./layer/marker").Marker,f=e("./layer/text").Text,l=e("./layer/cursor").Cursor,c=e("./scrollbar").ScrollBarH,h=e("./scrollbar").ScrollBarV,p=e("./renderloop").RenderLoop,d=e("./lib/event_emitter").EventEmitter,v=".ace_editor {position: relative;overflow: hidden;font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;font-size: 12px;line-height: normal;color: black;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: text;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUM2OEZDQTQ4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUM2OEZDQTU4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQzY4RkNBMjhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQzY4RkNBMzhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkgXxbAAAAJbSURBVHjapFNNaBNBFH4zs5vdZLP5sQmNpT82QY209heh1ioWisaDRcSKF0WKJ0GQnrzrxasHsR6EnlrwD0TagxJabaVEpFYxLWlLSS822tr87m66ccfd2GKyVhA6MMybgfe97/vmPUQphd0sZjto9XIn9OOsvlu2nkqRzVU+6vvlzPf8W6bk8dxQ0NPbxAALgCgg2JkaQuhzQau/El0zbmUA7U0Es8v2CiYmKQJHGO1QICCLoqilMhkmurDAyapKgqItezi/USRdJqEYY4D5jCy03ht2yMkkvL91jTTX10qzyyu2hruPRN7jgbH+EOsXcMLgYiThEgAMhABW85oqy1DXdRIdvP1AHJ2acQXvDIrVHcdQNrEKNYSVMSZGMjEzIIAwDXIo+6G/FxcGnzkC3T2oMhLjre49sBB+RRcHLqdafK6sYdE/GGBwU1VpFNj0aN8pJbe+BkZyevUrvLl6Xmm0W9IuTc0DxrDNAJd5oEvI/KRsNC3bQyNjPO9yQ1YHcfj2QvfQc/5TUhJTBc2iM0U7AWDQtc1nJHvD/cfO2s7jaGkiTEfa/Ep8coLu7zmNmh8+dc5lZDuUeFAGUNA/OY6JVaypQ0vjr7XYjUvJM37vt+j1vuTK5DgVfVUoTjVe+y3/LxMxY2GgU+CSLy4cpfsYorRXuXIOi0Vt40h67uZFTdIo6nLaZcwUJWAzwNS0tBnqqKzQDnjdG/iPyZxo46HaKUpbvYkj8qYRTZsBhge+JHhZyh0x9b95JqjVJkT084kZIPwu/mPWqPgfQ5jXh2+92Ay7HedfAgwA6KDWafb4w3cAAAAASUVORK5CYII=\");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUM2OEZDQTg4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUM2OEZDQTk4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQzY4RkNBNjhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQzY4RkNBNzhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pgd7PfIAAAGmSURBVHjaYvr//z8DJZiJgUIANoCRkREb9gLiSVAaQx4OQM7AAkwd7XU2/v++/rOttdYGEB9dASEvOMydGKfH8Gv/p4XTkvRBfLxeQAP+1cUhXopyvzhP7P/IoSj7g7Mw09cNKO6J1QQ0L4gICPIv/veg/8W+JdFvQNLHVsW9/nmn9zk7B+cCkDwhL7gt6knSZnx9/LuCEOcvkIAMP+cvto9nfqyZmmUAksfnBUtbM60gX/3/kgyv3/xSFOL5DZT+L8vP+Yfh5cvfPvp/xUHyQHXGyAYwgpwBjZYFT3Y1OEl/OfCH4ffv3wzc4iwMvNIsDJ+f/mH4+vIPAxsb631WW0Yln6ZpQLXdMK/DXGDflh+sIv37EivD5x//Gb7+YWT4y86sl7BCCkSD+Z++/1dkvsFRl+HnD1Rvje4F8whjMXmGj58YGf5zsDMwcnAwfPvKcml62DsQDeaDxN+/Y0qwlpEHqrdB94IRNIDUgfgfKJChGK4OikEW3gTiXUB950ASLFAF54AC94A0G9QAfOnmF9DCDzABFqS08IHYDIScdijOjQABBgC+/9awBH96jwAAAABJRU5ErkJggg==\");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url(\"data:image/gif;base64,R0lGODlhEAAQAMQAAAAAAEFBQVJSUl5eXmRkZGtra39/f4WFhYmJiZGRkaampry8vMPDw8zMzNXV1dzc3OTk5Orq6vDw8P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkAABQALAAAAAAQABAAAAUuICWOZGmeaBml5XGwFCQSBGyXRSAwtqQIiRuiwIM5BoYVbEFIyGCQoeJGrVptIQA7\");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRTk5MTVGREIxNDkxMUUxOTc5Q0FFREQyMTNGMjBFQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRTk5MTVGRUIxNDkxMUUxOTc5Q0FFREQyMTNGMjBFQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZFOTkxNUZCQjE0OTExRTE5NzlDQUVERDIxM0YyMEVDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZFOTkxNUZDQjE0OTExRTE5NzlDQUVERDIxM0YyMEVDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+SIDkjAAAAJ1JREFUeNpi/P//PwMlgImBQkB7A6qrq/+DMC55FkIGKCoq4pVnpFkgTp069f/+/fv/r1u37r+tre1/kg0A+ptn9uzZYLaRkRHpLvjw4cNXWVlZhufPnzOcO3eOdAO0tbVPAjHDmzdvGA4fPsxIsgGSkpJmv379Ynj37h2DjIyMCMkG3LhxQ/T27dsMampqDHZ2dq/pH41DxwCAAAMAFdc68dUsFZgAAAAASUVORK5CYII=\");}.ace_scrollbar {position: absolute;overflow: hidden;overflow-y: auto;right: 0;top: 0;bottom: 0;}.ace_scrollbar-inner {position: absolute;width: 1px;left: 0;}.ace_scrollbar-h {position: absolute;overflow-x: auto;overflow-y: hidden;right: 0;left: 0;bottom: 0;}.ace_scrollbar-inner {position: absolute;height: 1px;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;}.ace_text-input.ace_composition {background: #f8f8f8;color: #111;z-index: 1000;opacity: 1;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;white-space: nowrap;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;/* setting pointer-events: auto; on node under the mouse, which changesduring scroll, will break mouse wheel scrolling in Safari */pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-moz-transition: opacity 0.18s;-webkit-transition: opacity 0.18s;-o-transition: opacity 0.18s;-ms-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_cursor[style*=\"opacity: 0\"]{-ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\";}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_line {white-space: nowrap;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%11%00%00%00%09%08%06%00%00%00%D4%E8%C7%0C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%B5IDAT(%15%A5%91%3D%0E%02!%10%85ac%E1%05%D6%CE%D6%C6%CE%D2%E8%ED%CD%DE%C0%C6%D6N.%E0V%F8%3D%9Ca%891XH%C2%BE%D9y%3F%90!%E6%9C%C3%BFk%E5%011%C6-%F5%C8N%04%DF%BD%FF%89%DFt%83DN%60%3E%F3%AB%A0%DE%1A%5Dg%BE%10Q%97%1B%40%9C%A8o%10%8F%5E%828%B4%1B%60%87%F6%02%26%85%1Ch%1E%C1%2B%5Bk%FF%86%EE%B7j%09%9A%DA%9B%ACe%A3%F9%EC%DA!9%B4%D5%A6%81%86%86%98%CC%3C%5B%40%FA%81%B3%E9%CB%23%94%C16Azo%05%D4%E1%C1%95a%3B%8A'%A0%E8%CC%17%22%85%1D%BA%00%A2%FA%DC%0A%94%D1%D1%8D%8B%3A%84%17B%C7%60%1A%25Z%FC%8D%00%00%00%00IEND%AEB%60%82\"),url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%007%08%06%00%00%00%C4%DD%80C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%3AIDAT8%11c%FC%FF%FF%7F%18%03%1A%60%01%F2%3F%A0%891%80%04%FF%11-%F8%17%9BJ%E2%05%B1ZD%81v%26t%E7%80%F8%A3%82h%A12%1A%20%A3%01%02%0F%01%BA%25%06%00%19%C0%0D%AEF%D5%3ES%00%00%00%00IEND%AEB%60%82\");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;-moz-border-radius: 2px;-webkit-border-radius: 2px;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%11%00%00%00%09%08%06%00%00%00%D4%E8%C7%0C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%B5IDAT(%15%A5%91%3D%0E%02!%10%85ac%E1%05%D6%CE%D6%C6%CE%D2%E8%ED%CD%DE%C0%C6%D6N.%E0V%F8%3D%9Ca%891XH%C2%BE%D9y%3F%90!%E6%9C%C3%BFk%E5%011%C6-%F5%C8N%04%DF%BD%FF%89%DFt%83DN%60%3E%F3%AB%A0%DE%1A%5Dg%BE%10Q%97%1B%40%9C%A8o%10%8F%5E%828%B4%1B%60%87%F6%02%26%85%1Ch%1E%C1%2B%5Bk%FF%86%EE%B7j%09%9A%DA%9B%ACe%A3%F9%EC%DA!9%B4%D5%A6%81%86%86%98%CC%3C%5B%40%FA%81%B3%E9%CB%23%94%C16Azo%05%D4%E1%C1%95a%3B%8A'%A0%E8%CC%17%22%85%1D%BA%00%A2%FA%DC%0A%94%D1%D1%8D%8B%3A%84%17B%C7%60%1A%25Z%FC%8D%00%00%00%00IEND%AEB%60%82\"),url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%007%08%06%00%00%00%C4%DD%80C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%003IDAT8%11c%FC%FF%FF%7F%3E%03%1A%60%01%F2%3F%A3%891%80%04%FFQ%26%F8w%C0%B43%A1%DB%0C%E2%8F%0A%A2%85%CAh%80%8C%06%08%3C%04%E8%96%18%00%A3S%0D%CD%CF%D8%C1%9D%00%00%00%00IEND%AEB%60%82\");background-repeat: no-repeat, repeat-x;background-position: center center, top left;}.ace_editor.ace_dragging .ace_content {cursor: move;}.ace_gutter-tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;display: inline-block;max-width: 500px;padding: 4px;position: fixed;z-index: 300;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre-line;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%00%05%08%06%00%00%00%8Do%26%E5%00%00%004IDATx%DAe%8A%B1%0D%000%0C%C2%F2%2CK%96%BC%D0%8F9%81%88H%E9%D0%0E%96%C0%10%92%3E%02%80%5E%82%E4%A9*-%EEsw%C8%CC%11%EE%96w%D8%DC%E9*Eh%0C%151(%00%00%00%00IEND%AEB%60%82\");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%00%05%08%06%00%00%00%8Do%26%E5%00%00%004IDATx%DAm%C7%C1%09%000%08C%D1%8C%ECE%C8E(%8E%EC%02)%1EZJ%F1%C1'%04%07I%E1%E5%EE%CAL%F5%A2%99%99%22%E2%D6%1FU%B5%FE0%D9x%A7%26Wz5%0E%D5%00%00%00%00IEND%AEB%60%82\");}.ace_fold-widget.ace_closed {background-image: url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%03%00%00%00%06%08%06%00%00%00%06%E5%24%0C%00%00%009IDATx%DA5%CA%C1%09%000%08%03%C0%AC*(%3E%04%C1%0D%BA%B1%23%A4Uh%E0%20%81%C0%CC%F8%82%81%AA%A2%AArGfr%88%08%11%11%1C%DD%7D%E0%EE%5B%F6%F6%CB%B8%05Q%2F%E9tai%D9%00%00%00%00IEND%AEB%60%82\");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}/*** Dark version for fold widgets*/.ace_dark .ace_fold-widget {background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\");}.ace_dark .ace_fold-widget.ace_end {background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\");}.ace_dark .ace_fold-widget.ace_closed {background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-moz-transition: opacity 0.4s ease 0.05s;-webkit-transition: opacity 0.4s ease 0.05s;-o-transition: opacity 0.4s ease 0.05s;-ms-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-moz-transition: opacity 0.05s ease 0.05s;-webkit-transition: opacity 0.05s ease 0.05s;-o-transition: opacity 0.05s ease 0.05s;-ms-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}";i.importCssString(v,"ace_editor");var m=function(e,t){var n=this;this.container=e||i.createElement("div"),this.$keepTextAreaAtCursor=!s.isIE,i.addCssClass(this.container,"ace_editor"),this.setTheme(t),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new u(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var r=this.$textLayer=new f(this.content);this.canvas=r.element,this.$markerFront=new a(this.content),this.$cursorLayer=new l(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$textLayer.addEventListener("changeCharacterSize",function(){n.updateCharacterSize(),n.onResize(!0),n._signal("changeCharacterSize")}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:1,characterWidth:1,minHeight:1,maxHeight:1,offset:0,height:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new p(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),o.resetOptions(this),o._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,d),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(e){this.session=e,this.scroller.className="ace_scroller",this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),this.$loop.schedule(this.CHANGE_FULL)},this.updateLines=function(e,t){t===undefined&&(t=Infinity),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t};if(this.$changedLines.firstRow>this.layerConfig.lastRow||this.$changedLines.lastRow<this.layerConfig.firstRow)return;this.$loop.schedule(this.CHANGE_LINES)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.onResize=function(e,t,n,r){if(this.resizing>2)return;this.resizing>0?this.resizing++:this.resizing=e?1:0;var i=this.container;r||(r=i.clientHeight||i.scrollHeight),n||(n=i.clientWidth||i.scrollWidth);var s=this.$updateCachedSize(e,t,n,r);if(!this.$size.scrollerHeight)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(s,!0):this.$loop.schedule(s),this.resizing&&(this.resizing=0)},this.$updateCachedSize=function(e,t,n,r){var i=0,s=this.$size;r&&(e||s.height!=r)&&(s.height=r,i=this.CHANGE_SIZE,s.scrollerHeight=s.height,this.$horizScroll&&(s.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",this.session&&(this.session.setScrollTop(this.getScrollTop()),i|=this.CHANGE_SCROLL));if(n&&(e||s.width!=n)){i=this.CHANGE_SIZE,s.width=n,t==null&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,this.scrollBarH.element.style.left=this.scroller.style.left=t+"px",s.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px";if(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)i|=this.CHANGE_FULL}return i&&this._signal("resize"),i},this.onGutterResize=function(){var e=this.$showGutter?this.$gutter.offsetWidth:0;e!=this.gutterWidth&&this.$changes!=this.$updateCachedSize(true,e,this.$size.width,this.$size.height),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-this.$padding*2,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var e=this.$cursorLayer.$pixelPos,t=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var n=this.session.selection.getCursor();n.column=0,e=this.$cursorLayer.getPixelPosition(n,!0),t*=this.session.getRowLength(n.row)}this.$gutterLineHighlight.style.top=e.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=t+"px"},this.$updatePrintMargin=function(){if(!this.$showPrintMargin&&!this.$printMarginEl)return;if(!this.$printMarginEl){var e=i.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.content},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$keepTextAreaAtCursor)return;var e=this.layerConfig,t=this.$cursorLayer.$pixelPos.top,n=this.$cursorLayer.$pixelPos.left;t-=e.offset;var r=this.lineHeight;if(t<0||t>e.height-r)return;var i=this.characterWidth;if(this.$composition){var s=this.textarea.value.replace(/^\x01+/,"");i*=this.session.$getStringScreenWidth(s)[0]+2,r+=2,t-=1}n-=this.scrollLeft,n>this.$size.scrollerWidth-i&&(n=this.$size.scrollerWidth-i),n-=this.scrollBar.width,this.textarea.style.height=r+"px",this.textarea.style.width=i+"px",this.textarea.style.right=Math.max(0,this.$size.scrollerWidth-n-i)+"px",this.textarea.style.bottom=Math.max(0,this.$size.height-t-r)+"px"},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var e=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,r){var i=this.scrollMargin;i.top=e|0,i.bottom=t|0,i.right=r|0,i.left=n|0,i.v=i.top+i.bottom,i.h=i.left+i.right,this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){this.scrollBarV.setInnerHeight(this.layerConfig.maxHeight+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setInnerWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$renderChanges=function(e,t){if(!this.session||!this.container.offsetWidth||!e&&!t){this.$changes|=e;return}this.$changes&&(e|=this.$changes,this.$changes=0),this._signal("beforeRender");if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL)e|=this.$computeLayerConfig();e&this.CHANGE_H_SCROLL&&(this.$updateScrollBarH(),this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left");if(e&this.CHANGE_FULL){this.$textLayer.checkForSizeChanges(),this.$updateScrollBarV(),this.$updateScrollBarH(),this.$textLayer.update(this.layerConfig),this.$showGutter&&this.$gutterLayer.update(this.layerConfig),this.$markerBack.update(this.layerConfig),this.$markerFront.update(this.layerConfig),this.$cursorLayer.update(this.layerConfig),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this._signal("afterRender");return}if(e&this.CHANGE_SCROLL){this.$updateScrollBarV(),e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(this.layerConfig):this.$textLayer.scrollLines(this.layerConfig),this.$showGutter&&this.$gutterLayer.update(this.layerConfig),this.$markerBack.update(this.layerConfig),this.$markerFront.update(this.layerConfig),this.$cursorLayer.update(this.layerConfig),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),this._signal("afterRender");return}e&this.CHANGE_TEXT?(this.$textLayer.update(this.layerConfig),this.$showGutter&&this.$gutterLayer.update(this.layerConfig)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(this.layerConfig):(e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(this.layerConfig),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(this.layerConfig),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(this.layerConfig),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(this.layerConfig);if(e&this.CHANGE_SIZE||e&this.CHANGE_LINES)this.$updateScrollBarV(),this.$updateScrollBarH();this._signal("afterRender")},this.$autosize=function(e,t){var e=this.session.getScreenLength()*this.lineHeight,n=this.$maxLines*this.lineHeight,r=Math.max((this.$minLines||1)*this.lineHeight,Math.min(n,e)),i=e>n;if(r!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var s=this.container.clientWidth;this.container.style.height=r+"px",this.$updateCachedSize(!0,this.$gutterWidth,s,r),this.desiredHeight=r}},this.$computeLayerConfig=function(){this.$maxLines&&this.lineHeight>1&&this.$autosize();var e=this.session,t=this.$size.height<=2*this.lineHeight,n=this.session.getScreenLength(),r=n*this.lineHeight,i=this.scrollTop%this.lineHeight,s=this.$size.scrollerHeight+this.lineHeight,o=this.$getLongestLine(),u=!t&&(this.$hScrollBarAlwaysVisible||this.$size.scrollerWidth-o-2*this.$padding<0),a=this.$horizScroll!==u;a&&(this.$horizScroll=u,this.scrollBarH.setVisible(u)),!this.$maxLines&&this.$scrollPastEnd&&this.scrollTop>r-this.$size.scrollerHeight&&(r+=Math.min((this.$size.scrollerHeight-this.lineHeight)*this.$scrollPastEnd,this.scrollTop-r+this.$size.scrollerHeight));var f=!t&&(this.$vScrollBarAlwaysVisible||this.$size.scrollerHeight-r<0),l=this.$vScroll!==f;l&&(this.$vScroll=f,this.scrollBarV.setVisible(f)),this.session.setScrollTop(Math.max(-this.scrollMargin.top,Math.min(this.scrollTop,r-this.$size.scrollerHeight+this.scrollMargin.v))),this.session.setScrollLeft(Math.max(-this.scrollMargin.left,Math.min(this.scrollLeft,o+2*this.$padding-this.$size.scrollerWidth+this.scrollMargin.h)));var c=Math.ceil(s/this.lineHeight)-1,h=Math.max(0,Math.round((this.scrollTop-i)/this.lineHeight)),p=h+c,d,v,m=this.lineHeight;h=e.screenToDocumentRow(h,0);var g=e.getFoldLine(h);g&&(h=g.start.row),d=e.documentToScreenRow(h,0),v=e.getRowLength(h)*m,p=Math.min(e.screenToDocumentRow(p,0),e.getLength()-1),s=this.$size.scrollerHeight+e.getRowLength(p)*m+v,i=this.scrollTop-d*m;var y=0;if(a||l)y=this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this._signal("scrollbarVisibilityChanged"),l&&(o=this.$getLongestLine());return this.layerConfig={width:o,padding:this.$padding,firstRow:h,firstRowScreen:d,lastRow:p,lineHeight:m,characterWidth:this.characterWidth,minHeight:s,maxHeight:r,offset:i,height:this.$size.scrollerHeight},this.$gutterLayer.element.style.marginTop=-i+"px",this.content.style.marginTop=-i+"px",this.content.style.width=o+2*this.$padding+"px",this.content.style.height=s+"px",y},this.$updateLines=function(){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(e>n.lastRow+1)return;if(t<n.firstRow)return;if(t===Infinity){this.$showGutter&&this.$gutterLayer.update(n),this.$textLayer.update(n);return}return this.$textLayer.updateLines(n,e,t),!0},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t){if(this.$size.scrollerHeight===0)return;var n=this.$cursorLayer.getPixelPosition(e),r=n.left,i=n.top,s=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;s>i?(t&&(i-=t*this.$size.scrollerHeight),i==0?i=-this.scrollMargin.top:i==0&&(i=+this.scrollMargin.bottom),this.session.setScrollTop(i)):s+this.$size.scrollerHeight<i+this.lineHeight&&(t&&(i+=t*this.$size.scrollerHeight),this.session.setScrollTop(i+this.lineHeight-this.$size.scrollerHeight));var o=this.scrollLeft;o>r?(r<this.$padding+2*this.layerConfig.characterWidth&&(r=-this.scrollMargin.left),this.session.setScrollLeft(r)):o+this.$size.scrollerWidth<r+this.characterWidth?this.session.setScrollLeft(Math.round(r+this.characterWidth-this.$size.scrollerWidth)):o<=this.$padding&&r-o<this.characterWidth&&this.session.setScrollLeft(0)},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){typeof e=="number"&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,i=n.top-r*(t||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,r=this.STEPS,i=[],s=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;n<r;++n)i.push(s(n/this.STEPS,e,t-e));return i},this.scrollToLine=function(e,t,n,r){var i=this.$cursorLayer.getPixelPosition({row:e,column:0}),s=i.top;t&&(s-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(s),n!==!1&&this.animateScrolling(o,r)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(!this.$animatedScroll)return;var r=this;if(e==n)return;if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length){e=i[0];if(e==n)return}}var s=r.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:s},clearInterval(this.$timer),r.session.setScrollTop(s.shift()),this.$timer=setInterval(function(){s.length?(r.session.setScrollTop(s.shift()),r.session.$scrollTop=n):n!=null?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,t&&t())},10)},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){if(t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top)return!0;if(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight-(this.$size.scrollerHeight-this.lineHeight)*this.$scrollPastEnd<-1+this.scrollMargin.bottom)return!0;if(e)return!0},this.pixelToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=(e+this.scrollLeft-n.left-this.$padding)/this.characterWidth,i=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),s=Math.round(r);return{row:i,column:s,side:r-s>0?1:-1}},this.screenToTextCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=Math.round((e+this.scrollLeft-n.left-this.$padding)/this.characterWidth),i=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(i,Math.max(r,0))},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),i=this.$padding+Math.round(r.column*this.characterWidth),s=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+s-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(e){this.$moveTextAreaToCursor()},this.hideComposition=function(){if(!this.$composition)return;i.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null},this.setTheme=function(e,t){function s(r){if(n.$themeValue!=e)return t&&t();if(!r.cssClass)return;i.importCssString(r.cssText,r.cssClass,n.container.ownerDocument),n.theme&&i.removeCssClass(n.container,n.theme.cssClass),n.$theme=r.cssClass,n.theme=r,i.addCssClass(n.container,r.cssClass),i.setCssClass(n.container,"ace_dark",r.isDark);var s=r.padding||4;n.$padding&&s!=n.$padding&&n.setPadding(s),n.$size&&(n.$size.width=0,n.onResize()),n._dispatchEvent("themeLoaded",{theme:r}),t&&t()}var n=this;this.$themeValue=e,n._dispatchEvent("themeChange",{theme:e});if(!e||typeof e=="string"){var r=e||"ace/theme/textmate";o.loadModule(["theme",r],s)}else s(e)},this.getTheme=function(){return this.$themeValue},this.setStyle=function(t,n){i.setCssClass(this.container,t,n!=0)},this.unsetStyle=function(t){i.removeCssClass(this.container,t)},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(m.prototype),o.defineOptions(m.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){typeof e=="number"&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){i.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){if(!this.$gutterLineHighlight){this.$gutterLineHighlight=i.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",this.$gutter.appendChild(this.$gutterLineHighlight);return}this.$gutterLineHighlight.style.display=e?"":"none",this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight()},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(e){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){typeof e=="number"&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.updateFull()}},scrollPastEnd:{set:function(e){e=+e||0;if(this.$scrollPastEnd==e)return;this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:0,handlesSet:!0}}),t.VirtualRenderer=m}),define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,u=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this)};(function(){i.implement(this,o),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];var t,n;for(var r=0;r<e.length;r++){var i=e[r],n=i.row,t=this.$annotations[n];t||(t=this.$annotations[n]={text:[]});var o=i.text;o=o?s.escapeHTML(o):i.html||"",t.text.indexOf(o)===-1&&t.text.push(o);var u=i.type;u=="error"?t.className=" ace_error":u=="warning"&&t.className!=" ace_error"?t.className=" ace_warning":u=="info"&&!t.className&&(t.className=" ace_info")}},this.$updateAnnotations=function(e){if(!this.$annotations.length)return;var t=e.data,n=t.range,r=n.start.row,i=n.end.row-r;if(i!==0)if(t.action=="removeText"||t.action=="removeLines")this.$annotations.splice(r,i+1,null);else{var s=Array(i+1);s.unshift(r,1),this.$annotations.splice.apply(this.$annotations,s)}},this.update=function(e){var t={className:""},n=[],i=e.firstRow,s=e.lastRow,o=this.session.getNextFoldLine(i),u=o?o.start.row:Infinity,a=this.$showFoldWidgets&&this.session.foldWidgets,f=this.session.$breakpoints,l=this.session.$decorations,c=this.session.$firstLineNumber,h=0;for(;;){i>u&&(i=o.end.row+1,o=this.session.getNextFoldLine(i,o),u=o?o.start.row:Infinity);if(i>s)break;var p=this.$annotations[i]||t;n.push("<div class='ace_gutter-cell ",f[i]||"",l[i]||"",p.className,"' style='height:",this.session.getRowLength(i)*e.lineHeight,"px;'>",h=i+c);if(a){var d=a[i];d==null&&(d=a[i]=this.session.getFoldWidget(i)),d&&n.push("<span class='ace_fold-widget ace_",d,d=="start"&&i==u&&i<o.end.row?" ace_closed":" ace_open","' style='height:",e.lineHeight,"px","'></span>")}n.push("</div>"),i++}this.element=r.setInnerHtml(this.element,n.join("")),this.element.style.height=e.minHeight+"px",this.session.$useWrapMode&&(h=this.session.getLength());var v=(""+h).length*e.characterWidth,m=this.$padding||this.$computePadding();v+=m.left+m.right,v!==this.gutterWidth&&!isNaN(v)&&(this.gutterWidth=v,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",v))},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(e.paddingLeft)+1||0,this.$padding.right=parseInt(e.paddingRight)||0,this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();if(e.x<t.left+n.left)return"markers";if(this.$showFoldWidgets&&e.x>n.right-t.right)return"foldWidgets"}}).call(u.prototype),t.Gutter=u}),define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){var r=e("../range").Range,i=e("../lib/dom"),s=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.update=function(e){var e=e||this.config;if(!e)return;this.config=e;var t=[];for(var n in this.markers){var r=this.markers[n];if(!r.range){r.update(t,this,this.session,e);continue}var s=r.range.clipRows(e.firstRow,e.lastRow);if(s.isEmpty())continue;s=s.toScreenRange(this.session);if(r.renderer){var o=this.$getTop(s.start.row,e),u=this.$padding+s.start.column*e.characterWidth;r.renderer(t,s,u,o,e)}else r.type=="fullLine"?this.drawFullLineMarker(t,s,r.clazz,e):r.type=="screenLine"?this.drawScreenLineMarker(t,s,r.clazz,e):s.isMultiLine()?r.type=="text"?this.drawTextMarker(t,s,r.clazz,e):this.drawMultiLineMarker(t,s,r.clazz,e):this.drawSingleLineMarker(t,s,r.clazz+" ace_start",e)}this.element=i.setInnerHtml(this.element,t.join(""))},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,n,i,s){var o=t.start.row,u=new r(o,t.start.column,o,this.session.getScreenLastRowColumn(o));this.drawSingleLineMarker(e,u,n+" ace_start",i,1,s),o=t.end.row,u=new r(o,0,o,t.end.column),this.drawSingleLineMarker(e,u,n,i,0,s);for(o=t.start.row+1;o<t.end.row;o++)u.start.row=o,u.end.row=o,u.end.column=this.session.getScreenLastRowColumn(o),this.drawSingleLineMarker(e,u,n,i,1,s)},this.drawMultiLineMarker=function(e,t,n,r,i){var s=this.$padding,o=r.lineHeight,u=this.$getTop(t.start.row,r),a=s+t.start.column*r.characterWidth;i=i||"",e.push("<div class='",n," ace_start' style='","height:",o,"px;","right:0;","top:",u,"px;","left:",a,"px;",i,"'></div>"),u=this.$getTop(t.end.row,r);var f=t.end.column*r.characterWidth;e.push("<div class='",n,"' style='","height:",o,"px;","width:",f,"px;","top:",u,"px;","left:",s,"px;",i,"'></div>"),o=(t.end.row-t.start.row-1)*r.lineHeight;if(o<0)return;u=this.$getTop(t.start.row+1,r),e.push("<div class='",n,"' style='","height:",o,"px;","right:0;","top:",u,"px;","left:",s,"px;",i,"'></div>")},this.drawSingleLineMarker=function(e,t,n,r,i,s){var o=r.lineHeight,u=(t.end.column+(i||0)-t.start.column)*r.characterWidth,a=this.$getTop(t.start.row,r),f=this.$padding+t.start.column*r.characterWidth;e.push("<div class='",n,"' style='","height:",o,"px;","width:",u,"px;","top:",a,"px;","left:",f,"px;",s||"","'></div>")},this.drawFullLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;t.start.row!=t.end.row&&(o+=this.$getTop(t.end.row,r)-s),e.push("<div class='",n,"' style='","height:",o,"px;","top:",s,"px;","left:0;right:0;",i||"","'></div>")},this.drawScreenLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;e.push("<div class='",n,"' style='","height:",o,"px;","top:",s,"px;","left:0;right:0;",i||"","'></div>")}}).call(s.prototype),t.Marker=s}),define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("../lib/useragent"),u=e("../lib/event_emitter").EventEmitter,a=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$characterSize={width:0,height:0},this.checkForSizeChanges(),this.$pollSizeChanges()};(function(){r.implement(this,u),this.EOF_CHAR="¶",this.EOL_CHAR="¬",this.TAB_CHAR="→",this.SPACE_CHAR="·",this.$padding=0,this.setPadding=function(e){this.$padding=e,this.element.style.padding="0 "+e+"px"},this.getLineHeight=function(){return this.$characterSize.height||1},this.getCharacterWidth=function(){return this.$characterSize.width||1},this.checkForSizeChanges=function(){var e=this.$measureSizes();if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$pollSizeChanges=function(){var e=this;this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.$fontStyles={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,lineHeight:1},this.$measureSizes=o.isIE||o.isOldGecko?function(){var e=1e3;if(!this.$measureNode){var t=this.$measureNode=i.createElement("div"),n=t.style;n.width=n.height="auto",n.left=n.top=-e*40+"px",n.visibility="hidden",n.position="fixed",n.overflow="visible",n.whiteSpace="nowrap",t.innerHTML=s.stringRepeat("Xy",e);if(this.element.ownerDocument.body)this.element.ownerDocument.body.appendChild(t);else{var r=this.element.parentNode;while(!i.hasCssClass(r,"ace_editor"))r=r.parentNode;r.appendChild(t)}}if(!this.element.offsetWidth)return null;var n=this.$measureNode.style,o=i.computedStyle(this.element);for(var u in this.$fontStyles)n[u]=o[u];var a={height:this.$measureNode.offsetHeight,width:this.$measureNode.offsetWidth/(e*2)};return a.width==0||a.height==0?null:a}:function(){if(!this.$measureNode){var e=this.$measureNode=i.createElement("div"),t=e.style;t.width=t.height="auto",t.left=t.top="-100px",t.visibility="hidden",t.position="fixed",t.overflow="visible",t.whiteSpace="nowrap",e.innerHTML="X";var n=this.element.parentNode;while(n&&!i.hasCssClass(n,"ace_editor"))n=n.parentNode;if(!n)return this.$measureNode=null;n.appendChild(e)}var r=this.$measureNode.getBoundingClientRect(),s={height:r.height,width:r.width};return s.width==0||s.height==0?null:s},this.setSession=function(e){this.session=e,this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;var t=this.$tabStrings=[0];for(var n=1;n<e+1;n++)this.showInvisibles?t.push("<span class='ace_invisible'>"+this.TAB_CHAR+s.stringRepeat(" ",n-1)+"</span>"):t.push(s.stringRepeat(" ",n));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var r="ace_indent-guide";if(this.showInvisibles){r+=" ace_invisible";var i=s.stringRepeat(this.SPACE_CHAR,this.tabSize),o=this.TAB_CHAR+s.stringRepeat(" ",this.tabSize-1)}else var i=s.stringRepeat(" ",this.tabSize),o=i;this.$tabStrings[" "]="<span class='"+r+"'>"+i+"</span>",this.$tabStrings["	"]="<span class='"+r+"'>"+o+"</span>"}},this.updateLines=function(e,t,n){(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)&&this.scrollLines(e),this.config=e;var r=Math.max(t,e.firstRow),s=Math.min(n,e.lastRow),o=this.element.childNodes,u=0;for(var a=e.firstRow;a<r;a++){var f=this.session.getFoldLine(a);if(f){if(f.containsRow(r)){r=f.start.row;break}a=f.end.row}u++}var a=r,f=this.session.getNextFoldLine(a),l=f?f.start.row:Infinity;for(;;){a>l&&(a=f.end.row+1,f=this.session.getNextFoldLine(a,f),l=f?f.start.row:Infinity);if(a>s)break;var c=o[u++];if(c){var h=[];this.$renderLine(h,a,!this.$useLineGroups(),a==l?f:!1),i.setInnerHtml(c,h.join(""))}a++}},this.scrollLines=function(e){var t=this.config;this.config=e;if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);var n=this.element;if(t.firstRow<e.firstRow)for(var r=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);r>0;r--)n.removeChild(n.firstChild);if(t.lastRow>e.lastRow)for(var r=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);r>0;r--)n.removeChild(n.lastChild);if(e.firstRow<t.firstRow){var i=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1);n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)}if(e.lastRow>t.lastRow){var i=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow);n.appendChild(i)}},this.$renderLinesFragment=function(e,t,n){var r=this.element.ownerDocument.createDocumentFragment(),s=t,o=this.session.getNextFoldLine(s),u=o?o.start.row:Infinity;for(;;){s>u&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),u=o?o.start.row:Infinity);if(s>n)break;var a=i.createElement("div"),f=[];this.$renderLine(f,s,!1,s==u?o:!1),a.innerHTML=f.join("");if(this.$useLineGroups())a.className="ace_line_group",r.appendChild(a);else{var l=a.childNodes;while(l.length)r.appendChild(l[0])}s++}return r},this.update=function(e){this.config=e;var t=[],n=e.firstRow,r=e.lastRow,s=n,o=this.session.getNextFoldLine(s),u=o?o.start.row:Infinity;for(;;){s>u&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),u=o?o.start.row:Infinity);if(s>r)break;this.$useLineGroups()&&t.push("<div class='ace_line_group'>"),this.$renderLine(t,s,!1,s==u?o:!1),this.$useLineGroups()&&t.push("</div>"),s++}this.element=i.setInnerHtml(this.element,t.join(""))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,r){var i=this,o=/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,u=function(e,n,r,o,u){if(n)return i.showInvisibles?"<span class='ace_invisible'>"+s.stringRepeat(i.SPACE_CHAR,e.length)+"</span>":s.stringRepeat(" ",e.length);if(e=="&")return"&#38;";if(e=="<")return"&#60;";if(e=="	"){var a=i.session.getScreenTabSize(t+o);return t+=a-1,i.$tabStrings[a]}if(e=="　"){var f=i.showInvisibles?"ace_cjk ace_invisible":"ace_cjk",l=i.showInvisibles?i.SPACE_CHAR:"";return t+=1,"<span class='"+f+"' style='width:"+i.config.characterWidth*2+"px'>"+l+"</span>"}return r?"<span class='ace_invisible ace_invalid'>"+i.SPACE_CHAR+"</span>":(t+=1,"<span class='ace_cjk' style='width:"+i.config.characterWidth*2+"px'>"+e+"</span>")},a=r.replace(o,u);if(!this.$textToken[n.type]){var f="ace_"+n.type.replace(/\./g," ace_"),l="";n.type=="fold"&&(l=" style='width:"+n.value.length*this.config.characterWidth+"px;' "),e.push("<span class='",f,"'",l,">",a,"</span>")}else e.push(a);return t+r.length},this.renderIndentGuide=function(e,t,n){var r=t.search(this.$indentGuideRe);return r<=0||r>=n?t:t[0]==" "?(r-=r%this.tabSize,e.push(s.stringRepeat(this.$tabStrings[" "],r/this.tabSize)),t.substr(r)):t[0]=="	"?(e.push(s.stringRepeat(this.$tabStrings["	"],r)),t.substr(r)):t},this.$renderWrappedLine=function(e,t,n,r){var i=0,s=0,o=n[0],u=0;for(var a=0;a<t.length;a++){var f=t[a],l=f.value;if(a==0&&this.displayIndentGuides){i=l.length,l=this.renderIndentGuide(e,l,o);if(!l)continue;i-=l.length}if(i+l.length<o)u=this.$renderToken(e,u,f,l),i+=l.length;else{while(i+l.length>=o)u=this.$renderToken(e,u,f,l.substring(0,o-i)),l=l.substring(o-i),i=o,r||e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),s++,u=0,o=n[s]||Number.MAX_VALUE;l.length!=0&&(i+=l.length,u=this.$renderToken(e,u,f,l))}}},this.$renderSimpleLine=function(e,t){var n=0,r=t[0],i=r.value;this.displayIndentGuides&&(i=this.renderIndentGuide(e,i)),i&&(n=this.$renderToken(e,n,r,i));for(var s=1;s<t.length;s++)r=t[s],i=r.value,n=this.$renderToken(e,n,r,i)},this.$renderLine=function(e,t,n,r){!r&&r!=0&&(r=this.session.getFoldLine(t));if(r)var i=this.$getFoldLineTokens(t,r);else var i=this.session.getTokens(t);n||e.push("<div class='ace_line' style='height:",this.config.lineHeight,"px'>");if(i.length){var s=this.session.getRowSplitData(t);s&&s.length?this.$renderWrappedLine(e,i,s,n):this.$renderSimpleLine(e,i)}this.showInvisibles&&(r&&(t=r.end.row),e.push("<span class='ace_invisible'>",t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),n||e.push("</div>")},this.$getFoldLineTokens=function(e,t){function i(e,t,n){var i=0,s=0;while(s+e[i].value.length<t){s+=e[i].value.length,i++;if(i==e.length)return}if(s!=t){var o=e[i].value.substring(t-s);o.length>n-t&&(o=o.substring(0,n-t)),r.push({type:e[i].type,value:o}),s=t+o.length,i+=1}while(s<n&&i<e.length){var o=e[i].value;o.length+s>n?r.push({type:e[i].type,value:o.substring(0,n-s)}):r.push(e[i]),s+=o.length,i+=1}}var n=this.session,r=[],s=n.getTokens(e);return t.walk(function(e,t,o,u,a){e!=null?r.push({type:"fold",value:e}):(a&&(s=n.getTokens(t)),s.length&&i(s,u,o))},t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(a.prototype),t.Text=a}),define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){var r=e("../lib/dom"),i=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors")};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,e?r.addCssClass(this.element,"ace_smooth-blinking"):r.removeCssClass(this.element,"ace_smooth-blinking"),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking");for(var e=this.cursors.length;e--;)this.cursors[e].style.opacity="";if(!this.isBlinking||!this.blinkInterval||!this.isVisible)return;this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var t=function(){this.timeoutId=setTimeout(function(){for(var e=this.cursors.length;e--;)this.cursors[e].style.opacity=0}.bind(this),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){for(var e=this.cursors.length;e--;)this.cursors[e].style.opacity="";t()}.bind(this),this.blinkInterval),t()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e),r=this.$padding+n.column*this.config.characterWidth,i=(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:i}},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,r=0;if(t===undefined||t.length===0)t=[{cursor:null}];for(var n=0,i=t.length;n<i;n++){var s=this.getPixelPosition(t[n].cursor,!0);if((s.top>e.height+e.offset||s.top<-e.offset)&&n>1)continue;var o=(this.cursors[r++]||this.addCursor()).style;o.left=s.left+"px",o.top=s.top+"px",o.width=e.characterWidth+"px",o.height=e.lineHeight+"px"}while(this.cursors.length>r)this.removeCursor();var u=this.session.getOverwrite();this.$setOverwrite(u),this.$pixelPos=s,this.restartTimer()},this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(i.prototype),t.Cursor=i}),define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/event"),o=e("./lib/event_emitter").EventEmitter,u=function(e,t){this.element=i.createElement("div"),this.element.className="ace_scrollbar",this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),e.appendChild(this.element),t.$scrollbarWidth=this.width=i.scrollbarWidth(e.ownerDocument),this.fullWidth=this.width,this.element.style.width=(this.width||15)+5+"px",this.setVisible(!1),this.element.style.overflowY="scroll",s.addListener(this.element,"scroll",this.onScrollV.bind(this))},a=function(e,t){this.element=i.createElement("div"),this.element.className="ace_scrollbar-h",this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),e.appendChild(this.element),this.height=t.$scrollbarWidth,this.fullHeight=this.height,this.element.style.height=(this.height||15)+5+"px",this.setVisible(!1),this.element.style.overflowX="scroll",s.addListener(this.element,"scroll",this.onScrollH.bind(this))};(function(){r.implement(this,o),this.setVisible=function(e){e?(this.element.style.display="",this.fullWidth&&(this.width=this.fullWidth),this.fullHeight&&(this.height=this.fullHeight)):(this.element.style.display="none",this.height=this.width=0)},this.onScrollV=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.onScrollH=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getWidth=function(){return this.width},this.getHeight=function(){return this.height},this.setHeight=function(e){this.element.style.height=e+"px"},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerHeight=function(e){this.inner.style.height=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=e)},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}).call(u.prototype),a.prototype=u.prototype,t.ScrollBar=u,t.ScrollBarV=u,t.ScrollBarH=a}),define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){var r=e("./lib/event"),i=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.window=t||window};(function(){this.schedule=function(e){this.changes=this.changes|e;if(!this.pending){this.pending=!0;var t=this;r.nextFrame(function(){t.pending=!1;var e;while(e=t.changes)t.changes=0,t.onRender(e)},this.window)}}}).call(i.prototype),t.RenderLoop=i}),define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){function h(e,t,n){return c.$options.wrap=!0,c.$options.needle=t,c.$options.backwards=n==-1,c.find(e)}function v(e,t){return e.row==t.row&&e.column==t.column}function m(e){if(e.$multiselectOnSessionChange)return;e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",o),e.commands.addCommands(f.defaultCommands),g(e)}function g(e){function i(){n&&(r.style.cursor="",n=!1)}var t=e.textInput.getElement(),n=!1,r=e.renderer.content;u.addListener(t,"keydown",function(e){e.keyCode==18&&!(e.ctrlKey||e.shiftKey||e.metaKey)?n||(r.style.cursor="crosshair",n=!0):n&&(r.style.cursor="")}),u.addListener(t,"keyup",i),u.addListener(t,"blur",i)}var r=e("./range_list").RangeList,i=e("./range").Range,s=e("./selection").Selection,o=e("./mouse/multi_select_handler").onMouseDown,u=e("./lib/event"),a=e("./lib/lang"),f=e("./commands/multi_select_commands");t.commands=f.defaultCommands.concat(f.multiSelectCommands);var l=e("./search").Search,c=new l,p=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(!e)return;if(!this.inMultiSelectMode&&this.rangeCount==0){var n=this.toOrientedRange();this.rangeList.add(n),this.rangeList.add(e);if(this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._emit("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length?this.$onRemoveRange(e):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._emit("addRange",{range:e})},this.$onRemoveRange=function(e){this.rangeCount=this.rangeList.ranges.length;if(this.rangeCount==1&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var r=this.ranges.indexOf(e[n]);this.ranges.splice(r,1)}this._emit("removeRange",{ranges:e}),this.rangeCount==0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._emit("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),t=t||this.ranges[0],t&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){if(this.rangeList)return;this.rangeList=new r,this.ranges=[],this.rangeCount=0},this.getAllRanges=function(){return this.rangeList.ranges.concat()},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var n=this.getRange(),r=this.isBackwards(),s=n.start.row,o=n.end.row;if(s==o){if(r)var u=n.end,a=n.start;else var u=n.start,a=n.end;this.addRange(i.fromPoints(a,a)),this.addRange(i.fromPoints(u,u));return}var f=[],l=this.getLineRange(s,!0);l.start.column=n.start.column,f.push(l);for(var c=s+1;c<o;c++)f.push(this.getLineRange(c,!0));l=this.getLineRange(o,!0),l.end.column=n.end.column,f.push(l),f.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.selectionLead),s=this.session.documentToScreenPosition(this.selectionAnchor),o=this.rectangularRangeBlock(r,s);o.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],s=e.column<t.column;if(s)var o=e.column,u=t.column;else var o=t.column,u=e.column;var a=e.row<t.row;if(a)var f=e.row,l=t.row;else var f=t.row,l=e.row;o<0&&(o=0),f<0&&(f=0),f==l&&(n=!0);for(var c=f;c<=l;c++){var h=i.fromPoints(this.session.screenToDocumentPosition(c,o),this.session.screenToDocumentPosition(c,u));if(h.isEmpty()){if(p&&v(h.end,p))break;var p=h.end}h.cursor=s?h.start:h.end,r.push(h)}a&&r.reverse();if(!n){var d=r.length-1;while(r[d].isEmpty()&&d>0)d--;if(d>0){var m=0;while(r[m].isEmpty())m++}for(var g=d;g>=m;g--)r[g].isEmpty()&&r.splice(g,1)}return r}}.call(s.prototype);var d=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(!e.marker)return;this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);t!=-1&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length},this.removeSelectionMarkers=function(e){var t=this.session.$selectionMarkers;for(var n=e.length;n--;){var r=e[n];if(!r.marker)continue;this.session.removeMarker(r.marker);var i=t.indexOf(r);i!=-1&&t.splice(i,1)}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){if(this.inMultiSelectMode)return;this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onSingleSelect=function(e){if(this.session.multiSelect.inVirtualMode)return;this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(!n.multiSelect)return;if(!t.multiSelectAction){var r=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}else t.multiSelectAction=="forEach"?r=n.forEachSelection(t,e.args):t.multiSelectAction=="forEachLine"?r=n.forEachSelection(t,e.args,!0):t.multiSelectAction=="single"?(n.exitMultiSelectMode(),r=t.exec(n,e.args||{})):r=t.multiSelectAction(n,e.args||{});return r},this.forEachSelection=function(e,t,n){if(this.inVirtualSelectionMode)return;var r=this.session,i=this.selection,o=i.rangeList,u,a=i._eventRegistry;i._eventRegistry={};var f=new s(r);this.inVirtualSelectionMode=!0;for(var l=o.ranges.length;l--;){if(n)while(l>0&&o.ranges[l].start.row==o.ranges[l-1].end.row)l--;f.fromOrientedRange(o.ranges[l]),this.selection=r.selection=f;var c=e.exec(this,t||{});!u==undefined&&(u=c),f.toOrientedRange(o.ranges[l])}f.detach(),this.selection=r.selection=i,this.inVirtualSelectionMode=!1,i._eventRegistry=a,i.mergeOverlappingRanges();var h=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),h&&h.from==h.to&&this.renderer.animateScrolling(h.from),u},this.exitMultiSelectMode=function(){if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return;this.multiSelect.toSingleRange()},this.getCopyText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var t=this.multiSelect.rangeList.ranges,n=[];for(var r=0;r<t.length;r++)n.push(this.session.getTextRange(t[r]));var i=this.session.getDocument().getNewLineCharacter();e=n.join(i),e.length==(n.length-1)*i.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return this._signal("copy",e),e},this.onPaste=function(e){if(this.$readOnly)return;this._signal("paste",e);if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return this.insert(e);var t=e.split(/\r\n|\r|\n/),n=this.selection.rangeList.ranges;if(t.length>n.length||t.length<2||!t[1])return this.commands.exec("insertstring",this,e);for(var r=n.length;r--;){var i=n[r];i.isEmpty()||this.session.remove(i),this.session.insert(i.start,t[r])}},this.findAll=function(e,t,n){t=t||{},t.needle=e||t.needle,this.$search.set(t);var r=this.$search.findAll(this.session);if(!r.length)return 0;this.$blockScrolling+=1;var i=this.multiSelect;n||i.toSingleRange(r[0]);for(var s=r.length;s--;)i.addRange(r[s],!0);return this.$blockScrolling-=1,r.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,s=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(s.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(s.row+e,s.column);if(!n.isEmpty())var u=this.session.documentToScreenPosition(r?n.end:n.start),a=this.session.screenToDocumentPosition(u.row+e,u.column);else var a=o;if(r){var f=i.fromPoints(o,a);f.cursor=f.start}else{var f=i.fromPoints(a,o);f.cursor=f.end}f.desiredColumn=s.column;if(!this.selection.inMultiSelectMode)this.selection.addRange(n);else if(t)var l=n.cursor;this.selection.addRange(f),l&&this.selection.substractPoint(l)},this.transposeSelections=function(e){var t=this.session,n=t.multiSelect,r=n.ranges;for(var i=r.length;i--;){var s=r[i];if(s.isEmpty()){var o=t.getWordRange(s.start.row,s.start.column);s.start.row=o.start.row,s.start.column=o.start.column,s.end.row=o.end.row,s.end.column=o.end.column}}n.mergeOverlappingRanges();var u=[];for(var i=r.length;i--;){var s=r[i];u.unshift(t.getTextRange(s))}e<0?u.unshift(u.pop()):u.push(u.shift());for(var i=r.length;i--;){var s=r[i],o=s.clone();t.replace(s,u[i]),s.start.row=o.start.row,s.start.column=o.start.column}},this.selectMore=function(e,t){var n=this.session,r=n.multiSelect,i=r.toOrientedRange();if(i.isEmpty()){var i=n.getWordRange(i.start.row,i.start.column);i.cursor=i.end,this.multiSelect.addRange(i)}var s=n.getTextRange(i),o=h(n,s,e);o&&(o.cursor=e==-1?o.start:o.end,this.multiSelect.addRange(o)),t&&this.multiSelect.substractPoint(i.cursor)},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges;if(!n.length){var r=this.selection.getRange(),s=r.start.row,o=r.end.row,u=this.session.doc.removeLines(s,o);u=this.$reAlignText(u),this.session.doc.insertLines(s,u),r.start.column=0,r.end.column=u[u.length-1].length,this.selection.setRange(r)}else{var f=-1,l=n.filter(function(e){if(e.cursor.row==f)return!0;f=e.cursor.row});t.$onRemoveRange(l);var c=0,h=Infinity,p=n.map(function(t){var n=t.cursor,r=e.getLine(n.row),i=r.substr(n.column).search(/\S/g);return i==-1&&(i=0),n.column>c&&(c=n.column),i<h&&(h=i),i});n.forEach(function(t,n){var r=t.cursor,s=c-r.column,o=p[n]-h;s>o?e.insert(r,a.stringRepeat(" ",s-o)):e.remove(new i(r.row,r.column,r.row,r.column-s+o)),t.start.column=t.end.column=c,t.start.row=t.end.row=r.row,t.cursor=t.end}),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(e){function o(e){return a.stringRepeat(" ",e)}function u(e){return e[2]?o(r)+e[2]+o(i-e[2].length+s)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function f(e){return e[2]?o(r+i-e[2].length)+e[2]+o(s," ")+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function l(e){return e[2]?o(r)+e[2]+o(s)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var t=!0,n=!0,r,i,s;return e.map(function(e){var o=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return o?r==null?(r=o[1].length,i=o[2].length,s=o[3].length,o):(r+i+s!=o[1].length+o[2].length+o[3].length&&(n=!1),r!=o[1].length&&(t=!1),r>o[1].length&&(r=o[1].length),i<o[2].length&&(i=o[2].length),s>o[3].length&&(s=o[3].length),o):[e]}).map(t?n?f:u:l)}}).call(d.prototype),t.onSessionChange=function(e){var t=e.session;t.multiSelect||(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.removeEventListener("addRange",this.$onAddRange),n.multiSelect.removeEventListener("removeRange",this.$onRemoveRange),n.multiSelect.removeEventListener("multiSelect",this.$onMultiSelect),n.multiSelect.removeEventListener("singleSelect",this.$onSingleSelect)),t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=m,e("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function(e){m(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",o)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",o))},value:!0}})}),define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event"],function(e,t,n){function i(e,t){return e.row==t.row&&e.column==t.column}function s(e){var t=e.domEvent,n=t.altKey,s=t.shiftKey,o=e.getAccelKey(),u=e.getButton();if(e.editor.inMultiSelectMode&&u==2){e.editor.textInput.onContextMenu(e.domEvent);return}if(!o&&!n){u==0&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode();return}var a=e.editor,f=a.selection,l=a.inMultiSelectMode,c=e.getDocumentPosition(),h=f.getCursor(),p=e.inSelection()||f.isEmpty()&&i(c,h),d=e.x,v=e.y,m=function(e){d=e.clientX,v=e.clientY},g=function(){var e=a.renderer.pixelToScreenCoordinates(d,v),t=y.screenToDocumentPosition(e.row,e.column);if(i(w,e)&&i(t,f.selectionLead))return;w=e,a.selection.moveCursorToPosition(t),a.selection.clearSelection(),a.renderer.scrollCursorIntoView(),a.removeSelectionMarkers(x),x=f.rectangularRangeBlock(w,b),x.forEach(a.addSelectionMarker,a),a.updateSelectionMarkers()},y=a.session,b=a.renderer.pixelToScreenCoordinates(d,v),w=b;if(o&&!s&&!n&&u==0){if(!l&&p)return;if(!l){var E=f.toOrientedRange();a.addSelectionMarker(E)}var S=f.rangeList.rangeAtPoint(c);a.once("mouseup",function(){var e=f.toOrientedRange();S&&e.isEmpty()&&i(S.cursor,e.cursor)?f.substractPoint(e.cursor):(E&&(a.removeSelectionMarker(E),f.addRange(E)),f.addRange(e))})}else if(n&&u==0){e.stop(),l&&!o?f.toSingleRange():!l&&o&&f.addRange();var x=[];s?(b=y.documentToScreenPosition(f.lead),g()):(f.moveCursorToPosition(c),f.clearSelection());var T=function(e){clearInterval(C),a.removeSelectionMarkers(x);for(var t=0;t<x.length;t++)f.addRange(x[t])},N=g;r.capture(a.container,m,T);var C=setInterval(function(){N()},20);return e.preventDefault()}}var r=e("../lib/event");t.onMouseDown=s}),define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},readonly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},readonly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:!0},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"}}],t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},readonly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var r=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)}),define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/config"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/event_emitter").EventEmitter,s=e("../config"),o=function(t,n,r){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.onError=this.onError.bind(this),e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl);var i;if(s.get("packaged")||!e.toUrl)i=s.moduleUrl(n,"worker");else{var o=this.$normalizePath;i=o(e.toUrl("ace/worker/worker.js",null,"_"));var u={};t.forEach(function(t){u[t]=o(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}this.$worker=new Worker(i),this.$worker.postMessage({init:!0,tlns:u,module:n,classname:r}),this.callbackId=1,this.callbacks={},this.$worker.onerror=this.onError,this.$worker.onmessage=this.onMessage};(function(){r.implement(this,i),this.onError=function(e){throw window.console&&console.log&&console.log(e),e},this.onMessage=function(e){var t=e.data;switch(t.type){case"log":window.console&&console.log&&console.log.apply(console,t.data);break;case"event":this._emit(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id])}},this.$normalizePath=function(e){return location.host?(e=e.replace(/^[a-z]+:\/\/[^\/]+/,""),e=location.protocol+"//"+location.host+(e.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+e.replace(/^[\/]+/,""),e):e},this.terminate=function(){this._emit("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue?this.deltaQueue.push(e.data):(this.deltaQueue=[e.data],setTimeout(this.$sendDeltaQueue,1))},this.$sendDeltaQueue=function(){var e=this.deltaQueue;if(!e)return;this.deltaQueue=null,e.length>20&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e})}}).call(o.prototype);var u=function(e,t,n){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var r=null,o=Object.create(i),u=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(e){u.messageBuffer.push(e),r&&setTimeout(a)};var a=function(){var e=u.messageBuffer.shift();e.command?r[e.command].apply(r,e.args):e.event&&o._emit(e.event,e.data)};o.postMessage=function(e){u.onMessage({data:e})},o.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},o.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},s.loadModule(["worker",t],function(e){r=new e[n](o);while(u.messageBuffer.length)a()})};u.prototype=o.prototype,t.UIWorkerClient=u,t.WorkerClient=o}),define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){var r=e("./range").Range,i=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),o=function(e,t,n,r,i,s){var o=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=i,this.othersClass=s,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=n;var u=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=u.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){s.implement(this,i),this.setup=function(){var e=this,t=this.doc,n=this.session,i=this.$pos;this.pos=t.createAnchor(i.row,i.column),this.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(t){n.removeMarker(e.markerId),e.markerId=n.addMarker(new r(t.value.row,t.value.column,t.value.row,t.value.column+e.length),e.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(n){var r=t.createAnchor(n.row,n.column);e.others.push(r)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(this.othersActive)return;var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1),n.on("change",function(i){e.removeMarker(n.markerId),n.markerId=e.addMarker(new r(i.value.row,i.value.column,i.value.row,i.value.column+t.length),t.othersClass,null,!1)})})},this.hideOtherMarkers=function(){if(!this.othersActive)return;this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)},this.onUpdate=function(e){var t=e.data,n=t.range;if(n.start.row!==n.end.row)return;if(n.start.row!==this.pos.row)return;if(this.$updating)return;this.$updating=!0;var i=t.action==="insertText"?n.end.column-n.start.column:n.start.column-n.end.column;if(n.start.column>=this.pos.column&&n.start.column<=this.pos.column+this.length+1){var s=n.start.column-this.pos.column;this.length+=i;if(!this.session.$fromUndo){if(t.action==="insertText")for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};u.row===n.start.row&&n.start.column<u.column&&(a.column+=i),this.doc.insert(a,t.text)}else if(t.action==="removeText")for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};u.row===n.start.row&&n.start.column<u.column&&(a.column+=i),this.doc.remove(new r(a.row,a.column,a.row,a.column-i))}n.start.column===this.pos.column&&t.action==="insertText"?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-i);for(var e=0;e<this.others.length;e++){var t=this.others[e],r={row:t.row,column:t.column-i};t.row===n.start.row&&n.start.column<t.column&&(r.column+=i),t.setPosition(r.row,r.column)}}.bind(this),0):n.start.column===this.pos.column&&t.action==="removeText"&&setTimeout(function(){for(var e=0;e<this.others.length;e++){var t=this.others[e];t.row===n.start.row&&n.start.column<t.column&&t.setPosition(t.row,t.column-i)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(var o=0;o<this.others.length;o++)this.others[o]._emit("change",{value:this.others[o]})}this.$updating=!1},this.onCursorChange=function(e){if(this.$updating)return;var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();for(var e=0;e<this.others.length;e++)this.others[e].detach();this.session.setUndoSelect(!0)},this.cancel=function(){if(this.$undoStackDepth===-1)throw Error("Canceling placeholders only supported with undo manager attached to session.");var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth;for(var n=0;n<t;n++)e.undo(!0)}}).call(o.prototype),t.PlaceHolder=o}),define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){var r=e("../../range").Range,i=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);return this.foldingStartMarker.test(r)?"start":t=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var i=/\S/,s=e.getLine(t),o=s.search(i);if(o==-1)return;var u=n||s.length,a=e.getLength(),f=t,l=t;while(++t<a){var c=e.getLine(t).search(i);if(c==-1)continue;if(c<=o)break;l=t}if(l>f){var h=e.getLine(l).length;return new r(f,u,l,h)}},this.openingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i+1},u=e.$findClosingBracket(t,o,s);if(!u)return;var a=e.foldWidgets[u.row];return a==null&&(a=this.getFoldWidget(e,u.row)),a=="start"&&u.row>o.row&&(u.row--,u.column=e.getLine(u.row).length),r.fromPoints(o,u)},this.closingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i},u=e.$findOpeningBracket(t,o);if(!u)return;return u.column++,o.column--,r.fromPoints(u,o)}}).call(i.prototype)}),define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;}.ace-tm .ace_cursor {border-left: 2px solid black;}.ace-tm .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),function(){window.require(["ace/ace"],function(e){e&&e.config.init(),window.ace||(window.ace={});for(var t in e)e.hasOwnProperty(t)&&(ace[t]=e[t])})}(),define("node_modules/cloud9/node_modules/ace/build/src/ace",function(){}),define("ace/theme/chrome",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssClass="ace-chrome",t.cssText='.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;}.ace-chrome .ace_cursor {border-left: 2px solid black;}.ace-chrome .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-chrome",function(){}),define("ace/theme/clouds",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssClass="ace-clouds",t.cssText='.ace-clouds .ace_gutter {background: #ebebeb;color: #333}.ace-clouds .ace_print-margin {width: 1px;background: #e8e8e8}.ace-clouds {background-color: #FFFFFF;color: #000000}.ace-clouds .ace_cursor {border-left: 2px solid #000000}.ace-clouds .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #000000}.ace-clouds .ace_marker-layer .ace_selection {background: #BDD5FC}.ace-clouds.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #FFFFFF;border-radius: 2px}.ace-clouds .ace_marker-layer .ace_step {background: rgb(255, 255, 0)}.ace-clouds .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #BFBFBF}.ace-clouds .ace_marker-layer .ace_active-line {background: #FFFBD1}.ace-clouds .ace_gutter-active-line {background-color : #dcdcdc}.ace-clouds .ace_marker-layer .ace_selected-word {border: 1px solid #BDD5FC}.ace-clouds .ace_invisible {color: #BFBFBF}.ace-clouds .ace_keyword,.ace-clouds .ace_meta,.ace-clouds .ace_support.ace_constant.ace_property-value {color: #AF956F}.ace-clouds .ace_keyword.ace_operator {color: #484848}.ace-clouds .ace_keyword.ace_other.ace_unit {color: #96DC5F}.ace-clouds .ace_constant.ace_language {color: #39946A}.ace-clouds .ace_constant.ace_numeric {color: #46A609}.ace-clouds .ace_constant.ace_character.ace_entity {color: #BF78CC}.ace-clouds .ace_invalid {background-color: #FF002A}.ace-clouds .ace_fold {background-color: #AF956F;border-color: #000000}.ace-clouds .ace_storage,.ace-clouds .ace_support.ace_class,.ace-clouds .ace_support.ace_function,.ace-clouds .ace_support.ace_other,.ace-clouds .ace_support.ace_type {color: #C52727}.ace-clouds .ace_string {color: #5D90CD}.ace-clouds .ace_comment {color: #BCC8BA}.ace-clouds .ace_entity.ace_name.ace_tag,.ace-clouds .ace_entity.ace_other.ace_attribute-name {color: #606060}.ace-clouds .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y}';var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-clouds",function(){}),define("ace/theme/clouds_midnight",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-clouds-midnight",t.cssText=".ace-clouds-midnight .ace_gutter {background: #232323;color: #929292}.ace-clouds-midnight .ace_print-margin {width: 1px;background: #232323}.ace-clouds-midnight{background-color: #191919;color: #929292}.ace-clouds-midnight .ace_cursor {border-left: 2px solid #7DA5DC}.ace-clouds-midnight .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #7DA5DC}.ace-clouds-midnight .ace_marker-layer .ace_selection {background: #000000}.ace-clouds-midnight.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #191919;border-radius: 2px}.ace-clouds-midnight .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-clouds-midnight .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #BFBFBF}.ace-clouds-midnight .ace_marker-layer .ace_active-line {background: rgba(215, 215, 215, 0.031)}.ace-clouds-midnight .ace_gutter-active-line {background-color: rgba(215, 215, 215, 0.031)}.ace-clouds-midnight .ace_marker-layer .ace_selected-word {border: 1px solid #000000}.ace-clouds-midnight .ace_invisible {color: #BFBFBF}.ace-clouds-midnight .ace_keyword,.ace-clouds-midnight .ace_meta,.ace-clouds-midnight .ace_support.ace_constant.ace_property-value {color: #927C5D}.ace-clouds-midnight .ace_keyword.ace_operator {color: #4B4B4B}.ace-clouds-midnight .ace_keyword.ace_other.ace_unit {color: #366F1A}.ace-clouds-midnight .ace_constant.ace_language {color: #39946A}.ace-clouds-midnight .ace_constant.ace_numeric {color: #46A609}.ace-clouds-midnight .ace_constant.ace_character.ace_entity {color: #A165AC}.ace-clouds-midnight .ace_invalid {color: #FFFFFF;background-color: #E92E2E}.ace-clouds-midnight .ace_fold {background-color: #927C5D;border-color: #929292}.ace-clouds-midnight .ace_storage,.ace-clouds-midnight .ace_support.ace_class,.ace-clouds-midnight .ace_support.ace_function,.ace-clouds-midnight .ace_support.ace_other,.ace-clouds-midnight .ace_support.ace_type {color: #E92E2E}.ace-clouds-midnight .ace_string {color: #5D90CD}.ace-clouds-midnight .ace_comment {color: #3C403B}.ace-clouds-midnight .ace_entity.ace_name.ace_tag,.ace-clouds-midnight .ace_entity.ace_other.ace_attribute-name {color: #606060}.ace-clouds-midnight .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHB3d/8PAAOIAdULw8qMAAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-clouds_midnight",function(){}),define("ace/theme/cobalt",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-cobalt",t.cssText=".ace-cobalt .ace_gutter {background: #011e3a;color: #fff}.ace-cobalt .ace_print-margin {width: 1px;background: #011e3a}.ace-cobalt {background-color: #002240;color: #FFFFFF}.ace-cobalt .ace_cursor {border-left: 2px solid #FFFFFF}.ace-cobalt .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #FFFFFF}.ace-cobalt .ace_marker-layer .ace_selection {background: rgba(179, 101, 57, 0.75)}.ace-cobalt.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #002240;border-radius: 2px}.ace-cobalt .ace_marker-layer .ace_step {background: rgb(127, 111, 19)}.ace-cobalt .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(255, 255, 255, 0.15)}.ace-cobalt .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.35)}.ace-cobalt .ace_gutter-active-line {background-color: rgba(0, 0, 0, 0.35)}.ace-cobalt .ace_marker-layer .ace_selected-word {border: 1px solid rgba(179, 101, 57, 0.75)}.ace-cobalt .ace_invisible {color: rgba(255, 255, 255, 0.15)}.ace-cobalt .ace_keyword,.ace-cobalt .ace_meta {color: #FF9D00}.ace-cobalt .ace_constant,.ace-cobalt .ace_constant.ace_character,.ace-cobalt .ace_constant.ace_character.ace_escape,.ace-cobalt .ace_constant.ace_other {color: #FF628C}.ace-cobalt .ace_invalid {color: #F8F8F8;background-color: #800F00}.ace-cobalt .ace_support {color: #80FFBB}.ace-cobalt .ace_support.ace_constant {color: #EB939A}.ace-cobalt .ace_fold {background-color: #FF9D00;border-color: #FFFFFF}.ace-cobalt .ace_support.ace_function {color: #FFB054}.ace-cobalt .ace_storage {color: #FFEE80}.ace-cobalt .ace_entity {color: #FFDD00}.ace-cobalt .ace_string {color: #3AD900}.ace-cobalt .ace_string.ace_regexp {color: #80FFC2}.ace-cobalt .ace_comment {font-style: italic;color: #0088FF}.ace-cobalt .ace_variable {color: #CCCCCC}.ace-cobalt .ace_variable.ace_language {color: #FF80E1}.ace-cobalt .ace_meta.ace_tag {color: #9EFFFF}.ace-cobalt .ace_heading {color: #C8E4FD;background-color: #001221}.ace-cobalt .ace_list {background-color: #130D26}.ace-cobalt .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHCLSvkPAAP3AgSDTRd4AAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-cobalt",function(){}),define("ace/theme/crimson_editor",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssText='.ace-crimson-editor .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-crimson-editor .ace_gutter-layer {width: 100%;text-align: right;}.ace-crimson-editor .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-crimson-editor {background-color: #FFFFFF;color: rgb(64, 64, 64);}.ace-crimson-editor .ace_cursor {border-left: 2px solid black;}.ace-crimson-editor .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid black;}.ace-crimson-editor .ace_invisible {color: rgb(191, 191, 191);}.ace-crimson-editor .ace_identifier {color: black;}.ace-crimson-editor .ace_keyword {color: blue;}.ace-crimson-editor .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-crimson-editor .ace_constant.ace_language {color: rgb(255, 156, 0);}.ace-crimson-editor .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-crimson-editor .ace_invalid {text-decoration: line-through;color: rgb(224, 0, 0);}.ace-crimson-editor .ace_fold {}.ace-crimson-editor .ace_support.ace_function {color: rgb(192, 0, 0);}.ace-crimson-editor .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-crimson-editor .ace_support.ace_type,.ace-crimson-editor .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-crimson-editor .ace_keyword.ace_operator {color: rgb(49, 132, 149);}.ace-crimson-editor .ace_string {color: rgb(128, 0, 128);}.ace-crimson-editor .ace_comment {color: rgb(76, 136, 107);}.ace-crimson-editor .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-crimson-editor .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-crimson-editor .ace_constant.ace_numeric {color: rgb(0, 0, 64);}.ace-crimson-editor .ace_variable {color: rgb(0, 64, 128);}.ace-crimson-editor .ace_xml-pe {color: rgb(104, 104, 91);}.ace-crimson-editor .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-crimson-editor .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-crimson-editor .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-crimson-editor .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-crimson-editor .ace_marker-layer .ace_active-line {background: rgb(232, 242, 254);}.ace-crimson-editor .ace_gutter-active-line {background-color : #dcdcdc;}.ace-crimson-editor .ace_meta.ace_tag {color:rgb(28, 2, 255);}.ace-crimson-editor .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-crimson-editor .ace_string.ace_regex {color: rgb(192, 0, 192);}.ace-crimson-editor .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.cssClass="ace-crimson-editor";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-crimson_editor",function(){}),define("ace/theme/dawn",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssClass="ace-dawn",t.cssText=".ace-dawn .ace_gutter {background: #ebebeb;color: #333}.ace-dawn .ace_print-margin {width: 1px;background: #e8e8e8}.ace-dawn {background-color: #F9F9F9;color: #080808}.ace-dawn .ace_cursor {border-left: 2px solid #000000}.ace-dawn .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #000000}.ace-dawn .ace_marker-layer .ace_selection {background: rgba(39, 95, 255, 0.30)}.ace-dawn.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #F9F9F9;border-radius: 2px}.ace-dawn .ace_marker-layer .ace_step {background: rgb(255, 255, 0)}.ace-dawn .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(75, 75, 126, 0.50)}.ace-dawn .ace_marker-layer .ace_active-line {background: rgba(36, 99, 180, 0.12)}.ace-dawn .ace_gutter-active-line {background-color : #dcdcdc}.ace-dawn .ace_marker-layer .ace_selected-word {border: 1px solid rgba(39, 95, 255, 0.30)}.ace-dawn .ace_invisible {color: rgba(75, 75, 126, 0.50)}.ace-dawn .ace_keyword,.ace-dawn .ace_meta {color: #794938}.ace-dawn .ace_constant,.ace-dawn .ace_constant.ace_character,.ace-dawn .ace_constant.ace_character.ace_escape,.ace-dawn .ace_constant.ace_other {color: #811F24}.ace-dawn .ace_invalid.ace_illegal {text-decoration: underline;font-style: italic;color: #F8F8F8;background-color: #B52A1D}.ace-dawn .ace_invalid.ace_deprecated {text-decoration: underline;font-style: italic;color: #B52A1D}.ace-dawn .ace_support {color: #691C97}.ace-dawn .ace_support.ace_constant {color: #B4371F}.ace-dawn .ace_fold {background-color: #794938;border-color: #080808}.ace-dawn .ace_list,.ace-dawn .ace_support.ace_function {color: #693A17}.ace-dawn .ace_storage {font-style: italic;color: #A71D5D}.ace-dawn .ace_string {color: #0B6125}.ace-dawn .ace_string.ace_regexp {color: #CF5628}.ace-dawn .ace_comment {font-style: italic;color: #5A525F}.ace-dawn .ace_variable {color: #234A97}.ace-dawn .ace_heading {color: #19356D}.ace-dawn .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYLh/5+x/AAizA4hxNNsZAAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-dawn",function(){}),define("ace/theme/eclipse",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssText='.ace-eclipse .ace_gutter {background: #ebebeb;border-right: 1px solid rgb(159, 159, 159);color: rgb(136, 136, 136);}.ace-eclipse .ace_print-margin {width: 1px;background: #ebebeb;}.ace-eclipse {background-color: #FFFFFF;}.ace-eclipse .ace_fold {background-color: rgb(60, 76, 114);}.ace-eclipse .ace_cursor {border-left: 2px solid black;}.ace-eclipse .ace_storage,.ace-eclipse .ace_keyword,.ace-eclipse .ace_variable {color: rgb(127, 0, 85);}.ace-eclipse .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-eclipse .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-eclipse .ace_function {color: rgb(60, 76, 114);}.ace-eclipse .ace_string {color: rgb(42, 0, 255);}.ace-eclipse .ace_comment {color: rgb(113, 150, 130);}.ace-eclipse .ace_comment.ace_doc {color: rgb(63, 95, 191);}.ace-eclipse .ace_comment.ace_doc.ace_tag {color: rgb(127, 159, 191);}.ace-eclipse .ace_constant.ace_numeric {color: darkblue;}.ace-eclipse .ace_tag {color: rgb(25, 118, 116);}.ace-eclipse .ace_type {color: rgb(127, 0, 127);}.ace-eclipse .ace_xml-pe {color: rgb(104, 104, 91);}.ace-eclipse .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-eclipse .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-eclipse .ace_meta.ace_tag {color:rgb(25, 118, 116);}.ace-eclipse .ace_invisible {color: #ddd;}.ace-eclipse .ace_entity.ace_other.ace_attribute-name {color:rgb(127, 0, 127);}.ace-eclipse .ace_marker-layer .ace_step {background: rgb(255, 255, 0);}.ace-eclipse .ace_marker-layer .ace_active-line {background: rgb(232, 242, 254);}.ace-eclipse .ace_marker-layer .ace_selected-word {border: 1px solid rgb(181, 213, 255);}.ace-eclipse .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.cssClass="ace-eclipse";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-eclipse",function(){}),define("ace/theme/idle_fingers",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-idle-fingers",t.cssText=".ace-idle-fingers .ace_gutter {background: #3b3b3b;color: #fff}.ace-idle-fingers .ace_print-margin {width: 1px;background: #3b3b3b}.ace-idle-fingers {background-color: #323232;color: #FFFFFF}.ace-idle-fingers .ace_cursor {border-left: 2px solid #91FF00}.ace-idle-fingers .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #91FF00}.ace-idle-fingers .ace_marker-layer .ace_selection {background: rgba(90, 100, 126, 0.88)}.ace-idle-fingers.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #323232;border-radius: 2px}.ace-idle-fingers .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-idle-fingers .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #404040}.ace-idle-fingers .ace_marker-layer .ace_active-line {background: #353637}.ace-idle-fingers .ace_gutter-active-line {background-color: #353637}.ace-idle-fingers .ace_marker-layer .ace_selected-word {border: 1px solid rgba(90, 100, 126, 0.88)}.ace-idle-fingers .ace_invisible {color: #404040}.ace-idle-fingers .ace_keyword,.ace-idle-fingers .ace_meta {color: #CC7833}.ace-idle-fingers .ace_constant,.ace-idle-fingers .ace_constant.ace_character,.ace-idle-fingers .ace_constant.ace_character.ace_escape,.ace-idle-fingers .ace_constant.ace_other,.ace-idle-fingers .ace_support.ace_constant {color: #6C99BB}.ace-idle-fingers .ace_invalid {color: #FFFFFF;background-color: #FF0000}.ace-idle-fingers .ace_fold {background-color: #CC7833;border-color: #FFFFFF}.ace-idle-fingers .ace_support.ace_function {color: #B83426}.ace-idle-fingers .ace_variable.ace_parameter {font-style: italic}.ace-idle-fingers .ace_string {color: #A5C261}.ace-idle-fingers .ace_string.ace_regexp {color: #CCCC33}.ace-idle-fingers .ace_comment {font-style: italic;color: #BC9458}.ace-idle-fingers .ace_meta.ace_tag {color: #FFE5BB}.ace-idle-fingers .ace_entity.ace_name {color: #FFC66D}.ace-idle-fingers .ace_collab.ace_user1 {color: #323232;background-color: #FFF980}.ace-idle-fingers .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWMwMjLyZYiPj/8PAAreAwAI1+g0AAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-idle_fingers",function(){}),define("ace/theme/kr_theme",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-kr-theme",t.cssText=".ace-kr-theme .ace_gutter {background: #1c1917;color: #FCFFE0}.ace-kr-theme .ace_print-margin {width: 1px;background: #1c1917}.ace-kr-theme {background-color: #0B0A09;color: #FCFFE0}.ace-kr-theme .ace_cursor {border-left: 2px solid #FF9900}.ace-kr-theme .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #FF9900}.ace-kr-theme .ace_marker-layer .ace_selection {background: rgba(170, 0, 255, 0.45)}.ace-kr-theme.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #0B0A09;border-radius: 2px}.ace-kr-theme .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-kr-theme .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(255, 177, 111, 0.32)}.ace-kr-theme .ace_marker-layer .ace_active-line {background: #38403D}.ace-kr-theme .ace_gutter-active-line {background-color : #38403D}.ace-kr-theme .ace_marker-layer .ace_selected-word {border: 1px solid rgba(170, 0, 255, 0.45)}.ace-kr-theme .ace_invisible {color: rgba(255, 177, 111, 0.32)}.ace-kr-theme .ace_keyword,.ace-kr-theme .ace_meta {color: #949C8B}.ace-kr-theme .ace_constant,.ace-kr-theme .ace_constant.ace_character,.ace-kr-theme .ace_constant.ace_character.ace_escape,.ace-kr-theme .ace_constant.ace_other {color: rgba(210, 117, 24, 0.76)}.ace-kr-theme .ace_invalid {color: #F8F8F8;background-color: #A41300}.ace-kr-theme .ace_support {color: #9FC28A}.ace-kr-theme .ace_support.ace_constant {color: #C27E66}.ace-kr-theme .ace_fold {background-color: #949C8B;border-color: #FCFFE0}.ace-kr-theme .ace_support.ace_function {color: #85873A}.ace-kr-theme .ace_storage {color: #FFEE80}.ace-kr-theme .ace_string {color: rgba(164, 161, 181, 0.8)}.ace-kr-theme .ace_string.ace_regexp {color: rgba(125, 255, 192, 0.65)}.ace-kr-theme .ace_comment {font-style: italic;color: #706D5B}.ace-kr-theme .ace_variable {color: #D1A796}.ace-kr-theme .ace_variable.ace_language {color: #FF80E1}.ace-kr-theme .ace_meta.ace_tag {color: #BABD9C}.ace-kr-theme .ace_list {background-color: #0F0040}.ace-kr-theme .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYFBXV/8PAAJoAXX4kT2EAAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-kr",function(){}),define("ace/theme/merbivore",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-merbivore",t.cssText=".ace-merbivore .ace_gutter {background: #202020;color: #E6E1DC}.ace-merbivore .ace_print-margin {width: 1px;background: #555651}.ace-merbivore {background-color: #161616;color: #E6E1DC}.ace-merbivore .ace_cursor {border-left: 2px solid #FFFFFF}.ace-merbivore .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #FFFFFF}.ace-merbivore .ace_marker-layer .ace_selection {background: #454545}.ace-merbivore.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #161616;border-radius: 2px}.ace-merbivore .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-merbivore .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #404040}.ace-merbivore .ace_marker-layer .ace_active-line {background: #333435}.ace-merbivore .ace_gutter-active-line {background-color: #333435}.ace-merbivore .ace_marker-layer .ace_selected-word {border: 1px solid #454545}.ace-merbivore .ace_invisible {color: #404040}.ace-merbivore .ace_entity.ace_name.ace_tag,.ace-merbivore .ace_keyword,.ace-merbivore .ace_meta,.ace-merbivore .ace_meta.ace_tag,.ace-merbivore .ace_storage,.ace-merbivore .ace_support.ace_function {color: #FC6F09}.ace-merbivore .ace_constant,.ace-merbivore .ace_constant.ace_character,.ace-merbivore .ace_constant.ace_character.ace_escape,.ace-merbivore .ace_constant.ace_other,.ace-merbivore .ace_support.ace_type {color: #1EDAFB}.ace-merbivore .ace_constant.ace_character.ace_escape {color: #519F50}.ace-merbivore .ace_constant.ace_language {color: #FDC251}.ace-merbivore .ace_constant.ace_library,.ace-merbivore .ace_string,.ace-merbivore .ace_support.ace_constant {color: #8DFF0A}.ace-merbivore .ace_constant.ace_numeric {color: #58C554}.ace-merbivore .ace_invalid {color: #FFFFFF;background-color: #990000}.ace-merbivore .ace_fold {background-color: #FC6F09;border-color: #E6E1DC}.ace-merbivore .ace_comment {font-style: italic;color: #AD2EA4}.ace-merbivore .ace_entity.ace_other.ace_attribute-name {color: #FFFF89}.ace-merbivore .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWMQFxf3ZXB1df0PAAdsAmERTkEHAAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-merbivore",function(){}),define("ace/theme/merbivore_soft",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-merbivore-soft",t.cssText=".ace-merbivore-soft .ace_gutter {background: #262424;color: #E6E1DC}.ace-merbivore-soft .ace_print-margin {width: 1px;background: #262424}.ace-merbivore-soft {background-color: #1C1C1C;color: #E6E1DC}.ace-merbivore-soft .ace_cursor {border-left: 2px solid #FFFFFF}.ace-merbivore-soft .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #FFFFFF}.ace-merbivore-soft .ace_marker-layer .ace_selection {background: #494949}.ace-merbivore-soft.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #1C1C1C;border-radius: 2px}.ace-merbivore-soft .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-merbivore-soft .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #404040}.ace-merbivore-soft .ace_marker-layer .ace_active-line {background: #333435}.ace-merbivore-soft .ace_gutter-active-line {background-color: #333435}.ace-merbivore-soft .ace_marker-layer .ace_selected-word {border: 1px solid #494949}.ace-merbivore-soft .ace_invisible {color: #404040}.ace-merbivore-soft .ace_entity.ace_name.ace_tag,.ace-merbivore-soft .ace_keyword,.ace-merbivore-soft .ace_meta,.ace-merbivore-soft .ace_meta.ace_tag,.ace-merbivore-soft .ace_storage {color: #FC803A}.ace-merbivore-soft .ace_constant,.ace-merbivore-soft .ace_constant.ace_character,.ace-merbivore-soft .ace_constant.ace_character.ace_escape,.ace-merbivore-soft .ace_constant.ace_other,.ace-merbivore-soft .ace_support.ace_type {color: #68C1D8}.ace-merbivore-soft .ace_constant.ace_character.ace_escape {color: #B3E5B4}.ace-merbivore-soft .ace_constant.ace_language {color: #E1C582}.ace-merbivore-soft .ace_constant.ace_library,.ace-merbivore-soft .ace_string,.ace-merbivore-soft .ace_support.ace_constant {color: #8EC65F}.ace-merbivore-soft .ace_constant.ace_numeric {color: #7FC578}.ace-merbivore-soft .ace_invalid,.ace-merbivore-soft .ace_invalid.ace_deprecated {color: #FFFFFF;background-color: #FE3838}.ace-merbivore-soft .ace_fold {background-color: #FC803A;border-color: #E6E1DC}.ace-merbivore-soft .ace_comment,.ace-merbivore-soft .ace_meta {font-style: italic;color: #AC4BB8}.ace-merbivore-soft .ace_entity.ace_other.ace_attribute-name {color: #EAF1A3}.ace-merbivore-soft .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWOQkpLyZfD09PwPAAfYAnaStpHRAAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-merbivore_soft",function(){}),define("ace/theme/mono_industrial",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-mono-industrial",t.cssText=".ace-mono-industrial .ace_gutter {background: #1d2521;color: #C5C9C9}.ace-mono-industrial .ace_print-margin {width: 1px;background: #555651}.ace-mono-industrial {background-color: #222C28;color: #FFFFFF}.ace-mono-industrial .ace_cursor {border-left: 2px solid #FFFFFF}.ace-mono-industrial .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #FFFFFF}.ace-mono-industrial .ace_marker-layer .ace_selection {background: rgba(145, 153, 148, 0.40)}.ace-mono-industrial.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #222C28;border-radius: 2px}.ace-mono-industrial .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-mono-industrial .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(102, 108, 104, 0.50)}.ace-mono-industrial .ace_marker-layer .ace_active-line {background: rgba(12, 13, 12, 0.25)}.ace-mono-industrial .ace_gutter-active-line {background-color: rgba(12, 13, 12, 0.25)}.ace-mono-industrial .ace_marker-layer .ace_selected-word {border: 1px solid rgba(145, 153, 148, 0.40)}.ace-mono-industrial .ace_invisible {color: rgba(102, 108, 104, 0.50)}.ace-mono-industrial .ace_string {background-color: #151C19;color: #FFFFFF}.ace-mono-industrial .ace_keyword,.ace-mono-industrial .ace_meta {color: #A39E64}.ace-mono-industrial .ace_constant,.ace-mono-industrial .ace_constant.ace_character,.ace-mono-industrial .ace_constant.ace_character.ace_escape,.ace-mono-industrial .ace_constant.ace_numeric,.ace-mono-industrial .ace_constant.ace_other {color: #E98800}.ace-mono-industrial .ace_entity.ace_name.ace_function,.ace-mono-industrial .ace_keyword.ace_operator,.ace-mono-industrial .ace_variable {color: #A8B3AB}.ace-mono-industrial .ace_invalid {color: #FFFFFF;background-color: rgba(153, 0, 0, 0.68)}.ace-mono-industrial .ace_support.ace_constant {color: #C87500}.ace-mono-industrial .ace_fold {background-color: #A8B3AB;border-color: #FFFFFF}.ace-mono-industrial .ace_support.ace_function {color: #588E60}.ace-mono-industrial .ace_entity.ace_name,.ace-mono-industrial .ace_support.ace_class,.ace-mono-industrial .ace_support.ace_type {color: #5778B6}.ace-mono-industrial .ace_storage {color: #C23B00}.ace-mono-industrial .ace_variable.ace_language,.ace-mono-industrial .ace_variable.ace_parameter {color: #648BD2}.ace-mono-industrial .ace_comment {color: #666C68;background-color: #151C19}.ace-mono-industrial .ace_entity.ace_other.ace_attribute-name {color: #909993}.ace-mono-industrial .ace_entity.ace_name.ace_tag {color: #A65EFF}.ace-mono-industrial .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNQ1NbwZfALD/4PAAlTArlEC4r/AAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-mono_industrial",function(){}),define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {border-left: 2px solid #F8F8F0}.ace-monokai .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;border-radius: 2px}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-monokai",function(){}),define("ace/theme/pastel_on_dark",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-pastel-on-dark",t.cssText=".ace-pastel-on-dark .ace_gutter {background: #353030;color: #8F938F}.ace-pastel-on-dark .ace_print-margin {width: 1px;background: #353030}.ace-pastel-on-dark {background-color: #2C2828;color: #8F938F}.ace-pastel-on-dark .ace_cursor {border-left: 2px solid #A7A7A7}.ace-pastel-on-dark .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #A7A7A7}.ace-pastel-on-dark .ace_marker-layer .ace_selection {background: rgba(221, 240, 255, 0.20)}.ace-pastel-on-dark.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #2C2828;border-radius: 2px}.ace-pastel-on-dark .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-pastel-on-dark .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(255, 255, 255, 0.25)}.ace-pastel-on-dark .ace_marker-layer .ace_active-line {background: rgba(255, 255, 255, 0.031)}.ace-pastel-on-dark .ace_gutter-active-line {background-color: rgba(255, 255, 255, 0.031)}.ace-pastel-on-dark .ace_marker-layer .ace_selected-word {border: 1px solid rgba(221, 240, 255, 0.20)}.ace-pastel-on-dark .ace_invisible {color: rgba(255, 255, 255, 0.25)}.ace-pastel-on-dark .ace_keyword,.ace-pastel-on-dark .ace_meta {color: #757aD8}.ace-pastel-on-dark .ace_constant,.ace-pastel-on-dark .ace_constant.ace_character,.ace-pastel-on-dark .ace_constant.ace_character.ace_escape,.ace-pastel-on-dark .ace_constant.ace_other {color: #4FB7C5}.ace-pastel-on-dark .ace_keyword.ace_operator {color: #797878}.ace-pastel-on-dark .ace_constant.ace_character {color: #AFA472}.ace-pastel-on-dark .ace_constant.ace_language {color: #DE8E30}.ace-pastel-on-dark .ace_constant.ace_numeric {color: #CCCCCC}.ace-pastel-on-dark .ace_invalid,.ace-pastel-on-dark .ace_invalid.ace_illegal {color: #F8F8F8;background-color: rgba(86, 45, 86, 0.75)}.ace-pastel-on-dark .ace_invalid.ace_deprecated {text-decoration: underline;font-style: italic;color: #D2A8A1}.ace-pastel-on-dark .ace_fold {background-color: #757aD8;border-color: #8F938F}.ace-pastel-on-dark .ace_support.ace_function {color: #AEB2F8}.ace-pastel-on-dark .ace_string {color: #66A968}.ace-pastel-on-dark .ace_string.ace_regexp {color: #E9C062}.ace-pastel-on-dark .ace_comment {color: #A6C6FF}.ace-pastel-on-dark .ace_variable {color: #BEBF55}.ace-pastel-on-dark .ace_variable.ace_language {color: #C1C144}.ace-pastel-on-dark .ace_xml-pe {color: #494949}.ace-pastel-on-dark .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYIiPj/8PAARgAh2NTMh8AAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-pastel_on_dark",function(){}),define("ace/theme/solarized_dark",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-solarized-dark",t.cssText=".ace-solarized-dark .ace_gutter {background: #01313f;color: #d0edf7}.ace-solarized-dark .ace_print-margin {width: 1px;background: #33555E}.ace-solarized-dark {background-color: #002B36;color: #93A1A1}.ace-solarized-dark .ace_entity.ace_other.ace_attribute-name,.ace-solarized-dark .ace_storage {color: #93A1A1}.ace-solarized-dark .ace_cursor {border-left: 2px solid #D30102}.ace-solarized-dark .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #D30102}.ace-solarized-dark .ace_marker-layer .ace_active-line,.ace-solarized-dark .ace_marker-layer .ace_selection {background: rgba(255, 255, 255, 0.1)}.ace-solarized-dark.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #002B36;border-radius: 2px}.ace-solarized-dark .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-solarized-dark .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(147, 161, 161, 0.50)}.ace-solarized-dark .ace_gutter-active-line {background-color: #0d3440}.ace-solarized-dark .ace_marker-layer .ace_selected-word {border: 1px solid #073642}.ace-solarized-dark .ace_invisible {color: rgba(147, 161, 161, 0.50)}.ace-solarized-dark .ace_keyword,.ace-solarized-dark .ace_meta,.ace-solarized-dark .ace_support.ace_class,.ace-solarized-dark .ace_support.ace_type {color: #859900}.ace-solarized-dark .ace_constant.ace_character,.ace-solarized-dark .ace_constant.ace_other {color: #CB4B16}.ace-solarized-dark .ace_constant.ace_language {color: #B58900}.ace-solarized-dark .ace_constant.ace_numeric {color: #D33682}.ace-solarized-dark .ace_fold {background-color: #268BD2;border-color: #93A1A1}.ace-solarized-dark .ace_entity.ace_name.ace_function,.ace-solarized-dark .ace_entity.ace_name.ace_tag,.ace-solarized-dark .ace_support.ace_function,.ace-solarized-dark .ace_variable,.ace-solarized-dark .ace_variable.ace_language {color: #268BD2}.ace-solarized-dark .ace_string {color: #2AA198}.ace-solarized-dark .ace_string.ace_regexp {color: #D30102}.ace-solarized-dark .ace_comment {font-style: italic;color: #657B83}.ace-solarized-dark .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNg0Db1ZVCxc/sPAAd4AlUHlLenAAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-solarized_dark",function(){}),define("ace/theme/solarized_light",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssClass="ace-solarized-light",t.cssText=".ace-solarized-light .ace_gutter {background: #fbf1d3;color: #333}.ace-solarized-light .ace_print-margin {width: 1px;background: #e8e8e8}.ace-solarized-light {background-color: #FDF6E3;color: #586E75}.ace-solarized-light .ace_cursor {border-left: 2px solid #000000}.ace-solarized-light .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #000000}.ace-solarized-light .ace_marker-layer .ace_selection {background:  rgba(7, 54, 67, 0.09)}.ace-solarized-light.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #FDF6E3;border-radius: 2px}.ace-solarized-light .ace_marker-layer .ace_step {background: rgb(255, 255, 0)}.ace-solarized-light .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(147, 161, 161, 0.50)}.ace-solarized-light .ace_marker-layer .ace_active-line {background: #EEE8D5}.ace-solarized-light .ace_gutter-active-line {background-color : #EDE5C1}.ace-solarized-light .ace_marker-layer .ace_selected-word {border: 1px solid #073642}.ace-solarized-light .ace_invisible {color: rgba(147, 161, 161, 0.50)}.ace-solarized-light .ace_keyword,.ace-solarized-light .ace_meta,.ace-solarized-light .ace_support.ace_class,.ace-solarized-light .ace_support.ace_type {color: #859900}.ace-solarized-light .ace_constant.ace_character,.ace-solarized-light .ace_constant.ace_other {color: #CB4B16}.ace-solarized-light .ace_constant.ace_language {color: #B58900}.ace-solarized-light .ace_constant.ace_numeric {color: #D33682}.ace-solarized-light .ace_fold {background-color: #268BD2;border-color: #586E75}.ace-solarized-light .ace_entity.ace_name.ace_function,.ace-solarized-light .ace_entity.ace_name.ace_tag,.ace-solarized-light .ace_support.ace_function,.ace-solarized-light .ace_variable,.ace-solarized-light .ace_variable.ace_language {color: #268BD2}.ace-solarized-light .ace_storage {color: #073642}.ace-solarized-light .ace_string {color: #2AA198}.ace-solarized-light .ace_string.ace_regexp {color: #D30102}.ace-solarized-light .ace_comment,.ace-solarized-light .ace_entity.ace_other.ace_attribute-name {color: #93A1A1}.ace-solarized-light .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHjy8NJ/AAjgA5fzQUmBAAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-solarized_light",function(){}),define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;}.ace-tm .ace_cursor {border-left: 2px solid black;}.ace-tm .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-textmate",function(){}),define("ace/theme/tomorrow",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssClass="ace-tomorrow",t.cssText=".ace-tomorrow .ace_gutter {background: #f6f6f6;color: #4D4D4C}.ace-tomorrow .ace_print-margin {width: 1px;background: #f6f6f6}.ace-tomorrow {background-color: #FFFFFF;color: #4D4D4C}.ace-tomorrow .ace_cursor {border-left: 2px solid #AEAFAD}.ace-tomorrow .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #AEAFAD}.ace-tomorrow .ace_marker-layer .ace_selection {background: #D6D6D6}.ace-tomorrow.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #FFFFFF;border-radius: 2px}.ace-tomorrow .ace_marker-layer .ace_step {background: rgb(255, 255, 0)}.ace-tomorrow .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #D1D1D1}.ace-tomorrow .ace_marker-layer .ace_active-line {background: #EFEFEF}.ace-tomorrow .ace_gutter-active-line {background-color : #dcdcdc}.ace-tomorrow .ace_marker-layer .ace_selected-word {border: 1px solid #D6D6D6}.ace-tomorrow .ace_invisible {color: #D1D1D1}.ace-tomorrow .ace_keyword,.ace-tomorrow .ace_meta,.ace-tomorrow .ace_storage,.ace-tomorrow .ace_storage.ace_type,.ace-tomorrow .ace_support.ace_type {color: #8959A8}.ace-tomorrow .ace_keyword.ace_operator {color: #3E999F}.ace-tomorrow .ace_constant.ace_character,.ace-tomorrow .ace_constant.ace_language,.ace-tomorrow .ace_constant.ace_numeric,.ace-tomorrow .ace_keyword.ace_other.ace_unit,.ace-tomorrow .ace_support.ace_constant,.ace-tomorrow .ace_variable.ace_parameter {color: #F5871F}.ace-tomorrow .ace_constant.ace_other {color: #666969}.ace-tomorrow .ace_invalid {color: #FFFFFF;background-color: #C82829}.ace-tomorrow .ace_invalid.ace_deprecated {color: #FFFFFF;background-color: #8959A8}.ace-tomorrow .ace_fold {background-color: #4271AE;border-color: #4D4D4C}.ace-tomorrow .ace_entity.ace_name.ace_function,.ace-tomorrow .ace_support.ace_function,.ace-tomorrow .ace_variable {color: #4271AE}.ace-tomorrow .ace_support.ace_class,.ace-tomorrow .ace_support.ace_type {color: #C99E00}.ace-tomorrow .ace_heading,.ace-tomorrow .ace_string {color: #718C00}.ace-tomorrow .ace_entity.ace_name.ace_tag,.ace-tomorrow .ace_entity.ace_other.ace_attribute-name,.ace-tomorrow .ace_meta.ace_tag,.ace-tomorrow .ace_string.ace_regexp,.ace-tomorrow .ace_variable {color: #C82829}.ace-tomorrow .ace_comment {color: #8E908C}.ace-tomorrow .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bdu3f/BwAlfgctduB85QAAAABJRU5ErkJggg==) right repeat-y}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-tomorrow",function(){}),define("ace/theme/tomorrow_night",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-tomorrow-night",t.cssText=".ace-tomorrow-night .ace_gutter {background: #25282c;color: #C5C8C6}.ace-tomorrow-night .ace_print-margin {width: 1px;background: #25282c}.ace-tomorrow-night  {background-color: #1D1F21;color: #C5C8C6}.ace-tomorrow-night .ace_cursor {border-left: 2px solid #AEAFAD}.ace-tomorrow-night .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #AEAFAD}.ace-tomorrow-night .ace_marker-layer .ace_selection {background: #373B41}.ace-tomorrow-night.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #1D1F21;border-radius: 2px}.ace-tomorrow-night .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-tomorrow-night .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #4B4E55}.ace-tomorrow-night .ace_marker-layer .ace_active-line {background: #282A2E}.ace-tomorrow-night .ace_gutter-active-line {background-color: #282A2E}.ace-tomorrow-night .ace_marker-layer .ace_selected-word {border: 1px solid #373B41}.ace-tomorrow-night .ace_invisible {color: #4B4E55}.ace-tomorrow-night .ace_keyword,.ace-tomorrow-night .ace_meta,.ace-tomorrow-night .ace_storage,.ace-tomorrow-night .ace_storage.ace_type,.ace-tomorrow-night .ace_support.ace_type {color: #B294BB}.ace-tomorrow-night .ace_keyword.ace_operator {color: #8ABEB7}.ace-tomorrow-night .ace_constant.ace_character,.ace-tomorrow-night .ace_constant.ace_language,.ace-tomorrow-night .ace_constant.ace_numeric,.ace-tomorrow-night .ace_keyword.ace_other.ace_unit,.ace-tomorrow-night .ace_support.ace_constant,.ace-tomorrow-night .ace_variable.ace_parameter {color: #DE935F}.ace-tomorrow-night .ace_constant.ace_other {color: #CED1CF}.ace-tomorrow-night .ace_invalid {color: #CED2CF;background-color: #DF5F5F}.ace-tomorrow-night .ace_invalid.ace_deprecated {color: #CED2CF;background-color: #B798BF}.ace-tomorrow-night .ace_fold {background-color: #81A2BE;border-color: #C5C8C6}.ace-tomorrow-night .ace_entity.ace_name.ace_function,.ace-tomorrow-night .ace_support.ace_function,.ace-tomorrow-night .ace_variable {color: #81A2BE}.ace-tomorrow-night .ace_support.ace_class,.ace-tomorrow-night .ace_support.ace_type {color: #F0C674}.ace-tomorrow-night .ace_heading,.ace-tomorrow-night .ace_string {color: #B5BD68}.ace-tomorrow-night .ace_entity.ace_name.ace_tag,.ace-tomorrow-night .ace_entity.ace_other.ace_attribute-name,.ace-tomorrow-night .ace_meta.ace_tag,.ace-tomorrow-night .ace_string.ace_regexp,.ace-tomorrow-night .ace_variable {color: #CC6666}.ace-tomorrow-night .ace_comment {color: #969896}.ace-tomorrow-night .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHB3d/8PAAOIAdULw8qMAAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-tomorrow_night",function(){}),define("ace/theme/tomorrow_night_blue",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-tomorrow-night-blue",t.cssText=".ace-tomorrow-night-blue .ace_gutter {background: #00204b;color: #7388b5}.ace-tomorrow-night-blue .ace_print-margin {width: 1px;background: #00204b}.ace-tomorrow-night-blue {background-color: #002451;color: #FFFFFF}.ace-tomorrow-night-blue .ace_constant.ace_other {color: #FFFFFF}.ace-tomorrow-night-blue .ace_cursor {border-left: 2px solid #FFFFFF}.ace-tomorrow-night-blue .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #FFFFFF}.ace-tomorrow-night-blue .ace_marker-layer .ace_selection {background: #003F8E}.ace-tomorrow-night-blue.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #002451;border-radius: 2px}.ace-tomorrow-night-blue .ace_marker-layer .ace_step {background: rgb(127, 111, 19)}.ace-tomorrow-night-blue .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #404F7D}.ace-tomorrow-night-blue .ace_marker-layer .ace_active-line {background: #00346E}.ace-tomorrow-night-blue .ace_gutter-active-line {background-color: #022040}.ace-tomorrow-night-blue .ace_marker-layer .ace_selected-word {border: 1px solid #003F8E}.ace-tomorrow-night-blue .ace_invisible {color: #404F7D}.ace-tomorrow-night-blue .ace_keyword,.ace-tomorrow-night-blue .ace_meta,.ace-tomorrow-night-blue .ace_storage,.ace-tomorrow-night-blue .ace_storage.ace_type,.ace-tomorrow-night-blue .ace_support.ace_type {color: #EBBBFF}.ace-tomorrow-night-blue .ace_keyword.ace_operator {color: #99FFFF}.ace-tomorrow-night-blue .ace_constant.ace_character,.ace-tomorrow-night-blue .ace_constant.ace_language,.ace-tomorrow-night-blue .ace_constant.ace_numeric,.ace-tomorrow-night-blue .ace_keyword.ace_other.ace_unit,.ace-tomorrow-night-blue .ace_support.ace_constant,.ace-tomorrow-night-blue .ace_variable.ace_parameter {color: #FFC58F}.ace-tomorrow-night-blue .ace_invalid {color: #FFFFFF;background-color: #F99DA5}.ace-tomorrow-night-blue .ace_invalid.ace_deprecated {color: #FFFFFF;background-color: #EBBBFF}.ace-tomorrow-night-blue .ace_fold {background-color: #BBDAFF;border-color: #FFFFFF}.ace-tomorrow-night-blue .ace_entity.ace_name.ace_function,.ace-tomorrow-night-blue .ace_support.ace_function,.ace-tomorrow-night-blue .ace_variable {color: #BBDAFF}.ace-tomorrow-night-blue .ace_support.ace_class,.ace-tomorrow-night-blue .ace_support.ace_type {color: #FFEEAD}.ace-tomorrow-night-blue .ace_heading,.ace-tomorrow-night-blue .ace_string {color: #D1F1A9}.ace-tomorrow-night-blue .ace_entity.ace_name.ace_tag,.ace-tomorrow-night-blue .ace_entity.ace_other.ace_attribute-name,.ace-tomorrow-night-blue .ace_meta.ace_tag,.ace-tomorrow-night-blue .ace_string.ace_regexp,.ace-tomorrow-night-blue .ace_variable {color: #FF9DA4}.ace-tomorrow-night-blue .ace_comment {color: #7285B7}.ace-tomorrow-night-blue .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYJDzqfwPAANXAeNsiA+ZAAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-tomorrow_night_blue",function(){}),define("ace/theme/tomorrow_night_bright",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-tomorrow-night-bright",t.cssText=".ace-tomorrow-night-bright .ace_gutter {background: #1a1a1a;color: #DEDEDE}.ace-tomorrow-night-bright .ace_print-margin {width: 1px;background: #1a1a1a}.ace-tomorrow-night-bright {background-color: #000000;color: #DEDEDE}.ace-tomorrow-night-bright .ace_cursor {border-left: 2px solid #9F9F9F}.ace-tomorrow-night-bright .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #9F9F9F}.ace-tomorrow-night-bright .ace_marker-layer .ace_selection {background: #424242}.ace-tomorrow-night-bright.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #000000;border-radius: 2px}.ace-tomorrow-night-bright .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-tomorrow-night-bright .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #343434}.ace-tomorrow-night-bright .ace_marker-layer .ace_active-line {background: #2A2A2A}.ace-tomorrow-night-bright .ace_gutter-active-line {background-color: #2A2A2A}.ace-tomorrow-night-bright .ace_marker-layer .ace_selected-word {border: 1px solid #424242}.ace-tomorrow-night-bright .ace_invisible {color: #343434}.ace-tomorrow-night-bright .ace_keyword,.ace-tomorrow-night-bright .ace_meta,.ace-tomorrow-night-bright .ace_storage,.ace-tomorrow-night-bright .ace_storage.ace_type,.ace-tomorrow-night-bright .ace_support.ace_type {color: #C397D8}.ace-tomorrow-night-bright .ace_keyword.ace_operator {color: #70C0B1}.ace-tomorrow-night-bright .ace_constant.ace_character,.ace-tomorrow-night-bright .ace_constant.ace_language,.ace-tomorrow-night-bright .ace_constant.ace_numeric,.ace-tomorrow-night-bright .ace_keyword.ace_other.ace_unit,.ace-tomorrow-night-bright .ace_support.ace_constant,.ace-tomorrow-night-bright .ace_variable.ace_parameter {color: #E78C45}.ace-tomorrow-night-bright .ace_constant.ace_other {color: #EEEEEE}.ace-tomorrow-night-bright .ace_invalid {color: #CED2CF;background-color: #DF5F5F}.ace-tomorrow-night-bright .ace_invalid.ace_deprecated {color: #CED2CF;background-color: #B798BF}.ace-tomorrow-night-bright .ace_fold {background-color: #7AA6DA;border-color: #DEDEDE}.ace-tomorrow-night-bright .ace_entity.ace_name.ace_function,.ace-tomorrow-night-bright .ace_support.ace_function,.ace-tomorrow-night-bright .ace_variable {color: #7AA6DA}.ace-tomorrow-night-bright .ace_support.ace_class,.ace-tomorrow-night-bright .ace_support.ace_type {color: #E7C547}.ace-tomorrow-night-bright .ace_heading,.ace-tomorrow-night-bright .ace_string {color: #B9CA4A}.ace-tomorrow-night-bright .ace_entity.ace_name.ace_tag,.ace-tomorrow-night-bright .ace_entity.ace_other.ace_attribute-name,.ace-tomorrow-night-bright .ace_meta.ace_tag,.ace-tomorrow-night-bright .ace_string.ace_regexp,.ace-tomorrow-night-bright .ace_variable {color: #D54E53}.ace-tomorrow-night-bright .ace_comment {color: #969896}.ace-tomorrow-night-bright .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYFBXV/8PAAJoAXX4kT2EAAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-tomorrow_night_bright",function(){}),define("ace/theme/tomorrow_night_eighties",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-tomorrow-night-eighties",t.cssText=".ace-tomorrow-night-eighties .ace_gutter {background: #272727;color: #CCC}.ace-tomorrow-night-eighties .ace_print-margin {width: 1px;background: #272727}.ace-tomorrow-night-eighties {background-color: #2D2D2D;color: #CCCCCC}.ace-tomorrow-night-eighties .ace_constant.ace_other {color: #CCCCCC}.ace-tomorrow-night-eighties .ace_cursor {border-left: 2px solid #CCCCCC}.ace-tomorrow-night-eighties .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #CCCCCC}.ace-tomorrow-night-eighties .ace_marker-layer .ace_selection {background: #515151}.ace-tomorrow-night-eighties.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #2D2D2D;border-radius: 2px}.ace-tomorrow-night-eighties .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-tomorrow-night-eighties .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #6A6A6A}.ace-tomorrow-night-eighties .ace_marker-layer .ace_active-line {background: #393939}.ace-tomorrow-night-eighties .ace_gutter-active-line {background-color: #393939}.ace-tomorrow-night-eighties .ace_marker-layer .ace_selected-word {border: 1px solid #515151}.ace-tomorrow-night-eighties .ace_invisible {color: #6A6A6A}.ace-tomorrow-night-eighties .ace_keyword,.ace-tomorrow-night-eighties .ace_meta,.ace-tomorrow-night-eighties .ace_storage,.ace-tomorrow-night-eighties .ace_storage.ace_type,.ace-tomorrow-night-eighties .ace_support.ace_type {color: #CC99CC}.ace-tomorrow-night-eighties .ace_keyword.ace_operator {color: #66CCCC}.ace-tomorrow-night-eighties .ace_constant.ace_character,.ace-tomorrow-night-eighties .ace_constant.ace_language,.ace-tomorrow-night-eighties .ace_constant.ace_numeric,.ace-tomorrow-night-eighties .ace_keyword.ace_other.ace_unit,.ace-tomorrow-night-eighties .ace_support.ace_constant,.ace-tomorrow-night-eighties .ace_variable.ace_parameter {color: #F99157}.ace-tomorrow-night-eighties .ace_invalid {color: #CDCDCD;background-color: #F2777A}.ace-tomorrow-night-eighties .ace_invalid.ace_deprecated {color: #CDCDCD;background-color: #CC99CC}.ace-tomorrow-night-eighties .ace_fold {background-color: #6699CC;border-color: #CCCCCC}.ace-tomorrow-night-eighties .ace_entity.ace_name.ace_function,.ace-tomorrow-night-eighties .ace_support.ace_function,.ace-tomorrow-night-eighties .ace_variable {color: #6699CC}.ace-tomorrow-night-eighties .ace_support.ace_class,.ace-tomorrow-night-eighties .ace_support.ace_type {color: #FFCC66}.ace-tomorrow-night-eighties .ace_heading,.ace-tomorrow-night-eighties .ace_string {color: #99CC99}.ace-tomorrow-night-eighties .ace_comment {color: #999999}.ace-tomorrow-night-eighties .ace_entity.ace_name.ace_tag,.ace-tomorrow-night-eighties .ace_entity.ace_other.ace_attribute-name,.ace-tomorrow-night-eighties .ace_meta.ace_tag,.ace-tomorrow-night-eighties .ace_variable {color: #F2777A}.ace-tomorrow-night-eighties .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ09NrYAgMjP4PAAtGAwchHMyAAAAAAElFTkSuQmCC) right repeat-y}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-tomorrow_night_eighties",function(){}),define("ace/theme/twilight",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-twilight",t.cssText=".ace-twilight .ace_gutter {background: #232323;color: #E2E2E2}.ace-twilight .ace_print-margin {width: 1px;background: #232323}.ace-twilight {background-color: #141414;color: #F8F8F8}.ace-twilight .ace_cursor {border-left: 2px solid #A7A7A7}.ace-twilight .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #A7A7A7}.ace-twilight .ace_marker-layer .ace_selection {background: rgba(221, 240, 255, 0.20)}.ace-twilight.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #141414;border-radius: 2px}.ace-twilight .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-twilight .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(255, 255, 255, 0.25)}.ace-twilight .ace_marker-layer .ace_active-line {background: rgba(255, 255, 255, 0.031)}.ace-twilight .ace_gutter-active-line {background-color: rgba(255, 255, 255, 0.031)}.ace-twilight .ace_marker-layer .ace_selected-word {border: 1px solid rgba(221, 240, 255, 0.20)}.ace-twilight .ace_invisible {color: rgba(255, 255, 255, 0.25)}.ace-twilight .ace_keyword,.ace-twilight .ace_meta {color: #CDA869}.ace-twilight .ace_constant,.ace-twilight .ace_constant.ace_character,.ace-twilight .ace_constant.ace_character.ace_escape,.ace-twilight .ace_constant.ace_other,.ace-twilight .ace_heading,.ace-twilight .ace_support.ace_constant {color: #CF6A4C}.ace-twilight .ace_invalid.ace_illegal {color: #F8F8F8;background-color: rgba(86, 45, 86, 0.75)}.ace-twilight .ace_invalid.ace_deprecated {text-decoration: underline;font-style: italic;color: #D2A8A1}.ace-twilight .ace_support {color: #9B859D}.ace-twilight .ace_fold {background-color: #AC885B;border-color: #F8F8F8}.ace-twilight .ace_support.ace_function {color: #DAD085}.ace-twilight .ace_list,.ace-twilight .ace_storage {color: #F9EE98}.ace-twilight .ace_entity.ace_name.ace_function,.ace-twilight .ace_meta.ace_tag,.ace-twilight .ace_variable {color: #AC885B}.ace-twilight .ace_string {color: #8F9D6A}.ace-twilight .ace_string.ace_regexp {color: #E9C062}.ace-twilight .ace_comment {font-style: italic;color: #5F5A60}.ace-twilight .ace_variable {color: #7587A6}.ace-twilight .ace_xml-pe {color: #494949}.ace-twilight .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWMQERFpYLC1tf0PAAgOAnPnhxyiAAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-twilight",function(){}),define("ace/theme/vibrant_ink",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-vibrant-ink",t.cssText=".ace-vibrant-ink .ace_gutter {background: #1a1a1a;color: #BEBEBE}.ace-vibrant-ink .ace_print-margin {width: 1px;background: #1a1a1a}.ace-vibrant-ink {background-color: #0F0F0F;color: #FFFFFF}.ace-vibrant-ink .ace_cursor {border-left: 2px solid #FFFFFF}.ace-vibrant-ink .ace_overwrite-cursors .ace_cursor {border-left: 0px;border-bottom: 1px solid #FFFFFF}.ace-vibrant-ink .ace_marker-layer .ace_selection {background: #6699CC}.ace-vibrant-ink.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #0F0F0F;border-radius: 2px}.ace-vibrant-ink .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-vibrant-ink .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #404040}.ace-vibrant-ink .ace_marker-layer .ace_active-line {background: #333333}.ace-vibrant-ink .ace_gutter-active-line {background-color: #333333}.ace-vibrant-ink .ace_marker-layer .ace_selected-word {border: 1px solid #6699CC}.ace-vibrant-ink .ace_invisible {color: #404040}.ace-vibrant-ink .ace_keyword,.ace-vibrant-ink .ace_meta {color: #FF6600}.ace-vibrant-ink .ace_constant,.ace-vibrant-ink .ace_constant.ace_character,.ace-vibrant-ink .ace_constant.ace_character.ace_escape,.ace-vibrant-ink .ace_constant.ace_other {color: #339999}.ace-vibrant-ink .ace_constant.ace_numeric {color: #99CC99}.ace-vibrant-ink .ace_invalid,.ace-vibrant-ink .ace_invalid.ace_deprecated {color: #CCFF33;background-color: #000000}.ace-vibrant-ink .ace_fold {background-color: #FFCC00;border-color: #FFFFFF}.ace-vibrant-ink .ace_entity.ace_name.ace_function,.ace-vibrant-ink .ace_support.ace_function,.ace-vibrant-ink .ace_variable {color: #FFCC00}.ace-vibrant-ink .ace_variable.ace_parameter {font-style: italic}.ace-vibrant-ink .ace_string {color: #66FF00}.ace-vibrant-ink .ace_string.ace_regexp {color: #44B4CC}.ace-vibrant-ink .ace_comment {color: #9933CC}.ace-vibrant-ink .ace_entity.ace_other.ace_attribute-name {font-style: italic;color: #99CC99}.ace-vibrant-ink .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYNDTc/oPAALPAZ7hxlbYAAAAAElFTkSuQmCC) right repeat-y;}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("node_modules/cloud9/node_modules/ace/build/src/theme-vibrant_ink",function(){}),apf={VERSION:"3.0beta",CDN:"",READY:!1,NODE_HIDDEN:101,NODE_VISIBLE:102,NODE_O3:103,KEYBOARD:2,KEYBOARD_MOUSE:!0,MENU:3,SUCCESS:1,TIMEOUT:2,ERROR:3,OFFLINE:4,debug:!1,includeStack:[],initialized:!1,AppModules:[],autoLoadSkin:!1,started:!1,crypto:{},config:{},_GET:{},$asyncObjects:{"apf.oHttp":1,"apf.ajax":1},basePath:"",ns:{apf:"http://ajax.org/2005/aml",aml:"http://ajax.org/2005/aml",xsd:"http://www.w3.org/2001/XMLSchema",xhtml:"http://www.w3.org/1999/xhtml",xslt:"http://www.w3.org/1999/XSL/Transform",xforms:"http://www.w3.org/2002/xforms",ev:"http://www.w3.org/2001/xml-events"},xPathAxis:{self:1,"following-sibling":1,ancestor:1},hasRequireJS:typeof requirejs!="undefined",availHTTP:[],releaseHTTP:function(e){if(apf.brokenHttpAbort)return;if(self.XMLHttpRequestUnSafe&&e.constructor==XMLHttpRequestUnSafe)return;e.onreadystatechange=function(){},e.abort(),this.availHTTP.push(e)},browserDetect:function(){if(this.$bdetect)return;var e=this.$bdetect=function(){var e=navigator.userAgent.toLowerCase(),t=navigator.platform.toLowerCase(),n=e.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],r=n[1]=="ie"&&document.documentMode,i={name:n[1]=="version"?n[3]:n[1],version:r||parseFloat(n[1]=="opera"&&n[4]?n[4]:n[2]),Platform:{name:e.match(/ip(?:ad|od|hone)/)?"ios":(e.match(/(?:webos|android)/)||t.match(/mac|win|linux/)||["other"])[0]},Features:{xpath:!!document.evaluate,air:!!window.runtime,query:!!document.querySelector,json:!!window.JSON},Plugins:{}};return i[i.name]=!0,i[i.name+parseInt(i.version,10)]=!0,i.Platform[i.Platform.name]=!0,i}(),t=navigator.userAgent.toLowerCase();this.isGecko=!!e.firefox,this.isChrome=!!e.chrome,this.isSafari=!!e.safari,this.isSafariOld=e.safari&&e.version===2.4,this.isWebkit=this.isSafari||this.isChrome||t.indexOf("konqueror")!=-1,this.isOpera=!!e.opera,this.isIE=!!e.ie,this.isWin=e.Platform.win,this.isMac=e.Platform.mac,this.isLinux=e.Platform.linux,this.isIphone=e.Platform.ios||t.indexOf("aspen simulator")!=-1,this.isAIR=e.Features.air,this.versionWebkit=this.isWebkit?e.version:null,this.versionGecko=this.isGecko?e.version:null,this.isGecko3=e.firefox3,this.isGecko35=this.isGecko3&&e.version>=3.5,this.versionFF=this.isGecko?e.version:null,this.versionSafari=this.isSafari?e.version:null,this.versionChrome=this.isChrome?e.version:null,this.versionOpera=this.isOpera?e.version:null,this.isIE6=this.isIE&&e.ie6,this.isIE7=this.isIE&&e.ie7,this.isIE8=this.isIE&&e.ie8,this.isIE7Emulate=this.isIE&&document.documentMode&&e.ie7,this.isIE=this.isIE?e.version:null},setCompatFlags:function(){this.TAGNAME=apf.isIE?"baseName":"localName",this.styleSheetRules=apf.isIE?"rules":"cssRules",this.brokenHttpAbort=apf.isIE6,this.canUseHtmlAsXml=apf.isIE,this.supportNamespaces=!apf.isIE,this.cannotSizeIframe=apf.isIE,this.hasConditionCompilation=apf.isIE,this.supportOverflowComponent=apf.isIE,this.hasFlexibleBox=apf.versionGecko>=3||apf.isWebkit&&apf.versionWebkit>=3.2,this.hasFileApi=!!(window.File&&window.FileReader&&window.Blob&&window.FileError),this.hasEventSrcElement=apf.isIE,this.canHaveHtmlOverSelects=!apf.isIE6&&!apf.isIE5,this.hasInnerText=apf.isIE,this.hasMsRangeObject=apf.isIE,this.descPropJs=apf.isIE,this.hasClickFastBug=apf.isIE,this.hasExecScript=window.execScript?!0:!1,this.canDisableKeyCodes=apf.isIE,this.hasTextNodeWhiteSpaceBug=apf.isIE||apf.isIE>=8,this.hasCssUpdateScrollbarBug=apf.isIE,this.canUseInnerHtmlWithTables=!apf.isIE,this.hasSingleResizeEvent=!apf.isIE,this.hasStyleFilters=apf.isIE,this.supportOpacity=!apf.isIE||apf.isIE>=9,this.supportPng24=!apf.isIE6&&!apf.isIE5,this.cantParseXmlDefinition=apf.isIE50,this.hasDynamicItemList=!apf.isIE||apf.isIE>=7,this.canImportNode=apf.isIE,this.hasSingleRszEvent=!apf.isIE,this.hasXPathHtmlSupport=!apf.isIE,this.hasFocusBug=apf.isIE,this.hasHeightAutoDrawBug=apf.isIE&&apf.isIE<8,this.hasReadyStateBug=apf.isIE50,this.dateSeparator=apf.isIE?"-":"/",this.canCreateStyleNode=!apf.isIE,this.supportFixedPosition=!apf.isIE||apf.isIE>=7,this.hasHtmlIdsInJs=apf.isIE&&apf.isIE<8||apf.isWebkit,this.needsCssPx=!apf.isIE,this.hasCSSChildOfSelector=!apf.isIE||apf.isIE>=8,this.hasStyleAnchors=!apf.isIE||apf.isIE>=8,this.styleAttrIsObj=apf.isIE<8,this.hasAutocompleteXulBug=apf.isGecko,this.loadsLocalFilesSync=apf.isIE||apf.isGecko,this.mouseEventBuffer=apf.isIE?20:6,this.hasComputedStyle=typeof document.defaultView!="undefined"&&typeof document.defaultView.getComputedStyle!="undefined",this.w3cRange=Boolean(window.getSelection),this.locale=(apf.isIE?navigator.userLanguage:navigator.language).toLowerCase(),this.characterSet=document.characterSet||document.defaultCharset||"utf-8";var e=document.createElement("div");this.hasContentEditable=typeof e.contentEditable=="string"||typeof e.contentEditable=="boolean",apf.hasContentEditableContainerBug=apf.isWebkit;var t=["transform","OTransform","KhtmlTransform","MozTransform","WebkitTransform"],n=["transition","OTransition","KhtmlTransition","MozTransition","WebkitTransition"],r=["","O","Khtml","Moz","Webkit"],i=["","o-","khtml-","moz-","webkit-"],s=["transitionend","transitionend","transitionend","transitionend","webkitTransitionEnd"],o=0,u=5;this.supportCSSAnim=!1,this.supportCSSTransition=!1;for(;o<u&&!this.supportCSSAnim;++o){if(typeof e.style[t[o]]=="undefined")continue;this.supportCSSAnim=t[o],this.supportCSSTransition=n[o],this.runtimeStylePrefix=r[o],this.classNamePrefix=i[o],this.cssAnimEvent=s[o]}e=null,delete e,this.supportVML=apf.isIE,this.supportSVG=!apf.isIE||apf.isIE>8,this.supportCanvas=!!document.createElement("canvas").getContext,this.supportCanvasText=!!this.supportCanvas&&typeof document.createElement("canvas").getContext("2d").fillText=="function",this.hasVideo=!!document.createElement("video").canPlayType,this.hasAudio=!!document.createElement("audio").canPlayType,this.supportHashChange="onhashchange"in self&&(!apf.isIE||apf.isIE>=8);if(self.XMLHttpRequest){var a=new XMLHttpRequest;this.hasXhrProgress=!!a.upload;if(this.hasXhrBinary=!!a.sendAsBinary||!!a.upload)this.hasHtml5File=!!File&&!!File.prototype.getAsDataURL,this.hasHtml5FileSlice=!!File&&!!File.prototype.slice}else this.hasXhrProgress=this.hasXhrBinary=this.hasHtml5File=this.hasHtml5FileSlice=!1;this.windowHorBorder=this.windowVerBorder=apf.isIE8&&(!self.frameElement||parseInt(self.frameElement.frameBorder))?4:0,this.enableAnim=!apf.isIE||apf.isIE>8,this.animSteps=apf.isIE?.3:1,this.animInterval=apf.isIE?7:1,this.CSSFLOAT=apf.isIE?"styleFloat":"cssFloat",this.CSSPREFIX=apf.isGecko?"Moz":apf.isWebkit?"webkit":"",this.CSSPREFIX2=apf.isGecko?"-moz":apf.isWebkit?"-webkit":"",this.INLINE=apf.isIE&&apf.isIE<8?"inline":"inline-block",this.needZoomForLayout=apf.isIE&&apf.isIE<8,this.maxHttpRetries=apf.isOpera?0:3,this.percentageMatch=new RegExp,this.percentageMatch.compile("([\\-\\d\\.]+)\\%","g"),this.reMatchXpath=new RegExp,this.reMatchXpath.compile("(^|\\|)(?!\\@|[\\w-]+::)","g")},hasGeoLocation:function(){return!1},extend:function(e,t){var n,r,i=!e.notNull;if(arguments.length==2){for(n in t)if(i||t[n])e[n]=t[n];return e}for(r=1;r<arguments.length;r++){t=arguments[r];for(n in t)if(i||t[n])e[n]=t[n]}return e},$extend:function(e,t){for(var n in t)e[n]=t[n];return e},ajax:function(){var e=function(){return this.oHttp.get.apply(this.oHttp,arguments)};return e.exec=function(e,t,n,r){if(e=="ajax"&&t[0]){var i=t[1]||{};return this.oHttp.exec(i.method||"GET",[t[0]],i.callback,apf.extend(r||{},i))}},e}(),start:function(){this.started=!0;var e=location.href.split("#")[0].split("?")[0];this.host=location.hostname&&e.replace(/(\/\/[^\/]*)\/.*$/,"$1"),this.hostPath=e.replace(/\/[^\/]*$/,"")+"/",this.setCompatFlags();if(apf.onstart&&apf.onstart()===!1)return!1;this.isIE&&apf.runIE(),apf.isWebkit&&apf.runWebkit(),(this.isGecko||!this.isIE&&!apf.isWebkit&&!this.isOpera)&&apf.runGecko(),this.oHttp=new this.http,this.Init.addConditional(this.parseAppMarkup,apf,["body"]);try{apf.isIE&&document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}this.started=!0,this.load_done&&this.execDeferred(),this.root=!0;for(var n=0;n<apf.$required.length;n++)apf.include(apf.$required[n]);apf.require=apf.include},nsqueue:{},findPrefix:function(e,t){var n;if(e.nodeType==9){if(!e.documentElement)return!1;if(e.documentElement.namespaceURI==t)return e.prefix||e.scopeName;n=e.documentElement}else{if(e.namespaceURI==t)return e.prefix||e.scopeName;n=e.ownerDocument.documentElement;if(n&&n.namespaceURI==t)return e.prefix||e.scopeName;while(e.parentNode){e=e.parentNode;if(e.namespaceURI==t)return e.prefix||e.scopeName}}if(n)for(var r=0;r<n.attributes.length;r++)if(n.attributes[r].nodeValue==t)return n.attributes[r][apf.TAGNAME];return!1},importClass:function(e,t,n){if(!e)throw new Error(apf.formatErrorString(1018,null,"importing class","Could not load reference. Reference is null"));if(!t)return apf.jsexec(e.toString(),n);var r=e.toString().replace(/^\s*function\s*\w*\s*\([^\)]*\)\s*\{/,"").replace(/\}\s*$/,"");return apf.jsexec(r,n)},toString:function(){return"[Ajax.org Platform (apf)]"},all:[],implement:function(e){if(arguments.length==1)e.call(this);else for(var t,n=0,r=arguments.length;n<r;n++)t=arguments[n],arguments[n].call(this);return this},uniqueHtmlIds:0,setUniqueHtmlId:function(e){var t;return e.setAttribute("id",t="q"+this.uniqueHtmlIds++),t},getUniqueId:function(){return this.uniqueHtmlIds++},lookup:function(e){return this.all[e]},findHost:function(e){while(e&&e.parentNode){try{if((e.host||e.host===!1)&&typeof e.host!="string")return e.host}catch(t){}e=e.parentNode}return null},setReference:function(e,t){return self[e]&&self[e].hasFeature?0:self[e]=t},console:{debug:function(e,t,n){},time:function(e,t,n){},log:function(e,t,n){},info:function(e,t,n){},warn:function(e,t,n){},error:function(e,t,n){},dir:function(e){var t=apf.$debugwin.$serializeObject(e,"Inspected via apf.console.dir");typeof t=="string"?this.write(t,"custom",null,null,null,!0):this.write(e?"Could not serialize object: "+t.message:e,"error",null,null,null,!0)}},html_entity_decode:function(e){return e},htmlentities:function(e){return e},formatErrorString:function(e,t,n,r,i,s,o){return apf.lastErrorMessage=r,r},getDirname:function(e){return((e||"").match(/^([^#]*\/)[^\/]*(?:$|\#)/)||{})[1]},getFilename:function(e){return((e||"").split("?")[0].match(/(?:\/|^)([^\/]+)$/)||{})[1]},getAbsolutePath:function(e,t){return t&&t.charAt(0)=="/"?t:!t||!e||t.match(/^\w+\:\/\//)?t:e.replace(/\/$/,"")+"/"+t.replace(/^\//,"")},getCtrlKey:function(e){return apf.isMac?e.metaKey:e.ctrlKey},include:function(e,t,n,r,i){var s=t?apf.getAbsolutePath(apf.basePath||"",e):e,o=document.getElementsByTagName("head")[0],u=document.createElement("script");return n&&u.setAttribute("_apf_type",n),r?apf.isIE?window.execScript(r):u.text=r:u.src=s,o.appendChild(u),i&&(u[apf.isIE?"onreadystatechange":"onload"]=i),u},$required:[],require:function(){var e=apf.getDirname(location.href),t=0,n=arguments.length;for(;t<n;t++)this.$required.push(apf.getAbsolutePath(e,arguments[t]))},Init:{queue:[],cond:{combined:[]},done:{},add:function(e,t){this.inited?e.call(t):e&&this.queue.push([e,t])},addConditional:function(e,t,n){if(typeof n!="string"){if(this.checkCombined(n))return e.call(t);this.cond.combined.push([e,t,n])}else self[n]?e.call(t):(this.cond[n]||(this.cond[n]=[]),this.cond[n].push([e,t]),this.checkAllCombined())},checkAllCombined:function(){for(var e=0;e<this.cond.combined.length;e++){if(!this.cond.combined[e])continue;this.checkCombined(this.cond.combined[e][2])&&(this.cond.combined[e][0].call(this.cond.combined[e][1]),this.cond.combined[e]=null)}},checkCombined:function(e){for(var t=0;t<e.length;t++)if(!this.done[e[t]])return!1;return!0},run:function(e){this.inited=this.done[e]=!0,this.checkAllCombined();var t=e?this.cond[e]:this.queue;if(!t)return;for(var n=0;n<t.length;n++)t[n][0].call(t[n][1])}},parseStrategy:0,parseAppMarkup:function(e){var t=!1;if(document.documentElement.getAttribute("skipParse")=="true")return},namespaces:{},setNamespace:function(e,t){this.namespaces[e]=t,t.namespaceURI=e},initialize:function(e){apf.console.info("Initializing..."),clearInterval(apf.Init.interval),apf.Init.run();var t=parseFloat(apf.getStyle(document.body,"marginTop"));apf.doesNotIncludeMarginInBodyOffset=document.body.offsetTop!==t,apf.window.init(e)},execDeferred:function(){var e=apf.load_events.length;while(e--)apf.load_events.shift()()},load_events:[],load_timer:null,load_done:!1,load_init:null,addDomLoadEvent:function(e){this.$bdetect||this.browserDetect();if(apf.load_done)return e();apf.load_init||(apf.load_init=function(){if(apf.load_done)return;clearInterval(apf.load_timer),apf.load_timer=null,apf.load_done=!0,apf.started&&apf.execDeferred()}),apf.load_events.push(e);if(e&&apf.load_events.length==1){var t=document,n="undefined";if(typeof t.readyState!=n&&t.readyState=="complete"||t.getElementsByTagName("body")[0]||t.body)return apf.load_init();if(t.addEventListener&&!apf.isOpera)window.addEventListener("DOMContentLoaded",apf.load_init,!1);else if(apf.isIE&&window==top)apf.load_timer=setInterval(function(){try{t.documentElement.doScroll("left")}catch(e){$setTimeout(arguments.callee,0);return}apf.load_init()},10);else if(apf.isOpera)t.addEventListener("DOMContentLoaded",function(){apf.load_timer=setInterval(function(){for(var e=0,n=t.styleSheets.length;e<n;e++)if(t.styleSheets[e].disabled)return;apf.load_init()},10)},!1);else if(apf.isWebkit&&!apf.isIphone){var r=t.getElementsByTagName("link"),i=r.length,s;for(;i>=0;i++)(!r[i]||r[i].getAttribute("rel")!="stylesheet")&&r.splice(i,0);s=r.length,apf.load_timer=setInterval(function(){/loaded|complete/.test(t.readyState)&&t.styleSheets.length==s&&apf.load_init()},10)}else{var o=window.onload;window.onload=function(){apf.load_init(),o&&o()}}}},fireEvent:function(e,t,n,r){e.dispatchEvent?e.dispatchEvent(t,n,r):e.fireEvent("on"+t,n)},addListener:function(e,t,n,r){return e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n),this},removeListener:function(e,t,n,r){return e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n),this},stopEvent:function(e){return this.stopPropagation(e).preventDefault(e),!1},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},unload:function(e){this.isDestroying=!0,this.popup.destroy();var t,n=0,r=this.all.length;for(;n<r;n++)t=this.all[n],t&&t!=e&&t.destroy&&!t.apf&&t.destroy(!1);for(n=0,r=this.availHTTP.length;n<r;n++)this.availHTTP[n]=null;this.availHTTP.length=0,apf.xmldb&&apf.xmldb.unbind(apf.window),this.isDestroying=!1}};var $xmlns=function(e,t,n,r){return apf.supportNamespaces?e.getElementsByTagNameNS(n,t):(r||(r=apf.findPrefix(e,n)),e.style||e==document?e.getElementsByTagName(t):(r&&(e.nodeType==9?e:e.ownerDocument).setProperty("SelectionNamespaces","xmlns:"+r+"='"+n+"'"),e.selectNodes(".//"+(r?r+":":"")+t)))},$setTimeout=setTimeout,$setInterval=setInterval;apf.setTimeout=function(e,t){return apf.$eventDepth++,$setTimeout(function(){e(),--apf.$eventDepth==0&&apf.queue.empty()},t)},document.documentElement.className+=" has_apf",document.body&&(document.body.style.display="none"),apf.browserDetect(),apf.Init.run("apf"),apf.Class=function(){},apf.Class.prototype=new function(){var FUN="function",OBJ="object",UNDEF="undefined",SEL="model",PROP="prop.",MODEL="model",VALUE="value";this.$regbase=0,this.hasFeature=function(e){return this.$regbase&e},this.$initStack=[],this.$bufferEvents=[],this.$init=function(e,t,n){if(typeof e==FUN||e===!0)return this.$bufferEvents=this.$bufferEvents.slice(),e===!0?this:(this.$initStack=this.$initStack.slice(),this.$initStack.push(e),this);this.addEventListener=realAddEventListener,this.nodeType!=2&&(this.$uniqueId=apf.all.push(this)-1),this.$captureStack={},this.$eventsStack={},this.$funcHandlers={};var r=0,i=this.$initStack.length;for(;r<i;r++)this.$initStack[r].apply(this,arguments);for(r=0,i=this.$bufferEvents.length;r<i;r++)this.addEventListener.apply(this,this.$bufferEvents[r]);return delete realAddEventListener,delete this.$initStack,delete this.$bufferEvents,n&&(n.htmlNode||this.nodeFunc==apf.NODE_HIDDEN)&&(this.$pHtmlNode=n.htmlNode,this.ownerDocument&&this.ownerDocument.$domParser&&this.ownerDocument.$domParser.$continueParsing(this),apf.queue.empty()),this},this.implement=apf.implement,this.$handlePropSet=function(e,t){this[e]=t},this.$bindProperty=function(e,t,n,r,i){if(!r)return t.$handlePropSet(n,this[e]);var s=PROP+e,o,u,a;(this.$eventsStack[s]||(this.$eventsStack[s]=[])).push(o=function(e){if(u)return;u=!0;try{if(r.asyncs)return r.call(t,t.xmlRoot,function(e){t.setProperty(n,e,!0,!1,10),u=!1});var i=r.call(t,t.xmlRoot)}catch(e){apf.console.warn("[331] Could not execute binding for property "+n+"\n\n"+e.message),u=!1;return}t.setProperty(n,i,!0,!1,10),u=!1});if(i){s=PROP+n;var f=this;(t.$eventsStack[s]||(t.$eventsStack[s]=[])).push(o.recip=function(){if(u)return;u=!0,f.setProperty(e,t[n],!1,!1,10),u=!1})}return o},this.$attrExcludePropBind=!1,this.$setDynamicProperty=function(prop,pValue){var exclNr=this.$attrExcludePropBind[prop],options;SEL.indexOf(prop)>-1||exclNr==3?options={xpathmode:2}:exclNr==2?options={nostring:!0}:exclNr===0&&(options={parsecode:!0}),this.liveedit&&((options||(options={})).liveedit=!0);var fParsed=apf.lm.compile(pValue,options);prop==MODEL&&((this.$modelParsed=fParsed).instruction=pValue);if(fParsed.type==2)return this[prop]=!pValue,this.setProperty(prop,fParsed.str,null,null,10);var check=1;if(exclNr==2||fParsed.xpaths.length&&exclNr!=1)this.hasFeature(apf.__DATABINDING__)||(this.implement(apf.StandardBinding),this.$attrExcludePropBind[prop]==1&&(check=0)),check&&this.$addAttrBind(prop,fParsed,pValue);var matches=exclNr&&exclNr!=3&&prop!=MODEL?{}:fParsed.props,found=!1,_self=this,o,node,bProp,p;for(p in matches){o=p.split(".");if(o.length>2){bProp=o.pop();try{node=eval(o.join("."))}catch(e){arguments[2]?apf.console.warn("[287] Could not execute binding test : "+pValue.replace(/</g,"&lt;")+"\n\n"+e.message):apf.queue.add(prop+":"+this.$uniqueId,function(){_self.$clearDynamicProperty(prop),_self.$setDynamicProperty(prop,pValue,!0)});continue}!node||typeof node!=OBJ||!node.$regbase&&node.$regbase!==0?(bProp=o[1],node=self[o[0]]||apf.nameserver.get("all",o[0])):o.push(bProp)}else bProp=o[1],node=self[o[0]]||apf.nameserver.get("all",o[0])||o[0]=="this"&&this;if(!node){if(arguments[2]){apf.console.warn("[287] Could not create property binding:  '"+o[0]+"' does not exist. \n"+pValue.replace(/</g,"&lt;").substr(0,400));var _self=this;apf.nameserver.waitFor(o[0],function(){_self.$setDynamicProperty(prop,pValue)});return}apf.queue.add(prop+":"+this.$uniqueId,function(){_self.$clearDynamicProperty(prop),_self.$setDynamicProperty(prop,pValue,!0)});return}if(!node.$bindProperty)continue;this.$funcHandlers[prop]||(this.$funcHandlers[prop]=[]);var last;this.$funcHandlers[prop].push(last={amlNode:node,prop:bProp,handler:node.$bindProperty(bProp,this,prop,fParsed,fParsed.type==4&&SEL.indexOf(prop)==-1)}),found=!0}if(found)last.handler({initial:!0});else{if(exclNr)return this.setProperty(prop,pValue,null,null,10);try{if(fParsed.asyncs)return fParsed.call(this,this.xmlRoot,function(e){_self.setProperty(prop,e,!0,null,10)});var value=fParsed.call(this,this.xmlRoot)}catch(e){apf.console.warn("[331] Could not execute binding test or: "+pValue.replace(/</g,"&lt;")+"\n\n"+e.message);return}this[prop]=!value,this.setProperty(prop,value,!0,null,10)}},this.$clearDynamicProperty=function(e){this.$removeAttrBind&&this.$removeAttrBind(e),this.$inheritProperties&&delete this.$inheritProperties[e],e==MODEL&&(this.$modelParsed=null);var t,n,r,i=this.$funcHandlers[e];if(i&&typeof i!=FUN){for(n=0,r=i.length;n<r;n++)(t=i[n]).amlNode.removeEventListener(PROP+t.prop,t.handler),t.handler&&t.handler.recip&&this.removeEventListener(PROP+e,t.handler.recip);delete this.$funcHandlers[e]}},this.getAvailableProperties=function(){return this.$supportedProperties.slice()},this.setProperty=function(e,t,n,r,i){var s,o,u,a,f,l,c=this[e],h=PROP+e;try{var p=typeof t==OBJ?t!=(typeof c==OBJ?c:null):this.$booleanProperties&&this.$booleanProperties[e]?c!=apf.isTrue(t):String(c)!==String(t)}catch(a){var p=!0}if(p){if(!n&&typeof t!=OBJ&&!(s=this.$attrExcludePropBind[e])&&(o=this.$attrBindings&&this.$attrBindings[e]||e!=VALUE&&this.xmlRoot&&this.$bindings[e]&&this.$bindings[e][0])&&o.cvalue.type==3)return apf.setNodeValue(this.$getDataNode(e.toLowerCase(),this.xmlRoot,!0),t,!0);r&&!this.$funcHandlers[e]&&this.setAttribute(e,t,!0);if(this.$handlePropSet(e,t,n)===!1)return;t=this[e]}(u=this.$eventsStack[h])&&p&&this.dispatchEvent(h,{prop:e,value:t,oldvalue:c,changed:p})===!1&&(a.returnValue=!1);if((aci||(aci=apf.config.$inheritProperties))[e]){var d=t===""||typeof t=="undefined";if(i!=10&&!t){delete this.$inheritProperties[e];if(this.$setInheritedAttribute&&this.$setInheritedAttribute(e))return}else i!=10&&(this.$inheritProperties[e]=i||-1);if(this.$amlLoaded&&(!a||a.returnValue!==!1)&&this.childNodes){var v=aci[e];(function m(n){var r,s,o,u;for(r=0,s=n.length;r<s;r++){o=n[r];if(o.nodeType!=1&&o.nodeType!=7)continue;u=o.$inheritProperties[e];if(v==1&&!u)m(o.childNodes);else if(!(u<0)){if(u==3||i==3){var a=o[e];o[e]=null}o.setProperty(e,u!=3?t:a,!1,!1,u||2)}}})(this.childNodes)}}return t};var aci;this.getProperty=function(e){return this[e]},apf.$eventDepth=0,this.$eventDepth=0,this.dispatchEvent=function(e,t,n){var r,i,s,o,u;if(!apf.AmlEvent)return;apf.$eventDepth++,this.$eventDepth++,n=t&&t.name?t:n;if((!n||!n.currentTarget)&&(!t||!t.currentTarget)){(t||(t={})).currentTarget||(t.currentTarget=this);if(r=this.$captureStack[e])for(o=0,u=r.length;o<u;o++)s=r[o].call(this,n||(n=new apf.AmlEvent(e,t))),typeof s!=UNDEF&&(i=s)}if(t&&t.captureOnly)return n&&typeof n.returnValue!=UNDEF?n.returnValue:i;this["on"+e]&&(i=this["on"+e].call(this,n||(n=new apf.AmlEvent(e,t))));if(r=this.$eventsStack[e])for(o=0,u=r.length;o<u;o++){if(!r[o])continue;s=r[o].call(this,n||(n=new apf.AmlEvent(e,t))),typeof s!=UNDEF&&(i=s)}(n&&n.bubbles&&!n.cancelBubble||!n&&t&&t.bubbles)&&this!=apf&&(s=(this.parentNode||this.ownerElement||apf).dispatchEvent(e,t,n),typeof s!=UNDEF&&(i=s)),--apf.$eventDepth==0&&this.ownerDocument&&!this.ownerDocument.$domParser.$parseContext&&!apf.isDestroying&&apf.loaded&&apf.queue&&apf.queue.empty(),this.$eventDepth--;if(t)try{delete t.currentTarget}catch(a){t.currentTarget=null}return n&&typeof n.returnValue!=UNDEF?n.returnValue:i},this.addEventListener=function(e,t,n){this.$bufferEvents.push([e,t,n])};var realAddEventListener=function(e,t,n){e.substr(0,2)=="on"&&(e=e.substr(2));var r,i=n?this.$captureStack:this.$eventsStack;(r=i[e])||(r=i[e]=[]);if(r.indexOf(t)>-1)return;r.unshift(t);var s;(s=this.$eventsStack["$event."+e])&&s[0].call(this,t)};this.removeEventListener=function(e,t,n){var r=(n?this.$captureStack:this.$eventsStack)[e];r&&(this.$eventDepth&&(r=(n?this.$captureStack:this.$eventsStack)[e]=r.slice()),r.remove(t),r.length||delete (n?this.$captureStack:this.$eventsStack)[e])},this.hasEventListener=function(e){return this.$eventsStack[e]&&this.$eventsStack[e].length>0},this.destroy=function(e,t){if(typeof this.$uniqueId==UNDEF&&this.nodeType!=2)return;this.$amlLoaded=!1,this.$amlDestroyed=!0,this.$destroy&&this.$destroy(),this.dispatchEvent("DOMNodeRemoved",{relatedNode:this.parentNode,bubbles:!apf.isDestroying}),this.dispatchEvent("DOMNodeRemovedFromDocument"),apf.all[this.$uniqueId]=undefined;if(!this.nodeFunc&&!this.nodeType){try{(this.id||this.name)&&delete self[this.id||this.name]}catch(n){}return}this.$ext&&!this.$ext.isNative&&(this.nodeType==1&&this.localName!="a"&&(this.$ext.oncontextmenu=this.$ext.host=null),t&&this.localName!="collection"&&this.$ext.parentNode&&this.$ext.parentNode.removeChild(this.$ext)),this.$int&&!this.$int.isNative&&this.$int.nodeType==1&&this.localName!="a"&&(this.$int.host=null),this.$aml=null;if(e&&this.childNodes){var r=this.childNodes;for(s=r.length-1;s>=0;s--)r[s].destroy&&r[s].destroy(!0,t&&this.localName=="collection");this.childNodes=null}this.parentNode&&this.removeNode?this.removeNode():this.ownerElement&&!this.ownerElement.$amlDestroyed&&this.ownerElement.removeAttributeNode(this),this.$focussable&&this.focussable&&apf.window.$removeFocus(this);if(this.attributes){var i=this.attributes;for(var s=i.length-1;s>=0;s--)this.$clearDynamicProperty(i[s].nodeName),i[s].destroy()}try{if(this.id||this.name)self[this.id||this.name]=null}catch(n){}for(var o in this.$captureStack)this.$captureStack[o]=null;for(var o in this.$eventsStack)this.$eventsStack[o]=null;for(var o in this.$funcHandlers)this.$funcHandlers[o]=null;if(this.$bufferEvents)for(var s=this.$bufferEvents.length-1;s>=0;s--)this.$bufferEvents=null;apf.nameserver.remove(this.localName,this)}},apf.extend(apf,(new apf.Class).$init()),apf.Init.run("class"),apf.color={colorshex:{aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662680,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14184595,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fixHSB:function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},fixRGB:function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},fixHex:function(e,t){e=e.toLowerCase().replace(/[^a-f0-9]/g,"");var n=6-e.length;if(n>0){var r="0",i=[],s=0;t&&(r=e.charAt(e.length-1),i.push(e));for(;s<n;s++)i.push(r);t||i.push(e),e=i.join("")}return e},hexToRGB:function(e){return e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16),{r:e>>16,g:(e&65280)>>8,b:e&255}},hexToHSB:function(e){return this.RGBToHSB(this.hexToRGB(e))},RGBToHSB:function(e){var t={h:0,s:0,b:0},n=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b),i=r-n;return t.b=r,r!=0,t.s=r!=0?255*i/r:0,t.s!=0?e.r==r?t.h=(e.g-e.b)/i:e.g==r?t.h=2+(e.b-e.r)/i:t.h=4+(e.r-e.g)/i:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t},HSBToRGB:function(e){var t={},n=Math.round(e.h),r=Math.round(e.s*255/100),i=Math.round(e.b*255/100);if(r==0)t.r=t.g=t.b=i;else{var s=i,o=(255-r)*i/255,u=(s-o)*(n%60)/60;n==360&&(n=0),n<60?(t.r=s,t.b=o,t.g=o+u):n<120?(t.g=s,t.b=o,t.r=s-u):n<180?(t.g=s,t.r=o,t.b=o+u):n<240?(t.b=s,t.r=o,t.g=s-u):n<300?(t.b=s,t.g=o,t.r=o+u):n<360?(t.r=s,t.g=o,t.b=s-u):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},RGBToHex:function(e){return("00000"+(e.r<<16|e.g<<8|e.b).toString(16)).slice(-6)},HSBToHex:function(e){return this.RGBToHex(this.HSBToRGB(e))}},apf.asyncForEach=function(e,t,n){var r=0,i=e.length;if(!i)return n(null,[]);t(e[r],function s(o){if(o)return n(o);r++,r<i?t(e[r],s,r):n(null)},r)},apf.asyncWhile=function(e,t,n){var r=0;t(r,function i(s){if(s)return n?n(s,r):null;++r,e(r)?t(r,i):n&&n(null,r)})},apf.asyncMap=function(e,t,n){var r=0,i=e.length;if(!i)return n(null,[]);var s=[];async(e[r],function o(t,u){if(t)return n(t);s[r]=u,r++,r<i?async(e[r],o):n(null,s)})},apf.asyncChain=function(e){function r(){var s=e[t++];t==n?s():s(r)}var t=0,n=e.length;r()},apf.setcookie=function(e,t,n,r,i,s){var o=e+"="+escape(t)+";";return n&&(o+="expires="+(new Date(n+(new Date).getTimezoneOffset()*60)).toGMTString()+";"),r&&(o+="path="+r+";"),i&&(o+="domain="+i+";"),s&&(o+="secure"),document.cookie=o,t},apf.getcookie=function(e){var t=document.cookie.split("; ");for(var n=0;n<t.length;n++){var r=t[n].split("=");if(e==r[0])return unescape(r[1])}return""},apf.delcookie=function(e,t){document.cookie=e+"=blah; expires=Fri, 31 Dec 1999 23:59:59 GMT;"+(t?"domain="+t:"")};if(typeof isFinite=="undefined")function isFinite(e){return e+1!=e}apf.NUMBER=1,apf.BOOLEAN=2,apf.STRING=3,apf.ARRAY=4,apf.DATE=5,apf.REGEXP=6,apf.FUNCTION=7,Array.prototype.dataType=apf.ARRAY,Number.prototype.dataType=apf.NUMBER,Date.prototype.dataType=apf.DATE,Boolean.prototype.dataType=apf.BOOLEAN,String.prototype.dataType=apf.STRING,RegExp.prototype.dataType=apf.REGEXP,Function.prototype.dataType=apf.FUNCTION,apf.getCgiString=function(e,t,n){function s(e,t){if(apf.isArray(e))for(var n=0;n<e.length;n++)s(e[n],t+"%5B%5D");else if(typeof e=="object")for(r in e){if(apf.isSafariOld&&(!e[r]||typeof e[r]!="object"))continue;if(typeof e[r]=="function")continue;s(e[r],t+"%5B"+encodeURIComponent(r)+"%5D")}else i.push(t+"="+encodeURIComponent(e))}var r,i=[];if(t){i.push("func="+n);for(var o=0;o<e[0].length;o++)s(e[0][o],"f%5B"+o+"%5D")}else for(r in e){if(apf.isSafariOld&&(!e[r]||typeof e[r]=="function"))continue;s(e[r],r)}return i.join("&")},apf.fromCgiString=function(e){if(!e)return!1;var t={};e=e.split("&");for(var n,r=0;r<e.length;r++){n=e[r].split("="),n[0]=decodeURIComponent(n[0]);var i=n[0].replace(/\]/g,"").split("["),s=t;for(var o=0;o<i.length;o++)if(s[i[o]])s=s[i[o]];else{if(i.length==o+1){i[o]?s[i[o]]=decodeURIComponent(n[1]):s.push(decodeURIComponent(n[1]));break}s[i[o]]=i[o+1]?{}:[],s=s[i[o]]}}return t},Function.prototype.extend=function(){return apf.extend.apply(this,[this].concat(Array.prototype.slice.call(arguments))),this},Function.prototype.bindWithEvent=function(){var e=this,t=Array.prototype.slice.call(arguments),n=t.shift(),r=t.shift();return function(r){return r||(r=window.event),e.apply(n,[r].concat(t).concat(Array.prototype.slice.call(arguments)))}},Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError;var t=Array.prototype.slice.call(arguments,1),n=this,r=Array.prototype.concat,i=function(){return n.apply(this instanceof s?this:e,r.apply(t,arguments))},s=function(){};return s.prototype=n.prototype,i.prototype=new s,i}),Array.prototype.copy=function(){var e=[];for(var t=0,n=this.length;t<n;t++)e[t]=this[t]&&this[t].copy?this[t].copy():this[t];return e},Array.prototype.merge=function(){for(var e=0,t=arguments.length;e<t;e++)for(var n=0,r=arguments[e].length;n<r;n++)this.push(arguments[e][n])},Array.prototype.arrayAdd=function(){var e=this.copy();for(var t=0,n=arguments.length;t<n;t++)for(var r=0,i=e.length;r<i;r++)e[r]+=arguments[t][r];return e},Array.prototype.equals=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]!=e[t])return!1;return!0};var uniqueBenvie=function(){function n(){var e=[],r=20,i;while(r--)i=Math.random()*52|0,e[r]=String.fromCharCode(i+(i>=26?71:65));return e=e.join(""),e in t?n():(t[e]=!0,e)}function r(t){var r={},i={},s={},o=[],u=[],a=0,f=t.length,l,c,h=n();while(f--){l=t[f],c=typeof l;if(l===null||c!=="object"&&c!=="function")switch(c){case"string":r[l]=!0;break;case"number":i[l]=!0;break;default:s[l]=l}else if(!e.call(l,h))try{l[h]=!0,o[a++]=l}catch(p){u.indexOf(l)===-1&&(u[u.length]=l)}}while(a--)delete o[a][h];o=o.concat(u),a=o.length;for(f in r)e.call(r,f)&&(o[a++]=f);for(f in i)e.call(i,f)&&(o[a++]=+f);for(f in s)e.call(s,f)&&(o[a++]=s[f]);return o}var e={}.hasOwnProperty,t={};return r}();typeof Set!="undefined"?Array.prototype.makeUnique=function(){var e=[],t=new Set,n=this.length;while(n--)t.has(this[n])||(e[e.length]=this[n],t.add(this[n]));return e}:Array.prototype.makeUnique=function(){return uniqueBenvie(this)},Array.prototype.contains=function(e,t){return this.indexOf(e,t)!=-1},Array.prototype.indexOf=Array.prototype.indexOf||function(e,t){var n=this.length;for(var r=t<0?Math.max(0,n+t):t||0;r<n;r++)if(this[r]===e)return r;return-1},Array.prototype.lastIndexOf=Array.prototype.lastIndexOf||function(e,t){var n=this.length;for(var r=t>=n?n-1:t<0?t+n:n-1;r>=0;r--)if(this[r]===e)return r;return-1},Array.prototype.pushUnique=function(){var e,t=0,n=arguments.length;for(;t<n;++t)e=arguments[t],this.indexOf(e)==-1&&this.push(e);return this},Array.prototype.search=function(){for(var e=0,t=arguments.length;e<t;e++){if(typeof this[e]!="array")continue;for(var n=0;n<t;n++){if(this[e][n]!=arguments[n])break;if(n==t-1)return this[e]}}},Array.prototype.each=Array.prototype.forEach=Array.prototype.forEach||function(e){for(var t=0,n=this.length;t<n;t++)if(e.call(this,this[t],t,this)===!1)break;return this},Array.prototype.remove=function(e){for(var t=this.length-1;t>=0;t--){if(this[t]!=e)continue;this.splice(t,1)}return this},Array.prototype.removeIndex=function(e){return this.length?this.splice(e,1):null},Array.prototype.insertIndex=function(e,t){this.splice(t,0,e)},Array.prototype.invert=Array.prototype.reverse=Array.prototype.reverse||function(){var e=this.length-1;for(var t,n=0;n<Math.ceil(.5*e);n++)t=this[n],this[n]=this[e-n],this[e-n]=t;return this},Array.prototype.filter=Array.prototype.filter||function(e,t){var n=[];for(var r=0,i=this.length;r<i;r++)e.call(t,this[r],r,this)&&n.push(this[r]);return n},Array.prototype.every=Array.prototype.every||function(e,t){for(var n=0,r=this.length;n<r;n++)if(!e.call(t,this[n],n,this))return!1;return!0},Array.prototype.map=Array.prototype.map||function(e,t){var n=[];for(var r=0,i=this.length;r<i;r++)n[r]=e.call(t,this[r],r,this);return n},Array.prototype.some=Array.prototype.some||function(e,t){for(var n=0,r=this.length;n<r;n++)if(e.call(t,this[n],n,this))return!0;return!1},Number.prototype.toPrettyDigit=Number.prototype.toPrettyDigit||function(){var e=this.toString();return e.length==1?"0"+e:e},RegExp.prototype.getNativeFlags=function(){return(this.global?"g":"")+(this.ignoreCase?"i":"")+(this.multiline?"m":"")+(this.extended?"x":"")+(this.sticky?"y":"")},RegExp.prototype.addFlags=function(e){return new RegExp(this.source,(e||"")+this.getNativeFlags())},String.prototype.uCaseFirst=function(){return this.substr(0,1).toUpperCase()+this.substr(1)},String.prototype.trim=function(){return this.replace(/[\s\n\r]*$/,"").replace(/^[\s\n\r]*/,"")},String.prototype.repeat=function(e){return Array(e+1).join(this)},String.prototype.count=function(e){return this.split(e).length-1},String.prototype.stripTags=function(){return this.replace(/<\/?[^>]+>/gi,"")},String.prototype.escape=function(){return escape(this)},String.prototype.toXml=function(){var e=apf.getXml("<root>"+this+"</root>");if(e.childNodes.length==1)return e.childNodes[0];var t=e.ownerDocument.createDocumentFragment(),n=e.childNodes;while(n.length)t.appendChild(n[0]);return t},typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement=="function"&&(String.prototype.escapeHTML=function(){return this.escapeHTML.text.data=this,this.escapeHTML.div.innerHTML},String.prototype.unescapeHTML=function(){var e=document.createElement("div");e.innerHTML=this.stripTags();if(e.childNodes[0]){if(e.childNodes.length>1){var t=[];for(var n=0;n<e.childNodes.length;n++)t.push(e.childNodes[n].nodeValue);return t.join("")}return e.childNodes[0].nodeValue}return""},String.prototype.escapeHTML.div=document.createElement("div"),String.prototype.escapeHTML.text=document.createTextNode(""),String.prototype.escapeHTML.div.appendChild(String.prototype.escapeHTML.text),"<\n>".escapeHTML()!=="&lt;\n&gt;"&&(String.prototype.escapeHTML=null),"&lt;\n&gt;".unescapeHTML()!=="<\n>"&&(String.prototype.unescapeHTML=null)),String.prototype.escapeHTML||(String.prototype.escapeHTML=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),String.prototype.unescapeHTML||(String.prototype.unescapeHTML=function(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}),String.prototype.truncate=function(e,t){return this.length>=e?this.substring(0,e-(t?4:1))+(t?"...":""):this},String.prototype.pad=function(e,t,n){return n?(this+Array(e).join(t)).slice(0,e):(Array(e).join(t)+this).slice(-e)},apf.PAD_LEFT=!1,apf.PAD_RIGHT=!0,String.prototype.splitSafe=function(e,t,n){return(n&&this.toLowerCase()||this).replace(/(?:^\s+|\n|\s+$)/g,"").split(new RegExp("[\\s ]*"+e+"[\\s ]*","g"),t||999)},String.prototype.appendRandomNumber=function(e){for(var t=[],n=1;n<=e;n++)t.push(apf.randomGenerator.generate(1,9));return this.toString()+t.join("")},String.prototype.prependRandomNumber=function(e){for(var t=[],n=1;n<=e;n++)t.push(apf.randomGenerator.generate(1,9));return t.join("")+this.toString()},String.prototype.sprintf=function(){var e=this.toString(),t=0,n=e.indexOf("%s");while(n>=0){var r=arguments[t++]||" ";e=e.substr(0,n)+r+e.substr(n+2),n=e.indexOf("%s")}return e},Date.now||(Date.now=function(){return+(new Date)}),apf.hotkeys={},function(){function s(t,n,i){var s,o=0,u=t.splitSafe("\\-",null,!0),a=0,f=u.length;for(;a<f;++a)e[u[a]]?o|=e[u[a]]:s=u[a]||"-";if(!s)return;r.$keys[o]||(r.$keys[o]={}),i?n==r.$keys[o][s]&&(r.$keys[o][s]=null):r.$keys[o][s]=n}function o(e,r){var i,s=e.splitSafe("\\-"),o=0,u=s.length;for(;o<u;++o){if(!s[o])continue;if(i=(r?n:t)[s[o].toLowerCase()])s[o]=i}return s.join(" ")}var e={ctrl:1,alt:2,option:2,shift:4,meta:8,command:8};this.keyNames={8:"Backspace",9:"Tab",13:"Enter",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",107:"+",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",188:",",219:"[",221:"]"};var t={meta:"⌘",command:"⌘",alt:"⌥",option:"⌥",shift:"⇧",esc:"⎋",ctrl:"⌃",backspace:"⌫",del:"⌦",enter:"↩"},n={meta:"&#8984;",command:"&#8984;",alt:"&#8997;",option:"&#8997;",shift:"&#8679;",esc:"&#9099;",ctrl:"&#2303;",backspace:"&#232B;",del:"&#2326;",enter:"&#21A9;"};this.$keys={};var r=this,i=0;apf.registerHotkey=this.register=function(e,t){var n=e.split("|"),r=0,i=n.length;for(;r<i;++r)s(n[r],t)},this.$exec=function(e){var t,n=0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0),i=e.keyCode,s=r.keyNames[i]||(i&&i>46&&i!=91?String.fromCharCode(i):null);if(!n&&(!s||!s.match(/^F\d{1,2}$/))||!s)return;return r.$keys[n]&&(t=r.$keys[n][s.toLowerCase()])&&(t(e.htmlEvent),e.returnValue=!1,apf.queue.empty()),e.returnValue},apf.removeHotkey=this.remove=this.unregister=function(e,t){var n=e.split("|"),r=0,i=n.length;for(;r<i;++r)s(n[r],t,!0)},this.toMacNotation=function(e,t){var n=e.split("|"),r=0,i=n.length,s=[];for(;r<i;++r)s.push(o(n[r],t));return s.join(" | ")},apf.addEventListener("keydown",function(e){var t=e.htmlEvent;if(r.$exec(e)===!1||e.returnValue===!1){apf.stopEvent(t);if(apf.canDisableKeyCodes)try{t.keyCode=0}catch(t){}return!1}})}.call(apf.hotkeys),apf.nameserver={lookup:{},add:function(e,t){return this.lookup[e]||(this.lookup[e]=[]),this.lookup[e].push(t)-1},register:function(e,t,n){this.lookup[e]||(this.lookup[e]={});if(this.waiting[t]){var r=this.waiting[t];for(var i=0;i<r.length;i++)r[i]();delete this.waiting[t]}return this.lookup[e][t]=n},waiting:{},waitFor:function(e,t){(this.waiting[e]||(this.waiting[e]=[])).push(t)},remove:function(e,t){var n=this.lookup[e];if(n)for(var r in n)n[r]==t&&delete n[r]},get:function(e,t){return this.lookup[e]?this.lookup[e][t]:null},getAll:function(e){var t,n=[],r=this.lookup[e];if(!r)return n;if(r.dataType==apf.ARRAY)for(var i=0;i<r.length;i++)n.push(r[i]);else for(t in r)n.push(r[t]);return n},getAllNames:function(e){var t,n=[];for(t in this.lookup[e]){if(parseInt(t)==t)continue;n.push(t)}return n}},apf.plane={$set:[],$lookup:{},$find:function(e){if(this.$lookup[e])return this.$lookup[e];var t=this.$set.pop();return t||(t=this.$factory()),this.$lookup[e]=t,t},get:function(e){return this.$find(e&&e.protect||"default")},show:function(e,t,n,r,i){this.options=i||{};var s=this.$find(i&&i.protect||"default");s.show(e,t,n,r,i)},hide:function(e,t){var n=this.$lookup[e||"default"];n&&(n.hide(t),delete this.$lookup[e||"default"],this.$set.push(n))},$factory:function(){function n(){var t=document.createElement("DIV");return!e.options||!e.options.customCover?t:(t.innerHTML=apf.getXmlString(e.options.customCover),t.firstChild)}function r(){var r=document.body.appendChild(n());return e.options.customCover||(r.style.background=t),r.style.position="fixed",r.style.left=0,r.style.top=0,r.host=!1,r}var e=this,t="url("+(apf.skins.skins["default"]?apf.skins.skins["default"].mediaPath+"spacer.gif":"images/spacer.gif")+")",i=r();return{host:this,plane:i,lastCursor:null,lastCoverType:"default",show:function(e,n,i,s,o){var u=o&&o.customCover?"custom":"default",a;if(u=="custom"||this.lastCoverType!=u)this.plane=r();a=this.plane;if(!o||!o.customCover)this.plane.style.background=o&&o.color||t;this.animate=o&&o.animate,this.protect=o&&o.protect,this.protect&&apf.setProperty("planes",(apf.planes||0)+1),e&&(this.current=e,n&&(this.$originalPlace=[e.parentNode,e.nextSibling],this.plane.appendChild(e))),apf.window.zManager.set("plane",this.plane,!n&&e),s=apf.isIE;var f=a.parentNode==document.body?s?document.documentElement.offsetWidth:apf.getWindowWidth():a.parentNode.offsetWidth,l=a.parentNode==document.body?s?document.documentElement.offsetHeight:apf.getWindowHeight():a.parentNode.offsetHeight;i&&(this.lastCursor===null&&(this.lastCursor=document.body.style.cursor),document.body.style.cursor=apf.getStyle(e,"cursor")),this.plane.style.display="block";var c=parseFloat(o&&o.opacity)||1;if(this.animate){var h=this;apf.setOpacity(this.plane,0),setTimeout(function(){apf.tween.single(h.plane,{steps:5,interval:10,type:"fade",from:0,to:c})},100)}else apf.setOpacity(this.plane,c);var p=apf.getDiff(a);return this.plane.style.width="100%",this.plane.style.height="100%",this.lastCoverType=o&&o.customCover?"custom":"default",a},hide:function(e){this.protect&&apf.setProperty("planes",apf.planes-1);var t;try{t=apf.isChildOf(this.plane,document.activeElement)}catch(n){t=!1}this.current&&this.current.parentNode==this.plane&&this.$originalPlace[0].insertBefore(this.current,this.$originalPlace[1]);if(this.animate&&!e){var r=this;setTimeout(function(){apf.tween.single(r.plane,{steps:5,interval:10,type:"fade",from:apf.getOpacity(r.plane),to:0,onfinish:function(){r.plane.style.display="none",r.current&&apf.window.zManager.clear(r.current)}})},100)}else apf.setOpacity(this.plane,0),this.current&&apf.window.zManager.clear(this.plane,this.current),this.plane.style.display="none";return t&&apf.document.activeElement&&(apf.isIE||document.activeElement.focus(),apf.document.activeElement.$focus()),this.current=null,this.lastCursor!==null&&(document.body.style.cursor=this.lastCursor,this.lastCursor=null),this.plane}}}},apf.popup={cache:{},focusFix:{INPUT:1,TEXTAREA:1,SELECT:1},setContent:function(e,t,n,r,i){return this.popup||this.init(),this.cache[e]={content:t,style:n,width:r,height:i},t.style.position="absolute",t.onmousedown=function(e){e||(e=event)},t.ownerDocument},removeContent:function(e){this.cache[e]=null,delete this.cache[e]},init:function(){this.popup={},apf.addEventListener("hotkey",function(e){(e.keyCode=="27"||e.altKey)&&apf.popup.forceHide()})},show:function(e,t){this.popup||this.init(),t=apf.extend({x:0,y:0,animate:!1,ref:null,width:null,height:null,callback:null,draggable:!1,resizable:!1,allowTogether:!1,autoCorrect:!0,noleft:!1,setZindex:!0},t),(!t.allowTogether||t.allowTogether!==!0&&t.allowTogether!=this.last)&&this.last!=e&&this.cache[this.last]&&(!this.cache[this.last].options||this.cache[this.last].options.autohide!==!1)&&this.hide();var n=this.cache[e];n.options=t;var r,i=n.content,s=!1,o=!1,u=!1;t.setZindex&&apf.window.zManager.set("popup",n.content),(r=n.content.style.display)&&r.indexOf("none")>-1&&(n.content.style.display="");var a=t.x,f=t.y,l=t.ref;while(l&&l.nodeType==1){if(u=apf.getStyle(l,"position")=="fixed")break;l=l.parentNode||l.$parentNode}if(!u){if(l){var c=apf.getAbsolutePosition(t.ref,n.content.offsetParent||n.content.parentNode);a=(a||0)+c[0],f=(f||0)+c[1]}if(t.width||n.width)i.style.width=(t.width||n.width)-3+"px";i.style.position="absolute";var h=this.cache[t.allowTogether],p=apf.getOverflowParent(n.content),d=p==document.documentElement?(apf.isIE?p.offsetHeight:window.innerHeight+window.pageYOffset)+p.scrollTop:p.offsetHeight+p.scrollTop;s=t.up||t.autoCorrect&&f+(t.height||n.height||n.content.offsetHeight)>d;if(s){var v;t.ref?v=c[1]-(t.height||n.height||n.content.offsetHeight)+3:v=Math.max(0,d-(t.height||n.height||n.content.offsetHeight)),i.style.top=(!t.up&&v<0?f:v)+"px"}else i.style.top=f+"px";if(!t.noleft){var m=p==document.documentElement?(apf.isIE?p.offsetWidth:window.innerWidth+window.pageXOffset)+p.scrollLeft:p.offsetWidth+p.scrollLeft;o=t.autoCorrect&&a+(t.width||n.width||n.content.offsetWidth)>m;if(o){var v;t.ref?v=c[0]-(t.width||n.width||n.content.offsetWidth)+t.ref.offsetWidth:v=m-(t.width||n.width||n.content.offsetWidth)-(h?h.width||h.content.offsetWidth:0),i.style.left=v<0?a:v-1+"px"}else i.style.left=a+"px"}}else c=apf.getAbsolutePosition(t.ref,l),f=(f||0)+c[1]+l.offsetTop,c[0]+=l.offsetLeft,i.style.position="fixed",i.style.top=f+"px",t.noleft||(i.style.left=a+"px");apf.setStyleClass(i,s?"upward":"downward",[s?"downward":"upward"]),apf.setStyleClass(i,o?"moveleft":"moveright",[o?"moveright":"moveleft"]);if(t.animate)if(t.animate=="fade")apf.tween.single(i,{type:"fade",from:0,to:1,anim:apf.tween.NORMAL,steps:t.steps||15*apf.animSteps});else{var g,y=apf.isIE8?5:7,b=0;g=setInterval(function(){var e=++b*((t.height||n.height)/y);i.style.height=e+"px",s?i.style.top=f-e-(t.y||0)+"px":(t.container||i).scrollTop=-1*(b-y)*((t.height||n.height)/y),i.style.display="block",b>=y&&(clearInterval(g),t.callback&&t.callback(i))},10)}else{if(!l){if(t.height||n.height)i.style.height=(t.height||n.height)+"px";v=d-(t.height||n.height||n.content.offsetHeight),i.style.top=f+(t.height||n.height||n.content.offsetHeight)<d?f:v+"px"}i.style.display="block",t.callback&&t.callback(i)}$setTimeout(function(){apf.popup.last=e}),t.draggable&&(t.id=e,this.makeDraggable(t))},hide:function(){if(this.isDragging)return;var e=this.cache[this.last];e&&(e.content&&(e.content.style.display="none"),e.options&&e.options.onclose&&(e.options.onclose(apf.extend(e.options,{htmlNode:e.content})),e.options.onclose=!1))},isShowing:function(e){return this.last&&this.last==e&&this.cache[this.last]&&this.cache[this.last].content.style.display!="none"},isDragging:!1,makeDraggable:function(e){if(!apf.Interactive||this.cache[e.id].draggable)return;var t=this.cache[e.id].content;this.cache[e.id].draggable=!0;var n={$propHandlers:{},minwidth:10,minheight:10,maxwidth:1e4,maxheight:1e4,dragOutline:!1,resizeOutline:!1,draggable:!0,resizable:e.resizable,$ext:t,oDrag:t.firstChild};t.onmousedown=t.firstChild.onmousedown=function(e){e||(e=event),(e||event).cancelBubble=!0},apf.implement.call(n,apf.Interactive),n.$propHandlers.draggable.call(n,!0),n.$propHandlers.resizable.call(n,!0)},getCurrentElement:function(){return typeof this.last=="number"&&apf.lookup(this.last)},$mousedownHandler:function(e,t){if(!this.last||e&&this.last==e.$uniqueId||!this.cache[this.last])return;var n=t.srcElement||t.target,r=this.last;while(this.cache[r]){if(apf.isChildOf(this.cache[r].content,n,!0))return;if(!this.cache[r].options)return;r=this.cache[r].options.allowTogether}this.forceHide()},forceHide:function(){if(this.last&&!apf.plane.current&&this.isShowing(this.last)&&this.cache[this.last]&&this.cache[this.last].options&&this.cache[this.last].options.autohide!==!1){var e=apf.lookup(this.last);e?e.dispatchEvent("popuphide")!==!1&&this.hide():this.last=null}},destroy:function(){for(var e in this.cache)this.cache[e]&&(this.cache[e].content.onmousedown=null,apf.destroyHtmlNode(this.cache[e].content),this.cache[e].content=null,this.cache[e]=null);if(!this.popup)return}},apf.setStyleRule=function(e,t,n,r,i){e=e.toLowerCase();if(!r){var s=(i||self).document.styleSheets;for(var o=s.length-1;o>=0;o--)try{var u=s[o][apf.styleSheetRules];if(!u)return!1;for(var a=0;a<u.length;a++)if(u.item(a).selectorText&&u.item(a).selectorText.toLowerCase()==e)return u.item(a).style[t]=n,!0}catch(f){}}else{r||(r=(i||self).document.styleSheets[0]);var u=r[apf.styleSheetRules];if(!u)return!1;for(var a=0;a<u.length;a++)if(u.item(a).selectorText&&u.item(a).selectorText.toLowerCase()==e)return u.item(a).style[t]=n,!0}return!1},apf.getStyleRule=function(e,t,n,r){e=e.toLowerCase();if(!n){var i=(r||self).document.styleSheets;for(var s=i.length-1;s>=0;s--)try{var o=i[s][apf.styleSheetRules];for(var u=0;u<o.length;u++)if(o.item(u).selectorText&&o.item(u).selectorText.toLowerCase()==e)return o.item(u).style[t]}catch(a){}}else{var o=(r||self).document.styleSheets[n||0][apf.styleSheetRules];for(var u=0;u<o.length;u++)if(o.item(u).selectorText&&o.item(u).selectorText.toLowerCase()==e)return o.item(u).style[t]}return!1},apf.setStyleClass=function(e,t,n,r){if(!e||r&&this.disabled)return;t&&(n?n[n.length]=t:n=[t]);var i=new RegExp("(^| +)(?:"+(n?n.join("|"):"")+")","gi");return e.className!=null?e.className=e.className.replace(i," ")+(t?" "+t:""):e.setAttribute("class",(e.getAttribute("class")||"").replace(i," ")+(t?" "+t:"")),e},apf.importCssString=function(e,t,n){t=t||document;var r=t.getElementsByTagName("head")[0];if(apf.canCreateStyleNode){var i=t.createElement("style");i.appendChild(t.createTextNode(e)),n&&i.setAttribute("media",n),r.appendChild(i)}else r.insertAdjacentHTML("beforeend",".<style media='"+(n||"all")+"'>"+e+"</style>")},apf.getStyleRecur=function(e,t){var n=apf.hasComputedStyle?document.defaultView.getComputedStyle(e,"").getPropertyValue(t.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})):e.currentStyle[t];return(!n||n=="transparent"||n=="inherit")&&e.parentNode&&e.parentNode.nodeType==1?this.getStyleRecur(e.parentNode,t):n},apf.importStylesheet=function(e,t,n){if(!e.length)return;if(!n){var r=new RegExp("^"+document.domain,"g"),i=(t||window).document;for(var s=document.styleSheets.length-1;s>=0;s--)if(!i.styleSheets[s].href||i.styleSheets[s].href.match(r))break;n=i.styleSheets[s]}n||(n=apf.createStylesheet(t));for(var o=0;o<e.length;o++){if(!e[o][1])continue;if(apf.isIE)n.addRule(e[o][0],e[o][1]);else{var u=e[o][0]+" {"+e[o][1]+"}";try{n.insertRule(u,0)}catch(a){n=newStyleSheet(),n.insertRule(u,0)}}}},apf.createStylesheet=function(e){var t=(e||window).document;if(t.createStyleSheet)return t.createStyleSheet();var n=t.createElement("style");return n.type="text/css",t.getElementsByTagName("head")[0].appendChild(n),n.sheet},apf.isInRect=function(e,t,n){var r=this.getAbsolutePosition(e);return t<r[0]||n<r[1]||t>e.offsetWidth+r[0]-10||n>e.offsetHeight+r[1]-10?!1:!0},apf.getOverflowParent=function(e){e=e.offsetParent;while(e&&(this.getStyle(e,"overflow")!="hidden"||"absolute|relative".indexOf(this.getStyle(e,"position"))==-1))e=e.offsetParent;return e||document.documentElement},apf.getPositionedParent=function(e){e=e.offsetParent;while(e&&e.tagName.toLowerCase()!="body"&&"absolute|relative".indexOf(this.getStyle(e,"position"))==-1)e=e.offsetParent;return e||document.documentElement},apf.getAbsolutePosition=function(e,t,n){if("getBoundingClientRect"in document.documentElement){if(apf.doesNotIncludeMarginInBodyOffset&&e==document.body)return[e.offsetLeft+(parseFloat(apf.getStyle(e,"marginLeft"))||0),+(e.scrollLeft||0),e.offsetTop+(parseFloat(apf.getStyle(e,"marginTop"))||0)+(e.scrollTop||0)];var r=e.getBoundingClientRect(),i=r.top,s=r.left,o=apf.isIE&&apf.isIE<8;if(t&&t!=document.body){var u=apf.getAbsolutePosition(t,null,!0);i-=u[1],s-=u[0]}if(!apf.isIE||e!=document.documentElement)s+=(t||document.body).scrollLeft||document.documentElement.scrollLeft||0,i+=(t||document.body).scrollTop||document.documentElement.scrollTop||0;return n&&!t&&(s+=parseInt(apf.getStyle(e,"borderLeftWidth"))||0,i+=parseInt(apf.getStyle(e,"borderTopWidth"))||0),[s-(o?2:0),i-(o?2:0)]}var a=n?0:e.offsetLeft,f=n?0:e.offsetTop;e=n?e:e.offsetParent||e.parentNode,apf.isIE8&&t&&(l=this.getStyle(e,"borderLeftWidth"),a-=apf.isIE&&e.currentStyle.borderLeftStyle!="none"&&l=="medium"?2:parseInt(l)||0,c=this.getStyle(e,"borderTopWidth"),f-=apf.isIE&&e.currentStyle.borderTopStyle!="none"&&c=="medium"?2:parseInt(c)||0);var l,c,h;while(e&&e!=t){l=apf.isOpera||apf.isIE8?0:this.getStyle(e,"borderLeftWidth"),a+=(apf.isIE&&e.currentStyle.borderLeftStyle!="none"&&l=="medium"?2:parseInt(l)||0)+e.offsetLeft;if(apf.isIE&&!apf.isIE8&&apf.getStyle(e,"styleFloat")=="none"&&apf.getStyle(e,"position")=="relative"){var p=e.previousSibling;while(p){if(p.nodeType==1){h=apf.getStyle(p,"styleFloat");if(h=="left"){a-=parseInt(apf.getStyle(e,"marginLeft"))||0;break}if(h=="right")break}p=p.previousSibling}}c=apf.isOpera||apf.isIE8?0:this.getStyle(e,"borderTopWidth"),f+=(apf.isIE&&e.currentStyle.borderTopStyle!="none"&&c=="medium"?2:parseInt(c)||0)+e.offsetTop,!apf.isGecko&&e!=t&&(e.tagName!="HTML"||e.ownerDocument!=document)&&(a-=e.scrollLeft,f-=e.scrollTop);if(e.tagName.toLowerCase()=="table")f-=parseInt(e.border||0)+parseInt(e.cellSpacing||0),a-=parseInt(e.border||0)+parseInt(e.cellSpacing||0)*2;else if(e.tagName.toLowerCase()=="tr"){var d;f-=d=parseInt(e.parentNode.parentNode.cellSpacing);while(e.previousSibling)f-=(e=e.previousSibling).offsetHeight+d}apf.isIE&&!e.offsetParent&&e.parentNode.nodeType==1&&(a-=e.parentNode.scrollLeft,f-=e.parentNode.scrollTop),e=e.offsetParent}return[a,f]},apf.getHorBorders=function(e){return Math.max(0,(parseInt(apf.getStyle(e,"borderLeftWidth"))||0)+(parseInt(apf.getStyle(e,"borderRightWidth"))||0))},apf.getVerBorders=function(e){return Math.max(0,(parseInt(apf.getStyle(e,"borderTopWidth"))||0)+(parseInt(apf.getStyle(e,"borderBottomWidth"))||0))},apf.getWidthDiff=function(e){return apf.hasFlexibleBox&&apf.getStyle(e,apf.CSSPREFIX+"BoxSizing")!="content-box"?0:Math.max(0,(parseInt(apf.getStyle(e,"paddingLeft"))||0)+(parseInt(apf.getStyle(e,"paddingRight"))||0)+(parseInt(apf.getStyle(e,"borderLeftWidth"))||0)+(parseInt(apf.getStyle(e,"borderRightWidth"))||0))},apf.getHeightDiff=function(e){return apf.hasFlexibleBox&&apf.getStyle(e,apf.CSSPREFIX+"BoxSizing")!="content-box"?0:Math.max(0,(parseInt(apf.getStyle(e,"paddingTop"))||0)+(parseInt(apf.getStyle(e,"paddingBottom"))||0)+(parseInt(apf.getStyle(e,"borderTopWidth"))||0)+(parseInt(apf.getStyle(e,"borderBottomWidth"))||0))},apf.getDiff=function(e){return apf.hasFlexibleBox&&apf.getStyle(e,apf.CSSPREFIX+"BoxSizing")!="content-box"?[0,0]:[Math.max(0,(parseInt(apf.getStyle(e,"paddingLeft"))||0)+(parseInt(apf.getStyle(e,"paddingRight"))||0)+(parseInt(apf.getStyle(e,"borderLeftWidth"))||0)+(parseInt(apf.getStyle(e,"borderRightWidth"))||0)),Math.max(0,(parseInt(apf.getStyle(e,"paddingTop"))||0)+(parseInt(apf.getStyle(e,"paddingBottom"))||0)+(parseInt(apf.getStyle(e,"borderTopWidth"))||0)+(parseInt(apf.getStyle(e,"borderBottomWidth"))||0))]},apf.getMargin=function(e){return[(parseInt(apf.getStyle(e,"marginLeft"))||0)+(parseInt(apf.getStyle(e,"marginRight"))||0),(parseInt(apf.getStyle(e,"marginTop"))||0)+(parseInt(apf.getStyle(e,"marginBottom"))||0)]},apf.getHtmlInnerWidth=function(e){return e.offsetWidth-(parseInt(apf.getStyle(e,"borderLeftWidth"))||0)-(parseInt(apf.getStyle(e,"borderRightWidth"))||0)},apf.getHtmlInnerHeight=function(e){return e.offsetHeight-(parseInt(apf.getStyle(e,"borderTopWidth"))||0)-(parseInt(apf.getStyle(e,"borderBottomWidth"))||0)},apf.getViewPort=function(e){e=e||window;var t=!e.document.compatMode||e.document.compatMode=="CSS1Compat"?e.document.html||e.document.documentElement:e.document.body;return{x:e.pageXOffset||t.scrollLeft,y:e.pageYOffset||t.scrollTop,width:e.innerWidth||t.clientWidth,height:e.innerHeight||t.clientHeight}},apf.pasteWindow=function(e){var t=window.open("about:blank");t.document.write(e)},apf.htmlentities=function(e){return e.escapeHTML()},apf.xmlentities=apf.escapeXML,apf.html_entity_decode=function(e){return(e||"").replace(/\&\#38;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," ")},apf.isCharacter=function(e){return(e<112||e>122)&&(e==32||e>42||e==8)},apf.randomGenerator={d:new Date,seed:null,A:48271,M:2147483647,Q:null,R:null,oneOverM:null,generate:function(e,t){return this.seed==null&&(this.seed=2345678901+this.d.getSeconds()*16777215+this.d.getMinutes()*65535),this.Q=this.M/this.A,this.R=this.M%this.A,this.oneOverM=1/this.M,Math.floor((t-e+1)*this.next()+e)},next:function(){var e=this.seed/this.Q,t=this.seed%this.Q,n=this.A*t-this.R*e;return n>0?this.seed=n:this.seed=n+this.M,this.seed*this.oneOverM}},apf.getNoCacheUrl=function(e){return e+(e.indexOf("?")==-1?"?":"&")+"nocache="+(new Date).getTime()},apf.parseExpression=function(str){return apf.parseExpression.regexp.test(str)?eval(RegExp.$1):str},apf.parseExpression.regexp=/^\{([\s\S]*)\}$/,apf.formatNumber=function(e,t){var n=parseFloat(e);if(!n)return e;var r=(new String(Math.round(n*100)/100)).replace(/(\.\d?\d?)$/,function(e){return e.pad(3,"0",apf.PAD_RIGHT)});return r.indexOf(".")==-1&&(r+=".00"),t+r},apf.jsexec=function(str,win){if(!str)return str;win||(win=self);if(apf.isO3)eval(str,self);else if(apf.hasExecScript)win.execScript(str);else{var head=win.document.getElementsByTagName("head")[0];if(head){var script=win.document.createElement("script");script.setAttribute("type","text/javascript"),script.text=str,head.appendChild(script),head.removeChild(script)}else eval(str,win)}return str},apf.K=function(){},apf.isNumber=function(e){return parseFloat(e)==e},apf.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},apf.isTrue=function(e){return e===!0||e==="true"||e==="on"||typeof e=="number"&&e>0||e==="1"},apf.isFalse=function(e){return e===!1||e==="false"||e==="off"||e===0||e==="0"},apf.isNot=function(e){return!e&&typeof e!="string"&&e!==0||typeof e=="number"&&!isFinite(e)},apf.removePathContext=function(e,t){return t?t.indexOf(e)>-1?t.substr(e.length):t:""},apf.cancelBubble=function(e,t,n){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,n||(t&&t.$ext&&t.$ext["on"+(e.type||e.name)]&&t.$ext["on"+(e.type||e.name)](e),apf.window.$mousedown(e))},apf.destroyHtmlNode=function(e){if(!e)return;if(!apf.isIE||e.ownerDocument!=document){e.parentNode&&e.parentNode.removeChild(e);return}var t=document.getElementById("IELeakGarbageBin");t||(t=document.createElement("DIV"),t.id="IELeakGarbageBin",t.style.display="none",document.body.appendChild(t)),t.appendChild(e),t.innerHTML=""},apf.getRules=function(e){var t={};for(var n=e.firstChild;n;n=n.nextSibling){if(n.nodeType!=1)continue;t[n[apf.TAGNAME]]||(t[n[apf.TAGNAME]]=[]),t[n[apf.TAGNAME]].push(n)}return t},apf.isCoord=function(e){return e||e===0},apf.getCoord=function(e,t){return e||e===0?e:t},apf.getBox=function(e,t){t||(t=0);if(e==null||!parseInt(e)&&parseInt(e)!=0)return[0,0,0,0];var n=String(e).splitSafe(" ");for(var r=0;r<n.length;r++)n[r]=parseInt(n[r])||0;switch(n.length){case 1:n[1]=n[0],n[2]=n[0],n[3]=n[0];break;case 2:n[2]=n[0],n[3]=n[1];break;case 3:n[3]=n[1]}return n},apf.getNode=function(e,t){var n=0;if(e!=null)for(var r=0;r<e.childNodes.length;r++)if(e.childNodes[r].nodeType==1){if(n==t[0])return e=e.childNodes[r],t.length>1&&(t.shift(),e=this.getNode(e,t)),e;n++}return null},apf.getFirstElement=function(e){return e.firstChild.nodeType==1?e.firstChild:e.firstChild.nextSibling},apf.getLastElement=function(e){return e.lastChild.nodeType==1?e.lastChild:e.lastChild.previousSibling},apf.selectTextHtml=function(e){if(!apf.hasMsRangeObject)return;var t=document.selection.createRange();try{t.moveToElementText(e)}catch(n){}t.select()},apf.visibilitymanager=function(){var e={},t=this,n=!1;this.check=function(e,t,n){function r(n){var r=e;while(r)r.removeEventListener("prop.visible",i),r.removeEventListener("DOMNodeRemoved",s),r.removeEventListener("DOMNodeRemovedFromDocument",s),n&&r.addEventListener("DOMNodeInserted",o),r=r.parentNode||r.$parentNode;delete e.$visibleCheck[t]}function i(t){if(!e.$ext.offsetHeight&&!e.$ext.offsetWidth)return;n.call(e),r()}function s(e){if(e.currentTarget!=this)return;r(e.name=="DOMNodeRemoved")}function o(){var n=e;while(n)n.addEventListener("prop.visible",i),n.addEventListener("DOMNodeRemoved",s),n.addEventListener("DOMNodeRemovedFromDocument",s),n.removeEventListener("DOMNodeInserted",o),n=n.parentNode||n.$parentNode;e.$visibleCheck[t]=!0}if(e.$ext.offsetHeight||e.$ext.offsetWidth)return!0;if(e.$visibleCheck){if(e.$visibleCheck[t])return}else e.$visibleCheck={};return o(),!1},this.permanent=function(e,t,n){function i(i){var s=e.$ext&&(e.$ext.offsetHeight||e.$ext.offsetWidth);if(s==r)return;s?t():n(),r=s}function s(t){var n=e;while(n)n.removeEventListener("prop.visible",i),n.removeEventListener("DOMNodeRemoved",o),n.removeEventListener("DOMNodeRemovedFromDocument",o),t&&n.addEventListener("DOMNodeInserted",u),n=n.parentNode||n.$parentNode;i()}function o(e){if(e.currentTarget!=this)return;s(e.name=="DOMNodeRemoved")}function u(){var t=e;while(t)t.addEventListener("prop.visible",i),t.addEventListener("DOMNodeRemoved",o),t.addEventListener("DOMNodeRemovedFromDocument",o),t.removeEventListener("DOMNodeInserted",u),t=t.parentNode||t.$parentNode;i()}var r=e.$ext&&(e.$ext.offsetHeight||e.$ext.offsetWidth);return u(),r},this.removePermanent=function(e){}},apf.isChildOf=function(e,t,n){if(!e||!t)return!1;t.nodeType==2&&(t=t.ownerElement||t.selectSingleNode(".."));if(n&&e==t)return!0;var r=t.parentNode;while(r){if(r==e)return!0;r=r.parentNode}return!1},apf.xmlEntityMap={quot:"34",amp:"38",apos:"39",lt:"60",gt:"62",nbsp:"160",iexcl:"161",cent:"162",pound:"163",curren:"164",yen:"165",brvbar:"166",sect:"167",uml:"168",copy:"169",ordf:"170",laquo:"171",not:"172",shy:"173",reg:"174",macr:"175",deg:"176",plusmn:"177",sup2:"178",sup3:"179",acute:"180",micro:"181",para:"182",middot:"183",cedil:"184",sup1:"185",ordm:"186",raquo:"187",frac14:"188",frac12:"189",frac34:"190",iquest:"191",agrave:["192","224"],aacute:["193","225"],acirc:["194","226"],atilde:["195","227"],auml:["196","228"],aring:["197","229"],aelig:["198","230"],ccedil:["199","231"],egrave:["200","232"],eacute:["201","233"],ecirc:["202","234"],euml:["203","235"],igrave:["204","236"],iacute:["205","237"],icirc:["206","238"],iuml:["207","239"],eth:["208","240"],ntilde:["209","241"],ograve:["210","242"],oacute:["211","243"],ocirc:["212","244"],otilde:["213","245"],ouml:["214","246"],times:"215",oslash:["216","248"],ugrave:["217","249"],uacute:["218","250"],ucirc:["219","251"],uuml:["220","252"],yacute:["221","253"],thorn:["222","254"],szlig:"223",divide:"247",yuml:["255","376"],oelig:["338","339"],scaron:["352","353"],fnof:"402",circ:"710",tilde:"732",alpha:["913","945"],beta:["914","946"],gamma:["915","947"],delta:["916","948"],epsilon:["917","949"],zeta:["918","950"],eta:["919","951"],theta:["920","952"],iota:["921","953"],kappa:["922","954"],lambda:["923","955"],mu:["924","956"],nu:["925","957"],xi:["926","958"],omicron:["927","959"],pi:["928","960"],rho:["929","961"],sigma:["931","963"],tau:["932","964"],upsilon:["933","965"],phi:["934","966"],chi:["935","967"],psi:["936","968"],omega:["937","969"],sigmaf:"962",thetasym:"977",upsih:"978",piv:"982",ensp:"8194",emsp:"8195",thinsp:"8201",zwnj:"8204",zwj:"8205",lrm:"8206",rlm:"8207",ndash:"8211",mdash:"8212",lsquo:"8216",rsquo:"8217",sbquo:"8218",ldquo:"8220",rdquo:"8221",bdquo:"8222",dagger:["8224","8225"],bull:"8226",hellip:"8230",permil:"8240",prime:["8242","8243"],lsaquo:"8249",rsaquo:"8250",oline:"8254",frasl:"8260",euro:"8364",image:"8465",weierp:"8472",real:"8476",trade:"8482",alefsym:"8501",larr:["8592","8656"],uarr:["8593","8657"],rarr:["8594","8658"],darr:["8595","8659"],harr:["8596","8660"],crarr:"8629",forall:"8704",part:"8706",exist:"8707",empty:"8709",nabla:"8711",isin:"8712",notin:"8713",ni:"8715",prod:"8719",sum:"8721",minus:"8722",lowast:"8727",radic:"8730",prop:"8733",infin:"8734",ang:"8736",and:"8743",or:"8744",cap:"8745",cup:"8746","int":"8747",there4:"8756",sim:"8764",cong:"8773",asymp:"8776",ne:"8800",equiv:"8801",le:"8804",ge:"8805",sub:"8834",sup:"8835",nsub:"8836",sube:"8838",supe:"8839",oplus:"8853",otimes:"8855",perp:"8869",sdot:"8901",lceil:"8968",rceil:"8969",lfloor:"8970",rfloor:"8971",lang:"9001",rang:"9002",loz:"9674",spades:"9824",clubs:"9827",hearts:"9829",diams:"9830"},apf.escapeXML=function(e,t){if(typeof e!="string")return e;t?e=(e||"").replace(/&/g,"&#38;"):e=(e||"").replace(/&(?!#[0-9]{2,5};|[a-zA-Z]{2,};)/g,"&#38;");var n=apf.xmlEntityMap,r=apf.isArray;return e.replace(/"/g,"&#34;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/'/g,"&#39;").replace(/&([a-zA-Z]+);/gi,function(e,t){var i=n[t.toLowerCase()];return i?"&#"+(r(i)?i[0]:i)+";":e})},apf.unescapeXML=function(e){if(typeof e!="string")return e;var t=apf.xmlEntityMapReverse,n=apf.isArray;if(!t){t=apf.xmlEntityMapReverse={};var r=apf.xmlEntityMap,i=Object.keys(r);for(var s,o,u,a=0,f=i.length;a<f;++a){s=r[i[a]];if(n(s))for(o=0,u=s.length;o<u;++o)t[s[o]]=i[a];else t[s]=i[a]}}return e.replace(/&#([0-9]{2,5});/g,function(e,n){var r=t[n];return r?"&"+r+";":e}).replace(/&apos;/gi,"'").replace(/&gt;/gi,">").replace(/&lt;/gi,"<").replace(/&quot;/gi,'"').replace(/&amp;/gi,"&")},apf.isOnlyChild=function(e,t){if(!e||!e.parentNode||t&&t.indexOf(e.nodeType)==-1)return!1;var n,r,i,s=e.parentNode.childNodes;for(n=0,r=s.length;n<r;n++){i=s[n];if(i.nodeType==1&&i!=e)return!1;if(i.nodeType==3&&!i.nodeValue.trim())return!1}return!0},apf.getChildNumber=function(e,t){if(!e)return-1;var n=e.parentNode,r=0;if(!n)return-1;t||(t=n.childNodes);if(t.indexOf){var i=t.indexOf(e);return i==-1?t.length:i}for(var s=0,o=t.length;s<o;s++){if(t[s]==e)return r;r++}return-1},apf.mergeXml=function(e,t,n){typeof t!="object"&&(t=apf.xmldb.getElementById(t));if(n&&n.clearContents){var r,i,s,o=t.selectNodes("descendant::node()[@"+apf.xmldb.xmlListenTag+"]");for(s=o.length-1;s>=0;s--){var u=o[s].getAttribute(apf.xmldb.xmlListenTag).split(";");for(i=u.length-1;i>=0;i--){r=apf.all[u[i]];if(!r)continue;r.dataParent&&r.dataParent.xpath?r.dataParent.parent.signalXmlUpdate[r.$uniqueId]=!0:r.$model&&r.$model.$waitForXml(r)}}o=t.childNodes;for(s=o.length-1;s>=0;s--)t.removeChild(o[s])}if(n&&n.start){var a,f,o,l,s,c,h=n.marker;!h;if(h.getAttribute("start")-n.start==0)h.setAttribute("start",n.start+n.length),a=parseInt(h.getAttribute("reserved"),10),h.setAttribute("reserved",a+n.length),f=h;else if(n.start+n.length==h.getAttribute("end"))h.setAttribute("end",n.start+n.length),f=h.nextSibling,a=parseInt(h.getAttribute("reserved"),10)+parseInt(h.getAttribute("end"),10)-n.length;else{var p=h.parentNode.insertBefore(h.cloneNode(!0),h);p.setAttribute("end",n.start-1),h.setAttribute("start",n.start+n.length),a=parseInt(h.getAttribute("reserved"),10),h.setAttribute("reserved",a+n.length),f=h}o=e.childNodes;if(t.ownerDocument.importNode){l=t.ownerDocument;for(s=0,c=o.length;s<c;s++)t.insertBefore(l.importNode(o[s],!0),f).setAttribute(apf.xmldb.xmlIdTag,n.documentId+"|"+(a+s))}else for(s=o.length-1;s>=0;s--)t.insertBefore(o[0],f).setAttribute(apf.xmldb.xmlIdTag,n.documentId+"|"+(a+s))}else{f=n&&n.beforeNode?n.beforeNode:apf.getNode(t,[0]),o=e.childNodes,n.filter&&(o=n.filter(t,o));if(t.ownerDocument.importNode){l=t.ownerDocument;for(s=0,c=o.length;s<c;s++)t.insertBefore(l.importNode(o[s],!0),f)}else for(s=o.length-1;s>=0;s--)t.insertBefore(o[0],f)}if(n&&n.copyAttributes){var d=e.attributes;for(s=0;s<d.length;s++)d[s].nodeName!=apf.xmldb.xmlIdTag&&t.setAttribute(d[s].nodeName,d[s].nodeValue)}return t},apf.setNodeValue=function(e,t,n,r){if(!e)return;var i,s,o;r&&(i=r.undoObj,s=r.xpath,o=r.newNodes,i.extra.oldValue=r.forceNew?"":apf.queryValue(e,s),i.xmlNode=e,s&&(e=apf.createNodeFromXpath(e,s,o,r.forceNew)),i.extra.appliedNode=e);if(e.nodeType==1)e.firstChild||e.appendChild(e.ownerDocument.createTextNode("")),e.firstChild.nodeValue=apf.isNot(t)?"":t,n&&apf.xmldb.applyChanges("text",e,i);else{apf.isO3&&e.nodeType==2&&(t=t.replace(/&/g,"&amp;"));var u=e.nodeValue;e.nodeValue=t===undefined||t===null||t==NaN?"":String(t),i&&(i.name=e.nodeName),e.$triggerUpdate&&e.$triggerUpdate(null,u),n&&apf.xmldb.applyChanges(e.nodeType==2?"attribute":"text",e.parentNode||e.ownerElement||e.selectSingleNode(".."),i)}if(n){var a;if(s){var a=i.xmlNode;a.nodeType==9&&(a=a.documentElement,s=s.replace(/^[^\/]*\//,""))}else a=e;apf.xmldb.applyRDB(["setValueByXpath",a,t,s,r&&r.forceNew],i||{xmlNode:e})}},apf.setQueryValue=function(e,t,n,r){var i=apf.createNodeFromXpath(e,t);return i?(apf.setNodeValue(i,n,!r),i):null},apf.removeQueryNode=function(e,t,n){var r=apf.queryNode(e,t);return r?(n?r.parentNode.removeChild(r):apf.xmldb.removeNode(r),r):!1},apf.queryValue=function(e,t){if(!e)return"";if(e.nodeType==2)return e.nodeValue;if(t){e=e.selectSingleNode(t);if(!e)return""}return e.nodeType==1?e.firstChild?e.firstChild.nodeValue:"":e.nodeValue},apf.queryValues=function(e,t){var n=[];if(!e)return n;var r=e.selectNodes(t);if(!r.length)return n;for(var i=0;i<r.length;i++){var s=r[i];s.nodeType==1&&(s=s.firstChild),n.push(s.nodeValue||"")}return n},apf.queryNodes=function(e,t){return e&&(apf.hasXPathHtmlSupport&&e.selectSingleNode||!e.style)?e.selectNodes(t):apf.XPath.selectNodes(t,e)},apf.queryNode=function(e,t){if(e&&(apf.hasXPathHtmlSupport&&e.selectSingleNode||!e.style))return e.selectSingleNode(t);var n=apf.queryNodes(e?e:null,t+(apf.isIE?"":"[1]"));return n.length>0?n[0]:null},apf.getInheritedAttribute=function(e,t,n){var r,i;e.nodeType!=1&&(e=e.parentNode);while(e&&(e.nodeType!=1||!(r=t&&((i=e.getAttribute(t))||typeof i=="string")||n&&n(e))))e=e.parentNode;return i===""?"":!r&&t&&apf.config?apf.config[t]:r},apf.createNodeFromXpath=function(e,t,n,r){var i,s="",o=t.replace(/('.*?')|(".*?")|\|/g,function(e,t,n){return t||n?t||n:"-%-|-%-"}).split("-%-|-%-")[0].split(/\/(?!\/)/);if(!r&&(i=e.selectSingleNode(t)))return i;var u=o.length-1;r&&o[u].trim().match(/^\@(.*)$|^text\(\)$/)&&u--,o[0]||(e=e.ownerDocument.documentElement,o.shift(),o.shift(),u--,u--);for(var a,f=!1,l=0;l<u;l++){if(!f&&e.selectSingleNode(s+(l!=0?"/":"")+o[l])){s+=(l!=0?"/":"")+o[l];continue}var c=o[l].match(/(\w+)\[@([\w-]+)=(\w+)\]/);c&&(o[l]=c[1]),f=!0,a=e.selectSingleNode(s||".").appendChild(e.ownerDocument.createElement(o[l])),c?(a.setAttribute(c[2],c[3]),s+=(s?"/":"")+c[0]):s+=(s?"/":"")+o[l],n&&n.push(a)}s||(s="."),n&&(n.foundpath=s);var h,p=o[u],d=e.nodeType==9?e:e.ownerDocument;do{if(p.match(/^\@(.*)$/))(h||e.selectSingleNode(s)).setAttributeNode(h=d.createAttribute(RegExp.$1));else if(p.trim()=="text()")h=(h||e.selectSingleNode(s)).appendChild(d.createTextNode(""));else{var v=p.match(/(\w+)\[@([\w-]+)=(\w+)\]/);v&&(p=v[1]),h=(h||e.selectSingleNode(s)).appendChild(d.createElement(p)),v&&h.setAttribute(v[2],v[3])}n&&n.push(h),s+=(s?"/":"")+o[u]}while(p=o[++u]);return h},apf.convertMethods={json:function(e){return JSON.stringify(apf.xml2json(e))},cgivars:function(e,t){t||(t="");var n,r,i,s,o,u=[],a=e.childNodes,f={},l=0,c=a.length;for(;l<c;++l){if(a[l].nodeType!=1)continue;r=a[l].tagName;if(f[r])continue;i=e.selectNodes(r);if(i.length>1){f[r]=!0;for(s=0,o=i.length;s<o;s++)n=this.cgivars(i[s],t+r+"["+s+"]"),n&&u.push(n)}else n=this.cgivars(a[l],t+r),n&&u.push(n)}var h=e.attributes;for(l=0,c=h.length;l<c;l++)h[l].nodeValue&&(t?u.push(t+"["+h[l].nodeName+"]="+escape(h[l].nodeValue)):u.push(h[l].nodeName+"="+escape(h[l].nodeValue)));return u.length?u.join("&"):(n=apf.queryValue(e,"text()"),t&&n?t+"="+escape(n):"")},cgiobjects:function(e,t,n,r){t||(t="");var i,s,o,u,a,f,l,c,h,p=e.childNodes,d=[],v={},m="";for(a=0;a<p.length;a++){i=p[a];if(i.nodeType==1){s=i.tagName,h=i.parentNode.selectNodes(s).length==1?!0:!1,typeof v[s]=="undefined"&&(v[s]=0),m=t+(n?"[":"")+s+(n?"]":"")+(h?"":"["+v[s]+"]"),l=i.attributes,c=i.attributes.length;if(c>0)for(f=0;f<c;f++){if(!(u=l[f]).nodeValue)continue;d.push(m+"[_"+u.nodeName+"]="+escape(u.nodeValue.trim()))}o=this.cgiobjects(i,m,!0),o.dataType!==1?d.push(o):i.firstChild&&i.firstChild.nodeValue.trim()?d.push(m+(c>0?"[_]=":"=")+escape(i.firstChild.nodeValue.trim())):c==0&&r&&d.push(m),v[s]++}else if(i.nodeType==3&&n){var g=i.nodeValue;g&&g.trim()!==""&&d.push(t+"="+escape(g))}}return!n&&e.getAttribute("id")&&d.push("id="+escape(e.getAttribute("id"))),d.length?d.join("&"):d}},apf.convertXml=function(e,t){return apf.convertMethods[t](e)},apf.getTextNode=function(e){for(var t=0,n=e.childNodes.length;t<n;++t)if(e.childNodes[t].nodeType==3||e.childNodes[t].nodeType==4)return e.childNodes[t];return!1},apf.getBoundValue=function(e,t,n){if(!t&&!e.xmlRoot)return"";var r=e.$getDataNode("value",e.xmlRoot);return r?apf.queryValue(r):""},apf.getArrayFromNodelist=function(e){for(var t=[],n=0,r=e.length;n<r;++n)t.push(e[n]);return t},apf.serializeChildren=function(e){var t,n=[],r=e.childNodes,i=0,s=r.length;for(;i<s;++i)n[i]=(t=r[i]).nodeType==1?t.xml||t.serialize():t.nodeType==8?"":t.nodeValue;return n.join("")},apf.getXmlString=function(e){var t=apf.xmldb.cleanNode(e.cloneNode(!0));return t.xml||t.serialize()},apf.getXml=function(e,t,n){return apf.getXmlDom(e,t,n).documentElement},apf.formatXml=function(e){e=e.trim();var t=e.split("\n"),n=0,r=0,i=t.length;for(;r<i;++r)t[r]=t[r].trim();t=t.join("\n").replace(/\>\n/g,">").replace(/\>/g,">\n").replace(/\n\</g,"<").replace(/\</g,"\n<").split("\n"),t.removeIndex(0),t.removeIndex(t.length);for(r=0,i=t.length;r<i;r++)t[r]="    ".repeat(t[r].match(/^\s*\<\//)?n==0?0:--n:t[r].match(/^\s*\<[^\?][^>]+[^\/]\>/)?n++:n)+t[r];return e?t.join("\n"):""},apf.xmlToXpath=function(e,t,n){if(!e)return"";if(n===!0&&e.nodeType==1&&e.getAttribute(apf.xmldb.xmlIdTag))return"//node()[@"+apf.xmldb.xmlIdTag+"='"+e.getAttribute(apf.xmldb.xmlIdTag)+"']";if(apf!=this&&this.lookup&&this.select){var r,i=this.lookup[e.tagName];if(i)return r=e.selectSingleNode(i).nodeValue,"//"+e.tagName+"["+i+"='"+r+"']";for(var s=0,o=this.select.length;s<o;s++)if(e.selectSingleNode(this.select[s][0]))return r=e.selectSingleNode(this.select[s][1]).nodeValue,"//"+this.select[s][0]+"["+this.select[s][1]+"='"+r+"']"}if(e==t)return".";if(e.nodeType!=2&&!e.parentNode&&!e.ownerElement)return!1;var u=[],a=e;a.nodeType==2&&(u.push("@"+a.nodeName),a=a.ownerElement||e.selectSingleNode(".."));var f;while(a&&a.nodeType==1){if(a==t)break;u.unshift((a.nodeType==1?a.tagName:"text()")+"["+(n&&(f=a.nodeType==1&&a.getAttribute(apf.xmldb.xmlIdTag))?"@"+apf.xmldb.xmlIdTag+"='"+f+"'":apf.getChildNumber(a,a.parentNode.selectNodes(a.nodeType==1?a.tagName:"text()"))+1)+"]"),a=a.parentNode}return(u[0]=="/"||t&&t.nodeType==1?"":"/")+u.join("/")},apf.xpathToXml=function(e,t){return t?t.selectSingleNode(e):!1},apf.n=function(e,t){return new apf.xmlset(e,t,!0)},apf.b=function(e,t){return new apf.xmlset(e,t)},apf.b.$queue=[],apf.b.$state=0,apf.xmlset=function(e,t,n,r){typeof e=="string"&&(e=apf.getXml(e)),this.$xml=e,e&&(this.$nodes=e.dataType==apf.ARRAY?e:t?e.selectNodes(t):[e]),this.$xpath=t||".",this.$local=n,this.$previous=r},function(){this.add=function(){},this.begin=function(){return apf.b.$state=1,this},this.commit=function(e,t,n){if(apf.b.$queue.length){if(t){var r=this;t.addEventListener("rdbsend",function(e){if(!n||e.uri==n)r.rdbstack=e.message,t.removeEventListener("rdbsend",arguments.callee)})}e.execute({action:"multicall",args:apf.b.$queue}),t&&t.$processQueue(t)}return apf.b.$queue=[],apf.b.$state=0,this},this.rollback=function(){return apf.b.$queue=[],apf.b.$state=0,this},this.getRDBMessage=function(){return this.rdbstack||[]},this.before=function(e){e=typeof e=="function"?e(n):e;for(var t,n=0,r=this.$nodes.length;n<r;n++)t=this.$nodes[n],this.$local?t.parentNode.insertBefore(e,t):apf.xmldb.appendChild(t.parentNode,e,t);return this},this.after=function(e){e=typeof e=="function"?e(n):e;for(var t,n=0,r=this.$nodes.length;n<r;n++)t=this.$nodes[n],this.$local?t.parentNode.insertBefore(e,t.nextSibling):apf.xmldb.appendChild(t.parentNode,e,t.nextSibling);return this},this.andSelf=function(){},this.append=function(e){for(var t,n,r=0,i=this.$nodes.length;r<i;r++)t=this.$nodes[r],n=typeof e=="function"?e(r,t):e,apf.b.$state?apf.b.$queue.push({action:"appendChild",args:[t,n]}):this.$local?t.appendChild(n):apf.xmldb.appendChild(t,n);return this},this.appendTo=function(e){for(var t=0,n=this.$nodes.length;t<n;t++)e.appendChild(this.$nodes[t]);return this},this.prepend=function(e){for(var t,n=0,r=this.$nodes.length;n<r;n++)t=this.$nodes[n],t.insertBefore(typeof e=="function"?e(n,t):e,t.firstChild);return this},this.prependTo=function(e){for(var t=0,n=this.$nodes.length;t<n;t++)e.insertBefore(this.$nodes[t],e.firstChild);return this},this.attr=function(e,t){if(arguments.length===1)return this.$nodes&&this.$nodes[0]&&this.$nodes[0].getAttribute(e)||"";for(var n=0,r=this.$nodes.length;n<r;n++)apf.b.$state?apf.b.$queue.push({action:"setAttribute",args:[this.$nodes[n],e,t]}):this.$local?this.$nodes[n].setAttribute(e,t):apf.xmldb.setAttribute(this.$nodes[n],e,t);return this},this.removeAttr=function(e){for(var t=0,n=this.$nodes.length;t<n;t++)apf.b.$state?apf.b.$queue.push({action:"removeAttribute",args:[this.$nodes[t],e]}):this.$local?this.$nodes[t].removeAttribute(e):apf.xmldb.removeAttribute(this.$nodes[t],e);return this},this.xml=function(){var e=[];for(var t=0,n=this.$nodes.length;t<n;t++)e.push(this.$nodes[t].xml);return e.join("\n")},this.get=this.index=function(e){return e=e||0,apf.getChildNumber(this.$nodes[e],this.$nodes[e].parentNode.getElementsByTagName("*"))},this.eq=function(e){return e<0?this.$nodes[this.$nodes.length-e]:this.$nodes[e]},this.size=this.length=function(){return this.$nodes.length},this.load=function(e){},this.next=function(e){return e||(e="node()[local-name()]"),new apf.xmlset(this.$xml,"((following-sibling::"+(this.$xpath=="."?"node()":this.$xpath)+")[1])[self::"+e.split("|").join("|self::")+"]",this.$local,this)},this.nextAll=function(e){return e||(e="node()[local-name()]"),new apf.xmlset(this.$xml,"(following-sibling::"+(this.$xpath=="."?"node()":this.$xpath)+")[self::"+e.split("|").join("|self::")+"]",this.$local,this)},this.nextUntil=function(){},this.prev=function(e){return e||(e="node()[local-name()]"),new apf.xmlset(this.$xml,"((preceding-sibling::"+(this.$xpath=="."?"node()":this.$xpath)+")[1])[self::"+e.split("|").join("|self::")+"]",this.$local,this)},this.prevAll=function(e){return e||(e="node()[local-name()]"),new apf.xmlset(this.$xml,"(preceding-sibling::"+(this.$xpath=="."?"node()":this.$xpath)+")[self::"+e.split("|").join("|self::")+"]",this.$local,this)},this.not=function(){},this.parent=function(e){return new apf.xmlset(this.$xml.parentNode,this.$local,this)},this.parents=function(e){},this.pushStack=function(){},this.replaceAll=function(){},this.replaceWith=function(e){for(var t,n,r=0,i=this.$nodes.length;r<i;r++)t=this.$nodes[r],n=typeof e=="function"?e(r,t):e,apf.b.$state?apf.b.$queue.push({action:"replaceNode",args:[n,t]}):this.$local?t.parentNode.replaceChild(n,t):apf.xmldb.replaceNode(n,t);return this},this.siblings=function(e){},this.text=function(){},this.toArray=function(){var e=[];for(var t=0,n=this.$nodes.length;t<n;t++)e.push(this.$nodes[t]);return e},this.detach=function(e){var t=[];for(var n,r=0,i=this.$nodes.length;r<i;r++){n=this.$nodes[r];if(!n.selectSingleNode("self::node()["+e+"]"))continue;apf.b.$state?apf.b.$queue.push({action:"removeNode",args:[n]}):this.$local?n.parentNode.removeChild(n):apf.xmldb.removeNode(n),t.push(n)}return new apf.xmlset(t,"",this.$local,this)},this.remove=function(e){for(var t,n=this.$nodes,r=n.length-1;r>=0;r--){t=n[r];if(e&&!t.selectSingleNode("self::node()["+e+"]"))continue;apf.b.$state?apf.b.$queue.push({action:"removeNode",args:[t]}):this.$local?t.parentNode.removeChild(t):apf.xmldb.removeNode(t)}return this},this.children=function(e){var t=[];for(var n,r=0,i=this.$nodes.length;r<i;r++){var s=(n=this.$nodes[r]).selectNodes(e);for(var o=0,u=s.length;o<u;o++)t.push(s[o])}return new apf.xmlset(t,null,this.$local,this)},this.children2=function(e){return new apf.xmlset(this.$xml,"("+this.$xpath+")/node()[self::"+e.split("|").join("|self::")+"]",this.$local,this)},this.has=this.find=function(e){return new apf.xmlset(this.$xml,"("+this.$xpath+")//"+e.split("|").join("|self::"),this.$local,this)},this.query=function(e){return new apf.xmlset(this.$xml,"("+this.$xpath+")/"+e.split("|").join("|("+this.$xpath+")/"),this.$local,this)},this.filter=function(e){var t=[];for(var n=0,r=this.$nodes.length;n<r;n++)this.$nodes[n].selectSingleNode("self::node()["+e+"]")&&t.push(this.$nodes[n]);return new apf.xmlset(t,null,this.$local,this)},this.end=function(){return this.$previous||this},this.is=function(e){return this.filter(e)?!0:!1},this.contents=function(){return this.children("node()")},this.has=function(){},this.val=function(e){return arguments.length?(apf.setQueryValue(this.$xml,this.$xpath,e),this):apf.queryValue(this.$xml,this.$xpath)},this.vals=function(){return apf.queryValues(this.$xml,this.$xpath)},this.node=function(){return apf.queryNode(this.$xml,this.$xpath)},this.nodes=function(){return apf.queryNodes(this.$xml,this.$xpath)},this.clone=function(e){if(this.$nodes.length==1)return new apf.xmlset(this.$nodes[0].cloneNode(!0),"",this.$local,this);var t=[];for(var n=0,r=this.$nodes.length;n<r;n++)t.push(this.$nodes[n].cloneNode(e==undefined?!0:e));return new apf.xmlset(t,"",this.$local,this)},this.context=function(){return this.$xml},this.data=function(e){for(var t=0,n=this.$nodes.length;t<n;t++)apf.setQueryValue(this.$nodes[t],".",e);return this},this.each=function(e){for(var t=0,n=this.$nodes.length;t<n;t++)e.call(this.$nodes[t],t);return this},this.eachrev=function(e){for(var t=this.$nodes.length-1;t>=0;t--)e.call(this.$nodes[t],t);return this},this.map=function(e){var t=[];for(var n=0,r=this.$nodes.length;n<r;n++)t.push(e(this.$nodes[n]));return new apf.xmlset(t,"",this.$local,this)},this.empty=function(){return this.children().detach(),this},this.first=function(){return new apf.xmlset(this.$xml,"("+this.$xpath+")[1]",this.$local,this)},this.last=function(){return new apf.xmlset(this.$xml,"("+this.$xpath+")[last()]",this.$local,this)}}.call(apf.xmlset.prototype),apf.zmanager=function(){var e={"default":{level:10},plane:{level:1e5},popup:{level:2e5},notifier:{level:3e5},drag:{level:4e5},print:{level:1e6}};this.set=function(t,n,r){n.style.zIndex=e[t].level++,r&&(r.$storedZ=r.style.zIndex,r.style.zIndex=e[t].level++)},this.clear=function(e,t){t.style.zIndex==parseInt(e.style.zIndex)+1&&(t.style.zIndex=t.$storedZ),t.$storedZ=undefined}},apf.history={inited:!1,page:null,past:[],future:[],delay:1,init:function(e,t,n){function s(){r=apf.dispatchEvent("hashinit")||location.href.match(/#(.*)$/)&&decodeURI(RegExp.$1)||apf._GET[t||-1]||e,location.hash=r,i.hasChanged(r||null)}if(this.inited||window.history.pushState)return;n&&(this.delay=n),this.inited=!0;var r,i=this;if(apf.supportHashChange)$setTimeout(function(){s(),window.onhashchange=function(){var e=location.hash.replace("#","");apf.history.hasChanged(decodeURI(e))}});else if(apf.isIE){s();var o="<style>                    BODY, HTML{margin:0}                    h1{height:100px; margin:0; padding:0; overflow:hidden}                </style>                <body>                    <h1 id='"+r+"'>0</h1>                </body>                <script>                    var lastURL = -1;                    if (document.all)                        document.body.onscroll = checkUrl;                    else                        setInterval('checkUrl()', 200);                                        function checkUrl(){                        var iScr = (document.all ? document.body : document.documentElement).scrollTop;                        if (lastURL == iScr) return;                        top.apf.history.hasChanged(document.getElementsByTagName('h1')[Math.round(iScr / 100)].id, true);                        lastURL = iScr;                        }                    checkUrl();                </script>";top==self&&(document.body.insertAdjacentHTML("beforeend","<iframe name='nav' style2='position:absolute;left:10px;top:10px;height:100px;width:100px;z-index:1000'                       style='width:1px;height:1px;' src='about:blank'></iframe>"),document.frames.nav.document.open(),document.frames.nav.document.write(o),document.frames.nav.document.close()),this.iframe=document.frames.nav,this.timer2=setInterval(function(){if(!apf.history.changingHash&&location.hash!="#"+apf.history.page){var e=location.hash.replace(/^#/,""),t=apf.history.page;apf.history.setHash(e,!0,!0),apf.history.page=t,apf.history.hasChanged(e)}},apf.history.delay||1)}else s(),apf.history.lastUrl=location.href.toString(),this.timer2=setInterval(function(){if(apf.history.lastUrl==location.href.toString())return;apf.history.lastUrl=location.href.toString();var e=location.hash.replace("#","");apf.history.hasChanged(decodeURI(e))},20)},to_name:null,setHash:function(e,t,n){if(this.changing||this.page==e||!n&&decodeURIComponent(location.hash)=="#"+decodeURIComponent(e)){this.to_name=e;return}if(!apf.supportHashChange&&apf.isIE&&!t)return this.to_name=e,$setTimeout(function(){apf.history.setHash(apf.history.to_name,!0,n)},200);this.changePage(e);if(!this.inited)return this.init(e);if(!apf.supportHashChange&&apf.isIE){var r=this.iframe.document.body.appendChild(this.iframe.document.createElement("h1"));r.id=e,r.innerHTML="1"}(!apf.supportHashChange&&apf.isIE?this.iframe:window).location.href="#"+e,!apf.isIE&&!apf.isGecko&&!apf.isIphone&&(apf.history.lastUrl=location.href.toString())},timer:null,changePage:function(e,t){!apf.supportHashChange&&apf.isIE&&(this.page=e,this.changingHash=!0,clearTimeout(this.timer),this.timer=$setTimeout(function(){location.hash=e,apf.history.changingHash=!1},1))},update:function(e){var t,n,r=0;for(t=0,n=this.past.length;t<n&&r===0;t++)this.past[t]==e&&(r=t+1);if(r>0)this.future=this.past.slice(r,this.past.length-1).concat(this.future).makeUnique(),this.past.splice(r,this.past.length-r),r=-r;else{for(t=0,n=this.future.length;t<n&&r===0;t++)this.future[t]==e&&(r=t+1,this.past=this.past.concat(this.future.splice(0,this.future.length-r)).makeUnique());r===0&&(this.past.push(e),r=1)}return r},hasChanged:function(e,t){if(e==this.page&&!t)return;this.changePage(e,t),this.changing=!0,apf.dispatchEvent("hashchange",{oldURL:this.page,newURL:e,page:e,index:this.update(e)})===!1&&(e=location.hash=this.page),this.changing=!1,this.page=e}},apf.config=(new apf.Class).$init(),apf.extend(apf.config,{disableRightClick:!1,allowSelect:!1,allowBlur:!0,autoDisableActions:!0,autoDisable:!1,disableF5:!0,autoHideLoading:!0,disableSpace:!0,defaultPage:"home",disableBackspace:!0,undokeys:!1,outline:!1,dragOutline:!1,resizeOutline:!1,autoDisableNavKeys:!0,disableTabbing:!1,resourcePath:null,initdelay:!0,liveText:!1,skinset:"default",name:apf.isO3?"o3App":self.window&&window.location.href.replace(/[^0-9A-Za-z_]/g,"_"),tags:{},defaults:{},baseurl:"","empty-message":"No items","loading-message":"Loading...","offline-message":"You are currently offline.",setDefaults:function(){},getDefault:function(e,t){var n=this.defaults[e];if(!n)return;for(var r=n.length-1;r>=0;r--)if(n[r][0]==t)return n[r][1]},$handlePropSet:function(e,t){this[e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})]=this[e]=t,(this.$propHandlers&&this.$propHandlers[e]||apf.GuiElement.propHandlers[e]||apf.K).call(this,t)},$inheritProperties:{},$propHandlers:{baseurl:function(e){this.baseurl=apf.parseExpression(e)},language:function(e){},"resource-path":function(e){this.resourcePath=apf.parseExpression(e||"").replace(/resources\/?|\/$/g,"")},skinset:function(e){this.$amlLoaded&&apf.skins.changeSkinset(e)},outline:function(e){this.dragOutline=this.resizeOutline=this.outline=apf.isTrue(e)},"drag-outline":function(e){this.dragOutline=e?apf.isTrue(e):!1},"resize-outline":function(e){this.resizeOutline=e?!apf.isFalse(e):!1},login:function(e,t){apf.auth.init(t)},debug:function(e){apf.debug=e}}}),apf.history&&apf.addEventListener("load",function(){apf.history.init(apf.config.defaultPage,"page")}),apf.offline={onLine:!0},apf.saveData=apf.getData=function(e,t){if(!e)return!1;var n,r=e.charAt(0),i=t.callback,s=function(e,n,r){var i=t.callback;return n!=apf.SUCCESS?i(e,n,r||{}):i(e,n,r||{})};t||(t={});var o=t.fParsed||(e.indexOf("{")>-1||e.indexOf("[")>-1?apf.lm.compile(e,{withopt:!0,precall:t.precall,alwayscb:!0,simplexpath:!0}):{str:e,type:2});t.precall&&!t._pc&&(t.asyncs=o.asyncs,t._pc=1);if(o.type==3){if(o.xpaths[0]){var u=o.xpaths[0],a=o.xpaths[1];if(u=="#"||a=="#"){var f=apf.lm.compile(e,{xpathmode:5})();if(typeof f!="string"){u=f.model&&f.model.$isModel&&f.model;if(u)a=f.xpath;else{if(!f.model)return;u=apf.xmldb.findModel(f.model),a=apf.xmlToXpath(f.model,u.data)+(f.xpath?"/"+f.xpath:"")}}else u=null}else u=apf.nameserver.get("model",u);return s(u.data.selectSingleNode(a),apf.SUCCESS,{})}return s(t.xmlNode.data.selectSingleNode(o.xpaths[1]),apf.SUCCESS,{})}if(r=="<"){if(o.type!=2)return o(t.xmlNode,s,t);n=o.str}else{if(r=="["||r=="{")return o(t.xmlNode,s,t);if(o.type==1||o.type==3){var l=i;i=t.callback=function(e,n,r){if(t._pc===!0)return;if(n!=apf.SUCCESS)return l.apply(this,arguments);var o=e.split(" "),u="get";o.length>1&&o[0].length<10?(u=o.shift(),o=o.join(" ")):o=e,i=t.callback=l,apf.oHttp.exec(u,[o],s,t)},o(t.xmlNode,s,t)}else{if(t._pc===!0)return;var c=e.split(" "),h="get";c.length>1&&c[0].length<10?(h=c.shift(),c=c.join(" ")):c=e,apf.oHttp.exec(h,[c.replace(/\\/g,"")],s,t)}}if(n){if(!i)return n;s(n,apf.SUCCESS,{})}},apf.setModel=function(e,t){if(!e)return;var n=e.indexOf("{")>-1||e.indexOf("[")>-1?apf.lm.compile(e,{alwayscb:!0}):{type:2,str:e};if(e=="@default"||n.type==2){var r=apf.nameserver.get("model",e);if(r)return r.register(t);if(e=="@default")return;if(e.indexOf(".")==-1&&e.indexOf("/")==-1)return}if(n.type==3&&n.models&&n.xpaths.length==2&&n.xpaths[0]!="#"&&n.xpaths[1]!="#"){apf.nameserver.get("model",n.xpaths[0]).register(t,n.xpaths[1]);return}t.clear&&t.clear("loading"),apf.getData(e,{parsed:n,xmlNode:t&&t.xmlRoot,callback:function(n,r,i){if(r!=apf.SUCCESS)throw new Error(apf.formatErrorString(0,null,"Loading new data","Could not load data into model.                 \nMessage: "+i.message+"                \nInstruction: '"+e+"'"));if(!n)return t.clear&&t.clear();if(typeof n=="string"){if(n.charAt(0)!="<"){if(n.indexOf("http://")==0)return apf.setModel(n,t);throw new Error("Invalid data from server")}n=apf.getXml(n)}if(n.nodeFunc){n.register(t);return}var s=apf.xmldb.findModel(n);s?s.register(t,apf.xmlToXpath(n,s.data)):(new apf.model).register(t).load(n)}})},function(){var e={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},t=Date,n=t.prototype,r=function(e,t){return t||(t=2),("000"+e).slice(t*-1)};n.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},n.setTimeToNow=function(){var e=new Date;return this.setHours(e.getHours()),this.setMinutes(e.getMinutes()),this.setSeconds(e.getSeconds()),this.setMilliseconds(e.getMilliseconds()),this},t.today=function(){return(new Date).clearTime()},t.compare=function(e,t){if(isNaN(e)||isNaN(t))throw new Error(e+" - "+t);if(e instanceof Date&&t instanceof Date)return e<t?-1:e>t?1:0;throw new TypeError(e+" - "+t)},t.equals=function(e,t){return e.compareTo(t)===0},t.getDayNumberFromName=function(t){var n=e.dayNames,r=e.abbreviatedDayNames,i=e.shortestDayNames,s=t.toLowerCase();for(var o=0;o<n.length;o++)if(n[o].toLowerCase()==s||r[o].toLowerCase()==s||i[o].toLowerCase()==s)return o;return-1},t.getMonthNumberFromName=function(t){var n=e.monthNames,r=e.abbreviatedMonthNames,i=t.toLowerCase();for(var s=0;s<n.length;s++)if(n[s].toLowerCase()==i||r[s].toLowerCase()==i)return s;return-1},t.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},t.getDaysInMonth=function(e,n){return[31,t.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][n]},t.getTimezoneAbbreviation=function(t){var n=e.timezones,r;for(var i=0;i<n.length;i++)if(n[i].offset===t)return n[i].name;return null},t.getTimezoneOffset=function(t){var n=e.timezones,r;for(var i=0;i<n.length;i++)if(n[i].name===t.toUpperCase())return n[i].offset;return null},n.clone=function(){return new Date(this.getTime())},n.compareTo=function(e){return Date.compare(this,e)},n.equals=function(e){return Date.equals(this,e||new Date)},n.between=function(e,t){return this.getTime()>=e.getTime()&&this.getTime()<=t.getTime()},n.isAfter=function(e){return this.compareTo(e||new Date)===1},n.isBefore=function(e){return this.compareTo(e||new Date)===-1},n.isToday=n.isSameDay=function(e){return this.clone().clearTime().equals((e||new Date).clone().clearTime())},n.addMilliseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+e*1),this},n.addSeconds=function(e){return this.addMilliseconds(e*1e3)},n.addMinutes=function(e){return this.addMilliseconds(e*6e4)},n.addHours=function(e){return this.addMilliseconds(e*36e5)},n.addDays=function(e){return this.setDate(this.getDate()+e*1),this},n.addWeeks=function(e){return this.addDays(e*7)},n.addMonths=function(e){var n=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+e*1),this.setDate(Math.min(n,t.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},n.addYears=function(e){return this.addMonths(e*12)},n.add=function(e){if(typeof e=="number")return this._orient=e,this;var t=e;return t.milliseconds&&this.addMilliseconds(t.milliseconds),t.seconds&&this.addSeconds(t.seconds),t.minutes&&this.addMinutes(t.minutes),t.hours&&this.addHours(t.hours),t.weeks&&this.addWeeks(t.weeks),t.months&&this.addMonths(t.months),t.years&&this.addYears(t.years),t.days&&this.addDays(t.days),this};var i,s,o;n.getWeek=function(){var e,t,n,r,u,a,f,l,c,h;return i=i?i:this.getFullYear(),s=s?s:this.getMonth()+1,o=o?o:this.getDate(),s<=2?(e=i-1,t=(e/4|0)-(e/100|0)+(e/400|0),n=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),c=t-n,u=0,a=o-1+31*(s-1)):(e=i,t=(e/4|0)-(e/100|0)+(e/400|0),n=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),c=t-n,u=c+1,a=o+(153*(s-3)+2)/5+58+c),f=(e+t)%7,r=(a+f-u)%7,l=a+3-r|0,l<0?h=53-((f-c)/5|0):l>364+c?h=1:h=(l/7|0)+1,i=s=o=null,h},n.getISOWeek=function(){return i=this.getUTCFullYear(),s=this.getUTCMonth()+1,o=this.getUTCDate(),r(this.getWeek())},n.setWeek=function(e){return this.moveToDayOfWeek(1).addWeeks(e-this.getWeek())};var u=function(e,t,n,r){if(typeof e=="undefined")return!1;if(typeof e!="number")throw new TypeError(e+" is not a Number.");if(e<t||e>n)throw new RangeError(e+" is not a valid value for "+r+".");return!0};t.validateMillisecond=function(e){return u(e,0,999,"millisecond")},t.validateSecond=function(e){return u(e,0,59,"second")},t.validateMinute=function(e){return u(e,0,59,"minute")},t.validateHour=function(e){return u(e,0,23,"hour")},t.validateDay=function(e,n,r){return u(e,1,t.getDaysInMonth(n,r),"day")},t.validateMonth=function(e){return u(e,0,11,"month")},t.validateYear=function(e){return u(e,0,9999,"year")},n.set=function(e){return t.validateMillisecond(e.millisecond)&&this.addMilliseconds(e.millisecond-this.getMilliseconds()),t.validateSecond(e.second)&&this.addSeconds(e.second-this.getSeconds()),t.validateMinute(e.minute)&&this.addMinutes(e.minute-this.getMinutes()),t.validateHour(e.hour)&&this.addHours(e.hour-this.getHours()),t.validateMonth(e.month)&&this.addMonths(e.month-this.getMonth()),t.validateYear(e.year)&&this.addYears(e.year-this.getFullYear()),t.validateDay(e.day,this.getFullYear(),this.getMonth())&&this.addDays(e.day-this.getDate()),e.timezone&&this.setTimezone(e.timezone),e.timezoneOffset&&this.setTimezoneOffset(e.timezoneOffset),e.week&&u(e.week,0,53,"week")&&this.setWeek(e.week),this},n.moveToFirstDayOfMonth=function(){return this.set({day:1})},n.moveToLastDayOfMonth=function(){return this.set({day:t.getDaysInMonth(this.getFullYear(),this.getMonth())})},n.moveToNthOccurrence=function(e,t){var n=0;if(t>0)n=t-1;else if(t===-1)return this.moveToLastDayOfMonth(),this.getDay()!==e&&this.moveToDayOfWeek(e,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(e,1).addWeeks(n)},n.moveToDayOfWeek=function(e,t){var n=(e-this.getDay()+7*(t||1))%7;return this.addDays(n===0?n+=7*(t||1):n)},n.moveToMonth=function(e,t){var n=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(n===0?n+=12*(t||1):n)},n.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},n.getTimezone=function(){return t.getTimezoneAbbreviation(this.getUTCOffset())},n.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),n=Number(e)*-6/10;return this.addMinutes(n-t)},n.setTimezone=function(e){return this.setTimezoneOffset(t.getTimezoneOffset(e))},n.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},n.isDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!=this.getTimezoneOffset()},n.getUTCOffset=function(){var e=this.getTimezoneOffset()*-10/6,t;return e<0?(t=(e-1e4).toString(),t.charAt(0)+t.substr(2)):(t=(e+1e4).toString(),"+"+t.substr(1))},n.getUTCTime=function(){return Date.UTC(this.getUTCFullYear(),this.getUTCMonth(),this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds(),this.getUTCMilliseconds())},n.getElapsed=function(e){return(e||new Date)-this},n.toISOString||(n.toISOString=function(){function e(e){return e<10?"0"+e:e}return'"'+this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+'Z"'}),n._toString=n.toString,n.toString=function(t){var n=this;if(t&&t.length==1){var i=e.formatPatterns;n.t=n.toString;switch(t){case"d":return n.t(i.shortDate);case"D":return n.t(i.longDate);case"F":return n.t(i.fullDateTime);case"m":return n.t(i.monthDay);case"r":return n.t(i.rfc1123);case"s":return n.t(i.sortableDateTime);case"t":return n.t(i.shortTime);case"T":return n.t(i.longTime);case"u":return n.t(i.universalSortableDateTime);case"y":return n.t(i.yearMonth)}}var s=function(e){switch(e*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return t?t.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(t){if(t.charAt(0)==="\\")return t.replace("\\","");n.h=n.getHours;switch(t){case"hh":return r(n.h()<13?n.h()===0?12:n.h():n.h()-12);case"h":return n.h()<13?n.h()===0?12:n.h():n.h()-12;case"HH":return r(n.h());case"H":return n.h();case"mm":return r(n.getMinutes());case"m":return n.getMinutes();case"ss":return r(n.getSeconds());case"s":return n.getSeconds();case"yyyy":return r(n.getFullYear(),4);case"yy":return r(n.getFullYear());case"dddd":return e.dayNames[n.getDay()];case"ddd":return e.abbreviatedDayNames[n.getDay()];case"dd":return r(n.getDate());case"d":return n.getDate();case"MMMM":return e.monthNames[n.getMonth()];case"MMM":return e.abbreviatedMonthNames[n.getMonth()];case"MM":return r(n.getMonth()+1);case"M":return n.getMonth()+1;case"t":return n.h()<12?e.amDesignator.substring(0,1):e.pmDesignator.substring(0,1);case"tt":return n.h()<12?e.amDesignator:e.pmDesignator;case"S":return s(n.getDate());default:return t}}):this._toString()}}(),apf.layout={compile:function(e){var t=this.layouts[e.getAttribute("id")];if(!t)return!1;var n=t.root.copy();t.layout.compile(n),t.layout.reset()},removeAll:function(e){e.children.length=null;var t=this.getHtmlId(e.pHtml);this.rules[t]||delete this.qlist[t]},timer:null,qlist:{},dlist:[],$hasQueue:!1,queue:function(e,t,n,r){r||(this.$hasQueue=!0,r=this.qlist);var i;(i=this.getHtmlId(e))||(i=apf.setUniqueHtmlId(e));if(r[i]){t&&r[i][2].push(t),n&&(r[i][1]=n);return}r[i]=[e,n,[t]],this.timer||(this.timer=apf.setZeroTimeout(function(){apf.layout.processQueue()}))},processQueue:function(){var e,t,n,r,i;for(e=0;e<this.dlist.length;e++)this.dlist[e].hidden?this.dlist[e].hide():this.dlist[e].show();do{var s={},o=this.qlist;this.qlist={},this.$hasQueue=!1;for(t in o){r=o[t],r[1]&&apf.layout.compileAlignment(r[1]),i=r[2];for(e=0,n=i.length;e<n;e++)if(i[e]){if(i[e].$amlDestroyed)continue;i[e].$updateLayout()}apf.layout.activateRules(r[0])}}while(this.$hasQueue);apf.hasSingleRszEvent&&apf.layout.forceResize(),this.dlist=[],apf.setZeroTimeout.clearTimeout(this.timer),this.timer=null},rules:{},onresize:{},getHtmlId:function(e){return e.getAttribute?e.getAttribute("id"):1},setRules:function(e,t,n,r){this.getHtmlId(e)||apf.setUniqueHtmlId(e),this.rules[this.getHtmlId(e)]||(this.rules[this.getHtmlId(e)]={});var i=this.rules[this.getHtmlId(e)][t];!r&&i?this.rules[this.getHtmlId(e)][t]=n+"\n"+i:this.rules[this.getHtmlId(e)][t]=n},getRules:function(e,t){return t?this.rules[this.getHtmlId(e)][t]:this.rules[this.getHtmlId(e)]},removeRule:function(e,t){var n=this.getHtmlId(e);if(!this.rules[n])return;var r=this.rules[n][t]||!1;delete this.rules[n][t];var i;for(i in this.rules[n]);i||delete this.rules[n];if(apf.hasSingleRszEvent)if(this.onresize[n])this.onresize[n]=null;else{var s=e.parentNode;while(s&&s.nodeType==1&&!this.onresize[s.getAttribute("id")])s=s.parentNode;if(s&&s.nodeType==1){var o=this.onresize[s.getAttribute("id")];o.children&&delete o.children[n]}}return r},activateRules:function(e,t){if(!e){var n,r;for(n in this.rules){r=document.getElementById(n);if(!r||r.onresize)continue;this.activateRules(r)}apf.hasSingleRszEvent&&apf.layout.$onresize&&apf.layout.$onresize();return}var i,s,o,u,a=[];if(!apf.hasSingleRszEvent){u=this.rules[this.getHtmlId(e)];if(!u)return e.onresize=null,!1;for(s in u){if(typeof u[s]!="string")continue;a.push(u[s])}i=apf.needsCssPx?new Function(a.join("\n")):new Function(a.join("\n").replace(/ \+ 'px'|try\{\}catch\(e\)\{\}\n/g,"")),e.onresize=i,t||i()}else{var f=this.getHtmlId(e);u=this.rules[f];if(!u)return!1;for(s in u){if(typeof u[s]!="string")continue;a.push(u[s])}var l=e.parentNode;while(l&&l.nodeType==1&&!this.onresize[l.getAttribute("id")])l=l.parentNode;var c=new Function(a.join("\n"));this.onresize[f]&&(c.children=this.onresize[f].children);if(l&&l.nodeType==1){var h=this.onresize[l.getAttribute("id")];this.onresize[f]=(h.children||(h.children={}))[f]=c}else this.onresize[f]=c;t||c();if(!apf.layout.$onresize){var i=function(e){try{var t=[];for(var n in e)e[n]&&t.unshift(e[n]);for(var r=0;r<t.length;r++)t[r](),t[r].children&&i(t[r].children)}catch(s){}};apf.addListener(window,"resize",apf.layout.$onresize=function(){apf.config.resize!==!1&&i(apf.layout.onresize)})}}},forceResize:function(e){if(apf.hasSingleRszEvent)return apf.layout.$onresize&&apf.layout.$onresize();var t=e.onresize;t&&t();var n=e.getElementsByTagName("*");for(var r=0,i=n.length;r<i;r++)n[r]&&n[r].onresize&&n[r].onresize()},paused:{},pause:function(e,t){if(apf.hasSingleRszEvent){var n=this.getHtmlId(e);this.paused[n]=this.onresize[n]||!0,t?(this.onresize[n]=t,this.onresize[n].children=this.paused[n].children,t()):delete this.onresize[n]}else this.paused[this.getHtmlId(e)]=e.onresize||!0,t?(e.onresize=t,t()):e.onresize=null},play:function(e){if(!this.paused[this.getHtmlId(e)])return;if(apf.hasSingleRszEvent){var t=this.getHtmlId(e),n=this.paused[t];typeof n=="function"?this.onresize[t]=n:delete this.onresize[t],apf.layout.$onresize&&apf.layout.$onresize(),this.paused[this.getHtmlId(e)]=null}else{var n=this.paused[this.getHtmlId(e)];typeof n=="function"?(e.onresize=n,n()):e.onresize=null,this.paused[this.getHtmlId(e)]=null}}},apf.getWindowWidth=function(){return apf.isIE?document.documentElement.offsetWidth-apf.windowHorBorder:window.innerWidth},apf.getWindowHeight=function(){return apf.isIE?document.documentElement.offsetHeight-apf.windowVerBorder:window.innerHeight},apf.setZeroTimeout=window.postMessage?function(){function r(t){var r=e.push(t);return window.postMessage(n,"*"),r}function i(r){r||(r=event),r.source==window&&r.data==n&&(apf.stopPropagation(r),e.length>0&&(t=e.shift())&&t())}var e=[],n="zero-timeout-message";return r.clearTimeout=function(t){e[t]=null},apf.addListener(window,"message",i,!0),r}():function(){function e(){return $setTimeout.apply(null,arguments)}return e.clearTimeout=function(){return clearTimeout.apply(null,arguments)},e}(),apf.queue={q:{},timer:null,add:function(e,t){this.q[e]=t,this.timer||(this.timer=apf.setZeroTimeout(function(){apf.queue.empty()}))},remove:function(e){delete this.q[e]},empty:function(e){apf.setZeroTimeout.clearTimeout(this.timer),this.timer=null,apf.layout&&apf.layout.$hasQueue&&apf.layout.processQueue(),apf.xmldb&&apf.xmldb.$hasQueue&&apf.xmldb.notifyQueued();var t=this.q;this.q={};for(var e in t){var n=t[e];n&&(delete t[e],n())}}},apf.resize=function(){this.scales={scalex:!1,scaley:!1,scaleratio:!1,dwidth:0,dheight:0,snap:!1,gridW:48,gridH:48},this.htmlElement;var e=[];this.init=function(){e=[new apf.resize.square("top","left",this),new apf.resize.square("top","middle",this),new apf.resize.square("top","right",this),new apf.resize.square("middle","left",this),new apf.resize.square("middle","right",this),new apf.resize.square("bottom","left",this),new apf.resize.square("bottom","middle",this),new apf.resize.square("bottom","right",this)]},this.grab=function(t,n){this.htmlElement=t,this.scales=n,e.length||this.init(),this.show()},this.hide=function(){for(var t=0,n=e.length;t<n;t++)e[t].visible=!1,e[t].repaint()},this.show=function(){var t=this.scales.scalex,n=this.scales.scaley,r=this.scales.scaleratio;for(var i=0,s=e.length,o;i<s;i++)o=e[i],o.visible=t&&n?!0:n&&!t?o.posX=="middle"?!0:!1:t&&!n?o.posY=="middle"?!0:!1:r?o.posY!="top"&&o.posY!="bottom"||o.posX==="middle"?!1:!0:!1,o.repaint()},this.destroy=function(){for(var t=0;t<e.length;t++)e[t].destroy()}},apf.resize.square=function(e,t,n){this.visible=!0,this.posX=t,this.posY=e;var r=0,i=this;this.htmlElement=n.htmlElement.parentNode.appendChild(document.createElement("div")),apf.setStyleClass(this.htmlElement,"square"),this.repaint=function(){if(this.visible){var i=n.htmlElement;this.htmlElement.style.display="block";var s=parseInt(i.style.width)+apf.getDiff(i)[0],o=parseInt(i.style.height)+apf.getDiff(i)[1],u=parseInt(i.style.top),a=parseInt(i.style.left),f=this.htmlElement.offsetWidth,l=this.htmlElement.offsetHeight,c=e=="top"?u-r-l:e=="middle"?u+o/2-l/2:u+o+r,h=t=="left"?a-r-f:t=="middle"?a+s/2-f/2:a+s+r,p=e=="middle"?"w-resize":t=="middle"?"n-resize":e+t=="topleft"||e+t=="bottomright"?"nw-resize":"ne-resize";this.htmlElement.style.top=c-1+"px",this.htmlElement.style.left=h-1+"px",this.htmlElement.style.cursor=p}else{var f=this.htmlElement.offsetWidth;this.htmlElement.style.display="none"}},this.destroy=function(){apf.destroyHtmlNode(this.htmlElement)},this.htmlElement.onmouseover=function(e){apf.setStyleClass(i.htmlElement,"squareHover")},this.htmlElement.onmouseout=function(e){apf.setStyleClass(i.htmlElement,"",["squareHover"])},this.htmlElement.onmousedown=function(e){e=e||event;var t=n.htmlElement,r=e.clientX,s=e.clientY,o=t.parentNode.offsetTop,u=t.parentNode.offsetLeft,a=n.scales.dwidth,f=n.scales.dheight,l=n.scales.snap,c=n.scales.gridH,h=n.scales.gridW,p=apf.flow.isBlock(t),d=p.other.ratio,v=i.posX,m=i.posY,g,y,b,w,E,S,x,T,N=parseInt(t.style.left),C=parseInt(t.style.top),k=parseInt(t.style.width),L=parseInt(t.style.height),A=!1;n.onresizedone(k,L,C,N),e.preventDefault&&e.preventDefault(),document.onmousemove=function(e){e=e||event,E=e.clientX-r,S=e.clientY-s;var i=e.shiftKey,o=d;if(i){v=="right"&&m=="bottom"?(g=k+E,y=g/o,w=N,b=C):v=="right"&&m=="top"?(g=k+E,y=g/o,w=N,b=C-E/o):v=="left"&&m=="bottom"?(g=k-E,y=g/o,w=N+E,b=C):v=="left"&&m=="top"&&(g=k-E,y=g/o,w=N+E,b=C+E/o);if(!(g>=a&&y>=f))return g=x,y=T,!1;g=x=Math.max(a,g),y=T=Math.max(f,y)}else g=v=="right"?k+E:v=="left"?k-E:k,y=m=="bottom"?L+S:m=="top"?L-S:L,w=v=="right"?N:v=="left"?Math.min(N+k-a,N+E):N,b=m=="bottom"?C:m=="top"?Math.min(C+L-f,C+S):C,g=Math.max(a,g),y=Math.max(f,y);l&&(w=Math.floor(w/h)*h,b=Math.floor(b/c)*c,g=Math.ceil(g/h)*h,y=Math.ceil(y/c)*c),n.onresize&&n.onresize(t,b,w,g,y),n.show(),A=!0},document.onmouseup=function(e){document.onmousemove=null,n.onresizedone&&A&&(n.onresizedone(g,y,b,w),p.other.ratio=g/y,A=!1)}}},apf.skins={skins:{},css:[],events:["onmousemove","onmousedown","onmouseup","onmouseout","onclick","ondragcopy","ondragstart","ondblclick"],Init:function(e,t,n){var r=(t?t.getAttribute("id"):null)||e.getAttribute("id"),i=(t?(t.getAttribute("src")||"").match(/\//)||n:"")?(n||t.getAttribute("src")).replace(/\/[^\/]*$/,"")+"/":"",s=null,o=null;s=e.getAttribute("media-path"),s!==null?s=apf.getAbsolutePath(i||apf.hostPath,s):t&&(s=t.getAttribute("media-path"),s!==null?s=apf.getAbsolutePath(apf.hostPath,s):s=apf.getAbsolutePath(i||apf.hostPath,"images/")),o=e.getAttribute("icon-path"),o!==null?o=apf.getAbsolutePath(i||apf.hostPath,o):t&&(o=t.getAttribute("icon-path"),o!==null?o=apf.getAbsolutePath(apf.hostPath,o):o=apf.getAbsolutePath(i||apf.hostPath,"icons/")),r||(r="default"),e.getAttribute("id")&&(document.body.className+=" "+e.getAttribute("id"));var u=r.split("|");r=u[0];if(!this.skins[r]||r=="default"){this.skins[r]={base:i,name:r,iconPath:o,mediaPath:s,templates:{},originals:{},xml:e};if(u.length>1)for(var a=0;a<u.length;a++)this.skins[u[a]]=this.skins[r]}!this.skins["default"]&&this.$first==t&&(this.skins["default"]=this.skins[r]);var f=e.childNodes;for(var a=f.length-1;a>=0;a--){if(f[a].nodeType!=1)continue;this.skins[r].templates[f[a].getAttribute("name")]=f[a],f[a].ownerDocument&&this.importSkinDef(f[a],i,r)}this.purgeCss(s,o);if(this.queue[r])for(var l in this.queue[r])this.queue[r][l]()},loadStylesheet:function(filename,title){var o;with(o=document.getElementsByTagName("head")[0].appendChild(document.createElement("LINK")))rel="stylesheet",type="text/css",href=filename,title=title;return o},importSkinDef:function(xmlNode,basepath,name){var i,l,nodes=$xmlns(xmlNode,"style",apf.ns.aml),tnode,node;for(i=0,l=nodes.length;i<l;i++){node=nodes[i];if(node.getAttribute("src"))this.loadStylesheet(apf.getAbsolutePath(basepath,node.getAttribute("src")));else{var test=!0;if(node.getAttribute("condition"))try{test=eval(node.getAttribute("condition"))}catch(e){test=!1}if(test){tnode=node.firstChild;while(tnode)this.css.push(tnode.nodeValue),tnode=tnode.nextSibling}}}nodes=$xmlns(xmlNode,"alias",apf.ns.apf);var t=this.skins[name].templates;for(i=0;i<nodes.length;i++){if(!nodes[i].firstChild)continue;t[nodes[i].firstChild.nodeValue.toLowerCase()]=xmlNode}},loadedCss:"",purgeCss:function(e,t){if(!this.css.length)return;var n=this.css.join("\n").replace(/images\//g,e).replace(/icons\//g,t);apf.importCssString(n),this.css=[]},loadCssInWindow:function(e,t,n,r){this.css=[];var i=e.split(":"),s=this.skins[i[0]],o=s.templates[i[1]];this.importSkinDef(o,s.base,s.name);var u=this.css.join("\n").replace(/images\//g,n).replace(/icons\//g,r);apf.importCssString(u),this.css=[]},setSkinPaths:function(e,t){e=e.split(":");var n=e[0],r=e[1];t.iconPath=this.skins[n].iconPath,t.mediaPath=this.skins[n].mediaPath},getTemplate:function(e,t){e=e.split(":");var n=e[0],r=e[1];if(!this.skins[n])return t?!1:!1;if(!this.skins[n].templates[r])return!1;var i=this.skins[n].templates[r],s=this.skins[n].originals[r];if(!s){s=this.skins[n].originals[r]={};var o=$xmlns(i,"presentation",apf.ns.aml)[0].childNodes;for(var u=0;u<o.length;u++){if(o[u].nodeType!=1)continue;s[o[u].baseName||o[u][apf.TAGNAME]]=o[u]}}return s},getCssString:function(e){return apf.queryValue($xmlns(this.skins[e.split(":")[0]].xml,"style",apf.ns.aml)[0],"text()")},changeSkinset:function(e){var t=apf.document.documentElement;while(t){t&&t.nodeFunc==apf.NODE_VISIBLE&&t.hasFeature(apf.__PRESENTATION__)&&!t.skinset&&(t.$propHandlers.skinset.call(t,e),t.skinset=null);if(t.firstChild||t.nextSibling)t=t.firstChild||t.nextSibling;else{do t=t.parentNode;while(t&&!t.nextSibling);t&&(t=t.nextSibling)}}},queue:{},waitForSkin:function(e,t,n){if(this.skins[e])return;return(this.queue[e]||(this.queue[e]={}))[t]=n,!0},setIcon:function(e,t,n){if(!t){e.style.backgroundImage="";return}if(e.tagName.toLowerCase()=="img"){e.setAttribute("src",t?(n||"")+t:"");return}e.style.backgroundImage="url("+(n||"")+t+")"}},apf.Sort=function(e){var t={};this.parseXml=function(e,n){n&&(t={}),t.order=e.order,t.getValue=e.csort||e.$compile("sort"),t.getNodes=self[e["nodes-method"]],t.ascending=(t.order||"").indexOf("desc")==-1,t.order=null,e["data-type"]?t.method=r[e["data-type"]]:e["sort-method"]?t.method=self[e["sort-method"]]:t.method=r.alpha;var i=e["date-format"];if(i){t.sort_dateFmtStr=i,t.method=r.date;var s=i.match(/(D+|Y+|M+|h+|m+|s+)/g);if(s){for(var o={},u=0;u<s.length;u++)o[s[u].substr(0,1)]=u+1;t.dateFormat=new RegExp(i.replace(/([^\sDYMhms])/g,"\\$1").replace(/YYYY/,"(\\d\\d\\d\\d)").replace(/(DD|YY|MM|hh|mm|ss)/g,"(\\d\\d)")),t.dateReplace="$"+o.M+"/$"+o.D+"/$"+o.Y,o.h&&(t.dateReplace+=" $"+o.h+":$"+o.m+":$"+o.s)}}},this.set=function(e,n){n&&(t={}),apf.extend(t,e),t.ascending==undefined&&(t.ascending=e.order?e.order.indexOf("desc")==-1:!0),t.order=null,e.type?t.method=r[e.type]:e.method?t.method=self[e.method]:t.method||(t.method=r.alpha);if(e.format){t.sort_dateFmtStr=e.format;var i=str.match(/(D+|Y+|M+|h+|m+|s+)/g);if(i){for(var s={},o=0;o<i.length;o++)s[i[o].substr(0,1)]=o+1;t.dateFormat=new RegExp(str.replace(/([^\sDYMhms])/g,"\\$1").replace(/YYYY/,"(\\d\\d\\d\\d)").replace(/(DD|YY|MM|hh|mm|ss)/g,"(\\d\\d)")),t.dateReplace="$"+s.M+"/$"+s.D+"/$"+s.Y,s.h&&(t.dateReplace+=" $"+s.h+":$"+s.m+":$"+s.s)}}t.getValue||(t.getValue=function(e){return apf.queryValue(e,t.xpath)})},this.get=function(){return apf.extend({},t)},this.findSortSibling=function(e,t){var n=getNodes?getNodes(e,t):this.getTraverseNodes(e);for(var r=0;r<n.length;r++)if(!compare(t,n[r],!0,sortSettings))return n[r];return null};var n=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000"],r={alpha:function(e){return e.toString().toLowerCase()},number:function(e){return e||(e=0),(e.length<n.length?n[n.length-e.length]:"")+e},date:function(e,r){var i=t.dateFormat,s=t.dateReplace,o=t.sort_dateFmtStr,u;return i?o=="*"?u=apf.date.getDateTime(e):u=(new Date(e.replace(i,s))).getTime():u=new Date(e),e=""+u.getTime(),e=="NaN"&&(e="0"),(e.length<n.length?n[n.length-e.length]:"")+e}};this.apply=function(e,n,i,s,o){var u=[],a=e.length;while(a--){var l=t.getValue(e[a]);e&&(u[u.length]={toString:function(){return this.v},xmlNode:e[a],v:(t.method||r.alpha)(l||"",n,e[a])})}u.sort();var c=o?Math.min(u.length,s+o):u.length;s||(s=0);if(!i){var h=[];if(t.ascending)for(a=s;a<c;a++)h[h.length]=u[a].xmlNode;else for(a=c-1;a>=s;a--)h[h.length]=u[a].xmlNode;return h}if(t.ascending)for(a=s;a<c;a++)f(a,c,u[a].xmlNode,u[a].v);else for(a=c-1;a>=s;a--)f(c-a-1,c,u[a].xmlNode,u[a].v)},e&&this.parseXml(e)},apf.tween=function(e){var t={left:function(e,t){e.style.left=t+r},right:function(e,t){e.style.left="",e.style.right=t+r},top:function(e,t){e.style.top=t+r},bottom:function(e,t){e.style.top="",e.style.bottom=t+r},width:function(e,t,n){e.style.width=t+r},height:function(e,t,n){e.style.height=t+r},scrollTop:function(e,t,n){e.scrollTop=t},scrollLeft:function(e,t,n){e.scrollLeft=t},paddingTop:function(e,t,n){e.style.paddingTop=t+"px"},"height-rsz":function(t,n,i){t.style.height=n+r,e.hasSingleResizeEvent&&e.layout.$onresize&&e.layout.$onresize()},mwidth:function(t,n,i){var s=e.getDiff(t);t.style.width=n+r,t.style.marginLeft=-1*(n/2+(parseInt(e.getStyle(t,"borderLeftWidth"))||s[0]/2)+(i.margin||0))+r},mheight:function(t,n,i){var s=e.getDiff(t);t.style.height=n+r,t.style.marginTop=-1*n/2-(parseInt(e.getStyle(t,"borderTopWidth"))||s[1]/2)+(i.margin||0)+r},scrollwidth:function(e,t){e.style.width=t+r,e.scrollLeft=e.scrollWidth},scrollheight_old:function(e,t){try{e.style.height=t+r,e.scrollTop=e.scrollHeight}catch(n){alert(t)}},scrollheight:function(t,n,i){var s=e.getHeightDiff(t),o=i.$int||t;t.style.height=Math.max(n+(i.diff||0),0)+r,o.scrollTop=o.scrollHeight-o.offsetHeight-s+(i.diff||0)-(e.isGecko?16:0)},scrolltop:function(e,t){e.style.height=t+r,e.style.top=-1*t-2+r,e.scrollTop=0},clipright:function(e,t,n){e.style.clip="rect(auto, auto, auto, "+t+"px)",e.style.marginLeft=-1*t+r},fade:function(t,n){!e.supportOpacity&&e.hasStyleFilters?t.style.filter=n==1?"":"alpha(opacity="+parseInt(n*100)+")":t.style.opacity=n},bgcolor:function(e,t){e.style.backgroundColor=t},textcolor:function(e,t){e.style.color=t},htmlcss:function(t,n,i){e.hasStyleFilters&&i.type=="filter"?t.style.filter=n==1?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+n+")":t.style[i.type]=n+(i.needsPx?r:"")},transformscale:function(e,t,n){e.style[n.type]=a+parseFloat(t)+l},transformrotate:function(e,t,n){e.style[n.type]=f+parseFloat(t)+c},transformvalscale:function(e){return a+parseFloat(e)+l},transformvalrotate:function(e){return f+parseFloat(e)+c}},n="id",r="px",i="number",s="transformval",o="transform",u="scale",a="scale(",f="rotate(",l=")",c="deg)",h=["linear","ease-in","ease-out","ease","ease-in-out","cubic-bezier"],p={left:"left",right:"right",top:"top",bottom:"bottom",width:"width",height:"height",scrollTop:!1,scrollLeft:!1,mwidth:!1,mheight:!1,scrollwidth:!1,scrollheight:!1,fade:"opacity",opacity:"opacity",bgcolor:"background-color",textcolor:"color",transform:"transform"},d=Math.pow,v=Math.round,m={},g=null,y=function(t,r){var i=t.getAttribute(n);i||(e.setUniqueHtmlId(t),i=t.getAttribute(n)),m[i]||(m[i]=[]),m[i].push(r),m[i].length==1&&r(0)},b=function(e){var t=m[e.getAttribute(n)];if(!t)return;t.shift(),t.length&&t[0](0)},w=function(e,t){var r=m[e.getAttribute(n)];if(!r)return;t&&g&&g.control&&(g.control.stop=!0),r.length=0},E=function(t){var r=t.getAttribute(n);r||(e.setUniqueHtmlId(t),r=t.getAttribute(n));for(var i in m)i==r&&(m[i]=[])},S=function(t,n,r,s){var o=0,u=s-1,a=[n];typeof t==i&&(t?t==1?t=e.tween.easeInCubic:t==2&&(t=e.tween.easeOutCubic):t=e.tween.linear);for(o=0;o<u;++o)a.push(t(o/s,n,r-n));return a.push(r),a},x=function(t,n,r,i){var s,o,u=e.color.colorshex,a=parseInt((u[n]||n).slice(1),16),f=parseInt((u[r]||r).slice(1),16),l=0,c=[];for(;l<i;l++)o=l/(i-1),s=1-o,c[c.length]="#"+("000000"+(v((a&255)*s+(f&255)*o)&255|v((a&65280)*s+(f&65280)*o)&65280|v((a&16711680)*s+(f&16711680)*o)&16711680).toString(16)).slice(-6);return c},T=function(n,i){i=e.extend({steps:10,interval:5,anim:e.tween.linear,control:{}},i),i.steps=Math.ceil(i.steps*e.animSteps),i.interval=Math.ceil(i.interval*e.animInterval),n.nodeFunc>100&&(i.$int=n.$int,n=n.$ext);try{"fixed|absolute|relative".indexOf(e.getStyle(n,"position"))==-1&&(n.style.position="relative")}catch(a){}var f=!1,l=i.type==o;i.method=f?i.type:l?t[o+(i.subType||u)]:t[i.type]?t[i.type]:(i.needsPx=L[i.type]||!1)?t.htmlcss:t.htmlcss;if(f){var c=p[i.type];if(c===!1)return e.tween;i.type=c||i.type,l&&(i.subType||(i.subType=u),i.type=e.supportCSSAnim);var d=l?t[s+(i.subType||u)]:null;return n.style[i.type]=l?d(i.from):i.from+(L[i.type]?r:""),$setTimeout(function(){n.style[i.type]=l?d(i.to):i.to+(L[i.type]?r:""),n.offsetTop,n.style[e.cssPrefix+"Transition"]=i.type+" "+i.steps*i.interval/1e3+"s "+h[i.anim||0];var t=function(){i.onfinish&&i.onfinish(n,i.userdata),n.style[e.cssPrefix+"Transition"]="",n.removeEventListener(e.cssAnimEvent,t)};n.addEventListener(e.cssAnimEvent,t)}),e.tween}i.control&&(i.control.state=e.tween.RUNNING,i.control.stop=function(){i.control.state=e.tween.STOPPING,w(n),i.onstop&&i.onstop(n,i.userdata)});var v=i.color?x(i.anim,i.from,i.to,i.steps):S(i.anim,parseFloat(i.from),parseFloat(i.to),i.steps),m=function(t){if(i.control&&i.control.state){i.control.state=e.tween.STOPPED;return}g=i;if(i.onbeforeeach&&i.onbeforeeach(n,i.userdata)===!1)return;try{i.method(n,v[t],i)}catch(r){}i.oneach&&i.oneach(n,i.userdata);if(t<i.steps)return $setTimeout(function(){m(t+1)},i.interval);g=null,i.control&&(i.control.state=e.tween.STOPPED),i.onfinish&&i.onfinish(n,i.userdata),b(n)};return i.type.indexOf("scroll")>-1&&E(n),y(n,m),e.tween},N=function(n,i){i=e.extend({steps:10,interval:5,anim:e.tween.linear,control:{}},i),i.steps=Math.ceil(i.steps*e.animSteps),i.interval=Math.ceil(i.interval*e.animInterval),n.nodeFunc>100&&(i.$int=n.$int,n=n.$ext);var a,f,l=!1,c=!1,d=i.steps*i.interval/1e3,v=h[i.anim||0],m=[],E=[],T=0,N=i.tweens.length;for(;T<N;T++){var C=i.tweens[T];C.oHtml&&C.oHtml.nodeFunc>100&&(C.$int=C.oHtml.$int,C.oHtml=C.oHtml.$ext),a=l&&p[C.type],f=C.type==o,f&&(C.subType||(C.subType=u),C.type=e.supportCSSAnim),C.method=a?C.type:f?t[o+C.subType]:t[C.type]?t[C.type]:(C.needsPx=L[C.type]||!1)?t.htmlcss:t.htmlcss;if(a){var k=f?C.type:p[C.type];C.type=k||C.type;var A=t[s+C.subType];n.style[C.type]=f?A(C.from):C.from+(L[C.type]?r:""),E.push([C.type,f?A(C.to):C.to+(L[C.type]?r:"")]),m.push(C.type+" "+d+"s "+v+" 0"),c=!0}else m.push(C.color?x(i.anim,C.from,C.to,i.steps):S(i.anim,parseFloat(C.from),parseFloat(C.to),i.steps))}if(c){n.style[e.cssPrefix+"Transition"]=m.join(","),n.offsetTop;var O=0,M=function(){O++,O==E.length&&(i.onfinish&&i.onfinish(n,i.userdata),n.style[e.cssPrefix+"Transition"]="",n.removeEventListener(e.cssAnimEvent,M))};n.addEventListener(e.cssAnimEvent,M,!1);for(var _=0,D=E.length;_<D;_++)n.style[E[_][0]]=E[_][1];return e.tween}i.control&&(i.control.state=e.tween.RUNNING,i.control.stop=function(){if(i.control.state==e.tween.STOPPED)return;i.control.state=e.tween.STOPPING,w(n),i.onstop&&i.onstop(n,i.userdata)});var P=i.tweens,H=function(t){if(i.control&&i.control.state){i.control.state=e.tween.STOPPED;return}g=i;try{for(var r=0;r<m.length;r++)P[r].method(P[r].oHtml||n,m[r][t],P[r])}catch(s){}i.oneach&&i.oneach(n,i.userdata);if(t<i.steps)return $setTimeout(function(){H(t+1)},i.interval);g=null,i.control&&(i.control.state=e.tween.STOPPED),i.onfinish&&i.onfinish(n,i.userdata),b(n)};return y(n,H),e.tween},C=function(t,n,r,i){(r=r||{}).tweens=[],t.nodeFunc>100&&(t=t.$ext),i&&e.setStyleClass(t,"",[n]);var s=function(i,s){i?e.setStyleClass(t,"",[n]):e.setStyleClass(t,n);for(var o=0;o<r.tweens.length;o++){if(r.tweens[o].type=="filter")continue;t.style[r.tweens[o].type]=""}s&&s.apply(this,arguments)},o=r.onfinish,u=r.onstop;r.onfinish=function(){s(i,o)},r.onstop=function(){s(!i,u)};var a,f,l,c,h,p,d,v,m={};for(v=0;v<document.styleSheets.length;v++){d=document.styleSheets[v][e.styleSheetRules];if(!d||!d.length)continue;for(c=d.length-1;c>=0;c--){var g=d[c];if(!g.style||!g.selectorText.match("."+n+"$"))continue;for(p in g.style){if(!g.style[p]||A.indexOf("|"+p+"|")==-1)continue;if(p=="filter"){if(!g.style[p].match(/opacity\=([\d\.]+)/))continue;f=RegExp.$1,a=(e.getStyleRecur(t,p)||"").match(/opacity\=([\d\.]+)/),l=a?RegExp.$1:100,h=!1,f==l&&(i?l=100:f=100)}else f=i&&t.style[p]||g.style[p],i&&(t.style[p]=""),l=e.getStyleRecur(t,p),h=p.match(/color/i)?!0:!1;m[p]={type:p,from:(h?String:parseFloat)(i?f:l),to:(h?String:parseFloat)(i?l:f),color:h,needsPx:L[p.toLowerCase()]||!1}}}}for(var y in m)r.tweens.push(m[y]);return i&&e.setStyleClass(t,n),N(t,r)},k=function(e,t,n){C(e,t,n,!0)},L={left:!0,top:!0,bottom:!0,right:!0,width:!0,height:!0,fontSize:!0,lineHeight:!0,textIndent:!0,marginLeft:!0,marginTop:!0,marginRight:!0,marginBottom:!0},A="|backgroundColor|backgroundPosition|color|width|filter|height|left|top|bottom|right|fontSize|letterSpacing|lineHeight|textIndent|opacity|paddingLeft|paddingTop|paddingRight|paddingBottom|borderLeftWidth|borderTopWidth|borderRightWidth|borderBottomWidth|borderLeftColor|borderTopColor|borderRightColor|borderBottomColor|marginLeft|marginTop|marginRight|marginBottom|transform|",O="|scale|rotate|";return{single:T,multi:N,css:C,cssRemove:k,clearQueue:w,addModule:function(e,n,r){return typeof e!="string"||typeof n!="function"||t[e]&&!r?this:(t[e]=n,this)},NORMAL:0,EASEIN:1,EASEOUT:2,RUNNING:0,STOPPING:1,STOPPED:2,calcColorSteps:x,linear:function(e,t,n){return n*e+t},easeInQuad:function(e,t,n){return n*d(e,2)+t},easeOutQuad:function(e,t,n){return-n*e*(e-2)+t},easeInOutQuad:function(e,t,n){return(e/=.5)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n){return n*d(e,3)+t},easeOutCubic:function(e,t,n){return n*(d(e-1,3)+1)+t},easeInOutCubic:function(e,t,n){return(e/=.5)<1?n/2*d(e,3)+t:n/2*(d(e-2,3)+2)+t},easeInQuart:function(e,t,n){return n*d(e,4)+t},easeOutQuart:function(e,t,n){return-n*(d(e-1,4)-1)+t},easeInOutQuart:function(e,t,n){return(e/=.5)<1?n/2*d(e,4)+t:-n/2*(d(e-2,4)-2)+t},easeInQuint:function(e,t,n){return n*d(e,5)+t},easeOutQuint:function(e,t,n){return n*(d(e-1,5)+1)+t},easeInOutQuint:function(e,t,n){return(e/=.5)<1?n/2*d(e,5)+t:n/2*(d(e-2,5)+2)+t},easeInSine:function(e,t,n){return-n*Math.cos(e*(Math.PI/2))+n+t},easeOutSine:function(e,t,n){return n*Math.sin(e*(Math.PI/2))+t},easeInOutSine:function(e,t,n){return-n/2*(Math.cos(Math.PI*e)-1)+t},easeInExpo:function(e,t,n){return e==0?t:n*d(2,10*(e-1))+t},easeOutExpo:function(e,t,n){return e==1?t+n:n*(-d(2,-10*e)+1)+t},easeInOutExpo:function(e,t,n){return e==0?t:e==1?t+n:(e/=.5)<1?n/2*d(2,10*(e-1))+t:n/2*(-d(2,-10*--e)+2)+t},easeInCirc:function(e,t,n){return-n*(Math.sqrt(1-e*e)-1)+t},easeOutCirc:function(e,t,n){return n*Math.sqrt(1-(e-=1)*e)+t},easeInOutCirc:function(e,t,n){return(e/=.5)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n){var r=1.70158,i=.3,s=n;return e==0?t:e==1?t+n:(!s||s<Math.abs(n)?(s=n,r=i/4):r=i/(2*Math.PI)*Math.asin(n/s),-(s*d(2,10*(e-=1))*Math.sin((e*1-r)*2*Math.PI/i))+t)},easeOutElastic:function(e,t,n){var r=1.70158,i=.3,s=n;return e==0?t:e==1?t+n:(s<Math.abs(n)?(s=n,r=i/4):r=i/(2*Math.PI)*Math.asin(n/s),s*d(2,-10*e)*Math.sin((e-r)*2*Math.PI/i)+n+t)},easeInOutElastic:function(e,t,n){var r=1.70158,i=0,s=n;return e==0?t:e/2==2?t+n:(i||(i=.3*1.5),s<Math.abs(n)?(s=n,r=i/4):r=i/(2*Math.PI)*Math.asin(n/s),e<1?-0.5*s*d(2,10*(e-=1))*Math.sin((e-r)*2*Math.PI/i)+t:s*d(2,-10*(e-=1))*Math.sin((e-r)*2*Math.PI/i)*.5+n+t)},easeInBack:function(e,t,n){var r=1.70158;return n*d(e,2)*((r+1)*e-r)+t},easeOutBack:function(e,t,n){var r=1.70158;return n*((e-=1)*e*((r+1)*e+r)+1)+t},easeInOutBack:function(e,t,n){var r=1.70158;return e/2<1?n/2*e*e*(((r*=1.525)+1)*e-r)+t:n/2*((e-=2)*e*(((r*=1.525)+1)*e+r)+2)+t},easeInBounce:function(t,n,r){return r-e.tween.easeOutBounce(1-t,0,r)+n},easeOutBounce:function(e,t,n){return e<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(t,n,r){return t<.5?e.tween.easeInBounce(t*2,0,r)*.5+n:e.tween.easeOutBounce(t*2-1,0,r)*.5+r*.5+n}}}(apf),apf.xmldb=new function(){var e=this;this.xmlDocTag="a_doc",this.xmlIdTag="a_id",this.xmlListenTag="a_listen",this.htmlIdTag="id",this.disableRDB=!1,this.$xmlDocLut=[],this.$nodeCount={};var t=/(?:a_doc|a_id|a_listen|a_loaded)=(?:"|')[^'"]+(?:"|')/g,n=/>[\s\n\r\t]+</g;this.garbageCollect=function(){var e,t=apf.xmldb.$xmlDocLut,n,r;for(var i=0,s=t.length;i<s;i++){e=t[i];if(!e||e.nodeFunc)continue;n=i,r=apf.nameserver.get("model",n);if(!r||r.data!=e)t[i]=null}},this.$gcInterval=window.setInterval?setInterval(function(){e.garbageCollect()},6e4):null,this.getElementById=function(e,t){return t||(t=this.$xmlDocLut[e.split("|")[0]]),t?t.selectSingleNode("descendant-or-self::node()[@"+this.xmlIdTag+"='"+e+"']"):!1},this.getNode=function(e){return!e||!e.getAttribute(this.htmlIdTag)?!1:this.getElementById(e.getAttribute(this.htmlIdTag).split("|",2).join("|"))},this.getNodeById=function(e,t){var n=e.split("|");return n.pop(),this.getElementById(n.join("|"),t)},this.getDocumentById=function(e){return this.$xmlDocLut[e]},this.getDocument=function(e){return this.$xmlDocLut[e.getAttribute(this.xmlIdTag).split("|")[0]]},this.getID=function(e,t){return e.getAttribute(this.xmlIdTag)+"|"+t.$uniqueId},this.getElement=function(e,t){var n=e.childNodes;for(var r=0,i=0;i<n.length;i++){if(n[i].nodeType!=1)continue;if(r++==t)return n[i]}},this.setModel=function(e){apf.nameserver.register("model",e.data.ownerDocument.documentElement.getAttribute(this.xmlDocTag),e)},this.findModel=function(e){return apf.nameserver.get("model",e.ownerDocument.documentElement.getAttribute(this.xmlDocTag))},this.getXmlId=function(e){return e.getAttribute(this.xmlIdTag)||this.nodeConnect(apf.xmldb.getXmlDocId(e),e)},this.getHtmlNode=function(e,t){return e&&e.nodeType==1&&e.getAttribute(this.xmlIdTag)?t.$findHtmlNode(e.getAttribute(this.xmlIdTag)+"|"+t.$uniqueId):null},this.findHtmlNode=function(e,t){do{if(e.nodeType==1&&e.getAttribute(this.xmlIdTag))return t.$findHtmlNode(e.getAttribute(this.xmlIdTag)+"|"+t.$uniqueId);if(e==t.xmlRoot)return null;e=e.parentNode}while(e&&e.nodeType!=9);return null},this.findXmlNode=function(e){if(!e)return!1;var t;while(e&&e.nodeType==1&&(e.tagName.toLowerCase()!="body"&&!(t=e.getAttribute(this.htmlIdTag))||(t||(t=e.getAttribute(this.htmlIdTag)))&&t.match(/^q/))){if(e.host&&e.host.$ext==e)return e.host.xmlRoot;e=e.parentNode}return!e||e.nodeType!=1?!1:e.tagName.toLowerCase()=="body"?!1:this.getNode(e)},this.getXml=apf.getXml,this.nodeConnect=function(e,t,n,r){this.$nodeCount[e]||(this.$nodeCount[e]=0);var i;i=t.getAttribute(this.xmlIdTag)||t.setAttribute(this.xmlIdTag,i=e+"|"+ ++this.$nodeCount[e])||i;if(!r)return i;var s=i+"|"+r.$uniqueId;return n&&n.setAttribute(this.htmlIdTag,s),s},this.$listeners=[null],this.addNodeListener=function(e,t,n){var r,i=String(e.getAttribute(this.xmlListenTag)||"");n||(n=String(t.$uniqueId));if(n.charAt(0)=="p"){var s=n.split("|");r=this.$listeners.push(function(t){var n=apf.all[s[1]];if(n){var r=apf.all[s[3]];if(!r)return;if(r.$propBinds[s[1]][s[2]]){if(!apf.isChildOf(r.data,e,!0))return!1;var i=r.$propBinds[s[1]][s[2]].listen,o=i?apf.queryNode(r.data,i):e}o&&n.$execProperty(s[2],o,t[3])}})-1,this.$listeners[n]=r}else r="e"+n,this.$listeners[r]||(this.$listeners[r]=function(e){var t=apf.all[n];t&&t.$xmlUpdate.apply(t,e)});return(!i||i.indexOf(";"+r+";")==-1)&&e.setAttribute(this.xmlListenTag,(i?i+r:";"+r)+";"),e},this.removeNodeListener=function(e,t,n){var r=e.getAttribute(this.xmlListenTag),i=r?r.split(";"):[];n&&n.charAt(0)=="p"?(n=this.$listeners[n],delete this.$listeners[n]):n="e"+t.$uniqueId;for(var s=[],o=0;o<i.length;o++)i[o]!=n&&s.push(i[o]);return e.setAttribute(this.xmlListenTag,s.join(";")),e},this.setTextNode=apf.setTextNode=function(e,t,n,r,i){var s;if(n){s=e.selectSingleNode(n);if(!s)return;e=s.nodeType==1?s:null}if(e.nodeType!=1)s=e;else if(e||!s)s=e.selectSingleNode("text()"),s||(s=e.appendChild(e.ownerDocument.createTextNode("")));r&&!r.$filled&&(r.extra.oldValue=s.nodeValue,r.$filled=!0),i?r.extra.range=i:(s.nodeValue=t,s.$regbase&&s.$setValue(t)),this.applyChanges("text",s.parentNode,r),this.applyRDB(["setTextNode",e,t,n],r||{xmlNode:e})},this.setAttribute=apf.setAttribute=function(e,t,n,r,i,s){i&&!i.$filled&&(i.name=t,i.$filled=!0),s?i.extra.range=s:(r?e.selectSingleNode(r):e).setAttribute(t,n),this.applyChanges("attribute",e,i),this.applyRDB(["setAttribute",e,t,n,r],i||{xmlNode:e})},this.removeAttribute=apf.removeAttribute=function(e,t,n,r){r&&!r.$filled&&(r.name=t,r.$filled=!0),(n?e.selectSingleNode(n):e).removeAttribute(t),this.applyChanges("attribute",e,r),this.applyRDB(["removeAttribute",e,t,n],r||{xmlNode:e})},this.replaceNode=apf.replaceNode=function(e,t,n,r){n&&(t=t.selectSingleNode(n));if(t.ownerDocument.importNode&&e.ownerDocument!=t.ownerDocument){var i=e;e=t.ownerDocument.importNode(e,!0),i.parentNode&&i.parentNode.removeChild(i)}this.applyRDB(["replaceNode",t,this.cleanXml(e.xml),n],r||{xmlNode:t}),r&&!r.$filled&&(r.$filled=!0,r.oldNode=t,r.xmlNode=e),this.cleanNode(e);var s=t.parentNode;if(!s)return;return s.replaceChild(e,t),this.copyConnections(t,e),this.applyChanges("replacenode",e,r),e},this.addChildNode=apf.addChildNode=function(e,t,n,r,i){var s=e.insertBefore(e.ownerDocument.createElement(t),r);for(var o=0;o<n.length;o++)s.setAttribute(n[o][0],n[o][1]);return i&&!i.$filled&&(i.extra.addedNode=s,i.$filled=!0),this.applyChanges("add",s,i),this.applyRDB(["addChildNode",e,t,n,r],i||{xmlNode:e}),s},this.appendChild=apf.appendChild=function(e,t,n,r,i,s){if(e==t.parentNode)return apf.xmldb.moveNode(e,t,n,null,i,s);if(r&&e.selectSingleNode(t.tagName))return!1;if(e.ownerDocument.importNode&&e.ownerDocument!=t.ownerDocument){var o=t;t=e.ownerDocument.importNode(t,!0),o.parentNode&&o.parentNode.removeChild(o)}this.applyRDB(["appendChild",e,this.cleanXml(t.xml),n,r,i],s||{xmlNode:e});if(i){var u=[];e=apf.createNodeFromXpath(e,i,u);if(u.length){e.appendChild(t);while(u.length)e==u.pop()&&u.length&&(e=e.parentNode)}}else t.parentNode&&this.removeNode(t);return s&&!s.$filled?(s.$filled=!0,this.cleanNode(t)):this.cleanNode(t),e.insertBefore(t,n),this.applyChanges("add",t,s),t},this.moveNode=apf.moveNode=function(e,t,n,r,i){i||(i={extra:{}}),i.extra.oldParent=t.parentNode,i.extra.beforeNode=t.nextSibling,i.extra.parent=r?e.selectSingleNode(r):e,this.applyChanges("move-away",t,i);if(e.ownerDocument.importNode&&e.ownerDocument!=t.ownerDocument){var s=t;t=e.ownerDocument.importNode(t,!0),s.parentNode&&s.parentNode.removeChild(s)}this.applyRDB(["moveNode",e,t,n,r],i||{xmlNode:e}),i.extra.parent.insertBefore(t,n),this.applyChanges("move",t,i)},this.removeNode=apf.removeNode=function(e,t,n){t&&(e=e.selectSingleNode(t)),n&&!n.$filled&&(n.$filled=!0,n.extra.parent=e.parentNode,n.extra.removedNode=e,n.extra.beforeNode=e.nextSibling),this.applyRDB(["removeNode",e,t],n||{xmlNode:e}),this.applyChanges("remove",e,n);var r=e.parentNode;if(!r)return;r.removeChild(e),this.applyChanges("redo-remove",e,null,r)},this.removeNodeList=apf.removeNodeList=function(e,t){this.applyRDB(["removeNodeList",e,null],t||{xmlNode:i});for(var n=[],r=0;r<e.length;r++){t&&n.push({pNode:e[r].parentNode,removedNode:e[r],beforeNode:e[r].nextSibling}),this.applyChanges("remove",e[r],t);var i=e[r].parentNode;i.removeChild(e[r]),this.applyChanges("redo-remove",e[r],null,i)}t&&!t.$filled&&(t.$filled=!0,t.extra.removeList=n)};var r={},i;this.$hasQueue=!1,this.applyChanges=function(e,t,n,s){if(n&&n.$dontapply)return;n&&!n.xmlNode&&(n.xmlNode=t);var o=s,u=t.nodeType==1?t:t.parentNode;!this.delayUpdate&&"|remove|move-away|".indexOf("|"+e+"|")>-1&&this.notifyQueued();var a,f,l,c,h,p,d,v,m,g,y={};while(u&&u.nodeType==1){a=u.getAttribute(this.xmlListenTag);if(a){l=a.split(";");for(c=0;c<l.length;c++){f=l[c];if(!f||y[f])continue;y[f]=!0,p=r[f],p||(r[f]=p=[]);if(!apf.isO3&&"|update|attribute|text|".indexOf("|"+e+"|")>-1){g=!1;for(h=0;h<p.length;h++)if(p[h]&&t==p[h][1]&&"|update|attribute|text|".indexOf("|"+p[h][0]+"|")>-1){p[h]=null,g=!0;continue}p.push([e,t,u,n,o]),m=!0;continue}apf.isO3||"|remove|move-away|move|add|".indexOf("|"+e+"|")>-1?this.$listeners[f]&&this.$listeners[f]([e,t,u,n,o]):(p.push([e,t,u,n,o]),m=!0)}}u=u.parentNode||s,u==s&&(s=null)}apf.xmldb.notifyQueued()},this.notifyQueued=function(){this.$hasQueue=!1;var e=r;r={},apf.setZeroTimeout.clearTimeout(i);for(var t in e){if(!t)continue;var n=e[t],s=this.$listeners[t];if(!n||!s)continue;for(var o=0;o<n.length;o++){if(!n[o])continue;s(n[o])}}},this.notifyListeners=function(e){var t=e.getAttribute(apf.xmldb.xmlListenTag);if(t){t=t.split(";");for(var n=0;n<t.length;n++)apf.all[t[n]].$xmlUpdate("synchronize",e,e)}},this.applyRDB=function(e,t){if(apf.xmldb.disableRDB)return;var n=t.localName||!t.xmlNode?e[1]&&e[1].length&&e[1][0]||e[1]:t.xmlNode;n.nodeType==2&&(n=n.ownerElement||n.selectSingleNode(".."));var r=apf.xmldb.getXmlDocId(n),i=apf.nameserver.get("model",r);!i&&apf.isO3&&(i=self[r]);if(!i){if(!apf.nameserver.getAll("remote").length)return;return}if(!i.rdb)return;var s=i.rdb;t.action?s.$queueMessage(e,i,t):(clearTimeout(s.queueTimer),s.$queueMessage(e,i,s),s.queueTimer=$setTimeout(function(){s.$processQueue(s)}))},this.copyConnections=function(e,t){try{t.setAttribute(this.xmlListenTag,e.getAttribute(this.xmlListenTag))}catch(n){}try{t.setAttribute(this.xmlIdTag,e.getAttribute(this.xmlIdTag))}catch(n){}},this.cleanXml=function(e){return typeof e!="string"?e:e.replace(t,"").replace(n,"><")},this.cleanNode=function(e){try{var t,n=e.selectNodes("descendant-or-self::node()[@"+this.xmlListenTag+"]");for(t=n.length-1;t>=0;t--)n[t].removeAttribute(this.xmlListenTag);n=e.selectNodes("descendant-or-self::node()[@"+this.xmlIdTag+"]");for(t=n.length-1;t>=0;t--)n[t].removeAttribute(this.xmlIdTag);n=e.selectNodes("descendant-or-self::node()[@"+this.xmlDocTag+"]");for(t=n.length-1;t>=0;t--)n[t].removeAttribute(this.xmlDocTag);n=e.selectNodes("descendant-or-self::node()[@a_loaded]");for(t=n.length-1;t>=0;t--)n[t].removeAttribute("a_loaded")}catch(r){}return e},this.copy=this.getCleanCopy=apf.getCleanCopy=function(e){return apf.xmldb.cleanNode(e.cloneNode(!0))},this.unbind=function(e){for(var t={},n=0;n<e.apf.all.length;n++)e.apf.all[n]&&e.apf.all[n].unloadBindings&&(t[e.apf.all[n].unloadBindings()]=!0);for(var r=0;r<this.$xmlDocLut.length;r++){if(!this.$xmlDocLut[r])continue;var i=this.$xmlDocLut[r].selectNodes("//self::node()[@"+this.xmlListenTag+"]");if(!i)continue;for(var n=0;n<i.length;n++){var s=i[n].getAttribute(this.xmlListenTag).split(";");for(var o=[],u=0;u<s.length;u++)t[s[u]]||o.push(s[u]);o.length!=s.length&&i[n].setAttribute(this.xmlListenTag,o.join(";"))}}window.clearInterval&&window.clearInterval(this.$gcInterval)},this.getXmlDocId=function(e,t){var n=e.ownerDocument.documentElement;apf.isChildOf(n,e)||(n=e);var r=(n||e).getAttribute(this.xmlDocTag)||this.$xmlDocLut.indexOf(n||e.ownerDocument||e);t&&apf.nameserver.get("model",r)!=t&&(r=null,n=e);if(!r||r==-1)r=this.$xmlDocLut.push(n||e.ownerDocument||e)-1,n&&n.setAttribute(this.xmlDocTag,String(r));return t&&apf.nameserver.register("model",r,t),r}},apf.http=function(){function getBinaryBlob(e,t,n){var r="----apfbound".appendRandomNumber(5),i="--",s="\r\n",o="",u=0;return n.multipart&&(t.setRequestHeader("Content-Type","multipart/form-data; boundary="+r),o+=i+r+s+'Content-Disposition: form-data; name="'+(n.filedataname||n.filename)+'"; filename="'+n.filename+'"'+s+"Content-Type: application/octet-stream"+s+s+e+s+i+r+i+s,u=o.length-e.length,e=o),{size:u,data:e}}this.queue=[null],this.callbacks={},this.cache={},this.timeout=this.timeout||1e4,this.autoroute=this.autoroute||!1,this["route-server"]=this["route-server"]||null,this.$uniqueId||(this.$uniqueId=apf.all.push(this)-1),this.toString=this.toString||function(){return"[Ajax.org Teleport Component : (HTTP)]"},this.getXml=function(e,t,n){return n||(n={}),n.useXML=!0,n.callback=t,this.get(e,n)},this.getJSON=function(e,t,n){return n||(n={}),n.callback=t,n.useJSON=!0,this.get(e,n)},this.get=this.$get=function(e,t){function c(e,t){u.setRequestHeader(e,t)}function S(){var i=self.navigator&&self.navigator.onLine?"File or Resource not available "+e:"Browser is currently working offline",s=self.navigator&&navigator.onLine?apf.ERROR:apf.TIMEOUT,o=t.callback?t.callback(null,s,{userdata:t.userdata,http:u,url:e,tpModule:n,id:r,message:i}):!1;o||n.clearQueueItem(r)}function x(e){var t;if(apf.isIE&&e){var n=window.onerror;window.onerror=function(){if(arguments.caller&&arguments.caller.callee==x)return window.onerror=n,!0;window.onerror=n;if(n)return n.apply(window,arguments)},u.send(o),window.onerror=n}else try{i&&u.sendAsBinary?(i.blob=getBinaryBlob(o,u,i),u.sendAsBinary(i.blob.data)):u.send(o)}catch(r){t=!0}if(t){S();return}i&&u.upload&&(u.upload.onprogress=function(e){apf.dispatchEvent("http.uploadprogress",{loaded:e.loaded-i.blob.size,extra:e,bubbles:!0})})}t||(t={});var n=this,r=t.id,i=apf.hasXhrBinary&&t.binary,s=t.async=t.async||i||typeof t.async=="undefined"||apf.isOpera||!1;apf.isWebkit&&(e=apf.html_entity_decode(e));var o=t.data||"";if(apf.isNot(r)){var u=apf.getHttpReq();r=this.queue.push({http:u,url:e,callback:t.callback,retries:0,options:t})-1}else{var u=this.queue[r].http;u.abort()}s&&(u.onreadystatechange=function(){if(!n.queue[r]||u.readyState!=4)return;s&&arguments.callee.caller?$setTimeout(function(){n.receive(r)}):n.receive(r)});var a=this.autoroute&&apf.isOpera?!0:t.autoroute||this.shouldAutoroute,f=a?this["route-server"]:e,l=[],h=!1;try{t.nocache&&(f=apf.getNoCacheUrl(f));var p=apf.config?apf.config["requested-with-getparam"]:null;p&&(f+=(f.indexOf("?")==-1?"?":"&")+encodeURIComponent(p)+"=1");var d=!1;"withCredentials"in t?d=t.withCredentials:d=apf.config&&apf.config["cors-with-credentials"]||!1,u.withCredentials=d;var v=this.method||t.method||"GET",m=apf.config?apf.config["csrf-header"]:null,g=apf.config?apf.config["csrf-token"]:null;v!=="GET"&&g&&(g=g.split("=").map(function(e){return encodeURIComponent(e)}).join("="),f+=(f.indexOf("?")==-1?"?":"&")+g),u.open(v,f,s),v!=="GET"&&m&&c("X-CSRF-Token",m),t.username&&c("Authorization","Basic "+apf.crypto.Base64.encode(t.username+":"+t.password)),p||c("X-Requested-With","XMLHttpRequest"),(!t.headers||!t.headers["Content-type"])&&c("Content-type",t.contentType||this.contentType||(this.useXML||t.useXML?"text/xml":"text/plain")),a&&(c("X-Route-Request",e),c("X-Proxy-Request",e),c("X-Compress-Response","gzip")),i&&(c("Cache-Control","no-cache"),c("X-File-Name",i.filename),c("X-File-Size",i.filesize),c("Content-Type","application/octet-stream"))}catch(y){h=y.message}if(h){var b=!1;if(!b&&this.autoroute&&!a)return this.shouldAutoroute=!0,t.autoroute=!0,this.get(e,t);if(!b){var w=t.callback?t.callback(null,apf.ERROR,{userdata:t.userdata,http:u,url:e,tpModule:this,id:r,message:"Permission denied accessing remote resource: "+e+"\nMessage: "+h}):!1;w||this.clearQueueItem(r);return}}this.$headerHook&&this.$headerHook(u);if(t.headers)for(var E in t.headers)c(E,t.headers[E]);return s?(apf.loadsLocalFilesSync&&location.protocol=="file:"&&e.indexOf("http://")==-1?$setTimeout(function(){x.call(n,!0)}):x.call(n),r):(x.call(this),this.receive(r))},this.exec||(this.exec=function(e,t,n,r){r||(r={});var i=t[0],s="";r.method||(r.method=e.toUpperCase()),r.callback||(r.callback=n),this.contentType="application/x-www-form-urlencoded",this.$get(apf.getAbsolutePath(apf.config.baseurl,i),r.method=="GET"?r:apf.extend({data:s},r))}),this.receive=function(id){if(!this.queue[id])return!1;var qItem=this.queue[id],http=qItem.http,callback=qItem.callback;if(qItem.async)try{http.status}catch(e){var _self=this;return $setTimeout(function(){_self.receive(id)},10)}var errorMessage=[],extra={tpModule:this,http:http,status:http.status,url:qItem.url,callback:callback,id:id,retries:qItem.retries||0,userdata:qItem.options.userdata};if(http.status>600)return this.$timeout(id);extra.data=qItem.options.useJSON?eval("("+http.responseText+")"):http.responseText;if(http.status>=400&&http.status<600||http.status<10&&(http.status!=0||!apf.isIE&&!http.responseText)){if(http.status==401){var auth=apf.document.getElementsByTagNameNS(apf.ns.apf,"auth")[0];if(auth){var wasDelayed=qItem.isAuthDelayed;qItem.isAuthDelayed=!0;if(auth.authRequired(extra,wasDelayed)===!0)return}}errorMessage.push("HTTP error ["+id+"]:"+http.status+"\n"+http.responseText)}if(qItem.options.useXML||this.useXML)if((http.responseText||"").replace(/^[\s\n\r]+|[\s\n\r]+$/g,"")=="")errorMessage.push("Received an empty XML document (0 bytes)");else try{var xmlDoc=http.responseXML&&http.responseXML.documentElement?apf.xmlParseError(http.responseXML):apf.getXmlDom(http.responseText);apf.supportNamespaces||xmlDoc.setProperty("SelectionLanguage","XPath"),extra.data=xmlDoc.documentElement}catch(e){errorMessage.push("Received invalid XML\n\n"+e.message)}if(errorMessage.length){extra.message=errorMessage.join("\n"),(!callback||!callback(extra.data,apf.ERROR,extra))&&this.clearQueueItem(id);return}return(!callback||!callback(extra.data,apf.SUCCESS,extra))&&this.clearQueueItem(id),extra.data},this.$timeout=function(e){if(!this.queue[e])return!1;var t=this.queue[e],n=t.http;try{n.status}catch(r){var i=this;return $setTimeout(function(){i.$timeout(e)},10)}var s=t.callback;n.abort();var o,u=s?s(null,apf.TIMEOUT,o={userdata:t.options.userdata,http:n,url:t.url,tpModule:this,id:e,message:"HTTP Call timed out",retries:t.retries||0}):!1;u||this.clearQueueItem(e)},this.retryTimeout=function(e,t,n,r,i){if(t==apf.TIMEOUT&&e.retries<(i||apf.maxHttpRetries))return e.tpModule.retry(e.id);r=r||new Error(apf.formatErrorString(0,this,"Communication "+(t==apf.TIMEOUT?"timeout":"error"),"Url: "+e.url+"\nInfo: "+e.message));if((n||apf).dispatchEvent("error",apf.extend({error:r,state:t,extra:e,bubbles:!0},e))===!1)return 2},this.clearQueueItem=function(e){return this.queue[e]?(apf.releaseHTTP&&!apf.isGecko&&apf.releaseHTTP(this.queue[e].http),this.queue[e]=null,delete this.queue[e],!0):!1},this.retry=function(e){if(!this.queue[e])return!1;var t=this.queue[e];return t.retries++,t.options.id=e,this.get(t.url,t.options),!0},this.cancel=function(e){e===null&&(e=this.queue.length-1);if(!this.queue[e])return!1;apf.isGecko&&this.queue[e].http.abort(),this.clearQueueItem(e)},!this.$loadAml&&!this.instantiate&&!this.call&&(this.$loadAml=function(e){var t=this.receive;for(var n=0,r=this.childNodes.length;n<r;n++){if(this.childNodes[n].nodeType!=1)continue;var i=this.childNodes[n].getAttribute("url"),s=self[this.childNodes[n].getAttribute("receive")||t],o={useXML:this.childNodes[n].getAttribute("type")=="XML",async:!apf.isFalse(this.childNodes[n].getAttribute("async"))};this[this.childNodes[n].getAttribute("name")]=function(e,t){return o.userdata=t,o.data=e,this.get(i,o)}}},this.instantiate=function(e){var t=e.getAttribute("src"),n={async:e.getAttribute("async")!="false",nocache:!0};this.getURL=function(e,r){return n.data=e,n.userdata=r,n.callback=this.callbacks.getURL,this.get(t,n)};var r="http"+Math.round(Math.random()*1e5);return apf.setReference(r,this),r+".getURL()"},this.call=function(e,t){this[e].call(this,t)})},apf.Init.run("http"),apf.DOMParser=function(){},apf.DOMParser.prototype=new function(){this.caseInsensitive=!0,this.preserveWhiteSpace=!1,this.$waitQueue={},this.$callCount=0;var e=[/\<\!(DOCTYPE|doctype)[^>]*>/,/&nbsp;/g,/<\s*\/?\s*(?:\w+:\s*)[\w-]*[\s>\/]/g],t="//@*[not(contains(local-name(), '.')) and not(translate(local-name(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz') = local-name())]";this.parseFromString=function(t,n,r){var i;if(this.caseInsensitive){var s=t.replace(e[0],"").replace(e[2],function(e){return e.toLowerCase()});this.supportNamespaces||(s=s.replace(/xmlns\=\"[^"]*\"/g,""));var i=apf.getXmlDom(s);apf.xmlParseError&&apf.xmlParseError(i),i=i.documentElement}else i=apf.getXmlDom(t,null,this.preserveWhiteSpace||apf.debug).documentElement;return this.parseFromXml(i,r)},this.parseFromXml=function(e,t){var n,r,i,s;t||(t={});if(!t.delayedRender&&!t.include)t.doc?(n=t.doc,r=t.docFrag||n.createDocumentFragment()):(n=new apf.AmlDocument,n.$aml=e,n.$domParser=this),t.host&&(n.$parentNode=t.host),i=this.$createNode(n,e.nodeType,e),(r||n).appendChild(i),t.htmlNode&&(i.$int=t.htmlNode);else{i=t.amlNode,n=t.doc;if(t.include)var o=i.childNodes,u=o.indexOf(t.beforeNode),a=u?o.splice(u,o.length-u):[]}this.$parseContext=[i,t],this.$addParseState(i,t||{});var f,l={},c=[],h=this,p;(p=function(e,t){var r,i,s,o,u=e.childNodes,a=0,f=t.length;for(;a<f;a++){i=h.$createNode(n,(s=t[a]).nodeType,s);if(!i)continue;u[r=u.length]=i,i.parentNode=e,r>0&&((i.previousSibling=u[r-1]).nextSibling=i),!i.render&&i.canHaveChildren&&(o=s.childNodes).length&&p(i,o);if(i.$parsePrio){if(i.$parsePrio=="001"){i.dispatchEvent("DOMNodeInsertedIntoDocument");continue}(l[i.$parsePrio]||c.push(i.$parsePrio)&&(l[i.$parsePrio]=[])).push(i)}}e.firstChild=u[0],e.lastChild=u[r]})(i,e.childNodes);if(t.include&&a.length){var d=o.length-1;o.push.apply(o,a);var v=o[d],m=o[d+1];(m.previousSibling=v).nextSibling=m,i.lastChild=o[o.length-1]}if(t.delay)return i.$parseOptions={prios:c,nodelist:l},r||n;c.sort();var g,y,b,w;for(g=0,b=c.length;g<b;g++){f=l[c[g]];for(y=0,w=f.length;y<w;y++)f[y].dispatchEvent("DOMNodeInsertedIntoDocument")}return this.$waitQueue[i.$uniqueId]&&this.$waitQueue[i.$uniqueId].$shouldWait?r||n:(t.timeout?$setTimeout(function(){h.$continueParsing(i,t)}):this.$continueParsing(i,t),r||n)},this.$isPaused=function(e){return this.$waitQueue[e.$uniqueId]&&this.$waitQueue[e.$uniqueId].$shouldWait>0},this.$addParseState=function(e,t){var n=this.$waitQueue[e.$uniqueId]||(this.$waitQueue[e.$uniqueId]=[]);return n.pushUnique(t),n},this.$pauseParsing=function(e,t){var n=this.$waitQueue[e.$uniqueId];n.$shouldWait||(n.$shouldWait=0),n.$shouldWait++},this.$continueParsing=function(e,t){e||(e=apf.document.documentElement);var n=e.$uniqueId;if(n in this.$waitQueue){var r=this.$waitQueue[n];if(r.$shouldWait&&--r.$shouldWait)return!1;var i=e.parentNode;while(i&&i.nodeType==1){if(this.$waitQueue[i.$uniqueId]&&this.$waitQueue[i.$uniqueId].$shouldWait)return!1;i=i.parentNode}var s=apf.all[n];delete this.$waitQueue[n];if(s)for(var o=0;o<r.length;o++)this.$parseState(s,r[o])}else this.$parseState(e,t||{});delete this.$parseContext},this.$parseState=function(e,t){this.$callCount++;if(e.$parseOptions){var n=e.$parseOptions.prios,r=e.$parseOptions.nodelist,i,s,o,u,a;delete e.$parseOptions,n.sort();for(i=0,o=n.length;i<o;i++){var f=r[n[i]];for(s=0,u=f.length;s<u;s++){if(!(a=f[s]).parentNode||a.$amlLoaded)continue;f[s].dispatchEvent("DOMNodeInsertedIntoDocument")}}}!t.ignoreSelf&&!e.$amlLoaded&&e.dispatchEvent("DOMNodeInsertedIntoDocument"),function l(e){var t,n;for(var r=0,i=e.length;r<i;r++)(t=e[r]).$amlLoaded||t.dispatchEvent("DOMNodeInsertedIntoDocument"),!t.render&&(n=t.childNodes).length&&l(n)}(e.childNodes),!--this.$callCount&&!t.delay&&apf.queue.empty(),t.callback&&t.callback.call(e.ownerDocument)},this.$createNode=function(e,t,n,r,i,s){var o;switch(t){case 1:var u,a;n?((r=n.namespaceURI||apf.ns.xhtml)&&!(a=e.$prefixes[r])&&(e.$prefixes[a=n.prefix||n.scopeName||""]=r,e.$namespaceURIs[r]=a,!e.namespaceURI&&!a&&(e.namespaceURI=r,e.prefix=a)),i=n.baseName||n.localName||n.tagName.split(":").pop()):a=e.$prefixes[r]||"";var f=apf.namespaces[r].elements;o=new(f[i]||f["@default"])(null,i),o.prefix=a||"",o.namespaceURI=r,o.tagName=a?a+":"+i:i;if(n){(u=n.getAttribute("id"))&&!self[u]&&o.$propHandlers.id.call(o,o.id=u);var l=n.attributes,c;for(var h,p,d=0,v=l.length;d<v;d++)o.attributes.push(p=new apf.AmlAttr(o,c=(h=l[d]).nodeName,h.nodeValue)),c=="render"?o.render=!0:c.substr(0,2)=="on"&&p.$triggerUpdate()}break;case 2:o=new apf.AmlAttr,o.name=o.nodeName=i;if(s||(s=n&&n.nodeValue))o.value=o.nodeValue=s;n?n.namespaceURI&&!(o.prefix=e.$namespaceURIs[o.namespaceURI=n.namespaceURI])&&(e.$prefixes[o.prefix=n.prefix||n.scopeName]=o.namespaceURI):o.prefix=e.$prefixes[r];break;case 3:n&&(s=n&&n.nodeValue);if(!this.preserveWhiteSpace&&!(s||"").trim())return;o=new apf.AmlText,o.nodeValue=s||n&&n.nodeValue;break;case 7:var m=i||n&&n.nodeName;o=new apf.aml.processingInstructions[m],o.target=o.nodeName=m,o.data=o.nodeValue=s||n&&n.nodeValue;break;case 4:o=new apf.AmlCDATASection,o.nodeValue=s||n&&n.nodeValue;break;case 5:o=new apf.AmlNode,o.nodeType=t;break;case 6:o=new apf.AmlNode,o.nodeType=t;break;case 8:o=new apf.AmlComment,o.nodeValue=s||n&&n.nodeValue;break;case 9:o=new apf.AmlDocument,o.$domParser=this;break;case 10:o=new apf.AmlNode,o.nodeType=t;break;case 11:o=new apf.AmlDocumentFragment}return o.ownerDocument=e,o.$aml=n,o}},apf.AmlNamespace=function(){this.elements={},this.processingInstructions={}},apf.AmlNamespace.prototype={setElement:function(e,t){return this.elements[e]=t},setProcessingInstruction:function(e,t){this.processingInstructions[e]=t}},apf.aml=new apf.AmlNamespace,apf.setNamespace("http://ajax.org/2005/aml",apf.aml),apf.__AMLNODE__=16384,apf.AmlNode=function(){this.$init(function(){this.childNodes=[]})},function(){this.toString=function(){return this.nodeName?"["+this.nodeName.uCaseFirst()+" Node]":"["+this.localName.uCaseFirst()+" Element Node, <"+(this.prefix?this.prefix+":":"")+this.localName+" "+this.attributes.join(" ")+" /> : "+(this.name||this.$uniqueId||"")+"]"},this.$regbase=this.$regbase|apf.__AMLNODE__,this.NODE_ELEMENT=1,this.NODE_ATTRIBUTE=2,this.NODE_TEXT=3,this.NODE_CDATA_SECTION=4,this.NODE_ENTITY_REFERENCE=5,this.NODE_ENTITY=6,this.NODE_PROCESSING_INSTRUCTION=7,this.NODE_COMMENT=8,this.NODE_DOCUMENT=9,this.NODE_DOCUMENT_TYPE=10,this.NODE_DOCUMENT_FRAGMENT=11,this.NODE_NOTATION=12,this.ownerDocument=null,this.nodeValue="",this.namespaceURI="",this.appendChild=this.insertBefore=function(e,t,n){function h(){e.$pHtmlNode=l.canHaveChildren?l.$int:document.body;if(document.adoptNode&&e.$ext&&e.$ext.nodeType==1){var r=[],i=apf.getArrayFromNodelist(e.$ext.getElementsByTagName("iframe"));e.$ext.tagName=="IFRAME"&&document.adoptNode(e.$ext);for(var s=0;s<i.length;s++)r[s]=[i[s].parentNode,i[s].nextSibling,document.adoptNode(i[s])]}var f=t;if(!c&&!n&&e.$ext&&!e.$coreHtml){f=t;while(f&&!f.$altExt&&!f.$ext)f=f.nextSibling;e.$pHtmlNode.insertBefore(e.$altExt||e.$ext,f&&(f.$altExt||f.$ext)||null);for(var s=r.length-1;s>=0;s--)r[s][0].insertBefore(r[s][2],r[s][1]);r=[]}e.dispatchEvent("DOMNodeInserted",{$beforeNode:t,relatedNode:l,$isMoveWithinParent:o,$oldParentHtmlNode:u,$oldParent:a,bubbles:!0});if(c&&!n&&t&&e.$ext&&!e.$coreHtml){f=t;while(f&&!f.$altExt&&!f.$ext)f=f.nextSibling;e.$pHtmlNode.insertBefore(e.$altExt||e.$ext,f&&(f.$altExt||f.$ext)||null);for(var s=r.length-1;s>=0;s--)r[s][0].insertBefore(r[s][2],r[s][1])}}if(this.nodeType==this.NODE_DOCUMENT){if(this.childNodes.length)throw new Error(apf.formatErrorString(0,this,"Insertbefore DOM operation","Only one top level element is allowed in an AML document."));this.documentElement=e}if(e==t)return e;if(this==e)throw new Error(apf.formatErrorString(0,this,"Insertbefore DOM operation","Cannot append node as a child of itself."));if(e.nodeType==this.NODE_DOCUMENT_FRAGMENT){var r=e.childNodes.slice(0);for(var i=0,s=r.length;i<s;i++)this.insertBefore(r[i],t);return e}var o=e.parentNode==this,u=e.$pHtmlNode,a=e.parentNode,f=-1,l=this;if(t){f=this.childNodes.indexOf(t);if(f<0)return!1}e.ownerDocument||(e.ownerDocument=this.ownerDocument||apf.ownerDocument),e.parentNode&&e.removeNode(o,!0),e.parentNode=this,t&&(f=this.childNodes.indexOf(t)),t&&(e.nextSibling=t,e.previousSibling=t.previousSibling,t.previousSibling=e,e.previousSibling&&(e.previousSibling.nextSibling=e)),f>=0?this.childNodes=this.childNodes.slice(0,f).concat(e,this.childNodes.slice(f)):(f=this.childNodes.push(e)-1,e.nextSibling=null,f>0?(e.previousSibling=this.childNodes[f-1],e.previousSibling.nextSibling=e):e.previousSibling=null),this.firstChild=this.childNodes[0],this.lastChild=this.childNodes[this.childNodes.length-1];var c=!e.$amlLoaded,p=this.nodeType==this.NODE_DOCUMENT?this:this.ownerDocument;return!p||p.$domParser.$isPaused(this)?e:this.nodeType==this.NODE_DOCUMENT_FRAGMENT||!this.$amlLoaded?e:(c&&!e.render&&(this.ownerDocument||this).$domParser.$continueParsing(e,{delay:!0}),h(),e)},this.removeNode=function(e,t){return!this.parentNode||!this.parentNode.childNodes?this:(this.parentNode.childNodes.remove(this),this.$amlLoaded&&!apf.isDestroying&&(this.dispatchEvent("DOMNodeRemoved",{relatedNode:this.parentNode,bubbles:!0,$doOnlyAdmin:e}),!t&&!e&&this.$ext&&this.$ext.parentNode&&this.$ext.parentNode.removeChild(this.$ext)),this.parentNode.firstChild==this&&(this.parentNode.firstChild=this.nextSibling),this.parentNode.lastChild==this&&(this.parentNode.lastChild=this.previousSibling),this.nextSibling&&(this.nextSibling.previousSibling=this.previousSibling),this.previousSibling&&(this.previousSibling.nextSibling=this.nextSibling),this.$pHtmlNode=this.parentNode=this.previousSibling=this.nextSibling=null,this)},this.removeChild=function(e){return e.removeNode(),this},this.replaceChild=function(){},this.cloneNode=function(e){return e&&this.nodeType==1?this.ownerDocument.$domParser.parseFromXml(this,{doc:this.ownerDocument,delay:!0}).childNodes[0]:this.ownerDocument.$domParser.$createNode(this.ownerDocument,this.nodeType,this)},this.canDispatch=function(e,t){},this.compareDocumentPosition=function(e){},this.hasAttributes=function(){return this.attributes&&this.attributes.length},this.hasChildNodes=function(){return this.childNodes&&this.childNodes.length},this.isDefaultNamespace=function(e){if(t.nodeType==1&&!this.prefix)return this.namespaceURI==e;var t=this.parentNode||this.ownerElement;return t&&t.isDefaultNamespace(e)},this.lookupNamespaceURI=function(e){if(t.nodeType==1&&this.namespaceURI&&e==this.prefix)return this.namespaceURI;var t=this.parentNode||this.ownerElement;return t&&t.lookupNamespaceURI(e)},this.lookupPrefix=function(e){if(this.nodeType==1&&e==this.namespaceURI&&this.prefix)return this.prefix;var t=this.parentNode||this.ownerElement;return t&&t.lookupPrefix(e)},this.normalize=function(){},this.selectNodes=function(e,t){if(!apf)return;return apf.XPath||apf.runXpath(),apf.XPath.selectNodes(e,t||(this.nodeType==9?this.documentElement:this))},this.selectSingleNode=function(e,t){if(!apf)return;return apf.XPath||apf.runXpath(),apf.XPath.selectNodes(e,t||(this.nodeType==9?this.documentElement:this))[0]}}.call(apf.AmlNode.prototype=new apf.Class),apf.AmlElement=function(e,t){var n=this.$init;this.$init=function(e,t,r){this.$supportedProperties=this.$supportedProperties.slice();var i,s,o;s=this.$propHandlers,o=this.$propHandlers={};for(i in s)o[i]=s[i];s=this.$booleanProperties,o=this.$booleanProperties={};for(i in s)o[i]=s[i];return n.call(this,e,t,r)},this.$init(function(e,t,n){this.$events={},this.$inheritProperties={},this.attributes=new apf.AmlNamedNodeMap(this),this.nodeFunc=t,this.localName=e;if(n){var r,i,s,o,u;n.childNodes&&(r=n.childNodes,delete n.childNodes);for(i in n){if(i=="htmlNode")continue;u=new apf.AmlAttr(this,i,n[i]),i=="id"?this.$propHandlers.id.call(this,this.id=n.id):i=="hotkey"?this.$propHandlers.hotkey.call(this,this.hotkey=n.hotkey):i.substr(0,2)=="on"&&u.$triggerUpdate(),this.attributes.push(u)}this.ownerDocument||(this.ownerDocument=apf.document,this.prefix="a",this.namespaceURI=apf.ns.aml,this.tagName=e);if(r){this.childNodes=r;for(s=0,o=r.length;s<o;s++)r[s].nextSibling=r[s+1]||null,r[s].previousSibling=r[s-1]||null,r[s].parentNode=this;this.firstChild=r[0]||null,this.lastChild=r[r.length-1]||null}this.$aml=apf.$emptyNode||(apf.$emptyNode=apf.getXml("<empty />"))}}),t&&n.call(this,t,apf.NODE_HIDDEN,e)},function(){this.nodeType=this.NODE_ELEMENT,this.canHaveChildren=!0,this.$propHandlers={id:function(e){if(this.name==e||!e)return;self[this.name]==this&&(self[this.name]=null,apf.nameserver.remove(this.localName,this),apf.nameserver.remove("all",this));if(!self[e]||!self[e].hasFeature)try{self[e]=this}catch(t){}apf.nameserver.register(this.localName,e,this),apf.nameserver.register("all",e,this),this.name=e}},this.$booleanProperties={},this.$inheritProperties={},this.$supportedProperties=[],this.getElementsByTagName=function(e,t){e=e.toLowerCase();var n,r,i,s=this.childNodes,o=[];for(r=0,i=s.length;r<i;r++){if((n=s[r]).nodeType!=1)continue;(n.tagName==e||e=="*")&&o.push(n),!t&&n.nodeType==1&&(o=o.concat(n.getElementsByTagName(e)))}return o},this.getElementsByTagNameNS=function(e,t,n){t=t.toLowerCase();var r,i,s,o=this.childNodes,u=[];for(i=0,s=o.length;i<s;i++){if((r=o[i]).nodeType!=1)continue;r.namespaceURI==e&&(r.localName==t||t=="*")&&u.push(r),!n&&r.nodeType==1&&(u=u.concat(r.getElementsByTagNameNS(e,t)))}return u},this.setAttribute=function(e,t,n){e=e.toLowerCase();var r=this.attributes.getNamedItem(e);if(!r){this.attributes.push(r=new apf.AmlAttr(this,e,t));if(!this.$amlLoaded&&e!="id"&&e!="hotkey")return;n?r.$setValue(t):(r.dispatchEvent("DOMNodeInsertedIntoDocument",{relatedNode:this}),r.dispatchEvent("DOMNodeInserted",{relatedNode:this,bubbles:!0}));return}var i=r.nodeValue;r.$setValue(t);if(n||!this.$amlLoaded)return;r.$triggerUpdate(null,i)},this.setAttributeNode=function(e){this.attributes.setNamedItem(e)},this.setAttributeNS=function(e,t,n){return this.setAttribute(t,n)},this.hasAttribute=function(e){return this.getAttributeNode(e)?!0:!1},this.hasAttributeNS=function(e,t){return this.hasAttribute(t)},this.removeAttribute=function(e){return this.attributes.removeNamedItem(e),this},this.removeAttributeNS=function(e,t){return this.removeAttribute(t)},this.removeAttributeNode=function(e){this.attributes.removeNamedItem(e.name)},this.getAttribute=function(e,t){var n=this.attributes.getNamedItem(e);return n?t?n.inheritedValue||n.nodeValue:n.nodeValue:null},this.getAttributeNode=function(e){return this.attributes.getNamedItem(e)},this.getBoundingClientRect=function(){return new apf.AmlTextRectangle(this)},this.querySelector=function(){},this.querySelectorAll=function(){},this.scrollIntoView=function(){},this.replaceMarkup=function(e,t){t||(t={}),t.$intAML||(t.$intAML=this.$aml),t.$int||(t.$int=this.$int),t.clear=!0;for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];r.destroy&&r.destroy(!0),r.$ext!=this.$int&&apf.destroyHtmlNode(r.$ext)}this.childNodes.length=0,t.noLoadingMsg!==!1&&(this.$int.innerHTML="<div class='loading'>loading...</div>"),this.insertMarkup(e,t)},this.insertMarkup=function(e,t){var n=this,r=new apf.XiInclude;e.trim().charAt(0)=="<"&&(e=apf.getXml(e)),r.setAttribute("href",e),t&&t.clear&&r.setAttribute("clear",!0),r.options=t,r.callback=function(i){n.dispatchEvent("afteramlinserted",{src:e}),t&&t.callback&&t.callback(i),setTimeout(function(){r.destroy(!0,!0)})},this.appendChild(r)},this.serialize=function(e){if(e||!this.firstChild)return"<"+(this.prefix?this.prefix+":"+this.localName+" xmlns:"+this.prefix+'="'+this.namespaceURI+'"':this.localName)+(this.attributes&&this.attributes.length?" ":"")+(this.attributes&&this.attributes.join(" ")||"")+"/>";var t=["<"+(this.prefix?this.prefix+":"+this.localName+" xmlns:"+this.prefix+'="'+this.namespaceURI+'"':this.localName)+(this.attributes&&this.attributes.length?" ":"")+(this.attributes&&this.attributes.join(" ")||"")+">"];for(var n=this.firstChild;n;n=n.nextSibling)t.push(n.serialize());return t.join("")+"</"+(this.prefix?this.prefix+":"+this.localName:this.localName)+">"},this.$setInheritedAttribute=function(e){var t,n=this,r=!1;t=n.getAttribute(e);if(!t){n=n.parentNode;while(n&&n.nodeType==1&&!(t=n.getAttribute(e,!0)))n=n.parentNode;r=!0}return!t&&apf.config&&e&&(t=apf.config[e]),t&&this.$clearDynamicProperty(e),r&&(this.$inheritProperties[e]=2),t&&(typeof t=="string"&&(t.indexOf("{")>-1||t.indexOf("[")>-1)?this.$setDynamicProperty(e,t):this.setProperty(e,t,!1,!1,2)),t},this.addEventListener("DOMNodeInserted",function(e){if(e.currentTarget!=this||e.$isMoveWithinParent||!e.$oldParent)return;var t,n,r=apf.config.$inheritProperties;for(var i in r)t=apf.getInheritedAttribute(e.$oldParent,i),n=apf.getInheritedAttribute(this.parentNode,i),t!=n&&function s(e){var t,o,u,a;for(t=0,o=e.length;t<o;t++){u=e[t];if(u.nodeType!=1&&u.nodeType!=7)continue;a=u.$inheritProperties[i];if(r[i]==1&&!a)s(u.childNodes);else if(!(a<0)){if(a==3){var f=u[i];u[i]=null}u.setProperty(i,a!=3?n:f,!1,!1,a)}}}([this])}),this.$handlePropSet=function(e,t,n){this.$booleanProperties[e]&&(t=apf.isTrue(t)),this[e]=t;var r;return(r=this.$propHandlers&&this.$propHandlers[e]||this.nodeFunc==apf.NODE_VISIBLE&&apf.GuiElement&&apf.GuiElement.propHandlers[e]||null)&&r.call(this,t,e,n)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t,n,r,i=this.attributes;for(n=0,r=i.length;n<r;n++)i[n].dispatchEvent("DOMNodeInsertedIntoDocument")},!0),this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.$amlLoaded=!0})}.call(apf.AmlElement.prototype=new apf.AmlNode),apf.AmlCharacterData=function(){this.data="",this.length=0,this.$init(!0),this.appendData=function(e){this.dispatchEvent("DOMCharacterDataModified",{value:e})},this.deleteData=function(e,t){this.dispatchEvent("DOMCharacterDataModified",{offset:e,count:t})},this.insertData=function(e,t){this.dispatchEvent("DOMCharacterDataModified",{offset:e,count:t})},this.replaceData=function(e,t,n){this.dispatchEvent("DOMCharacterDataModified",{offset:e,count:t,value:n})},this.substringData=function(e,t){}},apf.AmlCharacterData.prototype=new apf.AmlNode,apf.AmlText=function(e){this.$init(e)},function(){this.nodeType=this.NODE_TEXT,this.nodeName="#text",this.serialize=function(){return apf.escapeXML(this.nodeValue)},this.$setValue=function(e){this.dispatchEvent("DOMCharacterDataModified",{bubbles:!0,prevValue:this.nodeValue,newValue:this.nodeValue=e}),this.$amlLoaded&&this.$ext&&(this.$ext.nodeValue=e)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t;if(!(t=this.parentNode.$int)||this.parentNode.hasFeature(apf.__CHILDVALUE__))return;this.$amlLoaded=!0;var n=this.nodeValue;if(apf.config.liveText&&!this.parentNode.hasFeature(apf.__CHILDVALUE__)&&(n.indexOf("{")>-1||n.indexOf("[")>-1)){this.$supportedProperties=[],this.$propHandlers={},this.$booleanProperties={},this.$inheritProperties={},this.$propHandlers.calcdata=apf.LiveMarkupPi.prototype.$propHandlers.calcdata,this.$setInheritedAttribute=apf.AmlElement.prototype.$setInheritedAttribute,this.implement(apf.StandardBinding),t.appendChild(this.$ext=document.createElement("span")),this.$setDynamicProperty("calcdata",this.nodeValue);return}if(apf.hasTextNodeWhiteSpaceBug){var n=n.replace(/[\t\n\r ]+/g," ");n&&n!=" "&&(this.$ext=t.appendChild(t.ownerDocument.createTextNode(n)))}else this.$ext=t.appendChild(t.ownerDocument.createTextNode(n))},!0)}.call(apf.AmlText.prototype=new apf.AmlCharacterData),apf.AmlAttr=function(e,t,n){this.$init(),e&&(this.ownerElement=e,this.ownerDocument=e.ownerDocument),this.nodeName=this.name=t,this.nodeValue=this.value=n},function(){this.nodeType=this.NODE_ATTRIBUTE,this.MODIFICATION=1,this.ADDITION=2,this.REMOVAL=3,this.serialize=this.toString=function(){return this.name+'="'+apf.escapeXML(String(this.value))+'"'},this.$setValue=function(e){this.nodeValue=this.value=e,this.specified=!0,this.ownerElement.dispatchEvent("DOMAttrModified",{relatedNode:this,attrChange:this.MODIFICATION,attrName:this.name,newValue:e,prevValue:this.$lastValue||"",bubbles:!0}),this.$lastValue=e},this.$triggerUpdate=function(e,t){var n=this.name,r=this.value||this.nodeValue,i=this.ownerElement,s=n.substr(0,2)=="on";if(!this.specified)if(s&&this.$lastValue==r||n=="id"&&i.id){this.specified=!0;return}if(s){i.$events[n]&&i.removeEventListener(n.substr(2),i.$events[n]),r&&i.addEventListener(n,i.$events[n]=typeof r=="string"?new Function("event",r):r);return}this.specified&&i.$clearDynamicProperty(n),typeof r=="string"&&(i.$attrExcludePropBind[n]||r.indexOf("{")>-1||r.indexOf("[")>-1)?i.$setDynamicProperty(n,r):i.setProperty(n,r),this.specified?i.dispatchEvent("DOMAttrModified",{relatedNode:this,attrChange:this.MODIFICATION,attrName:n,newValue:r,prevValue:this.$lastValue||"",bubbles:!0}):this.specified=!0,this.$lastValue=r},this.addEventListener("DOMNodeInsertedIntoDocument",this.$triggerUpdate)}.call(apf.AmlAttr.prototype=new apf.AmlNode),apf.AmlCDATASection=function(e){this.nodeType=this.NODE_CDATA_SECTION,this.nodeName="#cdata-section",this.$init(e)},apf.AmlCDATASection.prototype=new apf.AmlText(!0),apf.AmlCDATASection.prototype.serialize=function(){return"<![CDATA["+this.nodeValue+"]]>"},apf.AmlComment=function(e){this.nodeType=this.NODE_COMMENT,this.nodeName="#comment",this.$init(e)},function(){this.serialize=function(){return"<!--"+this.nodeValue+"-->"},this.$setValue=function(e){this.dispatchEvent("DOMCharacterDataModified",{bubbles:!0,newValue:e,prevValue:this.nodeValue})}}.call(apf.AmlComment.prototype=new apf.AmlCharacterData),apf.AmlConfiguration=function(e){this.parameterNames=[],this.$init(e)},function(){this.setParameter=this.setProperty,this.getParameter=this.getProperty,this.canSetParameter=function(e,t){return this.parameterNames.indexOf(e)>-1}}.call(apf.AmlConfiguration.prototype=new apf.Class),apf.AmlDocument=function(){this.$prefixes={},this.$namespaceURIs={},this.domConfig=new apf.AmlConfiguration,this.$init()},function(){this.nodeType=this.NODE_DOCUMENT,this.nodeFunc=apf.NODE_HIDDEN,this.nodeName="#document",this.$amlLoaded=!0,this.activeElement=null,this.doctype=null,this.domConfig=null,this.implementation=null,this.characterSet=apf.characterSet,this.documentElement=null,this.getElementById=function(e){return self[e]},this.getElementsByTagName=function(e){var t,n=(t=this.documentElement).getElementsByTagName(e);return(e=="*"||t.tagName==e)&&n.unshift(t),n},this.getElementsByTagNameNS=function(e,t){var n,r=(n=this.documentElement).getElementsByTagNameNS(e,t);return(t=="*"||n.tagName==t&&n.namespaceURI==e)&&r.unshift(n),r},this.createElement=function(e){return this.$domParser.$createNode(this,this.NODE_ELEMENT,null,this.namespaceURI,e)},this.createElementNS=function(e,t){return this.$domParser.$createNode(this,this.NODE_ELEMENT,null,e,t)},this.importNode=function(e,t){return t&&e.nodeType==1?this.$domParser.parseFromXml(e,{doc:this,delay:!0}).childNodes[0]:this.$domParser.$createNode(this,e.nodeType,e)},this.createAttribute=function(e){return this.$domParser.$createNode(this,this.NODE_ATTRIBUTE,null,this.nameSpaceURI,e)},this.createAttributeNS=function(e,t){return this.$domParser.$createNode(this,this.NODE_ATTRIBUTE,null,e,t)},this.createEvent=function(){return new apf.AmlEvent},this.createComment=function(e){return this.$domParser.$createNode(this,this.NODE_COMMENT,null,null,null,e)},this.createProcessingInstruction=function(e,t){return this.$domParser.$createNode(this,this.NODE_PROCESSING_INSTRUCTION,null,null,e,t)},this.createCDATASection=function(e){return this.$domParser.$createNode(this,this.NODE_CDATA_SECTION,null,null,null,e)},this.createTextNode=function(e){return this.$domParser.$createNode(this,this.NODE_TEXT,null,null,null,e)},this.createDocumentFragment=function(){return this.$domParser.$createNode(this,this.NODE_DOCUMENT_FRAGMENT)},this.querySelector=function(){},this.querySelectorAll=function(){},this.hasFocus=function(){}}.call(apf.AmlDocument.prototype=new apf.AmlNode),apf.AmlDocumentFragment=function(e){this.$init(e)},apf.AmlDocumentFragment.prototype=new apf.AmlNode,apf.AmlDocumentFragment.prototype.nodeName="#document-fragment",apf.AmlDocumentFragment.prototype.nodeType=apf.AmlDocumentFragment.prototype.NODE_DOCUMENT_FRAGMENT,apf.AmlEvent=function(e,t){this.name=e;var n;for(n in t)this[n]=t[n]},apf.AmlEvent.prototype={bubbles:!1,cancelBubble:!1,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0},stop:function(){this.returnValue=!1,this.cancelBubble=!0}},apf.AmlNamedNodeMap=function(e){this.$host=e},function(){this.getNamedItem=function(e){for(var t=0;t<this.length;t++)if(this[t].name==e)return this[t];return!1},this.setNamedItem=function(e){var t=e.name;for(var n,r=this.length-1;r>=0;r--)if(this[r].name==t){this[r].ownerElement=null,this.splice(r,1);break}this.push(e),e.ownerElement=this.$host,e.ownerDocument=this.$host.ownerDocument,e.$triggerUpdate()},this.removeNamedItem=function(e){for(var t,n=this.length-1;n>=0;n--)if(this[n].name==e){t=this[n],this.splice(n,1);break}if(!t)return!1;var r=t.nodeValue;return t.nodeValue=t.value="",t.$triggerUpdate(null,r),t.ownerElement=null,t.nodeValue=t.value=r,t},this.item=function(e){return this[e]},this.length=0,this.splice=function(e,t){for(var n=e,r=this.length-t;n<r;n++)this[n]=this[n+1];delete this[n],this.length-=t},this.push=function(e){return this[this.length++]=e,this.length},this.join=function(e){var t=[];for(var n,r,i=0,s=this.length;i<s;i++)(n=(r=this[i]).ownerElement)&&n.$inheritProperties[r.nodeName]!=2&&t.push(this[i]);return t.join(e)}}.call(apf.AmlNamedNodeMap.prototype={}),apf.AmlProcessingInstruction=function(e){this.$init(e)},function(){this.nodeType=this.NODE_PROCESSING_INSTRUCTION,this.data=null,this.target=null,this.serialize=function(){return"<?"+this.target+"\n"+apf.escapeXML(this.nodeValue)+"\n?>"},this.reload=function(){this.$handlePropSet("data",this.data)},this.$attrExcludePropBind=apf.extend({calcdata:0},this.$attrExcludePropBind),this.getAttribute=function(){},this.$setInheritedAttribute=apf.AmlElement.prototype.$setInheritedAttribute,this.$supportedProperties=[],this.$propHandlers={},this.$booleanProperties={},this.$inheritProperties={},this.$setValue=function(e){this.setProperty("data",e)},this.$handlePropSet=function(e,t,n){this[e]=t,e=="data"?(this.$clearDynamicProperty("calcdata"),this.$setDynamicProperty("calcdata",t)):e!="target"&&this.$propHandlers[e]&&this.$propHandlers[e].call(this,t,e)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t=e.pHtmlNode;if(!t&&(this.parentNode.$bindingRule||!(t=this.parentNode.$int)))return;t.appendChild(this.$ext=document.createElement("span")),this.$ext.host=this,this.$setDynamicProperty("calcdata",this.data)},!0),this.$destroy=function(){this.$clearDynamicProperty("calcdata"),this.$propHandlers.calcdata.call(this,"")}}.call(apf.AmlProcessingInstruction.prototype=new apf.AmlNode),apf.AmlTextRectangle=function(e){function n(){var e=t.getAbsolutePosition(t.$ext);t.setProperty("left",e[0]),t.setProperty("top",e[1]),t.setProperty("right",document.documentElement.offsetWidth-e[0]),t.setProperty("bottom",document.documentElement.offsetWidth-e[1])}var t=this;e.addEventListener("prop.width",n),e.addEventListener("prop.height",n),e.addEventListener("prop.left",n),e.addEventListener("prop.top",n),n.call(e)},apf.AmlTextRectangle.prototype=new apf.Class,apf.xhtml=new apf.AmlNamespace,apf.setNamespace("http://www.w3.org/1999/xhtml",apf.xhtml),apf.XhtmlElement=function(e,t){this.$init(t||!0,apf.NODE_VISIBLE,e),this.$xoe=this.addEventListener,this.addEventListener=this.$xae,this.removeEventListener=this.$xre;var n=this;this.$de=function(e){n.dispatchEvent(e.type,null,e)}},function(){var e={contextmenu:1,keydown:1,keypress:1,keyup:1,DOMNodeInserted:2,DOMNodeInsertedIntoDocument:2,DOMNodeRemoved:2,DOMNodeRemovedFromDocument:2};this.$xae=function(t,n){this.$xoe.apply(this,arguments);if(e[t]>(this.editable?0:1)||t.substr(0,5)=="prop.")return;this.$ext&&(t.substr(0,2)=="on"&&(t=t.substr(2)),apf.addListener(this.$ext,t,this.$de))},this.$xre=function(e,t){apf.AmlElement.prototype.removeEventListener.apply(this,arguments),this.$ext&&apf.removeListener(this.$ext,e,this.$de)},this.$handlePropSet=function(e,t,n,r){this.$booleanProperties[e]&&(t=apf.isTrue(t)),this[e]=t;var i=this.$propHandlers&&this.$propHandlers[e]||apf.GuiElement.propHandlers[e];i?i.call(this,t,null,e):this.$int&&(n||this.$amlLoaded)&&this.$int.setAttribute(apf.isIE&&apf.isIE<8&&e=="class"?"className":e,t)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t;if(!(t=this.$pHtmlNode=this.parentNode.$int))return;var n,r=this.$aml;r?(r.serialize?n=r.serialize():(r=r.cloneNode(!1),n=r.xml||r.nodeValue),n=n.replace(/ on\w+="[^"]*"| on\w+='[^']*'/g,""),this.$ext=this.$int=apf.insertHtmlNode(null,t,null,apf.html_entity_decode(n))):this.$ext=this.$int=t.appendChild(document.createElement(this.localName)),this.localName!="a"&&(this.$ext.host=this),this.style=this.$ext.style},!0),this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.$amlLoaded=!0,this.$setLayout&&this.$setLayout()})}.call(apf.XhtmlElement.prototype=new apf.AmlElement),apf.Init.addConditional(function(){if(apf.isO3)return;var e=apf.XhtmlElement.prototype;e.implement(apf.Anchoring),e.$drawn=!0,e.$setLayout=apf.GuiElement.prototype.$setLayout,e.addEventListener("DOMNodeInserted",function(e){e.currentTarget==this&&"vbox|hbox|table".indexOf(this.parentNode.localName)==-1&&this.$setLayout()})},null,["interactive"]),apf.xhtml.setElement("@default",apf.XhtmlElement),apf.XhtmlBodyElement=function(e,t){this.$init(t||"body",apf.NODE_VISIBLE,e)},function(){this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.ownerDocument.body||(this.ownerDocument.body=this),this.$ext=this.$int=document.body},!0)}.call(apf.XhtmlBodyElement.prototype=new apf.AmlElement),apf.Init.addConditional(function(){if(apf.isO3)return;var e=apf.XhtmlBodyElement.prototype},null,["interactive"]),apf.xhtml.setElement("body",apf.XhtmlBodyElement),apf.XhtmlHtmlElement=function(e,t){this.$init(t||"html",apf.NODE_VISIBLE,e),this.$ext=document.documentElement,this.$ext.host=this,this.$int=document.body,this.$tabList=[],this.$focussable=apf.KEYBOARD,this.focussable=!0,this.visible=!0,this.$isWindowContainer=!0,this.implement(apf.Focussable),apf.window.$addFocus(this),this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t,n,r,i,s,o=this.attributes,u=this.ownerDocument;for(t=0,n=o.length;t<n;t++)r=(i=o[t]).nodeName.split(":"),r[0]=="xmlns"&&((s=r[1])?(u.$prefixes[s]=i.nodeValue,u.$namespaceURIs[i.nodeValue]=s):u.namespaceURI=i.nodeValue);u.namespaceURI||(u.namespaceURI=apf.ns.xhtml)})},apf.XhtmlHtmlElement.prototype=new apf.XhtmlElement,apf.xhtml.setElement("html",apf.XhtmlHtmlElement),apf.XhtmlIgnoreElement=function(e,t){this.$init(t,apf.NODE_VISIBLE,e)},apf.XhtmlIgnoreElement.prototype=new apf.AmlElement,apf.xhtml.setElement("script",apf.XhtmlIgnoreElement),apf.xhtml.setElement("noscript",apf.XhtmlIgnoreElement),apf.xhtml.setElement("head",apf.XhtmlIgnoreElement),apf.xhtml.setElement("meta",apf.XhtmlIgnoreElement),apf.XhtmlInputElement=function(e,t){this.$init(t||"input",apf.NODE_VISIBLE,e)},function(){this.$xae=apf.XhtmlElement.prototype.$xae,this.$xre=apf.XhtmlElement.prototype.$xre,this.$handlePropSet=function(e,t,n){if(e=="type")return;return apf.XhtmlElement.prototype.$handlePropSet.call(this,e,t,n)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t;if(!(t=this.parentNode.$int))return;this.$aml?this.$ext=this.$int=apf.insertHtmlNode(this.$aml.serialize?this.$aml:this.$aml.cloneNode(!1),t):(this.$ext=this.$int=document.createElement(this.localName),this.getAttribute("type")&&this.$int.setAttribute("type",this.getAttribute("type")),t.appendChild(this.$int))},!0)}.call(apf.XhtmlInputElement.prototype=new apf.AmlElement),apf.xhtml.setElement("input",apf.XhtmlInputElement),apf.XhtmlOptionElement=function(e,t){this.$init(t||"option",apf.NODE_VISIBLE,e)},function(){this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.$ext=this.$int=this.parentNode.$int.appendChild(this.parentNode.$int.ownerDocument.createElement("option")),this.value&&this.$int.setAttribute("value",this.value)},!0)}.call(apf.XhtmlOptionElement.prototype=new apf.AmlElement),apf.xhtml.setElement("option",apf.XhtmlOptionElement),apf.XhtmlSkipChildrenElement=function(e,t){this.$init(t,apf.NODE_VISIBLE,e)},function(){this.canHaveChildren=!1,this.$redraw=function(){var e=this;apf.queue.add("redraw"+this.$uniqueId,function(){var t=e.$ext.parentNode,n=e.$ext.nextSibling;t.removeChild(e.$ext),e.$ext=apf.insertHtmlNode(null,t,n,e.$aml?e.$aml.serialize?e.$aml.serialize():e.$aml.xml:e.serialize())})},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t;if(!(t=this.parentNode.$int))return;this.$ext=apf.insertHtmlNode(null,t,null,this.$aml?this.$aml.serialize?this.$aml.serialize():this.$aml.xml:this.serialize())},!0)}.call(apf.XhtmlSkipChildrenElement.prototype=new apf.AmlElement),apf.xhtml.setElement("object",apf.XhtmlSkipChildrenElement),apf.xhtml.setElement("embed",apf.XhtmlSkipChildrenElement),apf.xhtml.setElement("table",apf.XhtmlSkipChildrenElement),apf.xhtml.setElement("pre",apf.XhtmlSkipChildrenElement),apf.xinclude=new apf.AmlNamespace,apf.setNamespace("http://www.w3.org/2001/XInclude",apf.xinclude),apf.XiInclude=function(e,t){this.$init(t||"include",apf.NODE_HIDDEN,e)},apf.xinclude.setElement("include",apf.XiInclude),apf.aml.setElement("include",apf.XiInclude),function(){function e(e){var t=this.previousSibling||this.nextSibling;this.callback&&this.callback({xmlNode:e,amlNode:this.parentNode,addedNode:t}),t.dispatchEvent("DOMNodeInserted",{$beforeNode:t.nextSibling,relatedNode:this.parentNode,$isMoveWithinParent:!1,bubbles:!0}),this.parentNode&&this.parentNode.removeChild(this)}function t(t){var n=this.ownerDocument.$domParser;this.clear&&(this.parentNode.$int.innerHTML="");if(t){n.parseFromXml(t,{doc:this.ownerDocument,amlNode:this.parentNode,beforeNode:this,include:!0});if(!this.defer&&this.$parseContext){var r=this.$parseContext[1]||(this.$parseContext[1]={}),i=r.callback,s=this;r.callback=function(){e.call(s,t),i&&i.call(s.ownerDocument)};if(n.$continueParsing(this.$parseContext[0])===!1){var o=n.$parseContext[1]||(n.$parseContext[1]={}),u=r.callback;o.callback=function(){i&&i.call(s.ownerDocument),n.$continueParsing(s.$parseContext[0])}}}else e.call(this,t)}else this.defer||n.$continueParsing(this.$parseContext[0]),e.call(this,t)}function n(e){var n=this;apf.getData(e,apf.extend(this.options||{},{callback:function(r,i,s){if(i!=apf.SUCCESS){var o=new Error(apf.formatErrorString(1007,n,"Loading Includes","Could not load Include file '"+(e||n.src)+"'\nReason: "+s.message));if(s.tpModule.retryTimeout(s,i,null,o)===!0)return!0;apf.console.error(o.message),t.call(n,null);return}r=r.replace(/\<\!DOCTYPE[^>]*>/,"").replace(/^[\r\n\s]*/,""),apf.supportNamespaces||(r=r.replace(/xmlns\=\"[^"]*\"/g,"")),r.indexOf("<a:application")==-1&&(r="<a:application xmlns:a='"+apf.ns.aml+"'>"+r+"</a:application>");var u=apf.getXml(r,null,!0);if(!u)throw new Error(apf.formatErrorString(0,null,"Loading include","Could not parse include file. Maybe the file does not exist?",u));u.setAttribute("filename",s.url),t.call(n,u)},async:!0,ignoreOffline:!0}))}this.$parsePrio="002",this.$propHandlers.href=this.$propHandlers.src=function(e){if(typeof e!="string")return t.call(this,e);if(e.trim().charAt(0)=="<"){n.call(this,e.trim());return}this.$path=e.charAt(0)=="{"?e:apf.getAbsolutePath(apf.hostPath,e);var r=this.ownerDocument.$domParser;this.defer||r.$pauseParsing.apply(r,this.$parseContext=r.$parseContext||[this.parentNode]),n.call(this,this.$path)}}.call(apf.XiInclude.prototype=new apf.AmlElement),apf.__LIVEEDIT__=1<<23,apf.__ANCHORING__=8192,apf.Anchoring=function(){function i(e){if(!(this.$rule_header||this.$rule_v||this.$rule_h)||!this.parentNode)return;if(e.value){if(this.$rule_v||this.$rule_h){var t=this.$rule_header+"\n"+this.$rule_v+"\n"+this.$rule_h;n.setRules(this.$pHtmlNode,this.$uniqueId+"_anchors",t),n.queue(this.$pHtmlNode,this)}n.processQueue()}else n.removeRule(this.$pHtmlNode,this.$uniqueId+"_anchors"),n.queue(this.$pHtmlNode)}function s(e){if(e&&(e.$doOnlyAdmin||e.currentTarget!=this))return;n.queue&&this.$pHtmlNode&&(n.removeRule(this.$pHtmlNode,this.$uniqueId+"_anchors"),n.queue(this.$pHtmlNode))}function o(e){if(!this.$amlLoaded||e.currentTarget!=this)return;!e.$isMoveWithinParent&&this.$parsed&&this.$moveAnchoringRules(e.$oldParentHtmlNode)}function u(){return this.$pHtmlDoc?"try{            var oHtml = "+(apf.hasHtmlIdsInJs?this.$ext.getAttribute("id"):"document.getElementById('"+this.$ext.getAttribute("id")+"')")+";                        var pWidth = "+(this.$pHtmlNode==this.$pHtmlDoc.body?"apf.getWindowWidth()":"apf.getHtmlInnerWidth(oHtml.parentNode)")+";                        var pHeight = "+(this.$pHtmlNode==this.$pHtmlDoc.body?"apf.getWindowHeight()":"apf.getHtmlInnerHeight(oHtml.parentNode)")+";            }catch(e){            }":""}function a(e,t){return String(e).replace(apf.percentageMatch,"(("+t+" * $1)/100)")}function f(){this.$updateQueue&&(this.$updateLayout(),apf.layout.activateRules(this.$ext.parentNode))}this.$regbase=this.$regbase|apf.__ANCHORING__,this.$anchors=[];var e=1,t=2;this.$updateQueue=0,this.$inited=this.$parsed=this.$anchoringEnabled=!1,this.$hordiff=this.$verdiff=0,this.$rule_v=this.$rule_h=this.$rule_header="";var n=apf.layout;this.$supportedProperties.push("anchors");var r={right:function(e,r){if(!this.$anchoringEnabled&&!this.$setLayout("anchoring"))return;!e&&e!==0&&(this.$ext.style[r]=""),this.$updateQueue||n.queue(this.$pHtmlNode,this),this.$updateQueue=this.$updateQueue|t},bottom:function(t,r){if(!this.$anchoringEnabled&&!this.$setLayout("anchoring"))return;!t&&t!==0&&(this.$ext.style[r]=""),this.$updateQueue||n.queue(this.$pHtmlNode,this),this.$updateQueue=this.$updateQueue|e}};r.left=r.width=r.right,r.top=r.height=r.bottom,this.$propHandlers.anchors=function(r){this.$anchors=r?r.splitSafe("(?:, *| )"):[];if(!this.$anchoringEnabled&&!this.$setLayout("anchoring"))return;!this.$updateQueue&&apf.loaded&&n.queue(this.$pHtmlNode,this),this.$updateQueue=this.$updateQueue|t|e},this.$disableAnchoring=function(e){if(!this.$inited||!this.$anchoringEnabled||!this.$pHtmlNode)return;n.removeRule(this.$pHtmlNode,this.$uniqueId+"_anchors"),n.queue&&n.queue(this.$pHtmlNode);for(var t in r)delete this.$propHandlers[t];this.removeEventListener("DOMNodeRemoved",s),this.removeEventListener("DOMNodeInserted",o),this.$ext&&(this.$ext.style.left=this.$ext.style.right=this.$ext.style.top=this.$ext.style.bottom=this.$ext.style.width=this.$ext.style.height=this.$ext.style.position=""),this.removeEventListener("prop.visible",i),this.$inited=!1,this.$anchoringEnabled=!1},this.$enableAnchoring=function(){if(this.$inited)return;apf.extend(this.$propHandlers,r),this.addEventListener("DOMNodeRemoved",s),this.addEventListener("DOMNodeInserted",o),this.addEventListener("prop.visible",i),this.$updateQueue=0|((this.left||this.width||this.right||this.anchors)&&t)|((this.top||this.height||this.bottom||this.anchors)&&e),this.$updateQueue&&n.queue(this.$pHtmlNode,this),this.$inited=!0,this.$anchoringEnabled=!0},this.$moveAnchoringRules=function(e,t){var r=e&&n.removeRule(e,this.$uniqueId+"_anchors");r&&n.queue(e);if(!this.$rule_v&&!this.$rule_h&&!this.$rule_header)return;this.$rule_header=u.call(this),r=this.$rule_header+"\n"+this.$rule_v+"\n"+this.$rule_h,n.setRules(this.$pHtmlNode,this.$uniqueId+"_anchors",r),n.queue(this.$pHtmlNode,this)},this.$hasAnchorRules=function(){return this.$rule_v||this.$rule_h?!0:!1},this.$recalcAnchoring=function(r){this.$updateQueue=this.$updateQueue|t|e,this.$updateLayout(),n.queue(this.$pHtmlNode,this),r||n.processQueue()},this.$updateLayout=function(){if(!this.$anchoringEnabled)return;if(!apf.window.vManager.check(this,"anchoring",f))return;this.$parsed||(this.$ext.getAttribute("id")||apf.setUniqueHtmlId(this.$ext),this.$rule_header=u.call(this),this.$parsed=!0);if(!this.$updateQueue){this.visible&&this.$ext.style.display=="none"&&(this.$ext.style.display="");return}this.draggable=="relative"?"absolute|fixed|relative".indexOf(apf.getStyle(this.$ext,"position"))==-1&&(this.$ext.style.position="absolute"):this.left||this.left===0||this.top||this.top===0||this.right||this.right===0||this.bottom||this.bottom===0||this.$anchors.length?"absolute|fixed".indexOf(apf.getStyle(this.$ext,"position"))==-1&&(this.$ext.style.position="absolute"):this.center||("absolute|fixed|relative".indexOf(apf.getStyle(this.$ext,"position"))==-1&&(this.$ext.style.position="relative"),this.width||(this.$ext.style.width=""),this.height||(this.$ext.style.height=""));var r;if(this.$updateQueue&t){r=[],this.$hordiff=apf.getWidthDiff(this.$ext);var i=this.$anchors[3]||this.left,s=this.$anchors[1]||this.right,o=this.width,c=i||i===0,h=s||s===0,p=o||o===0;s&&typeof s=="string"&&(s=a(s,"pWidth")),c&&(parseInt(i)!=i?(i=a(i,"pWidth"),r.push("oHtml.style.left = ("+i+") + 'px'")):this.$ext.style.left=i+"px"),(apf.hasStyleAnchors||!c)&&h&&(parseInt(s)!=s?(s=a(s,"pWidth"),r.push("oHtml.style.right = ("+s+") + 'px'")):this.$ext.style.right=s+"px"),c&&h?apf.hasStyleAnchors?this.$ext.style.width="":r.push("oHtml.style.width = (pWidth - ("+s+") - ("+i+") - "+this.$hordiff+") + 'px'"):p&&typeof this.maxwidth=="number"&&typeof this.minwidth=="number"&&(parseInt(o)!=o?(this.width=o=(this.width||"").replace(/--(\d+)/,"-(-$1)"),o=a(o,"pWidth"),r.push("oHtml.style.width = Math.max("+(this.minwidth-this.$hordiff)+", Math.min("+(this.maxwidth-this.$hordiff)+", "+o+" - "+this.$hordiff+")) + 'px'")):this.$ext.style.width=(o>this.minwidth?o<this.maxwidth?o:this.maxwidth:this.minwidth)-this.$hordiff+"px"),this.$rule_h=r.length?"try{"+r.join(";}catch(e){};try{")+";}catch(e){};":""}if(this.$updateQueue&e){r=[],this.$verdiff=apf.getHeightDiff(this.$ext);var d=this.$anchors[0]||this.top,v=this.$anchors[2]||this.bottom,m=this.height,g=d||d===0,y=v||v===0,b=m||m===0;v&&typeof v=="string"&&(v=a(v,"pHeight")),g&&(parseInt(d)!=d?(d=a(d,"pHeight"),r.push("oHtml.style.top = ("+d+") + 'px'")):this.$ext.style.top=d+"px"),(apf.hasStyleAnchors||!g)&&y&&(parseInt(v)!=v?r.push("oHtml.style.bottom = ("+v+") + 'px'"):this.$ext.style.bottom=v+"px"),g&&y?apf.hasStyleAnchors?this.$ext.style.height="":r.push("oHtml.style.height = (pHeight - ("+v+") - ("+d+") - "+this.$verdiff+") + 'px'"):b&&typeof this.minheight=="number"&&(parseInt(m)!=m?(m=a(m,"pHeight"),r.push("oHtml.style.height = Math.max("+(this.minheight-this.$verdiff)+", Math.min("+(this.maxheight-this.$verdiff)+", "+m+" - "+this.$verdiff+")) + 'px'")):this.$ext.style.height=Math.max(0,(m>this.minheight?m<this.maxheight?m:this.maxheight:this.minheight)-this.$verdiff)+"px"),this.$rule_v=r.length?"try{"+r.join(";}catch(e){};try{")+";}catch(e){};":""}this.$rule_v||this.$rule_h?n.setRules(this.$pHtmlNode,this.$uniqueId+"_anchors",this.$rule_header+"\n"+this.$rule_v+"\n"+this.$rule_h,!0):n.removeRule(this.$pHtmlNode,this.$uniqueId+"_anchors"),this.$updateQueue=0,this.$box&&!apf.hasFlexibleBox&&apf.layout.forceResize(this.$ext)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){}),this.addEventListener("DOMNodeRemovedFromDocument",function(e){this.$disableAnchoring()})},apf.__CONTENTEDITABLE__=1<<24,apf.__GUIELEMENT__=32768,apf.__VALIDATION__=64,apf.GuiElement=function(){this.$init(!0)},function(){this.$regbase=this.$regbase|apf.__GUIELEMENT__,this.$focussable=apf.KEYBOARD_MOUSE,this.visible=2,this.minwidth=1,this.minheight=1,this.$booleanProperties["disable-keyboard"]=!0,this.$booleanProperties.visible=!0,this.$supportedProperties.push("draggable","resizable"),this.$supportedProperties.push("focussable","zindex","disabled","tabindex","disable-keyboard","contextmenu","visible","autosize","loadaml","actiontracker","alias","width","left","top","height","tooltip"),this.$setLayout=function(e,t){if(!this.$drawn||!this.$pHtmlNode)return!1;if(this.parentNode){if(this.parentNode.localName=="table")return this.$disableCurrentLayout&&this.$disableCurrentLayout(),this.parentNode.register(this,t),this.$disableCurrentLayout=null,e=="table";if(this.parentNode.$box)return this.$disableCurrentLayout&&this.$disableCurrentLayout(),this.parentNode.register(this,t),this.$disableCurrentLayout=null,e==this.parentNode.localName}return this.$anchoringEnabled||(this.$disableCurrentLayout&&this.$disableCurrentLayout(),this.$enableAnchoring(),this.$disableCurrentLayout=this.$disableAnchoring),e=="anchoring"},this.addEventListener("DOMNodeInserted",function(e){this.$setLayout()}),this.implement(apf.Anchoring),this.setWidth=function(e){return this.setProperty("width",e,!1,!0),this},this.setHeight=function(e){return this.setProperty("height",e,!1,!0),this},this.setLeft=function(e){return this.setProperty("left",e,!1,!0),this},this.setTop=function(e){return this.setProperty("top",e,!1,!0),this},this.show||(this.show=function(){return this.setProperty("visible",!0,!1,!0),this}),this.hide||(this.hide=function(){return this.setProperty("visible",!1,!1,!0),this}),this.getWidth=function(){return(this.$ext||{}).offsetWidth},this.getHeight=function(){return(this.$ext||{}).offsetHeight},this.getLeft=function(){return(this.$ext||{}).offsetLeft},this.getTop=function(){return(this.$ext||{}).offsetTop},this.enable=function(){return this.setProperty("disabled",!1,!1,!0),this},this.disable=function(){return this.setProperty("disabled",!0,!1,!0),this},this.sendToBack=function(){return this.setProperty("zindex",0,!1,!0),this},this.bringToFront=function(){return this.setProperty("zindex",apf.all.length+1,!1,!0),this},this.sendBackwards=function(){return this.setProperty("zindex",this.zindex-1,!1,!0),this},this.bringForward=function(){return this.setProperty("zindex",this.zindex+1,!1,!0),this},this.hasFocus=function(){},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t=this.$aml;this.parentNode&&(this.localName=="item"&&this.parentNode.hasFeature(apf.__MULTISELECT__)?this.$pHtmlNode=this.parentNode.$container:this.$pHtmlNode=this.parentNode.$int);if(!this.$pHtmlNode)return;this.$pHtmlDoc=this.$pHtmlNode.ownerDocument||document,this.$initSkin&&this.$initSkin(t),this.$draw&&this.$draw(),e.id&&this.$ext.setAttribute("id",e.id),typeof this.visible=="undefined"&&(this.visible=!0),this.$drawn=!0},!0);var e=function(e){if(!this.$pHtmlNode)return;this.$setLayout();if(this.$ext){var r=this.hasFeature(apf.__PRESENTATION__)||!1,i=this.$isLeechingSkin?this.localName:"main";this.minwidth=Math.max(this.minwidth||0,apf.getCoord(r&&parseInt(this.$getOption(i,"minwidth")),0)),this.minheight=Math.max(this.minheight||0,apf.getCoord(r&&parseInt(this.$getOption(i,"minheight")),0)),this.maxwidth==undefined&&(this.maxwidth=apf.getCoord(r&&parseInt(this.$getOption(i,"maxwidth")),1e4)),this.maxheight==undefined&&(this.maxheight=apf.getCoord(r&&parseInt(this.$getOption(i,"maxheight")),1e4));var s=apf.getDiff(this.$ext);this.$ext.style.minWidth=Math.max(0,this.minwidth-s[0])+"px",this.$ext.style.minHeight=Math.max(0,this.minheight-s[1])+"px",this.$ext.style.maxWidth=Math.max(0,this.maxwidth-s[0])+"px",this.$ext.style.maxHeight=Math.max(0,this.maxheight-s[1])+"px",this.$altExt&&apf.isGecko&&(this.$altExt.style.minHeight=this.$ext.style.minHeight,this.$altExt.style.maxHeight=this.$ext.style.maxHeight,this.$altExt.style.minWidth=this.$ext.style.minWidth,this.$altExt.style.maxWidth=this.$ext.style.maxWidth)}this.$loadAml&&this.$loadAml(this.$aml),this.$focussable&&typeof this.focussable=="undefined"&&apf.GuiElement.propHandlers.focussable.call(this,!0),n&&t()};this.addEventListener("DOMNodeInsertedIntoDocument",e),this.addEventListener("$skinchange",e);var t,n;this.addEventListener("$event.resize",t=function(e){if(!this.$ext){n=!0;return}apf.layout.setRules(this.$ext,"resize","var o = apf.all["+this.$uniqueId+"];            if (o) o.dispatchEvent('resize');",!0),apf.layout.queue(this.$ext),this.removeEventListener("$event.resize",t)}),this.addEventListener("contextmenu",function(e){if(!this.contextmenus)return;if(this.hasFeature(apf.__DATABINDING__)){var t,n=this.hasFeature(apf.__MULTISELECT__)?this.selected:this.xmlRoot,r,i,s,o,u,a,f,l;for(r=0,i=this.contextmenus.length;r<i;r++){o=typeof (f=this.contextmenus[r])=="string",l=null,!o&&f.match&&n&&(l=(f.cmatch||(f.cmatch=apf.lm.compile(f.match,{xpathmode:3,injectself:!0})))(n));if(o||n&&l||!f.match){a=o?f:f.menu;if(!self[a])return;self[a].display(e.x,e.y,null,this,n),e.returnValue=!1,e.cancelBubble=!0;break}}}else{a=typeof this.contextmenus[0]=="string"?this.contextmenus[0]:this.contextmenus[0].getAttribute("menu");if(!self[a])return;self[a].display(e.x,e.y,null,this),e.returnValue=!1,e.cancelBubble=!0}})}.call(apf.GuiElement.prototype=new apf.AmlElement),apf.GuiElement.propHandlers={minwidth:function(e){this.$ext.style.minWidth=Math.max(0,e-apf.getWidthDiff(this.$ext))+"px"},minheight:function(e){this.$ext.style.minHeight=Math.max(0,e-apf.getHeightDiff(this.$ext))+"px"},maxwidth:function(e){this.$ext.style.maxWidth=Math.max(0,e-apf.getWidthDiff(this.$ext))+"px"},maxheight:function(e){this.$ext.style.maxHeight=Math.max(0,e-apf.getHeightDiff(this.$ext))+"px"},focussable:function(e){this.focussable=typeof e=="undefined"||e,e=="container"?(this.$isWindowContainer=!0,this.focussable=!0):this.focussable=apf.isTrue(e),this.hasFeature(apf.__FOCUSSABLE__)||this.implement(apf.Focussable),this.focussable?(apf.window.$addFocus(this,this.tabindex),e=="container"&&this.$tabList.remove(this)):apf.window.$removeFocus(this)},tabindex:function(e){if(!this.hasFeature(apf.__FOCUSSABLE__))return;this.setTabIndex(parseInt(e)||null)},zindex:function(e){this.$ext.style.zIndex=e},visible:function(e){if(apf.isFalse(e)||typeof e=="undefined"){this.$ext&&(this.$ext.style.display="none");if(apf.document.activeElement==this||this.canHaveChildren==2&&apf.isChildOf(this,apf.document.activeElement,!1))apf.config.allowBlur&&this.hasFeature(apf.__FOCUSSABLE__)?this.blur():apf.window.moveNext();this.visible=!1}else this.$ext&&(this.$ext.style.display="",this.$ext.offsetHeight||(this.$ext.style.display=this.$display||"block")),apf.layout&&this.$int&&apf.layout.forceResize(this.$int),this.visible=!0},disabled:function(e){if(!this.$drawn){var t=this;this.addEventListener("DOMNodeInsertedIntoDocument",this.$updateDisabled||(this.$updateDisabled=function(e){apf.GuiElement.propHandlers.disabled.call(t,t.disabled)}));return}apf.queue.remove("disable"+this.$uniqueId);if(this.canHaveChildren){e!=-1&&(e=this.disabled=apf.isTrue(e));var n=this.childNodes;for(var r,i=0,s=n.length;i<s;i++)r=n[i],r.nodeFunc==apf.NODE_VISIBLE&&(e&&r.disabled!=-1&&(r.$disabled=r.disabled||!1),r.setProperty("disabled",e?-1:!1));if(this.$isWindowContainer)return}if(e!=-1&&e!=0&&typeof this.$disabled=="boolean"){if(e!==null){this.$disabled=e||!1;return}e=this.$disabled,this.$disabled=null}if(apf.isTrue(e)||e==-1)this.disabled=!1,apf.document.activeElement==this&&(apf.window.moveNext(!0),apf.document.activeElement==this&&this.$blur()),this.hasFeature(apf.__PRESENTATION__)&&this.$setStyleClass(this.$ext,this.$baseCSSname+"Disabled"),this.$disable&&this.$disable(),this.disabled=e;else{if(this.hasFeature(apf.__DATABINDING__)&&apf.config.autoDisable&&!!this.$bindings&&!this.xmlRoot)return!1;this.disabled=!1,apf.document.activeElement==this&&this.$focus(),this.hasFeature(apf.__PRESENTATION__)&&this.$setStyleClass(this.$ext,null,[this.$baseCSSname+"Disabled"]),this.$enable&&this.$enable()}},enabled:function(e){this.setProperty("disabled",!e)},"disable-keyboard":function(e){this.disableKeyboard=apf.isTrue(e)},tooltip:function(e){this.$ext.setAttribute("title",(e||"")+(this.hotkey?" ("+(apf.isMac?apf.hotkeys.toMacNotation(this.hotkey):this.hotkey)+")":""))},contextmenu:function(e){this.contextmenus=[e]},actiontracker:function(e){e?e.localName=="actiontracker"?this.$at=e:(this.$at=typeof e=="string"&&self[e]?apf.nameserver.get("actiontracker",e)||self[e].getActionTracker():apf.setReference(e,apf.nameserver.register("actiontracker",e,new apf.actiontracker)),this.$at.name||(this.$at.name=e)):this.$at=null},aml:function(e){this.replaceMarkup(e)}},apf.__PRESENTATION__=512,apf.Presentation=function(){this.$init(!0)},function(){function e(e,n){clearTimeout(this.$skinTimer);if(this.selectable)var r=this.getSelection();var i=this.$ext,s=this.$int,o=this.$ext.parentNode,u=i.nextSibling,a=this.$ext.getAttribute("id"),f=this.$int&&this.$int.getAttribute("id"),l=this.$baseCSSname;i.parentNode&&i.parentNode.removeChild(i),this.$destroy&&this.$destroy(!0),this.skin=e,this.$loadSkin(n?n+":"+e:null),this.$draw&&this.$draw(!0),a&&this.$ext.setAttribute("id",a),(u||o!=this.$ext.parentNode)&&o.insertBefore(this.$ext,u);var c,h,p=[],d=(i.className||"").splitSafe("\\s+");for(c=0;c<d.length;c++)d[c]&&d[c].indexOf(l)!=0&&p.push(d[c].replace(l,this.$baseCSSname));apf.setStyleClass(this.$ext,p.join(" "));var v,m=apf.skins.events;for(c=0,h=m.length;c<h;c++)v=m[c],typeof i[v]=="function"&&!this.$ext[v]&&(this.$ext[v]=i[v]);this.$ext.style.left=i.style.left,this.$ext.style.top=i.style.top,this.$ext.style.width=i.style.width,this.$ext.style.height=i.style.height,this.$ext.style.right=i.style.right,this.$ext.style.bottom=i.style.bottom,this.$ext.style.zIndex=i.style.zIndex,this.$ext.style.position=i.style.position,this.$ext.style.display=i.style.display,f&&this.$int.setAttribute("id",f);if(this.$int&&this.$int!=s){var g,y=this.$int,b=s.childNodes;for(var c=b.length-1;c>=0;c--)(g=b[c]).host&&(g.host.$pHtmlNode=y,g.host.$isLeechingSkin&&t.call(g.host)),y.insertBefore(g,y.firstChild)}this.hasFeature(apf.__DRAGDROP__)&&document.elementFromPointAdd&&(document.elementFromPointRemove(i),document.elementFromPointAdd(this.$ext)),this.disabled&&this.$disable(),this.$focussable&&apf.document.activeElement==this&&this.$focus(),this.dispatchEvent("$skinchange",{ext:i,"int":s}),this.hasFeature(apf.__DATABINDING__)&&this.xmlRoot?this.reload():this.value&&this.$propHandlers.value.call(this,this.value),this.hasFeature(apf.__MULTISELECT__)&&this.selectable&&this.selectList(r,!0),apf.hasSingleRszEvent||(apf.layout.activateRules(this.$ext),this.$int&&apf.layout.activateRules(this.$int)),this.draggable&&this.$propHandlers.draggable&&this.$propHandlers.draggable.call(this,this.draggable),this.resizable&&this.$propHandlers.resizable&&this.$propHandlers.resizable.call(this,this.resizable),apf.layout.forceResize(this.$ext)}function t(e){if(!this.$amlLoaded||e&&(e.$isMoveWithinParent||e.currentTarget!=this||!e.$oldParent))return;this.$setInheritedAttribute(this,"skinset");if(this.attributes.getNamedItem("skin"))return;var t,n=this.parentNode,r;if((t=this.$canLeechSkin.dataType==apf.STRING?this.$canLeechSkin:this.localName)&&n.$originalNodes&&(r=n.$originalNodes[t])&&r.getAttribute("inherit")){var i=r.getAttribute("link");this.$isLeechingSkin=!0;if(i)this.$forceSkinChange(i);else{var s=n.skinName.split(":");this.$forceSkinChange(s[1],s[0])}}else this.$isLeechingSkin&&(delete this.skin,this.$isLeechingSkin=!1,this.$forceSkinChange())}this.$regbase=this.$regbase|apf.__PRESENTATION__,this.$supportedProperties.push("skin"),this.$propHandlers.skinset=this.$propHandlers.skin=function(t){if(!this.$amlLoaded)return;if(!this.$skinTimer){var n=this;clearTimeout(this.$skinTimer),this.$skinTimer=$setTimeout(function(){e.call(n,n.skin),delete n.$skinTimer})}},this.$propHandlers.style=function(e){!this.styleAttrIsObj&&this.$amlLoaded&&this.$ext.setAttribute("style",e)},this.$propHandlers.border=function(e){e?this.$ext.style.borderWidth=apf.getBox(e).join("px ")+"px":this.$ext.style.borderWidth=""},this.$propHandlers.margin=function(e){e?this.$ext.style.margin=apf.getBox(e).join("px ")+"px":this.$ext.style.margin=""},this.$propHandlers["class"]=function(e){this.$setStyleClass(this.$ext,e,this.$lastClassValue?[this.$lastClassValue]:null),this.$lastClassValue=e},this.$forceSkinChange=function(t,n){e.call(this,t,n)},this.$setStyleClass=apf.setStyleClass,this.$initSkin=function(e){this.$canLeechSkin&&this.addEventListener("DOMNodeInserted",t),this.skin||(this.skin=this.getAttribute("skin"));var n,r=this.parentNode,i;if(this.$canLeechSkin&&!this.skin&&(n=this.$canLeechSkin.dataType==apf.STRING?this.$canLeechSkin:this.localName)&&r&&r.$originalNodes&&(i=r.$originalNodes[n])&&i.getAttribute("inherit")){var s=i.getAttribute("link");this.$isLeechingSkin=!0,s?(this.skin=s,this.$loadSkin()):this.$loadSkin(r.skinName)}else this.skinset||(this.skinset=this.getAttribute("skinset")),this.$loadSkin(null,this.$canLeechSkin)},this.$loadSkin=function(e,t){this.baseSkin=e||(this.skinset||this.$setInheritedAttribute("skinset"))+":"+(this.skin||this.localName),clearTimeout(this.$skinTimer),this.skinName&&(this.$blur(),this.$baseCSSname=null),this.skinName=this.baseSkin,this.$pNodes={},this.$originalNodes=apf.skins.getTemplate(this.skinName,!0);if(!this.$originalNodes){var n=this.skin;if(n){var r=this.skinName.split(":")[0];this.baseName=this.skinName="default:"+n,this.$originalNodes=apf.skins.getTemplate(this.skinName),!this.$originalNodes&&r!="default"&&(this.baseName=this.skinName=r+":"+this.localName,this.$originalNodes=apf.skins.getTemplate(this.skinName,!0))}this.$originalNodes||(this.baseName=this.skinName="default:"+this.localName,this.$originalNodes=apf.skins.getTemplate(this.skinName));if(!this.$originalNodes){if(t)return this.baseName=this.skinName=this.originalNode=null;throw new Error(apf.formatErrorString(1077,this,"Presentation","Could not load skin: "+this.baseSkin))}}this.$originalNodes&&apf.skins.setSkinPaths(this.skinName,this)},this.$getNewContext=function(e,t){this.$pNodes[e]=this.$originalNodes[e].cloneNode(!0)},this.$hasLayoutNode=function(e){return this.$originalNodes[e]?!0:!1},this.$getLayoutNode=function(e,t,n){var r=this.$pNodes[e]||this.$originalNodes[e];if(!r)return!1;if(!t)return n||apf.getFirstElement(r);var i=r.getAttribute(t);return i?n?apf.queryNode(n,i):apf.getFirstElement(r).selectSingleNode(i):null},this.$getOption=function(e,t){e=e.toLowerCase();var n=this.$pNodes[e]||this.$originalNodes[e];if(!t||!n)return n;var r=n.selectSingleNode("@"+t);return r?r.nodeValue:""},this.$getExternal=function(e,t,n,r){t||(t=this.$pHtmlNode),e||(e="main"),e=e.toLowerCase(),this.$getNewContext(e);var i=this.$getLayoutNode(e),s;(s=(r||this).getAttributeNode("style"))&&i.setAttribute("style",s.nodeValue),n&&n.call(this,i),i=apf.insertHtmlNode(i,t),i.host=this;if(s=(r||this).getAttributeNode("bgimage"))i.style.backgroundImage="url("+apf.getAbsolutePath(this.mediaPath,s.nodeValue)+")";return this.$baseCSSname||(this.$baseCSSname=i.className.trim().split(" ")[0]),i},this.$focus=function(){if(!this.$ext)return;this.$setStyleClass(this.oFocus||this.$ext,this.$baseCSSname+"Focus")},this.$blur=function(){this.renaming&&this.stopRename(null,!0);if(!this.$ext)return;this.$setStyleClass(this.oFocus||this.$ext,"",[this.$baseCSSname+"Focus"])},this.$fixScrollBug=function(){this.$int!=this.$ext?this.oFocus=this.$int:(this.oFocus=this.$int=this.$ext.appendChild(document.createElement("div")),this.$int.style.height="100%",this.$int.className="focusbug")}}.call(apf.Presentation.prototype=new apf.GuiElement),apf.config.$inheritProperties.skinset=1,apf.__VALIDATION__=64,apf.validator={macro:{pattern:"value.match(",pattern_:")",custom:"(",custom_:")",min:"parseInt(value) >= ",max:"parseInt(value) <= ",maxlength:"value.toString().length <= ",minlength:"value.toString().length >= ",notnull:"value.toString().length > 0",checkequal:"!(temp = ",checkequal_:").isValid() || temp.getValue() == value"},compile:function(e){var t=this.macro,n=["var temp, valid = true;             if (!validityState)                 validityState = new apf.validator.validityState(); "];e.required&&n.push("if (checkRequired && (!value || value.toString().trim().length == 0)) {                validityState.$reset();                validityState.valueMissing = true;                valid = false;            }"),n.push("validityState.$reset();            if (value) {");for(prop in e){if(!t[prop])continue;n.push("if (!(",t[prop],e[prop],t[prop+"_"]||"",")){                validityState.$set('",prop,"');                valid = false;            }")}return n.push("};validityState.valid = valid; return validityState;"),new Function("value","checkRequired","validityState",n.join(""))}},apf.validator.validityState=function(){this.valueMissing=!1,this.typeMismatch=!1,this.patternMismatch=!1,this.tooLong=!1,this.rangeUnderflow=!1,this.rangeOverflow=!1,this.stepMismatch=!1,this.customError=!1,this.valid=!0,this.$reset=function(){for(var e in this){if(e.substr(0,1)=="$")continue;this[e]=!1}this.valid=!0},this.$set=function(e){switch(e){case"min":this.rangeUnderflow=!0;break;case"max":this.rangeOverflow=!0;break;case"minlength":this.tooShort=!0;break;case"maxlength":this.tooLong=!0;break;case"pattern":this.patternMismatch=!0;break;case"datatype":this.typeMismatch=!0;break;case"notnull":this.typeMismatch=!0;break;case"checkequal":this.typeMismatch=!0}}},apf.Validation=function(){this.$regbase=this.$regbase|apf.__VALIDATION__,this.isValid=function(e){if(!this.$vOptions)return!0;(this.$vOptions.isValid||(this.$vOptions.isValid=apf.validator.compile(this.$vOptions))).call(this,typeof this.getValue=="function"?this.getValue(null,!0):null,e,this.validityState||(this.validityState=new apf.validator.validityState));var t=this.validityState.valid;return this.dispatchEvent(t?"valid":"invalid",this.validityState),t},this.setCustomValidity=function(e){},this.showMe=function(){var e=this.parentNode;while(e)e.show&&e.show(),e=e.parentNode},this.validate=function(e,t,n){return n||!this.isValid(!e)&&!t?(this.setError(),!1):(this.clearError(),!0)},this.setError=function(e){this.$validgroup||this.$propHandlers.validgroup.call(this,"vg"+this.parentNode.$uniqueId);var t=this.$validgroup.getErrorBox(this);this.$validgroup.allowMultipleErrors||this.$validgroup.hideAllErrors(),t.setMessage(this.invalidmsg||e),apf.setStyleClass(this.$ext,this.$baseCSSname+"Error"),this.showMe(),(this.invalidmsg||e)&&t.display(this),apf.document.activeElement&&apf.document.activeElement!=this&&this.focus(null,{mouse:!0})},this.clearError=function(e){this.$setStyleClass&&this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Error"]);if(this.$validgroup){var t=this.$validgroup.getErrorBox(null,!0);if(!t||t.host!=this)return;t.hide()}},this.addEventListener("DOMNodeRemovedFromDocument",function(e){this.$validgroup&&this.$validgroup.unregister(this)}),this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.validgroup||this.$setInheritedAttribute("validgroup")}),this.$attrExcludePropBind=apf.extend({pattern:1,validtest:3},this.$attrExcludePropBind),this.$booleanProperties.required=!0,this.$supportedProperties.push("validgroup","required","datatype","pattern","min","max","maxlength","minlength","validtest","notnull","checkequal","invalidmsg","requiredmsg"),this.$fValidate=function(){if(this.liveedit)return;if(!this.$validgroup)this.validate(!0);else{var e=this.$validgroup.getErrorBox(this);(!e.visible||e.host!=this)&&this.validate(!0)}},this.addEventListener("blur",this.$fValidate),this.$propHandlers.validgroup=function(e){if(e){var t;typeof e!="string"?(this.$validgroup=e.name,t=e):t=apf.nameserver.get("validgroup",e),this.$validgroup=t||new apf.ValidationGroup(e),this.$validgroup.register(this)}else this.$validgroup.unregister(this),this.$validgroup=null},this.$propHandlers.pattern=function(e,t){e.substr(0,1)!="/"&&(e="/"+e+"/"),(this.$vOptions||(this.$vOptions={}))[t]=e,delete this.$vOptions.isValid},this.$propHandlers.required=this.$propHandlers.custom=this.$propHandlers.min=this.$propHandlers.max=this.$propHandlers.maxlength=this.$propHandlers.minlength=this.$propHandlers.notnull=this.$propHandlers.checkequal=function(e,t){(this.$vOptions||(this.$vOptions={}))[t]=e,delete this.$vOptions.isValid},this.$propHandlers.validtest=function(e){var t=this,n={};this.removeValidationCache=function(){n={}},this.$checkRemoteValidation=function(){var e=this.getValue();return typeof n[e]=="boolean"?n[e]:n[e]==-1?!0:(n[e]=-1,apf.getData(this.validtest.toString(),{xmlNode:this.xmlRoot,value:this.getValue(),callback:function(r,i,s){if(i!=apf.SUCCESS){if(i==apf.TIMEOUT&&s.retries<apf.maxHttpRetries)return s.tpModule.retry(s.id);var o=new Error(apf.formatErrorString(0,t,"Validating entry at remote source","Communication error: \n\n"+s.message));if(t.dispatchEvent("error",apf.extend({error:o,state:status},s))!==!1)throw o;return}n[e]=apf.isTrue(r),n[e]?t.clearError():t.hasFocus()||t.setError()}}),!0)},(this.$vOptions||(this.$vOptions={})).custom="apf.lookup("+this.$uniqueId+").$checkRemoteValidation()",delete this.$vOptions.isValid}},apf.GuiElement.propHandlers.required=apf.GuiElement.propHandlers.pattern=apf.GuiElement.propHandlers.min=apf.GuiElement.propHandlers.max=apf.GuiElement.propHandlers.maxlength=apf.GuiElement.propHandlers.minlength=apf.GuiElement.propHandlers.notnull=apf.GuiElement.propHandlers.checkequal=apf.GuiElement.propHandlers.validtest=function(e,t){this.implement(apf.Validation),this.$propHandlers[t].call(this,e,t)},apf.ValidationGroup=function(e){this.$init(),this.childNodes=[],e&&apf.setReference(e,this),this.name=e||"validgroup"+this.$uniqueId,apf.nameserver.register("validgroup",this.name,this)},function(){function checkValidChildren(e,t,n){var r;for(var i,s=0;s<e.childNodes.length;s++){var o=e.childNodes[s];if(!o)continue;if(!o.disabled&&(!this.validateVisibleOnly&&o.visible||!o.$ext||o.$ext.offsetHeight)&&o.hasFeature(apf.__VALIDATION__)&&o.isValid&&!o.isValid(!t))if(!n)if(!r){o.validate(!0,null,!0),r=!0;if(!this.allowMultipleErrors)return!0}else o.errBox&&o.errBox.host==o&&o.errBox.hide();else if(!this.allowMultipleErrors)return!0;if(o.canHaveChildren&&o.childNodes.length){r=checkValidChildren.call(this,o,t,n)||r;if(r&&!this.allowMultipleErrors)return!0}}return r}this.validateVisibleOnly=!1,this.allowMultipleErrors=!1,this.register=function(e){e.hasFeature(apf.__VALIDATION__)&&this.childNodes.push(e)},this.unregister=function(e){this.childNodes.remove(e)},this.toString=function(){return"[APF Validation Group]"};var errbox;this.getErrorBox=function(e,t){if(this.allowMultipleErrors||!errbox&&!t)errbox=new apf.errorbox,errbox.$pHtmlNode=e.$ext.parentNode,errbox.skinset=apf.getInheritedAttribute(e.parentNode,"skinset"),errbox.dispatchEvent("DOMNodeInsertedIntoDocument");return errbox},this.hideAllErrors=function(){errbox&&errbox.host&&errbox.host.clearError()},this.validate=this.isValid=function(ignoreReq,nosetError,page){var found=checkValidChildren.call(this,page||this,ignoreReq,nosetError);return page&&page.validation&&!eval(page.validation)&&(alert(page.invalidmsg),found=!0),!found}}.call(apf.ValidationGroup.prototype=new apf.Class),apf.config.$inheritProperties.validgroup=1,apf.__DATABINDING__=2,apf.DataBinding=function(){function n(){this.$initingModel=!0,this.$setInheritedAttribute("model")}this.$init(!0),this.$loadqueue=this.$dbTimer=null,this.$regbase=this.$regbase|apf.__DATABINDING__,this.$mainBind="value",this.$bindings=this.$cbindings=this.$attrBindings=!1,this.$attrExcludePropBind=apf.extend({model:1,each:1},this.$attrExcludePropBind),this.setQueryValue=function(e,t,n){var r=apf.createNodeFromXpath(this[n||"xmlRoot"],e);return r?(apf.setNodeValue(r,t,!0),r):null},this.queryValue=function(e,t){return apf.queryValue(this[t||"xmlRoot"],e)},this.queryValues=function(e,t){return apf.queryValues(this[t||"xmlRoot"],e)},this.queryNode=function(e,t){var n=this[t||"xmlRoot"];return n?n.selectSingleNode(e):null},this.queryNodes=function(e,t){var n=this[t||"xmlRoot"];return n?n.selectNodes(e):[]},this.$checkLoadQueue=function(){if(!this.$loadqueue)return!1;this.caching||(this.xmlRoot=null);var e=this.load(this.$loadqueue[0],{cacheId:this.$loadqueue[1]});if(!e||e.dataType!=apf.ARRAY||e!=this.$loadqueue)this.$loadqueue=null},this.$execProperty=function(e,t,n){var r=this.$attrBindings[e];this.nodeType==7&&t!=this.xmlRoot&&(this.xmlRoot=t);try{if(r.cvalue.asyncs){var i=this;return r.cvalue.call(this,t,function(t){i.setProperty(e,t,!0)})}var s=r.cvalue.call(this,t)}catch(o){apf.console.warn("[400] Could not execute binding for property "+e+"\n\n"+o.message);return}this.setProperty(e,n&&n.extra.range||s,!0)},this.$applyBindRule=function(e,t,n,r,i){var s=this.$attrBindings[e]&&this.$attrBindings[e].cvalue||this.$cbindings[e];return s?s.call(this,t,r):n||""},this.$hasBindRule=function(e){return this.$attrBindings[e]||this.$bindings&&this.$bindings[e]},this.$getBindRule=function(e,t){return this.$attrBindings[e]||this.$bindings&&this.$bindings.getRule(e,t)};var e={drag:1,drop:1,dragcopy:1};this.$getDataNode=function(t,n,r,i,s){var o,u=this.$attrBindings[t];if(u){if(u.cvalue.type!=3)return!1;var a=u.cvalue2||u.compile("value",{xpathmode:s?4:3,parsecode:1,injectself:e[t]});return a&&(o=a(n,r))?(i&&i.push(u),o):!1}return this.$bindings&&this.$bindings.getDataNode(t,n,r,i,s)},this.setModel=function(e){this.setAttribute("model",e,!1,!0)},this.getModel=function(e){return e&&!this.$model?this.dataParent?this.dataParent.parent.getModel(!0):null:this.$model},this.reload=this.reload||function(){this.load(this.xmlRoot,{cacheId:this.cacheId,force:!0})},this.load=function(e,t){if(t)var n=t.cacheId,r=t.force,i=t.noClearMsg;if(n&&n==this.cacheId&&!r)return;apf.popup.isShowing(this.$uniqueId)&&apf.popup.forceHide();if(e)if(typeof e=="string"){if(e.charAt(0)!="<")return apf.model.prototype.$loadFrom.call(this,e,t);e=apf.getXmlDom(e).documentElement}else e.nodeType==9?e=e.documentElement:e.nodeType==3||e.nodeType==4?e=e.parentNode:e.nodeType==2&&(e=e.ownerElement||e.parentNode||e.selectSingleNode(".."));if(this.$preventDataLoad||!this.$canLoadData&&(!this.$bindings&&(!this.$canLoadDataAttr||!this.each)||!this.$amlLoaded)&&(!this.hasFeature(apf.__MULTISELECT__)||!this.each)||this.$canLoadData&&!this.$canLoadData()){if(!this.caching||!this.hasFeature(apf.__CACHE__))this.xmlRoot=e,this.setProperty("root",this.xmlRoot);return this.$loadqueue=[e,n]}this.$loadqueue=null,this.dataParent&&this.dataParent.xpath&&(this.dataParent.parent.signalXmlUpdate[this.$uniqueId]=!e);if(!e&&(!n||!this.$isCached||!this.$isCached(n))){this.clear(i),apf.config.autoDisable&&this.$createModel===!1&&this.setProperty("disabled",!0);return}if(!this.caching&&!r&&e&&!this.$loadqueue&&e==this.xmlRoot)return;var s=this.disabled;this.disabled=!1;if(this.dispatchEvent("beforeload",{xmlNode:e})===!1)return!1;this.clear(!0,!0),this.cacheId=n;if(this.dispatchEvent("$load",{forceNoCache:r,xmlNode:e})===!1)return;this.documentId=apf.xmldb.getXmlDocId(e),this.xmlRoot=e,this.setProperty("root",this.xmlRoot),this.$load(e),this.$loadSubData(e),this.$createModel===!1?(this.disabled=!0,this.setProperty("disabled",!1)):this.disabled=s,this.dispatchEvent("afterload",{xmlNode:e})},this.$loadSubData=function(e){if(this.$hasLoadStatus(e)&&!this.$hasLoadStatus(e,"potential"))return;var t=this.$getBindRule("load",e);if(t&&(!t[1]||t[1](e))){this.$setLoadStatus(e,"loading"),this.$setClearMessage&&this.$setClearMessage(this["loading-message"],"loading");var n=this.getModel(!0),r=this;n.$insertFrom(t.getAttribute("get"),{xmlNode:e,insertPoint:e,amlNode:this,callback:function(){r.setProperty(r.hasFeature(apf.__MULTISELECT__)?"selected":"root",e)}})===!1&&(this.clear(!0),apf.config.autoDisable&&this.setProperty("disabled",!0))}},this.clear=function(e,t,n){if(!this.$container)return;this.clearSelection&&this.clearSelection(!0);var r=this.$container.offsetHeight;this.dispatchEvent("$clear")!==!1&&(this.$container.innerHTML="");if(typeof e=="string"){var i=e;e=!1,this[i+"-message"]||this.$setInheritedAttribute(i+"-message")}this.$lastClearType=i||null,!e&&this.$setClearMessage?this.$setClearMessage(i?this[i+"-message"]:this["empty-message"],i||"empty",r):this.$removeClearMessage&&this.$removeClearMessage(),n||(this.documentId=this.xmlRoot=this.cacheId=null),e||this.hasFeature(apf.__MULTISELECT__)&&this.setProperty("length",0)},this.clearMessage=function(e){this.customMsg=e,this.clear("custom")},this.$setLoadStatus=function(e,t,n){var r=this.loadgroup||"default",i=new RegExp("\\|(\\w+)\\:"+r+":(\\d+)\\|"),s=e.getAttribute("a_loaded")||"",o;if(!n&&(o=s.match(i))&&o[1]!="potential"&&o[2]!=this.$uniqueId)return;var u=s.replace(i,"");n||(u+="|"+t+":"+r+":"+this.$uniqueId+"|"),e.setAttribute("a_loaded",u)},this.$removeLoadStatus=function(e){this.$setLoadStatus(e,null,!0)},this.$hasLoadStatus=function(e,t,n){if(!e)return!1;var r=e.getAttribute("a_loaded");if(!r)return!1;var i=this.loadgroup||"default",s=new RegExp("\\|"+(t||"\\w+")+":"+i+":"+(n?this.$uniqueId:"\\d+")+"\\|");return r.match(s)?!0:!1},this.insert=function(e,t){if(typeof e=="string"){if(e.charAt(0)!="<")return t.insertPoint||(t.insertPoint=this.xmlRoot),apf.model.prototype.$insertFrom.call(this,e,t);t.whitespace===!1&&(e=e.replace(/>[\s\n\r]*</g,"><")),e=apf.getXmlDom(e).documentElement}var n=t.insertPoint||this.xmlRoot;if(this.dispatchEvent("beforeinsert",{xmlParentNode:n})===!1)return!1;typeof t.copyAttributes=="undefined"&&(t.copyAttributes=!0),this.filterUnique&&(t.filter=this.filterUnique);var r=apf.mergeXml(e,n,t);this.$isLoading=!0,apf.xmldb.applyChanges("insert",n),this.$isLoading=!1,this.selectable&&this.autoselect?this.xmlNode==r&&this.$selectDefault(this.xmlNode):this.xmlNode==r&&this.setProperty("root",this.xmlNode),this.$hasLoadStatus(n,"loading")&&this.$setLoadStatus(n,"loaded"),this.dispatchEvent("afterinsert")},this.$booleanProperties["render-root"]=!0,this.$supportedProperties.push("empty-message","loading-message","offline-message","render-root","smartbinding","bindings","actions"),this.$propHandlers["render-root"]=function(e){this.renderRoot=e},this.$propHandlers["empty-message"]=function(e){this["empty-message"]=e,this.$updateClearMessage&&this.$updateClearMessage(this["empty-message"],"empty")},this.$propHandlers["loading-message"]=function(e){this["loading-message"]=e,this.$updateClearMessage&&this.$updateClearMessage(this["loading-message"],"loading")},this.$propHandlers["offline-message"]=function(e){this["offline-message"]=e,this.$updateClearMessage&&this.$updateClearMessage(this["offline-message"],"offline")},this.$propHandlers.smartbinding=this.$propHandlers.actions=this.$propHandlers.bindings=function(e,t){var n="$"+t+"Element";this[n]&&this[n].unregister(this);if(!e)return;apf.nameserver.get(t,e).register(this),t!="actions"&&this.$checkLoadQueue()===!1&&this.$amlLoaded&&2};var t={caption:1,icon:1,select:1,css:1,sort:1,drop:2,drag:2,dragcopy:2,eachvalue:1};this.$addAttrBind=function(e,r,i){r.models&&this.hasFeature(apf.__MULTISELECT__);var s,o,u,a,f=r.xpaths,l={};for(s=0;s<f.length;s+=2)l[u=f[s]]?l[u]++:l[u]=1;this.$propsUsingMainModel||(this.$propsUsingMainModel={});var c=(this.$attrBindings||(this.$attrBindings={}))[e]={cvalue:r,value:i,compile:apf.BindingRule.prototype.$compile,models:[]};delete this.$propsUsingMainModel[e];for(o,s=0;s<f.length;s+=2){u=f[s];if(l[u]==-1)continue;o=f[s+1];if(u=="#"||o=="#"){var h=(c.cvalue3||(c.cvalue3=apf.lm.compile(c.value,{xpathmode:5}))).call(this,this.xmlRoot);if(typeof h!="string"){a=h.model&&h.model.$isModel&&h.model;if(a)o=h.xpath;else{if(!h.model){this.addEventListener("prop."+e,function(t){var n=(c.cvalue3||(c.cvalue3=apf.lm.compile(c.value,{xpathmode:5}))).call(this,this.xmlRoot);if(n.model){this.removeEventListener("prop."+e,arguments.callee);var r=this;$setTimeout(function(){r.$clearDynamicProperty(e),r.$setDynamicProperty(e,i)},10)}});continue}a=typeof h.model=="string"?apf.xmldb.findModel(h.model):h.model,o=apf.xmlToXpath(h.model,a.data)+(h.xpath?"/"+h.xpath:"")}}else a=null}else a=null;if(!a)if(u)a=apf.nameserver.get("model",u)||apf.setReference(u,apf.nameserver.register("model",u,new apf.model));else{!this.$model&&!this.$initingModel&&n.call(this),a=this.$model;if(!this.hasFeature(apf.__MULTISELECT__)&&t[e]!=2||!t[e])this.$propsUsingMainModel[e]={xpath:o,optimize:l[u]==1}}a&&(!this.hasFeature(apf.__MULTISELECT__)&&t[e]!=2||!t[e])&&(a.$bindXmlProperty(this,e,o,l[u]==1),c.models.push(a)),l[u]=-1}c.xpath=o,this.$canLoadDataAttr=t[e]==1,this.$checkLoadQueue()},this.$removeAttrBind=function(e){var t=this.$attrBindings[e];if(!t)return;delete this.$attrBindings[e],delete this.$propsUsingMainModel[e];var n=t.models;if(n.length)for(var r=0;r<n.length;r++)n[r].$unbindXmlProperty(this,e);else this.$model&&this.$model.$unbindXmlProperty(this,e)},this.$initingModel,this.addEventListener("DOMNodeInsertedIntoDocument",function(e){!this.model&&this.$setClearMessage&&!this.value&&this.$setClearMessage(this["empty-message"],"empty"),this.$amlLoaded=!0,this.$checkLoadQueue()}),this.$propHandlers.model=function(e){if(!e&&!this.$modelParsed){this.$model?(this.clear(),this.$model.unregister(this),this.$model=null,this.lastModelId=""):this.dataParent&&(this.dataParent.parent=null);return}this.$initingModel=!0;var t;if((t=this.$modelParsed)&&t.type!=2){var n,r=t.props;this.dataParent&&(this.dataParent=null);for(var i in r){this.dataParent={parent:self[i.split(".")[0]],xpath:null,model:this.$modelParsed.instruction},n=!0;break}n&&this.dataParent&&!this.dataParent.signalXmlUpdate&&(this.dataParent.signalXmlUpdate={}),this.$modelParsed=null}var s;if(typeof e=="object"){if(e.dataType==apf.ARRAY){s=apf.nameserver.get("model",e[0]),s.register(this,e[1]);return}if(!e.$isModel){this.dataParent&&(this.model=this.dataParent.model),s=apf.xmldb.findModel(e);if(!s)return;var o=apf.xmlToXpath(e,null,!0)||".";s.register(this,o);return}s=e,e=this.model=s.name,e||s.setProperty("id",e=this.model="model"+s.$uniqueId)}else if(e.indexOf("[::")>-1){var s,u=this;do u=u.parentNode,s=u.getAttribute("model");while(u.parentNode&&u.parentNode.nodeType==1&&(!s||s==e));s&&typeof s=="object"&&(s=s.id),this.$inheritProperties.model=3;if(!s){apf.console.warn("No found model on any of the parents for this element while trying to overload model: "+e);return}e=e.replace(/\[\:\:/g,"["+s+"::")}clearTimeout(this.$dbTimer);if(!this.$amlLoaded&&this.nodeType==1){var a=this;this.$dbTimer=$setTimeout(function(){a.$amlDestroyed||apf.setModel(e,a)})}else apf.setModel(e,this)},this.$propHandlers.viewport=function(e){if(e!="virtual")return;this.implement(apf.VirtualViewport)}},apf.DataBinding.prototype=new apf[apf.Presentation?"Presentation":"AmlElement"],apf.config.$inheritProperties.model=1,apf.config.$inheritProperties["empty-message"]=1,apf.config.$inheritProperties["loading-message"]=1,apf.config.$inheritProperties["offline-message"]=1,apf.config.$inheritProperties.noloading=1,apf.Init.run("databinding"),apf.MultiselectBinding=function(){this.setQueryValue||this.implement(apf.DataBinding),this.$regbase=this.$regbase|apf.__MULTISELECT__,this.$init(function(){this.$selectTimer={}})},function(){this.length=0,this.$attrExcludePropBind=apf.extend({caption:2,icon:2,eachvalue:2,select:2,css:2,sort:2,drag:2,drop:2,dragcopy:2,selected:3,each:1,selection:3,"selection-unique":3,"selection-constructor":3},this.$attrExcludePropBind),this.resort=function(e,t,n){this.$sort||(this.$sort=new apf.Sort),this.$sort.set(e,t),this.clearAllCache&&this.clearAllCache();if(n)return;var r=this;return function i(e,t){if(!e)return;var n=r.$sort.apply(apf.getArrayFromNodelist(e.selectNodes(r.each)));for(var s=0;s<n.length;s++)if(r.$isTreeArch||r.$withContainer){var o=apf.xmldb.findHtmlNode(n[s],r),u=r.$findContainer(o);t.appendChild(o),apf.isChildOf(o,u,!0)||t.appendChild(u),i(n[s],u)}else t.appendChild(apf.xmldb.findHtmlNode(n[s],r))}(this.xmlRoot,this.$container),e},this.toggleSortOrder=function(){return this.resort({ascending:!this.$sort.get().ascending}).ascending},this.getSortSettings=function(){return this.$sort.get()},this.$propHandlers.simpledata=function(e){e?(this.getTraverseNodes=function(e){if(this.$sort&&!this.$isLoading){var t=apf.getArrayFromNodelist((e||this.xmlRoot).childNodes);return this.$sort.apply(t)}return(e||this.xmlRoot).childNodes},this.getFirstTraverseNode=function(e){return this.getTraverseNodes(e)[0]},this.getLastTraverseNode=function(e){var t=this.getTraverseNodes(e);return t[t.length-1]},this.getTraverseParent=function(e){return!e.parentNode||e==this.xmlRoot?!1:e.parentNode}):(delete this.getTraverseNodes,delete this.getFirstTraverseNode,delete this.getLastTraverseNode,delete this.getTraverseParent)},this.getTraverseNodes=function(e){if(this.$sort){var t=apf.getArrayFromNodelist((e||this.xmlRoot).selectNodes(this.each));return this.$sort.apply(t)}return(e||this.xmlRoot).selectNodes(this.each)},this.getFirstTraverseNode=function(e){if(this.$sort){var t=(e||this.xmlRoot).selectNodes(this.each);return this.$sort.apply(t)[0]}return(e||this.xmlRoot).selectSingleNode(this.each)},this.getLastTraverseNode=function(e){var t=this.getTraverseNodes(e||this.xmlRoot);return t[t.length-1]},this.isTraverseNode=function(e){var t=this.getTraverseNodes(this.getTraverseParent(e)||this.xmlRoot);for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},this.getNextTraverseSelected=function(e,t,n){e||(e=this.selected),n||(n=1);var r=0,i=this.getTraverseNodes(this.getTraverseParent(e)||this.xmlRoot);while(i[r]&&i[r]!=e)r++;var s=t==null?i[r+n]||i[r-n]:t?i[r+n]:i[r-n];return s||n&&(r<n||r+1>Math.floor(i.length/n)*n)?s:t?i[i.length-1]:i[0]},this.getNextTraverse=function(e,t,n){n||(n=1),e||(e=this.selected);var r=0,i=this.getTraverseNodes(this.getTraverseParent(e)||this.xmlRoot);while(i[r]&&i[r]!=e)r++;var s=r+(t?-1*n:n);return i[s<0?0:s]},this.getTraverseParent=function(e){if(!e.parentNode||e==this.xmlRoot)return!1;if(e.$regbase)return e.parentNode;var t,n=e.getAttribute(apf.xmldb.xmlIdTag);return n||(e.setAttribute(apf.xmldb.xmlIdTag,"temp"),n="temp"),t=e.selectSingleNode("ancestor::node()[(("+this.each+")/@"+apf.xmldb.xmlIdTag+")='"+n+"']"),n=="temp"&&e.removeAttribute(apf.xmldb.xmlIdTag),t},this.$findHtmlNode||(this.$findHtmlNode=function(e){return this.$pHtmlDoc.getElementById(e)}),this.$setClearMessage=function(e,t,n){this.more&&this.$addMoreItem&&this.$addMoreItem();if(!this.$empty){if(!this.$hasLayoutNode("empty"))return;this.$getNewContext("empty");var r=this.$getLayoutNode("empty");if(!r)return;this.$empty=apf.insertHtmlNode(r,this.$container)}else this.$container.appendChild(this.$empty);var i=this.$getLayoutNode("empty","caption",this.$empty);i&&apf.setNodeValue(i,e||""),this.$empty.setAttribute("id","empty"+this.$uniqueId),apf.setStyleClass(this.$empty,t,["loading","empty","offline"]);var s=apf.getStyle(this.$ext,"height");this.$empty.style.height=n&&(!s||s=="auto")&&t!="empty"?Math.max(10,n-apf.getHeightDiff(this.$empty)-apf.getHeightDiff(this.$ext))+"px":""},this.$updateClearMessage=function(e,t){if(!this.$empty||this.$empty.parentNode!=this.$container||this.$empty.className.indexOf(t)==-1)return;var n=this.$getLayoutNode("empty","caption",this.$empty);n&&apf.setNodeValue(n,e||"")},this.$removeClearMessage=function(){this.$empty||(this.$empty=document.getElementById("empty"+this.$uniqueId)),this.$empty&&this.$empty.parentNode&&this.$empty.parentNode.removeChild(this.$empty)},this.$load=function(e){apf.xmldb.addNodeListener(e,this),this.$isLoading=!0;var t=this.getTraverseNodes(e).length;if(!this.renderRoot&&!t)return this.clear(null,null,!0);var n=this.$addNodes(e,null,null,this.renderRoot,null,0,"load");this.$fill(n),this.$isLoading=!1;if(this.selectable)if(this["default"])this.select(this["default"]);else if(this.autoselect)this.selected||(this.renderRoot?this.select(e,null,null,null,!0):n.length&&this.$selectDefault(e));else{this.clearSelection(!0);var r=this.renderRoot?this.xmlRoot:this.getFirstTraverseNode();r&&this.setCaret(r),this.selected&&this.setProperty("selected",null),this.choosen&&this.setProperty("choosen",null)}this.focussable&&(apf.document.activeElement==this?this.$focus():this.$blur()),t!=this.length&&this.setProperty("length",t)};var e={insert:127,replacenode:127,attribute:255,add:251,remove:110,"redo-remove":79,synchronize:127,"move-away":297,move:141};this.$xmlUpdate=function(t,n,r,i,s){if(!this.xmlRoot)return;var o,u,a,f,l=n;r||(r=this.xmlRoot);if(t=="redo-remove"){var c=[n.parentNode,n.nextSibling];s.appendChild(n);var h=this.isTraverseNode(n);c[0]?c[0].insertBefore(n,c[1]):s.removeChild(n),h||(n=s)}do{if(t=="add"&&this.isTraverseNode(n)&&l==n)break;if(n.getAttribute(apf.xmldb.xmlIdTag)){f=this.$findHtmlNode(n.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId);if(n==r&&!this.renderRoot){if(n==this.xmlRoot&&t!="insert"&&t!="replacenode"){this.dispatchEvent("xmlupdate",{action:t,xmlNode:n,UndoObj:i});return}break}if(f&&e[t]&2&&!this.isTraverseNode(n))t="remove";else{if(!f&&e[t]&4&&this.isTraverseNode(n)){t="add";break}if(f&&(l!=n||n==this.xmlRoot))if(e[t]&1)t="update";else if(t=="remove")return}if(f||t=="move")break}else if(e[t]&8&&this.isTraverseNode(n)){t="add";break}if(n==r){if(e[t]&128)return;break}n=n.parentNode}while(n&&n.nodeType!=9);if(this.hasFeature(apf.__VIRTUALVIEWPORT__)&&!this.$isInViewport(n))return;var p=n;n&&n.nodeType==9&&(n=l);if(t=="replacenode"){if(i?i.args[1]==this.xmlRoot:!this.xmlRoot.parentNode)return this.load(i?i.xmlNode:r,{force:!0});var d=this.getTraverseNodes();for(var v=0,m=d.length;v<m;v++)if(apf.isChildOf(l,d[v]))return this.load(this.xmlRoot,{force:!0})}i&&n&&!i.xmlNode&&(i.xmlNode=n);if(t=="move"&&p==l){var g=apf.isChildOf(this.xmlRoot,n.parentNode,!0),y=apf.isChildOf(this.xmlRoot,i.extra.parent,!0);g&&y?this.$moveNode(n,f,i.extra.oldParent):g?t="add":y&&(t="remove")}else if(t=="move-away"){var b=apf.isChildOf(this.xmlRoot,i.extra.parent,!0);b||(t="remove")}this.$removeClearMessage&&this.$setClearMessage&&(this.getFirstTraverseNode()?this.$removeClearMessage():this.$setClearMessage(this["empty-message"],"empty"));if(t!="insert"||!this.$isTreeArch&&n!=this.xmlRoot){if(t=="add"){var w;a=this.getTraverseParent(n)||this.xmlRoot,a==this.xmlRoot&&(w=this.$container),!w&&this.$isTreeArch&&(w=this.$findHtmlNode(a.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId)),!w&&this.getCacheItem&&(w=this.getCacheItem(a.getAttribute(apf.xmldb.xmlIdTag)||(a.getAttribute(apf.xmldb.xmlDocTag)?"doc"+a.getAttribute(apf.xmldb.xmlDocTag):!1)));if(w||this.$isTreeArch&&a==this.xmlRoot)w=(this.$findContainer&&w&&w.nodeType==1?this.$findContainer(w):w)||this.$container,o=this.$addNodes(n,w,!0,!0,apf.xmldb.getHtmlNode(this.getNextTraverse(n),this)),w&&this.$fill(o)}else if(t=="remove"){if(f)this.$deInitNode(n,f);else if(l==this.xmlRoot)return this.load(null,{noClearMsg:!this.dataParent||!this.dataParent.autoselect})}else if(f)this.$sort&&this.$moveNode(n,f),this.$updateNode(n,f),t=="replacenode"&&this.hasFeature(apf.__MULTISELECT__)&&this.selected&&n.getAttribute(apf.xmldb.xmlIdTag)==this.selected.getAttribute(apf.xmldb.xmlIdTag)&&(this.selected=n);else if(t=="redo-remove"){var E=this.xmlRoot;while(E&&E.nodeType!=9)E=E.parentNode;if(!E){var S=this.getModel(!0);return S.$waitForXml(this)}}}else{if(!n)return;this.$hasLoadStatus(n)&&this.$removeLoading&&this.$removeLoading(n),this.$container.firstChild&&!apf.xmldb.getNode(this.$container.firstChild)&&(this.$container.innerHTML="",this.renderRoot||(u=this.getTraverseNodes().length,u||this.clear())),o=this.$addNodes(n,null,!0,!1,null,null,"insert"),this.$fillParentHtml=this.$getParentNode?this.$getParentNode(f):f,this.$fillParent=n,this.$fill(o);if(this.selectable&&(u===0||!this.xmlRoot.selectSingleNode(this.each)))return}a=n?n.parentNode:s;if(this.$isTreeArch&&!this.$preventRecursiveUpdate&&a&&a.nodeType==1)do f=this.$findHtmlNode(a.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId),f&&this.$updateNode(a,f);while((a=this.getTraverseParent(a))&&a.nodeType==1);if(e[t]&32&&this.selectable&&l==n&&(t!="insert"||n==this.xmlRoot)){clearTimeout(this.$selectTimer.timer);if(t=="remove"&&apf.isChildOf(n,this.selected,!0)||n==this.$selectTimer.nextNode)this.$selectTimer.nextNode=this.getDefaultNext(n,this.$isTreeArch),this.$selectTimer.nextNode==this.xmlRoot&&!this.renderRoot&&(this.$selectTimer.nextNode=null);var x=this;this.$selectTimer.timer=$setTimeout(function(){x.$checkSelection(x.$selectTimer.nextNode),x.$selectTimer.nextNode=null})}e[t]&64&&(u||(u=this.xmlRoot.selectNodes(this.each).length),t=="remove"&&u--,u!=this.length&&this.setProperty("length",u));if(this.signalXmlUpdate&&e[t]&16){var T;for(T in this.signalXmlUpdate){if(parseInt(T,10)!=T)continue;var N=apf.lookup(T);if(!this.selected)continue;n=this.selected.selectSingleNode(N.dataParent.xpath);if(!n)continue;N.load(n)}}this.dispatchEvent("xmlupdate",{action:t,xmlNode:l,traverseNode:n,result:o,UndoObj:i})},this.$addNodes=function(e,t,n,r,i,s,o){var u,a,f;r=r&&(this.renderRoot&&e==this.xmlRoot||this.isTraverseNode(e));var l=r?[e]:this.getTraverseNodes(e),c,h;if(this.$isTreeArch&&this.caching&&(!this.$bindings||!this.$bindings.each||!this.$bindings.each.filter)&&(h=this.cache[c=e.getAttribute(apf.xmldb.xmlIdTag)])){if(!this.$subTreeCacheContext&&!this.$needsDepth){this.$subTreeCacheContext={oHtml:h,container:t,parentNode:null,beforeNode:null};var u;while(h.childNodes.length)(t||this.$container).appendChild(u=h.childNodes[0]);return l}this.clearCacheItem(c)}if(this.$isTreeArch&&s===null&&o=="insert"){s=0,f=e;while(f&&f!=this.xmlRoot)s++,f=this.getTraverseParent(f)}for(var p=0;p<l.length;p++){if(l[p].nodeType!=1)continue;n&&(u=this.$findHtmlNode(l[p].getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId));if(!u){var d=apf.xmldb.nodeConnect(this.documentId,l[p],null,this),v=r?i:a?a.nextSibling:null,m=this.$add(l[p],d,r?e.parentNode:e,v?t||this.$container:t,v,!v&&p==l.length-1,s,l[p+1],o);if(m===!1)break}n&&(a=u)}return l},this.$handleBindingRule=function(e,t){e||(this[t]=null);if(t=="each"){e=e.charAt(0)=="["&&e.charAt(e.length-1)=="]"?e.replace(/^\[|\]$/g,""):e;if(e.match(/^\w+::/)){var n=e.split("::");apf.xPathAxis[n[0]]?this.each=e:(this.setProperty("model",n[0]),this.each=n[1])}else this.each=e;if(this.each==this.$lastEach)return;this.$lastEach=e;if(!this.$model&&!this.$initingModel){this.$initingModel=!0,this.$setInheritedAttribute("model");return}if(this.$checkLoadQueue()!==!1)return}if(this.xmlRoot&&!this.$bindRuleTimer&&this.$amlLoaded){var r=this;apf.queue.add("reload"+this.$uniqueId,function(){r.reload()})}},this.$select=function(e){this.renaming&&this.stopRename(null,!0);if(!e||!e.style)return;return this.$setStyleClass(e,"selected")},this.$deselect=function(e){if(this.renaming){this.stopRename(null,!0);if(this.ctrlselect)return!1}if(!e)return;return this.$setStyleClass(e,"",["selected","indicate"])},this.$indicate=function(e){this.renaming&&this.stopRename(null,!0);if(!e)return;return this.$setStyleClass(e,"indicate")},this.$deindicate=function(e){this.renaming&&this.stopRename(null,!0);if(!e)return;return this.$setStyleClass(e,"",["indicate"])},this.$propHandlers.each=this.$propHandlers.caption=this.$propHandlers.eachvalue=this.$propHandlers.icon=this.$propHandlers.tooltip=this.$handleBindingRule,this.$propHandlers.sort=function(e){e?(this.$sort=new apf.Sort,this.$sort.set({getValue:apf.lm.compile(e)})):this.$sort=null}}.call(apf.MultiselectBinding.prototype=new apf.DataBinding),apf.StandardBinding=function(){this.$init(!0),apf.Validation&&this.implement(apf.Validation),this.setQueryValue||this.implement(apf.DataBinding),this.defaultValue||(this.defaultValue=""),this.$load=function(e){apf.xmldb.addNodeListener(e,this);var t,n,r,i,s,o;if(t=this.$bindings)for(r in t)n=r.toLowerCase(),this.$supportedProperties.indexOf(n)>-1&&(s=(i=t[n]).length==1?i[0]:this.$getBindRule(n,e),o=s.value||s.match,this.$clearDynamicProperty(n),o.indexOf("{")>-1||o.indexOf("[")>-1?this.$setDynamicProperty(n,o):this.setProperty&&this.setProperty(n,o,!0));this.errBox&&this.isValid&&this.isValid()&&this.clearError()},this.$xmlUpdate=function(e,t,n,r){if(e=="redo-remove"){var i=!1,s=this.getModel(!0);if(s){var o=s.getXpathByAmlNode(this);o&&(t=s.data.selectSingleNode(o),t!=this.xmlRoot&&(i=!0))}if(i||this.xmlRoot==t)return s.$waitForXml(this)}r&&!r.xmlNode&&(r.xmlNode=this.xmlRoot);var u,a,f,l,c,h;if(u=this.$bindings)for(f in u)a=f.toLowerCase(),this.$supportedProperties.indexOf(a)>-1&&(c=(l=u[a]).length==1?l[0]:this.$getBindRule(a,t),h=c.value||c.match,this.$clearDynamicProperty(a),h.indexOf("{")>-1||h.indexOf("[")>-1?this.$setDynamicProperty(a,h):this.setProperty&&this.setProperty(a,h));this.errBox&&this.isValid&&this.isValid()&&this.clearError(),this.dispatchEvent("xmlupdate",{action:e,xmlNode:t,UndoObj:r})},this.addEventListener("$clear",function(e,t){this.$propHandlers&&this.$propHandlers.value&&(this.value=-99999,this.$propHandlers.value.call(this,""))})},apf.StandardBinding.prototype=new apf.DataBinding,apf.Init.run("standardbinding"),apf.__MULTISELECT__=256,apf.MultiSelect=function(){this.$init(function(){this.$valueList=[],this.$selectedList=[]})},function(){function e(){this.selectAll()}this.$regbase=this.$regbase|apf.__MULTISELECT__,this.sellength=0,this.selected=null,this.$selected=null,this.caret=null,this.$caret=null,this.useindicator=!0,this.remove=function(e){e||(e=this.$valueList),e.nodeType&&(e=[e]);if(!e||!e.length)return;var t=[];for(var n=0;n<e.length;n++)t.push({action:"removeNode",args:[e[n]]});return this.$actions.removegroup?this.$executeAction("multicall",t,"removegroup",e[0]):this.$executeAction("multicall",t,"remove",e[0],null,null,e.length>1?e:null)},this.add=function(e,t,n,r){var i;if(this.$actions){if(e&&e.nodeType)i=this.$actions.getRule("add",e);else if(typeof e=="string")if(e.trim().charAt(0)=="<")e=apf.getXml(e),i=this.$actions.getRule("add",e);else{var s=this.$actions.add;for(var o=0,u=s.length;o<u;o++)if(s[o].getAttribute("type")==e){e=null,i=s[o];break}}i||(i=(this.$actions.add||{})[0])}else i=null;var a=this.$isTreeArch?this.selected||this.xmlRoot:this.xmlRoot,f=this,l=function(i,s,o){if(s!=apf.SUCCESS){var u;u=new Error(apf.formatErrorString(1032,f,"Loading xml data","Could not add data for control "+f.name+"["+f.tagName+"] \nUrl: "+o.url+"\nInfo: "+o.message+"\n\n"+e));if(o.tpModule.retryTimeout(o,s,f,u)===!0)return!0;throw u}typeof i!="object"&&(i=apf.getXmlDom(i).documentElement),i.getAttribute(apf.xmldb.xmlIdTag)&&i.setAttribute(apf.xmldb.xmlIdTag,"");var a=f.$actions&&f.$actions.getRule("add",f.$isTreeArch?f.selected:f.xmlRoot);return t||(a&&a.parent?t=(a.cparent||a.compile("parent",{xpathmode:2,injectself:!0}))(f.$isTreeArch?f.selected||f.xmlRoot:f.xmlRoot):t=f.$isTreeArch?f.selected||f.xmlRoot:f.xmlRoot),t||(t=f.xmlRoot),apf.isWebkit&&t.ownerDocument!=i.ownerDocument&&(i=t.ownerDocument.importNode(i,!0)),f.$executeAction("appendChild",[t,i,n],"add",i)!==!1&&f.autoselect&&f.select(i),r&&r.call(f,i),i};return e?l(e,apf.SUCCESS):i.get?apf.getData(i.get,{xmlNode:a,callback:l}):addXmlNode},this.setValue||(this.setValue=function(e,t){noEvent=t,this.setProperty("value",e,!1,!0),noEvent=!1}),this.findXmlNodeByValue=function(e){var t=this.getTraverseNodes(),n=this.$attrBindings.eachvalue&&"eachvalue"||this.$bindings.value&&"value"||this.$hasBindRule("caption")&&"caption";if(!n)return!1;for(var r=0;r<t.length;r++)if(this.$applyBindRule(n,t[r])==e)return t[r]},this.getValue||(this.getValue=function(e,t){return this.value}),this.reselect=function(){this.selected&&this.select(this.selected,null,this.ctrlselect,null,!0)},this.select=function(e,t,n,r,i,s,o){if(!this.selectable||o&&this.disabled)return;parseInt(r)==r&&(r==2?(r=!0,o=!0):(r=!1,o=!0));if(this.$skipSelect){this.$skipSelect=!1;return}this.ctrlselect&&!n&&(t=!0),this.multiselect||(t=n=!1);if(!this.xmlRoot){if(!this.$buffered){var u;this.addEventListener("afterload",u=function(){this.select.apply(this,this.$buffered),this.removeEventListener("afterload",u),delete this.$buffered})}this.$buffered=Array.prototype.slice.call(arguments);return}var a;if(!e)return!1;if(typeof e!="object"){var f=e;e=null,typeof e=="string"&&(e=apf.xmldb.getNodeById(f));if(!e){e=this.findXmlNodeByValue(f);if(!e){this.clearSelection(s);return}}}if(typeof (e.style||"")!="object")a=this.$findHtmlNode(e.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId);else{var l=(a=e).getAttribute(apf.xmldb.htmlIdTag);while(!l&&a.parentNode)l=(a=a.parentNode).getAttribute(apf.xmldb.htmlIdTag);e=apf.xmldb.getNodeById(l)}if(!n&&!t&&!i&&!this.reselectable&&this.$valueList.length<=1&&this.$valueList.indexOf(e)>-1)return;if(this.dispatchEvent("beforeselect",{selected:e,htmlNode:a,ctrlKey:t,shiftKey:n,force:i,captureOnly:s})===!1)return!1;var c=this.caret;this.caret=e;if(n){var h=this.$calcSelectRange(this.$valueList[0]||c,e);this.$caret&&this.$deindicate(this.$caret),this.selectList(h),this.$selected=this.$caret=this.$indicate(a)}else if(t)this.$valueList.contains(e)?(this.selected==e?(this.$deselect(this.$findHtmlNode(this.selected.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId)),this.$deindicate(this.$caret),this.$valueList.length&&!r&&(this.selected=this.$valueList[0])):this.$deselect(a,e),r||(this.$selectedList.remove(a),this.$valueList.remove(e)),a!=this.$caret&&this.$deindicate(this.$caret),this.$selected=this.$caret=this.$indicate(a)):(this.$caret&&this.$deindicate(this.$caret),this.$caret=this.$indicate(a,e),this.$selected=this.$select(a,e),this.selected=e,r||(this.$selectedList.push(a),this.$valueList.push(e)));else{if(r&&a&&this.$selectedList.contains(a))return;this.$selected&&this.$deselect(this.$selected),this.$caret&&this.$deindicate(this.$caret),this.selected&&this.clearSelection(!0),this.$caret=this.$indicate(a,e),this.$selected=this.$select(a,e),this.selected=e,this.$selectedList.push(a),this.$valueList.push(e)}if(this.delayedselect&&typeof t=="boolean"){var p=this;$setTimeout(function(){p.selected==e&&p.dispatchEvent("afterselect",{selection:p.$valueList,selected:e,caret:p.caret,captureOnly:s})},10)}else this.dispatchEvent("afterselect",{selection:this.$valueList,selected:e,caret:this.caret,captureOnly:s});return!0},this.choose=function(e,t){if(!this.selectable||t&&this.disabled)return;if(this.dispatchEvent("beforechoose",{xmlNode:e})===!1)return!1;e&&typeof (e.style||"")!="object"&&this.select(e),this.hasFeature(apf.__DATABINDING__)&&this.dispatchEvent("afterchoose",{xmlNode:this.selected})!==!1&&this.setProperty("chosen",this.selected)},this.clearSelection=function(e,t){if(!this.selectable||t&&this.disabled||!this.$valueList.length)return;if(!e&&this.dispatchEvent("beforeselect",{selection:[],selected:null,caret:this.caret})===!1)return!1;var n;for(var r=this.$valueList.length-1;r>=0;r--)n=this.$findHtmlNode(this.$valueList[r].getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId),this.$deselect(n);this.$selectedList.length=0,this.$valueList.length=0,this.$selected=this.selected=null,this.caret&&(n=this.$findHtmlNode(this.caret.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId),this.$caret=this.$indicate(n)),e||this.dispatchEvent("afterselect",{selection:this.$valueList,selected:null,caret:this.caret})},this.selectList=function(e,t,n,r){if(!this.selectable||r&&this.disabled)return;if(this.dispatchEvent("beforeselect",{selection:e,selected:n||e[0],caret:this.caret,captureOnly:t})===!1)return!1;this.clearSelection(!0);for(var i,s=0;s<e.length;s++){if(!e[s]||e[s].nodeType!=1)continue;var o,u=e[s];typeof u!="object"&&(u=apf.xmldb.getNodeById(u)),typeof (u.style||"")!="object"?o=this.$pHtmlDoc.getElementById(u.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId):(o=u,u=apf.xmldb.getNodeById(o.getAttribute(apf.xmldb.htmlIdTag)));if(!u)continue;o&&(!i&&n==o&&(i=o),this.$select(o,u),this.$selectedList.push(o)),this.$valueList.push(u)}this.$selected=i||this.$selectedList[0],this.selected=n||this.$valueList[0],this.dispatchEvent("afterselect",{selection:this.$valueList,selected:this.selected,caret:this.caret,captureOnly:t})},this.setCaret=function(e){if(!e){this.$caret&&this.$deindicate(this.$caret),this.caret=this.$caret=null;return}var t;typeof e!="object"&&(e=apf.xmldb.getNodeById(e));if(typeof (e.style||"")!="object")t=this.$findHtmlNode(e.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId);else{var n=(t=e).getAttribute(apf.xmldb.htmlIdTag);while(!n&&t.parentNode&&t.parentNode.nodeType==1)n=(t=t.parentNode).getAttribute(apf.xmldb.htmlIdTag);n||alert(this.$int.outerHTML),e=apf.xmldb.getNodeById(n)}this.$caret&&this.$deindicate(this.$caret),this.$caret=this.$indicate(t),this.setProperty("caret",this.caret=e)},this.$setTempSelected=function(e,t,n,r){clearTimeout(this.timer);if(this.$bindings.selectable){while(e&&!this.$getDataNode("selectable",e))e=this.getNextTraverseSelected(e,!r);if(!e)return}this.multiselect||(t=n=!1);if(t||this.ctrlselect)this.$tempsel&&(this.select(this.$tempsel),this.$tempsel=null),this.setCaret(e);else if(n)this.$tempsel&&(this.$selectTemp(),this.$deselect(this.$tempsel),this.$tempsel=null),this.select(e,null,n);else if(!this.bufferselect||this.$valueList.length>1)this.select(e);else{var i=apf.xmldb.getID(e,this);this.$deselect(this.$tempsel||this.$selected),this.$deindicate(this.$tempsel||this.$caret),this.$tempsel=this.$indicate(document.getElementById(i)),this.$select(this.$tempsel);var s=this;this.timer=$setTimeout(function(){s.$selectTemp()},400)}},this.$selectTemp=function(){if(!this.$tempsel)return;clearTimeout(this.timer),this.select(this.$tempsel),this.$tempsel=null,this.timer=null},this.selectAll=function(e){if(!this.multiselect||!this.selectable||e&&this.disabled||!this.xmlRoot)return;var t=this.$isTreeArch?this.xmlRoot.selectNodes(".//"+this.each.split("|").join("|.//")):this.xmlRoot.selectNodes(this.each);this.selectList(t)},this.getSelection=function(e){var t,n;if(e){n=this.xmlRoot?this.xmlRoot.ownerDocument.createDocumentFragment():apf.getXmlDom().createDocumentFragment();for(t=0;t<this.$valueList.length;t++)apf.xmldb.cleanNode(n.appendChild(this.$valueList[t].cloneNode(!0)))}else for(n=[],t=0;t<this.$valueList.length;t++)n.push(this.$valueList[t]);return n},this.$getSelection=function(e){return e?this.$selectedList:this.$valueList},this.defaultSelectNext=function(e,t){var n=this.getNextTraverseSelected(e);n||!t?this.select(n?n:this.getTraverseParent(e)):this.clearSelection(!0)},this.selectNext=function(){var e=this.getNextTraverse();e&&this.select(e)},this.selectPrevious=function(){var e=this.getNextTraverse(null,-1);e&&this.select(e)},this.getDefaultNext=function(e,t){var n=this.getNextTraverseSelected(e);return n&&n!=e?n:t?this.getTraverseParent(e):null},this.isSelected=function(e){if(!e)return!1;for(var t=0;t<this.$valueList.length;t++)if(this.$valueList[t]==e)return this.$valueList.length;return!1},this.$checkSelection=function(e){if(this.$valueList.length>1){for(var t=[],n=0,r=this.$valueList.length;n<r;n++)apf.isChildOf(this.xmlRoot,this.$valueList[n])&&t.push(this.$valueList[n]);if(t.length>1){this.selectList(t),this.caret&&!apf.isChildOf(this.xmlRoot,this.caret)&&this.setCaret(e||this.selected);return}t.length&&(e=t[0])}if(!e)if(this.selected&&!apf.isChildOf(this.xmlRoot,this.selected))e=this.getFirstTraverseNode();else if(this.selected&&this.caret&&!apf.isChildOf(this.xmlRoot,this.caret))this.setCaret(this.selected);else{if(!!this.selected)return;e=this.xmlRoot?this.getFirstTraverseNode():null}e?this.autoselect?this.select(e):(this.clearSelection(),this.setCaret(e)):this.clearSelection()},this.selectable=!0,typeof this.ctrlselect=="undefined"&&(this.ctrlselect=!1),typeof this.multiselect=="undefined"&&(this.multiselect=!0),typeof this.autoselect=="undefined"&&(this.autoselect=!0),typeof this.delayedselect=="undefined"&&(this.delayedselect=!0),typeof this.allowdeselect=="undefined"&&(this.allowdeselect=!0),this.reselectable=!1,this.$booleanProperties.selectable=!0,this.$booleanProperties.multiselect=!0,this.$booleanProperties.autoselect=!0,this.$booleanProperties.delayedselect=!0,this.$booleanProperties.allowdeselect=!0,this.$booleanProperties.reselectable=!0,this.$supportedProperties.push("selectable","ctrlselect","multiselect","autoselect","delayedselect","allowdeselect","reselectable","selection","selected","default","value","caret"),this.$propHandlers.value=function(e){if(this.$lastValue==e){delete this.$lastValue;return}if(!this.$attrBindings.eachvalue&&!this.$amlLoaded&&this.getAttribute("eachvalue")){var t=this;return apf.queue.add("value"+this.$uniqueId,function(){t.$propHandlers.value.call(t,e)})}e||e===0||this["default"]?this.select(String(e)||this["default"]):this.clearSelection()},this.$propHandlers["default"]=function(e,t){(!this.value||!this.$amlLoaded&&!(this.getAttribute("value")||this.getAttribute("selected")||this.getAttribute("selection")))&&this.$propHandlers.value.call(this,"")},this.$propHandlers.caret=function(e,t){e&&this.setCaret(e)},this.$propHandlers.selection=this.$propHandlers.selected=function(e,t){e||(e=this[t]=null);if(t=="selected"&&typeof e!="string"){if(!e||e.nodeType==1)return;e=e.nodeValue}if(this.$isSelecting)return this.selection=this.$valueList,!1;var n,r,i,s,o,u,a;if(t=="selection"){if(typeof e=="object"&&e==this.$valueList){var f;if((u=this.$attrBindings[t])&&u.cvalue.models){this.$isSelecting=!0,r=this.$attrBindings.eachvalue&&"eachvalue"||this.$bindings.value&&"value"||this.$hasBindRule("caption")&&"caption";if(!r)throw new Error("Missing bind rule set: eachvalue, value or caption");var l=this.$getDataNode(t,this.xmlRoot);n=e,i=(a=this.$attrBindings["selection-unique"])&&a.cvalue;if(l.length)f=l[0].parentNode;else{var c,h;if(u.cvalue.xpaths[0]=="#"||u.cvalue.xpaths[1]=="#"){var p=(u.cvalue3||(u.cvalue3=apf.lm.compile(u.value,{xpathmode:5})))(this.xmlRoot);c=p.model&&p.model.$isModel&&p.model,c?h=p.xpath:p.model&&(c=apf.xmldb.findModel(p.model),h=apf.xmlToXpath(p.model,c.data)+(p.xpath?"/"+p.xpath:""))}else c=apf.nameserver.get("model",u.cvalue.xpaths[0]),h=u.cvalue.xpaths[1];if(!c||!c.data)return this.$isSelecting=!1,!1;f=c.queryNode(h.replace(/\/[^\/]+$|^[^\/]*$/,"")||".");if(!f)throw new Error("Missing parent node")}e:for(s=0;s<l.length;s++){e=i?i(l[s]):this.$applyBindRule(r,l[s]);for(o=0;o<n.length;o++)if(this.$applyBindRule(r,n[o])==e)continue e;apf.xmldb.removeNode(l[s])}t:for(s=0;s<n.length;s++){e=this.$applyBindRule(r,n[s]);for(o=0;o<l.length;o++)if(i?i(l[o]):this.$applyBindRule(r,l[o])==e)continue t;var d=this.$attrBindings["selection-constructor"]&&this.$getDataNode("selection-constructor",n[s])||apf.getCleanCopy(n[s]);apf.xmldb.appendChild(f,d)}this.$isSelecting=!1}return}this.selection=this.$valueList}else this.selected=null;if(!this.xmlRoot){if(!this.$buffered){var v;this.addEventListener("afterload",v=function(){this.removeEventListener("afterload",v),this.$propHandlers.selected.call(this,e,t),delete this.$buffered}),this.$buffered=!0}return this[t]=null,!1}if(!e||typeof e!="object"){if(this.$attrBindings[t]){n=this.$getDataNode(t,this.xmlRoot);if(n&&(n.length||n.nodeType==1)){this.setProperty("selection",n);return}if(!n||n.length===0)return}return e?this.select(e):this.clearSelection(),!1}if(typeof e.length=="number"){n=e;if(!n.length){this.selected=null;if(this.$valueList.length)return this.clearSelection(),!1;return}if(this.isTraverseNode(n[0])&&apf.isChildOf(this.xmlRoot,n[0]))return this.multiselect?this.selectList(n):this.select(n[0]),!1;if(this.$attrBindings[t]){r=this.$attrBindings.eachvalue&&"eachvalue"||this.$bindings.value&&"value"||this.$hasBindRule("caption")&&"caption";if(!r)throw new Error("Missing bind rule set: eachvalue, value or caption");var m=this.each?this.xmlRoot.selectNodes("//"+this.each.split("|").join("|//")):this.getTraverseNodes();i=(u=this.$attrBindings["selection-unique"])&&u.cvalue;var g=[];for(s=0;s<n.length;s++){e=i?i(n[s]):this.$applyBindRule(r,n[s]);for(o=0;o<m.length;o++)this.$applyBindRule(r,m[o])==e&&g.push(m[o])}return this.selectList(g,!0),!1}throw new Error("Show me which case this is")}this.$valueList.indexOf(e)==-1&&this.select(e)},this.$propHandlers.allowdeselect=function(e){if(e){var t=this;this.$container.onmousedown=function(e){e||(e=event);if(e.ctrlKey||e.shiftKey)return;var n=e.srcElement||e.target;t.allowdeselect&&(n==this||n.getAttribute(apf.xmldb.htmlIdTag))&&t.clearSelection()}}else this.$container.onmousedown=null},this.$propHandlers.ctrlselect=function(e){e!="enter"&&(this.ctrlselect=apf.isTrue(e))},this.$propHandlers.autoselect=function(t){t=="all"&&this.multiselect?this.addEventListener("afterload",e):this.removeEventListener("afterload",e)},this.$propHandlers.multiselect=function(e){!e&&this.$valueList.length>1&&this.select(this.selected)},this.addEventListener("beforeselect",function(e){if(this.$bindings.selectable&&!this.$getDataNode("selectable",e.selected))return!1},!0),this.addEventListener("afterselect",function(e){var t=null;this.setProperty("caret",e.caret),this.sellength!=e.selection.length&&this.setProperty("sellength",e.selection.length),delete this.selection,this.setProperty("selection",e.selection);if(!e.selection.length)this.setProperty("selected",e.selected),this.value&&this.setProperty("value","");else{this.$chained=!0;if(!e.force&&(!this.dataParent||!this.dataParent.parent.$chained)){var n=this;$setTimeout(function(){n.selected==e.selected&&(delete n.selected,n.setProperty("selected",t||e.selected)),delete n.$chained},10)}else this.setProperty("selected",t||e.selected),delete this.$chained;var r=this.$attrBindings.eachvalue&&"eachvalue"||this.$bindings.value&&"value"||this.$hasBindRule("caption")&&"caption";r&&(this.$lastValue=this.$applyBindRule(r,e.selected),this.$lastValue!=(r!="value"&&this.xmlRoot&&this.$applyBindRule("value",this.xmlRoot,null,true)||this.value)&&(r=="eachvalue"||this.xmlRoot!=this?this.change(this.$lastValue):this.setProperty("value",this.$lastValue)),delete this.$lastValue)}},!0)}.call(apf.MultiSelect.prototype=new apf.MultiselectBinding),apf.__CHILDVALUE__=1<<27,apf.ChildValue=function(){this.$childProperty||(this.$childProperty="value"),this.$regbase=this.$regbase|apf.__CHILDVALUE__;var e,t=/^[\s\S]*?>(<\?lm)?([\s\S]*?)(?:\?>)?<[^>]*?>$/;this.addEventListener("DOMCharacterDataModified",e=function(e){if(e&&(e.currentTarget==this||e.currentTarget.nodeType==2&&e.relatedNode==this)||this.$amlDestroyed)return;if(this.getAttribute(this.$childProperty))return;var n=this.serialize().match(t),r=n&&n[2]||"";n&&n[1]&&(r="{"+r+"}"),this.$norecur=!0,r.indexOf("{")>-1||r.indexOf("[")>-1?this.$setDynamicProperty(this.$childProperty,r):this[this.$childProperty]!=r&&this.setProperty(this.$childProperty,r),this.$norecur=!1}),this.addEventListener("DOMAttrModified",e),this.addEventListener("DOMNodeInserted",e),this.addEventListener("DOMNodeRemoved",e),this.addEventListener("$skinchange",function(e){this.$propHandlers[this.$childProperty].call(this,this.caption||"")}),this.$init(function(){this.addEventListener("prop."+this.$childProperty,function(t){!this.$norecur&&!t.value&&!this.getAttributeNode(this.$childProperty)&&e.call(this)})}),this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var n=typeof this[this.$childProperty]=="undefined";if(n&&!this.getElementsByTagNameNS(this.namespaceURI,"*",!0).length&&(this.childNodes.length>1||this.firstChild&&(this.firstChild.nodeType==1||this.firstChild.nodeValue.trim().length))){var r=(this.$aml&&this.$aml.xml||this.serialize()).match(t),i=r&&r[2]||"";r&&r[1]&&(i="{"+i+"}"),i.indexOf("{")>-1||i.indexOf("[")>-1?this.$setDynamicProperty(this.$childProperty,i):this.setProperty(this.$childProperty,apf.html_entity_decode(i))}else n&&this.$propHandlers[this.$childProperty].call(this,"")})},apf.__DATAACTION__=1<<25,apf.DataAction=function(){this.$regbase=this.$regbase|apf.__DATAACTION__,this.getActionTracker=function(e){if(!apf.AmlNode)return apf.window.$at;var t=this,n=e?null:this.$at;!n&&this.dataParent&&(n=this.dataParent.parent.$at);while(!n){if(!t.parentNode&&!t.$parentNode){var r;return(r=this.getModel&&this.getModel(!0))&&r.$at||apf.window.$at}n=(t=t.parentNode||t.$parentNode).$at}return n},this.$actionsLog={},this.$actions=!1,this.$startAction=function(e,t,n){if(this.disabled||this.liveedit&&e!="edit")return!1;var r=this.$actions&&this.$actions.getRule(e,t);if(!r&&apf.config.autoDisableActions&&this.$actions)return!1;var i=typeof apf.offline!="undefined";return this.dispatchEvent(e+"start",{xmlContext:t})===!1?!1:(this.$actionsLog[e]=t,!0)},this.addEventListener("xmlupdate",function(e){if(apf.xmldb.disableRDB!=2)return;for(var t in this.$actionsLog)apf.isChildOf(this.$actionsLog[t],e.xmlNode,!0)&&this.$actionsLog[t].rollback.call(this,this.$actionsLog[t].xmlContext)}),this.$stopAction=function(e,t,n){delete this.$actionsLog[e]},this.$executeAction=function(e,t,n,r,i,s,o){var u=this.$actions&&this.$actions.getRule(n,r);if(!u&&this.$actions&&apf.config.autoDisableActions&&"action|change".indexOf(n)==-1)return apf.console.warn("Could not execute action '"+n+"'.               No valid action rule was found and auto-disable-actions is enabled"),!1;var a;if(o){a=[];for(var f=o.length-1;f>=0;f--)a.unshift({xmlActionNode:u,amlNode:this,selNode:o[f],xmlNode:o[f]})}var l=new apf.AmlEvent("before"+n.toLowerCase(),{action:e,args:t,xmlActionNode:u,amlNode:this,selNode:s,multiple:a||!1});if(!i){if(this.dispatchEvent(l.name,null,l)===!1)return!1;delete l.currentTarget}var c=this.getActionTracker();if(!c)return h;var h=c.execute(l);return l.xmlNode=h.xmlNode,l.undoObj=h,i||(l.name="after"+n.toLowerCase(),l.cancelBubble=!1,delete l.returnValue,delete l.currentTarget,this.dispatchEvent(l.name,null,l)),h},this.$executeSingleValue=function(e,t,n,r,i){var s,o,u=this.$getBindRule(t,n);if(!u)return!1;var a;["valuematch","match","value"].each(function(e){if(!u[e]||a)return;a=u["c"+e],a||(a=u.compile(e)),a.type!=3&&(a=null)});var f,l,c,h=a.xpaths,p=!1;if(h[0]=="#"||h[1]=="#"){var d=(u.cvalue3||(u.cvalue3=apf.lm.compile(u.value,{xpathmode:5})))(n);l=d.model&&d.model.$isModel&&d.model,l?(c=l.queryNode(d.xpath),n=l.data):d.model&&(l=apf.xmldb.findModel(d.model),c=d.model.selectSingleNode(d.xpath),n=d.model),h[1]=d.xpath}else l=h[0]&&apf.nameserver.get("model",h[0])||this.$model,c=l?l.queryNode(h[1]):(n||this.xmlRoot).selectSingleNode(h[1]),l&&!n&&(n=l.data);if(c){if(apf.queryValue(c)==r)return;f=c.nodeType==1||c.nodeType==3||c.nodeType==4?"setTextNode":"setAttribute",o=c.nodeType==1?[c,r]:c.nodeType==3||c.nodeType==4?[c.parentNode,r]:[c.ownerElement||c.selectSingleNode(".."),c.nodeName,r]}else{f="setValueByXpath",s=h[1];if(!this.$createModel||this.getModel()&&!this.getModel().$createModel)throw new Error("Model data does not exist, and I am not allowed to create the element for xpath '"+s+"' and element "+this.serialize(!0));if(!n){l||(l=this.getModel());if(l)l.data||l.load("<data />"),s=(l.getXpathByAmlNode(this)||".")+(s&&s!="."?"/"+s:""),n=l.data;else{if(!this.dataParent)return!1;n=this.dataParent.parent.selected||this.dataParent.parent.xmlRoot;if(!n)return!1;s=(this.dataParent.xpath||".")+(s&&s!="."?"/"+s:""),p=!0}}o=[n,r,s]}if(i)return{action:f,args:o};var v=this.$executeAction(f,o,e,n);return p&&this.load(n.selectSingleNode(s)),v},this.change=function(e,t){this.errBox&&this.errBox.visible&&this.isValid&&this.isValid()&&this.clearError();if(!this.xmlRoot&&!this.$createModel||(this.$mainBind=="value"&&this.hasFeature(apf.__MULTISELECT__)?!this.$attrBindings.value:!this.$hasBindRule(this.$mainBind)))return!t&&e===this.value||this.dispatchEvent("beforechange",{value:e})===!1?!1:(this.setProperty("value",e),this.dispatchEvent("afterchange",{value:e}));var n=this.$attrBindings.eachvalue&&"eachvalue"||this.$bindings.value&&"value"||this.$hasBindRule("caption")&&"caption";if(e===(n!="value"&&this.xmlRoot&&this.$applyBindRule("value",this.xmlRoot,null,!0)||this.value))return!1;this.$executeSingleValue("change",this.$mainBind,this.xmlRoot,e)},this.$booleanProperties["render-root"]=!0,this.$supportedProperties.push("create-model","actions"),this.$propHandlers["create-model"]=function(e){this.$createModel=e},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){typeof this["create-model"]=="undefined"&&!this.$setInheritedAttribute("create-model")&&(this.$createModel=!0)})},apf.config.$inheritProperties["create-model"]=1,apf.__CACHE__=4,apf.Cache=function(){function e(e,t){if(t&&this.hasFeature(apf.__MULTISELECT__)&&this.$isTreeArch){var n,r=t.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId,i=this.$pHtmlDoc.getElementById(r);if(i)n=e?!1:this.$container;else for(var s in this.cache)if(this.cache[s]&&this.cache[s].nodeType){i=this.cache[s].getElementById(r);if(i){n=e?s:this.cache[s];break}}if(n&&!this.cache[e]){var o=this.$findHtmlNode(t.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId);this.$subTreeCacheContext={oHtml:o,parentNode:o.parentNode,beforeNode:o.nextSibling,cacheItem:n},this.documentId=apf.xmldb.getXmlDocId(t),this.cacheId=e,this.xmlRoot=t;if(this.renderRoot)this.$container.appendChild(o);else while(o.childNodes.length)this.$container.appendChild(o.childNodes[0]);return!0}}if(!this.cache[e])return!1;var u=this.cache[e];return this.documentId=u.documentId,this.cacheId=e,this.xmlRoot=t,this.setProperty("root",this.xmlRoot),this.clearCacheItem(e),this.$setCurrentFragment(u),!0}function t(e,t){if(!this.caching)return;this.cache[e]=t}this.cache={},this.$subTreeCacheContext=null,this.caching=!0,this.$regbase=this.$regbase|apf.__CACHE__,this.addEventListener("$load",function(t){if(!this.caching||t.forceNoCache)return;this.cacheId||(this.cacheId=this.$generateCacheId&&this.$generateCacheId(t.xmlNode)||t.xmlNode.getAttribute(apf.xmldb.xmlIdTag)||apf.xmldb.nodeConnect(apf.xmldb.getXmlDocId(t.xmlNode),t.xmlNode));var n=e.call(this,this.cacheId,t.xmlNode);if(n){if(n==-1||!this.getTraverseNodes)return t.returnValue=!1;var r=this.getTraverseNodes();return r.length?this["default"]?this.select(this["default"]):this.autoselect&&this.select(r[0],null,null,null,!0):this.clearSelection&&this.clearSelection(),r.length||(this.$removeClearMessage(),this.$setClearMessage(this["empty-message"],"empty")),r.length!=this.length&&this.setProperty("length",r.length),!1}}),this.addEventListener("$clear",function(){if(!this.caching)return;if(this.hasFeature(apf.__MULTISELECT__)&&this.$subTreeCacheContext&&this.$subTreeCacheContext.oHtml){if(this.renderRoot)this.$subTreeCacheContext.parentNode.insertBefore(this.$subTreeCacheContext.oHtml,this.$subTreeCacheContext.beforeNode);else{var e=this.$subTreeCacheContext.container||this.$container;while(e.childNodes.length)this.$subTreeCacheContext.oHtml.appendChild(e.childNodes[0])}this.documentId=this.xmlRoot=this.cacheId=this.$subTreeCacheContext=null}else if(this.$loadedWhenOffline)this.$loadedWhenOffline=!1;else{var n=this.$getCurrentFragment();if(!n)return;n.documentId=this.documentId,n.xmlRoot=this.xmlRoot,(this.cacheId||this.xmlRoot)&&t.call(this,this.cacheId||this.xmlRoot.getAttribute(apf.xmldb.xmlIdTag)||"doc"+this.xmlRoot.getAttribute(apf.xmldb.xmlDocTag),n)}}),this.$findHtmlNode=function(e){var t=this.$pHtmlDoc.getElementById(e);if(t)return t;for(var n in this.cache)if(this.cache[n]&&this.cache[n].nodeType){t=this.cache[n].getElementById(e);if(t)return t}return null},this.clearCacheItem=function(e,t){this.cache[e].documentId=this.cache[e].cacheId=this.cache[e].xmlRoot=null,t&&apf.destroyHtmlNode(this.cache[e]),this.cache[e]=null},this.clearAllCache=function(){for(var e in this.cache)this.cache[e]&&this.clearCacheItem(e,!0)},this.getCacheItem=function(e){return this.cache[e]},this.$isCached=function(e){return this.cache[e]||this.cacheId==e?!0:!1},this.$getCurrentFragment||(this.$getCurrentFragment=function(){var e=this.$container.ownerDocument.createDocumentFragment();while(this.$container.childNodes.length)e.appendChild(this.$container.childNodes[0]);return e},this.$setCurrentFragment=function(e){this.$container.appendChild(e),!apf.window.hasFocus(this)&&this.blur&&this.blur()}),this.$booleanProperties.caching=!0,this.$supportedProperties.push("caching"),this.addEventListener("DOMNodeRemovedFromDocument",function(e){this.clearAllCache()})},apf.GuiElement.propHandlers.caching=function(e){if(!apf.isTrue(e))return;this.hasFeature(apf.__CACHE__)||this.implement(apf.Cache)},apf.__RENAME__=1024,apf.Rename=function(){this.$regbase=this.$regbase|apf.__RENAME__,this.canrename=!1,this.$renameSubject=this.renameTimer=this.lastCursor=null,this.$booleanProperties.canrename=!0,this.$booleanProperties.autorename=!0,this.$supportedProperties.push("canrename","autorename"),this.rename=function(e,t){e||(e=this.caret||this.selected);if(!e)return;return this.$executeSingleValue("rename","caption",e,t)},this.startDelayedRename=function(e,t,n){clearTimeout(this.renameTimer);if(e&&(e.button==2||e.ctrlKey||e.shiftKey)||n&&this.disabled)return;this.renameTimer=$setTimeout("apf.lookup("+this.$uniqueId+").startRename()",t||400)},this.startRename=function(e,t,n){if(!e&&(this.renaming||!this.canrename||!this.$startAction("rename",this.caret||this.selected,this.stopRename))||n&&this.disabled)return!1;this.hasFocus()||this.focus(null,null,!0),clearTimeout(this.renameTimer);var r=this.$getCaptionElement?this.$getCaptionElement():this.$caret||this.$selected;if(!r)return this.stopRename();this.renaming=!0,this.$renameSubject=this.caret||this.selected;var i=r.offsetWidth;this.lastCursor=r.style.cursor,r.style.cursor="text",r.parentNode.replaceChild(this.$txt,r),r.host=this;if(apf.isTrue(this.$getOption("main","scalerename"))){var s=apf.getWidthDiff(this.$txt);this.$txt.style.width=i-s-3+"px"}this.$replacedNode=r;var o=this.$getCaptionXml?this.$getCaptionXml(this.$renameSubject):this.$getDataNode("caption",this.$renameSubject),u=t||!o?"":(o.nodeType!=1?unescape(o.nodeValue):apf.isOnlyChild(o.firstChild,[3,4])?apf.queryValue(o):this.$applyBindRule("caption",this.$renameSubject))||"";apf.hasContentEditable?this.$multiLineRename?this.$txt.innerHTML=apf.htmlCleaner.prepare(u.trim().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />")):this.$txt.innerHTML=u.replace(/</g,"&lt;")||apf.hasContentEditableContainerBug&&"<br>"||"":this.$txt.value=u,this.$txt.unselectable="Off",this.$txt.host=this;var a=this.$txt,f=function(){try{a.focus(),a.select()}catch(e){}};apf.isIE?f():$setTimeout(f)},this.stopRename=function(e,t){clearTimeout(this.renameTimer);if(!this.renaming||e&&e!=this.$renameSubject||!this.$replacedNode)return!1;this.renaming=!1,this.$txt.parentNode&&this.$txt.parentNode.nodeType==1&&((apf.isIE8||apf.isIE7Emulate)&&this.$txt.blur(),this.$txt.parentNode.replaceChild(this.$replacedNode,this.$txt)),this.$replacedNode&&(this.$replacedNode.style.cursor=this.lastCursor||"",this.$replacedNode.host=null);if(this.$multiLineRename)var n=apf.html_entity_decode(apf.htmlCleaner.parse(this.$txt.innerHTML,!0).replace(/<br \/>/g,"").replace(/<\/?p>/g,""));else var n=this.$txt[apf.hasContentEditable?"innerText":"value"].replace(/<.*?nobr>/gi,"").replace(/\n$/,"");return!t||this.$validateRename&&!this.$validateRename(n)?(this.dispatchEvent("stoprename"),this.$stopAction("rename")):this.rename(this.$renameSubject,n)!==!1&&this.$replacedNode&&(this.$replacedNode.innerHTML=n.replace(/</g,"&lt;").replace(/\r?\n/g,"<br />")),this.renaming||(this.$renameSubject=null,this.$replacedNode=null,this.$txt.style.width=""),!0},this.addEventListener("keydown",function(e){var t=e.keyCode;if(this.renaming){if(t==27||this.$multiLineRename&&e.ctrlKey&&t==13||!this.$multiLineRename&&t==13)return this.stopRename(null,t==13&&!this.$autocomplete),e.cancelBubble=!0,!1;apf.hasContentEditableContainerBug&&t==8&&this.$txt.innerHTML=="<br>"&&e.preventDefault();return}if(t==113)return this.$tempsel&&this.$selectTemp(),this.caret!=this.selected&&(this.multiselect||this.isSelected(this.caret)?(this.selected=this.caret,this.$selected=this.$caret):this.select(this.caret,!0)),this.startRename(),!1},!0),this.addEventListener("DOMNodeRemovedFromDocument",function(e){this.$txt.refCount--,this.$txt.refCount||(this.$txt.host=this.$txt.onmouseover=this.$txt.onmousedown=this.$txt.select=this.$txt.onfocus=this.$txt.onblur=null),this.$txt=null}),this.$init(apf.Rename.initEditableArea)},apf.Rename.initEditableArea=function(){if(!(this.$txt=document.getElementById("txt_rename"))){apf.hasContentEditable?(this.$txt=document.createElement("DIV"),this.$txt.contentEditable=!0,apf.isIE6&&(this.$txt.style.width="1px")):(this.$txt=document.createElement("input"),this.$txt.id="txt_rename",this.$txt.autocomplete=!1),this.$txt.refCount=0,this.$txt.id="txt_rename",apf.importCssString("#txt_rename{white-space:nowrap}"),this.$txt.onselectstart=function(e){(e||event).cancelBubble=!0},this.$txt.onmouseover=this.$txt.onmouseout=this.$txt.oncontextmenu=this.$txt.onmouseup=this.$txt.ondblclick=this.$txt.onmousedown=function(e){apf.stopPropagation(e||event)},this.$txt.onkeyup=function(e){if(!this.host.$autocomplete)return;this.host.$lookup(this[apf.hasContentEditable?"innerHTML":"value"])};var e;this.$txt.select=function(){if(!apf.hasMsRangeObject){if(window.getSelection&&document.createRange){var e=window.getSelection();e.removeAllRanges();var t=document.createRange();t.setStart(this.firstChild,0);var n=this.firstChild.nodeValue.lastIndexOf(".");t.setEnd(this.firstChild,n>-1?n:this.firstChild.nodeValue.length),e.addRange(t)}else(e||(e=new apf.selection)).selectNode(this);return}var t=document.selection.createRange();try{t.moveToElementText(this),(apf.isFalse(this.host.$getOption("main","selectrename"))||typeof this.host.$renameStartCollapse!="undefined")&&t.collapse(this.host.$renameStartCollapse)}catch(r){}t.select()},this.$txt.onblur=function(){if(this.host.$autocomplete)return;this.host.stopRename(null,!0)}}this.$txt.refCount++},apf.__ALIGNMENT__=1<<29,apf.BaseButton=function(){this.$init(!0)},function(){this.implement(apf.ChildValue),this.$refKeyDown=this.$refMouseDown=0,this.$mouseOver=this.$mouseLeft=!1,this.$propHandlers.background=function(e){var t=this.$getLayoutNode("main","background",this.$ext);if(!t)return;if(e){var n=e.split("|");this.$background=n.concat(["vertical",2,16].slice(n.length-1)),t.style.backgroundImage="url("+this.mediaPath+n[0]+")",t.style.backgroundRepeat="no-repeat"}else t.style.backgroundImage="",t.style.backgroundRepeat="",this.$background=null},this.addEventListener("keydown",function(e){var t=e.keyCode;switch(t){case 13:this.localName!="checkbox"&&this.$ext.onmouseup(e.htmlEvent,!0);break;case 32:return e.htmlEvent.repeat||(this.$refKeyDown++,this.$updateState(e.htmlEvent)),!1}},!0),this.addEventListener("keyup",function(e){var t=e.keyCode;switch(t){case 32:this.$refKeyDown--;if(this.$refKeyDown<0)return this.$refKeyDown=0,!1;return this.$refKeyDown+this.$refMouseDown==0&&!this.disabled&&this.$ext.onmouseup(e,!0),this.$updateState(e),!1}},!0),this.states={Out:1,Over:2,Down:3},this.$updateState=function(e,t){if(e.reset)return this.$refKeyDown=0,this.$refMouseDown=0,this.$mouseOver=!1,!1;this.$refKeyDown>0||this.$refMouseDown>0&&(this.$mouseOver||!apf.isIE&&this.$ext===e.currentTarget)||this.isBoolean&&this.value?this.$setState("Down",e,t):this.$mouseOver?this.$setState("Over",e,t):this.$setState("Out",e,t)},this.$setupEvents=function(){if(this.editable)return;var e=this;this.$ext.onmousedown=function(t){t=t||window.event;if(e.$notfromext&&(t.srcElement||t.target)==this)return;e.$refMouseDown=1,e.$mouseLeft=!1;if(e.disabled)return;apf.isIE||(e.value?apf.stopEvent(t):apf.cancelBubble(t)),e.$updateState(t,"mousedown")},this.$ext.onmouseup=function(t,n){t=t||window.event;if(e.disabled||!n&&(!e.$mouseOver&&!apf.isIE&&this!==t.currentTarget||!e.$refMouseDown))return;return e.$refMouseDown=0,e.$updateState(t,"mouseup"),e.disabled||t&&t.type=="click"&&e.$mouseLeft==1?!1:e.$refMouseDown+e.$refKeyDown?!1:(e.$clickHandler&&e.$clickHandler()?e.$updateState(t||event,"click"):e.dispatchEvent("click",{htmlEvent:t}),!1)},this.$ext.onmousemove=function(t){if(!e.$mouseOver||e.$mouseOver==2){t=t||window.event;if(e.$notfromext&&(t.srcElement||t.target)==this)return;e.$mouseOver=!0,e.disabled||e.$updateState(t,"mouseover")}},this.$ext.onmouseout=function(t){t=t||window.event;var n=t.explicitOriginalTarget||t.toElement;if(apf.isChildOf(this,n))return;e.$mouseOver=!1,e.$refMouseDown=0,e.$mouseLeft=!0,e.disabled||e.$updateState(t,"mouseout")},apf.hasClickFastBug&&(this.$ext.ondblclick=this.$ext.onmouseup)},this.$doBgSwitch=function(e){if(this.background&&(this.$background[2]>=e||e==4)){e==4&&(e=this.$background[2]+1);var t=this.$background[1]=="vertical"?"0 -"+parseInt(this.$background[3])*(e-1)+"px":"-"+parseInt(this.$background[3])*(e-1)+"px 0";this.$getLayoutNode("main","background",this.$ext).style.backgroundPosition=t}},this.$focus=function(){if(!this.$ext)return;this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus")},this.$blur=function(e){if(!this.$ext)return;this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"]),e&&this.$updateState({})},this.addEventListener("prop.disabled",function(e){this.$refKeyDown=this.$refMouseDown=0}),this.$destroy=function(e){!e&&this.$ext&&(this.$ext.onmousedown=this.$ext.onmouseup=this.$ext.onmouseover=this.$ext.onmouseout=this.$ext.onclick=this.$ext.ondblclick=null)}}.call(apf.BaseButton.prototype=new apf.StandardBinding),apf.BaseList=function(){this.$init(!0),this.$dynCssClasses=[],this.listNodes=[]},function(){function e(){}this.implement(apf.Cache,apf.DataAction,apf.K),this.$focussable=!0,this.$isWindowContainer=-1,this.multiselect=!0,this.$propHandlers.fill=function(e){e?this.loadFillData(this.getAttribute("fill")):this.clear()},this.$mode=0,this.$propHandlers.mode=function(t){"check|radio".indexOf(t)>-1?(this.hasFeature(apf.__MULTICHECK__)||this.implement(apf.MultiCheck),this.addEventListener("afterrename",e),this.multicheck=t=="check",this.$mode=this.multicheck?1:2):(this.removeEventListener("afterrename",e),this.$mode=0)},this.$keyHandler=function(e){var t=e.keyCode,n=e.ctrlKey,r=e.shiftKey,i=this.$caret||this.$selected;if(e.returnValue==-1||!i||this.renaming)return;var s=this.caret||this.selected,o=this.$ext,u,a,f,l,c,h,p;switch(t){case 13:this.$tempsel&&this.$selectTemp(),this.ctrlselect=="enter"&&this.select(this.caret,!0),this.choose(this.selected);break;case 32:(n||!this.isSelected(this.caret))&&this.select(this.caret,n);break;case 109:case 46:if(this.disableremove)return;this.$tempsel&&this.$selectTemp(),this.remove();break;case 36:var u=this.getFirstTraverseNode();if(this.hasFeature(apf.__VIRTUALVIEWPORT__))return this.$viewport.scrollIntoView(u);this.select(u,!1,r),this.$container.scrollTop=0;break;case 35:var u=this.getLastTraverseNode();if(this.hasFeature(apf.__VIRTUALVIEWPORT__))return this.$viewport.scrollIntoView(u,!0);this.select(u,!1,r),this.$container.scrollTop=this.$container.scrollHeight;break;case 107:this.more&&this.startMore();break;case 37:if(!s&&!this.$tempsel)return;u=this.$tempsel?apf.xmldb.getNode(this.$tempsel):s,a=apf.getBox(apf.getStyle(i,"margin")),f=i.offsetWidth?Math.floor((o.offsetWidth-(c?15:0))/(i.offsetWidth+a[1]+a[3])):1,u=this.getNextTraverseSelected(u,!1);if(!u)return;this.$setTempSelected(u,n,r,!0),i=apf.xmldb.findHtmlNode(u,this),i.offsetTop<o.scrollTop&&(o.scrollTop=Array.prototype.indexOf.call(this.getTraverseNodes(),u)<f?0:i.offsetTop-a[0]);break;case 38:if(!s&&!this.$tempsel)return;u=this.$tempsel?apf.xmldb.getNode(this.$tempsel):s,a=apf.getBox(apf.getStyle(i,"margin")),c=o.scrollHeight>o.offsetHeight,f=i.offsetWidth?Math.floor((o.offsetWidth-(c?15:0))/(i.offsetWidth+a[1]+a[3])):1,u=this.getNextTraverseSelected(u,!1,f);if(!u)return;this.$setTempSelected(u,n,r,!0);if(this.hasFeature(apf.__VIRTUALVIEWPORT__))return this.$viewport.scrollIntoView(u);i=apf.xmldb.findHtmlNode(u,this),i.offsetTop<o.scrollTop&&(o.scrollTop=Array.prototype.indexOf.call(this.getTraverseNodes(),u)<f?0:i.offsetTop-a[0]);break;case 39:if(!s&&!this.$tempsel)return;u=this.$tempsel?apf.xmldb.getNode(this.$tempsel):s,a=apf.getBox(apf.getStyle(i,"margin")),u=this.getNextTraverseSelected(u,!0);if(!u)return;this.$setTempSelected(u,n,r),i=apf.xmldb.findHtmlNode(u,this),i.offsetTop+i.offsetHeight>o.scrollTop+o.offsetHeight&&(o.scrollTop=i.offsetTop-o.offsetHeight+i.offsetHeight+a[0]);break;case 40:if(!s&&!this.$tempsel)return;u=this.$tempsel?apf.xmldb.getNode(this.$tempsel):s,a=apf.getBox(apf.getStyle(i,"margin")),c=o.scrollHeight>o.offsetHeight,f=i.offsetWidth?Math.floor((o.offsetWidth-(c?15:0))/(i.offsetWidth+a[1]+a[3])):1,u=this.getNextTraverseSelected(u,!0,f);if(!u)return;this.$setTempSelected(u,n,r);if(this.hasFeature(apf.__VIRTUALVIEWPORT__))return this.$viewport.scrollIntoView(u,!0);i=apf.xmldb.findHtmlNode(u,this),i.offsetTop+i.offsetHeight>o.scrollTop+o.offsetHeight&&(o.scrollTop=i.offsetTop-o.offsetHeight+i.offsetHeight+a[0]);break;case 33:if(!s&&!this.$tempsel)return;u=this.$tempsel?apf.xmldb.getNode(this.$tempsel):s,a=apf.getBox(apf.getStyle(i,"margin")),p=o.scrollHeight>o.offsetHeight,h=o.scrollWidth>o.offsetWidth,f=Math.floor((o.offsetWidth-(p?15:0))/(i.offsetWidth+a[1]+a[3])),l=Math.floor((o.offsetHeight-(h?15:0))/(i.offsetHeight+a[0]+a[2])),u=this.getNextTraverseSelected(u,!1,f*l),u||(u=this.getFirstTraverseNode());if(!u)return;this.$setTempSelected(u,n,r,!0);if(this.hasFeature(apf.__VIRTUALVIEWPORT__))return this.$viewport.scrollIntoView(u);i=apf.xmldb.findHtmlNode(u,this),i.offsetTop<o.scrollTop&&(o.scrollTop=Array.prototype.indexOf.call(this.getTraverseNodes(),u)<f?0:i.offsetTop-a[0]);break;case 34:if(!s&&!this.$tempsel)return;u=this.$tempsel?apf.xmldb.getNode(this.$tempsel):s,a=apf.getBox(apf.getStyle(i,"margin")),p=o.scrollHeight>o.offsetHeight,h=o.scrollWidth>o.offsetWidth,f=Math.floor((o.offsetWidth-(p?15:0))/(i.offsetWidth+a[1]+a[3])),l=Math.floor((o.offsetHeight-(h?15:0))/(i.offsetHeight+a[0]+a[2])),u=this.getNextTraverseSelected(s,!0,f*l),u||(u=this.getLastTraverseNode());if(!u)return;this.$setTempSelected(u,n,r);if(this.hasFeature(apf.__VIRTUALVIEWPORT__))return this.$viewport.scrollIntoView(u,!0);i=apf.xmldb.findHtmlNode(u,this),i.offsetTop+i.offsetHeight>o.scrollTop+o.offsetHeight&&(o.scrollTop=i.offsetTop-o.offsetHeight+i.offsetHeight+a[0]);break;default:if(t==65&&n)this.selectAll();else if(this.$hasBindRule("caption")){if(!this.xmlRoot||this.autorename)return;if(!this.lookup||(new Date).getTime()-this.lookup.date.getTime()>300)this.lookup={str:"",date:new Date};this.lookup.str+=String.fromCharCode(t);var d=this.getTraverseNodes();for(var v,m=0;m<d.length;m++){v=this.$applyBindRule("caption",d[m]);if(v&&v.substr(0,this.lookup.str.length).toUpperCase()==this.lookup.str){this.isSelected(d[m])||this.select(d[m]),i&&(this.$container.scrollTop=i.offsetTop-(this.$container.offsetHeight-i.offsetHeight)/2);return}}return}}return this.lookup=null,!1},this.$deInitNode=function(e,t){if(!t)return;t.parentNode.removeChild(t)},this.$updateNode=function(e,t,n){var r=this.$getLayoutNode("item","icon",t);if(r)r.nodeType==1?r.style.backgroundImage="url("+apf.getAbsolutePath(this.iconPath,this.$applyBindRule("icon",e))+")":r.nodeValue=apf.getAbsolutePath(this.iconPath,this.$applyBindRule("icon",e));else{var i=this.$getLayoutNode("item","image",t);i&&(i.nodeType==1?i.style.backgroundImage="url("+apf.getAbsolutePath(apf.hostPath,this.$applyBindRule("image",e))+")":i.nodeValue=apf.getAbsolutePath(apf.hostPath,this.$applyBindRule("image",e)))}var s=this.$getLayoutNode("item","caption",t);s&&(s.nodeType==1?s.innerHTML=this.$applyBindRule("caption",e):s.nodeValue=this.$applyBindRule("caption",e)),t.title=this.$applyBindRule("title",e)||"";var o=this.$applyBindRule("css",e);if(o||this.$dynCssClasses.length)this.$setStyleClass(t,o,this.$dynCssClasses),o&&!this.$dynCssClasses.contains(o)&&this.$dynCssClasses.push(o);!n&&this.$updateModifier&&this.$updateModifier(e,t)},this.$moveNode=function(e,t){if(!t)return;var n=t.parentNode,r=this.getNextTraverse(e),i=r?apf.xmldb.findHtmlNode(r,this):null;n.insertBefore(t,i)},this.$add=function(e,t,n,r,i){this.$getNewContext("item");var s=this.$getLayoutNode("item"),o=this.$getLayoutNode("item","select"),u=this.$getLayoutNode("item","icon"),a=this.$getLayoutNode("item","image"),f=this.$getLayoutNode("item","caption");s.setAttribute("id",t),o.setAttribute("onmouseover","var o = apf.lookup("+this.$uniqueId+"); o.$setStyleClass(this, 'hover', null, true);"),o.setAttribute("onselectstart","return false;"),o.setAttribute("style",(o.getAttribute("style")||"")+";user-select:none;-moz-user-select:none;-webkit-user-select:none;"),this.hasFeature(apf.__RENAME__)||this.hasFeature(apf.__DRAGDROP__)?(o.setAttribute("ondblclick","var o = apf.lookup("+this.$uniqueId+"); "+"o.stopRename();"+" o.choose()"),o.setAttribute("onmouseout","var o = apf.lookup("+this.$uniqueId+");            	  o.$setStyleClass(this, '', ['hover'], true);                this.hasPassedDown = false;"),o.setAttribute(this.itemSelectEvent||"onmousedown","var o = apf.lookup("+this.$uniqueId+");                 var xmlNode = apf.xmldb.findXmlNode(this);                 var isSelected = o.isSelected(xmlNode);                 this.hasPassedDown = true;                 if (event.button == 2)                     o.stopRename();                 else if (!o.renaming && o.hasFocus() && isSelected == 1)                     this.dorename = true;                 if (event.button == 2 && isSelected)                    return;                 if (!o.hasFeature(apf.__DRAGDROP__) || !isSelected && !event.ctrlKey)                     o.select(this, event.ctrlKey, event.shiftKey, -1)"),o.setAttribute("onmouseup","if (!this.hasPassedDown) return;                var o = apf.lookup("+this.$uniqueId+");"+"if (o.hasFeature(apf.__RENAME__) && this.dorename)                    o.startDelayedRename(event, null, true);"+"this.dorename = false;                 var xmlNode = apf.xmldb.findXmlNode(this);                 var isSelected = o.isSelected(xmlNode);                 if (o.hasFeature(apf.__DRAGDROP__))                     o.select(this, event.ctrlKey, event.shiftKey, -1)")):(o.setAttribute("onmouseout","apf.setStyleClass(this, '', ['hover']);"),o.setAttribute("ondblclick","var o = apf.lookup("+this.$uniqueId+"); o.choose(null, true)"),o.setAttribute(this.itemSelectEvent||"onmousedown","var o = apf.lookup("+this.$uniqueId+"); o.select(this, event.ctrlKey, event.shiftKey, -1)"));if(this.$mode){var l=this.$getLayoutNode("item","check");if(!l)return!1;l.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+");                    o.checkToggle(this, true);o.$skipSelect = true;"),apf.isTrue(this.$applyBindRule("checked",e))?(this.$checkedList.push(e),this.$setStyleClass(s,"checked")):this.isChecked(e)&&this.$setStyleClass(s,"checked")}if(u)u.nodeType==1?u.setAttribute("style","background-image:url("+apf.getAbsolutePath(this.iconPath,this.$applyBindRule("icon",e))+")"):u.nodeValue=apf.getAbsolutePath(this.iconPath,this.$applyBindRule("icon",e));else if(a)if(a.nodeType==1)(a.tagName||"").toLowerCase()=="img"?a.setAttribute("src",apf.getAbsolutePath(apf.hostPath,this.$applyBindRule("image",e))):a.setAttribute("style","background-image:url("+apf.getAbsolutePath(apf.hostPath,this.$applyBindRule("image",e))+")");else if(apf.isSafariOld){var c=a.ownerElement.parentNode,h=c.appendChild(c.ownerDocument.createElement("img"));h.setAttribute("src",apf.getAbsolutePath(apf.hostPath,this.$applyBindRule("image",e)))}else a.nodeValue=apf.getAbsolutePath(apf.hostPath,this.$applyBindRule("image",e));f&&apf.setNodeValue(f,this.$applyBindRule("caption",e)),s.setAttribute("title",this.$applyBindRule("tooltip",e)||"");var p=this.$applyBindRule("css",e);p&&(this.$setStyleClass(s,p),p&&this.$dynCssClasses.push(p));if(this.$addModifier&&this.$addModifier(e,s,r,i)===!1)return;r?apf.insertHtmlNode(s,r,i):this.listNodes.push(s)},this.addEventListener("$skinchange",function(e){this.more&&delete this.moreItem}),this.$fill=function(){if(this.more&&!this.moreItem){this.$getNewContext("item");var e=this.$getLayoutNode("item"),t=this.$getLayoutNode("item","caption"),n=this.$getLayoutNode("item","select");e.setAttribute("class",this.$baseCSSname+"More"),n.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+');o.clearSelection();o.$setStyleClass(this, "more_down", null, true);'),n.setAttribute("onmouseout","apf.lookup("+this.$uniqueId+').$setStyleClass(this, "", ["more_down"], true);'),n.setAttribute("onmouseup","apf.lookup("+this.$uniqueId+").startMore(this, true)"),t&&apf.setNodeValue(t,this.more.match(/caption:(.*)(;|$)/i)[1]),this.listNodes.push(e)}apf.insertHtmlNodes(this.listNodes,this.$container),this.listNodes.length=0,this.more&&!this.moreItem&&(this.moreItem=this.$container.lastChild)},this.startMore=function(e,t){if(t&&this.disabled)return;this.$setStyleClass(e,"",["more_down"]);var n;this.$actions.add||(this.each&&!this.each.match(/[\/\[]/)?n="<"+this.each+(this.each.match(/^a:/)?" xmlns:a='"+apf.ns.aml+"'":"")+" custom='1' />":n="<item />"),this.add(n,null,null,function(e){this.select(e,null,null,null,null,!0),this.morePos=="begin"?this.$container.insertBefore(this.moreItem,this.$container.firstChild):this.$container.appendChild(this.moreItem);var t=function(){this.getActionTracker().undo(this.autoselect?2:1),this.removeEventListener("stoprename",t),this.removeEventListener("beforerename",r),this.removeEventListener("afterrename",n)},n=function(){this.removeEventListener("afterrename",n)},r=function(e){this.removeEventListener("stoprename",t),this.removeEventListener("beforerename",r);var i=this.findXmlNodeByValue(e.args[1]);if(i||!e.args[1])return e.args[1]&&this.dispatchEvent("notunique",{value:e.args[1]})===!1?(this.startRename(),this.addEventListener("stoprename",t),this.addEventListener("beforerename",r)):(this.removeEventListener("afterrename",n),this.getActionTracker().undo(),this.isSelected(i)||this.select(i)),!1};this.addEventListener("stoprename",t),this.addEventListener("beforerename",r),this.addEventListener("afterrename",n),this.startDelayedRename({},1)})},this.$calcSelectRange=function(e,t){var n=[],r=this.hasFeature(apf.__VIRTUALVIEWPORT__)?this.xmlRoot.selectNodes(this.each):this.getTraverseNodes(),i,s;for(i=!1,s=0;s<r.length;s++)r[s]==e&&(i=!0),i&&n.push(r[s]),r[s]==t&&(i=!1);if(!n.length||i){n=[];for(i=!1,s=r.length-1;s>=0;s--)r[s]==e&&(i=!0),i&&n.push(r[s]),r[s]==t&&(i=!1)}return n},this.$selectDefault=function(e){this.select(this.getTraverseNodes()[0],null,null,null,!0)},this.loadFillData=function(e){var t,n,r,i=e.splitSafe(","),s=[];for(var o,u,a=0;a<i.length;a++)if((u=i[a]).match(/^\d+-\d+$/)){o=u.split("-"),n=parseInt(o[0]),r=parseInt(o[1]);if(o[0].length==o[1].length){t=Math.max(o[0].length,o[1].length);for(var f=n;f<r+1;f++)s.push("<item>"+(f+"").pad(t,"0")+"</item>")}else for(var f=n;f<r+1;f++)s.push("<item>"+f+"</item>")}else s.push("<item>"+u+"</item>");this.$initingModel=!0,this.each="item",this.$setDynamicProperty("caption","[label/text()|@caption|text()]"),this.$setDynamicProperty("eachvalue","[value/text()|@value|text()]"),this.$canLoadDataAttr=!1,this.load("<data>"+s.join("")+"</data>")}}.call(apf.BaseList.prototype=new apf.MultiSelect),apf.BaseSimple=function(){this.$init(!0)},function(){this.implement(apf.DataAction),this.getValue=function(){return this.value}}.call(apf.BaseSimple.prototype=new apf.StandardBinding),apf.BaseStateButtons=function(){function s(e){e.setAttribute("onmousedown","var o = apf.all["+this.$uniqueId+"];             o.$setStyleClass(this, 'down', null, true);             apf.cancelBubble(event, o);              var o = apf.findHost(this).$ext;             if (o.onmousedown) o.onmousedown(event);             apf.cancelBubble(event, o);             apf.window.$mousedown(event);"),e.setAttribute("onmouseup","var o = apf.all["+this.$uniqueId+"];             o.$setStyleClass(this, '', ['down'], true);"),e.setAttribute("onmouseover","var o = apf.all["+this.$uniqueId+"];             o.$setStyleClass(this, 'hover', null, true);"),e.setAttribute("onmouseout","var o = apf.all["+this.$uniqueId+"];             o.$setStyleClass(this, '', ['hover', 'down'], true);"),e.setAttribute("ondblclick","apf.stopPropagation(event);")}this.state="normal",this.edit=!1;var e={min:["minimized","minimize","restore"],max:["maximized","maximize","restore"],edit:["edit","edit","closeedit"],close:["closed","close","show"]};this.$lastheight=null,this.$lastpos=null,this.$lastState={normal:!0},this.$booleanProperties.animate=!0,this.$supportedProperties.push("buttons","animate","state"),this.close=function(){return this.setProperty("state",this.state.split("|").pushUnique("closed").join("|"),!1,!0),this},this.minimize=function(){return this.setProperty("state",this.state.split("|").remove("maximized").remove("normal").pushUnique("minimized").join("|"),!1,!0),this},this.maximize=function(){return this.setProperty("state",this.state.split("|").remove("minimized").remove("normal").pushUnique("maximized").join("|"),!1,!0),this},this.restore=function(){return this.setProperty("state",this.state.split("|").remove("minimized").remove("maximized").pushUnique("normal").join("|"),!1,!0),this},this.edit=function(e){return this.setProperty("state",this.state.split("|").pushUnique("edit").join("|"),!1,!0),this},this.closeedit=function(e){return this.setProperty("state",this.state.split("|").remove("edit").join("|"),!1,!0),this},this.$toggle=function(t){var n=e[t][0];this[e[t][this.state.indexOf(n)>-1?2:1]]()},this.$propHandlers.refparent=function(e){typeof e=="string"?this.$refParent=self[e]&&self[e].$ext||document.getElementById(e):this.$refParent=e},this.$propHandlers.maxconf=function(e){this.$maxconf=e.splitSafe(",")},this.$propHandlers.state=function(e,n,r,s,o){var u=this;if(!this.$amlLoaded){apf.queue.add("state"+this.$uniqueId,function(){u.$propHandlers.state.call(u,e,n,r,s,o)});return}e==0&&(e="normal");var a,f,l,c,h,p={},d=e.split("|"),v=this.$lastState,m=[];for(a=0;a<d.length;a++)p[d[a]]=!0;p.value=e,!p.maximized&&!p.minimized&&(p.normal=!0);if(!s&&this.dispatchEvent("beforestatechange",{from:v,to:p})===!1)return this.state=v.value,!1;p.closed==this.visible&&this.setProperty("visible",!p.closed,!1,!0);if(p.normal!=v.normal||!p.normal&&(p.minimized!=v.minimized||p.maximized!=v.maximized)){this.$lastheight&&(this.$ext.style.height=this.$lastheight);if(this.$lastpos){apf.plane.hide(this.$uniqueId);if(this.animate&&!o){var g=this.$ext;l=apf.getStyle(g,"position"),l!="absolute"?(c=parseInt(apf.getStyle(g,"left"))||0,h=parseInt(apf.getStyle(g,"top"))||0):(c=g.offsetLeft,h=g.offsetTop),this.animstate=1,apf.tween.multi(g,{steps:15,anim:apf.tween.easeInOutCubic,interval:10,tweens:[{type:"left",from:c,to:this.$lastpos.px[0]},{type:"top",from:h,to:this.$lastpos.px[1]},{type:"width",from:this.$ext.offsetWidth,to:this.$lastpos.px[2]},{type:"height",from:this.$ext.offsetHeight,to:this.$lastpos.px[3]}],oneach:function(){apf.hasSingleRszEvent&&apf.layout.forceResize(u.$int)},onfinish:function(){u.$lastpos.parentNode.insertBefore(u.$ext,u.$lastpos.beforeNode),u.$placeHolder&&u.$placeHolder.parentNode.removeChild(u.$placeHolder),u.$propHandlers.state.call(u,e,null,null,!0,!0)}});return}this.animate||(apf.plane.hide(this.$uniqueId,!0),u.$lastpos.parentNode.insertBefore(u.$ext,u.$lastpos.beforeNode),u.$placeHolder&&u.$placeHolder.parentNode.removeChild(u.$placeHolder)),this.$ext.style.position=this.$lastpos.pos,this.$ext.style.left=this.$lastpos.css[0],this.$ext.style.top=this.$lastpos.css[1],this.$ext.style.width=this.$lastpos.css[2],this.$ext.style.height=this.$lastpos.css[3],f=this.$lastpos.parentNode,f.style.width=this.$lastpos.parent[0],f.style.height=this.$lastpos.parent[1],f.style.overflow=this.$lastpos.parent[2]}this.aData&&this.aData.restore&&this.aData.restore(),apf.layout&&apf.layout.play(this.$pHtmlNode),this.$lastheight=this.$lastpos=null,p.normal&&m.push("",this.$baseCSSname+"Max",this.$baseCSSname+"Min")}if(p.minimized!=v.minimized)if(p.minimized){m.unshift(this.$baseCSSname+"Min",this.$baseCSSname+"Max",this.$baseCSSname+"Edit"),this.aData&&this.aData.minimize&&this.aData.minimize(this.collapsedHeight);if(!this.aData||!this.aData.minimize)this.$lastheight=apf.getStyle(this.$ext,"height"),this.$ext.style.height=Math.max(0,this.collapsedHeight-apf.getHeightDiff(this.$ext))+"px";this.hasFocus()&&apf.window.moveNext(null,this,!0)}else m.push(this.$baseCSSname+"Min"),$setTimeout(function(){apf.window.$focusLast(u)});if(p.maximized!=v.maximized)if(p.maximized){m.unshift(this.$baseCSSname+"Max",this.$baseCSSname+"Min",this.$baseCSSname+"Edit"),f=this.$refParent,f||(f=this.$ext.offsetParent==document.body?document.documentElement:this.$ext.parentNode),this.animstate=0;var y=!1,g=this.$ext,l=apf.getStyle(g,"position");if(l=="absolute")f.style.overflow="hidden",c=g.offsetLeft,h=g.offsetTop;else{var b=apf.getAbsolutePosition(g);c=b[0],h=b[1]}this.$lastpos={css:[this.$ext.style.left,this.$ext.style.top,this.$ext.style.width,this.$ext.style.height,this.$ext.style.margin,this.$ext.style.zIndex],px:[c,h,this.$ext.offsetWidth,this.$ext.offsetHeight],parent:[f.style.width,f.style.height,f.style.overflow],pos:g.style.position,parentNode:f,beforeNode:this.$ext.nextSibling},this.parentNode.$layout&&(this.$placeHolder||(this.$placeHolder=document.createElement("div")),this.$placeHolder.style.position=this.$lastpos.pos,this.$placeHolder.style.left=this.$lastpos.css[0],this.$placeHolder.style.top=this.$lastpos.css[1],this.$placeHolder.style.width=this.$lastpos.px[2]+"px",this.$placeHolder.style.height=this.$lastpos.px[3]+"px",this.$placeHolder.style.margin=this.$lastpos.css[4],this.$placeHolder.style.zIndex=this.$lastpos.css[5],this.$pHtmlNode.insertBefore(this.$placeHolder,this.$ext),g.style.position="absolute"),document.body.appendChild(g),g.style.left=c+"px",g.style.top=h+"px";function w(){if(u.animstate)return;var e,n,r,i,s;u.maxconf?(e=u.$maxconf[0],n=u.$maxconf[1],r=[u.$maxconf[2]=="center"?(apf.getWindowWidth()-e)/2:u.$maxconf[2],u.$maxconf[3]=="center"?(apf.getWindowHeight()-n)/3:u.$maxconf[3]]):(e=!apf.isIE&&f==document.documentElement?window.innerWidth:f.offsetWidth,n=!apf.isIE&&f==document.documentElement?window.innerHeight:f.offsetHeight),r||(r=f!=g.offsetParent?apf.getAbsolutePosition(f,g.offsetParent):[0,0]);if(l!="absolute"){var o=apf.getDiff(f);e-=o[0]+(!u.$refParent&&apf.isIE8?4:0),n-=o[0]+(!u.$refParent&&apf.isIE8?4:0)}else!u.$refParent&&apf.isIE8&&(e-=4,n-=4);i=u.$refParent?[0,0,0,0]:t,s=apf.getDiff(f),f.style.width=f.offsetWidth-s[0]+"px",f.style.height=f.offsetHeight-s[1]+"px",!y&&u.$maxconf&&u.$maxconf[4]&&apf.plane.show(g,!1,null,null,{color:u.$maxconf[4],opacity:u.$maxconf[5],animate:u.animate,protect:u.$uniqueId});if(u.animate&&!y)u.animstate=1,y=!0,apf.tween.multi(g,{steps:15,anim:apf.tween.easeInOutCubic,interval:10,tweens:[{type:"left",from:c,to:r[0]-i[3]},{type:"top",from:h,to:r[1]-i[0]},{type:"width",from:u.$lastpos.px[2],to:e+i[1]+i[3]-apf.getWidthDiff(u.$ext)},{type:"height",from:u.$lastpos.px[3],to:n+i[0]+i[2]-apf.getHeightDiff(u.$ext)}],oneach:function(){apf.hasSingleRszEvent&&apf.layout.forceResize(u.$int)},onfinish:function(){u.animstate=0,u.dispatchEvent("afterstatechange",{from:v,to:p}),apf.hasSingleRszEvent&&apf.layout.forceResize(u.$int)}});else if(!u.animstate){g.style.left=r[0]-i[3]+"px",g.style.top=r[1]-i[0]+"px";var o=apf.getDiff(u.$ext);g.style.width=e-o[0]+i[1]+i[3]+"px",g.style.height=n-o[1]+i[0]+i[2]+"px"}}apf.layout&&apf.layout.pause(this.$pHtmlNode,w)}else m.push(this.$baseCSSname+"Max");if(p.edit!=v.edit)if(p.edit)m.unshift(this.$baseCSSname+"Edit",this.$baseCSSname+"Max",this.$baseCSSname+"Min"),this.btnedit&&(i.edit.innerHTML="close"),this.dispatchEvent("editstart");else{if(this.dispatchEvent("editstop")===!1)return!1;m.push(this.$baseCSSname+"Edit"),m.length==1&&m.unshift(""),this.btnedit&&(i.edit.innerHTML="edit")}if(m.length||p.closed!=v.closed)m.length&&this.$setStyleClass(this.$ext,m.shift(),m),p.edit&&(this.dispatchEvent("prop.visible",{value:!0}),u.oSettings&&apf.layout.forceResize(u.oSettings)),(!p.maximized||!this.animate||v.maximized&&u.animate)&&u.dispatchEvent("afterstatechange",{from:v,to:p}),this.$lastState=p,this.aData&&!p.maximized&&this.$purgeAlignment(),!this.animate&&apf.hasSingleRszEvent&&apf.layout&&apf.layout.forceResize(u.$int)};var t,n,r,i={};this.$propHandlers.buttons=function(e){if(!this.$hasLayoutNode("button"))return;var n=e&&(e=e.replace(/(\|)\||\|$/,"$1")).split("|")||[],r=this.$buttons.childNodes,o=e&&new RegExp("("+e+")"),u={},a=[];for(var f=0;f<r.length;f++){if(r[f].nodeType!=1||r[f].tagName!="DIV")continue;r[f].getAttribute("button")&&(!e||!r[f].className||!r[f].className.match(o))?(r[f].style.display="none",this.$setStyleClass(r[f],"",["min","max","close","edit"]),a.push(r[f])):u[RegExp.$1]=r[f]}for(f=0;f<n.length;f++){if(!n[f])continue;if(u[n[f]]){this.$buttons.insertBefore(u[n[f]],this.$buttons.firstChild);continue}var l=a.pop();l||(this.$getNewContext("button"),l=this.$getLayoutNode("button"),l.setAttribute("button","button"),s.call(this,l),l=apf.insertHtmlNode(l,this.$buttons)),this.$setStyleClass(l,n[f],["min","max","close","edit"]),l.onclick=new Function("apf.lookup("+this.$uniqueId+").$toggle('"+n[f]+"')"),l.style.display="block",i[n[f]]=l,this.$buttons.insertBefore(l,this.$buttons.firstChild)}t=apf.getBox(apf.getStyle(this.$ext,"borderWidth"))},this.$initButtons=function(e){this.animate=apf.enableAnim,this.collapsedHeight=this.$getOption("Main","collapsed-height");var t=this.$getLayoutNode("main","buttons",e);if(!t||apf.isIphone||!this.getAttribute("buttons")||!this.$hasLayoutNode("button"))return;var n=(this.getAttribute("buttons")||"").split("|").length;for(var r,i=0;i<n;i++)this.$getNewContext("button"),r=t.appendChild(this.$getLayoutNode("button")),r.setAttribute("button","button"),s.call(this,r)},this.addEventListener("DOMNodeRemovedFromDocument",function(e){for(var t in i)i[t].onclick=null})},apf.BaseTab=function(){this.$init(!0)},function(){function e(){r.call(this)}function t(e,t){function o(){n.style.marginTop="0px",setTimeout(function(){n.style[apf.CSSPREFIX+"TransitionProperty"]="",n.style[apf.CSSPREFIX+"TransitionDuration"]="",n.style[apf.CSSPREFIX+"TimingFunction"]="",n.style.marginTop="",r&&(n.style.maxWidth=""),t(e)},150)}var n=e.$button,r=n.offsetWidth-apf.getWidthDiff(n)<parseInt(apf.getStyle(n,"maxWidth"));if(r){var i=e.parentNode.getPages()[0]==e?null:n.previousElementSibling,s=i?i.offsetWidth-apf.getWidthDiff(i):parseInt(apf.getStyle(n,"maxWidth"));n.style.maxWidth="0px"}n.style.marginTop=n.offsetHeight+2+"px",setTimeout(function(){n.style[apf.CSSPREFIX+"TransitionProperty"]="margin-top, max-width",n.style[apf.CSSPREFIX+"TransitionDuration"]="100ms, 50ms",n.style[apf.CSSPREFIX+"TimingFunction"]="cubic-bezier(.10, .10, .25, .90), cubic-bezier(.10, .10, .25, .90)",r?(n.style.maxWidth=s+"px",setTimeout(o,50)):o()})}function n(e,t,n,r,i){function l(){setTimeout(function(){a.style[apf.CSSPREFIX+"TransitionProperty"]="",a.style[apf.CSSPREFIX+"TransitionDuration"]="",a.style[apf.CSSPREFIX+"TimingFunction"]="",s.style[apf.CSSPREFIX+"TransitionProperty"]="",s.style[apf.CSSPREFIX+"TransitionDuration"]="",s.style[apf.CSSPREFIX+"TimingFunction"]="",s.style.display="none",r(e)},150)}var s=e.$button,o=s.offsetHeight,u=s.offsetWidth;s.style[apf.CSSPREFIX+"TransitionProperty"]="margin-top, max-width, padding",s.style[apf.CSSPREFIX+"TransitionDuration"]=(i?".2":".15")+"s, .1s, .1s",s.style[apf.CSSPREFIX+"TimingFunction"]="linear, ease-out, ease-out",s.style.marginTop=o+2+"px";var a=s.parentNode;apf.isGecko&&(a=a.parentNode),a.style[apf.CSSPREFIX+"TransitionProperty"]="padding-right",a.style[apf.CSSPREFIX+"TransitionDuration"]=".2s",a.style[apf.CSSPREFIX+"TimingFunction"]="ease-out";if(t)a.style.paddingRight="";else{var f=parseInt(apf.getStyle(a,"paddingRight"));a.style.paddingRight=f+u-21+"px"}!t&&n?(s.style.minWidth="20px",s.style.maxWidth="0px",s.style.padding=0,l()):setTimeout(function(){s.style.minWidth="20px",s.style.maxWidth="0px",s.style.padding=0,l()},i?150:100)}function r(e,t){if(!this.length&&!this.getPages().length||this.$waitForMouseOut)return;var n=apf.isGecko?this.$buttons.parentNode:this.$buttons;n.style[apf.CSSPREFIX+"TransitionProperty"]="padding-right",n.style[apf.CSSPREFIX+"TransitionDuration"]=".2s",n.style[apf.CSSPREFIX+"TimingFunction"]="ease-out",apf.isGecko?n.style.paddingRight=apf.getWidthDiff(this.$buttons)+"px":n.style.paddingRight="",setTimeout(function(){n.style[apf.CSSPREFIX+"TransitionProperty"]="",n.style[apf.CSSPREFIX+"TransitionDuration"]="",n.style[apf.CSSPREFIX+"TimingFunction"]=""},250)}function i(){var e="cache_"+this.$buttons.childNodes.length;if(SCROLLANIM[e])return SCROLLANIM[e];var t=0;for(var n=0,r=this.$buttons.childNodes.length;n<r;n++)typeof this.$buttons.childNodes[n].offsetWidth!="undefined"&&(t+=this.$buttons.childNodes[n].offsetWidth);return SCROLLANIM[e]=t}function s(e,t){var n=e&SCROLL_BOTH;n&&(e=SCROLL_LEFT);var r=this[e&SCROLL_LEFT?"oLeftScroll":"oRightScroll"];t&SCROLL_DIS||(e&SCROLL_LEFT?SCROLL_L_STATE=t:SCROLL_R_STATE=t),t&SCROLL_OFF?apf.setStyleClass(r,"",["disabled","hover","down"]):t&SCROLL_HOVER?apf.setStyleClass(r,"hover",["disabled","down"]):t&SCROLL_DOWN?apf.setStyleClass(r,"down",["disabled","hover"]):t&SCROLL_DIS&&apf.setStyleClass(r,"disabled",["hover","down"]),n&&s(SCROLL_RIGHT,t)}function o(e,t){SCROLLANIM.size<=0&&(SCROLLANIM.left=this.$buttons.offsetLeft,SCROLLANIM.size=Math.round(this.firstChild.$button.offsetWidth));if(e&SCROLL_LEFT)return SCROLLANIM.left;if(e&SCROLL_RIGHT){var n=this.$buttons.childNodes[this.$buttons.childNodes.length-1];return this.$ext.offsetWidth-(n.offsetLeft+n.offsetWidth+(this.oScroller.offsetWidth+4))}}this.isPaged=!0,this.$focussable=apf.KEYBOARD,this.length=0,this.isLoading={},this.inited=this.ready=!1,this.$scroll=!0,this.set=function(e,t,n){if(n||this.src&&!this.$findPage(e,{}))return this.$propHandlers.activepage.call(this,e,null,null,t,n);if(this.activepage==(e.name||e))return t&&t(this.getPage(e));this.$lastCallback=t,this.setProperty("activepage",e)},this.$supportedProperties.push("activepage","activepagenr","length","src","loading","trans-in","trans-out"),this.$propHandlers.activepagenr=this.$propHandlers.activepage=function(e,t,n,r,i){if(!this.inited||apf.isNot(e)||e==-1)return;r||(r=this.$lastCallback,delete this.$lastCallback);var s,o={};s=this.$findPage(e,o);if(!s){if(this.src){if(this.isLoading[e])return;this.$findPage("loading",{})&&this.$propHandlers.activepage.call(this,"loading"),this.setProperty("loading",!0),this.isLoading[e]=!0,s=this.ownerDocument.createElementNS(apf.ns.apf,"page"),s.setAttribute("id",e),this.appendChild(s);var u=this;s.insertMarkup(this.src,{page:e,callback:function(t){delete u.isLoading[e];if(!t.xmlNode){var n=new Error(apf.formatErrorString(0,null,"Loading new page","Could not load new page: "+u.src));u.setProperty("loading",!1);if(this.dispatchEvent("error",apf.extend({error:n,bubbles:!0},t))===!1)return!0;throw n}u.setProperty("activepage",e),r&&r(t.amlNode),u.setProperty("loading",!1)}});return}return!1}if(s.parentNode!=this)return!1;if(!s.visible||s.disabled)return!1;e.tagName&&(e=o.position,this.activepage=s.name||e);if(!i){var a={previous:this.activepage,previousId:this.activepagenr,previousPage:this.$activepage,next:e,nextId:o.position,nextPage:s};if(this.dispatchEvent("beforeswitch",a)===!1)return this.hideLoader&&this.hideLoader(),!1}return this.activepagenr=o.position,this.setProperty("activepagenr",o.position),this.$activepage&&this.$activepage.$deactivate(),s.$activate(),this.$activepage=s,this.hideLoader&&(s.$rendered!==!1?this.hideLoader():s.addEventListener("afterrender",function(){this.parentNode.hideLoader()})),i||(s.$rendered!==!1?this.dispatchEvent("afterswitch",a):s.addEventListener("afterrender",function(){this.parentNode.dispatchEvent("afterswitch",a)})),typeof r=="function"&&r(s),!0},this.$propHandlers.buttons=function(e){this.$scale=e.indexOf("scale")>-1,this.$scroll=!this.$scale,this.$order=e.indexOf("order")>-1,this.$scale?(this.$maxBtnWidth=parseInt(this.$getOption("button","maxwidth"))||150,this.$minBtnWidth=parseInt(this.$getOption("button","minwidth"))||10,this.$setStyleClass(this.$buttons,"scale"),this.addEventListener("resize",r),this.minwidth=this.$minBtnWidth*this.getPages().length+10,this.$ext.style.minWidth=Math.max(0,this.minwidth-apf.getWidthDiff(this.$ext))+"px"):(this.$setStyleClass(this.$buttons,"",["scale"]),this.removeEventListener("resize",r))},this.anims="add|remove|sync",this.$scaleinit=function(i,s,o,u){function c(e){var t=apf.getAbsolutePosition(this);if(e.clientX<=t[0]||e.clientY<=t[1]||e.clientX>=t[0]+this.offsetWidth||e.clientY>=t[1]+this.offsetHeight)apf.removeListener(a.$buttons,"mouseout",c),delete a.$waitForMouseOut,a.$scaleinit(null,"sync")}var a=this,f=this.getPages(),l=f.length;this.minwidth=this.$minBtnWidth*l+10,this.$ext.style.minWidth=Math.max(0,this.minwidth-apf.getWidthDiff(this.$ext))+"px";if(u&&!this.$ext.offsetWidth&&!this.$ext.offsetHeight||this.anims.indexOf(s)==-1){r.call(this),s=="add"?i.dispatchEvent("afteropen"):s=="remove"&&i.dispatchEvent("afterclose")!==!1&&o();return}if(!apf.window.vManager.check(this,"tabscale",e))return;if(!s)return r.call(this);if(s=="add")t(i,function(){i.dispatchEvent("afteropen")});else if(s=="sync")r.call(this);else if(s=="remove"){var h=function(){if(i.dispatchEvent("afterclose")===!1)return;o();if(!v&&m){var e=a.getPages();for(var t=0,n=e.length;t<n;t++){var r=e[t];r.$button.style.minWidth="",r.$button.style.maxWidth=""}}a.$waitForMouseOut==2?(apf.removeListener(a.$buttons,"mouseout",c),delete a.$waitForMouseOut):v&&delete a.$waitForMouseOut},p=this.getPages(),d=p[p.length-1];while(d&&d.$button.style.top)d=d.previousSibling;if(!d)return;var v=d==i,m=i.$button.offsetWidth-apf.getWidthDiff(i.$button)!=parseInt(apf.getStyle(i.$button,"maxWidth"));if(!v&&m)for(var g=0,l=p.length;g<l;g++){var y=p[g];y.$button.style.minWidth=y.$button.style.maxWidth=y.$button.offsetWidth-(apf.isGecko?0:apf.getWidthDiff(y.$button))+"px"}var b=this.$activepage==i;if(a.nextTabInLine)a.set(a.nextTabInLine),delete a.nextTabInLine;else if(a.$activepage==i){var w=i.nextSibling;while(w&&(!w.$first||!w.visible))w=w.nextSibling;var E=i.previousSibling;while(E&&(!E.$last||!E.visible))E=E.previousSibling;(w||E)&&a.set(w||E)}b&&(apf.setStyleClass(i.$button,"curbtn"),i.$button.style.zIndex=0),p.length==1&&((i.relPage||i).$ext.style.display="none"),n(i,v,m,h,p.length==1),this.$waitForMouseOut=!0,v||apf.addListener(a.$buttons,"mouseout",c)}},this.getPages=function(){var e=[],t=this.childNodes;for(var n=0,r=t.length;n<r;n++)"page|case".indexOf(t[n].localName)>-1&&t[n].visible!==!1&&e.push(t[n]);return e},this.getPage=function(e){return apf.isNot(e)?this.$activepage:this.$findPage(e)},this.add=function(e,t,n,r,i){var s=this.ownerDocument.createElementNS(apf.ns.aml,"page");return t&&s.setAttribute("id",t),n&&s.setAttribute("type",n),e&&s.setAttribute("caption",e),i&&i(s),this.insertBefore(s,r),s},this.remove=function(e,t,n){var r=typeof e=="object"?e:this.$findPage(e);if(!r)return!1;var i={page:r};typeof t=="object"&&(i.htmlEvent=t,t=!1);if(!t&&this.dispatchEvent("close",i)===!1)return;return this.$scale&&!n?this.$scaleinit(r,"remove",function(){r.destroy(!0,!0)},!0):r.dispatchEvent("afterclose")!==!1&&r.destroy(!0,!0),r},this.setScrollerState=function(e,t){if(!this.ready||!this.$hasButtons||!this.oScroller)return;if(typeof e=="undefined"){var n=this.oScroller.offsetWidth||parseInt(apf.getStyle(this.oScroller,"width").replace(/(px|em|%)/,""));e=i.call(this)+n>this.$ext.offsetWidth,t=SCROLL_BOTH}t&SCROLL_BOTH&&e!==SCROLLANIM.scrollOn?(SCROLLANIM.scrollOn=e,e||(this.$buttons.style.left=SCROLLANIM.left+"px",this.oScroller.style.display="none")):this.oScroller.style.display="",this.oScroller.style.display=t&SCROLL_BOTH&&!e?"none":"",typeof t=="undefined"&&(t=SCROLL_BOTH),e||((t&SCROLL_LEFT||t&SCROLL_BOTH)&&s.call(this,SCROLL_LEFT,SCROLL_DIS),(t&SCROLL_RIGHT||t&SCROLL_BOTH)&&s.call(this,SCROLL_RIGHT,SCROLL_DIS))},this.correctScrollState=function(){if(!this.ready||!this.$hasButtons||!this.oScroller)return;this.setScrollerState()},this.scroll=function(e,t){if(!this.ready||!this.$hasButtons||!this.oScroller)return;e||(e=window.event),typeof e["type"]=="unknown"&&(e={type:"click"});if(n&&e.type!="dblclick")return;var n=!0;typeof t=="undefined"&&(t=SCROLL_LEFT);var r=this.$buttons.offsetLeft,i=e.delta?Math.round(e.delta*36):SCROLLANIM.size,u=o.call(this,t),a=this;if(t&SCROLL_LEFT){s(SCROLL_LEFT,SCROLL_DOWN),s(SCROLL_RIGHT,SCROLL_OFF);if(r===u)return this.setScrollerState(!1,SCROLL_LEFT),apf.tween.single(this.$buttons,{steps:SCROLLANIM.steps,interval:20,from:r,to:r+12,type:"left",anim:apf.tween.EASEOUT,onstop:SCROLLANIM.stopHandle,onfinish:function(t){apf.tween.single(t,{steps:SCROLLANIM.steps,interval:SCROLLANIM.interval,from:r+12,to:r,type:"left",anim:apf.tween.EASEIN,onstop:SCROLLANIM.stopHandle,onfinish:function(){n=!1,e.name=="mousescroll"&&s(SCROLL_LEFT,SCROLL_OFF)}})}});var f=r+(e.type=="dblclick"?i*3:i);f>u&&(f=u),f===u&&this.setScrollerState(!1,SCROLL_LEFT),this.setScrollerState(!0,SCROLL_RIGHT),apf.tween.single(this.$buttons,{steps:SCROLLANIM.steps,interval:SCROLLANIM.interval,control:SCROLLANIM.control,from:r,to:f,type:"left",anim:apf.tween.NORMAL,onstop:SCROLLANIM.stopHandle,onfinish:function(){n=!1,e.name=="mousescroll"&&s(SCROLL_LEFT,SCROLL_OFF),keepScrolling&&a.scroll(e,globalDir)}})}else if(t&SCROLL_RIGHT){this.setScrollerState(!0),s(SCROLL_RIGHT,SCROLL_DOWN),s(SCROLL_LEFT,SCROLL_OFF);if(r===u)return this.setScrollerState(!1,SCROLL_RIGHT),apf.tween.single(this.$buttons,{steps:SCROLLANIM.steps,interval:20,from:r,to:r-24,type:"left",anim:apf.tween.EASEOUT,onstop:SCROLLANIM.stopHandle,onfinish:function(t,i){apf.tween.single(t,{steps:SCROLLANIM.steps,interval:SCROLLANIM.interval,from:r-24,to:r,type:"left",anim:apf.tween.EASEIN,onstop:SCROLLANIM.stopHandle,onfinish:function(){n=!1,e.name=="mousescroll"&&s(SCROLL_RIGHT,SCROLL_OFF)}})}});var f=r-(e.type=="dblclick"?i*3:i);f<u&&(f=u),apf.tween.single(this.$buttons,{steps:SCROLLANIM.steps,interval:SCROLLANIM.interval,control:SCROLLANIM.control,from:r,to:f,type:"left",anim:apf.tween.NORMAL,onstop:SCROLLANIM.stopHandle,onfinish:function(){n=!1,e.name=="mousescroll"&&s(SCROLL_RIGHT,SCROLL_OFF),keepScrolling&&a.scroll(e,globalDir)}})}},this.scrollIntoView=function(e){bAnimating=!1;if(!this.ready||!this.$hasButtons||!this.oScroller||!e.$drawn)return;bAnimating=!0;if(this.$buttons.offsetWidth<this.$ext.offsetWidth)return this.setScrollerState(!1);var t=e.$button.offsetLeft,n=e.$button.offsetWidth,r=this.$buttons.offsetLeft;if(SCROLLANIM.size<=0){SCROLLANIM.left=this.$buttons.offsetLeft;var i=this.firstChild;while(!i.$button)i=i.nextSibling;SCROLLANIM.size=Math.round(i.$button.offsetWidth)}this.$buttons.style.left=r;var o=this.$ext.offsetWidth,u=this.oScroller.offsetWidth+4,a=null,f;t+n>o-u-r?(a=-(t-SCROLLANIM.left)+(o-n-u),f=SCROLL_RIGHT):r+t<SCROLLANIM.left&&(a=SCROLLANIM.left-t,f=SCROLL_LEFT),a!==null?(this.setScrollerState(!0),s(SCROLL_RIGHT,f&SCROLL_RIGHT?SCROLL_DOWN:SCROLL_OFF),s(SCROLL_LEFT,f&SCROLL_LEFT?SCROLL_DOWN:SCROLL_OFF),apf.tween.clearQueue(this.$buttons,!0),apf.tween.single(this.$buttons,{steps:SCROLLANIM.steps,interval:SCROLLANIM.interval,from:r,to:a,type:"left",anim:apf.tween.NORMAL,onstop:SCROLLANIM.stopHandle,onfinish:function(){bAnimating=!1,s(SCROLL_RIGHT,SCROLL_OFF),s(SCROLL_LEFT,SCROLL_OFF)}})):bAnimating=!1},this.addEventListener("DOMNodeRemoved",function(e){var t=e.currentTarget;if(e.$doOnlyAdmin||e.relatedNode!=this||t.localName!="page")return;if((this.activepage||this.activepage==0)&&this.activepage!=-1){this.getPage(this.nextTabInLine)||(this.nextTabInLine=null),this.nextTabInLine&&this.set(this.nextTabInLine);if(!this.nextTabInLine&&this.$activepage==t){var n=t.nextSibling;while(n&&(!n.$first||!n.visible))n=n.nextSibling;var r=t.previousSibling;while(r&&(!r.$last||!r.visible))r=r.previousSibling;this.firstChild==t&&n&&n&&n.$first(),this.lastChild==t&&r&&r&&r.$last(),n||r?this.set(n||r):(t.$deactivate(),this.$activepage=this.activepage=this.activepagenr=null,this.setProperty("activepage",null))}else this.$scale&&this.$scaleinit();delete this.nextTabInLine}this.setProperty("length",this.getPages().length-1)}),this.addEventListener("DOMNodeInserted",function(e){var t=e.currentTarget;if(t.localName!="page"||e.relatedNode!=this||t.nodeType!=1)return;var n=this.getPages();if(!e.$beforeNode){var r,i=n;(r=i[i.length-2])&&r.$last(!0),t.$last()}var s,o=n[0];t==o&&((s=this.getPage(1))&&s.$first(!0),t.$first());if(this.$activepage){var u={};this.$findPage(this.$activepage,u),this.activepagenr!=u.position&&(parseInt(this.activepage)==this.activepage&&(this.activepage=u.position,this.setProperty("activepage",u.position)),this.activepagenr=u.position,this.setProperty("activepagenr",u.position))}else(!this.activepage&&!this.$activepage&&!t.render||t.$rendered)&&this.set(t);this.$scale&&t.visible&&!e.$isMoveWithinParent?this.$scaleinit(t,"add"):t.dispatchEvent("afteropen"),this.setProperty("length",this.getPages().length)}),this.$findPage=function(e,t){var n,r=this.childNodes;if(e.localName)for(var i=0,s=0,o=r.length;s<o;s++){n=r[s];if("page|case".indexOf(n.localName)>-1&&++i&&n==e)return t&&(t.position=i-1),n}else for(var i=0,s=0,o=r.length;s<o;s++){n=r[s];if("page|case".indexOf(n.localName)>-1&&(i++==e||n.name==e))return t&&(t.position=i-1),n}return null},this.$enable=function(){var e=this.childNodes;for(var t=0,n=e.length;t<n;t++)e[t].enable&&e[t].enable()},this.$disable=function(){var e=this.childNodes;for(var t=0,n=e.length;t<n;t++)e[t].disable&&e[t].disable()},this.addEventListener("keydown",function(e){if(!this.$hasButtons)return;var t,n=e.keyCode;switch(n){case 9:break;case 13:break;case 32:break;case 37:t=this.getPage().previousSibling;while(t&&(t.nodeType!=1||"page|case".indexOf(t.localName)==-1||!t.visible))t=t.previousSibling;t&&this.setProperty("activepage",t);break;case 39:t=this.getPage().nextSibling;while(t&&(t.nodeType!=1||"page|case".indexOf(t.localName)==-1||!t.visible))t=t.nextSibling;t&&this.setProperty("activepage",t);break;default:return}},!0),this.$loadChildren=function(e){var t=!1,n=this,r,i,s,o,u;this.inited=!0;if(this.$hasButtons){this.$buttons=this.$getLayoutNode("main","buttons",this.$ext),this.$buttons.setAttribute("id",this.$uniqueId+"_buttons");if(apf.isGecko&&!this.$gotContainer){var a=this.$ext.appendChild(document.createElement("div"));a.style.backgroundImage=apf.getStyle(this.$buttons,"backgroundImage"),a.style.backgroundColor=apf.getStyle(this.$buttons,"backgroundColor"),a.style.position="absolute",a.style.left=0,a.style.top=0,a.style.right=0,a.style.overflow="hidden",a.style.height=this.$buttons.offsetHeight+"px",a.appendChild(this.$buttons),this.$buttons.style.width="100%",a.style.paddingRight=apf.getWidthDiff(this.$buttons)+"px",this.$gotContainer=!0}}this.oPages=this.$getLayoutNode("main","pages",this.$ext);if(this.$int){this.$int=this.oPages,t=!0,u=this.childNodes;for(r=0;r<u.length;r++){o=u[r];if(o.nodeType!=1)continue;o.$draw(!0),o.$skinchange&&o.$skinchange(),o.$loadAml()}}else this.$int=this.oPages,u=this.getPages(),u.length&&(u[0].$first(),(o=u[u.length-1]).$last());o?(this.activepage=(typeof this.activepage!="undefined"?this.activepage:this.activepagenr)||0,t=this.getPage(this.activepage),(!t.render||t.$rendered)&&this.$propHandlers.activepage.call(this,this.activepage)):this.isPages=!1,this.setProperty("length",this.getPages().length),this.ready=!0,!this.activepage&&this.getAttribute("src")&&(this.src=this.getAttribute("src"),this.$propHandlers.activepage.call(this))},this.$destroy=function(e){if(e||!this.oScroller)return}}.call(apf.BaseTab.prototype=new apf.Presentation),apf.BaseTree=function(){this.$init(!0),this.$dynCssClasses=[],this.$nodes=[]},function(){function o(e){e.action=="move-away"&&this.$fixItem(e.xmlNode,apf.xmldb.findHtmlNode(e.xmlNode,this),!0);if(e.action!="insert")return;var t=this.$findHtmlNode(e.xmlNode.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId);if(!t)return;if(e.action=="insert"&&e.result.length>0)if(this.$hasLoadStatus(e.xmlNode,"loaded",!0)){var n=this.$getLayoutNode("item","container",t);this.slideOpen(n,e.xmlNode)}else this.$hasLoadStatus(e.xmlNode,"potential",!0)&&this.$setLoadStatus(e.xmlNode,"loaded");else this.$fixItem(e.xmlNode,t)}this.implement(apf.Rename,apf.DataAction,apf.Cache,apf.K),this.$isTreeArch=!0,this.$focussable=!0,this.multiselect=!1,this.bufferselect=!0,this.startcollapsed=!0,this.$animType=apf.tween.NORMAL,this.$animOpenStep=3,this.$animCloseStep=1,this.$animSpeed=10;var e=2,t=4,n=8,r=16,i=this.$treeState={};this.$treeState[0]="",this.$treeState[e]="min",this.$treeState[e|t]="plus",this.$treeState[n]="last",this.$treeState[n|e]="minlast",this.$treeState[n|e|t]="pluslast",this.$treeState[r]="root",this.$booleanProperties.openadd=!0,this.$booleanProperties.startcollapsed=!0,this.$booleanProperties.nocollapse=!0,this.$booleanProperties.singleopen=!0,this.$booleanProperties.animation=!0,this.$booleanProperties.prerender=!0,this.$booleanProperties.removecontainer=!0,this.$booleanProperties.dragroot=!0,this.$booleanProperties.disableremove=!0,this.$supportedProperties.push("openadd","startcollapsed","nocollapse","singleopen","prerender","removecontainer","animation","dragroot","disableremove"),this.openadd=!0,this.startcollapsed=1,this.prerender=!0,this.disableremove=!1,this.expandAll=function(){if(!this.xmlRoot)return;var e=this.each.split("|").join("["+this.each.replace(/\|/g," or ")+"]|.//"),t=this;(function(n){var r=n.selectNodes(e);for(var i,s=0;s<r.length;s++)(i=apf.xmldb.getHtmlNode(r[s],t))&&t.slideToggle(i,1,!0),arguments.callee(r[s])})(this.xmlRoot)},this.collapseAll=function(){if(!this.xmlRoot)return;var e=this.xmlRoot.selectNodes(".//"+this.each.split("|").join("["+this.each.replace(/\|/g," or ")+"]|.//"));for(var t,n=e.length-1;n>=0;n--)(t=apf.xmldb.getHtmlNode(e[n],this))&&this.slideToggle(t,2,!0)},this.collapse=function(e){if(!this.xmlRoot)return;if(this.isCollapsed(e))return;var t=apf.xmldb.getHtmlNode(e,this);if(!t)return;this.slideToggle(t,2,!0)},this.expandAndSelect=function(e){if(!this.xmlRoot)return;var t=this;(function n(e){var r=t.getTraverseParent(e);if(r==t.xmlRoot)return!0;if(!r||n(r)===!1)return!1;t.slideToggle(apf.xmldb.getHtmlNode(r,t),1,!0)})(e)!==!1&&this.select(e)},this.expandList=function(e,t){function i(e,t){var s=r.selectSingleNode(e);if(!s)return o(e);n.slideToggle(apf.xmldb.getHtmlNode(s,n),1,!0,null,function(){var u=0,a=function(){if(!n.$hasLoadStatus(r.selectSingleNode(e),"loaded")){if(++u<3)return setTimeout(function(){n.slideToggle(apf.xmldb.getHtmlNode(s,n),1,!0,null,a)},1e3);var f=t.filter(function(t){return t.indexOf(e+"/")===0});return o(e),f.forEach(function(e){o(e)}),null}o();var l=t.filter(function(t){return t.indexOf(e+"/")===0&&e.split("/").length+1===t.split("/").length});l.forEach(function(e){i(e,t)})};a()})}function o(){++s===e.length&&t()}var n=this,r=this.xmlRoot,s=0,u=e.filter(function(e){return e.split("/").length===1});u.forEach(function(t){i(t,e)})},this.selectPath=function(e){},this.slideToggle=function(e,t,n,r,i){i=typeof i=="function"?i:function(){};if(this.nocollapse||r&&this.disabled)return i();e||(e=this.$selected);if(!e)return i();var s=e.getAttribute(apf.xmldb.htmlIdTag);while(!s&&e.parentNode)s=(e=e.parentNode).getAttribute(apf.xmldb.htmlIdTag);var o=this.$getLayoutNode("item","container",e);if(!o)return i();if(apf.getStyle(o,"display")=="block"){if(t==1){i&&i();return}e.className=e.className.replace(/min/,"plus"),this.slideClose(o,apf.xmldb.getNode(e),n,i)}else{if(t==2){i&&i();return}e.className=e.className.replace(/plus/,"min"),this.slideOpen(o,apf.xmldb.getNode(e),n,i)}},this.isCollapsed=function(e){return apf.getStyle(this.$getLayoutNode("item","container",apf.xmldb.getHtmlNode(e,this)),"display")=="none"};var s={};this.slideOpen=function(e,t,n,r){function h(){t&&f.$hasLoadStatus(t,"potential")?($setTimeout(function(){e!=this.$container&&(e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"),f.$extend(t,e,null,r)}),e!=this.$container&&(apf.isIE7||(e.style.height=apf.hasHeightAutoDrawBug?"100%":"auto"),e.style.overflow="visible")):e!=this.$container&&(e.style.overflow="visible",apf.isIE7||(e.style.height=apf.hasHeightAutoDrawBug?"100%":"auto"),f.dispatchEvent("expand",{xmlNode:t}))}t||(t=this.selected);var i=apf.xmldb.getHtmlNode(t,this);e||(e=this.$findContainer(i));if((!e.childNodes.length||e.firstChild.nodeType==3&&e.firstChild.nodeValue.trim()=="")&&!this.$getBindRule("insert",t)&&!this.getTraverseNodes(t).length)return r&&r();if(this.singleopen){var o=this.getTraverseParent(t),u=(o||this.xmlRoot).getAttribute(apf.xmldb.xmlIdTag);s[u]&&s[u][1]!=t&&this.getTraverseParent(s[u][1])==o&&this.slideToggle(s[u][0],2),s[u]=[i,t]}this.nocollapse||(e.style.display="block");if(!this.prerender&&this.$hasLoadStatus(t,"potential")&&!e.childNodes.length){this.$extend(t,e,n,r);return}if(n||e.scrollHeight>1e3){var a=e.scrollHeight-e.offsetHeight-p-(apf.isGecko?16:0);return e.scrollTop=a==0?100:0,!this.nocollapse&&e!=this.$container&&(e.style.height="auto",e.style.overflow="visible"),this.$hasLoadStatus(t,"potential")?this.$extend(t,e,n,r):(this.dispatchEvent("expand",{xmlNode:t}),r&&r())}var f=this,l=e.style.height;e.style.overflow="visible",apf.isIE7||(e.style.height=apf.hasHeightAutoDrawBug?"100%":"auto");var c=e.scrollHeight;e.style.overflow="hidden",e.style.height=l;if(!this.animation){var p=apf.getHeightDiff(e),d=e;e.style.height="10px",d.scrollTop=0,e.style.height=Math.max(c,0)+"px",a=d.scrollHeight-d.offsetHeight-p-(apf.isGecko?16:0),d.scrollTop=a==0?100:0,h()}else apf.tween.single(e,{type:"scrollheight",from:e.offsetHeight,to:c,anim:this.$animType,steps:this.$animOpenStep,interval:this.$animSpeed,onfinish:function(e){h()}})},this.slideClose=function(e,t,n){if(this.nocollapse)return;t||(t=this.selected);if(this.singleopen){var r=(this.getTraverseParent(t)||this.xmlRoot).getAttribute(apf.xmldb.xmlIdTag);s[r]=null}if(!e){var i=apf.xmldb.getHtmlNode(t,this);e=this.$findContainer(i)}e!=this.$container&&(e.style.height=e.offsetHeight,e.style.overflow="hidden");if(n){e!=this.$container&&(e.style.height=0),e.style.display="none",this.dispatchEvent("collapse",{xmlNode:t});return}var o=this;apf.tween.single(e,{type:"scrollheight",from:e.scrollHeight,to:0,anim:this.$animType,steps:this.$animCloseStep,interval:this.$animSpeed,onfinish:function(e,n){e.style.display="none",o.dispatchEvent("collapse",{xmlNode:t})}})},this.$isStartCollapsed=function(e){return this.$hasBindRule("collapsed")?this.$getDataNode("collapsed",e)?!0:!1:this.$hasBindRule("expanded")?this.$getDataNode("expanded",e)?!1:!0:this.startcollapsed},this.$add=function(r,i,s,o,u,a,f,l,c){if(this.$isTreeArch&&this.$needsDepth&&typeof f=="undefined"){var h=s;f=0;while(h!=this.xmlRoot)f++,h=h.parentNode}var p=this.$getBindRule("insert",r)?!0:!1,d=this.getTraverseNodes(r),v=d.length?!0:!1,m=p||v,g=this.$isStartCollapsed(r),y=(m?e:0)|(g&&m||p?t:0)|(a?n:0),b=this.$initNode(r,y,i,f),w=this.$getLayoutNode("item","container",b),E;!g&&!this.nocollapse&&w.setAttribute("style","overflow:visible;height:auto;display:block;");var S,x=!this.removecontainer||m;(!m||p)&&w.setAttribute("style","display:none;"),this.prerender||(E=d.length),m&&!this.prerender&&E>2&&g||p&&(!this.$hasLoadStatus(r)||this.$hasLoadStatus(r,"potential"))?this.$setLoading(r,w):!v&&(S=this.$applyBindRule("empty",r))&&this.$setEmptyMessage(w,S);if((!o||o==this.$container)&&s==this.xmlRoot&&!u||c=="insert")this.$nodes.push(b),!apf.isChildOf(b,w,!0)&&x&&this.$nodes.push(w),c!="insert"&&(this.$setStyleClass(b,"root"),this.$setStyleClass(w,"root"));else{o||(o=apf.xmldb.getHtmlNode(r.parentNode,this),o=o?this.$getLayoutNode("item","container",o):this.$container),o==this.$container&&(this.$setStyleClass(b,"root"),this.$setStyleClass(w,"root"));var T;c!="load"&&c!="extend"&&!u&&(T=this.getNextTraverse(r))&&(u=apf.xmldb.getHtmlNode(T,this)),u&&u.parentNode!=o&&(u=null),o.style&&this.getTraverseNodes(r.parentNode).length==1&&this.$removeEmptyMessage(o);if(o.style){var N=!apf.isChildOf(b,w,!0);b=apf.insertHtmlNode(b,o,u);if(N&&x)var w=apf.insertHtmlNode(w,o,u);else var w=this.$getLayoutNode("item","container",b)}else o.insertBefore(b,u),!apf.isChildOf(b,w,!0)&&x&&o.insertBefore(w,u);if(o.style){this.openadd&&o!=this.$container&&o.style.display!="block"&&(this.$isStartCollapsed(s)||this.slideOpen(o,s,!0)),this.$fillParent||(this.$fillParent=s);var T=l==undefined?this.getNextTraverse(r,!0):l,C;T&&(C=apf.xmldb.getHtmlNode(T,this))&&this.$fixItem(T,C)}}return(this.prerender||E<3||!g)&&(r.namespaceURI!=apf.ns.apf||r.localName!="item")&&this.$addNodes(r,w,!1,null,null,(f||0)+1),w},this.$fill=function(){this.$useiframe&&(this.$pHtmlDoc=this.oDoc),this.$nodes.length&&(apf.insertHtmlNodes(this.$nodes,this.$fillParentHtml||this.$container),this.$nodes.length=0,delete this.$fillParentHtml),this.$fillParent&&(this.$fixItem(this.$fillParent,apf.xmldb.getHtmlNode(this.$fillParent,this)),delete this.$fillParent)},this.$getParentNode=function(e){return e?this.$getLayoutNode("item","container",e):this.$container},this.$fixItem=function(r,s,o,u,a){if(!s)return;if(o){var f;(f=this.getNextTraverse(r,!0))&&this.$fixItem(f,this.$findHtmlNode(f.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId),null,!0),!this.emptyMessage&&r.parentNode.selectNodes(this.each).length==1&&this.$fixItem(r.parentNode,this.$findHtmlNode(r.parentNode.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId),null,!1,!0)}else{var l=this.$getLayoutNode("item","container",s),c=!1;a?c=!1:this.getTraverseNodes(r).length>0?c=!0:this.$hasLoadStatus(r,"potential")?c=!0:c=!1;var h=c&&apf.getStyle(l,"display")=="none";isLast=this.getNextTraverse(r,null,u?2:1)?!1:!0,state=(c?e:0)|(h?t:0)|(isLast?n:0),this.$setStyleClass(this.$getLayoutNode("item","class",s),i[state],["min","plus","last","minlast","pluslast"]),this.$setStyleClass(this.$getLayoutNode("item","container",s),i[state],["min","plus","last","minlast","pluslast"]),this.$getLayoutNode("item","openclose",s)&&this.$getLayoutNode("item","openclose",s).setAttribute("children",c),l&&(c?h||(l.style.display="block"):l.style.display="none")}},this.$deInitNode=function(e,t){var n=this.$getLayoutNode("item","container",t),r=t.parentNode;n&&n.parentNode.removeChild(n),r.removeChild(t),this.$withContainer&&t.parentNode.removeChild(t.nextSibling),e.parentNode!=this.xmlRoot&&this.$fixItem(e,t,!0);var i;!r.childNodes.length&&(i=this.$applyBindRule("empty",e))&&this.$setEmptyMessage(r,i),this.$fixItem(e,t,!0)},this.$moveNode=function(e,t,n){if(!apf.debug&&!t)return;var r;if(this.$hasLoadStatus(e.parentNode,"potential")){r=this.$getLayoutNode("item","container",t),t.parentNode.removeChild(t),r.parentNode.removeChild(r),this.$extend(e.parentNode);return}var i=this.getNextTraverse(e),s=i?apf.xmldb.getHtmlNode(i,this):null,o=t.nextSibling;o&&o.tagName!=t.tagName&&(o=o.nextSibling);if(o&&s==o)return;var u=t.parentNode,a=this.getTraverseParent(e),f=apf.xmldb.getHtmlNode(a,this),l=f?this.$getLayoutNode("item","container",f):this.$container;r=this.$getLayoutNode("item","container",t),l!=u&&this.getTraverseNodes(e.parentNode).length==1&&this.$removeEmptyMessage(l),l.insertBefore(t,s),r&&l.insertBefore(r,s);var c;!this.getTraverseNodes(n).length&&(c=this.$applyBindRule("empty",n))&&this.$setEmptyMessage(u,c),this.$fixItem(e,t),this.$fixItem(a,apf.xmldb.getHtmlNode(a,this)),this.$updateNode(n,apf.xmldb.getHtmlNode(n,this));var o;(o=this.getNextTraverse(e,!0))&&this.$fixItem(o,apf.xmldb.getHtmlNode(o,this))},this.$setLoading=function(e,t){this.$setLoadStatus(e,"potential");var n=this.getTraverseNodes(e).length;if(!n||n>20)this.$getNewContext("loading"),apf.insertHtmlNode(this.$getLayoutNode("loading"),t)},this.$removeLoading=function(e){if(!e)return;this.$timers&&clearTimeout(this.$timers[e.getAttribute(apf.xmldb.xmlIdTag)]);var t=apf.xmldb.getHtmlNode(e,this);t&&(this.$getLayoutNode("item","container",t).innerHTML="",this.$setStyleClass(t,"",["loading"]))},this.$extend=function(e,t,n,r){if(!this.$hasLoadStatus(e,"potential"))return;var i=this.$getBindRule("insert",e),s=this,u=i&&i.match?(i.cmatch||i.compile("match"))(e):e;if(i&&u){this.$setLoadStatus(e,"loading");var s=this;(this.$timers||(this.$timers={}))[e.getAttribute(apf.xmldb.xmlIdTag)]=$setTimeout(function(){s.$setStyleClass(apf.xmldb.getHtmlNode(e,s),"loading")},100),i.get?this.getModel().$insertFrom(i.getAttribute("get"),{xmlNode:u,insertPoint:u,amlNode:this,callback:function(t,n,i){n!=apf.SUCCESS?(s.$setLoadStatus(e,"potential"),s.$removeLoading(e),s.slideToggle(apf.xmldb.getHtmlNode(e,s),2,!0)):s.slideOpen(null,e),r&&r(t,n,i)}}):this.$applyBindRule("insert",e)&&this.insert(data,{insertPoint:u})}else this.prerender||(this.$setLoadStatus(e,"loaded"),this.$removeLoading(e),o.call(this,{action:"insert",xmlNode:e,result:this.$addNodes(e,t,!0,null,null,null,"extend"),anim:!n}))},this.addEventListener("xmlupdate",o),this.addEventListener("beforerename",function(){this.$tempsel&&(clearTimeout(this.timer),this.select(this.$tempsel),this.$tempsel=null,this.timer=null)}),this.scrollIntoView=function(e,t){var n=apf.xmldb.getHtmlNode(e,this),r;if(!n)return;r=apf.getAbsolutePosition(n,this.$container)[1],t?r<=this.$container.scrollTop&&(this.$container.scrollTop=r):r>this.$container.scrollTop+this.$container.offsetHeight&&(this.$container.scrollTop=r-this.$container.offsetHeight+n.offsetHeight)},this.addEventListener("keydown",function(e){var t=e.keyCode,n=e.ctrlKey,r=e.shiftKey,i=this.$caret||this.$selected,s,o,u,a,f,l,c,h;if(e.returnValue==-1||!i||this.renaming)return;var p=this.caret||this.selected,d=this.$container;switch(t){case 13:this.$tempsel&&this.$selectTemp(),this.ctrlselect=="enter"&&this.select(this.caret,!0),this.choose(i);break;case 32:this.$tempsel&&this.$selectTemp();if(this.$mode&&!n){var v=this.getSelection();!v.length||!this.multiselect?this.checkToggle(this.caret,!0):this.checkList(v,this.isChecked(this.selected),!0,!1,!0)}else(n||!this.isSelected(this.caret))&&this.select(this.caret,!0);return!1;case 46:if(this.disableremove)return;this.$tempsel&&this.$selectTemp(),this.remove();break;case 36:return this.$setTempSelected(this.getFirstTraverseNode(),!1,r),d.scrollTop=0,!1;case 35:var m=this.getLastTraverseNode();while(!this.isCollapsed(m))m=this.getLastTraverseNode(m);return this.$setTempSelected(m,!1,r,!0),d.scrollTop=d.scrollHeight,!1;case 37:return this.$tempsel&&this.$selectTemp(),this.caret.selectSingleNode(this.each)&&!this.isCollapsed(this.caret)?this.slideToggle(this.$caret||this.$selected,2):(c=this.getTraverseParent(this.caret))&&c!=this.xmlRoot&&this.select(c),!1;case 107:case 187:case 39:this.$tempsel&&this.$selectTemp(),(this.$hasLoadStatus(this.caret,"potential")||this.getFirstTraverseNode(this.caret))&&this.slideToggle(this.$caret||this.$selected,1);break;case 109:case 189:this.getFirstTraverseNode(this.caret)&&this.slideToggle(this.$caret||this.$selected,2);break;case 38:if(!p&&!this.$tempsel)return;a=this.$tempsel?apf.xmldb.getNode(this.$tempsel):p,l=this.getNextTraverse(a,!0);if(l&&l!=a){f=this.getTraverseNodes(l);do{h=this.$getLayoutNode("item","container",this.$findHtmlNode(apf.xmldb.getID(l,this)));if(!h||apf.getStyle(h,"display")!="block"||!f.length)break;l=f[f.length-1]}while(l&&(f=this.getTraverseNodes(l)).length)}else{if(this.getTraverseParent(a)==this.xmlRoot){this.dispatchEvent("selecttop");return}l=this.getTraverseParent(a)}if(!l||l.nodeType!=1)return!1;return this.$setTempSelected(l,n,r,!0),i=apf.xmldb.getHtmlNode(l,this),o=apf.getAbsolutePosition(i,this.$container)[1],o<=d.scrollTop&&(d.scrollTop=o),!1;case 40:if(!p&&!this.$tempsel)return;a=this.$tempsel?apf.xmldb.getNode(this.$tempsel):p,l=this.getFirstTraverseNode(a),l&&(h=this.$getLayoutNode("item","container",this.$findHtmlNode(apf.xmldb.getID(a,this))),h&&apf.getStyle(h,"display")!="block"&&(l=null));while(!l){c=this.getTraverseParent(a);if(!c)break;var g=0;f=this.getTraverseNodes(c);while(f[g]&&f[g]!=a)g++;l=f[g+1],a=c}if(!l||l.nodeType!=1)return!1;return this.$setTempSelected(l,n,r),i=apf.xmldb.getHtmlNode(l,this),o=apf.getAbsolutePosition(i,this.$container)[1]+i.offsetHeight,o>d.scrollTop+d.offsetHeight&&(d.scrollTop=o-d.offsetHeight),!1;case 33:s=apf.getAbsolutePosition(this.$container),u=document.elementFromPoint(s[0]+this.$container.offsetWidth-2,s[1]+2),l=apf.xmldb.findXmlNode(u),l==this.selected&&(d.scrollTop-=d.offsetHeight-apf.getHeightDiff(d),u=document.elementFromPoint(s[0]+this.$container.offsetWidth-2,s[1]+2),l=apf.xmldb.findXmlNode(u)),this.select(l),i=apf.xmldb.getHtmlNode(l,this),o=apf.getAbsolutePosition(i,this.$container)[1]-i.offsetHeight,o<=d.scrollTop&&(d.scrollTop=o);break;case 34:s=apf.getAbsolutePosition(this.$container),u=document.elementFromPoint(s[0]+this.$container.offsetWidth-2,s[1]+this.$ext.offsetHeight-4),l=apf.xmldb.findXmlNode(u),l==this.selected&&(d.scrollTop+=d.offsetHeight-apf.getHeightDiff(d),u=document.elementFromPoint(s[0]+this.$container.offsetWidth-2,s[1]+this.$ext.offsetHeight-4),l=apf.xmldb.findXmlNode(u)),this.select(l),i=apf.xmldb.getHtmlNode(l,this),o=apf.getAbsolutePosition(i,this.$container)[1]+i.offsetHeight,o>d.scrollTop+d.offsetHeight&&(d.scrollTop=o-d.offsetHeight);break;default:if(this.celledit){!n&&!e.altKey&&(t>46&&t<112||t>123)&&this.startRename(null,!0);return}if(t==65&&n)return this.selectAll(),!1;if(this.caption||(this.bindingRules||{}).caption){if(!this.xmlRoot)return;if(!this.lookup||(new Date).getTime()-this.lookup.date.getTime()>300)this.lookup={str:"",date:new Date};this.lookup.str+=String.fromCharCode(t);var f=this.getTraverseNodes();for(var y,g=0;g<f.length;g++){y=this.$applyBindRule("caption",f[g]);if(y&&y.substr(0,this.lookup.str.length).toUpperCase()==this.lookup.str){this.isSelected(f[g])||this.select(f[g]),i&&(this.$container.scrollTop=i.offsetTop-(this.$container.offsetHeight-i.offsetHeight)/2);return}}return}}},!0),this.$getCaptionElement=function(){if(!this.$selected)return!1;var e=this.$getLayoutNode("item","caption",this.$selected);return e.nodeType==1?e:e.parentNode},this.$calcSelectRange=function(e,t){var n=[],r=!1,i=0,s=this.getTraverseParent(e),o=this.getTraverseParent(t),u=this.getTraverseNodes(s);for(;i<u.length;i++)u[i]==e&&(r=!0),r&&n.push(u[i]),u[i]==t&&(r=!1);if(!n.length||r){n=[];for(r=!1,i=u.length-1;i>=0;i--)u[i]==e&&(r=!0),r&&n.push(u[i]),u[i]==t&&(r=!1)}return n},this.$findContainer=function(e){return this.$getLayoutNode("item","container",e)},this.$selectDefault=function(e){var t=this.getFirstTraverseNode(e);if(!t)return;if(this.select(t,null,null,null,!0))return!0;var n=this.getTraverseNodes(e);for(var r=0;r<n.length;r++)if(this.$selectDefault(n[r]))return!0},this.$setEmptyMessage=function(e,t){this.$getNewContext("empty");var n=this.$getLayoutNode("empty");if(!n)return;var r=apf.insertHtmlNode(n,e);r.setAttribute("empty","true");var i=this.$getLayoutNode("empty","caption",r);i&&apf.setNodeValue(i,t||""),e.style?this.slideOpen(e,null,!0):this.nocollapse?e.setAttribute("style","display:inline-block;"):e.setAttribute("style","overflow:visible;height:auto;display:block;")},this.$removeEmptyMessage=function(e){var t=e.firstElementChild||e.firstChild;if(!t)return;do{if(t.getAttribute&&t.getAttribute("empty")){e.removeChild(t);return}t=t.nextSibling}while(t)},this.$drawBase=function(){this.$ext=this.$getExternal(),this.$container=this.$getLayoutNode("main","container",this.$ext),this.opencloseaction=this.$getOption("main","openclose"),apf.hasCssUpdateScrollbarBug&&!this.mode&&this.$fixScrollBug();var e=this;this.$ext.onclick=function(t){e.dispatchEvent("click",{htmlEvent:t||event})},this.$ext.onmousedown=function(t){e.dispatchEvent("mousedown",{htmlEvent:t||event})},this.$ext.onmouseover=function(t){e.dispatchEvent("mouseover",{htmlEvent:t||event})},this.$ext.onmouseout=function(t){e.dispatchEvent("mouseout",{htmlEvent:t||event})},this.$ext.onmousemove=function(t){e.dispatchEvent("mousemove",{htmlEvent:t||event})}},this.addEventListener("DOMNodeInsertedIntoDocument",function(){this.nocollapse?this.startcollapsed=!1:this.startcollapsed===1&&(this.startcollapsed=!apf.isFalse(this.$getOption("main","startcollapsed")))}),this.addEventListener("DOMNodeRemovedFromDocument",function(){this.$ext.onclick=null,apf.destroyHtmlNode(this.oDrag),this.oDrag=null})}.call(apf.BaseTree.prototype=new apf.MultiSelect),apf.__DELAYEDRENDER__=2048,apf.DelayedRender=function(){this.$regbase=this.$regbase|apf.__DELAYEDRENDER__,this.$rendered=!1,this.$render=function(e){if(this.$rendered)return;if(this.dispatchEvent("beforerender")===!1)return;this["render-delay"]||e?$setTimeout("apf.lookup("+this.$uniqueId+").$renderparse()",10):this.$renderparse()},this.$renderparse=function(){if(this.$rendered)return;this.$ext.style.visibility="hidden";var e=this.ownerDocument.$domParser;e.parseFromXml(this.$aml,{amlNode:this,doc:this.ownerDocument,delayedRender:!0}),e.$continueParsing(this),this.$rendered=!0,this.dispatchEvent("afterrender"),this.addEventListener("$event.afterrender",function(e){e.call(this)}),this.$ext.style.visibility=""};var e;this.addEventListener("prop.visible",e=function(){arguments[0].value&&(this.$render(),this.removeEventListener("prop.visible",e))})},apf.GuiElement.propHandlers.render=function(e){!this.hasFeature(apf.__DELAYEDRENDER__)&&e=="runtime"&&(this.implement(apf.DelayedRender),this.localName!="page"&&(this.visible=!1,this.$ext.style.display="none"),typeof this["render-delay"]=="undefined"&&this.$setInheritedAttribute("render-delay"))},apf.config.$inheritProperties["render-delay"]=1,apf.__DRAGDROP__=32,apf.DragDrop=function(){function e(){this.$dragInited=!1,this.$ext.onmousedown=this.$ext.onmousemove=this.$ext.onmouseup=null,document.elementFromPointRemove&&document.elementFromPointRemove(this.$ext)}this.$regbase=this.$regbase|apf.__DRAGDROP__,this.$dragInited=!1,this.copy=function(e,t,n,r){e.nodeType&&(e=[e]);var i,s=[],o=0,u=e.length;for(;o<u;o++)s.push({action:r?"moveNode":"appendChild",args:[t,r?e[o]:e[o]=e[o].cloneNode(!0),n]});return this.$actions[r?"movegroup":"copygroup"]?i=this.$executeAction("multicall",s,r?"movegroup":"copygroup",e[0]):i=this.$executeAction("multicall",s,r?"move":"copy",e[0],null,null,e.length>1?e:null),i!==!1?e:!1},this.move=function(e,t,n){return this.copy(e,t,n,!0)},this.isDragAllowed=function(e,t){if(!this.dragroot&&this.xmlRoot.firstChild==e[0])return!1;if(this.disabled||!e||!e.length||!e[0])return!1;if(this.drag||this.dragcopy)return t&&t.merge(e),!0;var n,r=[],i=0,s=e.length;for(;i<s;i++){n=this.$getDataNode("drag",e[i],null,r);if(!n)return!1;t&&t.push(n)}return r.length?r:!1},this.isDropAllowed=function(e,t){if(this.disabled||!e||!e.length||!t)return!1;if(!this.dragroot==0&&this.xmlRoot.firstChild==e[0])return!1;for(var n=e.length-1;n>=0;n--)if(apf.isChildOf(e[n],t,!0))return!1;var r,i,s=this.$attrBindings&&this.$attrBindings.drop;this.drop&&(!s||s.value=="true")&&(this.$setDynamicProperty("drop",this.hasFeature(apf.__MULTISELECT__)?"["+this.each+"]":"[node()]"),s=!0);if(s){for(var o=0,u=e.length;o<u;o++){r=this.$getDataNode("drop",e[o]);if(!r)break}if(o==u&&t&&!apf.isChildOf(r,t,!0))return[t,null]}var a=this.$bindings.drop;if(!a||!a.length)return!1;var f,l,n=0,c=a.length;for(;n<c;n++){f=this.$bindings.getRuleIndex("drop",n);for(var o=0,u=e.length;o<u;o++){r=f.cvalue?f.cvalue(e[o]):f.cmatch(e[o]);if(!r)break}if(o!=u)continue;l=f.target,!l||l=="."?i=t:i=(f.ctarget||f.compile("target"))(t);if(i&&!apf.isChildOf(r,i,!0))return[i,f]}return!1},this.$dragDrop=function(e,t,n,r,i,s,o,u){var a=n&&n.action;a?a=(n.caction||n.compile("action"))(t[0]):a=r;if(a=="tree-append"&&i)return!1;o||(o={});var f={internal:apf.DragServer.dragdata&&apf.DragServer.dragdata.host==this,ctrlKey:o.ctrlKey,keyCode:o.keyCode},l=n&&n.copy;if(typeof u=="boolean")l=u;else if(l)f.event=o||{},l=!apf.isFalse((n.ccopy||n.compile("copy"))(t[0],f));else if(typeof this.dragcopy=="boolean"||typeof this.dropcopy=="boolean")if(this.dropcopy)l=this.dropcopy;else if(this.dragcopy)l=o.ctrlKey;else{var c=this.$attrBindings&&this.$attrBindings.dragcopy;c&&(l=!apf.isFalse((c.cvalue2||c.compile("value",{withopt:!0}))(t[0],f)))}if(!l&&s)for(var h=0,p=s.length;h<p;h++){l=typeof s[h]=="object"&&s[h].copy?!apf.isFalse((s[h].ccopy||s[h].compile("copy"))(t[0],f)):o.ctrlKey;if(l)break}var d,v=l?"copy":"move",m=n?n.getAttribute("parent"):null;switch(a){case"list-append":e=i?e:this.getTraverseParent(e),m&&(e.selectSingleNode(m)?e=e.selectSingleNode(m):(e.appendChild(e.ownerDocument.createElement(m)),e=e.selectSingleNode(m))),d=this[v](t,e);break;case"insert-before":d=i?this[v](t,e):this[v](t,e.parentNode,e);break;case"tree-append":m&&(e.selectSingleNode(m)?e=e.selectSingleNode(m):(e.appendChild(e.ownerDocument.createElement(m)),e=e.selectSingleNode(m))),d=this[v](t,e)}return this.selectable&&d&&(this.selectList(d),this.setCaret(d[0]),this.focus()),d},this.enableDragDrop=function(){this.icoAllowed="",this.icoDenied="",this.$ext.dragdrop=!1;var e=this;this.$ext[apf.isIphone?"ontouchstart":"onmousedown"]=function(t){if(e.disabled)return;t=t||window.event;var n,r=t.originalTarget||t.srcElement||t.target,i=e.hasFeature(apf.__MULTISELECT__);if(i&&r==e.$container)return;e.dragging=0;try{if(!apf.isIphone&&e.allowdeselect&&(r==this||r.getAttribute(apf.xmldb.htmlIdTag)&&e.$getLayoutNode("item","select",this)!=this))return}catch(t){return}e.$findValueNode&&(n=e.$findValueNode(r));var s=n?apf.xmldb.getNode(n):apf.xmldb.findXmlNode(r);if(i&&(!e.selected||!s||s==e.xmlRoot))return;e.isDragAllowed(i?e.$getSelection():s)&&apf.DragServer.start(e,r,t)},this.$ext[apf.isIphone?"ontouchmove":"onmousemove"]=function(t){if(this.host.dragging!=1||e.disabled)return},this.$ext.onmouseup=function(){if(e.disabled)return;this.host.dragging=0},this.$ext.ondragcopy=this.$ext.ondragstart=function(){return!1},document.elementFromPointAdd&&document.elementFromPointAdd(this.$ext),this.$initDragDrop&&!this.$dragInited?(this.$initDragDrop(),this.$dragInited=2):this.$dragInited=!0},this.implement(this.hasFeature(apf.__MULTISELECT__)?apf.MultiselectDragDrop:apf.StandardDragDrop),this.$supportedProperties.push("drop","drag","dragcopy"),this.$propHandlers.dragcopy=this.$propHandlers.dropcopy=this.$propHandlers.drag=this.$propHandlers.drop=function(t,n){this[n]=apf.isTrue(t);if(this.$dragInited&&n=="drag"&&t&&this.$dragInited!=2){this.$initDragDrop(),this.$dragInited=2;return}if(n=="dragcopy"||n=="dropcopy")return;!t&&!this.drag&&!this.drop&&!this.$bindings&&this.$attrBindings&&(!this.$attrBindings.drag||!this.$attrBindings.drop)?e.call(this):t&&!this.$dragInited&&this.enableDragDrop()},this.addEventListener("DOMNodeRemovedFromDocument",function(t){e.call(this),this.oDrag&&(apf.destroyHtmlNode(this.oDrag),this.oDrag=null)})},apf.GuiElement.propHandlers.dragcopy=apf.GuiElement.propHandlers.dropcopy=apf.GuiElement.propHandlers.drop=apf.GuiElement.propHandlers.drag=function(e,t){apf.isFalse(e)||(this.hasFeature(apf.__DRAGDROP__)||(this.implement(apf.DragDrop),this.enableDragDrop()),this[t]=apf.isTrue(e))},apf.DragServer={Init:function(){apf.addEventListener("hotkey",function(e){if(apf.window.dragging&&e.keyCode==27)return document.body.lastHost&&document.body.lastHost.dragOut&&document.body.lastHost.dragOut(apf.dragHost),apf.DragServer.stopdrag()})},start:function(e,t,n,r){document.elementFromPointReset&&document.elementFromPointReset(),e.dragging=1;var i=window.document;i=!i.compatMode||i.compatMode=="CSS1Compat"?i.html||i.documentElement:i.body;var s=apf.isIE?i.scrollLeft:window.pageXOffset,o=apf.isIE?i.scrollTop:window.pageYOffset,u=e.$ext.offsetParent,a;while(u&&u!=i&&u.tagName!="BODY")s-=u.scrollLeft,o-=u.scrollTop,u=u.offsetParent;if(!t&&r)a=[0,0];else{var f=t,l;while(f&&f.nodeType==1&&!(l=f.getAttribute(apf.xmldb.htmlIdTag)))f=f.parentNode;if(!l)return;a=apf.getAbsolutePosition(f)}apf.DragServer.coordinates={srcElement:t,doc:i,scrollX:s,scrollY:o,offsetX:n.clientX-a[0],offsetY:n.clientY-a[1],clientX:n.pageX?n.pageX-window.pageXOffset:n.clientX,clientY:n.pageY?n.pageY-window.pageYOffset:n.clientY};var c=r||e.hasFeature(apf.__MULTISELECT__)?e.getSelection():[e.xmlRoot],h=[],p=e.isDragAllowed(c,h);if(!p)return;e.hasEventListener("dragdata")&&(h=e.dispatchEvent("dragdata",{data:h})),this.dragdata={rules:p,selection:c,data:h,indicator:e.$showDragIndicator(c,this.coordinates),host:e};if(e.dispatchEvent("dragstart",this.dragdata)===!1)return!1;e.dragging=2,apf.dragMode=!0,document.onmousemove=this.onmousemove,document.onmouseup=this.onmouseup},stop:function(e,t,n){this.last&&this.dragout(),this.dragdata.host.dispatchEvent("dragstop",apf.extend(this.dragdata,{success:t})),this.dragdata.host.dragging=0,this.dragdata.host.$hideDragIndicator(t),apf.dragMode=!1,document.onmousemove=document.onmouseup=null,this.dragdata=null},dragover:function(e,t,n){function s(t){return e.isDropAllowed&&e.xmlRoot?e.isDropAllowed(r.dragdata.data,t):apf.isTrue(apf.getInheritedAttribute(e,"",function(t){if(t.drop)return e=t,e==apf.DragServer.last?!1:!0}))}var r=this,i=t;n=n||window.event;var o;e.$findValueNode&&(o=e.$findValueNode(t));if(this.lastFel&&this.lastFel==o||!this.lastFel&&this.last==e)return;var u=o?apf.xmldb.getNode(o):apf.xmldb.findXmlNode(t),a=s(u||e.xmlRoot);this.last&&this.last!=e&&this.dragout(this.last,n),this.last=e,this.lastFel=o;if(!a){if(!e||!e.$dragover)return;var f=(u||e.xmlRoot).parentNode;if(!f||!(t=apf.xmldb.findHtmlNode(f,e)))return;e.$findValueNode&&(o=e.$findValueNode(t)),u=o?apf.xmldb.getNode(o):apf.xmldb.findXmlNode(t),a=s(f),this.lastFel=t;if(!a)return}e.dispatchEvent("dragover",this.dragdata,{target:u||e.xmlRoot,lastEl:e.lastel,originalEl:i})===!1&&(a=!1);var l=n.originalTarget||n.srcElement||n.target;e&&e.$dragover&&e.$dragover(t,this.dragdata,a)},dragout:function(e,t){this.lastFel=null,e&&(this.dragdata.htmlEvent=t,e.dispatchEvent("dragout",this.dragdata)),this.last&&this.last.$dragout&&this.last.$dragout(null,this.dragdata),this.last=null},dragdrop:function(e,t,n,r){function s(t){return e.isDropAllowed&&e.xmlRoot?e.isDropAllowed(i.dragdata.data,t):apf.isTrue(apf.getInheritedAttribute(e,"",function(t){if(t.drop)return e=t,!0}))}var i=this,o,u,a=e.$findValueNode?apf.xmldb.getNode(e.$findValueNode(t)):apf.xmldb.findXmlNode(t),f=s(a||e.xmlRoot);this.dragdata.indicator&&(u=this.dragdata.indicator.style.top,this.dragdata.indicator.style.top="10000px");if(!f&&e&&e.$dragover){var l=(a||e.xmlRoot).parentNode,c;l&&(c=apf.xmldb.findHtmlNode(l,e))&&(o=!0,f=s(l),t=c)}if(f)if(e.dispatchEvent("dragdrop",apf.extend({candrop:f,htmlEvent:r,top:u},this.dragdata))===!1)f=!1;else{if(!e.xmlRoot){var h=e.getModel?e.getModel(!0):apf.nameserver.get("model",e.model);return h&&h.load(this.dragdata.data[0]),!0}var p=f[1]&&f[1].action||(e.$isTreeArch?"tree-append":"list-append");p=="list-append"&&!e.$isTreeArch&&e==this.dragdata.host&&(f=!1)}this.dragdata.indicator&&(this.dragdata.indicator.style.top=u);if(!f)return this.dragout(e,r),!1;if(e.$dragDrop){var d=e.$dragDrop(f[0],this.dragdata.data,f[1],p,o||f[0]==e.xmlRoot,this.dragdata.rules,r);this.dragdata.resultNode=d}return e.$dragdrop&&e.$dragdrop(t,apf.extend({htmlEvent:r,xmlNode:d},this.dragdata),f),this.last=null,this.lastFel=null,!0},onmousemove:function(e){if(!apf.DragServer.dragdata)return;e=e||window.event;var t=apf.DragServer.dragdata,n={clientX:e.pageX?e.pageX-window.pageXOffset:e.clientX,clientY:e.pageY?e.pageY-window.pageYOffset:e.clientY};if(!t.started&&Math.abs(apf.DragServer.coordinates.clientX-n.clientX)<6&&Math.abs(apf.DragServer.coordinates.clientY-n.clientY)<6)return;t.started||(t.host.$dragstart&&t.host.$dragstart(null,t),t.started=!0);if(t.indicator){var r=t.indicator.style.top;t.indicator.style.display="block",t.indicator.style.top="10000px"}apf.DragServer.dragdata.x=e.pageX?e.pageX-(apf.isIE?0:window.pageXOffset):n.clientX,apf.DragServer.dragdata.y=e.pageY?e.pageY-(apf.isIE?0:window.pageYOffset):n.clientY;var i=document.elementFromPoint(apf.DragServer.dragdata.x,apf.DragServer.dragdata.y);i||(i=document.elementFromPoint(apf.DragServer.dragdata.x,apf.DragServer.dragdata.y)),t.indicator&&(t.indicator.style.top=r),t.host.$moveDragIndicator(n);var s=apf.findHost(i);s?apf.DragServer.dragover(s,i,e):apf.DragServer.last&&apf.DragServer.dragout(apf.DragServer.last,e),apf.DragServer.lastTime=(new Date).getTime()},onmouseup:function(e){e=e||window.event;var t={clientX:e.pageX?e.pageX-window.pageXOffset:e.clientX,clientY:e.pageY?e.pageY-window.pageYOffset:e.clientY};if(!apf.DragServer.dragdata.started&&Math.abs(apf.DragServer.coordinates.clientX-t.clientX)<6&&Math.abs(apf.DragServer.coordinates.clientY-t.clientY)<6){apf.DragServer.stop(!0,null,e);return}var n=apf.DragServer.dragdata.indicator,r=n.style.top;n&&(n.style.top="10000px"),apf.DragServer.dragdata.x=e.pageX?e.pageX-(apf.isIE?0:window.pageXOffset):t.clientX,apf.DragServer.dragdata.y=e.pageY?e.pageY-(apf.isIE?0:window.pageYOffset):t.clientY;var i=document.elementFromPoint(apf.DragServer.dragdata.x,apf.DragServer.dragdata.y);i||(i=document.elementFromPoint(apf.DragServer.dragdata.x,apf.DragServer.dragdata.y)),n.style.top=r;var s=apf.findHost(i);apf.DragServer.host&&s!=apf.DragServer.host&&apf.DragServer.dragout(apf.DragServer.host,e);var o=apf.DragServer.dragdrop(s,i,apf.DragServer.dragdata.host,e);apf.DragServer.stop(!0,o,e)}},apf.MultiselectDragDrop=function(){this.diffX=this.diffY=0,this.multiple=!1,this.lastDragNode=null,this.lastel=null,this.$showDragIndicator=function(e,t){var n=t.originalTarget||t.srcElement||t.target;this.multiple=e.length>1;if(this.multiple)this.diffX=t.scrollX,this.diffY=t.scrollY;else{var r=apf.xmldb.findHtmlNode(e[0],this);this.diffX=-1*(t.offsetX-parseInt(apf.getStyleRecur(r,"padding-left").replace(/px$/,"")-10)),this.diffY=-1*t.offsetY}var i=this.oDrag.className.split(" ")[0];this.$setStyleClass(this.oDrag,(this.multiple?i+"_multiple":"")+(this["class"]?" "+this["class"]:""),[i+"_multiple"]);if(this.multiple)return document.body.appendChild(this.oDrag),this.oDrag;if(this.localName=="datagrid"){this.lastDragNode&&apf.destroyHtmlNode(this.lastDragNode),e=this.$selected||this.$caret;var s=e.cloneNode(!0);s.removeAttribute("onmousedown"),s.onmousedown=null,s.removeAttribute("onmouseup"),s.onmouseup=null,s.removeAttribute("onmouseout"),s.onmouseout=null,s.removeAttribute("ondblclick"),s.ondblclick=null,document.body.appendChild(s),s.style.position="absolute",s.style.width=e.offsetWidth+"px",s.style.display="none",s.removeAttribute("id"),this.$setStyleClass(s,"draggrid");var o=e.childNodes,u=s.childNodes;for(var a=o.length-1;a>=0;a--)u[a].nodeType==1&&(u[a].style.width=apf.getStyle(o[a],"width"));return this.lastDragNode=s}var e=this.$selected||this.$caret,f=apf.getStyle(this.oDrag,"width");if(!e)return;if(!f||f=="auto")this.oDrag.style.width=e.offsetWidth-apf.getWidthDiff(this.oDrag)+"px";return this.$updateNode(this.selected,this.oDrag),apf.window.zManager.set("drag",this.oDrag),this.oDrag},this.$hideDragIndicator=function(e){var t=this.lastDragNode||this.oDrag,n=this;if(!this.multiple&&!e&&t.style.display=="block"){if(!this.$selected&&!this.$caret)return;var r=apf.getAbsolutePosition(this.$selected||this.$caret);apf.tween.multi(t,{anim:apf.tween.easeInOutCubic,steps:apf.isIE?15:20,interval:15,tweens:[{type:"left",from:t.offsetLeft,to:r[0]+parseInt(apf.getStyleRecur(this.$selected,"padding-left").replace(/px$/,""))},{type:"top",from:t.offsetTop,to:r[1]}],onfinish:function(){n.lastDragNode?(apf.destroyHtmlNode(n.lastDragNode),n.lastDragNode=null):n.oDrag.style.display="none"}})}else this.lastDragNode?(apf.destroyHtmlNode(this.lastDragNode),this.lastDragNode=null):this.oDrag.style.display="none"},this.$moveDragIndicator=function(e){var t=this.lastDragNode||this.oDrag;t.style.left=e.clientX+this.diffX+"px",t.style.top=e.clientY+this.diffY+(this.multiple?15:0)+"px"},this.addEventListener("$skinchange",function(){this.$initDragDrop()}),this.$initDragDrop=function(){if(!this.$hasLayoutNode("dragindicator"))return;this.oDrag=apf.insertHtmlNode(this.$getLayoutNode("dragindicator"),document.body),apf.window.zManager.set("drag",this.oDrag),this.oDrag.style.position="absolute",this.oDrag.style.cursor="default",this.oDrag.style.display="none"},this.$findValueNode=function(e){if(!e)return null;while(e&&e.nodeType==1&&!e.getAttribute(apf.xmldb.htmlIdTag))this.$isTreeArch&&e.previousSibling&&e.previousSibling.nodeType==1?e=e.previousSibling:e=e.parentNode;return e&&e.nodeType==1&&e.getAttribute(apf.xmldb.htmlIdTag)?e:null},this.$dragout=function(e,t,n){this.lastel&&this.$setStyleClass(this.lastel,"",["dragDenied","dragInsert","dragAppend","selected","indicate"]);var r=this.$getSelection(!0);for(var i=0,s=r.length;i<s;i++)this.$setStyleClass(r[i],"selected",["dragDenied","dragInsert","dragAppend","indicate"]);this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Drop"]),this.lastel=null},this.$dragdrop||(this.$dragdrop=this.$dragout),this.$dragover=function(e,t,n){this.$setStyleClass(this.$ext,this.$baseCSSname+"Drop");var r=this.$getSelection(!0);for(var i=0,s=r.length;i<s;i++)this.$setStyleClass(r[i],"",["dragDenied","dragInsert","dragAppend","selected","indicate"]);this.lastel&&this.$setStyleClass(this.lastel,"",["dragDenied","dragInsert","dragAppend","selected","indicate"]);var o=n[1]&&n[1].action;this.lastel=this.$findValueNode(e);if(this.$isTreeArch&&o=="list-append"){var u=apf.xmldb.findHtmlNode(this.getTraverseParent(apf.xmldb.getNode(this.lastel)),this);this.lastel=u?this.$getLayoutNode("item","container",u):this.$container,this.$setStyleClass(this.lastel,"dragInsert")}else this.$setStyleClass(this.lastel,n?o=="insert-before"?"dragInsert":"dragAppend":"dragDenied")}},apf.StandardDragDrop=function(){this.$showDragIndicator=function(e,t){var n=t.offsetX+22,r=t.offsetY;this.oDrag.startX=n,this.oDrag.startY=r,document.body.appendChild(this.oDrag);var i=this.$getLayoutNode("main","caption",this.oDrag);return i.nodeType!=1&&(i=i.parentNode),i.innerHTML=this.$applyBindRule("caption",this.xmlRoot)||"",this.oDrag},this.$hideDragIndicator=function(){this.oDrag.style.display="none"},this.$moveDragIndicator=function(e){this.oDrag.style.left=e.clientX-this.oDrag.startX+document.documentElement.scrollLeft+"px",this.oDrag.style.top=e.clientY-this.oDrag.startY+document.documentElement.scrollTop+"px"},this.$initDragDrop=function(){if(!this.getAttribute("drag"))return;this.oDrag=document.body.appendChild(this.$ext.cloneNode(!0)),apf.window.zManager.set("drag",this.oDrag),this.oDrag.style.position="absolute",this.oDrag.style.cursor="default",this.oDrag.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=50)",this.oDrag.style.MozOpacity=.5,this.oDrag.style.opacity=.5,this.oDrag.style.display="none"}},apf.DragServer.Init(),apf.__FOCUSSABLE__=1<<26,apf.Focussable=function(){this.$regbase=this.$regbase|apf.__FOCUSSABLE__,this.disabled==undefined&&(this.disabled=!1),this.setTabIndex=function(e){return apf.window.$removeFocus(this),apf.window.$addFocus(this,e),this},this.focus=function(e,t,n){return e?(this.$focus&&!this.editable&&(!t||!t.mouse||this.$focussable==apf.KEYBOARD_MOUSE)&&this.$focus(t),this.dispatchEvent("focus",apf.extend({bubbles:!0},t)),this):(this.$isWindowContainer>-1?apf.window.$focusLast(this,t,!0):apf.window.$focus(this,t),this)},this.blur=function(e,t){return t&&!apf.isChildOf(t.fromElement,t.toElement)&&apf.popup.isShowing(this.$uniqueId)&&apf.popup.forceHide(),this.$blur&&this.$blur(t),e||apf.window.$blur(this),this.dispatchEvent("blur",apf.extend({bubbles:!t||!t.cancelBubble},t)),this},this.hasFocus=function(){return apf.document.activeElement==this||this.$isWindowContainer&&(apf.document.activeElement||{}).$focusParent==this}},apf.__INTERACTIVE__=1<<21,apf.Interactive=function(){function P(n,r){n||(n=event);if(!r&&(!N.draggable||apf.dragMode))return;O=!1;if(N.dispatchEvent("beforedragstart",{htmlEvent:n})===!1)return;apf.dragMode=!0,r?(N.dispatchEvent("beforedrag"),A=!0):A=!1,apf.popup.forceHide(),C="absolute|fixed".indexOf(apf.getStyle(N.$ext,"position"))>-1,C||(N.$ext.style.position=C?"absolute":"relative"),N.editable&&(C=!0),C&&!N.aData&&apf.plane.show(O?J:N.$ext,n.reappend);var i=(r||J&&J.self)&&O?J:N.$ext,s=C?apf.getAbsolutePosition(i,i.offsetParent,!0):[parseInt(apf.getStyle(i,"left"))||0,parseInt(apf.getStyle(i,"top"))||0];return D=[i.style.left,i.style.top,i.style.right,i.style.bottom,i.style.width,i.style.height],e=s[0]-(k=n.clientX),t=s[1]-(L=n.clientY),r||J&&J.self||(N.$ext.style.right&&(N.$ext.style.left=s[0]+"px",N.$ext.style.right=""),N.$ext.style.bottom&&(N.$ext.style.top=s[1]+"px",N.$ext.style.bottom="")),document.onmousemove=H,document.onmouseup=function(e,t){document.onmousemove=document.onmouseup=null,C&&!N.aData&&apf.plane.hide();var n=O?J:N.$ext;if(A&&!N.$multidrag)if(t){var r=N.$ext;r.style.left=D[0],r.style.top=D[1],r.style.right=D[2],r.style.bottom=D[3],r.style.width=D[4],r.style.height=D[5],N.dispatchEvent&&N.dispatchEvent("dragcancel",{htmlNode:n,htmlEvent:e})}else N.setProperty?j():O&&(N.$ext.style.left=o+"px",N.$ext.style.top=u+"px");o=u=d=v=null,C||(N.$ext.style.position="relative"),N.showdragging&&apf.setStyleClass(N.$ext,"",["dragging"]),C&&O&&!J.self&&(J.style.display="none"),apf.dragMode=!1,!t&&N.dispatchEvent&&A&&N.dispatchEvent("afterdrag",{htmlNode:n,htmlEvent:e})},r&&document.onmousemove(n),!1}function H(n){n||(n=event),!A&&N.showdragging&&apf.setStyleClass(N.$ext,"dragging");var r=n.clientX-k,i=n.clientY-L,s;if(!A&&(s=r*r>i*i?r:i)*s<2)return;if(!A){O&&J.style.display!="block"&&(J.style.display="block");if(N.dispatchEvent&&N.dispatchEvent("beforedrag",{htmlEvent:n})===!1){document.onmouseup();return}}var a=O?J:N.$ext;a.style.left=(o=n.clientX+e)+"px",a.style.top=(u=n.clientY+t)+"px";if(N.realtime){var f=N.$stick={};N.$showDrag(o,u,a,n,f),typeof f.l!="undefined"&&(o=f.l,a.style.left=o+"px"),typeof f.t!="undefined"&&(u=f.t,a.style.top=u+"px")}A=!0}function B(e,t){e||(e=event);if(!N.resizable||String(N.height).indexOf("%")>-1&&N.parentNode.localName=="vbox"||String(N.width).indexOf("%")>-1&&N.parentNode.localName=="hbox")return;M=!1;var a=N.$ext;if(!M){var f=apf.getDiff(a);T=f[0],x=f[1]}i=apf.getAbsolutePosition(a),i.push(a.offsetWidth),i.push(a.offsetHeight),_=apf.getAbsolutePosition(a,a.offsetParent,!0),D=[a.style.left,a.style.top,a.style.right,a.style.bottom,a.style.width,a.style.height];var w=0,E=0,S=(k=e.clientX)-i[0]+w+document.documentElement.scrollLeft,O=(L=e.clientY)-i[1]+E+document.documentElement.scrollTop,P;t&&t.resizeType?(C="absolute|fixed".indexOf(apf.getStyle(a,"position"))>-1,P=t.resizeType):P=W.call(a,S,O),n=S,r=O;if(!P)return;if(N.dispatchEvent&&N.dispatchEvent("beforeresize",{type:P,setType:function(e){P=e}})===!1)return;apf.popup.forceHide(),apf.dragMode=!0,A=!1,m=P.indexOf("w")>-1,g=P.indexOf("n")>-1,y=P.indexOf("e")>-1,b=P.indexOf("s")>-1,N.minwidth||(N.minwidth=0),N.minheight||(N.minheight=0),N.maxwidth||(N.maxwidth=1e4),N.maxheight||(N.maxheight=1e4),C&&(l=_[0]+i[2],c=_[1]+i[3],h=_[0]+i[2],p=_[1]+i[3]),C&&apf.plane.show(M?J:a);var H;a.style.right&&(a.style.left=_[0]+"px"),a.style.bottom&&(a.style.top=_[1]+"px");if(!t||!t.nocursor)s===null&&(s=document.body.style.cursor),document.body.style.cursor=$(P)+"-resize";return document.onmousemove=U,document.onmouseup=function(e,t){document.onmousemove=document.onmouseup=null,C&&apf.plane.hide(),clearTimeout(R);if(M){var n=apf.getDiff(N.$ext);T=n[0],x=n[1]}if(t){var r=N.$ext;r.style.left=D[0],r.style.top=D[1],r.style.right=D[2],r.style.bottom=D[3],r.style.width=D[4],r.style.height=D[5],N.dispatchEvent&&N.dispatchEvent("resizecancel")}else z(e||event,!0);N.setProperty&&j(),document.body.style.cursor=s||"",s=null,M&&(J.style.display="none"),apf.dragMode=!1,!t&&N.dispatchEvent&&N.dispatchEvent("afterresize",{l:o,t:u,w:d+T,h:v+x}),o=u=d=v=null},!1}function j(e,t,n,r,i,s,a,f){typeof e=="undefined"?(e=o,t=u,n=d,r=v,s=x,i=T):C=!0;var l=N.left||N.left===0,c=N.right||N.right===0,h=N.bottom||N.bottom===0,p=N.top||N.top===0;if(C){var m=J&&J.style.display=="block"?J:N.$ext;c&&!a&&a!==0&&(a=apf.getHtmlRight(m)),h&&!f&&f!==0&&(f=apf.getHtmlBottom(m)),c&&(N.setProperty("right",a,0,N.editable),N.left||(m.style.left="")),h&&(N.setProperty("bottom",f,0,N.editable),N.top||(m.style.top="")),(e||e===0)&&(!c||l)&&N.setProperty("left",e,0,N.editable),(t||t===0)&&(!h||p)&&N.setProperty("top",t,0,N.editable)}i!=undefined&&n&&(!l||!c)&&N.setProperty("width",n+i,0,N.editable),s!=undefined&&r&&(!p||!h)&&N.setProperty("height",r+s,0,N.editable)}function U(e){e||(e=event),clearTimeout(R);if(q&&(new Date).getTime()-q<(M?6:apf.mouseEventBuffer)){var t={clientX:e.clientX,clientY:e.clientY};R=$setTimeout(function(){z(t)},10);return}q=(new Date).getTime(),z(e)}function z(e,t){var s=M&&!t?J:N.$ext,a=document.documentElement.scrollLeft,f=document.documentElement.scrollTop;m&&(C&&(s.style.left=(o=I(h-N.maxwidth,F(l-N.minwidth,_[0]+e.clientX-k+a)))+"px"),s.style.width=(d=F(N.maxwidth-T,I(T,N.minwidth,i[2]-(e.clientX-k)+a)-T))+"px"),g&&(C&&(s.style.top=(u=I(p-N.maxheight,F(c-N.minheight,_[1]+e.clientY-L+f)))+"px"),s.style.height=(v=F(N.maxheight-x,I(x,N.minheight,i[3]-(e.clientY-L)+f)-x))+"px"),y&&(s.style.width=(d=F(N.maxwidth-T,I(T,N.minwidth,e.clientX-i[0]+(i[2]-n)+a)-T))+"px"),b&&(s.style.height=(v=F(N.maxheight-x,I(x,N.minheight,e.clientY-i[1]+(i[3]-r)+f)-x))+"px"),N.parentNode&&N.parentNode.localName=="table"&&(j(),apf.layout.processQueue());if(N.realtime){var w=N.$stick={};N.$showResize(o||apf.getHtmlLeft(s),u||apf.getHtmlTop(s),d&&d+T||s.offsetWidth,v&&v+x||s.offsetHeight,e,w,m,g,y,b),C&&m&&typeof w.l!="undefined"&&(s.style.left=(o=I(h-N.maxwidth,F(l-N.minwidth,w.l)))+"px"),C&&g&&typeof w.t!="undefined"&&(s.style.top=(u=I(p-N.maxheight,F(c-N.minheight,w.t)))+"px"),typeof w.w!="undefined"&&(s.style.width=(d=F(N.maxwidth-T,I(T,N.minwidth,w.w)-T))+"px"),typeof w.h!="undefined"&&(s.style.height=(v=F(N.maxheight-x,I(x,N.minheight,w.h)-x))+"px")}apf.hasSingleRszEvent&&apf.layout.forceResize(N.$int)}function W(e,t){var n="",r="";C="absolute|fixed".indexOf(apf.getStyle(N.$ext,"position"))>-1;if(N.resizable=="true"||N.resizable=="vertical"||N.resizable.indexOf("top")>-1||N.resizable.indexOf("bottom")>-1)t<w+S[0]&&N.resizable.indexOf("bottom")==-1?n=C?"n":"":t>this.offsetHeight-(E||w)&&N.resizable.indexOf("top")==-1&&(n="s");if(N.resizable=="true"||N.resizable=="horizontal"||N.resizable.indexOf("left")>-1||N.resizable.indexOf("right")>-1)e<(n?E:w)+S[0]&&N.resizable.indexOf("right")==-1?n+=r+(C?"w":""):e>this.offsetWidth-(n||r?E:w)&&N.resizable.indexOf("left")==-1&&(n+=r+"e");return n}function V(e){e||(e=event);if(!N.resizable||N.editable||document.onmousemove)return;var t=apf.getAbsolutePosition(N.$ext),n=0,r=0,i=e.clientX-t[0]+n+document.documentElement.scrollLeft,s=e.clientY-t[1]+r+document.documentElement.scrollTop;X||(X=apf.getStyle(this,"cursor"));var o=W.call(N.$ext,i,s);this.style.cursor=o?$(o)+"-resize":X||"default"}function $(e){var t=e;if(apf.isWebkit)if(e=="se"||e=="nw")t="nwse";else if(e=="sw"||e=="ne")t="nesw";else if(e=="s"||e=="n")t="ns";else if(e=="e"||e=="w")t="ew";return t}var e,t,n,r,i,s=null,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N=this,C,k,L,A,O,M,_,D;this.$regbase=this.$regbase|apf.__INTERACTIVE__,this.$dragStart=function(e,t){var n=e||event;if(!t&&n.button==2)return;P.apply(n.srcElement||this,arguments)},this.$propHandlers.draggable=function(e){apf.isFalse(e)?this.draggable=e=!1:apf.isTrue(e)&&(this.draggable=e=!0);var t=this.editable?this.$ext:this.oDrag||this.$ext;e?apf.addListener(t,"mousedown",this.$dragStart):apf.removeListener(t,"mousedown",this.$dragStart);if(t.interactive&1)return;t.interactive=(t.interactive||0)+1},this.$propHandlers.resizable=function(e){apf.isFalse(e)?this.resizable=!1:apf.isTrue(e)&&(this.resizable="true"),this.$ext.style.cursor="";var t=this.oResize||this.$ext;if(t.interactive&2)return;N.editable||(apf.addListener(t,"mousedown",function(){B.apply(t,arguments)}),apf.addListener(t,"mousemove",function(){V.apply(t,arguments)})),t.interactive=(t.interactive||0)+2,w=this.$getOption&&parseInt(this.$getOption("Main","resize-border"))||3,E=this.$getOption&&parseInt(this.$getOption("Main","resize-corner"))||12,S=apf.getBox(apf.getStyle(this.$ext,"borderWidth"))},this.$cancelInteractive=function(){document.onmouseup(null,!0)},this.$resizeStart=B,this.$updateProperties=j;var F=Math.min,I=Math.max,q,R,X,J},apf.GuiElement.propHandlers.resizable=function(e){this.implement(apf.Interactive),this.$propHandlers.resizable.apply(this,arguments)},apf.GuiElement.propHandlers.draggable=function(e){this.implement(apf.Interactive),this.$propHandlers.draggable.apply(this,arguments)},apf.Init.run("interactive"),apf.__MEDIA__=1<<20,apf.__MULTICHECK__=1<<22,apf.MultiCheck=function(){this.$regbase=this.$regbase|apf.__MULTICHECK__,this.multicheck=!0,this.checklength=0,this.$checkedList=[],this.check=function(e,t){if(t&&this.disabled||this.$checkedList.indexOf(e)>-1)return;if(t&&this.$executeSingleValue("check","checked",e,"true")!==!1)return;if(this.dispatchEvent("beforecheck",{xmlNode:e})===!1)return!1;!this.multicheck&&this.$checkedList.length&&this.clearChecked(!0),this.$checkedList.push(e),this.$setStyleClass(apf.xmldb.getHtmlNode(e,this),"checked",["partial"]),this.dispatchEvent("aftercheck",{list:this.$checkedList,xmlNode:e})},this.uncheck=function(e,t){if(t&&this.disabled||this.$checkedList.indexOf(e)==-1)return;if(t&&this.$executeSingleValue("check","checked",e,"false")!==!1)return;if(this.dispatchEvent("beforeuncheck",{xmlNode:e})===!1)return!1;this.$checkedList.remove(e),this.$setStyleClass(apf.xmldb.getHtmlNode(e,this),"",["checked","partial"]),this.dispatchEvent("afteruncheck",{list:this.$checkedList,xmlNode:e})},this.checkToggle=function(e,t){if(t&&this.disabled)return;if(e.style){var n=e,r=n.getAttribute(apf.xmldb.htmlIdTag);while(!r&&n.parentNode)r=(n=n.parentNode).getAttribute(apf.xmldb.htmlIdTag);e=apf.xmldb.getNode(n)}this.$checkedList.indexOf(e)>-1?this.uncheck(e,t):this.check(e,t)},this.checkList=function(e,t,n,r,i){e.indexOf||(e=apf.getArrayFromNodelist(e));if(i){if(this.disabled)return;var s=[];for(var o,u=0;u<e.length;u++){o=this.$executeSingleValue("check","checked",e[u],t?"false":"true",!0);if(o===!1)break;s.push(o)}if(s.length)return this.$executeAction("multicall",s,"checked",e[0],null,null,e.length>1?e:null)}if(i&&this.disabled)return;if(!r&&this.dispatchEvent("beforecheck",{list:e})===!1)return!1;!t&&!n&&this.clearChecked(!0),this.multicheck||(e=[e[0]]);var u;if(t)for(u=e.length-1;u>=0;u--)this.$checkedList.remove(e[u]),this.$setStyleClass(apf.xmldb.getHtmlNode(e[u],this),"",["checked"]);else for(u=e.length-1;u>=0;u--)this.$checkedList.push(e[u]),this.$setStyleClass(apf.xmldb.getHtmlNode(e[u],this),"checked");r||this.dispatchEvent("aftercheck",{list:e})},this.clearChecked=function(e){if(!e&&this.dispatchEvent("beforeuncheck",{xmlNode:this.$checkedList})===!1)return!1;for(var t=this.$checkedList.length-1;t>=0;t--)this.$setStyleClass(apf.xmldb.getHtmlNode(this.$checkedList[t],this),"",["checked"]);this.$checkedList.length=0,e||this.dispatchEvent("afteruncheck",{list:this.$checkedList})},this.isChecked=function(e){return this.$checkedList.indexOf(e)>-1},this.getChecked=function(e){var t,n;if(e){n=this.xmlRoot?this.xmlRoot.ownerDocument.createDocumentFragment():apf.getXmlDom().createDocumentFragment();for(t=0;t<this.$checkedList.length;t++)apf.xmldb.cleanNode(n.appendChild(this.$checkedList[t].cloneNode(!0)))}else for(n=[],t=0;t<this.$checkedList.length;t++)n.push(this.$checkedList[t]);return n},this.checkAll=function(e){if(!this.multicheck||e&&this.disabled||!this.xmlRoot)return;var t=this.$isTreeArch?this.xmlRoot.selectNodes(".//"+this.each.split("|").join("|.//")):this.getTraverseNodes();this.checkList(t)},this.addEventListener("beforeload",function(){this.$hasBindRule("checked")||this.clearChecked(!0)}),this.addEventListener("afterload",function(){!this.$hasBindRule("checked")&&this.$checkedList.length&&this.checkList(this.$checkedList,!1,!0,!1)}),this.addEventListener("xmlupdate",function(e){if(e.action=="attribute"||e.action=="text"||e.action=="synchronize"||e.action=="update"){var t=apf.isTrue(this.$applyBindRule("checked",e.xmlNode)),n=this.isChecked(e.xmlNode);t!=n&&(t?this.check(e.xmlNode):this.uncheck(e.xmlNode))}}),this.addEventListener("aftercheck",function(){this.checklength!=this.$checkedList.length&&this.setProperty("checklength",this.$checkedList.length)}),this.addEventListener("afteruncheck",function(){this.checklength!=this.$checkedList.length&&this.setProperty("checklength",this.$checkedList.length)})},apf.Teleport=function(){this.$init(!0)},apf.__TELEPORT__=1<<28,function(){this.$parsePrio="002",this.$regbase=this.$regbase|apf.__TELEPORT__,this.$booleanProperties.autoroute=!0,this.$supportedProperties.push("url","timeout","protocol","route-server","autoroute"),this.$propHandlers.url=function(e){var t=new apf.url(e);if(!t.protocol)return apf.console.error(apf.formatErrorString(0,this,"Communication (Teleport) initialization error","Invalid server url provided: '"+e+"'"));this.$host=t.host,this.$rootPath=t.path,this.$server=e.replace(new RegExp(this.$rootPath+"$"),"")},this.$propHandlers.timeout=function(e){this.timeout=parseInt(e)||1e4},this.$propHandlers.protocol=function(e){var t=e.toLowerCase();if(!apf[t])throw new Error(apf.formatErrorString(1025,null,"Teleport baseclass","Could not find Ajax.org Teleport RPC Component '"+t+"'",this));this.implement(apf[t])},this.toString=function(){return"[Ajax.org Teleport Component : "+(this.name||"")+" ("+this.type+")]"},this.addEventListener("DOMNodeInsertedIntoDocument",function(){var e;this.type&&this.type=="socket"?apf.socket?this.implement(apf.socket):e="Socket":apf.http?this.implement(apf.http):e="HTTP";if(e)throw new Error(apf.formatErrorString(1024,null,"Teleport baseclass","Could not find Ajax.org Teleport "+e+" Component",this.$aml));this.id&&(apf.$asyncObjects[this.id]=1)})}.call(apf.Teleport.prototype=new apf.AmlElement),apf.Init.run("teleport"),apf.__TRANSACTION__=8,apf.__VIRTUALVIEWPORT__=1<<19,apf.VirtualViewport=function(){this.$init(!0),this.$regbase=this.$regbase|apf.__VIRTUALVIEWPORT__,this.virtualVTimer=null,this._xmlUpdate=this.$xmlUpdate,apf.setStyleClass(this.$ext,"virtual"),this.$deInitNode=function(e,t){this.$viewport.redraw()},this.$moveNode=function(e,t){this.$viewport.redraw()},this.emptyNode=apf.xmldb.getXml("<empty />"),this.$addEmpty=this.$add,this.$add=function(e,t,n,r,i){var s=this.$pHtmlDoc.getElementById(t);if(!s)return;this.$updateNode(e,s)},this.$fill=function(){},this.clear=function(e,t){this.clearSelection&&this.clearSelection(!t);if(typeof e=="string"){var n=e;e=!1,this[n+"-message"]||this.$setInheritedAttribute(n+"-message")}e?this.$removeClearMessage&&this.$removeClearMessage():(this.$viewport.offset=0,this.$viewport.length=0,this.$viewport.resize(0),this.$viewport.sb&&this.$viewport.sb.$update(),this.$setClearMessage&&this.$setClearMessage(n?this[n+"-message"]:this["empty-message"],n||"empty")),this.$viewport.cache=null};var e=this;this.$viewport=new apf.$viewportVirtual(this),this.getViewport=function(){return this.$viewport},this.$isInViewport=function(e,t){var n=this.getTraverseNodes();for(var r=0,i=n.length;r<i;r++)if(n[r]==e)return!0;return!1},this.scrollTo=function(e,t){var n={};this.$isInViewport(e,n),this.$viewport.change(n.position+(t?this.$viewport.limit-1:0))},this.getFirstTraverseNode=function(e){return this.getTraverseNodes(e)[0]},this.$xmlUpdate=function(){this.$viewport.cache=null,this.$viewport.length=this.xmlRoot.selectNodes(this.each).length,this.$viewport.sb.$update(this.$container),this._xmlUpdate.apply(this,arguments)},this.$load=function(e){apf.xmldb.addNodeListener(e,this),this.$updateTraverseCache(e,!0);if(!this.renderRoot&&!this.$cachedTraverseList.length)return this.clear();this.$viewport.cache=null,this.$viewport.offset=0,this.$viewport.length=this.$cachedTraverseList.length,this.$viewport.length<this.$viewport.limit&&this.$viewport.resize(this.$viewport.length),this.$viewport.prepare();var t=this.$addNodes(e,null,null,this.renderRoot);if(this.selectable)if(this.autoselect)t.length?this.$selectDefault(e):this.setProperty("selected",null);else{this.clearSelection(!0);var n=this.getFirstTraverseNode();n&&this.setCaret(n),this.setProperty("selected",null),this.setProperty("chosen",null)}this.$focussable&&(apf.window.hasFocus(this)?this.$focus():this.$blur()),this.$viewport.setScrollTop(0,!0)},this.$loadSubData=function(){},this.$updateTraverseCache=function(e,t){if(t||!this.$cachedTraverseList||this.$cachedTraverseList.name!=this.each)this.$cachedTraverseList=(e||this.xmlRoot).selectNodes(this.each),this.$cachedTraverseList.name=this.each};var t=this.getTraverseNodes=function(e){if(!this.xmlRoot)return;if(this.$viewport.cache)return this.$viewport.cache;this.$updateTraverseCache(e);var t=this.$viewport.offset,n=Math.min(this.$cachedTraverseList.length,t+this.$viewport.limit),r=[];for(var i=t;i<n;i++)r.push(this.$cachedTraverseList[i]);return this.$sort?this.$sort.apply(r):r},n=this.getNextTraverseSelected;this.getNextTraverseSelected=function(e,r,i){e||(e=this.selected),i||(i=1),this.getTraverseNodes=apf.MultiselectBinding.prototype.getTraverseNodes;var s=n.call(this,e,r,i);return this.getTraverseNodes=t,s},this.caching=!1},apf.$viewportVirtual=function(e){this.amlNode=e;var t=this;this.amlNode.addEventListener("mousescroll",function(e){if(!t.scrollbar||t.scrollbar.horizontal)return;if(e.returnValue===!1)return;var n=t.getScrollHeight()-t.getHeight();n&&(t.setScrollTop(t.getScrollTop()+ -1*e.delta*Math.min(45,t.getHeight()/10),!1,!0),e.preventDefault())}),apf.addListener(this.$getHtmlHost(),"scroll",function(){t.setScrollTop(t.getScrollTop())}),e.addEventListener("resize",function(){t.$findNewLimit()}),e.addEventListener("afterload",function(){var e=t.$getItemHeight();t.$findNewLimit(),e==1e3&&t.$findNewLimit()}),e.scrollbar||(this.sb=new apf.scrollbar,this.sb.parentNode=(new apf.Class).$init(),this.sb.parentNode.$container=e.$pHtmlNode,this.sb.parentNode.$int=e.$pHtmlNode,this.sb.dispatchEvent("DOMNodeInsertedIntoDocument"),this.sb.attach(this))},function(){this.offset=0,this.limit=2,this.length=0,this.host=this,this.cache=null,this.inited=!1,this.virtual=!0,this.setScrollbar=function(e,t){this.scrollbar=e,this.amlNode.addEventListener("scroll",t)},this.isVisible=function(){var e=this.$getHtmlHost();return e.offsetHeight||e.offsetWidth?!0:!1},this.focus=function(){this.amlNode.focus&&this.amlNode.$isWindowContainer!==!0&&this.amlNode.focus()},this.getScrollTop=function(){var e=this.$getHtmlHost();return this.offset*this.$getItemHeight()+e.scrollTop},this.getScrollLeft=function(){var e=this.$getHtmlHost();return e.scrollLeft},this.getScrollHeight=function(){return this.length*this.$getItemHeight()},this.getScrollWidth=function(){var e=this.$getHtmlHost();return apf.isIE&&e.lastChild?e.lastChild.offsetLeft+e.lastChild.offsetWidth+apf.getBox(apf.getStyle(e,"padding"))[1]+(parseInt(apf.getStyle(e,"marginRight"))||0):e.scrollWidth},this.getHeight=function(){var e=this.$getHtmlHost();return e.tagName=="HTML"||e.tagName=="BODY"?apf.getWindowHeight():apf.getHtmlInnerHeight(e)},this.getWidth=function(){var e=this.$getHtmlHost();return e.tagName=="HTML"||e.tagName=="BODY"?apf.getWindowHeight():apf.getHtmlInnerWidth(e)},this.setScrollTop=function(e,t,n){var r=this.$getHtmlHost(),i=this.$getItemHeight();this.change(Math.floor(e/i)),r.scrollTop=e-this.offset*i,t||this.amlNode.dispatchEvent("scroll",{direction:"vertical",byUser:n,viewport:this,scrollbar:this.scrollbar})},this.setScrollLeft=function(e,t,n){var r=this.$getHtmlHost();r.scrollLeft=e,t||this.amlNode.dispatchEvent("scroll",{direction:"horizontal",byUser:n,viewport:this,scrollbar:this.scrollbar})},this.scrollIntoView=function(e,t){var n=this.amlNode,r=apf.xmldb.findHtmlNode(e,n);if(r&&r.offsetTop-n.$container.scrollTop>0&&r.offsetTop+r.offsetHeight-n.$container.scrollTop<n.$container.offsetHeight)return;this.amlNode.$sharedScrollbarMove&&this.amlNode.$sharedScrollbarMove();var i=apf.getChildNumber(e,apf.MultiselectBinding.prototype.getTraverseNodes.call(n)),s=this.$getItemHeight();this.setScrollTop(i*s+(t?s-this.getHeight():0))},this.$getItemHeight=function(){if(this.amlNode.each&&this.amlNode.xmlRoot){var e=this.amlNode.getTraverseNodes();if(e.length){var t=apf.xmldb.findHtmlNode(e[0],this.amlNode);if(t)return this.$lastItemHeight=t.offsetHeight}}return this.$lastItemHeight||1e3},this.$getHtmlHost=function(){var e=this.amlNode.$int||this.amlNode.$container;return e.tagName=="BODY"||e.tagName=="HTML"?apf.isSafari||apf.isChrome?document.body:e.parentNode:e},this.draw=function(){this.inited=!0;var e=this.limit;this.limit=0,this.resize(e,!0)},this.redraw=function(){this.change(this.offset,this.limit,!0)},this.prepare=function(){this.inited||this.draw();var e=this.amlNode,t=e.getTraverseNodes();if(!t)return;var n=t.length,r=apf.xmldb.getXmlDocId(e.xmlRoot),i=e.$container.childNodes,s;for(var o=0,u=0,a=i.length;u<a;u++){if(i[u].nodeType!=1)continue;o>=n?i[u].style.display="none":(s=i[u],e.$deselect(s),s.style.display="block",apf.xmldb.nodeConnect(r,t[o],s,e)),o++}},this.resize=function(e,t){this.cache=null;var n=this.amlNode,r;if(e<this.limit){var i=n.$container.childNodes;for(r=i.length-1;r>=0;r--){if(i[r].nodeType!=1)continue;n.$container.removeChild(i[r]);if(--this.limit==e)break}}else{if(!(e>this.limit))return;for(r=this.limit;r<e;r++)n.$addEmpty(n.emptyNode,"",n.xmlRoot,n.$container)}this.limit=e,t&&this.sb&&this.sb.$update(this.$container)},this.$findNewLimit=function(){if(!this.amlNode.xmlRoot||!this.amlNode.$ext.offsetHeight)return;var e=Math.ceil(this.getHeight()/this.$getItemHeight()+2);this.amlNode.$cachedTraverseList&&this.amlNode.$cachedTraverseList.length<e&&(e=this.amlNode.$cachedTraverseList.length),e!=this.limit&&(this.resize(e),this.redraw())},this.change=function(e,t,n){var r,i=this.amlNode;e>this.length-this.limit?r=Math.floor(this.length-this.limit):r=Math.floor(e),r<0&&(r=0),t||(t=this.limit),n||(n=apf.isGecko);var s=this.getScrollTop();this.cache=null;var o=r-this.offset,u=this.limit;o*o>=this.limit*this.limit&&(o=!1),this.offset=r;if(o>0){var a=i.$container.lastChild;a.nodeType!=1&&(a=a.previousSibling)}var f=i.getTraverseNodes();if(!f||!f.length)return;f.length<this.limit&&(e>0?alert("shouldnt get here"):this.resize(f.length));var l=apf.xmldb.getXmlDocId(i.xmlRoot),c=i.$container.childNodes,h,p,d,v,m,g,y;if(o>0){d=u-o,m=c.length,v=i.$getSelection();for(g=0,y=0;g<o&&y<m;y++)p=i.$container.firstChild,p.nodeType==1&&(g++,h=f[d++],h?(apf.xmldb.nodeConnect(l,h,p,i),i.$updateNode(h,p),v.indexOf(h)>-1?i.$select(p):i.$deselect(p),p.style.display="block"):p.style.display="none"),i.$container.appendChild(p)}else if(o<0){o*=-1,d=0,v=i.$getSelection();for(g=0,y=c.length-1;g<o&&y>=0;y++)p=i.$container.lastChild,p.nodeType==1&&(g++,h=f[d++],apf.xmldb.nodeConnect(l,h,p,i),i.$updateNode(h,p),v.indexOf(h)>-1?i.$select(p):i.$deselect(p),p.style.display="block"),i.$container.insertBefore(p,i.$container.firstChild)}else if(n||o===!1){m=c.length,v=i.$getSelection();for(g=0,y=0;y<m;y++)p=c[y],p.nodeType==1&&(h=f[g++],apf.xmldb.nodeConnect(l,h,p,i),i.$updateNode(h,p),v.indexOf(h)>-1?i.$select(p):i.$deselect(p))}!i.$selected&&v&&v.length&&(i.$selected=apf.xmldb.findHtmlNode(v[0],i));var p=this.$getHtmlHost(),b=this.$getItemHeight();p.scrollTop=s-this.offset*b}}.call(apf.$viewportVirtual.prototype),apf.__XFORMS__=1<<17,apf.clipboard=(new apf.Class).$init(),apf.clipboard.store=null,apf.clipboard.empty=!0,apf.clipboard.copied=null,apf.clipboard.put=function(e){this.store=e,this.setProperty("data",e),this.setProperty("empty",e?!1:!0)},apf.clipboard.clear=function(){this.setProperty("data",null),this.setProperty("empty",!0)},apf.clipboard.get=function(){return this.store},apf.clipboard.$highlightSelection=function(e,t,n){for(var r=0,i=t.length;r<i;r++)apf.setStyleClass(apf.xmldb.getHtmlNode(t[r],e),n?"":"cut",["cut"])},apf.clipboard.copySelection=function(e){var t=this.get()||[];this.$highlightSelection(e,t,!0),this.put(e.getSelection().map(function(e){return apf.xmldb.getCleanCopy(e)})),this.copied=!0},apf.clipboard.cutSelection=function(e){var t=this.get()||[];this.$highlightSelection(e,t,!0),this.put(t=e.getSelection()),this.$highlightSelection(e,t),this.copied=!1},apf.clipboard.pasteSelection=function(e,t){var n,r=this.get();if(!r)return;t||(t=e.selected||e.getFirstTraverseNode());if(e.hasFeature(apf.__DRAGDROP__)){var i=e.isDropAllowed(apf.clipboard.data,t);if(!i)return!1;var s=i[1]&&i[1].action||(e.$isTreeArch?"tree-append":"list-append");n=r.slice(0),e.$dragDrop(t,n,i&&i[1],s,null,null,null,this.copied)}else if(r[0].parentNode)for(var o=0,u=r.length;o<u;o++)apf.xmldb.moveNode(t,r[o]);else{n=[];for(var o=0,u=r.length;o<u;o++)n[o]=apf.xmldb.appendChild(t,r[o])}this.copied||(this.$highlightSelection(e,r,!0),apf.clipboard.clear()),e.selectList(n||r)},apf.window=function(){function n(e){if(e.name=="blur"){e.srcElement!=this&&this.$blur&&this.$blur();return}e.srcElement!=this&&this.$focus&&(!e||!e.mouse||this.$focussable==apf.KEYBOARD_MOUSE)&&this.$focus();if(e.srcElement==this||e.trackedChild){e.trackedChild=!0;return}this.$lastFocussed=e.srcElement,this.localName&&this.localName.indexOf("window")>-1&&(e.trackedChild=!0)}function r(e){var t=e;do t=t.parentNode;while(t&&!t.$isWindowContainer);return t||apf.document.documentElement}function i(e){if(e&&e.currentTarget!=this)return;this.$isWindowContainer?apf.window.$tabList.pushUnique(this):apf.window.$addFocus(this,this.tabindex,!0)}function s(e){if(e&&(e.currentTarget!=this||e.$doOnlyAdmin))return;var t=this.$focusParent.$tabList,n=this.childNodes;for(var r=0,i=n.length;r<i;r++)t.remove(n[r]);apf.window.activeElement==this&&apf.window.moveNext();if(this.$isWindowContainer){apf.window.$tabList.remove(this);return}if(!this.$focusParent)return;t.remove(this)}this.$uniqueId=apf.all.push(this),this.apf=apf,this.toString=function(){return"[apf.window]"},this.getActionTracker=function(){return this.$at},this.loadCodeFile=function(e){self[e]?apf.importClass(self[e],!0,this.win):apf.include(e)},this.show=function(){apf.isDeskrun&&jdwin.Show()},this.hide=function(){apf.isDeskrun?jdwin.Hide():(this.loaded=!1,this.win&&this.win.close())},this.focus=function(){apf.isDeskrun?jdwin.SetFocus():window.focus()},this.setIcon=function(e){apf.isDeskrun&&(jdwin.icon=parseInt(e)==e?parseInt(e):e)},this.setTitle=function(e){this.title=e||"",apf.isDeskrun?jdwin.caption=e:document.title=e||""},this.loadAml=function(e){e[apf.TAGNAME]=="deskrun"&&this.loadDeskRun(e)},this.vManager=new apf.visibilitymanager,this.zManager=new apf.zmanager,this.$tabList=[],this.$addFocus=function(e,t,o){if(!o){e.addEventListener("DOMNodeInserted",i),e.addEventListener("DOMNodeRemoved",s);if(e.$isWindowContainer>-2){e.addEventListener("focus",n),e.addEventListener("blur",n),e.$focusParent=e;if(e.$isWindowContainer>-1){e.$tabList||(e.$tabList=[e]),this.$tabList.push(e);return}e.$tabList=[e]}}var u=r(e),a=u.$tabList;e.$isWindowContainer?e.$focusParent2=u:e.$focusParent=u,a[t]?a.insertIndex(e,t):t||parseInt(t)===0?a[t]=e:a.push(e)},this.$removeFocus=function(e){if(!e.$focusParent)return;e.$focusParent.$tabList.remove(e),e.$isWindowContainer||(e.removeEventListener("DOMNodeInserted",i),e.removeEventListener("DOMNodeRemoved",s)),e.$isWindowContainer>-2&&(e.removeEventListener("focus",n),e.removeEventListener("blur",n))};var e;this.$focus=function(t,n,r){var i=this.activeElement;if(i==t&&!r)return;this.$settingFocus=t,n||(n={}),n.toElement=t,n.fromElement=i;if(i&&i!=t&&e!=i){e=i,i.blur(!0,n);if(e!=i)return!1}if(t.$focussable!=apf.MENU||!apf.activeElement)apf.activeElement=this.document.activeElement=this.document.documentElement.$lastFocussed=t;(apf.window.activeElement=t).focus(!0,n),this.$settingFocus=null,apf.dispatchEvent("movefocus",{toElement:t})},this.$blur=function(e){var t=this.activeElement;if(t!=e)return!1;t.$focusParent.$lastFocussed=null,t.$focussable!=apf.MENU&&(apf.activeElement=this.document.activeElement=null),apf.window.activeElement=null,apf.dispatchEvent("movefocus",{fromElement:e})};var t;this.$focusDefault=function(e,t){var n=r(e);this.$focusLast(n,t)},this.$focusRoot=function(e){var t=apf.document.documentElement;this.$focusLast(t,e)===!1},this.$focusLast=function(e,t,n){var r=e.$lastFocussed;if(r&&r.parentNode&&r.$focussable===!0&&(n||r.$ext.offsetHeight))this.$focus(r,t,!0);else{var i,s=e,o;while(s){if(!o&&s.focussable!==!1&&s.$focussable===!0&&!s.$tabList&&(n||s.$ext&&s.$ext.offsetHeight)&&s.disabled<1){this.$focus(s,t,!0);break}if(i=!o&&s.firstChild||!(o=!1)&&s.nextSibling)s=i,s.$isWindowContainer>0&&(o=!0);else{if(s==e){s.$isWindowContainer&&this.$focus(s,t,!0);return}do s=s.parentNode;while(s&&!s.nextSibling&&s!=e&&!s.$isWindowContainer);if(s==e){s.$isWindowContainer&&this.$focus(s,t,!0);return}if(s){if(s.$isWindowContainer){this.$focus(s,t,!0);break}s=s.nextSibling}}}s||this.$focus(apf.document.documentElement)}},this.hasFocus=function(e){return this.activeElement==e},this.moveNext=function(e,t,n,r){if(n&&apf.window.activeElement){var i=apf.window.activeElement.$focusParent;if(i.visible&&i.modal)return!1}var s,o,u,a=t||apf.window.activeElement,f=a?n&&a.$isWindowContainer&&a.$isWindowContainer!=-1?apf.window:r&&r.innerList?a.$focusParent:a.$focusParent2||a.$focusParent:apf.document.documentElement,l=f.$tabList;if(a&&(n||a!=apf.document.documentElement)){o=(l||[]).indexOf(a);if(o==-1)return}else o=-1;if(this.activeElement==a&&l.length==1||l.length==0)return!1;s=e?-1:1,u=o,o<0&&(o=0);do{u+=s,u>=l.length?u=0:u<0&&(u=l.length-1);if(o==u&&a)return l[0].$isWindowContainer&&this.$focus(l[0],r),!1;a=l[u]}while(a&&(a.disabled>0||a==apf.window.activeElement||(n?!a.visible:a.$ext&&!a.$ext.offsetHeight)||a.focussable===!1||n&&!a.$tabList.length));if(!a)return;f==apf.window&&a.$isWindowContainer!=-2?this.$focusLast(a,{mouse:!0},n):((r||(r={})).shiftKey=e,this.$focus(a,r))},this.focusDefault=function(){this.moveNext()===!1&&this.moveNext(null,apf.document.documentElement,!0)},apf.addListener(window,"beforeunload",function(){return apf.dispatchEvent("exit")}),apf.addListener(window,"unload",function(){if(!apf)return;apf.window.isExiting=!0,apf.window.destroy()}),apf.addListener(document,"contextmenu",function(e){e||(e=event);var t,n,r=apf.findHost(e.srcElement||e.target)||apf.window.activeElement||apf.document&&apf.document.documentElement;if(r&&r.localName=="menu")return!1;apf.contextMenuKeyboard?(r?t=r.selected?apf.getAbsolutePosition(r.$selected):apf.getAbsolutePosition(r.$ext||r.$pHtmlNode):t=[0,0],n={x:t[0]+10+document.documentElement.scrollLeft,y:t[1]+10+document.documentElement.scrollTop,amlNode:r,htmlEvent:e}):e.htmlEvent?n=e:n={x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop,htmlEvent:e},n.bubbles=!0,apf.contextMenuKeyboard=null;if((r||apf).dispatchEvent("contextmenu",n)===!1||n.returnValue===!1)return e.preventDefault&&e.preventDefault(),!1;if(apf.config.disableRightClick)return e.preventDefault&&e.preventDefault(),!1}),apf.addListener(document,"mouseup",function(e){e||(e=event),apf.dispatchEvent("mouseup",{htmlEvent:e})});var o={INPUT:1,TEXTAREA:1,SELECT:1,EMBED:1,OBJECT:1};apf.addListener(document,"mousedown",this.$mousedown=function(e){e||(e=event);var n,r=apf.findHost(e.srcElement||e.target);apf.popup.$mousedownHandler(r,e),r===!1&&(r=apf.window.activeElement),(!r||(!r.$focussable||r.focussable===!1)&&r.canHaveChildren!=2&&!r.$focusParent)&&apf.config.allowBlur?(t=null,apf.window.activeElement&&apf.window.activeElement.blur()):r&&((n=apf.window.activeElement&&apf.window.activeElement.$focusParent||t)&&n.visible&&n.modal&&r.$focusParent!=n&&r.$isWindowContainer!=-1?apf.window.$focusLast(n,{mouse:!0,ctrlKey:e.ctrlKey}):!r&&apf.window.activeElement?apf.window.$focusRoot():r.$isWindowContainer==-1?r.$tabList.length?apf.window.moveNext(null,r.$tabList[0],null,{mouse:!0,innerList:!0}):apf.window.$focus(r):(r.disabled==undefined||r.disabled<1)&&r.focussable!==!1?r.$focussable?apf.window.$focus(r,{mouse:!0,ctrlKey:e.ctrlKey}):r.canHaveChildren==2&&(!apf.config.allowBlur||!apf.window.activeElement||apf.window.activeElement.$focusParent!=r)&&apf.window.$focusLast(r,{mouse:!0,ctrlKey:e.ctrlKey}):apf.window.$focusDefault(r,{mouse:!0,ctrlKey:e.ctrlKey})),apf.dispatchEvent("mousedown",{htmlEvent:e,amlNode:r||apf.document.documentElement});if(apf.isIE||apf.isIphone)return;var i=!(!apf.document&&(!apf.isParsingPartial||r)||apf.dragMode)||!!o[e.target&&e.target.tagName];if(i&&r){!e.target&&e.srcElement&&(e.target={});var s=(o[e.target.tagName]||e.target.contentEditable=="true")&&!e.target.disabled||r.$isTextInput&&r.$isTextInput(e)&&r.disabled<1;!apf.config.allowSelect&&!s&&r.nodeType!=r.NODE_PROCESSING_INSTRUCTION&&!r.textselect&&(i=!1)}if(!i&&e.button!=2){e.preventDefault&&e.preventDefault();try{document.activeElement&&document.activeElement.contentEditable=="true"&&document.activeElement.blur()}catch(e){}}}),apf.addListener(document,"selectstart",function(e){if(!apf.isIE)return;e||(e=event);var t=apf.findHost(e.srcElement),n=!(!apf.document&&(!apf.isParsingPartial||t)||apf.dragMode);n&&!apf.config.allowSelect&&t&&t.nodeType!=t.NODE_PROCESSING_INSTRUCTION&&!t.textselect&&(n=!1);if(!n)return e.returnValue=!1,!1}),apf.addListener(document,"keyup",this.$keyup=function(e){e||(e=event);var t={keyCode:e.keyCode,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,altKey:e.altkey,htmlEvent:e,bubbles:!0},n=apf.document&&apf.window.activeElement;if((n&&!n.disableKeyboard?n.dispatchEvent("keyup",t):apf.dispatchEvent("keyup",t))===!1)return apf.preventDefault(e),!1});var u=this.$mousewheel=function(t){t||(t=event);var n=null;t.wheelDelta?(n=t.wheelDelta/120,apf.isOpera&&(n*=-1)):t.detail&&(n=-t.detail/3);if(n!==null){if(apf.isIE){var r=t.srcElement||t.target;while(r&&r.scrollHeight<=r.offsetHeight)r=r.parentNode||r.$parentNode;r&&r.nodeType==9&&(r=r.documentElement);if(!r||r.nodeType!=1)return;r&&r.tagName=="BODY"&&"auto|scroll".indexOf(apf.getStyle(r,"overflowY"))==-1&&(r=document.documentElement);if(r&&"auto|scroll".indexOf(apf.getStyle(r,"overflowY"))>-1){var i,s=.35*r.offsetHeight*n;n<0?r&&r.scrollTop>=(i=r.scrollHeight-r.offsetHeight+apf.getVerBorders(r))+s&&(r.scrollTop=i,t.returnValue=!1):r&&r.scrollTop<=s&&(r.scrollTop=0,t.returnValue=!1)}}var o={delta:n,target:t.target||t.srcElement,button:t.button,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,altKey:t.altKey,bubbles:!0,htmlEvent:t},u=apf.findHost(t.srcElement||t.target),a=(u||apf).dispatchEvent("mousescroll",o);if(a===!1||o.returnValue===!1)t.preventDefault&&t.preventDefault(),t.returnValue=!1}};document.addEventListener&&document.addEventListener("DOMMouseScroll",u,!1),window.onmousewheel=document.onmousewheel=u,apf.addListener(document,"keyup",function(e){e=e||event;if(e.ctrlKey&&e.keyCode==9&&apf.window.activeElement){var t=apf.window.activeElement.$focusParent;return t.modal?(e.preventDefault&&e.preventDefault(),!1):(apf.window.moveNext(e.shiftKey,apf.window.activeElement.$focusParent,!0),t=apf.window.activeElement.$focusParent,t&&t.bringToFront&&t.bringToFront(),e.preventDefault&&e.preventDefault(),!1)}}),apf.addListener(document,"keydown",this.$keydown=function(e){e=e||event,e.keyCode==93&&(apf.contextMenuKeyboard=!0);var t=apf.window.activeElement,n=e.explicitOriginalTarget||e.srcElement||e.target,r=(o[n.tagName]||n.contentEditable||n.contentEditable=="true")&&!n.disabled||t&&t.$isTextInput&&t.$isTextInput(e)&&t.disabled<1,i={ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,keyCode:e.keyCode,htmlEvent:e,isTextInput:r,bubbles:!0};delete i.currentTarget;var s=t;if((s&&!s.disableKeyboard&&!s.editable?s.dispatchEvent("keydown",i):apf.dispatchEvent("keydown",i))===!1){apf.stopEvent(e);if(apf.canDisableKeyCodes)try{e.keyCode=0}catch(e){}return!1}if((!apf.config.disableTabbing||apf.window.activeElement)&&e.keyCode==9){if(e.ctrlKey&&apf.window.activeElement){var u=apf.window.activeElement.$focusParent;if(u.modal)return e.preventDefault&&e.preventDefault(),!1;apf.window.moveNext(e.shiftKey,apf.window.activeElement.$focusParent,!0),u=apf.window.activeElement.$focusParent,u&&u.bringToFront&&u.bringToFront()}else(!apf.window.activeElement||apf.window.activeElement.tagName!="menu")&&apf.window.moveNext(e.shiftKey);return e.preventDefault&&e.preventDefault(),!1}var a=apf.isMac?e.metaKey:e.altKey;if(apf.config.disableBackspace&&e.keyCode==8&&!r){if(apf.canDisableKeyCodes)try{e.keyCode=0}catch(e){}e.returnValue=!1}if(apf.config.disableF5&&(e.keyCode==116||e.keyCode==117))if(apf.canDisableKeyCodes)try{e.keyCode=0}catch(e){}else e.preventDefault(),e.stopPropagation();return e.keyCode==27&&(e.returnValue=!1),!apf.config.allowSelect&&e.shiftKey&&e.keyCode>32&&e.keyCode<41&&!r&&(e.returnValue=!1),e.returnValue===!1&&e.preventDefault&&e.preventDefault(),e.returnValue}),apf.document={},this.init=function(e){apf.actiontracker&&(this.$at=new apf.actiontracker,this.$at.name="default",apf.nameserver.register("actiontracker","default",this.$at)),this.$domParser=new apf.DOMParser,this.document=apf.document=this.$domParser.parseFromString(e,"text/xml",{timeout:apf.config.initdelay,callback:function(e){if(apf.parsed!=2){var t=apf.parsed;apf.parsed=2,apf.dispatchEvent("parse",{initial:t}),apf.parsed=!0}apf.loaded||(!apf.window.activeElement&&(!apf.config.allowBlur||apf.document.documentElement&&apf.document.documentElement.editable)&&apf.window.focusDefault(),apf.loaded=!0,$setTimeout(function(){apf.dispatchEvent("load"),apf.addEventListener("$event.load",function(e){e()})}))}})},this.destroy=function(){this.$at=null,apf.unload(this),apf=this.win=this.window=this.document=null,window.onfocus=window.onerror=window.onunload=window.onbeforeunload=window.onbeforeprint=window.onafterprint=window.onmousewheel=window.onblur=null,document.oncontextmenu=document.onmousedown=document.onmousemove=document.onmouseup=document.onmousewheel=document.onkeyup=document.onkeydown=null,document.body&&(document.body.onmousedown=document.body.onmousemove=document.body.onmouseup=null,document.body.innerHTML="")}},apf.window.prototype=(new apf.Class).$init(),apf.window=new apf.window,apf.runGecko=function(){function n(e,t){this.message=t,this.nr=e}apf.runNonIe&&apf.runNonIe(),HTMLDocument.prototype.selectNodes=XMLDocument.prototype.selectNodes=function(e,t){try{var r=this.evaluate(e,t||this,this.createNSResolver(this.documentElement),7,null)}catch(i){var s=i.message;throw i.code==i.INVALID_EXPRESSION_ERR&&(s=s.replace(/the expression/i,"'"+e+"'")),new n(i.lineNumber,"XPath error: "+s)}var o=new Array(r.snapshotLength);o.expr=e;for(var u=o.length-1;u>=0;u--)o[u]=r.snapshotItem(u);return o},Text.prototype.selectNodes=Attr.prototype.selectNodes=Element.prototype.selectNodes=function(e){return this.ownerDocument.selectNodes(e,this)},HTMLDocument.prototype.selectSingleNode=XMLDocument.prototype.selectSingleNode=function(e,t){try{var r=this.evaluate(e,t||this,this.createNSResolver(this.documentElement),9,null)}catch(i){var s=i.message;throw i.code==i.INVALID_EXPRESSION_ERR&&(s=s.replace(/the expression/i,"'"+e+"'")),new n(i.lineNumber,"XPath error: "+s)}return r.singleNodeValue},Text.prototype.selectSingleNode=Attr.prototype.selectSingleNode=Element.prototype.selectSingleNode=function(e){return this.ownerDocument.selectSingleNode(e,this)};var e=new XMLSerializer,t=document.createElement("div");apf.insertHtmlNodes=function(n,r,i,s){var u,a,f,l;if(n){u=document.createDocumentFragment();for(l=n.length-1;l>=0;l--)f=n[l],u.insertBefore(f,u.firstChild)}t.innerHTML=typeof s=="string"?s:apf.html_entity_decode(e.serializeToString(u)).replace(/<([^>]+)\/>/g,"<$1></$1>"),u=document.createDocumentFragment();for(l=0,a=t.childNodes.length;l<a;l++)f=t.childNodes[0],u.appendChild(f);i&&r.insertBefore(u,i),r.appendChild(u)},apf.insertHtmlNode=function(n,r,i,s){return r.nodeType!=11&&!r.style?r.appendChild(n):(s||(s=apf.html_entity_decode(n.serialize?n.serialize(!0):n.nodeType==3||n.nodeType==4||n.nodeType==2?n.nodeValue:e.serializeToString(n))),t.innerHTML=s.replace(/<([^>]+)\/>/g,"<$1></$1>"),i?r.insertBefore(t.firstChild,i):r.appendChild(t.firstChild),i?i.previousSibling:r.lastChild)},apf.getHtmlLeft=function(e){return e.offsetLeft+(parseInt(apf.getStyle(e.parentNode,"borderLeftWidth"))||0)},apf.getHtmlRight=function(e){var t;return((t=e.offsetParent).tagName=="BODY"?apf.getWindowWidth():t.offsetWidth)-e.offsetLeft-e.offsetWidth-2*(parseInt(apf.getStyle(t,"borderLeftWidth"))||0)-(parseInt(apf.getStyle(t,"borderRightWidth"))||0)},apf.getHtmlTop=function(e){return e.offsetTop+(parseInt(apf.getStyle(e.parentNode,"borderTopWidth"))||0)},apf.getHtmlBottom=function(e){var t;return((t=e.offsetParent).tagName=="BODY"?apf.getWindowHeight():t.offsetHeight)-e.offsetTop-e.offsetHeight-2*(parseInt(apf.getStyle(t,"borderTopWidth"))||0)-(parseInt(apf.getStyle(t,"borderBottomWidth"))||0)},apf.getBorderOffset=function(e){return[-1*(parseInt(apf.getStyle(e,"borderLeftWidth"))||0),-1*(parseInt(apf.getStyle(e,"borderTopWidth"))||0)]}},apf.runIE=function(){var e=!1,t=!1;apf.getHttpReq=t?function(){return apf.availHTTP.length?apf.availHTTP.pop():new XMLHttpRequest}:function(){return apf.availHTTP.length?apf.availHTTP.pop():new ActiveXObject("microsoft.XMLHTTP")},apf.getXmlDom=t?function(e,t){var n=getDOMParser(e,t);return n}:function(e,t,n){var r=new ActiveXObject("microsoft.XMLDOM");return r.setProperty("SelectionLanguage","XPath"),n&&(r.preserveWhiteSpace=!0),e&&(apf.cantParseXmlDefinition&&(e=e.replace(/\] \]/g,"] ]").replace(/^<\?[^>]*\?>/,"")),r.loadXML(e),t||this.xmlParseError(r)),r},apf.xmlParseError=function(e){var t=e.parseError;if(t!=0)throw new Error(apf.formatErrorString(1050,null,"XML Parse error on line "+t.line,t.reason+"Source Text:\n"+t.srcText.replace(/\t/gi," ")));return e},apf.getStyle=function(e,t){return e.currentStyle[t]},apf.insertHtmlNodes=function(e,t,n,r){var s;if(e)for(s=[],i=0,l=e.length;i<l;i++)s[i]=e[i].xml;s=r||apf.html_entity_decode(s.join("")),apf.isIE<7&&(s=s.replace(/style="background-image:([^"]*)"/g,"find='$1' style='background-image:$1'"));try{(n||t).insertAdjacentHTML(n?"beforebegin":"beforeend",s)}catch(o){document.body.insertAdjacentHTML("beforeend","<table><tr>"+s+"</tr></table>");var u=document.body.lastChild.firstChild.firstChild;for(i=u.childNodes.length-1;i>=0;i--)t.appendChild(u.childNodes[apf.hasDynamicItemList?0:i])}apf.isIE<7&&$setTimeout(function(){var e=t.getElementsByTagName("*");for(var n,r=0,i=e.length;r<i;r++)if(n=e[r].getAttribute("find"))e[r].style.backgroundImage=n.trim()})},apf.insertHtmlNode=function(e,t,n,r){if(t.nodeType!=11&&!t.style)return t.appendChild(e);var i=n||t;r||(r=apf.html_entity_decode(e.serialize?e.serialize(!0):e.xml||e.outerHTML||e.nodeValue));try{i.insertAdjacentHTML(n?"beforeBegin":"beforeEnd",r)}catch(s){return i.insertAdjacentHTML("afterEnd",r),i.nextSibling}return n?n.previousSibling:t.lastChild.nodeType==1?t.lastChild:t.lastChild.previousSibling},apf.getHtmlLeft=function(e){return e.offsetLeft-(apf.isIE>7&&parseInt(e.parentNode.currentStyle.borderLeftWidth)||0)},apf.getHtmlRight=function(e){var t;return((t=e.offsetParent).tagName=="BODY"?apf.getWindowWidth():t.offsetWidth)-e.offsetLeft-e.offsetWidth-(apf.isIE<8&&parseInt(t.currentStyle.borderLeftWidth)||0)-(parseInt(t.currentStyle.borderRightWidth)||0)},apf.getHtmlTop=function(e){return e.offsetTop-(apf.isIE>7&&parseInt(e.offsetParent.currentStyle.borderTopWidth)||0)},apf.getHtmlBottom=function(e){var t;return((t=e.offsetParent).tagName=="BODY"?apf.getWindowHeight():t.offsetHeight)-e.offsetTop-e.offsetHeight-(apf.isIE<8&&parseInt(t.currentStyle.borderTopWidth)||0)-(parseInt(t.currentStyle.borderBottomidth)||0)},apf.getBorderOffset=function(e){return apf.isIE<8&&[0,0]||[parseInt(e.currentStyle.borderLeftWidth)||0,parseInt(e.currentStyle.borderTopWidth)||0]},apf.getOpacity=function(e){return parseInt(((e.currentStyle.filter||"").match(/alpha\(opacity=(\d*)\)/)||[0,0])[1])/100},apf.setOpacity=function(e,t){e.style.filter=t==1?"":"alpha(opacity="+Math.round(t*100)+")"},apf.importClass(apf.runXpath,!0,self)},apf.runNonIe=function(){DocumentFragment.prototype.getElementById=function(e){return this.childNodes.length?this.childNodes[0].ownerDocument.getElementById(e):null},XMLDocument.prototype.__defineGetter__&&(XMLDocument.prototype.__defineGetter__("xml",function(){return(new XMLSerializer).serializeToString(this)}),XMLDocument.prototype.__defineSetter__("xml",function(){throw new Error(apf.formatErrorString(1042,null,"XML serializer","Invalid assignment on read-only property 'xml'."))}),Node.prototype.__defineGetter__("xml",function(){return this.nodeType==3||this.nodeType==4||this.nodeType==2?this.nodeValue:(new XMLSerializer).serializeToString(this)}),Element.prototype.__defineGetter__("xml",function(){return(new XMLSerializer).serializeToString(this)})),typeof HTMLElement!="undefined"&&(HTMLElement.prototype.insertAdjacentElement||(Text.prototype.insertAdjacentElement=HTMLElement.prototype.insertAdjacentElement=function(e,t){switch(e.toLowerCase()){case"beforebegin":this.parentNode.insertBefore(t,this);break;case"afterbegin":this.insertBefore(t,this.firstChild);break;case"beforeend":this.appendChild(t);break;case"afterend":this.nextSibling?this.parentNode.insertBefore(t,this.nextSibling):this.parentNode.appendChild(t)}}),HTMLElement.prototype.insertAdjacentHTML||(Text.prototype.insertAdjacentHTML=HTMLElement.prototype.insertAdjacentHTML=function(e,t){var n=this.ownerDocument.createRange();n.setStartBefore(apf.isWebkit?document.body:self.document?document.body:this);var r=n.createContextualFragment(t);this.insertAdjacentElement(e,r)}),HTMLBodyElement.prototype.insertAdjacentHTML||(HTMLBodyElement.prototype.insertAdjacentHTML=HTMLElement.prototype.insertAdjacentHTML),HTMLElement.prototype.insertAdjacentText||(Text.prototype.insertAdjacentText=HTMLElement.prototype.insertAdjacentText=function(e,t){var n=document.createTextNode(t);this.insertAdjacentElement(e,n)}),HTMLElement.prototype.removeNode=function(){if(!this.parentNode)return;this.parentNode.removeChild(this)},HTMLElement.prototype.__defineSetter__&&(HTMLElement.prototype.__defineSetter__("innerText",function(e){var t=""+e;this.innerHTML=t.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),HTMLElement.prototype.__defineGetter__("innerText",function(){return this.innerHTML.replace(/<[^>]+>/g,"").replace(/\s\s+/g," ").replace(/^\s+|\s+$/g," ")}),HTMLElement.prototype.__defineGetter__("outerHTML",function(){return(new XMLSerializer).serializeToString(this)})));var e=!1;try{XMLDocument.prototype.async=!0,e=!0}catch(t){}Document.prototype.onreadystatechange=null,Document.prototype.parseError=0,Array.prototype.item=function(e){return this[e]},Array.prototype.expr="",XMLDocument.prototype.$clearDOM=function(){while(this.hasChildNodes())this.removeChild(this.firstChild)},XMLDocument.prototype.$copyDOM=function(e){this.$clearDOM();if(e.nodeType==9||e.nodeType==11){var t=e.childNodes;for(var n=0;n<t.length;n++)this.appendChild(this.importNode(t[n],!0))}else e.nodeType==1&&this.appendChild(this.importNode(e,!0))},XMLDocument.prototype.loadXML=function(e){apf.xmldb.setReadyState(this,1);var t=this.xml||this.serialize(),n=(new DOMParser).parseFromString(e,"text/xml");return apf.xmldb.setReadyState(this,2),this.$copyDOM(n),apf.xmldb.setReadyState(this,3),apf.xmldb.loadHandler(this),t},Node.prototype.getElementById=function(e){},HTMLElement.prototype.replaceNode=Element.prototype.replaceNode=function(e){if(!this.parentNode)return;this.parentNode.insertBefore(e,this),this.parentNode.removeChild(this)},XMLDocument.prototype.$load=XMLDocument.prototype.load,XMLDocument.prototype.load=function(t){var n=document.implementation.createDocument("","",null);n.$copyDOM(this),this.parseError=0,apf.xmldb.setReadyState(this,1);try{if(this.async==0&&e){var r=new XMLHttpRequest;r.open("GET",t,!1),r.overrideMimeType("text/xml"),r.send(null),apf.xmldb.setReadyState(this,2),this.$copyDOM(r.responseXML),apf.xmldb.setReadyState(this,3)}else this.$load(t)}catch(i){this.parseError=-1}finally{apf.xmldb.loadHandler(this)}return n};var n=apf.getStyle=function(e,t){try{return(window.getComputedStyle(e,"")||{})[t]||""}catch(n){}};HTMLDocument.prototype.setProperty=XMLDocument.prototype.setProperty=function(e,t){},apf.getHttpReq=function(){return apf.availHTTP.length?apf.availHTTP.pop():new XMLHttpRequest},apf.getXmlDom=function(e,t,n){var r;return e?(n===!1&&(e=e.replace(/>[\s\n\r]*</g,"><")),r=new DOMParser,r=r.parseFromString(e,"text/xml"),t||this.xmlParseError(r)):r=document.implementation.createDocument("","",null),r},apf.xmlParseError=function(e){if(e.getElementsByTagName("parsererror").length){var t=e.documentElement.firstChild.nodeValue;if(t!=null)var n=t.split("\n"),r=n[2].match(/\w+ (\d+)/)[1],i=n[0].replace(/\w+ \w+ \w+: (.*)/,"$1");else if(t=e.documentElement.firstChild.getElementsByTagName("div")[0].firstChild.nodeValue)var r=t.match(/line\s(\d*)/)[1]||"N/A",i=t.match(/column\s\d*:(.*)/)[1]||"N/A";else var r="N/A",i="N/A";var s=e.documentElement.lastChild.firstChild,o="";throw s&&s.nodeValue&&(o="\nSource Text : "+s.nodeValue.replace(/\t/gi," ")),new Error(apf.formatErrorString(1050,null,"XML Parse Error on line "+r,i+o))}return e},apf.xmldb.setReadyState=function(e,t){e.readyState=t,e.onreadystatechange!=null&&typeof e.onreadystatechange=="function"&&e.onreadystatechange()},apf.xmldb.loadHandler=function(e){if(!e.documentElement||e.documentElement.tagName=="parsererror")e.parseError=-1;apf.xmldb.setReadyState(e,4)},apf.Init.add(function(){var e,t=document.getElementsByTagName("form");for(e=0;e<t.length;e++)t[e].removeNode();t=document.getElementsByTagName("xml");for(e=0;e<t.length;e++)t[e].removeNode();t=null}),document.body&&(document.body.focus=function(){}),apf.getOpacity=function(e){return apf.getStyle(e,"opacity")},apf.setOpacity=function(e,t){e.style.opacity=t}},apf.runWebkit=function(){XMLHttpRequest.prototype.sendAsBinary===undefined&&window.ArrayBuffer&&(XMLHttpRequest.prototype.sendAsBinary=function(e){var t=Array.prototype.map.call(e,function(e){return e.charCodeAt(0)&255});this.send(new Uint8Array(t))}),HTMLDocument.prototype.selectNodes=XMLDocument.prototype.selectNodes=function(e,t){e.substr(0,2)=="//"&&(e="."+e);try{var n=this.evaluate(e,t||this,this.createNSResolver(this.documentElement),7,null)}catch(r){try{var n=this.evaluate("child::"+e,t||this,this.createNSResolver(this.documentElement),7,null)}catch(r){throw new Error("XPath error: "+r.message+"\nLine: "+r.lineNumber+"\nExpression: '"+e+"'")}}var i=new Array(n.snapshotLength);i.expr=e;for(var s=i.length-1;s>=0;s--)i[s]=n.snapshotItem(s);return i},Text.prototype.selectNodes=Attr.prototype.selectNodes=Element.prototype.selectNodes=function(e){return this.ownerDocument.selectNodes(e,this)},HTMLDocument.prototype.selectSingleNode=XMLDocument.prototype.selectSingleNode=function(e,t){var n=this.selectNodes("("+e+")[1]",t?t:null);return n.length>0?n[0]:null},Text.prototype.selectSingleNode=Attr.prototype.selectSingleNode=Element.prototype.selectSingleNode=function(e){return this.ownerDocument.selectSingleNode(e,this)};var e=new XMLSerializer;apf.insertHtmlNodes=function(t,n,r,i){var s,o,u,a,f;if(t){o=document.createDocumentFragment(),u=[],a=0,f=t.length;for(;a<f;a++){if(!(s=t[a]))continue;o.appendChild(s)}}(r||n).insertAdjacentHTML(r?"beforebegin":"beforeend",i||apf.html_entity_decode(e.serializeToString(o)).replace(/<([^>]+)\/>/g,"<$1></$1>"))},apf.insertHtmlNode=function(t,n,r,i){return n.nodeType!=11&&!n.style?n.appendChild(t):(i||(i=apf.html_entity_decode(t.serialize?t.serialize(!0):t.nodeType==3||t.nodeType==4||t.nodeType==2?t.nodeValue:e.serializeToString(t))),(r||n).insertAdjacentHTML(r?"beforebegin":"beforeend",i.match(/<(IMG|LINK|META|BR|HR|BASEFONT)[^\/>]*/i)?i.replace(/<([^>]+)\/>/g,"<$1 />"):i.replace(/<([^>]+)\/>/g,"<$1></$1>")),r?r.previousSibling:n.lastChild)},apf.getHtmlLeft=function(e){return e.offsetLeft},apf.getHtmlRight=function(e){var t;return((t=e.offsetParent).tagName=="BODY"?apf.getWindowWidth():t.offsetWidth)-e.offsetLeft-e.offsetWidth-(parseInt(apf.getStyle(t,"borderLeftWidth"))||0)-(parseInt(apf.getStyle(t,"borderRightWidth"))||0)},apf.getHtmlTop=function(e){return e.offsetTop},apf.getHtmlBottom=function(e){var t;return((t=e.offsetParent).tagName=="BODY"?apf.getWindowHeight():t.offsetHeight)-e.offsetTop-e.offsetHeight-(parseInt(apf.getStyle(t,"borderTopWidth"))||0)-(parseInt(apf.getStyle(t,"borderBottomWidth"))||0)},apf.getBorderOffset=function(e){return[0,0]},apf.runNonIe&&apf.runNonIe()},apf.crypto.Base64=function(){function t(t){var n,r,i,s,o,u,a,f,l=0,c=0,h="",p=[];if(!t)return t;t=apf.crypto.UTF8.encode(t+"");do n=t.charCodeAt(l++),r=t.charCodeAt(l++),i=t.charCodeAt(l++),f=n<<16|r<<8|i,s=f>>18&63,o=f>>12&63,u=f>>6&63,a=f&63,p[c++]=e.charAt(s)+e.charAt(o)+e.charAt(u)+e.charAt(a);while(l<t.length);h=p.join("");switch(t.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"="}return h}function n(t){var n,r,i,s,o,u,a,f,l=0,c=0,h=[];if(!t)return t;t+="";do s=e.indexOf(t.charAt(l++)),o=e.indexOf(t.charAt(l++)),u=e.indexOf(t.charAt(l++)),a=e.indexOf(t.charAt(l++)),f=s<<18|o<<12|u<<6|a,n=f>>16&255,r=f>>8&255,i=f&255,u==64?h[c++]=String.fromCharCode(n):a==64?h[c++]=String.fromCharCode(n,r):h[c++]=String.fromCharCode(n,r,i);while(l<t.length);return apf.crypto.UTF8.decode(h.join(""))}var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{decode:n,encode:t}}(),apf.crypto.UTF8={encode:function(e){e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var t=[],n=0,r=0,i,s;for(var o=0,u=e.length;o<u;o++)i=e.charCodeAt(o),s=null,i<128?r++:i>127&&i<2048?s=String.fromCharCode(i>>6|192)+String.fromCharCode(i&63|128):s=String.fromCharCode(i>>12|224)+String.fromCharCode(i>>6&63|128)+String.fromCharCode(i&63|128),s!==null&&(r>n&&t.push(e.substring(n,r)),t.push(s),n=r=o+1);return r>n&&t.push(e.substring(n,e.length)),t.join("")},decode:function(e){var t=[],n=0,r=0,i=0,s=0,o=0;e+="";while(n<e.length)i=e.charCodeAt(n),i<128?(t[r++]=String.fromCharCode(i),n++):i>191&&i<224?(s=e.charCodeAt(n+1),t[r++]=String.fromCharCode((i&31)<<6|s&63),n+=2):(s=e.charCodeAt(n+1),o=e.charCodeAt(n+2),t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63),n+=3);return t.join("")}},apf.crypto.MD5={hexcase:0,b64pad:"",chrsz:8,hex_md5:function(e){return this.binl2hex(this.core_md5(this.str2binl(e),e.length*this.chrsz))},b64_md5:function(e){return this.binl2b64(this.core_md5(this.str2binl(e),e.length*this.chrsz))},str_md5:function(e){return this.binl2str(this.core_md5(this.str2binl(e),e.length*this.chrsz))},hex_hmac_md5:function(e,t){return this.binl2hex(this.core_hmac_md5(e,t))},b64_hmac_md5:function(e,t){return this.binl2b64(this.core_hmac_md5(e,t))},str_hmac_md5:function(e,t){return this.binl2str(this.core_hmac_md5(e,t))},core_md5:function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(var o=0;o<e.length;o+=16){var u=n,a=r,f=i,l=s;n=this.md5_ff(n,r,i,s,e[o+0],7,-680876936),s=this.md5_ff(s,n,r,i,e[o+1],12,-389564586),i=this.md5_ff(i,s,n,r,e[o+2],17,606105819),r=this.md5_ff(r,i,s,n,e[o+3],22,-1044525330),n=this.md5_ff(n,r,i,s,e[o+4],7,-176418897),s=this.md5_ff(s,n,r,i,e[o+5],12,1200080426),i=this.md5_ff(i,s,n,r,e[o+6],17,-1473231341),r=this.md5_ff(r,i,s,n,e[o+7],22,-45705983),n=this.md5_ff(n,r,i,s,e[o+8],7,1770035416),s=this.md5_ff(s,n,r,i,e[o+9],12,-1958414417),i=this.md5_ff(i,s,n,r,e[o+10],17,-42063),r=this.md5_ff(r,i,s,n,e[o+11],22,-1990404162),n=this.md5_ff(n,r,i,s,e[o+12],7,1804603682),s=this.md5_ff(s,n,r,i,e[o+13],12,-40341101),i=this.md5_ff(i,s,n,r,e[o+14],17,-1502002290),r=this.md5_ff(r,i,s,n,e[o+15],22,1236535329),n=this.md5_gg(n,r,i,s,e[o+1],5,-165796510),s=this.md5_gg(s,n,r,i,e[o+6],9,-1069501632),i=this.md5_gg(i,s,n,r,e[o+11],14,643717713),r=this.md5_gg(r,i,s,n,e[o+0],20,-373897302),n=this.md5_gg(n,r,i,s,e[o+5],5,-701558691),s=this.md5_gg(s,n,r,i,e[o+10],9,38016083),i=this.md5_gg(i,s,n,r,e[o+15],14,-660478335),r=this.md5_gg(r,i,s,n,e[o+4],20,-405537848),n=this.md5_gg(n,r,i,s,e[o+9],5,568446438),s=this.md5_gg(s,n,r,i,e[o+14],9,-1019803690),i=this.md5_gg(i,s,n,r,e[o+3],14,-187363961),r=this.md5_gg(r,i,s,n,e[o+8],20,1163531501),n=this.md5_gg(n,r,i,s,e[o+13],5,-1444681467),s=this.md5_gg(s,n,r,i,e[o+2],9,-51403784),i=this.md5_gg(i,s,n,r,e[o+7],14,1735328473),r=this.md5_gg(r,i,s,n,e[o+12],20,-1926607734),n=this.md5_hh(n,r,i,s,e[o+5],4,-378558),s=this.md5_hh(s,n,r,i,e[o+8],11,-2022574463),i=this.md5_hh(i,s,n,r,e[o+11],16,1839030562),r=this.md5_hh(r,i,s,n,e[o+14],23,-35309556),n=this.md5_hh(n,r,i,s,e[o+1],4,-1530992060),s=this.md5_hh(s,n,r,i,e[o+4],11,1272893353),i=this.md5_hh(i,s,n,r,e[o+7],16,-155497632),r=this.md5_hh(r,i,s,n,e[o+10],23,-1094730640),n=this.md5_hh(n,r,i,s,e[o+13],4,681279174),s=this.md5_hh(s,n,r,i,e[o+0],11,-358537222),i=this.md5_hh(i,s,n,r,e[o+3],16,-722521979),r=this.md5_hh(r,i,s,n,e[o+6],23,76029189),n=this.md5_hh(n,r,i,s,e[o+9],4,-640364487),s=this.md5_hh(s,n,r,i,e[o+12],11,-421815835),i=this.md5_hh(i,s,n,r,e[o+15],16,530742520),r=this.md5_hh(r,i,s,n,e[o+2],23,-995338651),n=this.md5_ii(n,r,i,s,e[o+0],6,-198630844),s=this.md5_ii(s,n,r,i,e[o+7],10,1126891415),i=this.md5_ii(i,s,n,r,e[o+14],15,-1416354905),r=this.md5_ii(r,i,s,n,e[o+5],21,-57434055),n=this.md5_ii(n,r,i,s,e[o+12],6,1700485571),s=this.md5_ii(s,n,r,i,e[o+3],10,-1894986606),i=this.md5_ii(i,s,n,r,e[o+10],15,-1051523),r=this.md5_ii(r,i,s,n,e[o+1],21,-2054922799),n=this.md5_ii(n,r,i,s,e[o+8],6,1873313359),s=this.md5_ii(s,n,r,i,e[o+15],10,-30611744),i=this.md5_ii(i,s,n,r,e[o+6],15,-1560198380),r=this.md5_ii(r,i,s,n,e[o+13],21,1309151649),n=this.md5_ii(n,r,i,s,e[o+4],6,-145523070),s=this.md5_ii(s,n,r,i,e[o+11],10,-1120210379),i=this.md5_ii(i,s,n,r,e[o+2],15,718787259),r=this.md5_ii(r,i,s,n,e[o+9],21,-343485551),n=this.safe_add(n,u),r=this.safe_add(r,a),i=this.safe_add(i,f),s=this.safe_add(s,l)}return[n,r,i,s]},md5_cmn:function(e,t,n,r,i,s){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(r,s)),i),n)},md5_ff:function(e,t,n,r,i,s,o){return this.md5_cmn(t&n|~t&r,e,t,i,s,o)},md5_gg:function(e,t,n,r,i,s,o){return this.md5_cmn(t&r|n&~r,e,t,i,s,o)},md5_hh:function(e,t,n,r,i,s,o){return this.md5_cmn(t^n^r,e,t,i,s,o)},md5_ii:function(e,t,n,r,i,s,o){return this.md5_cmn(n^(t|~r),e,t,i,s,o)},core_hmac_md5:function(e,t){var n=this.str2binl(e),r=Array(16),i=Array(16);n.length>16&&(n=this.core_md5(n,e.length*this.chrsz));for(var s=0;s<16;s++)r[s]=n[s]^909522486,i[s]=n[s]^1549556828;return this.core_md5(i.concat(this.core_md5(r.concat(this.str2binl(t)),512+t.length*this.chrsz)),640)},safe_add:function(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535},bit_rol:function(e,t){return e<<t|e>>>32-t},str2binl:function(e){var t=[],n,r=(1<<this.chrsz)-1;for(n=0;n<e.length*this.chrsz;n+=this.chrsz)t[n>>5]|=(e.charCodeAt(n/this.chrsz)&r)<<n%32;return t},binl2str:function(e){var t=[],n,r=(1<<this.chrsz)-1;for(n=0;n<e.length*32;n+=this.chrsz)t.push(String.fromCharCode(e[n>>5]>>>n%32&r));return t.join("")},binl2hex:function(e){var t=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n=[],r;for(r=0;r<e.length*4;r++)n.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return n.join("")},binl2b64:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=[],r;for(r=0;r<e.length*4;r+=3){var i=(e[r>>2]>>8*(r%4)&255)<<16|(e[r+1>>2]>>8*((r+1)%4)&255)<<8|e[r+2>>2]>>8*((r+2)%4)&255;for(var s=0;s<4;s++)r*8+s*6>e.length*32?n.push(this.b64pad):n.push(t.charAt(i>>6*(3-s)&63))}return n.join("")}},function(e){function t(e,t){var n=e<<t|e>>>32-t;return n}function n(e){var t="",n,r;for(n=7;n>=0;n--)r=e>>>n*4&15,t+=r.toString(16);return t}e.SHA1=function(e){var r,i,s,o=new Array(80),u=1732584193,a=4023233417,f=2562383102,l=271733878,c=3285377520,h,p,d,v,m,g;e=apf.crypto.UTF8.encode(e);var y=e.length,b=[];for(i=0;i<y-3;i+=4)s=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),b.push(s);switch(y%4){case 0:i=2147483648;break;case 1:i=e.charCodeAt(y-1)<<24|8388608;break;case 2:i=e.charCodeAt(y-2)<<24|e.charCodeAt(y-1)<<16|32768;break;case 3:i=e.charCodeAt(y-3)<<24|e.charCodeAt(y-2)<<16|e.charCodeAt(y-1)<<8|128}b.push(i);while(b.length%16!=14)b.push(0);b.push(y>>>29),b.push(y<<3&4294967295);for(r=0;r<b.length;r+=16){for(i=0;i<16;i++)o[i]=b[r+i];for(i=16;i<=79;i++)o[i]=t(o[i-3]^o[i-8]^o[i-14]^o[i-16],1);h=u,p=a,d=f,v=l,m=c;for(i=0;i<=19;i++)g=t(h,5)+(p&d|~p&v)+m+o[i]+1518500249&4294967295,m=v,v=d,d=t(p,30),p=h,h=g;for(i=20;i<=39;i++)g=t(h,5)+(p^d^v)+m+o[i]+1859775393&4294967295,m=v,v=d,d=t(p,30),p=h,h=g;for(i=40;i<=59;i++)g=t(h,5)+(p&d|p&v|d&v)+m+o[i]+2400959708&4294967295,m=v,v=d,d=t(p,30),p=h,h=g;for(i=60;i<=79;i++)g=t(h,5)+(p^d^v)+m+o[i]+3395469782&4294967295,m=v,v=d,d=t(p,30),p=h,h=g;u=u+h&4294967295,a=a+p&4294967295,f=f+d&4294967295,l=l+v&4294967295,c=c+m&4294967295}return g=n(u)+n(a)+n(f)+n(l)+n(c),g.toLowerCase()}}(apf.crypto),apf.lm=new function(){function Nn(e){var t,n;if(U[tt-1]=="{{")t=tt-1;else for(n=G-2,t=0;n>=0&&U[t=(Q[n]&268435455)-1]!="{{";n-=2);!e&&z>t+1?U[t]=wt+Ct:U[t]=wt,et=1}function Cn(f,l,D,st,wt,Tt,kt){var Ot,Mt,_t,Dt=l?t[l]:D?0:st?3:wt?4:f?2:15;switch(et){case 0:case 1:switch(Dt){case 0:ft==3&&at!="$"||ft==4?U[z++]=" ":s[at]&&(ft=0);break;case 1:ot++,mt=kt,U[z-1]!="\n"&&!x[at]&&(U[z++]="\n"),s[at]&&(ft=0);break;case 2:if(Mt=i[f])switch(Mt){case 1:Q[G-1]||(U[z++]=")",G-=2);if(!et)U[z-1]!="\n"&&at!="{"&&at!=";"&&(U[z++]="\n");else if(!G||Q[G-1])U[z++]=";";break;case 2:Q[G-1]||(U[z++]=")",G-=2),U[z++]=",";break;case 3:U[z-1]=="\n"||U[z-1]==";"||at=="{"||at=="} "||z==tt?(et||Nn(),U[z++]="  "):U[z++]="^";break;case 4:if(at!="<"&&at!=">"){!et&&U[tt-1]!="("&&Nn(!0),U[z++]=f;for(Mt=z;Mt>=tt&&!e[U[Mt]]&&(U[Mt]!="  "&&U[Mt]!=(ut?Ct:Nt)||(U[Mt]="",!1));Mt--);if(ft==3&&lt>0&&at.charAt(0)!="."&&q){z-=2;while(S[U[z]])z--;_t=at,U[z++]=d[f],U[z++]=_t.slice(0,lt),U[z++]=",'",U[z++]=_t.slice(lt+1),U[z++]="',",Q[G++]=tt|et<<28,Q[G++]=""}}else U[z++]=f;break;case 5:c[at]?(Q[G++]=tt|et<<28,Q[G++]=U[z++]=f,tt=nt=z-1,ut++,et=5,rt=f):U[z++]="/";break;case 6:if(G>2&&Q[G-1]=="{{"&&z<tt+4&&ft==5||z<tt+3&&(ft==3||ft==4))U[tt-1]=Q[G-1]="{",et=(Mt=Q[G-2])>>28,Q[G-2]=Mt&268435455,ut--;else if(U[z-3]=="case"||ft==5&&yt=="case")f=";";U[z++]=":";break;default:U[z++]=f}else U[z++]=w[f]||f;break;case 3:case 4:(Mt=C[f])?(U[z++]=f=Mt,Dt=2):(Mt=Ot=_t=0,lt=(yt=f).lastIndexOf("."),f.charAt(0)!="."&&((Mt=(Ot=(m[at]||U[z-1]=="\n")&&!v[at])&&!Q[G-1].indexOf("{")&&z>tt)||(_t=e[f]))&&!et&&(_t==2&&Q[G-1].indexOf("{")&&(_t=0),Nn(_t)),Ot&&!Q[G-1]&&(U[z-1]=="\n"&&(U[z-1]=""),U[z++]=")",U[z++]="\n",Mt=1,G-=2),Mt&&et&&!e[f]&&!E[f]&&(U[z++]=ut?Ct:Nt),lt>0&&f.charAt(0)!="."?V[U[z++]=ht=f]=1:U[z++]=f);break;case 5:(Mt=(Ot=(m[at]||U[z-1]=="\n")&&!v[at])&&!Q[G-1].indexOf("{")&&z>tt)&&!et&&Nn(),Ot&&!Q[G-1]&&(U[z-1]=="\n"&&(U[z-1]=""),U[z++]=")",U[z++]="\n",Mt=1,G-=2),Mt?U[z++]=U[z-2]!="\n"&&b[at]?"+":ut?Ct:Nt:b[at]&&(U[z++]="+"),Q[G++]=tt|et<<28,Q[G++]=U[z++]=f,tt=nt=z-1,ut++,et=5,rt=f;break;case 6:if(f=="*/"||f=="-->")throw{t:"Unmatched comment "+f,p:kt};pt=et,dt=at,vt=ft,et=6,rt=f;break;case 7:U[z-1]==")  "||U[z-2]==")  "&&z--?Q[G-1]!="("&&Q[G-1]!="["?(Q[G++]=tt|et<<28,Q[G++]="{{",U[z++]=Lt,tt=z,et=1,ut++,U[z++]=""):(Q[G++]=tt,Q[G++]=U[z++]=f,tt=z,et=1):M[Q[G+1]]&&at==")   "||p[at]?(Q[G++]=tt,Q[G++]=U[z++]=f,tt=z,U[z++]=""):((Mt=(Ot=(m[at]||U[z-1]=="\n")&&!v[at])&&!Q[G-1].indexOf("{")&&z>tt)&&!et&&Nn(),Ot&&!Q[G-1]&&(U[z-1]=="\n"&&(U[z-1]=""),U[z++]=")",U[z++]="\n",Mt=1,G-=2),Mt?U[z++]=U[z-2]!="\n"&&b[at]?"+''+":ut?Ct:Nt:b[at]&&(U[z++]=at=="}"?"+''+":"+"),Q[G++]=tt|et<<28,Q[G++]=U[z++]="{{",!ut&&tt!=z&&$++,ut++,nt=tt=z,et=0);break;case 8:Q[G-1]||(U[z++]=")",U[z++]="\n",G-=2);if(n[Mt=Q[--G]]!=(U[z++]=f))throw{t:"Cannot close "+Mt+" with "+f,p:kt};Mt=="{{"?(tt==z-1?Q[G-1]>>28<=1?(U[tt-1]="{",U[z-1]="}"):U[tt-1]=U[z-1]="'":et?U[tt-1]==Lt?tt==z-2?(U[tt-1]="{",U[z-1]="}"):U[z-1]=At:U[z-1]=Et:(U[tt-1]="(",U[z-1]=")"),et=(Mt=Q[--G])>>28,tt=Mt&268435455,nt=z,ut--,ut||$++,et==7&&(U[z++]='+"\\"',et=4)):tt=Q[--G];break;case 9:(ft==3&&!h[at]&&at!="$"||at==")"||at=="]")&&U[z-1]!="\n"?(U[z++]="[",Q[G++]=tt|et<<28,Q[G++]=f,nt=tt=z):(ct=null,(_t=s[at])?(z--,at=U[z-1]):_t=k[Q[G-1]]||k[ut?0:B],(Mt=(Ot=(m[at]||U[z-1]=="\n")&&!v[at])&&!Q[G-1].indexOf("{")&&(z>tt||Q[G-1].length==1))&&!et&&Nn(),Ot&&!Q[G-1]&&(U[z-1]=="\n"&&(U[z-1]=""),U[z++]=")",U[z++]="\n",Mt=1,G-=2),Mt?U[z++]=U[z-2]!="\n"&&b[at]?"+":ut?Ct:Nt:b[at]&&(U[z++]="+"),!ut&&z!=tt&&$++,ut++,Q[G++]=tt|et<<28,Q[G++]=U[z++]=_t,nt=tt=z,Y[tt]=kt,et=3);break;case 10:Q[G-1]||(U[z++]=")",G-=2);if(n[Mt=Q[--G]]!=(U[z++]=f))throw{t:"Cannot close "+Mt+" with "+f,p:kt};tt=Q[--G]&268435455;break;case 11:(Mt=(Ot=(g[at]||U[z-1]=="\n")&&!v[at])&&!Q[G-1].indexOf("{")&&z>tt)&&!et&&Nn(),Ot&&!Q[G-1]&&(U[z-1]=="\n"&&(U[z-1]=""),U[z++]=")",U[z++]="\n",Mt=1,G-=2),Mt&&et&&(U[z++]=ut?Ct:Nt,ft=0),(_t=M[at])?(U[z-1]==" "&&z--,U[z-1]=_t,Q[G++]=tt,Q[G++]=at,tt=nt=z):(ft==3?lt<0?(Mt=0,at=="function"||U[z-3]=="function"||U[z-4]=="function"?(Q[G++]=tt,Q[G++]="function",U[z++]="(",tt=nt=z,at!="function"&&R&&G==4&&(U[Mt=U[z-4]=="function"?z-4:z-5]="var "+at+" = "+R+"."+at+" = function",U[Mt+2]="")):!E[at]&&U[z-3]!="new"?(U[z++]=".call(_n",Q[G++]=tt,Q[G++]="_call",tt=nt=z):(Q[G++]=tt,Q[G++]=U[z++]=f,tt=nt=z)):lt>1&&H&&(P[Mt=at.substring(0,lt)]||P[Mt=at])?(U[--z]==" "&&z--,U[z++]=St,U[z++]=Mt,U[z++]=",'",U[z++]=at.slice(lt+1),U[z++]=xt,Q[G++]=tt,Q[G++]="async",tt=nt=z,W++):(at.indexOf(".")!=lt&&(V[at.slice(0,lt)]=1),Q[G++]=tt,Q[G++]=U[z++]=f,tt=nt=z):(Q[G++]=tt,Q[G++]=U[z++]=f,tt=nt=z),at==ht&&delete V[at]);break;case 12:Q[G-1]||(U[z-1]=="\n"&&(U[z-1]=""),U[z++]=")",U[z++]="\n",Mt=1,G-=2);if(_t=_[Mt=Q[--G]])Mt!="_call"&&(f=")   "),(Ot=bt[Mt])&&Ot!=U[z-1]&&(U[tt-1]=Ot+","),U[z++]=_t;else if(n[Mt]!=(U[z++]=f))throw{t:"Cannot close "+Mt+" with "+f,p:kt};tt=Q[--G]&268435455;break;case 13:z==tt||y[at]||U[z-1]=="\n"?((Mt=(Ot=(m[at]||U[z-1]=="\n")&&!v[at])&&!Q[G-1].indexOf("{")&&z>tt)&&!et&&Nn(),Ot&&!Q[G-1]&&(U[z-1]=="\n"&&(U[z-1]=""),U[z++]=")",U[z++]="\n",Mt=1,G-=2),Mt?U[z++]=U[z-2]!="\n"&&b[at]?"+''+":ut?Ct:Nt:b[at]&&(U[z++]="+"),gt=null,U[z++]='"',U[z++]="<",ut++,Q[G++]=tt|et<<28,G+=3,Q[G-2]=Q[G-1]=0,nt=tt=z-1,et=4):U[z++]="<";break;case 14:U[z++]=">";break;case 15:G&&!Q[G-1]&&(U[z-1]=="\n"&&(U[z-1]=""),U[z++]=")",U[z++]="\n",Mt=1,G-=2)}break;case 2:switch(Dt){case 1:ot++,mt=kt,z!=tt&&z!=nt&&(U[z++]="\\n");break;case 2:z==nt&&(U[z]=z++==tt?'"':'+"'),U[z++]=N[f]||f;break;case 3:z==nt&&(U[z]=z++==tt?'"':'+"'),f.charAt(f.length-1)=="$"?(U[z++]=f.slice(0,-1),U[z++]=f="$"):U[z++]=f;break;case 5:z==nt&&(U[z]=z++==tt?'"':'+"'),U[z++]=f=='"'?'\\"':"'";break;case 7:z==nt?z!=tt&&(U[z++]="+"):(U[z++]='"+',ut||$++),Q[G++]=tt|536870912,Q[G++]=U[z++]="{{",ut++,nt=tt=z,et=0;break;case 9:ct=null,(_t=o[at])&&U[z-1]==at?--z-1==tt&&z--:_t=k[ut||tt!=z?0:B],z!=tt&&(U[z]=z++==nt?"+":(ut||$++,'"+'),ut||$++),Q[G++]=tt|536870912,Q[G++]=U[z++]=_t,nt=tt=z,ut++,et=3;break;case 15:if(G)throw{t:"Unclosed "+Q[G-1]+" found at end in textmode",p:kt};z!=tt&&z!=nt&&(U[z++]='"',ut||$++);break;default:z==nt&&(U[z]=z++==tt?'"':'+"'),U[z++]=f}break;case 3:switch(Dt){case 0:z!=tt&&(z==nt&&(U[z++]='+"'),U[z++]=f);break;case 1:ot++,mt=kt;break;case 2:if(f==":"&&at==":"&&!r[_t=U[z-2]]&&(Mt=Q[G-2])>>28!=6){U[z-2]=='+"'?(U[z-2]=U[z-1]="",ct="#"):(U[z-1]='"',nt==tt?ct=U.slice(nt+1,z-1).join(""):ct="#");if(!(_t=L[U[tt-1]]))throw{t:"Invalid model found for: "+U[tt-1],p:kt};U[tt-1]=_t,U[z++]=",",nt=tt=z}else f==","&&(Mt=Q[G-2]>>28)<=1?(z=tt-1,Ot=it.slice(Y[tt]+1,kt+1),ft=9,et=Mt,U[z++]=at="[",Q[G-2]=Q[G-2]&268435455|et<<28,Q[G-1]=at,nt=tt=z,ut--,ut||J--,Ot.length>1&&(Z.push(it),(it=Ot).replace(A,Cn),it=Z.pop())):(z==nt&&(U[z]=z++==tt?'"':'+"'),U[z++]=w[f]||f);break;case 3:z==nt&&(U[z]=z++==tt?'"':'+"'),f.charAt(f.length-1)=="$"?(U[z++]=f.slice(0,-1),U[z++]=f="$"):U[z++]=f;break;case 5:z==nt&&(U[z]=z++==tt?'"':'+"'),Q[G-1]=="["?Q[G-1]=f:Q[G-1]==f&&(Q[G-1]="["),f=='"'&&(U[z++]="\\"),U[z++]=f;break;case 7:z==nt?z!=tt&&(U[z++]="+''+"):U[z++]='"+',Q[G++]=tt|805306368,Q[G++]=U[z++]="{{",ut++,nt=tt=z,et=0,ct&&Q[G-3]!=o["$"]&&(X.push(ct,"#"),ct=null,K++);break;case 9:Q[G-1]=="'"||Q[G-1]=='"'||(ft!=3||at=="$")&&at!=")"&&at!="]"?(ct&&(X.push(ct,"#"),K++),ct=null,(_t=o[at])&&U[z-1]==at?z--:_t=k[0],z==nt?z!=tt&&(U[z++]="+"):U[z++]='"+',Q[G++]=tt|805306368,Q[G++]=U[z++]=_t,ut++,nt=tt=z,et=3):(z==nt&&(U[z]=z++==tt?'"':'+"'),Q[G++]=tt|1610612736,Q[G++]=U[z++]="[");break;case 10:G--,et=(_t=Q[--G])>>28,_t&=268435455;if(et==6){if(Q[G+1]!="[")throw{t:"In xpath, cannot close "+Q[G+1]+" with "+f,p:kt};z==nt&&(U[z]=z++==tt?'"':'+"'),U[z++]="]",et=3}else{if(z==tt)Q[G]>>28<=1?(U[tt-1]="[",U[z++]="]"):U[tt-1]=U[z++]='"',nt=z;else{z!=nt&&(U[z++]='"');if(nt==tt){Mt=U.slice(nt+1,z-1).join("");if(I&&U[tt-1]!=","&&Mt!=(Ot=Mt.replace(O,"$1self::"))&&Q[G+1]!=o["$"]){U[tt+1]=Mt=Ot;for(Ot=tt+2;Ot<z-1;Ot++)U[Ot]=""}}else(Ot=U[tt-1])!=","?(Mt="#",I&&(U[tt-1]=Ot+"_injself(",U[z++]=")")):Mt="";Q[G+1]!=o["$"]&&Mt&&(X.push(ct,Mt),ct&&K++),U[z++]=") ",nt=z,et==7&&(U[z++]='+"\\"',et=4)}ut--,ct=null,ut||($++,J++)}tt=_t;break;case 11:z==nt&&(U[z]=z++==tt?'"':'+"'),Q[G++]=tt|805306368,Q[G++]=U[z++]="(";break;case 12:z==nt&&(U[z]=z++==tt?'"':'+"');if(n[Mt=Q[--G]]!=(U[z++]=f))throw{t:"Cannot close "+Mt+" with "+f,p:kt};tt=Q[--G]&268435455;break;case 15:throw{t:"Unexpected end whilst parsing xpath",p:kt};default:z==nt&&(U[z]=z++==tt?'"':'+"'),U[z++]=f}break;case 4:switch(Dt){case 0:z==nt&&(U[z++]='+"'),U[z++]=" ",ft=0;break;case 1:z==nt&&(U[z++]='+"'),ot++,mt=kt,U[z++]="\\n",ft=1;break;case 2:z==nt&&(U[z++]='+"');if(f=="/"&&at=="<"){G-=4;if(Q[G]||Q[G+2])throw{t:"Unexpected closing tag whilst parsing xml",p:kt}}else f==":"&&ft==3&&U[z-2]=="<"&&(gt=at);U[z++]=N[f]||f;break;case 3:z==nt&&(U[z++]='+"'),f.charAt(f.length-1)=="$"?(U[z++]=f.slice(0,-1),U[z++]=f="$"):U[z++]=f;break;case 5:z==nt&&(U[z++]='+"'),f=='"'&&(U[z++]="\\"),U[z++]=f;break;case 6:if(f=="//"&&!Q[G-1])z==nt&&(U[z++]='+"'),U[z++]=f;else{if(f=="*/")throw{t:"Unmatched comment "+f,p:kt};pt=et,dt=at,vt=ft,et=6,rt=f}break;case 13:gt=null,z==nt&&(U[z++]='+"'),U[z++]=f,Q[G]=Q[G+2]=0,G+=4,Q[G-1]=0;break;case 14:z==nt&&(U[z++]='+"'),U[z++]=f;if(at!="<"){if(at=="/"){G-=4;if(Q[G+2])throw{t:"Unexpected / whilst parsing xml",p:kt};U[z-3]=="<"&&(z-=2,U[z-1]="")}else G-=2;Q[G]?(ut--,U[z++]='"',tt=Q[G],nt=z,et=tt>>28,tt&=268435455):Q[G-1]=1}else z--,U[z-1]="";break;case 9:ct=null,at=="!"&&U[z-2]=="<"&&!Q[G-1]?(U[z++]=f,Q[G++]=tt|et<<28,Q[G++]="]]>",tt=nt=z-1,ut++,et=5):(Q[G-1]?((Mt=a[at])?z--:Mt=k[j],Q[G++]=tt|1073741824):(Q[G++]=tt|1073741824,(Mt=u[at])?(z--,U[z-1]=="="&&(at="=")):Mt=k[gt?F:8],at=="="&&(U[z++]='\\"',Q[G-1]=tt|1879048192)),U[z]=z++==nt?"+''+":'"+',ut++,Q[G++]=U[z++]=Mt,nt=tt=z,et=3);break;case 7:!Q[G-1]&&at=="="?(U[z++]='\\"',Q[G++]=tt|1879048192):Q[G++]=tt|1073741824,U[z]=z++==nt?"+''+":'"+',Q[G++]=U[z++]="{{",ut++,nt=tt=z,et=0;break;default:z==nt&&(U[z++]='+"'),U[z++]=f;break;case 15:throw{t:"Unexpected end whilst parsing xml",p:kt}}break;case 5:switch(Dt){case 1:ot++,mt=kt,z==nt&&(U[z]=z++==tt?'"':'+"'),U[z++]="\\n";break;case 2:f=="/"&&Q[G-1]=="/"?(U[z++]="/",tt=Q[G-=2],nt=z,et=tt>>28,tt&=268435455,ut--):(z==nt&&(U[z]=z++==tt?'"':'+"'),U[z++]=Q[G-1]!="/"&&T[f]||f);break;case 3:z==nt&&(U[z]=z++==tt?"":'+"'),f.charAt(f.length-1)=="$"?(U[z++]=f.slice(0,-1),U[z++]=f="$"):U[z++]=f;break;case 5:Q[G-1]==f?(tt!=nt?U[z]=z++!=nt?f+")":")":U[z++]=f,tt=Q[G-=2],nt=z,et=tt>>28,tt&=268435455,ut--):(z==nt&&(U[z]=z++==tt?'"':'+"'),U[z++]=f=='"'?'\\"':f);break;case 6:Q[G-1]=="/"&&f=="*/"?(U[z++]="*/",tt=Q[G-=2],nt=z,et=tt>>28,tt&=268435455,ut--):(z==nt&&(U[z]=z++==tt?"":'+"'),U[z++]=f);break;case 7:Q[G-1]!="'"&&Q[G-1]!="/"?(Q[G-1]=='"'&&(U[tt]='("'),z==nt?z!=tt&&(U[z++]="+"):U[z++]='"+',Q[G++]=tt|1342177280,U[z++]=Q[G++]="{{",ut++,nt=tt=z,et=0):U[z++]=f;break;case 9:Q[G-1]!="'"&&Q[G-1]!="/"&&(Q[G-1]=='"'&&(U[tt]='("')||z!=tt+2||at!="CDATA")?(ct=null,(_t=o[at])&&U[z-1]==at?z--:_t=k[0],z!=tt&&(U[z]=z++==nt?"+":'"+'),Q[G++]=tt|1342177280,Q[G++]=U[z++]=_t,nt=tt=z,ut++,et=3):U[z++]=f;break;case 14:z==nt&&(U[z]=z++==tt?"":'+"'),U[z++]=f,Q[G-1]=="]]>"&&at=="]"&&U[z-3]=="]"&&(tt=Q[G-=2],et=tt>>28,tt&=268435455,ut--,G-=4,Q[G]?(ut--,U[z++]='"',tt=Q[G],nt=z,et=tt>>28,tt&=268435455):Q[G-1]=1);break;case 15:throw{t:"Unexpected end whilst parsing string",p:kt};default:z==nt&&(U[z]=z++==tt?"":'+"'),U[z++]=f}break;case 6:switch(Dt){case 1:ot++,mt=kt,rt=="//"&&(et=pt,f=at=dt,Dt=ft=vt);break;case 6:if(rt=="/*"&&f=="*/"||rt=="<!--"&&f=="-->")et=pt,f=at=dt,Dt=ft=vt;break;case 15:if(rt!="//")throw{t:"Unexpected end whilst parsing comment",p:kt};et=pt,f=at=dt,Dt=ft=vt,G&&!Q[G-1]&&(U[z-1]=="\n"&&(U[z-1]=""),U[z++]=")",U[z++]="\n",Mt=1,G-=2)}}Dt>1&&(at=f,ft=Dt)}function kn(e,t,n,r){throw e.t?new Error(apf.formatErrorString(0,null,"Parsing live markup source","Error whilst parsing: "+e.t+" on line:"+ot+" col:"+(e.p-t-2)+(n?" part: "+n:"")+"\n"+it)):new Error(apf.formatErrorString(0,null,"Compiling live markup function on line "+r,"Error whilst compiling: "+e.message+"\nInput:\n"+it+"\nGenerated:\n"+apf.lm.lastCode()))}var e={"var":1,"for":1,"while":1,"do":1,"if":1,"else":1,"switch":1,"case":1,"break":1,"continue":1,"default":1,"function":2,"return":1,"try":1,"catch":1,"throw":1,"debugger":1,alert:1,confirm:1,setTimeout:1,setInterval:1,"delete":1,"export":1,"import":1,label:1,foreach:1,each:1,eachrev:1,foreachrev:1,node:1,local:1,yield:1,let:1,"finally":1,"delete":1},t={"\n":1,"\r\n":1,"==":2,"++":2,"--":2,'"':5,"'":5,"<!--":6,"-->":6,"/*":6,"//":6,"*/":6,"{":7,"}":8,"[":9,"]":10,"(":11,")":12,"<":13,">":14,"+=":2,"-=":2,"/=":2,"*=":2,"!=":2},n={"{":"}","[":"]","(":")","{{":"}"},r={ancestor:1,"ancestor-or-self":1,attribute:1,child:1,descendant:1,"descendant-or-self":1,following:1,"following-sibling":1,namespace:1,parent:1,preceding:1,self:1},i={";":1,",":2,"^":3,"=":4,"+=":4,"-=":4,"/=":4,"*=":4,"/":5,":":6},s={"~":"_val(_n,","%":"_nod(_n,","*":"_nods(_n,","#":"_cnt(_n,",$:"_lng("},o={"~":"_val(_n,","%":"_xml(_n,","*":"_xmls(_n,","#":"_cnt(_n,",$:"_lng("},u={"~":"_val(_n,","%":"_val(_n,","*":"_val(_n,","#":"_cnt(_n,",$:"_lng("},a,f={"~":"_val(_n,","%":"_xml(_n,","*":"_xmls(_n,","#":"_cnt(_n,",$:"_lng("},l={"~":"_val(_n,","%":"_xml(_n,","*":"_xmls(_n,","#":"_cnt(_n,",$:"_lnged("},c={"[":1,"(":1,",":1,"=":1,"return":1,"throw":1},h={"else":1,"return":1,"delete":1},p={"do":1,"else":1,"try":1},d={"=":"_asn(","+=":"_add(","-=":"_sub(","/=":"_div(","*=":"_mul("},v={"+":1,"%":1,"-":1,"/":1,"=":1,"(":1,"?":1,"|":1,"^":1,"[":1,"&":1,"*":1,"!":1,":":1,"<":1,",":1},m={"{":1,"} ":1,")":1,")   ":1,";":1,"\n":1,"else":1},g={"{":1,";":1,"\n":1,"else":1},y={"} ":1,")   ":1,"(":1,";":1,"&":1,"^":1,"|":1,",":1,'"':1,"'":1,"=":1,"!=":2,"+=":2,"-=":2,"/=":2,"*=":2,"?":1,"{":1,"}":1,">":1,"[":1,"+":1,":":1,"else":1,"return":1},b={'"':1,"'":1,">":1,"]":1,"}":1},w={'\\"':'"',"\\'":"'","\\{":"{","\\}":"}","\\[":"[","\\]":"]","\\(":"(","\\)":")","\\\\":"\\"},E={alert:1,confirm:1,setTimeout:1,setInterval:1,"switch":1,call:1,"return":1,"throw":1,"case":1,"catch":1,abs:1,acos:1,asin:1,atan:1,atan2:1,ceil:1,cos:1,exp:1,floor:1,log:1,max:1,min:1,pow:1,random:1,round:1,sin:1,sqrt:1,tan:1,lin:1,linear:1,idx:1,sort:1,"typeof":1},S={" ":1,"\n":1},x={"{":1,";":1,"(":1,"\n":1},T={"\\{":"{","\\}":"}","\\[":"[","\\]":"]","\\(":"(","\\)":")"},N={"\\{":"{","\\}":"}","\\[":"[","\\]":"]","\\(":"(","\\)":")","\\\\":"\\\\\\\\","\\":"\\\\","\\<":"<","\\>":">"},C={lte:"<=",gte:">=",lt:"<",gt:">",and:"&&",or:"||",andbin:"&",orbin:"|",LTE:"<=",GTE:">=",LT:"<",GT:">",AND:"&&",OR:"||",ANDBIN:"&",ORBIN:"|"},k={0:"_val(_n,",1:"_valcr(_n,_cr,",2:"_nod(_n,",3:"_nodcr(_n,_cr,",4:"_nods(_n,",5:"_xpt(_n,",6:"_valst(_n,",7:"_valed(_n,",8:"_valattr(_n,",foreach:"_nods(_n,",each:"_nods(_n,",foreachrev:"_nods(_n,",eachrev:"_nods(_n,",xabs:"_valst(_n,",local:"_nod(_n,",tagName:"_nod(_n,",localName:"_nod(_n,",xml:"_xmlq(",_call:"_val(_n,"},L={"_val(_n,":"_valm(","_valcr(_n,_cr,":"_valcr(0,_cr,","_nod(_n,":"_nodm(","_nodcr(_n,_cr,":"_nodcr(0,_cr,","_nods(_n,":"_nodsm(","_argwrap(_n,":"_argwrapm(","_xml(_n,":"_xml(0,","_xmls(_n,":"_xmls(0,","_cnt(_n,":"_cntm(","_xpt(_n,":"_xptm(","_valst(_n,":"_valm(","_valed(_n,":"_valed(0,","_lng(":"_lng(","_lnged(":"_lnged("},A=/(\r?[\n]|\/\*|\*\/|\/\/|\<\!\-\-|\-\-\>|[=\!+\/\*-]=|\+\+|\-\-|["'{(\[\])}\]\<\>]|$)|([ \t]+)|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF.$_][\w.$_]*)|(\d[x\d.]*)|(\\?[\w._?,:;!=+-\\\/^&|*"'[\]{}()%$#@~`<>]?)/g,O=/(^|\|)(?!\@|text\(\)|\.\.|[\w\-\:]+?\:\:)/g,M={},_={},D={},P=apf.$asyncObjects||{comm:1,rpc:1,http:1,"apf.ajax":1},H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q=[],G,Y=[],Z=[],et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt;M["if"]="if(",_["if"]=")",M["while"]="while(",_["while"]=")",M["for"]="for(",_["for"]=")",M["switch"]="switch(",_["switch"]=")",M["catch"]="catch(",_["catch"]=")",_["function"]=")  ",M.foreach=M.each="\nfor(var _t=_t||[],_t=(_t.push(_n,0,(",_.foreach=_.each=")||[]),_t);(_n=_t[_t.length-1][_t[_t.length-2]++])||(_t.length-=2,_n=_t.pop(),0);)",M.foreachrev=M.eachrev="\nfor(var _t=_t||[],_t=(_t.push(_n,0,(",_.foreachrev=_.eachrev=")||[]),_t);(_n=_t[_t.length-1][_t[_t.length-1].length-(_t[_t.length-2]++)-1])||(_t.length-=2,_n=_t.pop(),0);)",M.local="\nfor(var _t=_t||[],_t=(_t.push(_n,((_n=_local(",_.local=")),1)),_t);(_t[_t.length-1]--&&_n)||(_t.length--,_n=_t.pop(),0);)",M._editlm="_valedx(true, ",M._editnormal="_valedx(false, ",_.edit=")",M.xabs="  (  ",_.xabs="  )  ",M.localName="_localName(_n",_.localName=")",M.output="_o.join(''",_.output=")",M.reset="(_o=[],l=0",_.reset=")",M.index="apf.getChildNumber.call(apf",_.index=")",M.item="(_t[_t.length-1][_t[_t.length-2]-1]",_.item=")",M.first="(_t[_t.length-2]==1",_.first=")",M.last="(_t[_t.length-2]==_t[_t.length-1].length",_.last=")",M.total="(_t[_t.length-1].length",_.total=")",M.pos="(_t[_t.length-2]-1",_.pos=")",M.tagName="_tagName(_n",_.tagName=")",M._nodeValue="_nodeValue(_n",_._nodeValue=")",_.async="])",_.precall="])",_._call=")";var bt={_call:".call(_n",localName:M.localName,tagName:M.tagName,nodeValue:M.nodeValue,index:M.index},wt="(function(){var _o=[],_l=0;\n",Et=";return _l==1?_o[0]:_o.join('');}).call(this)",St="_async(_n,_c,_a,_w,_f,this,",xt="',_a[++_a.i]||[",Tt="_r=",Nt,Ct="_o[_l++]=",kt="",Lt="{var _o=[],_l=0,_n=this;\n",At=";\nreturn _l==1?_o[0]:_o.join('');}",Ot="(_a=_a||{}).i=0;try{\n",Mt="}catch(_e){if(_e.x)return;throw(_e);}\n",_t="(_a=_a||{}).i=0;try{_precall(_w);",Dt="}catch(_e){if(_e.x)return;throw(_e);}",Pt="with(_w){",Ht="}",Bt="var _o=[],_l=0;_o[_l++]=",jt="var _o=[],_l=0;\n",Ft=";\nreturn _ret(_l==1?_o[0]:_o.join(''));",It=";\n_c(_ret(_l==1?_o[0]:_o.join('')),apf.SUCCESS,apf.$lmx);apf.$lmx=null;",qt="return _ret(",Rt=");",Ut="_c(_ret(",zt="),apf.SUCCESS,apf.$lmx);apf.$lmx=null;\n",Wt="var _r=",Xt="var _r;",Vt=";\nreturn _r;",$t=";\n_c(_r,apf.SUCCESS,apf.$lmx);apf.$lmx=null;",Jt=";\n_c(0,apf.SUCCESS,apf.$lmx);apf.$lmx=null;;",Kt="return ",Qt="",Gt="_c(",Yt=",apf.SUCCESS);",Zt="var _f=function(_n,_c,_w,_a){",en="var _f=function(_n,_w){",tn="var _f=function(_n){",nn="var _f=function(_n,_c,_w,_cr,_a){",rn="var _f=function(_n,_w,_cr,){",sn="var _f=function(_n,_cr){",on="var _f=function(event,_c,_w,_a,_n){",un="var _f=function(event,_w,_n){",an="var _f=function(event,_n){",fn="}",ln="var _f=function(_m){",cn=";\nif(_n=_r){if(!_n.nodeType)_n=_m;",hn=";\nif(_n=",pn="){if(!_n.nodeType)_n=_m;",dn="\nreturn ",vn="\nreturn _ret(",mn=");",gn="\nreturn _n;",yn="\nreturn (_r = (",bn="))?(_r.nodeType?_r:_n):(_r===null?null:_n);",wn="var _r, _n = _m;",En=";\n_n = _m;",Sn="\nreturn _ret(_nodeValue(_n));",xn="\nreturn _n;",Tn="\n}";this.lastCode=function(){return typeof U=="object"?U.join(""):U};var Ln={},An={};this.resetCache=function(){Ln={}};var On=/^\s*~~(c\d+)~~/;this.compile=function(e,t){t||(t=An);if(e==null||!e.length)return t.nostring||t.event?function(){return e}:{type:2,str:e};var n,r,i;if(e.charAt(0)=="~"&&(n=e.match(On)))return(n=apf.lm_exec[n[1]])?n:(alert("ERROR, undefined live markup cache marker found:"+e),{type:2,str:e});var s=(t.xpathmode|(t.withopt&&16)|(t.precall&&32)|(t.alwayscb&&64)|(t.nostring&&128)|(t.parsecode&&256)|(t.nostate&&512)|(t.liveedit&&1024)|(t.langedit&&2048)|(t.injectself&&4096)|(t.event&&8192)|(t.funcglobal&&16384))+e;if(n=Ln[s])return n;I=t.injectself,B=t.xpathmode||0,F=t.nostate?0:6,j=0,R=t.funcglobal?"self":t.withopt?"_w":null,H=!t.event,k.edit=t.liveedit?"_argwrap(_n,":"_argwrap(_n,",M.edit=t.liveedit?M._editlm:M._editnormal,a=t.langedit?l:f,V={},X=[],Q=[],U=["","","",""],it=e,st=it.length,z=tt=nt=U.length,$=J=W=K=ut=ot=ft=mt=0,t.parsecode?(et=0,G=2,Q[0]=z,Q[1]="{{",at="{",Nt=t.event?"":B<=1?Ct:Tt):(et=2,G=at=0,Nt=Ct);if(t.nothrow)it.replace(A,Cn);else try{it.replace(A,Cn)}catch(o){return kn(o,mt),null}if(t.parsecode)(ut||Q[G-1].length==1)&&kn({t:"Unclosed "+Q[G-1]+" found at end in codemode",p:st},mt),nt!=z&&$++;else if((z==7||z==8)&&$==1){i=0;for(n in V)i++;i!=1&&(i=0)}if(!t.nostring&&!t.event&&(et==2&&nt==4||z==4))return{type:2,str:U.slice(5,-1).join("").replace(/\\n/g,"\n").replace(/\\"/g,'"')};W||t.alwayscb?(t.event?(et==1&&(U[3]=""),U[z++]=Jt):B?et==1?(U[3]=U[3]!=wt?Wt:Xt,U[z++]=$t):(U[3]=Gt,U[z++]=Yt):et==1?(U[3]=U[3]!=wt?Bt:jt,U[z++]=It):(U[3]=Ut,U[z++]=zt),W&&(et==1?t.precall?(U[2]=_t,U[z-1]=Dt+U[z-1]):(U[2]=Ot,U[z-1]=Mt+U[z-1]):(U[z++]=U[3]+"_r"+U[z-2],t.precall?(U[2]=_t,U[3]=Wt,U[z-2]=Dt):(U[2]=Ot,U[3]=Wt,U[z-2]=Mt))),t.withopt&&(U[1]=Pt,U[z++]=Ht),U[0]=t.event?on:B==1||B==3?nn:Zt,U[z++]=fn):(t.event?et==1&&(U[3]=""):B?et==1?(U[3]=U[3]!=wt?Wt:Xt,U[z++]=Vt):(U[3]=Kt,U[z++]=Qt):et==1?(U[3]=U[3]!=wt?Bt:jt,U[z++]=Ft):(U[3]=qt,U[z++]=Rt),t.withopt&&(U[2]=Pt,U[z++]=Ht),U[0]=t.event?t.withopt?un:an:t.withopt?B==1||B==3?rn:en:B==1||B==3?sn:tn,U[z++]=fn);if(t.nothrow)r=apf.lm_exec.compile(U.join(""));else try{r=apf.lm_exec.compile(U.join(""))}catch(o){if(!apf.isIE){var u=window.onerror;window.onerror=function(e,t,n){return window.onerror=u,kn(o,mt,null,n),!0},apf.include("","",null,U.join("")),window.onerror=u}else kn(o,mt);return null}return r.type=$==1&&J==1?3:i?4:1,r.xpaths=X,r.models=K,r.props=V,r.asyncs=W,Ln[s]=r,r},this.compileMatch=function(e,t){t||(t=An),V={},X=[],U=[ln,wn],Q=[],ut=0,z=U.length,a=f;for(var n,r,i=0,s=e.length;i<s;i+=2){if(it=e[i]){st=Q.length,B=2,i&&(U[z++]=En),U[z++]="",Q[0]=r=z=tt=nt=U.length,Nt=Tt,ot=ft=$=J=W=et=mt=0,G=2,Q[1]="{{",at="{",I=1;if(t.nothrow)it.replace(A,Cn);else try{it.replace(A,Cn)}catch(o){return kn(o,mt),null}(ut||Q[G-1].length==1)&&kn({t:"Unclosed "+Q[G-1]+" found at end in codemode",p:st}),W&&kn({t:"Asynchronous calls not supported in match/value"}),et==1?(U[r-1]=U[r-1]!=wt?Nt:"",U[z++]=cn):(U[r-1]=hn,U[z++]=pn)}if(it=e[i+1]){st=Q.length,!e[i]&&i&&(U[z++]=En),U[z++]="",r=z=tt=nt=U.length,Nt=Ct,B=I=at=G=ot=$=J=ft=W=mt=0,t.node&&(B=2),et=2,I=0;if(t.nothrow)it.replace(A,Cn);else try{it.replace(A,Cn)}catch(o){return kn(o,mt),null}W&&kn({t:"Asynchronous calls not supported in match/value"}),t.node?et==2&&nt==r||z==r?U[r-1]=gn:(U[r-1]=yn,U[z++]=bn):et==2&&nt==r||z==r?U[r-1]=dn:(U[r-1]=vn,U[z++]=mn);if(!e[i])break;U[z++]=Tn}else e[i]||kn({t:"Both match and value are empty"}),t.node?U[z++]=xn:U[z++]=Sn,B=2,U[z++]=Tn}U[z++]=fn;var u;if(t.nothrow)u=apf.lm_exec.compile(U.join(""));else try{u=apf.lm_exec.compile(U.join(""))}catch(o){return kn(o,mt),null}return u.type=1,u.xpaths=X,u.props=V,u.asyncs=W,u},this.setWarnLevel=function(e){apf.lm_exec.setWarnLevel(e)},this.parseExpression=function(e,t){t||(t=An),V={},X=[],U=[],Q=[],ut=0,a=f,it=e,st=it.length,ob=z=tt=nt=U.length,Nt=Ct,B=I=at=G=ot=$=J=ft=W=mt=0,et=2;if(t.nothrow)it.replace(A,Cn);else try{it.replace(A,Cn)}catch(n){return kn(n,mt),null}return U.join("")}},apf.lm_exec=new function(){function wxpath(e,t){apf.console.warn("Live Markup warning in "+t+", no results for xpath: '"+e+"'")}function wnode(e,t){apf.console.warn("Live Markup warning in "+t+", xpath on null node: '"+e+"'")}function wmodel(e,t,n){apf.console.log("Live Markup warning in "+n+", xpath on empty model: '"+e+"' xpath: '"+t+"'")}function wlang(e,t){apf.console.log("Live Markup warning in "+t+", language symbol not found: '"+e+"'")}function xmlParse(e){var t=apf.getXmlDom("<_apflmlist_>"+e+"</_apflmlist_>");return!t||!(t=t.documentElement)?null:t.firstChild==t.lastChild?t.firstChild:t}function __val(e,t){return e?apf.escapeXML((e=!e.nodeType&&e||(e=e.selectSingleNode(t))&&(e.nodeType!=1&&e||(e=e.firstChild)&&e.nodeType!=1&&e))&&e.nodeValue||""):""}function __valattrrp(e,t){return e=='"'?"&quot;":"&apos;"}function __valattr(e,t){return e?apf.escapeXML((e=e.nodeType!=1&&e||(e=e.selectSingleNode(t))&&(e.nodeType!=1&&e||(e=e.firstChild)&&e.nodeType!=1&&e))&&e.nodeValue.replace(__valattrrx,__valattrrp)||""):""}function __valm(e,t){var n;return!e||!(n=e.charAt&&(e.charAt(0)=="<"&&xmlParse(e)||(n=apf.nameserver.lookup.model[e])&&n.data)||(e.$isModel?e.data:e.charAt?0:e))?"":(n=n.nodeType!=1&&n||(n=n.selectSingleNode(t))&&(n.nodeType!=1&&n||(n=n.firstChild)&&n.nodeType!=1&&n))&&n.nodeValue||""}function __nod(e,t){return e?e.selectSingleNode(t):null}function _nods(e,t){return e?e.selectNodes(t):[]}function __nodm(e,t){var n;return!e||!(n=e.charAt&&(e.charAt(0)=="<"&&xmlParse(e)||(n=apf.nameserver.lookup.model[e])&&n.data)||(e.$isModel?e.data:e.charAt?0:e))?null:n.selectSingleNode(t)}function _nodsm(e,t){var n;return!e||!(n=e.charAt&&(e.charAt(0)=="<"&&xmlParse(e)||(n=apf.nameserver.lookup.model[e])&&n.data)||(e.$isModel?e.data:e.charAt?0:e))?[]:n.selectNodes(t)}function __cnt(e,t){return e?e.selectNodes(t).length:0}function __cntm(e,t){var n;return!e||!(n=e.charAt&&(e.charAt(0)=="<"&&xmlParse(e)||(n=apf.nameserver.lookup.model[e])&&n.data)||(e.$isModel?e.data:e.charAt?0:e))?0:n.selectNodes(t).length}function _xpt(e,t){return{xpath:t,toString:function(){return"LM Xpath object: "+this.x}}}function _xptm(e,t){if(e&&!e.$isModel){var n=e;e=apf.xmldb.findModel(e),t=apf.xmlToXpath(n,e.data)+"/"+t}return{model:e,xpath:t,toString:function(){return"LM Xpath object with model: "+this.x}}}function _xml(e,t,n){if(e)n=t;else if(!t||!(e=t.charAt&&(t.charAt(0)=="<"&&xmlParse(t)||(e=apf.nameserver.lookup.model[t])&&e.data)||(t.$isModel?t.data:t.charAt?0:t)))return"";return e&&(e=e.selectSingleNode(n))&&e.xml||""}function _xmls(e,t,n){if(e)n=t;else if(!t||!(e=t.charAt&&(t.charAt(0)=="<"&&xmlParse(t)||(e=apf.nameserver.lookup.model[t])&&e.data)||(t.$isModel?t.data:t.charAt?0:t)))return"";for(var r=0,i=(e=e.selectNodes(n)).length,s=[];r<i;r++)s[r]=e[r].xml;return s.join("")}function _valcr(e,t,n,r){if(e)r=n;else if(!n||!(e=n.charAt&&(n.charAt(0)=="<"&&xmlParse(n)||(e=apf.nameserver.lookup.model[n])&&e.data)||(n.$isModel?n.data:n.charAt?0:n)))return"";if(t)apf.createNodeFromXpath(ni,r);else if(e=ni.selectSingleNode(r))return(e=e.nodeType!=1&&e||(e=e.selectSingleNode(r))&&(e.nodeType!=1&&e||(e=e.firstChild)&&e.nodeType!=1&&e))&&e.nodeValue||"";return""}function _nodcr(e,t,n,r){if(e)r=n;else if(!n||!(e=n.charAt&&(n.charAt(0)=="<"&&xmlParse(n)||(e=apf.nameserver.lookup.model[n])&&e.data)||(n.$isModel?n.data:n.charAt?0:n)))return null;return e.selectSingleNode(r)||t&&apf.createNodeFromXpath(e,r)}function _valst(e,t){var n=apf.xmldb.findModel(e);return n?"["+n.id+"::"+apf.xmlToXpath(e,n.data,!0)+(!t||t=="."?"":"/"+t)+"]":""}function _asn(e,t,n){if(!e||typeof e!="object")throw new Error(apf.formatErrorString(0,0,"LM Property Assign","Cannot assign property on non object, property:"+t));return e.setAttribute?e.setAttribute(t,n):e[t]=n,n}function _add(e,t,n){return _asn(e,t,e&&e[t]+n)}function _sub(e,t,n){return _asn(e,t,e&&e[t]-n)}function _div(e,t,n){return _asn(e,t,e&&e[t]/n)}function _mul(e,t,n){return _asn(e,t,e&&e[t]*n)}function _local(e){return e&&e.charAt&&e.charAt(0)=="<"?apf.getXmlDom(e).documentElement:e}function _tagName(e,t){return t&&t.tagName||e&&e.tagName}function _localName(e,t){return t&&t[apf.TAGNAME]||e&&e[apf.TAGNAME]}function _nodeValue(e,t){return t&&(e=t),(e=e.nodeType!=1&&e||e.nodeType!=1&&e||(e=e.firstChild)&&e.nodeType!=1&&e)&&e.nodeValue||""}function __ret(e){return e}function __lng(e,t){return"$["+e+"]"}function _lnged(e,t){return"$["+e+"]"}function _(e,t,n){return'<span class="liveEdit" xpath="'+(e?(t.substr(0,1)!="/"?apf.xmlToXpath(e,null,!1):"")+"/"+t:"")+'">'+((e?__val(e,t):__valm(t,n))||"&#32;")+"</span>"}function _argwrap(e,t){return[e,t]}function _argwrapm(e,t){return[0,e,t]}function _valedx(e,t,n){return t[3]=n,t[4]=e,_valed.apply(this,t)}function _valed(e,t,n,r,i){var s=e?__val(e,t):__valm(t,n);r&&r.multiline&&r.editor!="richtext"&&(s=s.replace(/\n/g,"<br />"));if(i!==!1){var o=s||r&&r.initial||"&#32;";if(!r||!r.richtext)o=apf.htmlentities(o);return r&&r.multiline&&(o=o.replace(/&lt;br ?\/?&gt;/g,"<br />").replace(/&lt;(\/?div)&gt;/g,"<$1>")),'<div onmousedown="apf.LiveEdit.mousedown(this, event)" class="liveEdit'+(r&&r.multiline?" liveeditMultiline":"")+(!s&&r&&r.initial?" liveEditInitial":"")+'" xpath="'+(e?((t.substr(0,1)!="/"?apf.xmlToXpath(e,null,!1):"")+"/"+t).replace(/([\[\{\}\]])/g,"\\$1"):self[t]?(t+".queryNode('"+n.replace(/'/g,"\\'")+"')").replace(/([\[\{\}\]])/g,"\\$1"):"")+'"'+(r?' options="'+JSON.stringify(r).escapeHTML().replace(/"/g,"&quot;").replace(/([\[\{\}\]])/g,"\\$1")+'"'+(r.editor?' editor="'+r.editor+'"':""):"")+">"+o+"</div>"}return s}function _injself(e){return e.charAt?e.replace(selfrx,"$1self::"):e}function _async(e,t,n,r,i,s,o,u,a){var f=n.i,l;n.ret||(n.ret=[]);if(n[f])return n.ret[f];n[f]=!0;if(!o.exec)return n.ret[f]=u?o[u].apply(o,a):o.apply(o,a);var c=function(o,u,a){r&&delete r._pc,u!=apf.SUCCESS?t(null,u,a):(apf.$lmx=a,n.ret[f]=o,r?i.call(s,e,t,r,n):i.call(s,e,t,n))};throw r&&r._pc?r._pc={obj:o,func:u,args:a,message:o.createMessage&&o.createMessage(u,a),_c:t,cb:c}:o.exec(u,a,c),{x:1}}function _precall(e){var t;if(typeof (t=e._pc)!="object"||!t)return;throw t.obj.exec(t.func,t.args,t.cb,{message:t.message}),{x:1}}function sort(e,t,n){var r=new apf.Sort;return n=n||{},t.charAt||(t=""),t.charAt(0)=="@"?(t=t.slice(1),n.getValue=function(e){return e.getAttribute(t)}):n.getValue=function(e){return apf.queryValue(e,t)},r.set(n),r.apply(apf.getArrayFromNodelist(e))}function _cthex(e){var t;if((t=typeof e)=="string"){if(e.indexOf("#")==0)return e.length==7?parseInt(e.slice(-1),16):parseInt(e.slice(-1),16);if(t=_clut[a])return t;if(e=e.match(_cparse)){if((t=e[1])=="rgb")return(((t=e[2])<0?0:t>255?255:parseInt(t))<<16)+(((t=e[3])<0?0:t>255?255:parseInt(t))<<8)+((t=e[4])<0?0:t>255?255:parseInt(t));var n=parseFloat(e[2]),r=parseFloat(e[3]),i=parseFloat(e[4]),s,o=i*(1-r),u=i*(1-r*((s=floor((n<0?-n:n)%1*6))?n-s:1-(n-s)));switch(s){case 6:case 0:return((i&255)<<16)+((u&255)<<8)+(o&255);case 1:return((u&255)<<16)+((i&255)<<8)+(o&255);case 2:return((o&255)<<16)+((i&255)<<8)+(u&255);case 3:return((o&255)<<16)+((u&255)<<8)+(i&255);case 4:return((u&255)<<16)+((o&255)<<8)+(i&255);default:case 5:return((i&255)<<16)+((o&255)<<8)+(u&255)}}}else if(t=="number")return t;return null}function lin(e,t,n){var r=parseFloat(t),i=parseFloat(n),s=1-(e=e<0?0:e>1?1:e);return r!=t||i!=n?((r=_cthex(t))&16711680)*e+((i=_cthex(n))&16711680)*s&16711680|(r&65280)*e+(i&65280)*s&65280|(r&255)*e+(i&255)*s&255:e*r+s*i}function tsin(e){return.5*sin(e)+.5}function tcos(e){return.5*cos(e)+.5}function usin(e){return.5-.5*sin(e)}function ucos(e){return.5-.5*cos(e)}function snap(e,t){return round(e/t)*t}function clamp(e,t,n){return e<t?t:e>n?n:e}var wlvl=1;this.setWarnLevel=function(e){wlvl=e};var __valattrrx=/(["'])/g,selfrx=/(^|\|)(?!\@|text\(\)|\.\.|[\w\-\:]+?\:\:)/g;apf.$lmx=null;var _clut=apf.color?apf.color.colorshex:{},_cparse=/^(rgb|hsv|hsb)\(\s+(\d+)\s+,\s+(\d+)\s+,\s+(\d+)\)/,abs=Math.abs,acos=Math.acos,asin=Math.asin,atan=Math.atan,atan2=Math.atan2,ceil=Math.ceil,cos=Math.cos,exp=Math.exp,floor=Math.floor,log=Math.log,max=Math.max,min=Math.min,pow=Math.pow,random=Math.random,round=Math.round,sin=Math.sin,sqrt=Math.sqrt,tan=Math.tan,linear=lin;this.compile=function(code){var _ret=__ret,_val=__val,_valm=__valm,_nod=__nod,_nodm=__nodm,_cnt=__cnt,_cntm=__cntm,_lng=__lng,_valattr=__valattr;return eval(code),_f},this.compileWith=function(code,withs){var _ret=__ret,_val=__val,_valm=__valm,_nod=__nod,_nodm=__nodm,_cnt=__cnt,_cntm=__cntm,_lng=__lng,_valattr=__valattr;return eval(code),_f};var LMBEGINCACHE,LMENDCACHE},apf.url=function(e){var t,n=window.location&&window.location.toString()||"";e.indexOf(":")==-1&&(t=n).indexOf(":")!=-1&&(t=new apf.url(t),e=apf.getAbsolutePath(t.protocol+"://"+t.host+(t.directory.charAt(0)=="/"?"":"/")+(t.directory.charAt(t.directory.length-1)=="/"?t.directory:t.directory+"/"),e).replace(/\/\/\/\//,"///"));var r=apf.url.options,i=r.parser[r.strictMode?"strict":"loose"].exec(e),s=14;this.uri=e.toString();while(s--)this[r.key[s]]=i[s]||"";this[r.q.name]={};var o=this;this[r.key[12]].replace(r.q.parser,function(e,t,n){t&&(o[r.q.name][t]=n)}),this.isSameLocation=function(){return this.uri.length&&this.uri.charAt(0)=="#"?!1:!this.protocol&&!this.port&&!this.host?!0:!this.protocol&&this.host&&this.port&&window.location.hostname==this.host&&window.location.port==this.port?!0:!this.protocol&&this.host&&!this.port&&window.location.hostname==this.host&&window.location.port==80?!0:window.location.protocol==this.protocol+":"&&window.location.hostname==this.host&&(window.location.port==this.port||!window.location.port&&!this.port)}},apf.url.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},apf.runXpath=function(){function getNodeValue(e){return e.nodeType==1?e.firstChild?e.firstChild.nodeValue:"":e.nodeType>1||e.nodeType<5?e.nodeValue:e}apf.XPath={cache:{},getSelf:function(e,t,n,r,i,s){var o=0,u=null,a=n[r];a?a[0](e,a[1],n,r+1,o++,s):s.push(e)},getChildNode:function(e,t,n,r,i,s){var o=0,u=null,a=n[r],f=e.childNodes;if(!f)return;for(var l=0;l<f.length;l++){if(t&&t!=f[l].tagName&&(f[l].style?f[l].tagName.toLowerCase():f[l].tagName)!=t)continue;e=f[l],a?a[0](f[l],a[1],n,r+1,o++,s):s.push(f[l])}},doQuery:function(htmlNode,qData,info,count,num,sResult){var result=null,data=info[count],query=qData[0],returnResult=qData[1];try{var qResult=eval(query)}catch(e){apf.console.error(e.name+" "+e.type+":"+apf.XPath.lastExpr+"\n\n"+query);return}if(returnResult)return sResult.push(qResult);if(!qResult||qResult.dataType==apf.ARRAY&&!qResult.length)return;data?data[0](htmlNode,data[1],info,count+1,0,sResult):sResult.push(htmlNode)},getTextNode:function(e,t,n,r,i,s){var o=n[r],u=e.childNodes;for(var a=0;a<u.length;a++){if(u[a].nodeType!=3&&u[a].nodeType!=4)continue;o?o[0](u[a],o[1],n,r+1,a,s):s.push(u[a])}},getAnyNode:function(e,t,n,r,i,s){var o=n[r],u=e.getElementsByTagName("*");for(var a=0;a<u.length;a++)o?o[0](u[a],o[1],n,r+1,a,s):s.push(u[a])},getAttributeNode:function(e,t,n,r,i,s){if(!e||e.nodeType!=1)return;if(t=="*"){var o=e.attributes;for(var u=0;u<o.length;u++)arguments.callee.call(this,e,o[u].nodeName,n,r,u,s);return}var a=n[r],f=e.getAttributeNode(t);a?a[0](f,a[1],n,r+1,0,s):f&&s.push(f)},getAllNodes:function(e,t,n,r,i,s){var o=n[r],u=t[0],a=t[1],f=t[2],l,c,h;a&&(e.tagName==u||u=="*"||u=="node()")&&(o?o[0](e,o[1],n,r+1,0,s):s.push(e)),u=="node()"?(u="*",f="",apf.isIE?l=e.getElementsByTagName("*"):(l=[],function p(e){for(var t,n=0;n<e.childNodes.length;n++){t=e.childNodes[n];if(t.nodeType!=1)continue;l.push(t),p(t)}}(e))):l=e.getElementsByTagName((f&&(apf.isGecko||apf.isOpera||e.nodeFunc)?f+":":"")+u);for(c=0,h=l.length;c<h;c++)o?o[0](l[c],o[1],n,r+1,c,s):s.push(l[c])},getAllAncestorNodes:function(e,t,n,r,i,s){var o=n[r],u=t[0],a=t[1],f=0,l=a?e:e.parentNode;while(l&&l.nodeType==1){if(l.tagName==u||u=="*"||u=="node()")o?o[0](l,o[1],n,r+1,++f,s):s.push(l);l=l.parentNode}},getParentNode:function(e,t,n,r,i,s){var o=n[r],u=e.parentNode;o?o[0](u,o[1],n,r+1,0,s):u&&s.push(u)},getPrecedingSibling:function(e,t,n,r,i,s){var o=n[r],u=e.previousSibling;while(u){if(t!="node()"&&(u.style?u.tagName.toLowerCase():u.tagName)!=t){u=u.previousSibling;continue}if(o)o[0](u,o[1],n,r+1,0,s);else if(u){s.push(u);break}}},getFollowingSibling:function(e,t,n,r,i,s){var o=null,u=n[r],a=e.nextSibling;while(a){if(t!="node()"&&(a.style?a.tagName.toLowerCase():a.tagName)!=t){a=a.nextSibling;continue}if(u)u[0](a,u[1],n,r+1,0,s);else if(a){s.push(a);break}}},multiXpaths:function(e,t,n,r,i,s){for(var o=0;o<t.length;o++){n=t[o][0];var u=n[3]?e.ownerDocument.documentElement:e;n[0](u,n[1],t[o],1,0,s)}s.makeUnique()},compile:function(e){var t=e.match(/^\//);return e=e.replace(/\[(\d+)\]/g,"/##$1").replace(/\|\|(\d+)\|\|\d+/g,"##$1").replace(/\.\|\|\d+/g,".").replace(/\[([^\]]*)\]/g,function(e,t){return"/##"+t.replace(/\|/g,"_@_")}),e=="/"||e=="."?e:this.processXpath(e.replace(/\/\//g,"descendant::"),t)},processXpath:function(e,t){var n=[],r,i,s,o;e=e.replace(/'[^']*'/g,function(e){return e.replace("|","_@_")}),e=e.split("|");for(r=0,i=e.length;r<i;r++)e[r]=e[r].replace(/_\@\_/g,"|");if(e.length!=1){for(r=0,i=e.length;r<i;r++)e[r]=this.processXpath(e[r]);return n.push([this.multiXpaths,e]),n}e=e[0];var u=e.split("/");for(r=0,i=u.length;r<i;r++){if(u[r]=="."||u[r]=="")continue;if(u[r]=="..")n.push([this.getParentNode,null]);else if(u[r].match(/^[\w\-_\.]+(?:\:[\w\-_\.]+){0,1}$/))n.push([this.getChildNode,u[r]]);else if(u[r].match(/^\#\#(\d+)$/))n.push([this.doQuery,["num+1 == "+parseInt(RegExp.$1)]]);else if(u[r].match(/^\#\#(.*)$/)){o=RegExp.$1,s=[o.match(/\(/g),o.match(/\)/g)];if(s[0]||s[1])while(!s[0]&&s[1]||s[0]&&!s[1]||s[0].length!=s[1].length){if(!u[++r])break;o+="/"+u[r],s=[o.match(/\(/g),o.match(/\)/g)]}n.push([this.doQuery,[this.compileQuery(o)]])}else if(u[r]=="*")n.push([this.getChildNode,null]);else if(u[r].substr(0,2)=="[]")n.push([this.getAllNodes,["*",!1]]);else if(u[r].match(/descendant-or-self::node\(\)$/))n.push([this.getAllNodes,["*",!0]]);else if(u[r].match(/descendant-or-self::([^\:]*)(?:\:(.*)){0,1}$/))n.push([this.getAllNodes,[RegExp.$2||RegExp.$1,!0,RegExp.$1]]);else if(u[r].match(/descendant::([^\:]*)(?:\:(.*)){0,1}$/))n.push([this.getAllNodes,[RegExp.$2||RegExp.$1,!1,RegExp.$1]]);else if(u[r].match(/ancestor-or-self::([^\:]*)(?:\:(.*)){0,1}$/))n.push([this.getAllAncestorNodes,[RegExp.$2||RegExp.$1,!0,RegExp.$1]]);else if(u[r].match(/ancestor::([^\:]*)(?:\:(.*)){0,1}$/))n.push([this.getAllAncestorNodes,[RegExp.$2||RegExp.$1,!1,RegExp.$1]]);else if(u[r].match(/^\@(.*)$/))n.push([this.getAttributeNode,RegExp.$1]);else if(u[r]=="text()")n.push([this.getTextNode,null]);else if(u[r]=="node()")n.push([this.getChildNode,null]);else if(u[r].match(/following-sibling::(.*)$/))n.push([this.getFollowingSibling,RegExp.$1.toLowerCase()]);else if(u[r].match(/preceding-sibling::(.*)$/))n.push([this.getPrecedingSibling,RegExp.$1.toLowerCase()]);else if(u[r]=="self::node()")n.push([this.getSelf,null]);else if(u[r].match(/self::(.*)$/))n.push([this.doQuery,["apf.XPath.doXpathFunc(htmlNode, 'local-name') == '"+RegExp.$1+"'"]]);else{o=u[r],s=[o.match(/\(/g),o.match(/\)/g)];if(s[0]||s[1])while(!s[0]&&s[1]||s[0]&&!s[1]||s[0].length!=s[1].length){if(!u[++r])break;o+="/"+u[r],s=[o.match(/\(/g),o.match(/\)/g)]}n.push([this.doQuery,[this.compileQuery(o),!0]])}}return n[0][3]=t,n},compileQuery:function(e){return(new apf.CodeCompilation(e)).compile()},doXpathFunc:function(e,t,n,r,i,s,o){if(!n||n.length==0)n="";if(t=="not")return!n;if(!o){var u,a,f;if(typeof n=="object"||n.dataType==apf.ARRAY){n&&!n.length&&(n=[n]);var l=!1,c;for(a=0,f=n.length;a<f;a++){s=n[a],!s||typeof s=="string"||"position|last|count|local-name|name".indexOf(t)>-1?c=s:(s.nodeType==1&&s.firstChild&&s.firstChild.nodeType!=1&&(s=s.firstChild),c=s.nodeValue);if(l=arguments.callee.call(this,e,t,c,r,i,s,!0))return l}return l}u=n}else u=n;switch(t){case"position":return apf.getChildNumber(e)+1;case"format-number":return apf.formatNumber(u);case"floor":return Math.floor(u);case"ceiling":return Math.ceil(u);case"starts-with":return u?u.substr(0,r.length)==r:!1;case"string-length":return u?u.length:0;case"count":return u?u.length:0;case"last":return u?u[u.length-1]:null;case"name":var h=s||e;return h.nodeName||h.tagName;case"local-name":var h=s||e;if(h.nodeType!=1)return!1;return h.localName||(h.tagName||"").split(":").pop();case"substring":return u&&r?u.substring(r,i||0):"";case"contains":return u&&r?u.indexOf(r)>-1:!1;case"concat":var p="";for(a=1,f=arguments.length;a<f;a++){if(typeof arguments[a]=="object"){p+=getNodeValue(arguments[a][0]);continue}p+=arguments[a]}return p;case"translate":for(a=0,f=r.length;a<f;a++)u=u.replace(r.substr(a,1),i.substr(a,1));return u}},selectNodeExtended:function(e,t,n){var r=this.selectNodes(e,t);if(r.length==0)return null;if(!n)return r;for(var i=0,s=r.length;i<s;i++)if(String(getNodeValue(r[i]))==n)return[r[i]];return null},getRoot:function(e){while(e.parentNode&&e.parentNode.nodeType==1)e=e.parentNode;return e.parentNode},selectNodes:function(e,t){this.cache[e]||(this.cache[e]=this.compile(e));if(typeof this.cache[e]=="string"){if(this.cache[e]==".")return[t];if(this.cache[e]=="/")return[t.nodeType==9?t.documentElement:this.getRoot(t)]}if(typeof this.cache[e]=="string"&&this.cache[e]==".")return[t];var n=this.cache[e][0],r=n[3]?t.nodeType==9?t.documentElement:this.getRoot(t):t,i=[];return r&&n[0](r,n[1],this.cache[e],1,0,i),i}},apf.CodeCompilation=function(e){this.data={F:[],S:[],I:[],X:[]},this.compile=function(){return e=e.replace(/ or /g," || ").replace(/ and /g," && ").replace(/!=/g,"{}").replace(/=/g,"==").replace(/\{\}/g,"!="),this.tokenize(),this.insert(),e=e.replace(/, \)/g,", htmlNode)"),e},this.tokenize=function(){var t=this.data.F;e=e.replace(/(translate|format-number|contains|substring|local-name|last|position|round|starts-with|string|string-length|sum|floor|ceiling|concat|count|not)\s*\(/g,function(e,n){return t.push(n)-1+"F_"}),t=this.data.S,e=e.replace(/'([^']*)'/g,function(e,n){return t.push(n)-1+"S_"}).replace(/"([^"]*)"/g,function(e,n){return t.push(n)-1+"S_"}),t=this.data.X,e=e.replace(/(^|\W|\_)([\@\.\/A-Za-z\*][\*\.\@\/\w\:\-]*(?:\(\)){0,1})/g,function(e,n,r){return n+(t.push(r)-1)+"X_"}).replace(/(\.[\.\@\/\w]*)/g,function(e,n,r){return t.push(n)-1+"X_"}),t=this.data.I,e=e.replace(/(\d+)(\W)/g,function(e,n,r){return t.push(n)-1+"I_"+r})},this.insert=function(){var t=this.data;e=e.replace(/(\d+)X_\s*==\s*(\d+S_)/g,function(e,n,r){return"apf.XPath.selectNodeExtended('"+t.X[n].replace(/'/g,"\\'")+"', htmlNode, "+r+")"}).replace(/(\d+)([FISX])_/g,function(e,n,r){var i=t[r][n];if(r=="F")return"apf.XPath.doXpathFunc(htmlNode, '"+i+"', ";if(r=="S")return"'"+i+"'";if(r=="I")return i;if(r=="X")return"apf.XPath.selectNodeExtended('"+i.replace(/'/g,"\\'")+"', htmlNode)"}).replace(/, \)/g,")")}}},apf.BindingRule=function(e,t){this.$init(t||!0,apf.NODE_HIDDEN,e)},function(){this.$bindingRule=!0,this.compile=function(e){return this["c"+e]=apf.lm.compile(this[e],{xpathmode:3,injectself:!0})},this.$compile=function(e,t){return this["c"+e+"2"]=apf.lm.compile(this[e],t)},this.$attrExcludePropBind=apf.extend({value:1,match:1},this.$attrExcludePropBind),this.$booleanProperties.hasaml=!0,this.$propHandlers.value=this.$propHandlers.match=function(e,t){delete this["c"+t];if(this.$amlLoaded){var n=this;while(n&&n.$bindingRule)n=n.parentNode;if(!n)return;apf.queue.add("reload"+n.$uniqueId,function(){n.reload()}),n.$bindings.$isCompiled&&(n.$bindings.$compiled=n.$bindings.compile(this.localName!="each"&&this.localName))}},this.addEventListener("DOMNodeInserted",function(e){var t=this;while(t.$bindingRule)t=t.parentNode;"expanded|collapsed".indexOf(this.localName)==-1&&apf.queue.add("reload"+t.$uniqueId,function(){t.reload()});if(e.currentTarget==this)(t.$bindings[this.localName]||(t.$bindings[this.localName]=[])).pushUnique(this);else{if(!!this.attributes.getNamedItem("value"))return;this.value=apf.serializeChildren(this)}t.$bindings.$isCompiled&&(t.$bindings.$compiled=t.$bindings.compile(this.localName!="each"&&this.localName))}),this.addEventListener("DOMNodeRemoved",function(e){if(this.$amlDestroyed)return;var t,n=this;while(n&&n.$bindingRule)n=n.parentNode;if(!n)return;if(e.currentTarget==this){if(!n.$bindings||!n.$bindings[this.localName])return;n.$bindings[this.localName].remove(this)}else{if(!!this.attributes.getNamedItem("value")||!(t=this.firstChild))return;t.nodeType==this.NODE_PROCESSING_INSTRUCTION?t.target=="lm"?this.value="{"+t.nodeValue+"}":this.value=t.nodeValue:this.value=apf.serializeChildren(this).trim()}"expanded|collapsed".indexOf(this.localName)==-1&&apf.queue.add("reload"+n.$uniqueId,function(){n.$amlDestroyed||n.reload()}),n.$bindings.$isCompiled&&(n.$bindings.$compiled=n.$bindings.compile(this.localName!="each"&&this.localName))}),this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t;!this.value&&this.localName!="each"&&(t=this.$aml&&this.$aml.firstChild||this.firstChild)&&(t.nodeType==this.NODE_PROCESSING_INSTRUCTION?t.target=="lm"?this.value="{"+t.nodeValue+"}":this.value=t.nodeValue:this.value=apf.serializeChildren(this.$aml).trim());var n=this.parentNode;while(n.$bindingRule)n=n.parentNode;var r=n.$bindings||(n.$bindings=new apf.ruleList);(r[this.localName]||(r[this.localName]=[])).push(this);if(n.localName!="bindings"&&(this.localName!="each"||!this.childNodes.length)){var i=this;while((i=i.nextSibling)&&i.nodeType!=1);if(!i||!i.$bindingRule)n.$cbindings=n.$bindings.compile(n.$bindings.$isCompiled?this.localName:null),n.dispatchEvent("bindingsload",{bindings:n.$bindings,compiled:n.$cbindings}),n.$checkLoadQueue()}})}.call(apf.BindingRule.prototype=new apf.AmlElement),apf.aml.setElement("icon",apf.BindingRule),apf.aml.setElement("image",apf.BindingRule),apf.aml.setElement("caption",apf.BindingRule),apf.aml.setElement("tooltip",apf.BindingRule),apf.aml.setElement("css",apf.BindingRule),apf.aml.setElement("selectable",apf.BindingRule),apf.aml.setElement("value",apf.BindingRule),apf.aml.setElement("src",apf.BindingRule),apf.aml.setElement("collapsed",apf.BindingRule),apf.aml.setElement("expanded",apf.BindingRule),apf.aml.setElement("empty",apf.BindingRule),apf.ActionRule=function(e,t){this.$init(t||!0,apf.NODE_HIDDEN,e)},function(){this.$actionRule=!0,this.compile=function(e,t){return this["c"+e]=apf.lm.compile(this[e],t||{xpathmode:2})},this.$attrExcludePropBind=apf.extend({set:1,get:1,undo:1,lock:1,match:1,parent:1},this.$attrExcludePropBind),this.$propHandlers.set=this.$propHandlers.get=this.$propHandlers.parent=this.$propHandlers.match=function(e,t){delete this["c"+t]},this.addEventListener("DOMNodeInserted",function(e){if(e.currentTarget==this){var t=this.parentNode;t.$actions||(t.$actions=new apf.ruleList),(t.$actions[this.localName]||(t.$actions[this.localName]=[])).push(this)}else{if(this.attributes.getNamedItem("value"))return;this.value=apf.serializeChildren(this)}}),this.addEventListener("DOMNodeRemoved",function(e){if(this.$amlDestroyed)return;if(e.currentTarget==this)this.parentNode.$actions[this.localName].remove(this);else{if(this.attributes.getNamedItem("value"))return;this.value=apf.serializeChildren(this)}}),this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.get||(this.get=apf.serializeChildren(this.$aml).trim());var t=this.parentNode.$actions||(this.parentNode.$actions=new apf.ruleList);(t[this.localName]||(t[this.localName]=[])).push(this)})}.call(apf.ActionRule.prototype=new apf.AmlElement),apf.aml.setElement("rename",apf.ActionRule),apf.aml.setElement("remove",apf.ActionRule),apf.aml.setElement("add",apf.ActionRule),apf.aml.setElement("update",apf.ActionRule),apf.aml.setElement("copy",apf.ActionRule),apf.aml.setElement("move",apf.ActionRule),apf.aml.setElement("check",apf.ActionRule),apf.aml.setElement("change",apf.ActionRule),apf.actions=function(e,t){this.$init(t||"actions",apf.NODE_HIDDEN,e),this.$actions=new apf.ruleList,this.$amlNodes={}},function(){this.$smartbinding=null,this.register=function(e){if(e.localName=="smartbinding"){this.$smartbinding=e,this.$smartbinding.add(this);return}this.$amlNodes[e.$uniqueId]=e,e.$actions=this.$actions,e.$actionsElement=this,e.dispatchEvent("actionsload",{bindings:this})},this.unregister=function(e){this.$amlNodes[e.$uniqueId]=null,delete this.$amlNodes[e.$uniqueId],delete e.$actionsElement,delete e.$actions,e.dispatchEvent("actionsunload",{bindings:this})},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t=this.childNodes;for(var n,r=0,i=t.length;r<i;r++){if((n=t[r]).nodeType!=1)continue;n.dispatchEvent("DOMNodeInsertedIntoDocument")}this.register(this.parentNode)})}.call(apf.actions.prototype=new apf.AmlElement),apf.aml.setElement("actions",apf.actions),apf.actiontracker=function(e,t){this.$init(t||"actiontracker",apf.NODE_HIDDEN,e),this.$undostack=[],this.$redostack=[],this.$execstack=[]},function(){function e(t,n,r,i){var s=r?this.$undostack:this.$redostack,o=r?this.$redostack:this.$undostack;if(!s.length)return;if(n){var u=s[t];if(!u)return;return s.length--,o.push(u),u.action&&apf.actiontracker.actions[u.action](u,r,this),i||(u.multiple?this.$addToQueue(u.multiple,r,!0):this.$addToQueue(u,r)),this.setProperty("undolength",this.$undostack.length),this.setProperty("redolength",this.$redostack.length),u}if(this.dispatchEvent("beforechange")===!1)return;t==-1&&(t=s.length),t||(t=1);var a=0;while(a<t&&s.length>0){if(!s[s.length-1])return s.length--,this.$undostack=[],this.$redostack=[],!1;e.call(this,s.length-1,!0,r,i),a++}this.dispatchEvent("afterchange",{action:r?"undo":"redo",rollback:i})}this.$lastExecStackItem=null,this.$paused=!1,this.realtime=!0,this.undolength=0,this.redolength=0,this.$booleanProperties={},this.$booleanProperties.realtime=!0,this.$supportedProperties=["realtime","undolength","redolength","alias","length","position"],this.$handlePropSet=function(e,t,n){this.$booleanProperties[e]&&(t=apf.isTrue(t));switch(e){case"undolength":this.undolength=this.$undostack.length;break;case"redolength":this.redolength=this.$redostack.length;break;default:this[e]=t}},this.define=function(e,t){apf.actiontracker.actions[e]=t},this.getParent=function(){return this.parentNode&&this.parentNode.getActionTracker?this.parentNode.getActionTracker(!0):apf.window.$at!=this?apf.window.$at:null},this.getDone=function(e){if(typeof e!="number")return[];for(var t,n=this.$undostack.length;n>=0;--n){if(!(t=this.$undostack[n])||!t.timestamp)continue;if(t.timestamp>=e)return this.$undostack.slice(n)}return[]},this.getUndone=function(e){if(typeof e!="number")return[];for(var t,n=0,r=this.$redostack.length;n<r;++n){if(!(t=this.$redostack[n])||!t.timestamp)continue;if(t.timestamp<=e)return this.$redostack.slice(0,n+1)}return[]},this.execute=function(e){if(this.dispatchEvent("beforechange",e)===!1)return!1;var t=new apf.UndoData(e,this);return e.action&&!e.transaction&&apf.actiontracker.actions[e.action](t,!1,this),this.$paused||(t.id=this.$undostack.push(t)-1),this.setProperty("undolength",this.$undostack.length),t.multiple?this.$addToQueue(t.multiple,!1,!0):this.$addToQueue(t,!1),e.rdb||(this.$redostack.length=0,this.setProperty("redolength",this.$redostack.length)),this.dispatchEvent("afterchange",{action:"do"}),t},this.pauseTracking=function(){this.$paused=!0},this.resumeTracking=function(){this.$paused=!1},this.isTracking=function(){return!this.$paused},this.purge=function(e,t){this.$execstack.length&&(this.$execstack[0].undoObj.saveChange(this.$execstack[0].undo,this),this.$lastExecStackItem=this.$execstack[this.$execstack.length-1])},this.reset=function(){this.$undostack.length=this.$redostack.length=0,this.$paused=!1,this.setProperty("undolength",0),this.setProperty("redolength",0),this.dispatchEvent("afterchange",{action:"reset"})},this.undo=function(t,n,r){e.call(this,t,n,!0,r)},this.redo=function(t,n,r){e.call(this,t,n,!1,r)},this.$receive=function(e,t,n,r,i){if(t==apf.TIMEOUT&&n.tpModule.retryTimeout(n,t,this)===!0)return!0;if(t!=apf.SUCCESS){if(this.dispatchEvent("actionfail",apf.extend(n,{state:t,message:"Could not sent Action RPC request for control "+this.name+"["+this.localName+"] \n\n"+n.message,bubbles:!0}))===!1)return!0;typeof apf.offline!="undefined"&&!apf.offline.reloading&&this.undo(r.id,n.userdata,!0),i&&i(!n.userdata);if(!n.userdata){this.$execstack=[];var s=new Error(apf.formatErrorString(0,this,"Executing action","Error sending action to the server:\n"+(n.url?"Url:"+n.url+"\n\n":"")+n.message));if(this.dispatchEvent("error",apf.extend({error:s,state:t,bubbles:!0},n))===!1)return;throw s}}else this.dispatchEvent("actionsuccess",apf.extend(n,{state:t,bubbles:!0},n)),r.processRsbQueue(),i&&i();this.$queueNext(r,i)},this.$addToQueue=function(e,t,n){if(!n&&this.$execstack.length&&!e.state&&this.$execstack[this.$execstack.length-1].undoObj==e){this.$execstack.length--,e.clearRsbQueue();return}var r,i,s;if(n){var i,s=this.$execstack.shift();for(var o=0;o<e.length;o++)i=e[o],this.$execstack.unshift({undoObj:(i.tagName?i:new apf.UndoData(i,this)).preparse(t,this),undo:t});s&&this.$execstack.unshift(s),this.$execstack[0].undoObj.state||this.$execstack[0].undoObj.saveChange(this.$execstack[0].undo,this);return}s={undoObj:e.preparse(t,this),undo:t},this.$execstack.push(s)-1,this.$execstack.length==1&&this.realtime&&e.saveChange(t,this)},this.$queueNext=function(e,t){if(!this.$execstack[0]||this.$execstack[0].undoObj!=e)throw new Error(apf.formatErrorString(0,this,"Executing Next                 action in queue","The execution stack was corrupted. This is                 a fatal error. The application should be restarted. You will                 lose all your changes. Please contact the administrator."));e.state=null;var n=this.$execstack.shift();if(!this.$execstack[0]||n==this.$lastExecStackItem)return;this.$execstack[0].undoObj.saveChange(this.$execstack[0].undo,this,t)}}.call(apf.actiontracker.prototype=new apf.AmlElement),apf.aml.setElement("actiontracker",apf.actiontracker),apf.application=function(){this.$init("application",apf.NODE_HIDDEN),apf.isO3||(this.$int=document.body,this.$tabList=[],this.$focussable=apf.KEYBOARD,this.focussable=!0,this.visible=!0,this.$isWindowContainer=!0,this.focus=function(){this.dispatchEvent("focus")},this.blur=function(){this.dispatchEvent("blur")},apf.window.$addFocus(this))},apf.application.prototype=new apf.AmlElement,apf.aml.setElement("application",apf.application),apf.appsettings=function(e,t){this.$init(t||"appsettings",apf.NODE_HIDDEN,e)},function(){this.$parsePrio="001",this.$attrExcludePropBind={language:1,login:1,logout:1},this.$supportedProperties=["debug","name","baseurl","resource-path","disable-right-click","allow-select","allow-blur","auto-disable-actions","auto-disable","disable-f5","auto-hide-loading","disable-space","disable-backspace","undokeys","initdelay","default-page","query-append","outline","drag-outline","resize-outline","resize-outline","iepngfix","iepngfix-elements","iphone-fullscreen","iphone-statusbar","iphone-icon","iphone-icon-is-glossy","iphone-fixed-viewport","skinset","language","storage","offline","login"],this.$booleanProperties={debug:1,"disable-right-click":1,"allow-select":1,"allow-blur":1,"auto-disable-actions":1,"auto-disable":1,"disable-f5":1,"auto-hide-loading":1,"disable-space":1,"disable-backspace":1,undokeys:1,initdelay:1,outline:1,iepngfix:1,"iphone-fullscreen":1,"iphone-icon-is-glossy":1,"iphone-fixed-viewport":1};var e=this.setProperty;this.setProperty=function(t,n,r,i,s){s!=2&&e.apply(this,arguments)},this.$handlePropSet=function(e,t,n){this.$booleanProperties[e]&&(t=apf.isTrue(t)),this[e]=t,apf.config.setProperty(e,t)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){})}.call(apf.appsettings.prototype=new apf.AmlElement),apf.aml.setElement("appsettings",apf.appsettings),apf.auth=function(e,t){this.$init(t||"auth",apf.NODE_HIDDEN,e),this.$services={},this.$cache={},this.$queue=[],this.$credentials=null},apf.aml.setElement("auth",apf.auth),function(){function t(t){var n=(t.state==apf.TIMEOUT||!e[t.status]?self[this["error-state"]]:self[this["fail-state"]])||self[this["fail-state"]];if(n){this.state=n;if(this.state)return this.state.activate(),!1}}this.autostart=!0,this.authenticated=!1,this.enablequeue=!1,this.$retry=!0,this.loggedIn=!1,this.$needsLogin=!1,this.$hasHost=!1,this.inProcess=0,this.$attrExcludePropBind=apf.extend({login:1,logout:1},this.$attrExcludePropBind),this.$booleanProperties.autostart=!0,this.$booleanProperties.remember=!0,this.$supportedProperties.push("login","logout","fail-state","error-state","login-state","logout-state","waiting-state","window","autostart","remember","authenticated","enablequeue"),this.$propHandlers.login=this.$propHandlers["login-state"]=function(e){this.$services["default"]=e?this:null,this.$needsLogin=e?!0:!1},this.register=function(e){this.$services[e.name]=e,this.$needsLogin=!0},this.unregister=function(e){var t;delete this.$services[e.name],t in this.$services||(this.$needsLogin=!1)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.inited=!0,this.parentNode&&this.parentNode.$setAuth&&(this.parentNode.$setAuth(this),this.$hasHost=!0);if(this.autostart&&!this.$hasHost){var t=this;apf.addEventListener("load",function(){apf.addEventListener("login",function(){t.authRequired(),apf.removeEventListener("load",arguments.callee)})})}}),this.addEventListener("authrequired",function(){if(self[this.window]){this.win=self[this.window];if(this.win)return this.win.show(),!1}if(self[this["authreq-state"]]){this.state=self[this["authreq-state"]];if(this.state)return this.state.activate(),!1}}),this.addEventListener("beforelogin",function(){self[this["waiting-state"]]&&(this.state=self[this["waiting-state"]],this.state&&this.state.activate())});var e={401:1,403:1};this.addEventListener("loginfail",t),this.addEventListener("logoutfail",t),this.addEventListener("logoutsuccess",function(){self[this["logout-state"]]&&(this.state=self[this["logout-state"]],this.state&&this.state.activate())}),this.addEventListener("loginsuccess",function(e){self[this.window]&&(this.win=self[this.window],this.win&&this.win.hide()),self[this["login-state"]]&&(this.state=self[this["login-state"]],this.state&&this.state.activate()),e.data&&this.model&&(this.model=apf.nameserver.get("model",this.model),this.model&&this.model.load(e.data))}),this.logIn=function(e,t,n,r){r||(r={}),r.username=e,r.password=t;if(this.dispatchEvent("beforelogin",r)===!1)return!1;this.inProcess=1;var i=0,s=0,o=this,u=function(){if(s!=++i)return;o.inProcess=0,o.loggedIn=!0,o.clearQueue(),n&&n()};if(this.$hasHost)this.$credentials=r,n=this.$hostCallback,this.$hostCallback=null,s=1,u(),this.dispatchEvent("loginsuccess",{state:1,data:null,bubbles:!0,username:e,password:t}),this.remember||(this.$credentials=null);else if(!r.service){var a=r.$services||this.$services;for(var f in a)s++,this.$do(f,r,"in",null,u)}else r.service&&(s=1,this.$do(r.service,r,"in",null,u))},this.relogin=function(){if(this.dispatchEvent("beforerelogin")===!1)return!1;var e,t=0,n=0,r=this,i=function(){if(n!=++t)return;r.inProcess=0,r.loggedIn=!0,r.clearQueue()};for(e in this.$services){if(!this.$cache[e])return!1;n++,this.$do(e,this.$cache[e],"in",!0,i)}return!0},this.$do=function(e,t,n,r,i){var s=this.$services[e],o=t.userdata=this;t.callback=function(s,u,a){if(u==apf.TIMEOUT&&a.retries<apf.maxHttpRetries)return a.tpModule.retry(a.id);var f=o.dispatchEvent("log"+n+"check",apf.extend({state:u,data:s,service:e,bubbles:!0},a)),l=typeof f=="boolean"?!f:u!=apf.SUCCESS&&(n!="out"||a.status!=401);if(l){o.inProcess=0;if(r)return o.authRequired();var c=new Error(apf.formatErrorString(0,null,"Logging "+n,"Error logging in: "+a.message));if(o.dispatchEvent("log"+n+"fail",apf.extend({error:c,service:e,state:u,data:s,bubbles:!0,username:t.username,password:t.password},a))!==!1)throw c;o.setProperty("authenticated",!1);return}if(n=="in"){if(!r&&o.$retry){var h={};for(var p in t)"object|array".indexOf(typeof t[p])==-1&&(h[p]=t[p]);o.$cache[e||"default"]=h}}else o.$cache[e||"default"]&&(o.$cache[e||"default"]=null);i&&i(),o.dispatchEvent("log"+n+"success",apf.extend({},a,{state:u,service:e,data:s,bubbles:!0,username:t.username,password:t.password})),o.setProperty("authenticated",!0)},apf.saveData(s.getAttribute("log"+n),t)},this.clearQueue=function(){if(!this.loggedIn)return;var e=this.$queue.slice();this.$queue.length=0;for(var t=0;t<e.length;t++){var n=e[t];if(!this.loggedIn){this.$queue.push(n);continue}n.retry?n.$retry.call(n.object):n.id&&n.tpModule.retry(n.id)}this.$queue.length&&this.clearQueue()},this.logOut=function(e,t){t||(t={});if(this.dispatchEvent("beforelogout",t)===!1)return;this.loggedIn=!1;if(!t.service)for(var n in this.$services)this.$do(n,t,"out",null,e);else t.service&&this.$do(t.service,t,"out",null,e)},this.getCredentials=function(e){var t=this.$cache[e||"default"];return t?[t.username,t.password]:["",""]},this.authRequired=function(e,t){if(e&&e.userdata==this)return;if(this.loggedIn&&!t&&this.$retry&&this.relogin())var n=!1;else if(this.inProcess!=1){if(this.$hasHost&&typeof e=="function"){if(this.$credentials)return e();this.$hostCallback=e}var n=this.dispatchEvent("authrequired",apf.extend({bubbles:!0,data:e&&e.data},e))}this.loggedIn=!1;if(n===!1)return this.enablequeue&&e&&this.$queue.push(e),!0}}.call(apf.auth.prototype=new apf.AmlElement),apf.section=function(e,t){this.$init(t||"section",apf.NODE_VISIBLE,e)},apf.menubar=function(e,t){this.$init(t||"menubar",apf.NODE_VISIBLE,e)},apf.bar=function(e,t){this.$init(t||"bar",apf.NODE_VISIBLE,e)},function(){this.$focussable=!1,this.$canLeechSkin=!0,this.$isLeechingSkin=!1,this.$propHandlers.caption=function(e){this.$int.innerHTML=e},this.addEventListener("AMLReparent",function(e,t,n){if(!this.$amlLoaded)return;if(this.$isLeechingSkin&&!n&&this.skinName!=t.skinName||!this.$isLeechingSkin&&this.parentNode.$hasLayoutNode&&this.parentNode.$hasLayoutNode(this.localName))this.$isLeechingSkin=!0,this.$forceSkinChange(this.parentNode.skinName.split(":")[0]+":"+skinName)}),this.$draw=function(){this.$ext=this.$getExternal(this.$isLeechingSkin?this.localName:"main"),this.oDrag&&this.oDrag.parentNode.removeChild(this.oDrag),this.oDrag=this.$getLayoutNode(this.$isLeechingSkin?this.localName:"main","dragger",this.$ext),this.$int=this.$getLayoutNode(this.$isLeechingSkin?this.localName:"main","container",this.$ext)},this.$loadAml=function(e){},this.$skinchange=function(){}}.call(apf.bar.prototype=new apf.Presentation),apf.menubar.prototype=apf.section.prototype=apf.bar.prototype,apf.aml.setElement("bar",apf.bar),apf.aml.setElement("menubar",apf.menubar),apf.aml.setElement("section",apf.section),apf.BindingColorRule=function(e,t){this.$init(t,apf.NODE_HIDDEN,e)},function(){this.addEventListener("DOMNodeInsertedIntoDocument",function(e){if(this.$bindings&&this.$bindings.color){var t=this.$bindings.color[0];apf.setStyleRule("."+this.$baseCSSname+(apf.isIE?" .records .highlight SPAN":" .records .highlight span"),"color",t.getAttribute("text"),null,this.oWin),apf.setStyleRule("."+this.$baseCSSname+(apf.isIE?" .records .highlight SPAN":" .records .highlight span"),"backgroundColor",t.getAttribute("row"),null,this.oWin),apf.setStyleRule("."+this.$baseCSSname+(apf.isIE?" .records .highlight":" .records .highlight"),"backgroundColor",t.getAttribute("row"),null,this.oWin)}apf.importStylesheet([["."+this.className,"width:"+this.$width+(this.$isPercentage?"%;":"px;")+"text-align:"+h.align],["."+this.className,"width:"+this.$width+(this.$isPercentage?"%;":"px;")+"text-align:"+h.align]]),this.$draw()})}.call(apf.BindingColorRule.prototype=new apf.BindingRule),apf.aml.setElement("color",apf.BindingColorRule),apf.BindingColumnRule=function(e,t){this.$init(t||"column",apf.NODE_VISIBLE,e),this.$className="col"+this.$uniqueId},function(){this.$defaultwidth="100",this.$width=0,this.$sortable=!0,this.$resizable=!0,this.$movable=!0,this.$cssInit=!1,this.visible=!0,this.$attrExcludePropBind=apf.extend({css:1,icon:1,caption:1,eachcaption:1,eachvalue:1,each:1,icon:1},this.$attrExcludePropBind),this.$supportedProperties.push("tree","icon","caption","width","options","check","editor","colspan","align","css","sorted","each","eachvalue","eachcaption","model"),this.$booleanProperties.tree=!0,this.$booleanProperties.check=!0,this.$booleanProperties.sorted=!0,this.$booleanProperties.visible=!0,this.$setParentFixedWidth=function(){var e=this.parentNode,t=e.$fixed+"px";this.$isFixedGrid||(apf.setStyleRule("."+e.$baseCSSname+" .row"+e.$uniqueId,"paddingRight",t,null,this.oWin),apf.setStyleRule("."+e.$baseCSSname+" .row"+e.$uniqueId,"marginRight","-"+t,null,e.oWin),e.$container&&(e.$container.style.paddingRight=t),e.$head&&(e.$head.style.paddingRight=t))},this.$propHandlers.width=function(e,t){if(!e)return;var n=e-this.$width;this.$isPercentage=e&&String(e).indexOf("%")>-1,this.$width=parseFloat(e);var r=this.parentNode;this.$isPercentage?apf.setStyleRule("."+this.$className,"width",this.$width+"%"):(apf.setStyleRule("."+this.$className,"width",this.$width+"px",null,r.oWin),r.$amlLoaded&&(this.visible&&(r.$fixed+=n),this.$setParentFixedWidth()))},this.$propHandlers.options=function(e,t){this.$sortable=e.indexOf("sort")>-1,this.$resizable=e.indexOf("size")>-1,this.$movable=e.indexOf("move")>-1},this.$propHandlers.visible=function(e,t,n,r){var i=this.parentNode;if(!r&&!this.$amlLoaded)return;if(e){apf.setStyleRule("."+this.$className,"display","inline-block",null,this.oWin);var s=this.$isPercentage?this.$ext.offsetWidth-(i.$widthdiff-3):this.$width;this.resize(s,i,!0)}else apf.setStyleRule("."+this.$className,"display","none",null,this.oWin),this.resize(0,i,!0)},this.resize=function(e,t,n){var r;if(this.$isPercentage){var i=this.visible&&this.$ext.offsetWidth?this.$ext.offsetWidth-(t.$widthdiff-3):0,s=i?e/i:1,o=[],u=[],a=0,f=n?this.$ext.parentNode.firstChild:this.$ext.nextSibling;while(f&&f.getAttribute("hid"))r=apf.all[f.getAttribute("hid")],r.visible!==!1&&(r.$isPercentage?(o.push(r),a+=r.$width):u.push(r)),f=f.nextSibling;if(u.length&&!o.length)return u[0].resize(u[0].$width+(i-e),t);var l,c;if(s==1&&a<101)s=a/101,c=1/s;else if(a>101)s=s*101/a,c=s;else{l=(s-1)*this.$width,c=(a-l)/a;if(c<.01&&c>0){if(e<20)return;return this.resize(e-10,t)}}for(var h,p=0;p<o.length;p++){h=o[p];if(h==this)continue;h.setProperty("width",String(h.$width*c)+"%",!1,!0)}this.visible!==!1&&this.setProperty("width",String(s*this.$width)+"%",!1,!0)}else if(n){var d=e;t.$fixed+=d,this.$setParentFixedWidth()}else apf.isIE&&t.oIframe&&(this.$ext.style.width=e+"px"),this.setProperty("width",e,!1,!0)},this.hide=function(){return this.setProperty("visible",!1,!1,!0),this},this.show=function(){return this.setProperty("visible",!0,!1,!0),this},this.sort=function(e,t){if(e.$lastSorted==this){apf.setStyleClass(this.$int,e.toggleSortOrder()?"ascending":"descending",["descending","ascending"]);return}var n;if(n=e.$lastSorted)apf.setStyleRule("."+n.$className,"background","white"),apf.setStyleClass(n.$int,"",["descending","ascending"]);apf.setStyleRule("."+this.$className,"background","#f3f3f3"),apf.setStyleClass(this.$int,"ascending",["descending","ascending"]),e.resort({order:"ascending",xpath:(this.cvalue||this.compile("value")).xpaths[1],type:this["data-type"]},!1,t||!e.length),e.$lastSorted=this},this.move=function(e,t){if(e&&this==e)return;var n=this,r=apf.getChildNumber(n.$int),i=e&&apf.getChildNumber(e.$int);t.$head.insertBefore(n.$int,e&&e.$int||null);if(!t.length)return;(function s(e){for(var n,o=0;o<e.length;o++){if(e[o].nodeType!=1)continue;n=e[o],t.$isTreeArch&&n.tagName=="BLOCKQUOTE"?s(n.childNodes):n.insertBefore(n.childNodes[r],i!=undefined&&n.childNodes[i]||null)}})(t.$container.childNodes)},this.$draw=function(e,t,n,r){var e=e||this.parentNode;while(e.$bindingRule)e=e.parentNode;if(!e.hasFeature(apf.__PRESENTATION__))return;n&&this.$propHandlers.width.call(this,n),apf.importStylesheet([["."+this.$className,"width:"+this.$width+(this.$isPercentage?"%;":"px;")+"text-align:"+this.align+";display: inline-block"]]),e.$getNewContext("headitem");var i=e.$getLayoutNode("headitem");i.setAttribute("class",this.$className+(r?" "+r:"")),i.setAttribute("hid",this.$uniqueId);var s=e.$getLayoutNode("headitem","caption");s.nodeValue=this.caption||t||"&nbsp",this.$ext=this.$int=apf.insertHtmlNode(i,e.$head||e.$container);var o=!1,u=this;return this.sorted&&this.sort(e,!0),this.$int.onmouseup=function(t){t||(t=event);if(e.disabled||!apf.isChildOf(o,this,!0))return;apf.setStyleClass(this,"hover",["down"]),u.$sortable&&u.sort(e),e.dispatchEvent("sortcolumn",u)},this.$int.onmousedown=function(t){t||(t=event),o=target=this;if(e.disabled)return;var n=apf.getAbsolutePosition(target),r=e.$head.scrollLeft,i=t.clientX-n[0]+r;if(i<4||target.offsetWidth-i-8<3&&apf.getChildNumber(u.$int)<e.$headings.length-1){var s=i<4&&target.previousSibling||target;if(u.$resizable){n=apf.getAbsolutePosition(s),apf.setStyleClass(e.$pointer,"size_pointer",["move_pointer"]),e.$pointer.style.display="block",e.$pointer.style.left=s.offsetLeft-r-1+"px",e.$pointer.style.width=s.offsetWidth-e.$widthdiff+1+"px",apf.plane.show(e.$pointer,null,!0),o=!0,document.onmouseup=function(){t||(t=event),document.onmouseup=document.onmousemove=null,apf.all[s.getAttribute("hid")].resize(e.$pointer.offsetWidth,e),o=!1,e.$pointer.style.display="none",apf.plane.hide()},document.onmousemove=function(t){t||(t=event),e.$pointer.style.width=Math.max(10,Math.min(e.$container.offsetWidth-e.$pointer.offsetLeft-20,t.clientX-n[0]-1+r))+"px"};return}}apf.setStyleClass(target,"down",["hover"]);if(!u.$movable){document.onmouseup=function(e){document.onmouseup=null,o=!1};return}apf.setStyleClass(e.$pointer,"move_pointer",["size_pointer"]);var a=t.clientX-target.offsetLeft,f=t.clientX,l=t.clientY-target.offsetTop,c=t.clientY,h;document.onmouseup=function(t){t||(t=event),document.onmouseup=document.onmousemove=null,o=!1,e.$pointer.style.display="none";if(!h)return;h.style.top="-100px";var n=document.elementFromPoint(t.clientX,t.clientY);if(n.parentNode==h.parentNode){var r=apf.getAbsolutePosition(n),i=t.clientX-r[0]>n.offsetWidth/2?n.nextSibling:n;u.move(i?apf.all[i.getAttribute("hid")]:null,e)}apf.destroyHtmlNode(h)},document.onmousemove=function(t){t||(t=event);if(!h){if(Math.abs(t.clientX-f)<3&&Math.abs(t.clientY-c)<3)return;h=target.cloneNode(!0),h.style.position="absolute";var n=apf.getWidthDiff(target);h.style.width=target.offsetWidth-n-e.$widthdiff+2+"px",h.style.left=target.offsetLeft,h.style.top=target.offsetTop,h.style.margin=0,h.removeAttribute("hid"),apf.setStyleClass(h,"drag",["ascending","descending"]),target.parentNode.appendChild(h)}h.style.top="-100px",e.$pointer.style.display="none";var r=document.elementFromPoint(t.clientX,t.clientY);if(r.parentNode==h.parentNode){var i=apf.getAbsolutePosition(r);e.$pointer.style.left=r.offsetLeft+(t.clientX-i[0]>r.offsetWidth/2?r.offsetWidth-8:0)+"px",e.$pointer.style.display="block"}h.style.left=t.clientX-a+"px",h.style.top=t.clientY-l+"px"}},this.$int.onmouseout=function(t){t||(t=event);if(e.disabled)return;var n=this;this.$timer=setTimeout(function(){e.$ext.style.cursor="",apf.setStyleClass(n,"",["hover","down"])},10)},this.$int.onmousemove=function(t){if(o||e.disabled)return;t||(t=event);var n=apf.getAbsolutePosition(this),r=e.$head.scrollLeft,i=t.clientX-n[0]+r;if(i<4||this.offsetWidth-i-e.$widthdiff<3&&apf.getChildNumber(u.$int)<e.$headings.length-1){var s=i<4?this.previousSibling:this;e.$ext.style.cursor=s&&u.$resizable?apf.isWebkit?"ew-resize":"w-resize":"default",apf.setStyleClass(this,"",["hover","down"])}else e.$ext.style.cursor="default",apf.setStyleClass(this,"hover",["down"])},!this.options&&e.options&&this.$propHandlers.options.call(this,this.options=e.options),this.visible===!1&&this.$propHandlers.visible.call(this,!1,null,null,!0),this},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.$draw()}),this.addEventListener("DOMNodeRemovedFromDocument",function(e){if(!this.$int)return;this.$int.onmouseover=this.$int.onmouseup=this.$int.onmousedown=this.$int.onmousemove=this.$int.onmouseout=null})}.call(apf.BindingColumnRule.prototype=new apf.BindingRule),apf.aml.setElement("column",apf.BindingColumnRule),apf.BindingDndRule=function(e,t){this.$init(t,apf.NODE_HIDDEN,e)},function(){this.compile=function(e){if(!this[e])return;var t;if(e=="value")t=apf.lm.compile(this[e],{xpathmode:3});else if(e=="match")t=apf.lm.compile(this[e],{xpathmode:3,injectself:!0});else if(e=="target")t=apf.lm.compile(this[e],{xpathmode:2,injectself:!0});else if(e=="action")t=apf.lm.compile(this[e],{nostring:!0});else{if(e!="copy")throw new Error("Missing property handler for compile");t=apf.lm.compile(this[e],{withopt:!0,nostring:!0})}return this["c"+e]=t},this.$attrExcludePropBind=apf.extend({target:1,parent:1,action:1,copy:1},this.$attrExcludePropBind),this.$propHandlers.target=this.$propHandlers.parent=this.$propHandlers.action=this.$propHandlers.copy=function(e,t){delete this["c"+t]},this.$noderegister=function(e){apf.GuiElement.propHandlers.drop.call(e.amlNode,!0)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t=this;while(t&&t.$bindingRule)t=t.parentNode;if(!t)return;if(t.localName=="bindings"){t.addEventListener("noderegister",this.$noderegister);var n=t.$amlNodes;for(var r=0;r<n.length;r++)apf.GuiElement.propHandlers.drop.call(n[r],!0)}else apf.GuiElement.propHandlers.drop.call(t,!0)})}.call(apf.BindingDndRule.prototype=new apf.BindingRule),apf.aml.setElement("drag",apf.BindingDndRule),apf.aml.setElement("drop",apf.BindingDndRule),apf.BindingEachRule=function(e,t){this.$init(t,apf.NODE_HIDDEN,e);var n=this;this.$noderegister=function(e){e.amlNode.$handleBindingRule(n.match,"each"),e.amlNode.$sort=n.sort?new apf.Sort(n):null}},function(){this.$attrExcludePropBind=apf.extend({sort:1,"data-type":1,"date-format":1,"sort-method":1,order:1,"case-order":1},this.$attrExcludePropBind),this.$booleanProperties.animate=!0,this.$propHandlers.sort=this.$propHandlers["data-type"]=this.$propHandlers["date-format"]=this.$propHandlers.order=this.$propHandlers["case-order"]=function(e,t){delete this["c"+t]},this.$updateEach=function(e){var t=this.parentNode;if(t.localName=="bindings"){var n=t.$amlNodes,r=0,i=n.length;for(;r<i;++r)n[r].each!=e&&n[r].$handleBindingRule(e,"each")}else t.each!=e&&t.$handleBindingRule(e,"each")},this.$getFilteredMatch=function(e){if(!e)return this.match;var t=e.trim().toLowerCase().split(" "),n=this.match.charAt(0)=="["&&this.match.charAt(this.match.length-1)=="]"?this.match.replace(/^\[|\]$/g,""):this.match,r;if(n.indexOf("::")>-1){var i=n.split("::");apf.xPathAxis[i[0]]||(r=i[0],n=i[1])}var s=[],o,u,a=this.$fields||["text()"];for(var f=0,l=t.length;f<l;f++){u=[],o=t[f];for(var c=0,h=a.length;c<h;c++)u.push("contains(translate("+a[c]+", 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), '"+o+"')");s.push(u.join(" or "))}var p="("+s.join(") and (")+")",d=this["filter-groups"]?this["filter-groups"].split("|"):[];n=n.split("|");var v=[];for(f=0,l=n.length;f<l;f++)d.contains(n[f])||v.push(n[f]+"["+p+"]");var m=v.join("|");for(f=0;f<d.length;f++)v.push(d[f]+"["+m+"]");return v.join("|")},this.$propHandlers.filter=function(e,t){if(!this.$amlLoaded)return;this.$updateEach(this.$getFilteredMatch(e))},this.$propHandlers["filter-fields"]=function(e,t){this.$fields=e.splitSafe(",")},this.addEventListener("prop.match",function(e){if(!this.$amlLoaded)return;this.filter?this.$propHandlers.filter.call(this,this.filter):this.$updateEach(this.match)});var e;this.addEventListener("DOMNodeInserted",e=function(e){if(e.currentTarget!=this)return;var t=this.$getFilteredMatch(this.filter),n=this.parentNode;if(n.localName=="bindings"){n.addEventListener("noderegister",this.$noderegister);var r=n.$amlNodes,i=0,s=r.length;for(;i<s;++i)r[i].$handleBindingRule(t,"each"),r[i].$sort=this.sort?new apf.Sort(this):null}else n.$handleBindingRule(t,"each"),n.$sort=this.sort?new apf.Sort(this):null}),this.addEventListener("DOMNodeRemoved",function(e){if(e.currentTarget!=this)return;var t=this.parentNode;if(t.localName=="bindings"){t.removeEventListener("noderegister",this.$noderegister);var n=t.$amlNodes,r=0,i=n.length;for(;r<i;++r)delete n[r].$sort}else delete t.$sort}),this.addEventListener("DOMNodeInsertedIntoDocument",e)}.call(apf.BindingEachRule.prototype=new apf.BindingRule),apf.aml.setElement("each",apf.BindingEachRule),apf.BindingLoadRule=function(e,t){this.$init(t,apf.NODE_HIDDEN,e)},function(){this.$attrExcludePropBind=apf.extend({get:1},this.$attrExcludePropBind),this.$propHandlers.get=function(e,t){delete this["c"+t]}}.call(apf.BindingLoadRule.prototype=new apf.BindingRule),apf.aml.setElement("load",apf.BindingLoadRule),apf.aml.setElement("insert",apf.BindingLoadRule),apf.BindingQuicksandRule=function(e,t){this.$init(t,apf.NODE_HIDDEN,e)},function(){function getFilteredNodes(e){e=e||this.$parent;var t,n,r=[],i=[],s=e.$getDataNode("quicksand",e.xmlRoot,!1,null,!0),o=e.$ext.childNodes,u=0,a=s.length;if(!o.length||!a)return r;for(;u<a;++u)i.push(s[u].getAttribute("a_id"));for(u=0,a=o.length;u<a;++u){if(!o[u]||!(t=o[u].getAttribute("id")))continue;n=t.split("|"),n.pop(),i.indexOf(n.join("|"))>-1&&r.push(o[u])}return r}function nodeInFilter(e,t){var n=0,r=t.length,i=e.getAttribute("id");for(;n<r;++n)if(t[n].getAttribute("id")==i)return t[n];return null}function quicksand(parent,customOptions){parent=this.$parent.$ext;var i,l,dest,src,offset,_self=this,coll=getFilteredNodes.call(this),parentOffset=apf.getAbsolutePosition(parent),offsets=[],callbackFunction=typeof arguments[1]=="function"?arguments[1]:typeof arguments[2]=="function"?arguments[2]:apf.K,postCallback=function(){_self.dispatchEvent("afterquicksand"),callbackFunction.call(_self)},options={steps:60,anim:apf.tween.easeInOutQuad,onfinish:postCallback,adjustHeight:!0};apf.extend(options,customOptions);if(apf.isIE&&apf.isIE<7){parent.innerHTML="";for(i=0,l=coll.length;i<l;i++)parent.appendChild(coll[i]);return}var $source=parent.childNodes,correctionOffset=[0,0];parent.style.height=parent.offsetHeight+"px",apf.tween.clearQueue(parent,!0);for(i=0,l=$source.length;i<l;++i)src=$source[i],offsets[i]=apf.getAbsolutePosition(src,parent,!1);for(i=0,l=$source.length;i<l;++i){src=$source[i];with(src.style)position="absolute",margin="0",top=offsets[i][1]-parentOffset[1]+"px",left=offsets[i][0]-parentOffset[0]+"px"}var $dest=parent.cloneNode(!1);$dest.setAttribute("id","");for(i=0,l=coll.length;i<l;++i)$dest.appendChild(coll[i].cloneNode(!0)),coll[i].$offset=apf.getAbsolutePosition(coll[i]);parent.parentNode.insertBefore($dest,parent);with($dest.style)zIndex=1,opacity=0,margin=0,position="absolute",top=parentOffset[1]-correctionOffset[1]+"px",left=parentOffset[0]-correctionOffset[0]+"px";var insets=[];for(i=0,l=$source.length;i<l;++i)src=$source[i],(dest=nodeInFilter(src,coll))?(offset=insets.shift()||offsets[i],options.tweens=[{type:"top",from:dest.$offset[1]-parentOffset[1],to:offset[1]-parentOffset[1]},{type:"left",from:dest.$offset[0]-parentOffset[0],to:offset[0]-parentOffset[0]},{type:"opacity",from:apf.getStyle(src,"opacity"),to:1}],apf.supportCSSAnim&&options.tweens.push({type:"transform",subType:"scale",from:0,to:1}),apf.tween.multi(src,options)):(options.tweens=[{type:"opacity",from:apf.getStyle(src,"opacity"),to:0}],apf.supportCSSAnim&&options.tweens.push({type:"transform",subType:"scale",from:1,to:0}),insets.push(offsets[i]),apf.tween.multi(src,options));for(i=0,l=coll.length;i<l;++i){var item=coll[i];if(!nodeInFilter(item,$source)){dest=nodeInFilter(item,coll),options.tweens=[{type:"opacity",from:0,to:1}],!apf.isIE,offset=apf.getAbsolutePosition(dest),dest=dest.cloneNode(!0);with(dest.style)position="absolute",margin="0",top=offset[1]-parentOffset[1]+"px",left=offset[0]-parentOffset[0]+"px",opacity="0",transform="scale(.0)";parent.appendChild(dest),apf.tween.multi(dest,options)}}}this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t=this;while(t&&t.$bindingRule)t=t.parentNode;this.$parent=t;if(!t)return;var n=this;setTimeout(function(){quicksand.call(n)})})}.call(apf.BindingQuicksandRule.prototype=new apf.BindingRule),apf.aml.setElement("quicksand",apf.BindingQuicksandRule),apf.bindings=function(e,t){this.$init(t||"bindings",apf.NODE_HIDDEN,e),this.$bindings=new apf.ruleList,this.$amlNodes={}},function(){this.$smartbinding=null,this.register=function(e){if(e.localName=="smartbinding"){this.$smartbinding=e,this.$smartbinding.add(this);return}if(!e.hasFeature(apf.__DATABINDING__))return;this.$amlNodes[e.$uniqueId]=e;if(!this.$amlLoaded)return;this.$bindings.$isCompiled||(this.$cbindings=this.$bindings.compile()),e.$bindings=this.$bindings,e.$cbindings=this.$cbindings,e.$bindingsElement=this,e.dispatchEvent("bindingsload",{bindings:this.$bindings,compiled:this.$cbindings}),this.dispatchEvent("noderegister",{amlNode:e}),e.$checkLoadQueue()},this.unregister=function(e){this.$amlNodes[e.$uniqueId]=null,delete this.$amlNodes[e.$uniqueId],e.$bindingsElement=e.$bindings=e.$cbindings=!1,e.dispatchEvent("bindingsunload",{bindings:this.$bindings,compiled:this.$cbindings})},this.reload=function(){for(var e in this.$amlNodes)this.$amlNodes[e].reload()},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t=this.childNodes;for(var n,r=0,i=t.length;r<i;r++)!(n=t[r]).$amlLoaded&&n.nodeType==1&&n.dispatchEvent("DOMNodeInsertedIntoDocument");this.register(this.parentNode);for(var s in this.$amlNodes)this.register(this.$amlNodes[s])})}.call(apf.bindings.prototype=new apf.AmlElement),apf.ruleList=function(){this.$compiled={}},apf.ruleList.prototype={$isCompiled:!1,getRule:function(e,t){var n=this[e];if(!n)return!1;for(var r,i,s=0,o=n.length;s<o;s++){i=n[s];if(!i.match)return i;r=i.cmatch||i.compile("match",{injectself:!0,xpathmode:2});if(r&&r(t))return i}},compile:function(e){var t,n,r=this.$compiled,i=!1;if(e){n=[],t=this[e];for(var s,o=0,u=t.length;o<u;o++){if(!(s=t[o]).match&&!s.value)continue;n.push(s.match,s.value)}return r[e]=apf.lm.compileMatch(n),r}for(e in this){if(e=="each")continue;t=this[e];if(t.dataType!=apf.ARRAY)continue;n=[],i=!1;for(var s,o=0,u=t.length;o<u;o++){if(!(s=t[o]).match&&!s.value)continue;n.push(s.match,s.value)}r[e]=apf.lm.compileMatch(n)}return this.$isCompiled=!0,r},getRuleIndex:function(e,t){var n=this[e][t];return n.value?n.cvalue||n.compile("value"):n.match&&(n.cmatch||n.compile("match")),n},getDataNode:function(e,t,n,r,i){var s,o,u,a,f,l=this[e];if(!l)return;for(f,s=0,o=l.length;s<o;s++){f=l[s],u=f.cvaluematch,u||(f.match&&f.value&&f.value.match(/^\[.*\]$/)?f.valuematch="{_n = "+f.match+"; %[child::"+f.value.substr(1,f.value.length-2).split("|").join("|child::")+"]}":f.valuematch=f.match||f.value,u=f.$compile("valuematch",{xpathmode:i?4:3,injectself:f.match?!0:!1}));if(u&&(a=u(t,n)))return r&&r.push(f),a}return!1}},apf.aml.setElement("bindings",apf.bindings),apf.BindingSeriesRule=function(e,t){this.$init(t||"series",apf.NODE_HIDDEN,e)},function(){this.$attrExcludePropBind=apf.extend({formula:1},this.$attrExcludePropBind),this.$propHandlers.formula=function(e,t){delete this["c"+t]}}.call(apf.BindingSeriesRule.prototype=new apf.BindingRule),apf.aml.setElement("series",apf.BindingSeriesRule),apf.AmlConfig=function(){this.$init("config",apf.NODE_VISIBLE)},function(){this.focussable=!1,this.$canLeechSkin=!0,this.$draw=function(){this.$ext=this.$int=this.$getExternal(this.$isLeechingSkin?this.localName:"main")}}.call(apf.AmlConfig.prototype=new apf.Presentation),apf.aml.setElement("config",apf.AmlConfig),apf.browser=function(e,t){this.$init(t||"browser",apf.NODE_VISIBLE,e)},function(){this.implement(apf.DataAction,apf.StandardBinding),this.$supportedProperties.push("value","src"),this.$propHandlers.src=this.$propHandlers.value=function(e,t){try{this.$browser.src=e||"about:blank"}catch(n){this.$browser.src="about:blank"}},this.$propHandlers.border=apf.Presentation.prototype.$propHandlers.border,this.getValue=function(){return this.value||this.src},this.getURL=function(){return this.$browser.src},this.back=function(){this.$browser.contentWindow.history.back()},this.forward=function(){this.$browser.contentWindow.history.forward()},this.reload=function(){this.$browser.src=this.$browser.src},this.print=function(){this.$browser.contentWindow.print()},this.runCode=function(e,t){if(t)try{this.$browser.contentWindow.eval(e)}catch(n){}else this.$browser.contentWindow.eval(e)},this.$draw=function(e){e||(e=this.$pHtmlNode);if(apf.cannotSizeIframe){var t=document.createElement("iframe");t.setAttribute("frameborder","0"),this.$ext=e.appendChild(document.createElement("DIV")).appendChild(t).parentNode,this.$ext.style.width="100px",this.$ext.style.height="100px",this.$browser=this.$ext.firstChild,this.$browser.style.width="100%",this.$browser.style.height="100%",this.$browser.frameBorder=0}else this.$ext=e.appendChild(document.createElement("iframe")),this.$ext.setAttribute("frameborder","0"),this.$browser=this.$ext,this.$ext.style.border="1px solid #999",this.$ext.style.background="white";this.$ext.className="apfbrowser",this.getAttribute("style")&&this.$ext.setAttribute("style",this.getAttribute("style"));var n=this;apf.addListener(this.$browser,"load",function(){var e=this.contentWindow.location.href;n.dispatchEvent("load",{href:e}),e&&n.setProperty("src",e)}),apf.addListener(this.$browser,"error",function(){n.dispatchEvent("error"),this.contentWindow.location.href&&n.setProperty("src",this.contentWindow.location.href)}),this.$ext.host=this}}.call(apf.browser.prototype=new apf.GuiElement),apf.aml.setElement("browser",apf.browser),apf.submit=function(e,t){this.$init(t||"submit",apf.NODE_VISIBLE,e)},apf.trigger=function(e,t){this.$init(t||"trigger",apf.NODE_VISIBLE,e)},apf.reset=function(e,t){this.$init(t||"reset",apf.NODE_VISIBLE,e)},apf.button=function(e,t){this.$init(t||"button",apf.NODE_VISIBLE,e)},function(){function t(e){return;var t,n,r}function n(e){var t=self[this.submenu],n;this.value=!this.value,this.value&&this.$setState("Down",{});var r=this.parentNode.menuIsPressed;if(r&&r!=this){r.setValue(!1);var i=self[r.submenu];i!=self[this.submenu]&&i.$propHandlers.visible.call(i,!1,!0)}return this.value?(this.parentNode.menuIsPressed=this,t.display(null,null,!1,this,null,null,this.$ext.offsetWidth-2),this.parentNode.hasMoved=!1,e&&e.htmlEvent&&apf.stopPropagation(e.htmlEvent),!1):(t.hide(),this.$setState("Over",{},"toolbarover"),(n=this.parentNode.$button1)&&n.$setState("Over",{},"toolbarover"),this.parentNode.menuIsPressed=!1,this.parentNode.hasMoved&&(this.value=!1),apf.hasFocusBug&&apf.window.$focusfix(),!1)}function r(){var e=this.parentNode.menuIsPressed;if(!e||e==this)return;var t=self[this.submenu];if(t.pinned)return;e.setValue(!1);var n=self[e.submenu];return n.$propHandlers.visible.call(n,!1,!0),this.setValue(!0),this.parentNode.menuIsPressed=this,t.display(null,null,!0,this,null,null,this.$ext.offsetWidth-2),this.$focus(),this.parentNode.hasMoved=!0,!1}this.$useExtraDiv,this.$childProperty="caption",this.$inited=!1,this.$isLeechingSkin=!1,this.$canLeechSkin=!0,this.$focussable=apf.KEYBOARD,this.value=null,this.$init(function(){function r(e){if(e.defaultButtonSet||e.returnValue===!1)return;e.defaultButtonSet=!0,this.$useExtraDiv&&t.$ext.appendChild(apf.button.$extradiv),t.$setStyleClass(t.$ext,t.$baseCSSname+"Default"),e.srcElement!=t&&t.$focusParent&&t.$focusParent.addEventListener("keydown",s)}function i(e){this.$useExtraDiv&&apf.button.$extradiv.parentNode==t.$ext&&t.$ext.removeChild(apf.button.$extradiv),t.$setStyleClass(t.$ext,"",[t.$baseCSSname+"Default"]),e.srcElement!=t&&t.$focusParent&&t.$focusParent.removeEventListener("keydown",s)}function s(e){var n,r=apf.document.activeElement;if(r){if(r.hasFeature(apf.__MULTISELECT__))return;n=r.multiline}if(!t.$ext.onmouseup)return;if(n&&n!="optional"&&e.keyCode==13&&e.ctrlKey||(!n||n=="optional")&&e.keyCode==13&&!e.ctrlKey&&!e.shiftKey&&!e.altKey)apf.preventDefault(e.htmlEvent),t.$ext.onmouseup(e.htmlEvent,!0)}var e,t=this,n;this.$propHandlers["default"]=function(t){parseInt(t)!=t&&(t=apf.isTrue(t)?1:0),this["default"]=parseInt(t),(!this.focussable&&t||e)&&this.setAttribute("focussable",e=t),n&&(n.removeEventListener("focus",r),n.removeEventListener("blur",i));if(!t)return;var s=this.parentNode;while(s&&!s.focussable&&t--)s=s.parentNode;s&&(s.addEventListener("focus",r),s.addEventListener("blur",i))},this.addEventListener("focus",r),this.addEventListener("blur",i),this.$enable=function(){this["default"]&&(r({}),apf.document.activeElement&&apf.document.activeElement.focus(!0)),this.state&&this.value?this.$setState("Down",{}):this.$mouseOver?this.$updateState({},"mouseover"):this.$doBgSwitch(1)},this.$disable=function(){this["default"]&&i({}),this.$doBgSwitch(4),this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Over",this.$baseCSSname+"Down"])}}),this.$booleanProperties.state=!0,this.$supportedProperties.push("icon","value","tooltip","state","color","caption","action","target","default","submenu","hotkey"),this.$propHandlers.icon=function(e){if(!this.oIcon)return;e?this.$setStyleClass(this.$ext,this.$baseCSSname+"Icon"):this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Icon"]),apf.skins.setIcon(this.oIcon,e,this.iconPath)},this.$propHandlers.value=function(e){if(!this.state&&!this.submenu)return;e===undefined&&(e=!this.value),this.value=e,this.value?(this.$setState("Down",{}),this.$setStyleClass(this.$ext,this.$baseCSSname+"Checked")):(this.$setState("Out",{}),this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Checked"]))},this.$propHandlers.state=function(e){e?this.$setStateBehaviour(this.value):this.$setNormalBehaviour()},this.$propHandlers.color=function(e){this.oCaption&&(this.oCaption.parentNode.style.color=e)},this.$propHandlers.caption=function(e){if(!this.oCaption)return;e?this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Empty"]):this.$setStyleClass(this.$ext,this.$baseCSSname+"Empty"),this.oCaption.nodeType==1?this.oCaption.innerHTML=String(e||"").trim():this.oCaption.nodeValue=String(e||"").trim()},this.$propHandlers.hotkey=function(t){this.$hotkey&&apf.setNodeValue(this.$hotkey,t),this.$lastHotkey&&(apf.hotkeys.remove(this.$lastHotkey[0],this.$lastHotkey[1]),delete this.$lastHotkey[0]);if(t){this.$lastHotkey=[t];var n=this;apf.hotkeys.register(t,this.$lastHotkey[1]=function(){n.$setState("Over",{}),$setTimeout(function(){n.$setState("Out",{})},200),n.$clickHandler&&n.$clickHandler()?n.$updateState(e||event,"click"):n.dispatchEvent("click")})}this.tooltip&&apf.GuiElement.propHandlers.tooltip.call(this,this.tooltip)},this.$propHandlers.submenu=function(e){if(!e){this.value&&this.parentNode&&n.call(this),this.$focussable=!0,this.$setNormalBehaviour(),this.removeEventListener("mousedown",n),this.removeEventListener("mouseover",r),this.removeEventListener("keydown",t,!0);return}this.$focussable=!1,this.$setStateBehaviour(),this.addEventListener("mouseover",r),this.addEventListener("mousedown",n),this.addEventListener("keydown",t,!0)},this.setValue=function(e){this.setProperty("value",e,!1,!0)},this.showMenu=function(){this.submenu&&!this.value&&n.call(this)},this.hideMenu=function(){this.submenu&&this.value&&n.call(this)},this.setCaption=function(e){this.setProperty("caption",e,!1,!0)},this.setIcon=function(e){this.setProperty("icon",e,!1,!0)},this.$setStateBehaviour=function(e){this.value=e||!1,this.isBoolean=!0,this.$setStyleClass(this.$ext,this.$baseCSSname+"Bool"),this.value&&(this.$setStyleClass(this.$ext,this.$baseCSSname+"Down"),this.$doBgSwitch(this.states.Down))},this.$setNormalBehaviour=function(){this.value=null,this.isBoolean=!1,this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Bool"])},this.$setState=function(e,t,n){var r=this.parentNode;if(n&&this.dispatchEvent(n,{htmlEvent:t})===!1)return;if(r&&r.$button2&&r.$button2.value&&!this.submenu)return;this.$doBgSwitch(this.states[e]);var i=this.$baseCSSname;this.$setStyleClass(this.$ext,e!="Out"?i+e:"",[this.value?"":i+"Down",i+"Over"]),this.submenu&&(i=this.$baseCSSname+"menu",this.$setStyleClass(this.$ext,e!="Out"?i+e:"",[this.value?"":i+"Down",i+"Over"]))},this.$clickHandler=function(){if(this.isBoolean&&!this.submenu)return this.setProperty("value",!this.value),!0},this.$submenu=function(e,t){e&&this.submenu&&(this.setValue(!1),this.$setState("Out",{},"mouseout"),this.parentNode&&(this.parentNode.menuIsPressed=!1))},this.addEventListener("$skinchange",function(e){this.tooltip&&apf.GuiElement.propHandlers.tooltip.call(this,this.tooltip)}),this.$draw=function(){var e,t=(e=this.parentNode)&&e.parentNode&&e.parentNode.localName=="toolbar";t&&(typeof this.focussable=="undefined"&&(this.focussable=!1),this.$focussable=apf.KEYBOARD),this.$ext=this.$getExternal(),this.oIcon=this.$getLayoutNode("main","icon",this.$ext),this.oCaption=this.$getLayoutNode("main","caption",this.$ext),this.$useExtraDiv=apf.isTrue(this.$getOption("main","extradiv")),!apf.button.$extradiv&&this.$useExtraDiv&&((apf.button.$extradiv=document.createElement("div")).className="extradiv"),this.localName=="submit"?this.action="submit":this.localName=="reset"&&(this.action="reset"),this.$setupEvents()},this.addEventListener("$skinchange",function(){this.caption&&this.$propHandlers.caption.call(this,this.caption),this.icon&&this.$propHandlers.icon.call(this,this.icon),this.$updateState({reset:1})})}.call(apf.button.prototype=new apf.BaseButton),apf.submit.prototype=apf.trigger.prototype=apf.reset.prototype=apf.button.prototype,apf.aml.setElement("submit",apf.submit),apf.aml.setElement("trigger",apf.trigger),apf.aml.setElement("reset",apf.reset),apf.aml.setElement("button",apf.button),apf.checkbox=function(e,t){this.$init(t||"checkbox",apf.NODE_VISIBLE,e)},function(){this.implement(apf.DataAction),this.$focussable=apf.KEYBOARD,this.checked=!1,this.$booleanProperties.checked=!0,this.$supportedProperties.push("value","checked","label","values"),this.$propHandlers.value=function(e){e=typeof e=="string"?e.trim():e,e==""&&this["default"]&&(e=this.value=apf.isTrue(this["default"])),this.$values?this.checked=typeof e!="undefined"&&e!==null&&e.toString()==this.$values[0].toString():this.checked=apf.isTrue(e),this.checked?apf.setStyleClass(this.$ext,this.$baseCSSname+"Checked"):apf.setStyleClass(this.$ext,"",[this.$baseCSSname+"Checked"])},this.$propHandlers.checked=function(e){this.$values||this.getAttribute("values")&&this.$propHandler.values.call(this,this.getAttribute("values")),this.setProperty("value",this.$values?this.$values[e?0:1]:!0)},this.$propHandlers.label=function(e){if(!this.$ext)return;var t=this.$getLayoutNode("main","label",this.$ext);if(!t)return;t.nodeType==1?t.innerHTML=e:t.nodeValue=e},this.$propHandlers.values=function(e){this.$values=typeof e=="string"?e.split("|"):e||[1,0],this.$propHandlers.value.call(this,this.value)},this.setValue=function(e){if(!this.$values)return;this.setProperty("value",e,!1,!0)},this.getValue=function(){return this.xmlRoot?this.$values?this.$values[this.checked?0:1]:this.checked:this.value},this.check=function(){this.setProperty("value",this.$values?this.$values[0]:!0,!1,!0)},this.uncheck=function(){this.setProperty("value",this.$values?this.$values[1]:!1,!1,!0)},this.addEventListener("$clear",function(){this.setProperty("value",this.$values?this.$values[1]:!1)}),this.$enable=function(){this.$input&&(this.$input.disabled=!1),this.$doBgSwitch(1)},this.$disable=function(){this.$input&&(this.$input.disabled=!0),this.$doBgSwitch(4)},this.$setState=function(e,t,n){this.$doBgSwitch(this.states[e]),this.$setStyleClass(this.$ext,e!="Out"?this.$baseCSSname+e:"",[this.$baseCSSname+"Down",this.$baseCSSname+"Over"]),this.state=e,n&&this.dispatchEvent(n,{htmlEvent:t})},this.$clickHandler=function(){return this.change(this.$values?this.$values[this.checked?1:0]:!this.checked),this.validate&&this.validate(!0),!0},this.$draw=function(){this.$ext=this.$getExternal(),this.$input=this.$getLayoutNode("main","input",this.$ext),this.$notfromext=this.$input&&this.$input!=this.$ext,this.$setupEvents()},this.$childProperty="label",this.addEventListener("$skinchange",function(){this.label&&this.$propHandlers.label.call(this,this.label)})}.call(apf.checkbox.prototype=new apf.BaseButton),apf.aml.setElement("checkbox",apf.checkbox),apf.colorpicker=function(e,t){this.$init(t||"colorpicker",apf.NODE_VISIBLE,e)},function(){this.value="ff0000",this.changeTimer=null;var e=apf.color;this.$supportedProperties.push("color","red","green","blue","hue","saturation","brightness","hex","skin-textbox","skin-spinner"),this.$propHandlers.red=this.$propHandlers.green=this.$propHandlers.blue=this.$propHandlers.hue=this.$propHandlers.saturation=this.$propHandlers.brightness=this.$propHandlers.hex=function(e,t){if(this.$ignoreSetProperty)return;clearTimeout(this.changeTimer);var n=this;this.changeTimer=$setTimeout(function(){n.$change(t)})},this.$propHandlers.value=function(e){this.$restoreOriginal()},this.$restoreOriginal=function(){var t=e.hexToHSB(this.value);this.hue=t.h,this.saturation=t.s,this.brightness=t.b,this.$change(),this.oCustomColor.style.backgroundColor=(this.value.substr(0,1)!="#"?"#":"")+this.value},this.$change=function(t){if(!t||/hsb|hue|saturation|brightness/.test(t)){t="hsb";var n=e.fixHSB({h:this.hue,s:this.saturation,b:this.brightness}),r=e.HSBToHex(n),i=e.HSBToRGB(n)}else if(/red|green|blue|rgb/.test(t)){t="rgb";var i=e.fixRGB({r:this.red,g:this.green,b:this.blue}),r=e.RGBToHex(i),n=e.RGBToHSB(i)}else{t="hex";var r=e.fixHex(this.hex),n=e.hexToHSB(r),i=e.hexToRGB(r)}this.oNewColor.style.backgroundColor="#"+r,this.$ignoreSetProperty=!0,t!="rgb"&&(this.setProperty("red",i.r),this.setProperty("green",i.g),this.setProperty("blue",i.b)),t!="hsb"&&(this.setProperty("hue",n.h),this.setProperty("saturation",n.s),this.setProperty("brightness",n.b)),t!="hex"&&this.setProperty("hex",r),this.$ignoreSetProperty=!1,this.oSelector.style.background="#"+e.HSBToHex({h:n.h,s:100,b:100}),this.oHue.style.top=parseInt(150-150*n.h/360,10)+"px",this.oSelectorInd.style.left=parseInt(150*n.s/100,10)+"px",this.oSelectorInd.style.top=parseInt(150*(100-n.b)/100,10)+"px"},this.$draw=function(){function r(){return document.onmousemove=document.onmouseup=null,t.$change(),!1}function i(){function s(r){r=r||event;var s=r.pageX||r.clientX+(n?n.scrollLeft:0),o=r.pageY||r.clientY+(n?n.scrollTop:0);return t.brightness=parseInt(100*(150-Math.max(0,Math.min(150,o-i[1])))/150,10),t.saturation=parseInt(100*Math.max(0,Math.min(150,s-i[0]))/150,10),t.$change(),i=apf.getAbsolutePosition(e),!1}var e=this,i=apf.getAbsolutePosition(e);document.onmousemove=s,document.onmouseup=function(e){return s(e),r(e)}}function s(e){function o(e){e=e||event;var r=e.pageY||e.clientY+(n?n.scrollTop:0);t.hue=parseInt(360*(150-Math.max(0,Math.min(150,r-s[1])))/150,10),t.$change(),s=apf.getAbsolutePosition(i)}var i=this,s=apf.getAbsolutePosition(i);document.onmousemove=o,document.onmouseup=function(e){return o(e),r(e)}}function o(e){var n=e.currentTarget,r=!1;n.id.indexOf("hue")>-1?t.hue=e.value:n.id.indexOf("saturation")>-1?t.saturation=e.value:n.id.indexOf("brightness")>-1?t.brightness=e.value:n.id.indexOf("red")>-1?(t.red=e.value,r=!0):n.id.indexOf("green")>-1?(t.green=e.value,r=!0):n.id.indexOf("blue")>-1&&(t.blue=e.value,r=!0),t.$change(r?"red":"hue")}this.id||this.setProperty("id","colorpicker"+this.$uniqueId),this.$ext=this.$getExternal(),this.oSelector=this.$getLayoutNode("main","selector",this.$ext),this.oSelectorInd=this.$getLayoutNode("main","selector_indic",this.$ext),this.oHue=this.$getLayoutNode("main","hue",this.$ext),this.oNewColor=this.$getLayoutNode("main","newcolor",this.$ext),this.oCustomColor=this.$getLayoutNode("main","customcolor",this.$ext),this.oInputs=this.$getLayoutNode("main","inputs",this.$ext),this.$restoreOriginal();var t=this,n=!document.compatMode||document.compatMode=="CSS1Compat"?document.html:document.body;this.oSelector.onmousedown=i,this.oHue.parentNode.onmousedown=s,this.oCustomColor.onmousedown=function(){t.$restoreOriginal()};var u=apf.getInheritedAttribute(this.parentNode,"skinset");new apf.hbox({htmlNode:this.oInputs,skinset:u,left:212,top:52,width:150,padding:3,childNodes:[new apf.vbox({padding:3,edge:"0 10 0 0",childNodes:[new apf.hbox({childNodes:[new apf.label({width:14,caption:"R:","for":this.id+"_red"}),new apf.spinner({id:this.id+"_red",skin:this["skin-spinner"],realtime:!0,width:45,min:0,max:255,value:"{"+this.id+".red}",onafterchange:o})]}),new apf.hbox({edge:"0 0 3 0",childNodes:[new apf.label({width:14,caption:"G:","for":this.id+"_green"}),new apf.spinner({id:this.id+"_green",skin:this["skin-spinner"],realtime:!0,width:45,min:0,max:255,value:"{"+this.id+".green}",onafterchange:o})]}),new apf.hbox({edge:"0 0 3 0",childNodes:[new apf.label({width:14,caption:"B:","for":this.id+"_blue"}),new apf.spinner({id:this.id+"_blue",skin:this["skin-spinner"],realtime:!0,width:45,min:0,max:255,value:"{"+this.id+".blue}",onafterchange:o})]})]}),new apf.vbox({padding:3,childNodes:[new apf.hbox({childNodes:[new apf.label({width:14,caption:"H:","for":this.id+"_hue"}),new apf.spinner({id:this.id+"_hue",skin:this["skin-spinner"],realtime:!0,width:45,min:0,max:360,value:"{"+this.id+".hue}",onafterchange:o})]}),new apf.hbox({edge:"0 0 3 0",childNodes:[new apf.label({width:14,caption:"S:","for":this.id+"_saturation"}),new apf.spinner({id:this.id+"_saturation",skin:this["skin-spinner"],realtime:!0,width:45,min:0,max:100,value:"{"+this.id+".saturation}",onafterchange:o})]}),new apf.hbox({edge:"0 0 3 0",childNodes:[new apf.label({width:14,caption:"B:","for":this.id+"_brightness"}),new apf.spinner({id:this.id+"_brightness",skin:this["skin-spinner"],realtime:!0,width:45,min:0,max:100,value:"{"+this.id+".brightness}",onafterchange:o})]})]})]}),new apf.label({htmlNode:this.oInputs,skinset:u,left:212,top:144,width:14,caption:"#","for":this.id+"_hex"}),this.$input=new apf.textbox({htmlNode:this.oInputs,skinset:u,skin:this["skin-textbox"],mask:"<XXXXXX;;_",left:222,top:140,width:60,value:"{"+this.id+".hex}",onafterchange:function(n){t.hex=e.fixHex(n.value);var r=e.hexToHSB(t.hex);t.hue=r.h,t.saturation=r.s,t.brightness=r.b,t.$change()}})},this.$destroy=function(){this.$ext=this.oSelector=this.oSelectorInd=this.oHue=this.oNewColor=this.oCustomColor=this.oInputs=null}}.call(apf.colorpicker.prototype=new apf.StandardBinding),apf.aml.setElement("colorpicker",apf.colorpicker),apf.comment=function(){this.$init("comment",apf.NODE_HIDDEN)},apf.comment.prototype=new apf.AmlComment,apf.aml.setElement("comment",apf.comment),apf.contextmenu=function(){this.$init("contextmenu",apf.NODE_HIDDEN)},function(){this.$amlNodes=[],this.$attrExcludePropBind=apf.extend({match:1},this.$attrExcludePropBind),this.register=function(e){e.contextmenus||(e.contextmenus=[]),e.contextmenus.push(this)},this.unregister=function(e){e.contextmenus.remove(this)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.register(this.parentNode)})}.call(apf.contextmenu.prototype=new apf.AmlElement),apf.aml.setElement("contextmenu",apf.contextmenu),apf.datagrid=function(e,t){this.$init(t||"datagrid",apf.NODE_VISIBLE,e),this.$headings=[],this.$cssRules=[],this.$lastOpened={},this.$editors={},this.$dynCssClasses=[]},function(){function t(){}function n(){var e=this.current||this.$selected,t=this.$container;t.scrollTop=e.offsetTop-21}var e=this.$treeState;this.implement(apf.DataAction),this.bufferselect=!1,this.$useTable=!1,this.$focussable=!0,this.$isWindowContainer=-1,this.$widthdiff=0,this.$defaultwidth=0,this.$useiframe=0,this.$needsDepth=!0,this.$fixed=0,this.canrename=!1,this.$booleanProperties.iframe=!0,this.$mode=0,this.$propHandlers.mode=function(e){"check|radio".indexOf(e)>-1?(this.hasFeature(apf.__MULTICHECK__)||this.implement(apf.MultiCheck),this.addEventListener("afterrename",t),this.multicheck=e=="check",this.$mode=this.multicheck?1:2):(this.removeEventListener("afterrename",t),this.$mode=0)},this.$propHandlers.options=function(e){for(var t=0,n=this.$headings.length;t<n;t++)this.$headings[t].setAttribute("options",e)},this.$getCaptionElement=function(){if(!this.$selected)return!1;var e=this.$head.childNodes,t=this.$selected.childNodes,n=0;nodeIter=t[n];while(nodeIter){if(nodeIter.nodeType!=1){nodeIter=nodeIter.nextSibling;continue}h=apf.all[e[n].getAttribute("hid")];if(h.tree||h.rename)return this.$getLayoutNode(h.tree?"treecell":"cell","caption",nodeIter)||nodeIter;n++,nodeIter=nodeIter.nextSibling}throw new Error("Datagrid without rename column specified")},this.$focus=function(){if(!this.$ext||apf.isIE&&this.$useiframe&&this.cssfix)return;this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus"),this.oDoc&&this.$setStyleClass(this.oDoc.documentElement,this.$baseCSSname+"Focus")},this.$blur=function(){if(!this.$ext||apf.isIE&&this.$useiframe&&this.cssfix)return;this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"]),this.oDoc&&this.$setStyleClass(this.oDoc.documentElement,"",[this.$baseCSSname+"Focus"]),r.call(this)},this.addEventListener("bindingsload",this.$loaddatabinding=function(e){var t=e.bindings.column;if(!t||!t.length)return;this.$cssRules=[],this.$headings=t,this.clearAllCache();var n=0,r=!1;for(var i,s=0,o=t.length;s<o;s++)i=t[s],i.visible!==!1&&(i.$isPercentage?r=!0:n+=parseFloat(i.$width)||0);r||(this.$isFixedGrid=!0,this.$setStyleClass(this.$ext,"fixed"),this.$useiframe&&this.$setStyleClass(this.oDoc.documentElement,"fixed"));if(n>0&&!this.$isFixedGrid){var u=n;this.$cssRules.push(["."+this.$baseCSSname+" .row"+this.$uniqueId,"padding-right:"+u+"px;margin-right:-"+u+"px"]),this.$container.style.paddingRight=u-1+"px",this.$head.style.paddingRight=u-2+"px"}this.$fixed=n,this.$first=0,this.$withContainer=e.bindings.description?!0:!1,apf.importStylesheet(this.$cssRules,window),this.$useiframe&&apf.importStylesheet(this.$cssRules,this.oWin)}),this.$initNode=function(t,n,r,i){this.$getNewContext("item");var s=this.$getLayoutNode("item");s.setAttribute("id",r),s.setAttribute("class",s.getAttribute("class")+" "+e[n]+" item"+this.$uniqueId),this.$setStyleClass(this.$getLayoutNode("item","container"),e[n]),s.setAttribute("ondblclick","var o = apf.lookup("+this.$uniqueId+");o.choose(null, true);"+(this.$withContainer?"o.slideToggle(this, null, true);":"")+(this.celledit&&!this.namevalue?"o.startRename(null, null, true);":"")),this.hasFeature(apf.__DRAGDROP__)?(s.setAttribute("onmouseout","this.hasPassedDown = false;"),s.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+");                var xmlNode = apf.xmldb.findXmlNode(this);                 var isSelected = o.isSelected(xmlNode);                 this.hasPassedDown = true;                 if (!o.hasFeature(apf.__DRAGDROP__) || !isSelected && !apf.getCtrlKey(event))                     o.select(this, apf.getCtrlKey(event), event.shiftKey, -1);"+(this.cellselect||this.namevalue?"o.selectCell(event, this, isSelected);":"")),s.setAttribute("onmouseup","if (!this.hasPassedDown) return;                var o = apf.lookup("+this.$uniqueId+");                 var xmlNode = apf.xmldb.findXmlNode(this);                 var isSelected = o.isSelected(xmlNode);                 if (o.hasFeature(apf.__DRAGDROP__))                     o.select(this, apf.getCtrlKey(event), event.shiftKey, -1);")):s.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+");                var wasSelected = o.$selected == this;                o.select(this, apf.getCtrlKey(event), event.shiftKey, -1);"+(this.cellselect||this.namevalue?"o.selectCell(event, this, wasSelected);":""));for(var o,u,a,f=0;f<this.$headings.length;f++){a=this.$headings[f];if(a.tree&&a.check){o="treecheckcell",this.$getNewContext("treecheckcell"),u=this.$getLayoutNode("treecheckcell");var l=this.$getLayoutNode("treecheckcell","openclose");l.setAttribute("style","margin-left:"+((i||0)*15+4)+"px;"),l.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+");                    o.slideToggle(this, null, null, true);                    event.cancelBubble = true;                    apf.window.$mousedown(event);"),l.setAttribute("ondblclick","event.cancelBubble = true")}else if(a.tree){o="treecell",this.$getNewContext("treecell"),u=this.$getLayoutNode("treecell");var l=this.$getLayoutNode("treecell","openclose");l.setAttribute("style","margin-left:"+((i||0)*15+4)+"px;"),l.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+");                    o.slideToggle(this, null, null, true);                    event.cancelBubble = true;                    apf.window.$mousedown(event);"),l.setAttribute("ondblclick","event.cancelBubble = true")}else o=a.check?"checkcell":"cell",this.$getNewContext(o),u=this.$getLayoutNode(o);if(this.$mode&&a.check){var c=this.$getLayoutNode(o,"check");if(!c)return!1;c.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+");                        o.checkToggle(this, true);o.$skipSelect = true;"),apf.isTrue(this.$applyBindRule("checked",t))?(this.$checkedList.push(t),this.$setStyleClass(s,"checked")):this.isChecked(t)&&this.$setStyleClass(s,"checked")}apf.setStyleClass(u,a.$className),a.css&&apf.setStyleClass(u,apf.lm.compile(a.css)(t));if(a.icon){var h=this.$getLayoutNode(o,"caption",s.appendChild(u));h=h.nodeType==1&&h||h.parentNode,h.setAttribute("style","background-image:url("+apf.getAbsolutePath(this.iconPath,(a.cicon||a.$compile("icon",{nostring:!0}))(t)||"")+");"),this.$setStyleClass(h,"iconCell",[])}a.value&&(a.cvalue2||a.$compile("value",{nostring:!0}),apf.setNodeValue(this.$getLayoutNode(o,"caption",s.appendChild(u)),a.cvalue2(t)||"&nbsp"))}if(this.$bindings&&this.$bindings.color){var p=this.$getDataNode("color",t);this.$setStyleClass(s,p?"highlight":null,p?["highlight"]:null)}var d=this.$applyBindRule("css",t);return d&&(this.$setStyleClass(s,d),d&&this.$dynCssClasses.push(d)),s},this.$updateNode=function(e,t){if(!t)return;var n=this.$head.childNodes,r=t.childNodes,i,s;!this.namevalue&&this.$curBtn&&(s=this.$curBtn.parentNode);var o,u,a=0;o=r[0];while(o){if(o.nodeType!=1){o=o.nextSibling;continue}u=apf.all[n[a].getAttribute("hid")],i=this.$getLayoutNode(u.tree?"treecell":"cell","caption",o)||o,u.css&&apf.setStyleClass(i,apf.lm.compile(u.css)(e)),u.tree,u.value&&(u.cvalue2||u.$compile("value",{nostring:!0}),i.innerHTML=u.cvalue2(e)||"&nbsp"),u.icon&&((i.nodeType==1&&i||i.parentNode).style.backgroundImage="url("+apf.getAbsolutePath(this.iconPath,(u.cicon||u.$compile("icon",{nostring:!0}))(e)||"")+")"),a++,o=o.nextSibling}if(this.$bindings&&this.$bindings.color){var f=this.$getDataNode("color",e);this.$setStyleClass(t,f?"highlight":null,f?["highlight"]:null)}var l=this.$applyBindRule("css",e);if(l||this.$dynCssClasses.length)this.$setStyleClass(t,l,this.$dynCssClasses),l&&!this.$dynCssClasses.contains(l)&&this.$dynCssClasses.push(l)},this.$dblclick=function(e){var t=this,n,i;while(!(n=e.getAttribute(apf.xmldb.htmlIdTag))||n.indexOf("|")==-1){e=(i=e).parentNode;if(!e||e.nodeType!=1)return}if(this.$lastEditor&&this.$lastEditor[3]==e)return;var s,o=i.className.match(/(col\d+)/)[1];for(var u=0;u<this.$headings.length;u++)if(this.$headings[u].$className==o){s=this.$headings[u];break}if(!s.editor)return;var a=apf.xmldb.getNode(e),f=s.tree?this.$getLayoutNode("cell","caption",i):i,l,c=s.editor,h=apf.lm.compile(c,{xpathmode:2}),p=f.childNodes;for(var u=0,d=p.length;u<d;u++)p[u].host||(p[u].nodeType==1?p[u].style.display="none":(this.$lastTextValue=p[u].nodeValue,p[u].nodeValue=""));if(h.type==2)if(!this.$editors[s.$uniqueId+":"+c]){var m=apf.namespaces[apf.ns.aml].elements[c],g={htmlNode:f,style:"position:relative;z-index:10000",value:"[{"+this.id+".selected}::"+(v=s.value).substr(1,v.length-2)+"]",focussable:!1};s.tree?g.width="100% - "+(f.offsetLeft+parseInt(this.$getOption("treecell","editoroffset"))):g.width="100%-3";if(m.prototype.hasFeature(apf.__MULTISELECT__)){g.caption=s.eachcaption||"[text()]",g.eachvalue=s.eachvalue;var y;(y=s.getAttribute("model"))?(g.model=y,g.each=s.each):(g.model="{"+this.id+".selected}",g.each=s.each)}s.skin&&(g.skin=s.skin),s["class"]&&(g["class"]=s["class"]),s.fill&&(g.fill=s.fill),l=this.$editors[s.$uniqueId+":"+c]=new m(g);var b=apf.getBox(apf.getStyle(l.$ext,"margin"));(b[1]||b[3])&&l.setAttribute("width","100%+2-"+(b[1]+b[3])),l.addEventListener("blur",function(){r.call(t)}),l.parentNode=this,l.realtime=!1,l.$focusParent=this,l.setAttribute("focussable","true"),l.addEventListener("keydown",function(e){e.keyCode==13?(r.call(t),t.$focus()):e.keyCode==27&&(l.removeAttribute("value"),r.call(t))}),l.$executeAction=function(){this.parentNode.$executeAction.apply(this.parentNode,arguments)}}else l=this.$editors[s.$uniqueId+":"+c],l.hasFeature(apf.__MULTISELECT__)&&!s.model?l.setAttribute("value","[{"+this.id+".selected}::"+(v=s.value).substr(1,v.length-2)+"]"):l.setAttribute("value","[{"+this.id+".selected}::"+(v=s.value).substr(1,v.length-2)+"]"),l.setProperty("visible",!0),f.appendChild(l.$ext),l.setAttribute("width",s.tree?"100% - "+(f.offsetLeft+parseInt(this.$getOption("treecell","editoroffset"))):"100%-3");else{var w=h.call(this,this.xmlRoot);w.localName=="template"}l.localName=="textbox"&&l.select(),l.focus(),l.$focus(),this.$setStyleClass(e,"editing"),this.$lastEditor=[l,f,a,e,this.getActionTracker().undolength]},this.addEventListener("mousedown",function(e){this.$lastEditor&&!apf.isChildOf(this.$lastEditor[1],e.htmlEvent.srcElement||e.htmlEvent.target,!0)&&r.call(this)});var r=function(e){if(this.$lastEditor){var t=this.$lastEditor;this.$lastEditor=null,t[0].hasFeature(apf.__MULTISELECT__)&&t[0].$clearDynamicProperty("value"),t[0].setProperty("visible",!1);var n=t[1].childNodes;for(var r=0,i=n.length;r<i;r++)if(!n[r].host)if(n[r].nodeType==1)n[r].style.display="";else if(!t[0].value||t[0].value==this.$lastTextValue)n[r].nodeValue=this.$lastTextValue;this.$setStyleClass(t[3],"",["editing"]),this.focus()}};this.addEventListener("beforeselect",r),this.getColumn=function(e){return this.$headings[e||this.$lastcol||0]},this.resizeColumn=function(e,t){var n=this.$headings[e];n.resize(t)},this.hideColumn=function(e){var t=this.$headings[e];t.hide()},this.showColumn=function(e){var t=this.$headings[e];t.show()},this.sortColumn=function(e){var t=this.$headings[nr];t.sort()},this.moveColumn=function(e,t){var n=this.$headings[nr];n.move(t)},this.$draw=function(){this.$drawBase();var e=this;this.$ext.onmousedown=function(t){e.dispatchEvent("mousedown",{htmlEvent:t||event})},this.$head=this.$getLayoutNode("main","head",this.$ext),this.$pointer=this.$getLayoutNode("main","pointer",this.$ext),this.$head.firstChild&&this.$head.removeChild(this.$head.firstChild),this.$container.firstChild&&this.$container.removeChild(this.$container.firstChild);var t=this.$widthdiff=this.$getOption("main","widthdiff")||0;this.$defaultwidth=this.$getOption("main","defaultwidth")||"100",this.$useiframe=apf.isIE&&(apf.isTrue(this.$getOption("main","iframe"))||this.iframe);if(this.$useiframe&&!this.oIframe){var n=this.$container.className;this.oIframe=this.$container.appendChild(document.createElement(apf.isIE?"<iframe frameborder='0'></iframe>":"iframe")),this.oIframe.frameBorder=0,this.oWin=this.oIframe.contentWindow,this.oDoc=this.oWin.document,this.oDoc.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">                <html xmlns="http://www.w3.org/1999/xhtml">                    <head><script>                        apf = {                            lookup : function(uid){                                return window.parent.apf.lookup(uid);                            },                            Init : {add:function(){},run:function(){}}                        };</script>                    </head>                    <body></body>                </html>'),this.$container=this.oDoc.body,this.$container.className=n,this.oDoc.documentElement.className=this.$ext.className,apf.skins.loadCssInWindow(this.skinName,this.oWin,this.mediaPath,this.iconPath),apf.isIE&&this.$setStyleClass(this.oDoc.documentElement,this.$baseCSSname+"Focus"),apf.convertIframe(this.oIframe,!0),apf.getStyle(this.oDoc.documentElement,"overflowY")=="auto"&&(this.oIframe.onresize=function(){e.$head.style.marginRight=e.oDoc.documentElement.scrollHeight>e.oDoc.documentElement.offsetHeight?"16px":"0"},this.addEventListener("afterload",this.oIframe.onresize),this.addEventListener("xmlupdate",this.oIframe.onresize)),this.oDoc.documentElement.onscroll=function(){e.$isFixedGrid&&(e.$head.scrollLeft=e.oDoc.documentElement.scrollLeft)}}else apf.getStyle(this.$container,"overflowY")=="auto"&&(this.$resize=function(){e.$head.style.marginRight=e.$container.scrollHeight>e.$container.offsetHeight?"16px":"0"},apf.layout.setRules(this.$ext,this.$uniqueId+"_datagrid","var o = apf.all["+this.$uniqueId+"];                     if (o) o.$resize()"),apf.layout.queue(this.$ext),this.addEventListener("afterload",this.$resize),this.addEventListener("xmlupdate",this.$resize)),this.$container.onscroll=function(){e.$isFixedGrid&&(e.$head.scrollLeft=e.$container.scrollLeft)};this.$container[this.clickedit?"onmousedown":"ondblclick"]=function(t){t||(t=event),e.$dblclick(t.srcElement||t.target)}},this.$destroy=function(){this.$ext.onclick=this.$container.onresize=null,apf.layout.removeRule(this.$container,"dg"+this.$uniqueId),apf.layout.activateRules(this.$container)}}.call(apf.datagrid.prototype=new apf.BaseTree),apf.aml.setElement("datagrid",apf.datagrid),apf.aml.setElement("description",apf.BindingRule),apf.aml.setElement("color",apf.BindingRule),apf.aml.setElement("contents",apf.BindingRule),apf.divider=function(e,t){this.$init(t||"divider",apf.NODE_VISIBLE,e)},function(){this.$focussable=!1,this.minwidth=0,this.minheight=0,this.implement(apf.ChildValue),this.$childProperty="caption",this.addEventListener("AMLReparent",function(e,t,n){if(!this.$amlLoaded)return;!n&&this.skinName!=t.skinName&&this.loadAml()}),this.$supportedProperties.push("caption","value","for","textalign"),this.$propHandlers.caption=function(e){this.$caption?(this.$setStyleClass(this.$ext,this.$baseCSSname+"Caption"),this.$caption.innerHTML=e):this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Caption"])},this.$canLeechSkin=!0,this.$draw=function(){this.parentNode.isPaged&&this.parentNode.$buttons&&(this.$pHtmlNode=this.parentNode.$buttons),this.$isLeechingSkin?this.$ext=apf.insertHtmlNode(this.parentNode.$getLayoutNode("divider"),this.$pHtmlNode):(this.$ext=this.$getExternal("main"),this.$caption=this.$getLayoutNode("main","caption",this.$ext))}}.call(apf.divider.prototype=new apf.Presentation),apf.aml.setElement("divider",apf.divider),apf.dropdown=function(e,t){this.$init(t||"dropdown",apf.NODE_VISIBLE,e)},function(){function e(){this.isOpen==2&&this.slideDown()}this.$animType=1,this.$animSteps=5,this.$animSpeed=20,this.$itemSelectEvent="onmouseup",this.dragdrop=!1,this.reselectable=!0,this.$focussable=apf.KEYBOARD,this.autoselect=!1,this.multiselect=!1,this.disableremove=!0,this.delayedselect=!1,this.maxitems=5,this.$booleanProperties.disableremove=!0,this.$supportedProperties.push("maxitems","disableremove","initial-message","fill"),this.$propHandlers.maxitems=function(e){this.sliderHeight=e?Math.min(this.maxitems||100,e)*this.itemHeight:10,this.containerHeight=e?Math.min(this.maxitems||100,e)*this.itemHeight:10},this.addEventListener("prop.class",function(e){this.$setStyleClass(this.oSlider,e.value)}),this.slideToggle=function(e,t){e||(e=event);if(t&&this.disabled)return;this.isOpen?this.slideUp():this.slideDown(e)},this.slideDown=function(e){if(this.dispatchEvent("slidedown")===!1)return!1;this.isOpen=!0,this.$propHandlers.maxitems.call(this,this.xmlRoot&&this.each?this.getTraverseNodes().length:this.childNodes.length),this.oSlider.style.display="block",this.ignoreOverflow||(this.oSlider.style[apf.supportOverflowComponent?"overflowY":"overflow"]="visible",this.$container.style.overflowY="hidden"),this.oSlider.style.display="",this.$setStyleClass(this.$ext,this.$baseCSSname+"Down"),this.oSlider.style.height=this.sliderHeight-1+"px",this.oSlider.style.width=this.$ext.offsetWidth-2-this.widthdiff+"px";var t=this,n=apf.popup.getCurrentElement();apf.popup.show(this.$uniqueId,{x:0,y:this.$ext.offsetHeight,animate:!0,container:this.$getLayoutNode("container","contents",this.oSlider),ref:this.$ext,width:this.$ext.offsetWidth-this.widthdiff,height:this.containerHeight,allowTogether:n&&apf.isChildOf(n.$ext,t.$ext),callback:function(e){t.ignoreOverflow||(t.$container.style.overflowY="auto")}})},this.slideUp=function(){if(this.isOpen==2)return!1;if(this.dispatchEvent("slideup")===!1)return!1;this.isOpen=!1;if(this.selected){var e=apf.xmldb.findHtmlNode(this.selected,this);e&&this.$setStyleClass(e,"",["hover"])}return this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Down"]),apf.popup.last==this.$uniqueId&&apf.popup.hide(),!1},this.$setLabel=function(e){this.oLabel.innerHTML=e||this["initial-message"]||"",this.$setStyleClass(this.$ext,e?"":this.$baseCSSname+"Initial",e?[this.$baseCSSname+"Initial"]:[])},this.addEventListener("afterselect",function(e){e||(e=event),this.slideUp(),this.isOpen||this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Over"]),this.$setLabel(e.selection.length?this.$applyBindRule("caption",this.selected):"")}),this.addEventListener("afterload",e),this.addEventListener("xmlupdate",function(){e.call(this),this.$setLabel(this.$applyBindRule("caption",this.selected))}),this.$blur=function(){this.slideUp(),this.isOpen||this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Over"]),this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"])},this.$setClearMessage=function(e){this.$setLabel(e)},this.$removeClearMessage=function(){this.$setLabel("")},this.addEventListener("popuphide",this.slideUp),this.addEventListener("keydown",function(e){var t=e.keyCode;if(!this.xmlRoot)return;var n;switch(t){case 32:this.slideToggle(e.htmlEvent);break;case 38:if(e.altKey){this.slideToggle(e.htmlEvent);return}if(!this.selected)return;n=this.getNextTraverseSelected(this.caret||this.selected,!1),n&&this.select(n);break;case 40:if(e.altKey){this.slideToggle(e.htmlEvent);return}if(!this.selected){n=this.getFirstTraverseNode();if(!n)return}else n=this.getNextTraverseSelected(this.selected,!0);n&&this.select(n);break;default:if(t==9||!this.xmlRoot)return;if(!this.lookup||(new Date).getTime()-this.lookup.date.getTime()>1e3)this.lookup={str:"",date:new Date};this.lookup.str+=String.fromCharCode(t);var r,i=this.getTraverseNodes();for(var s=0;s<i.length;s++){r=this.$applyBindRule("caption",i[s]);if(r&&r.indexOf(this.lookup.str)>-1){this.select(i[s]);return}}return}return!1},!0),this.$draw=function(){this.$getNewContext("main"),this.$getNewContext("container"),this.$animType=this.$getOption("main","animtype")||1,this.clickOpen=this.$getOption("main","clickopen")||"button",this.$ext=this.$getExternal(null,null,function(e){e.setAttribute("onmouseover","var o = apf.lookup("+this.$uniqueId+');o.$setStyleClass(o.$ext, o.$baseCSSname + "Over", null, true);'),e.setAttribute("onmouseout","var o = apf.lookup("+this.$uniqueId+');if(o.isOpen) return;o.$setStyleClass(o.$ext, "", [o.$baseCSSname + "Over"], true);');var t=this.$getLayoutNode("main","button",e);t&&t.setAttribute("onmousedown","apf.lookup("+this.$uniqueId+").slideToggle(event, true);");var n=this.$getLayoutNode("main","label",e);this.clickOpen=="both"&&n.parentNode.setAttribute("onmousedown","apf.lookup("+this.$uniqueId+").slideToggle(event, true);")}),this.oLabel=this.$getLayoutNode("main","label",this.$ext),this.oLabel.nodeType==3&&(this.oLabel=this.oLabel.parentNode),this.oIcon=this.$getLayoutNode("main","icon",this.$ext),this.$button&&(this.$button=this.$getLayoutNode("main","button",this.$ext)),this.oSlider=apf.insertHtmlNode(this.$getLayoutNode("container"),document.body),this.$container=this.$getLayoutNode("container","contents",this.oSlider),this.$container.host=this,this.$pHtmlDoc=apf.popup.setContent(this.$uniqueId,this.oSlider,apf.skins.getCssString(this.skinName)),this.listtype=parseInt(this.$getLayoutNode("main","type"))||1,this.itemHeight=this.$getOption("main","item-height")||18.5,this.widthdiff=this.$getOption("main","width-diff")||0,this.ignoreOverflow=apf.isTrue(this.$getOption("main","ignore-overflow"))||!1},this.addEventListener("DOMNodeInsertedIntoDocument",function(){typeof this["initial-message"]=="undefined"&&this.$setInheritedAttribute("initial-message"),!this.selected&&this["initial-message"]&&this.$setLabel()}),this.$destroy=function(){apf.popup.removeContent(this.$uniqueId),apf.destroyHtmlNode(this.oSlider),this.oSlider=null}}.call(apf.dropdown.prototype=new apf.BaseList),apf.config.$inheritProperties["initial-message"]=1,apf.aml.setElement("dropdown",apf.dropdown),apf.errorbox=function(e,t){this.$init(t||"errorbox",apf.NODE_VISIBLE,e)},function(){this.$positioning="basic",this.display=function(e){this.host=e;var t=e.$ext;document.body.appendChild(this.$ext);var n=parseFloat(e.$getOption&&e.$getOption("main","erroffsetx")||0),r=parseFloat(e.$getOption&&e.$getOption("main","erroffsety")||0);this.show(),apf.popup.show(this.$uniqueId,{x:n,y:r,animate:!1,ref:t,allowTogether:!0}),this.$setStyleClass(this.$ext,n+this.$ext.offsetWidth>this.$ext.offsetParent.offsetWidth?"rightbox":"leftbox",["leftbox","rightbox"])},this.setMessage=function(e){e&&e.indexOf(";")>-1&&(e=e.split(";"),e="<strong>"+e.shift()+"</strong>"+e.join(";")),this.$int.innerHTML=e||""},this.$draw=function(){this.$ext=this.$getExternal(),this.$int=this.$getLayoutNode("main","container",this.$ext),this.oClose=this.$getLayoutNode("main","close",this.$ext);if(this.oClose){var e=this;this.oClose.onclick=function(){e.hide(),apf.document.activeElement&&apf.document.activeElement.focus(!0,{mouse:!0})}}this.$ext.onmousedown=function(e){(e||event).cancelBubble=!0},apf.popup.setContent(this.$uniqueId,this.$ext,"",null,null)},this.$loadAml=function(e){apf.isTrue(this.getAttribute("visible"))||this.hide()},this.$destroy=function(){this.oClose&&(this.oClose.onclick=null),this.$ext.onmousedown=null,apf.popup.removeContent(this.$uniqueId)}}.call(apf.errorbox.prototype=new apf.Presentation),apf.aml.setElement("errorbox",apf.errorbox),apf.event=function(e,t){this.$init(t||"event",apf.NODE_HIDDEN,e)},function(){this.$hasInitedWhen=!1,this.$booleanProperties.repeat=!0,this.$supportedProperties.push("when","message","icon","repeat"),this.$propHandlers.when=function(e){if(this.$hasInitedWhen&&e&&this.parentNode&&this.parentNode.popup){var t=this;$setTimeout(function(){t.parentNode.popup(t.message,t.icon,t)})}this.$hasInitedWhen=!0,this.repeat&&delete this.when},this.$loadAml=function(e){}}.call(apf.event.prototype=new apf.AmlElement),apf.aml.setElement("event",apf.event),apf.filler=function(e,t){this.$init(t||"filler",apf.NODE_VISIBLE,e)},function(){this.$focussable=!1,this.flex=1,this.$draw=function(){this.$ext=this.$pHtmlNode.appendChild(this.$pHtmlNode.ownerDocument.createElement("div"))}}.call(apf.filler.prototype=new apf.GuiElement),apf.aml.setElement("filler",apf.filler),apf.panel=function(e,t){this.$init(t||"panel",apf.NODE_VISIBLE,e)},apf.fieldset=function(e,t){this.$init(t||"fieldset",apf.NODE_VISIBLE,e)},apf.frame=function(e,t){this.$init(t||"submit",apf.NODE_VISIBLE,e)},function(){this.implement(apf.BaseStateButtons),this.$focussable=!1,this.$supportedProperties.push("caption","url"),this.$propHandlers.caption=function(e){if(!this.oCaption)return;this.oCaption.nodeType==1?this.oCaption.innerHTML=e:this.oCaption.nodeValue=e},this.$propHandlers.icon=function(e){var t=this.$getLayoutNode("main","icon",this.$ext);if(!t)return;t.nodeType==1&&(t.style.display=e?"block":"none"),apf.skins.setIcon(t,e,this.iconPath)},this.$propHandlers.url=function(e){var t=this.oCaption;if(t.tagName=="A"||t.nodeType!=1)t=t.parentNode;t.innerHTML="<a href='"+e+"' "+(e.match(/^http:\/\//)?"target='_blank'":"")+">"+this.caption+"</a>",this.oCaption=this.oCaption.firstChild},this.setTitle=function(e){this.setProperty("title",e)},this.$draw=function(){this.$ext=this.$getExternal(null,null,function(e){this.$initButtons(e)}),this.oCaption=this.$getLayoutNode("main","caption",this.$ext),this.$int=this.$getLayoutNode("main","container",this.$ext),this.$buttons=this.$getLayoutNode("main","buttons",this.$ext)},this.$loadAml=function(e){}}.call(apf.frame.prototype=new apf.Presentation),apf.panel.prototype=apf.fieldset.prototype=apf.frame.prototype,apf.aml.setElement("panel",apf.panel),apf.aml.setElement("fieldset",apf.fieldset),apf.aml.setElement("frame",apf.frame),apf.hbox=function(e,t){this.$init(t||"hbox",apf.NODE_VISIBLE,e)},apf.vbox=function(e,t){this.$init(t||"vbox",apf.NODE_VISIBLE,e)},function(){function n(t){if(this.parentNode.splitters&&!this.$splitter)if(!t.value)this.nextSibling&&this.nextSibling.$splitter?this.nextSibling.removeNode():this.previousSibling&&this.previousSibling.$splitter&&this.previousSibling.removeNode();else{var n=o(this);n?this.previousSibling&&!this.previousSibling.$splitter&&!this.previousSibling.nosplitter&&this.parentNode.insertBefore(this.ownerDocument.createElementNS(apf.ns.aml,"splitter"),this):!this.nextSibling.$splitter&&!this.nextSibling.nosplitter&&!s(this)&&!this.nosplitter&&this.parentNode.insertBefore(this.ownerDocument.createElementNS(apf.ns.aml,"splitter"),this.nextSibling)}this.parentNode.$propHandlers.padding&&this.parentNode.$propHandlers.padding.call(this.parentNode,this.parentNode.padding),apf.layout.forceResize(this.parentNode.$int);if(apf.hasFlexibleBox){this.$altExt&&(this.$altExt.style.display=t.value?apf.isGecko?e:apf.CSSPREFIX2+"-box":"none");return}t.value?(this.$ext.style.display=this.parentNode.$vbox&&this.parentNode.align=="stretch"?"block":apf.INLINE,apf.needZoomForLayout&&(this.$ext.style.zoom=1),this.$br&&(this.$br.style.display=this.parentNode.align=="stretch"?"none":"")):this.$br&&(this.$br.style.display="none"),this.parentNode.$resize()}function r(){if(!this.flex){if(this.$isRszHandling||this.$lastSizeChild&&this.$lastSizeChild[0]==this.$ext.offsetWidth&&this.$lastSizeChild[1]==this.$ext.offsetHeight)return;this.parentNode.$resize(!0),this.$lastSizeChild=[this.$ext.offsetWidth,this.$ext.offsetHeight]}}function s(e){var t=e.parentNode.firstChild;while(t&&(t.nodeFunc!=apf.NODE_VISIBLE||t.visible===!1||t.visible==2&&apf.isFalse(t.getAttribute("visible"))))t=t.nextSibling;return t&&t==e}function o(e){var t=e.parentNode.lastChild;while(t&&(t.nodeFunc!=apf.NODE_VISIBLE||t.visible===!1||t.visible==2&&apf.isFalse(t.getAttribute("visible"))))t=t.previousSibling;return t&&t==e}function u(e){e.value&&(this.$int.style.display=apf.CSSPREFIX2+"-box")}function a(e){clearInterval(this.$heighttimer);if(e.value||this.align!="stretch")delete this.$heighttimer;else if(!this.$heighttimer){var t=this;this.$heighttimer=$setInterval(function(){if(t.$amlDestroyed)return;var e=t.childNodes;for(var n,r=0,i=e.length;r<i;r++){if(!(n=(node=e[r]).$int||node.$container))continue;if(Math.min(n.scrollHeight,node.maxheight||1e4)>n.offsetHeight)return t.$resize(!0)}t.flex&&clearInterval(this.$heighttimer)},this.flex?1:500)}}this.minwidth=0,this.minheight=0,this.$focussable=!1,this.$useLateDom=!0,this.$box=!0,this.$layout=!0;var e="-moz-stack",t={INPUT:1,SELECT:1,TEXTAREA:1};this.$booleanProperties.splitters=!0,this.$supportedProperties.push("padding","reverse","edge","pack","align","splitters"),this.$propHandlers.padding=function(e){this.padding=parseInt(e);var t,n=this.childNodes,r=[];for(var i=0,s=n.length;i<s;i++)(t=n[i]).nodeFunc==apf.NODE_VISIBLE&&t.$ext&&t.visible!==!1&&r.push(t);if(!r.length)return;for(var o,u,a,i=r.length-2;i>=0;i--)u=(a=r[i]).margin&&apf.getBox(a.margin)||[0,0,0,0],(!o||!o.$splitter)&&!a.$splitter&&(u[this.$vbox?2:1]+=this.padding,!apf.hasFlexibleBox&&i!=0&&this.align=="stretch"&&this.$vbox&&(u[0]+=this.padding)),a.$ext.style.margin=u.join("px ")+"px",o=a;u=(a=r[r.length-1]).margin&&apf.getBox(a.margin)||[0,0,0,0],a.$ext.style.margin=u.join("px ")+"px",apf.hasFlexibleBox||this.$resize()},this.$propHandlers.reverse=function(e){apf.hasFlexibleBox&&(this.$int.style[apf.CSSPREFIX+"BoxDirection"]=e?"reverse":"normal")},this.$propHandlers.edge=function(e){var t=!apf.hasFlexibleBox&&this.$vbox?this.$ext:this.$int;t.style.padding=(this.$edge=apf.getBox(e)).join("px ")+"px",apf.hasFlexibleBox||this.$resize()},this.$propHandlers.pack=function(e){if(apf.hasFlexibleBox)this.$int.style[apf.CSSPREFIX+"BoxPack"]=e||"start";else if(this.$amlLoaded)if(this.$vbox)this.$int.style.verticalAlign=e=="center"?"middle":e=="end"?"bottom":"top";else{this.$int.style.textAlign="";var t=this.childNodes;for(var n=0,r=t.length;n<r;n++){if((node=t[n]).nodeFunc!=apf.NODE_VISIBLE||!node.$amlLoaded)continue;node.$ext.style.textAlign=apf.getStyle(node.$ext,"textAlign")||"left"}this.$int.style.textAlign=e=="center"?"center":e=="end"?"right":"left"}},this.$propHandlers.align=function(e){if(apf.hasFlexibleBox){this.$int.style[apf.CSSPREFIX+"BoxAlign"]=e||"stretch",apf.isGecko&&(this.$int.style.overflow="visible");var n=!e||e=="stretch",r=this.childNodes,s=this.$vbox?"width":"height",o=!1,u=this;while(!o&&u){o=u[s]||u.anchors||(u.$vbox?u.top&&u.bottom:u.left&&u.right);if(!u.flex)break;u=u.parentNode||u.$parentNode}for(var a=0,f=r.length;a<f;a++){if(!(c=r[a]).$ext||c.$ext.nodeType!=1)continue;n&&!c[s]?c.$ext.style[s]=apf.isGecko&&(this.flex||c.flex)?o?"1px":"auto":apf.isWebkit&&t[c.$ext.tagName]?"100%":"auto":c[s]&&i["true"][s].call(c,c[s])}}else if(this.$amlLoaded){var n=!e||e=="stretch";if(!this.$vbox){var r=this.childNodes;for(var a=0,f=r.length;a<f;a++){if((c=r[a]).nodeFunc!=apf.NODE_VISIBLE||!c.$amlLoaded)continue;c.$ext.style.verticalAlign=e=="center"?"middle":e=="end"?"bottom":"top"}}else{var l=!apf.hasFlexibleBox&&this.$vbox?this.$ext:this.$int;l.style.textAlign="";var c,r=this.childNodes;for(var a=0,f=r.length;a<f;a++){if((c=r[a]).nodeFunc!=apf.NODE_VISIBLE||!c.$amlLoaded)continue;c.visible!==!1&&(c.$ext.style.display=e=="stretch"?"block":apf.INLINE,c.$br.style.display=e=="stretch"?"none":"",apf.needZoomForLayout&&(c.$ext.style.zoom=1)),c.$ext.style.textAlign=apf.getStyle(c.$ext,"textAlign")||"left"}l.style.textAlign=e=="center"?"center":e=="end"?"right":"left"}}};var i={"true":{optimize:function(e){this.optimize=apf.isTrue(e)},width:function(e){(this.$altExt||this.$ext).style.width=apf.isNot(e)?"":parseFloat(e)==e?e+"px":e},height:function(e){(this.$altExt||this.$ext).style.height=apf.isNot(e)?apf.isGecko&&this.flex&&this.parentNode.$vbox?"auto":"":parseFloat(e)==e?e+"px":e},margin:function(e){var t=apf.getBox(e);o(this)||(t[this.parentNode.$vbox?2:1]+=this.parentNode.padding),this.$ext.style.margin=t.join("px ")+"px"},flex:function(e){this.flex=e=parseInt(e);if(e){if(!this.optimize&&!this.$altExt){this.$altExt=this.$ext.ownerDocument.createElement("div"),this.parentNode.$int.replaceChild(this.$altExt,this.$ext),this.$altExt.appendChild(this.$ext),this.$altExt.style[apf.CSSPREFIX+"BoxSizing"]="border-box",this.$altExt.style.display=apf.CSSPREFIX2+"-box",this.$altExt.style[apf.CSSPREFIX+"BoxOrient"]="vertical",this.$ext.style[apf.CSSPREFIX+"BoxFlex"]=1;var t=this.parentNode.$vbox?"height":"width";apf.isWebkit?this.preventforcezero||(this.$altExt.style[t]="0px"):apf.isGecko&&(this.$altExt.style[t]="0px",this.$box||(this.$altExt.style.overflow="hidden"),apf.getStyle(this.$ext,"overflow")=="visible"&&(this.$ext.style.overflow="hidden"),this.$ext.style[t]="1px",this.$altExt.style.minHeight=this.$ext.style.minHeight,this.$altExt.style.maxHeight=this.$ext.style.maxHeight,this.$altExt.style.minWidth=this.$ext.style.minWidth,this.$altExt.style.maxWidth=this.$ext.style.maxWidth)}(this.$altExt||this.$ext).style[apf.CSSPREFIX+"BoxFlex"]=parseInt(e)||1}else this.$altExt&&(this.parentNode.$int.replaceChild(this.$ext,this.$altExt),this.$ext.style[apf.CSSPREFIX+"BoxFlex"]="",apf.isGecko&&(this.$ext.style.overflow=""),delete this.$altExt)}},"false":{width:function(e){this.$ext.style.width=e?parseFloat(e)==e?Math.max(0,e-apf.getWidthDiff(this.$ext))+"px":e:""},height:function(e){this.$ext.style.height=e?parseFloat(e)==e?Math.max(0,e-apf.getHeightDiff(this.$ext))+"px":e:""},margin:function(e){var t=apf.getBox(e);this.padding&&(o(this)||(t[this.parentNode.$vbox?2:1]+=this.padding),this!=this.parentNode.firstChild&&this.parentNode.align=="stretch"&&this.parentNode.$vbox&&(t[0]+=this.padding)),this.$ext.style.margin=t.join("px ")+"px"},flex:function(e){this.flex=parseInt(e),this.$amlLoaded&&this.parentNode.$resize(!0)}}};this.register=function(e,s){if(e.$altExt)return;e.$propHandlers.left=e.$propHandlers.top=e.$propHandlers.right=e.$propHandlers.bottom=apf.K;var u=i[apf.hasFlexibleBox];for(var a in u)e.$propHandlers[a]=u[a];if(e.nodeFunc==apf.NODE_VISIBLE){if(apf.hasFlexibleBox){if(e.$ext.tagName=="INPUT"||apf.isWebkit&&t[e.$ext.tagName]){var f=e.$ext.ownerDocument;e.$altExt=f.createElement("div"),e.parentNode.$int.replaceChild(e.$altExt,e.$ext),e.$altExt.style[apf.CSSPREFIX+"BoxSizing"]="border-box",e.$altExt.appendChild(e.$ext);if(apf.isWebkit){var l=apf.getDiff(e.$ext);e.$altExt.style.height="100%",e.$altExt.style.width="0",e.$altExt.style.lineHeight=0,e.$altExt.style.margin="-1px 0 0 0",e.$ext.style.width="100%",e.$ext.style.height="100%",e.$ext.style.top="1px",e.$ext.style.position="relative"}else e.$altExt.style.display=apf.CSSPREFIX2+"-box",e.$altExt.style[apf.CSSPREFIX+"BoxOrient"]="horizontal",e.$altExt.style[apf.CSSPREFIX+"BoxAlign"]="stretch",e.$ext.style[apf.CSSPREFIX+"BoxFlex"]=1}else apf.getStyle(e.$ext,"display")=="inline"&&(e.$ext.style.display="block");e.$ext.style[apf.CSSPREFIX+"BoxSizing"]="border-box"}else{this.$vbox?(e.$br=this.$int.insertBefore(e.$ext.ownerDocument.createElement("br"),e.$ext.nextSibling),e.visible===!1&&(e.$br.style.display="none")):(e.visible!==!1&&(e.$ext.style.display=apf.INLINE,apf.needZoomForLayout&&(e.$ext.style.zoom=1)),this.$int.style.whiteSpace="",e.$ext.style.whiteSpace=apf.getStyle(e.$ext,"whiteSpace")||"normal",this.$int.style.whiteSpace="nowrap"),this.$int.style.fontSize="0";if(!e.$box){var c=apf.getStyle(e.$ext,"fontSize");if(c=="0px"){e.$ext.style.fontSize="";var h=this.$int.parentNode;while(apf.getStyle(h,"fontSize")=="0px")h=h.parentNode;c=apf.getStyle(h,"fontSize")}e.$ext.style.fontSize=c}e.addEventListener("resize",r)}e.addEventListener("prop.visible",n),this.$noResize=!0,e.height&&u.height.call(e,e.height),e.width&&u.width.call(e,e.width),e.margin&&u.margin.call(e,e.margin),e.flex&&u.flex.call(e,e.flex);var p=o(e);if(p||s){this.$propHandlers.padding.call(this,this.padding),this.$propHandlers.align.call(this,this.align),apf.hasFlexibleBox||this.$propHandlers.pack.call(this,this.pack),e.visible!==!1&&n.call(e,{value:!0});if(s&&e.previousSibling){var d=e.previousSibling;while(d&&(d.nodeType!=1||d.localName=="splitter"))d=d.previousSibling;d&&n.call(d,{value:!0})}}else if(this.splitters&&!e.$splitter&&e.visible!==!1&&!e.nosplitter)if(e.$ext.nextSibling!=(e.nextSibling&&(e.nextSibling.$altExt||e.nextSibling.$ext))){var v=this;setTimeout(function(){v.insertBefore(v.ownerDocument.createElementNS(apf.ns.aml,"splitter"),e.nextSibling)})}else this.insertBefore(this.ownerDocument.createElementNS(apf.ns.aml,"splitter"),e.nextSibling);delete this.$noResize,!apf.hasFlexibleBox&&p&&this.$resize()}},this.unregister=function(e){if(!e.$propHandlers)return;e.$propHandlers.left=e.$propHandlers.top=e.$propHandlers.right=e.$propHandlers.bottom=null;var t=i[apf.hasFlexibleBox];for(var s in t)delete e.$propHandlers[s];if(e.nodeFunc==apf.NODE_VISIBLE){if(e.flex){var u=e.flex;t.flex.call(e,0),e.flex=u}apf.hasFlexibleBox?(e.$ext.style[apf.CSSPREFIX+"BoxSizing"]="",apf.isGecko&&(this.$int.style.overflow="visible",e.$ext.style.display=="block"&&(e.$ext.style.display=""))):(e.$ext.style.verticalAlign="",e.$ext.style.textAlign="",e.$ext.style.whiteSpace="",e.$br&&(e.$br.parentNode.removeChild(e.$br),delete e.$br),e.removeEventListener("resize",r)),e.removeEventListener("prop.visible",n),e.$ext.style.display=e.visible?"block":"none",e.margin&&(e.$ext.style.margin=""),e.width&&(e.$ext.style.width=""),this.splitters&&!e.$splitter&&(e.nextSibling&&e.nextSibling.$splitter&&e.nextSibling.removeNode(),o(e)&&e.previousSibling&&e.previousSibling.$splitter&&e.previousSibling.removeNode())}},this.addEventListener("DOMNodeRemoved",function(e){if(e.$doOnlyAdmin||e.currentTarget==this)return;e.relatedNode==this&&this.unregister(e.currentTarget)}),this.addEventListener("DOMNodeInserted",function(e){if(e.currentTarget==this){this.visible&&(this.$ext.style.display=apf.CSSPREFIX2+"-box");return}if(e.currentTarget.nodeType!=1||e.currentTarget.nodeFunc!=apf.NODE_VISIBLE)return;if(e.relatedNode==this&&!e.$isMoveWithinParent){e.currentTarget.$setLayout(this.localName,!0);if(e.currentTarget.$altExt)return!1}}),this.$draw=function(){var e=this.$pHtmlNode.ownerDocument;this.$ext=this.$pHtmlNode.appendChild(e.createElement("div")),this.getAttribute("style")&&this.$ext.setAttribute("style",this.getAttribute("style")),this.$ext.className=this.localName,this.$vbox=this.localName=="vbox",this.$int=apf.isGecko&&!(this.parentNode&&"hbox|vbox".indexOf(this.parentNode.localName)>-1)||!apf.hasFlexibleBox&&this.$vbox?this.$ext.appendChild(e.createElement("div")):this.$ext,this.$ext.host=this,apf.isGecko&&!(this.parentNode&&"hbox|vbox".indexOf(this.parentNode.localName)>-1)?(this.$int.style.width="100%",this.$int.style.height="100%"):!apf.hasFlexibleBox&&this.$vbox&&(this.$int.style.display=apf.INLINE,apf.needZoomForLayout&&(this.$int.style.zoom=1),this.$int.style.width="100%");if(apf.hasFlexibleBox)this.$display="-"+apf.CSSPREFIX+"-box",this.$int.style.display=apf.CSSPREFIX2+"-box",this.$int.style[apf.CSSPREFIX+"BoxOrient"]=this.localName=="hbox"?"horizontal":"vertical",apf.isGecko&&(this.$int.style[apf.CSSPREFIX+"BoxSizing"]="border-box"),this.$int.style[apf.CSSPREFIX+"BoxAlign"]="stretch",this.addEventListener("prop.visible",u);else{this.$vbox||(this.$int.style.whiteSpace="nowrap",this.addEventListener("prop.height",a));var t=(!apf.hasFlexibleBox&&this.$vbox?this.$ext:this.$int).appendChild(e.createElement("strong"));t.style.height="100%",t.style.display=apf.INLINE,apf.needZoomForLayout&&(t.style.zoom=1),t.style.verticalAlign="middle",this.addEventListener("resize",this.$resize)}this.getAttribute("class")&&apf.setStyleClass(this.$ext,this.getAttribute("class")),this.$originalMin=[this.minwidth||0,this.minheight||0]},this.$resize=function(e){if(!this.$amlLoaded||this.$noResize)return;if(e!==!0&&this.$lastSize&&this.$lastSize[0]==this.$int.offsetWidth&&this.$lastSize[1]==this.$int.offsetHeight)return;if(!apf.window.vManager.check(this,this.$uniqueId,this.$resize))return;this.$noResize=!0,this.$lastSize=[this.$int.offsetWidth,this.$int.offsetHeight];var n=0,r=this.$vbox?"width":"height",i=this.$vbox?"minWidth":"minHeight",s=this.$vbox?"height":"width",o=this.$vbox?"scrollWidth":"scrollHeight",u=this.$vbox?"offsetWidth":"offsetHeight",a=this.$vbox?"offsetHeight":"offsetWidth",f=this.$vbox?"getWidthDiff":"getHeightDiff",l=this.$vbox?"getHeightDiff":"getWidthDiff",c=this.$vbox?"getHtmlInnerWidth":"getHtmlInnerHeight",h=this.$vbox?"getHtmlInnerHeight":"getHtmlInnerWidth",p=this.$vbox?"getVerBorders":"getHorBorders",d=this.childNodes,v=[],m=0,g=0;for(var y,b=0;b<d.length;b++){if((y=d[b]).nodeFunc!=apf.NODE_VISIBLE||y.visible===!1||!y.$amlLoaded)continue;v.push(y);if(!y[r]){var w=y.margin&&apf.getBox(y.margin);w&&this.$vbox&&w.unshift();var E=w?w[0]+w[2]:0;g=Math.max(g,E+Math.min(y.$ext[o]+apf[p](y.$ext),y["max"+r]||1e4))}if(parseInt(y.flex))n+=parseFloat(y.flex);else{var w=y.margin&&apf.getBox(y.margin);w&&!this.$vbox&&w.shift(),m+=y.$ext[a]+(w?w[0]+w[2]:0)}}!g&&this[r]&&(g=this[r]-apf[l](this.$ext));if(this.align=="stretch"){var S=v.length,x=g;for(var b=0;b<S;b++){y=v[b];if(!y[r]&&!this.$vbox||this.$vbox&&t[y.$ext.tagName]){var w=y.margin&&apf.getBox(y.margin);w&&this.$vbox&&w.unshift();var E=w?w[0]+w[2]:0;g&&Math.min(y.$ext[o],y["max"+r]||1e4)!=g?y.$ext.style[r]=Math.max(0,g-apf[f](y.$ext)-E)+"px":y.$ext.style[r]=""}}}if(n>0){this.$vbox&&(this.$int.style.height="100%"),this.$int.style.overflow="hidden";var T=apf.n(this).children("a:splitter").length()*2,N=this.$int[a]-apf[l](this.$int)-m-(v.length-1-T)*this.padding,C=N,k=0;for(var b=0,S=v.length;b<S;b++)if((y=v[b]).flex){var L=(b%2==0?Math.floor:Math.ceil)(N/n*parseInt(y.flex));k+=parseInt(y.flex);var w=y.margin&&apf.getBox(y.margin);w&&!this.$vbox&&w.shift(),y.$ext.style[s]=Math.max(0,(k==n?C:L)-apf[l](y.$ext)-(w?w[0]+w[2]:0))+"px",C-=L}}else this.$vbox&&(this.$int.style.height=""),this.$int.style.overflow="";this.$noResize=!1},this.$loadAml=function(e){this.padding==undefined&&(this.padding=0),this.edge==undefined&&this.$propHandlers.edge.call(this,this.edge=0),this.pack==undefined&&this.$propHandlers.pack.call(this,this.edge="start"),this.align==undefined&&(this.align="stretch"),!apf.hasFlexibleBox&&!this.$vbox&&!this.height&&this.align=="stretch"&&a.call(this,{})}}.call(apf.vbox.prototype=new apf.GuiElement),apf.hbox.prototype=apf.vbox.prototype,apf.aml.setElement("hbox",apf.hbox),apf.aml.setElement("vbox",apf.vbox),apf.img=function(e,t){this.$init(t||"img",apf.NODE_VISIBLE,e)},apf.preview=function(e,t){this.$init(t||"preview",apf.NODE_VISIBLE,e)},function(){this.setValue=function(e){this.setProperty("value",e,!1,!0)},this.getValue=function(e){return this.value},this.$supportedProperties.push("value","src"),this.$propHandlers.src=this.$propHandlers.value=function(e){this.oImage.nodeType==1?this.oImage.style.backgroundImage="url("+e+")":this.oImage.nodeValue=e;if(this.oImage.nodeType==2&&!this.$resize.done){if(this.oImg){var t=apf.hasSingleRszEvent?this.$pHtmlNode:this.$ext;apf.layout.setRules(t,this.$uniqueId+"_image","var o = apf.all["+this.$uniqueId+"];                     if (o) o.$resize()"),apf.layout.queue(t),this.oImg.onload=function(){apf.layout.forceResize(t)}}this.$resize.done=!0}this.oImg&&(this.oImg.style.display=e?"block":"none")},this.refetch=function(){this.$propHandlers.value.call(this,""),this.$propHandlers.value.call(this,this.value||this.src)},this.addEventListener("$clear",function(){this.value="",this.oImg&&(this.oImg.style.display="none")}),this.$draw=function(){this.$ext=this.$getExternal(),this.$ext.onclick=function(e){this.host.dispatchEvent("click",{htmlEvent:e||event})},this.oImage=this.$getLayoutNode("main","image",this.$ext),this.oImage.nodeType==1&&(this.oImg=this.oImage.getElementsByTagName("img")[0]);if(this.localName=="preview"){var e=this;this.$ext.onclick=function(){if(!e.sPreview)return;e.$ext.innerHTML=e.sPreview,this.onclick=null}}var e=this;apf.addListener(this.$ext,"mouseover",function(t){e.disabled||e.dispatchEvent("mouseover",{htmlEvent:t})}),apf.addListener(this.$ext,"mouseout",function(t){e.disabled||e.dispatchEvent("mouseout",{htmlEvent:t})})},this.addEventListener("DOMNodeInsertedIntoDocument",function(){var e,t="",n=this.childNodes.length;for(;n>=0;--n)(e=this.childNodes[n])&&e.nodeName&&e.nodeName=="#cdata-section"&&(t=e.nodeValue,e.removeNode());this.sPreview=t}),this.$resize=function(){var e=apf.getDiff(this.$ext),t=1,n=1;this.oImg.style.width="",this.oImg.style.height="",this.oImg.offsetWidth>this.$ext.offsetWidth&&(t=this.oImg.offsetWidth/(this.$ext.offsetWidth-e[0])),this.oImg.offsetHeight>this.$ext.offsetHeight&&(n=this.oImg.offsetHeight/(this.$ext.offsetHeight-e[1])),t>n&&t>1?this.oImg.style.width="100%":n>t&&n>1&&(this.oImg.style.height="100%"),this.oImg.style.top=(this.$ext.offsetHeight-apf.getHeightDiff(this.$ext)-this.oImg.offsetHeight)/2+"px"}}.call(apf.img.prototype=new apf.BaseSimple),apf.preview.prototype=apf.img.prototype,apf.aml.setElement("img",apf.img),apf.aml.setElement("preview",apf.preview),apf.aml.setElement("name",apf.BindingRule),apf.aml.setElement("image",apf.BindingRule),apf.item=function(e,t){this.$init(t||"item",apf.NODE_VISIBLE,e)},function(){this.$focussable=!1,this.$childProperty="caption",this.$canLeechSkin="item",this.checked=!1,this.selected=!1,this.implement(apf.ChildValue),this.$attrExcludePropBind=apf.extend({match:1},this.$attrExcludePropBind),this.$booleanProperties.checked=!0,this.$booleanProperties.selected=!0,this.$supportedProperties.push("submenu","value","match","group","icon","checked","selected","disabled","caption","type","values"),this.$propHandlers.submenu=function(e){apf.setStyleClass(this.$ext,"submenu")},this.$propHandlers.select=function(e){this.select=e?"self::"+e.split("|").join("|self::"):e},this.$propHandlers.group=function(e){this.$group&&this.$group.$removeRadio&&this.$group.$removeRadio(this);if(!e){this.$group=null;return}var t=typeof e=="string"?apf.nameserver.get("group",e):e;t||(t=apf.nameserver.register("group",e,new apf.$group),t.setAttribute("id",e),t.dispatchEvent("DOMNodeInsertedIntoDocument"),t.parentNode=this),this.$group=t,this.$group.$addRadio(this)},this.$propHandlers.hotkey=function(e){if(!this.$amlLoaded){var t=this;this.addEventListener("DOMNodeInsertedIntoDocument",function(e){t.$hotkey&&t.hotkey&&apf.setNodeValue(this.$hotkey,apf.isMac?apf.hotkeys.toMacNotation(t.hotkey):t.hotkey)})}else this.$hotkey&&apf.setNodeValue(this.$hotkey,apf.isMac?apf.hotkeys.toMacNotation(e):e);this.$lastHotkey&&(apf.hotkeys.remove(this.$lastHotkey[0],this.$lastHotkey[1]),delete this.$lastHotkey[0]);if(e){this.$lastHotkey=[e];var t=this;apf.hotkeys.register(e,this.$lastHotkey[1]=function(){if(t.disabled||!t.visible)return;if(t.parentNode){var e=apf.document.getElementsByTagNameNS(apf.ns.aml,"button");for(var n=0;n<e.length;n++)if(e[n].submenu==t.parentNode.name){var r=e[n];r.$setState("Over",{}),$setTimeout(function(){r.$setState("Out",{})},200);break}}t.$down(),t.$up(),t.$click()})}},this.$propHandlers.icon=function(e){this.$icon&&apf.skins.setIcon(this.$icon,e,this.parentNode.iconPath)},this.$propHandlers.caption=function(e){this.$caption&&apf.setNodeValue(this.$caption,e)},this.$propHandlers.type=function(e){apf.setStyleClass(this.$ext,e,["item","check","radio"])},this.$propHandlers.values=function(e){this.$values=typeof e=="string"?e.split("|"):e||[1,0],this.$propHandlers.value.call(this,this.value)},this.$propHandlers.value=function(e){if(this.type!="check")return;e=typeof e=="string"?e.trim():e;var t;this.$values?t=typeof e!="undefined"&&e!==null&&e.toString()==this.$values[0].toString():t=apf.isTrue(e),t!=this.checked&&(this.checked=t,this.$propHandlers.checked.call(this,t))},this.$propHandlers.checked=function(e){if(this.type!="check")return;apf.isTrue(e)?apf.setStyleClass(this.$ext,"checked"):apf.setStyleClass(this.$ext,"",["checked"]),this.$values||this.getAttribute("values")&&this.$propHandlers.values.call(this,this.getAttribute("values")),this.$values&&this.$values[e?0:1]!=this.value&&this.setProperty("value",this.$values?this.$values[e?0:1]:!0)},this.select=function(){this.parentNode.select(this.group,this.value||this.caption)},this.check=function(){this.setProperty("value",this.$values?this.$values[0]:!0)},this.uncheck=function(){this.setProperty("value",this.$values?this.$values[1]:!1)},this.$check=function(){apf.setStyleClass(this.$ext,"selected")},this.$uncheck=function(){apf.setStyleClass(this.$ext,"",["selected"])},this.$propHandlers.selected=function(e){if(this.type!="radio")return;apf.isTrue(e)?(this.$group&&this.$group.setProperty("value",this.value),this.$check()):this.$uncheck()},this.$propHandlers.disabled=function(e){apf.isTrue(e)||e==-1?apf.setStyleClass(this.$ext,"disabled"):apf.setStyleClass(this.$ext,"",["disabled"])},this.addEventListener("AMLReparent",function(e,t,n){if(!this.$amlLoaded)return;!n&&this.skinName!=t.skinName&&this.loadAml()}),this.$down=function(){},this.$up=function(){this.type=="radio"?this.parentNode.select(this.group,this.value||this.caption):this.type=="check"&&this.setProperty("checked",!this.checked);if(this.submenu){this.$over(null,!0);return}this.parentNode.$hideTree=!0,this.parentNode.sticky||this.parentNode.hide(),this.parentNode.dispatchEvent("itemclick",{value:this.value||this.caption,relatedNode:this,checked:this.checked,selected:this.selected}),this.dispatchEvent("click",{xmlContext:this.parentNode.xmlReference,opener:this.parentNode.opener})},this.$click=function(){};var e;this.$out=function(t){if(apf.isChildOf(this.$ext,t.toElement||t.explicitOriginalTarget)||apf.isChildOf(this.$ext,t.srcElement||t.target))return;clearTimeout(e);if(!this.submenu||this.$submenu(!0)){apf.setStyleClass(this.$ext,"",["hover"]);var n=this.parentNode.$selected;n&&n!=this&&apf.setStyleClass(n.$ext,"",["hover"]),this.parentNode.$selected=null}},this.$over=function(t,n){function s(){i&&i.visible&&(i.hide(),r.parentNode.$showingSubMenu==i&&(r.parentNode.$showingSubMenu=null)),r.submenu&&r.parentNode.opener&&r.parentNode.opener.visible&&r.$submenu()}if(this.parentNode.$selected==this&&t)return;this.parentNode.$selected&&apf.setStyleClass(this.parentNode.$selected.$ext,"",["hover"]),apf.setStyleClass(this.$ext,"hover"),this.parentNode.$selected=this;if(!n&&(apf.isChildOf(this.$ext,t.toElement||t.explicitOriginalTarget)||apf.isChildOf(this.$ext,t.fromElement||t.target)))return;var r=this,i=this.parentNode.$showingSubMenu;if(i&&i.name==this.submenu){this.parentNode.$selected=null,this.parentNode.$showingSubMenu=null,r.$submenu();return}clearTimeout(e),n?s():e=$setTimeout(function(){s(),e=null},210)},this.$submenu=function(e,t){if(!this.submenu)return!0;var n=self[this.submenu];if(!n)return;if(!!e)return n.visible&&!t?!1:(this.parentNode.$showingSubMenu==n&&(this.parentNode.$showingSubMenu=null),apf.setStyleClass(this.$ext,"",["hover"]),n.hide(),!0);this.parentNode.$showingSubMenu=n;var r=apf.getAbsolutePosition(this.$ext,this.parentNode.$ext.offsetParent);n.display(r[0]+this.$ext.offsetWidth-3,r[1]+3,!0,this,this.parentNode.xmlReference,this.parentNode.$uniqueId),n.setAttribute("zindex",(this.parentNode.zindex||this.parentNode.$ext.style.zIndex||1)+1)},this.$draw=function(e){var t=this.parentNode;while(t.$canLeechSkin=="item")t=t.parentNode;if(t.hasFeature(apf.__MULTISELECT__)){var n=this;if(!this.$hasSetSkinListener){var r;this.parentNode.addEventListener("$skinchange",r=function(){if(n.$amlDestroyed)return;n.$ext.parentNode&&this.$deInitNode(n,n.$ext);var e=t==n.parentNode?t.$container:n.parentNode.$container,r=e.lastChild;t.$add(n,n.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId,n.parentNode,e!=t.$container&&e,null),t.$fill(),t.$isTreeArch?n.$container=t.$getLayoutNode("item","container",n.$ext=r&&r.nextSibling||e.firstChild):n.$ext=r&&r.nextSibling||e.firstChild;var i=n;while((i=i.nextSibling)&&i.nodeType!=1);(!i||i.$canLeechSkin!="item")&&t.dispatchEvent("afterload")}),this.addEventListener("DOMNodeRemoved",function(e){e.currentTarget==this&&this.parentNode.removeEventListener("$skinchange",r)}),this.$hasSetSkinListener=!0}t.$itemInited||(t.canrename=!1,t.$removeClearMessage(),t.$itemInited=[t.getTraverseNodes,t.getFirstTraverseNode,t.getTraverseParent],t.getTraverseNodes=function(e){return(e||t).getElementsByTagNameNS(apf.ns.apf,"item")},t.getFirstTraverseNode=function(e){return(e||t).getElementsByTagNameNS(apf.ns.apf,"item")[0]},t.getTraverseParent=function(e){return e&&e.parentNode},t.each=(this.prefix?this.prefix+":":"")+"item",t.$preventDataLoad=!0,t.$initingModel=!0,t.$setDynamicProperty("icon","[@icon]"),t.$setDynamicProperty("image","[@image]"),t.$setDynamicProperty("caption","[label/text()|@caption|text()]"),t.$setDynamicProperty("eachvalue","[value/text()|@value|text()]"),t.$canLoadDataAttr=!1,t.xmlRoot||(t.xmlRoot=t)),this.$loadAml=function(){this.getAttribute("caption")||this.setAttribute("caption",this.caption);var e=t==this.parentNode?t.$container:this.parentNode.$container,n=e.lastChild;t.documentId||(t.documentId=apf.xmldb.getXmlDocId(this)),t.$add(this,apf.xmldb.nodeConnect(t.documentId,this,null,t),this.parentNode,e!=t.$container&&e,null),t.$fill(),t.$isTreeArch?this.$container=t.$getLayoutNode("item","container",this.$ext=n&&n.nextSibling||e.firstChild):this.$ext=n&&n.nextSibling||e.firstChild;var r=this;while((r=r.nextSibling)&&r.nodeType!=1);if(!r||r.$canLeechSkin!="item")t.dispatchEvent("afterload"),t.autoselect&&t.$selectDefault(this.parentNode)};return}this.$ext=this.$getExternal(this.$isLeechingSkin?"item":"main",null,function(e){var t="var o = apf.lookup("+this.$uniqueId+"); if (o.disabled) return; o";e.setAttribute("onmouseup",t+".$up(event)"),e.setAttribute("onmousemove",t+".$over(event)"),e.setAttribute("onmouseout",t+".$out(event)"),e.setAttribute("onmousedown",t+".$down()"),e.setAttribute("onclick",t+".$click()")});var n=this;apf.addListener(this.$ext,"mouseover",function(e){n.disabled||n.dispatchEvent("mouseover",{htmlEvent:e})}),apf.addListener(this.$ext,"mouseout",function(e){n.disabled||n.dispatchEvent("mouseout",{htmlEvent:e})}),this.$caption=this.$getLayoutNode("item","caption",this.$ext),this.$icon=this.$getLayoutNode("item","icon",this.$ext),this.$hotkey=this.$getLayoutNode("item","hotkey",this.$ext),!e&&this.nextSibling&&this.nextSibling.$ext&&this.$ext.parentNode.insertBefore(this.$ext,this.nextSibling.$ext)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t=this.$ext?!0:!1;t&&(typeof this.checked!="undefined"?this.$handlePropSet("checked",this.checked):typeof this.selected!="undefined"&&this.$handlePropSet("selected",this.selected),this.disabled&&this.$handlePropSet("disabled",this.disabled),this.caption&&this.$handlePropSet("caption",this.caption))})}.call(apf.item.prototype=new apf.Presentation),apf.aml.setElement("item",apf.item),apf.junction=function(){this.$init("junction",apf.NODE_HIDDEN)},function(){function e(e){var t=this;apf.window.vManager.permanent(this.parentNode,function(){t.$reparent()},function(){})&&this.$reparent()}this.$focussable=!1,this.autoshow=!0,this.$booleanProperties.autoshow=!0,this.$propHandlers["for"]=function(t){this.$amlLoaded&&e.call(this)},this.$reparent=function(){var e=self[this["for"]];if(!e)return;this.autoshow&&e.show(),this.parentNode.insertBefore(e,this)},this.addEventListener("DOMNodeInsertedIntoDocument",e)}.call(apf.junction.prototype=new apf.AmlElement),apf.aml.setElement("junction",apf.junction),apf.label=function(e,t){this.$init(t||"label",apf.NODE_VISIBLE,e)},function(){this.implement(apf.DataAction,apf.ChildValue);var e=this;this.$focussable=!1;var t;this.setValue=function(e){this.setProperty("value",e,!1,!0)},this.getValue=function(){return this.value},this.$supportedProperties.push("caption","for","textalign"),this.$propHandlers.caption=function(e){this.$caption.innerHTML=e},this.$propHandlers["for"]=function(e){t=typeof e=="string"?self[e]:e},this.$propHandlers.textalign=function(e){this.$caption.style.textAlign=e||""},this.$draw=function(){this.$ext=this.$getExternal(),this.$caption=this.$getLayoutNode("main","caption",this.$ext),this.$caption.nodeType!=1&&(this.$caption=this.$caption.parentNode),this.$ext.onmousedown=function(){t&&t.$focussable&&t.focussable&&t.focus()};var e=this;apf.addListener(this.$ext,"click",function(t){e.disabled||e.dispatchEvent("click",{htmlEvent:t})}),apf.addListener(this.$ext,"mouseover",function(t){e.disabled||e.dispatchEvent("mouseover",{htmlEvent:t})}),apf.addListener(this.$ext,"mouseout",function(t){e.disabled||e.dispatchEvent("mouseout",{htmlEvent:t})})},this.$childProperty="caption"}.call(apf.label.prototype=new apf.BaseSimple),apf.aml.setElement("label",apf.label),apf.list=function(e,t){this.$init(t||"list",apf.NODE_VISIBLE,e)},apf.thumbnail=function(e,t){this.$init(t||"thumbnail",apf.NODE_VISIBLE,e)},apf.select=function(e,t){this.$init(t||"select",apf.NODE_VISIBLE,e)},apf.select1=function(e,t){this.$init(t||"selectl",apf.NODE_VISIBLE,e)},function(){function e(e){(!e.action||"insert|add|synchronize|move".indexOf(e.action)>-1)&&this.moreItem&&(this.morePos=="begin"?this.$container.insertBefore(this.moreItem,this.$container.firstChild):this.$container.appendChild(this.moreItem))}this.morePos="end",apf.isIphone||this.implement(apf.Rename),this.$getCaptionElement=function(){if(!this.$caret&&!this.$selected)return;var e=this.$getLayoutNode("item","caption",this.$caret||this.$selected);if(!e)return;return e.nodeType==1?e:e.parentNode},this.$supportedProperties.push("appearance","mode","more","thumbsize","morepos"),this.$propHandlers.morepos=function(e){this.morePos=e},this.$propHandlers.thumbsize=function(e){var t=this.thumbclass;if(apf.isIE){t=t.splitSafe(",");for(var n=0;n<t.length;n++)apf.setStyleRule(t[n],"width",e+"px"),apf.setStyleRule(t[n],"height",e+"px");return}apf.setStyleRule(t,"width",e+"px"),apf.setStyleRule(t,"height",e+"px")},this.$propHandlers.appearance=function(e){},this.$propHandlers.more=function(t){t?(this.delayedselect=!1,this.addEventListener("xmlupdate",e),this.addEventListener("afterload",e),this.$addMoreItem=function(e){this.moreItem||this.$fill(),this.morePos=="begin"?this.$container.insertBefore(this.moreItem,this.$container.firstChild):this.$container.appendChild(this.moreItem)},this.$updateClearMessage=function(){},this.$removeClearMessage=function(){}):(this.removeEventListener("xmlupdate",e),this.removeEventListener("afterload",e))},this.addEventListener("keydown",this.$keyHandler,!0),this.$draw=function(){this.appearance=this.getAttribute("appearance")||"compact",this.$ext=this.$getExternal(),this.$container=this.$getLayoutNode("main","container",this.$ext),apf.hasCssUpdateScrollbarBug&&!this.mode&&this.$fixScrollBug();var e=this;this.$ext.onclick=function(t){e.dispatchEvent("click",{htmlEvent:t||event})},this.listtype=parseInt(this.$getOption("main","type"))||1,this.behaviour=parseInt(this.$getOption("main","behaviour"))||1,this.thumbsize=this.$getOption("main","thumbsize"),this.thumbclass=this.$getOption("main","thumbclass")},this.$loadAml=function(e){},this.$destroy=function(){this.$ext&&(this.$ext.onclick=null),apf.destroyHtmlNode(this.oDrag),this.oDrag=null}}.call(apf.list.prototype=new apf.BaseList),apf.thumbnail.prototype=apf.select.prototype=apf.select1.prototype=apf.list.prototype,apf.aml.setElement("thumbnail",apf.thumbnail),apf.aml.setElement("select",apf.select),apf.aml.setElement("select1",apf.select1),apf.aml.setElement("list",apf.list),apf.loader=function(){this.$init("loader",apf.NODE_HIDDEN),this.show=function(){this.$ext.style.display="block"},this.hide=function(){this.$ext.style.display="none"},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t;if(!(t=this.parentNode.$int))return;this.$ext=apf.insertHtmlNode(null,t,null,(this.$aml?this.$aml.serialize?this.$aml.serialize():this.$aml.xml:this.serialize()).replace(/^<[^>]*>\s*|\s*<[^>]*>$/g,""));if(!apf.loaded){var n=this;apf.config.loaderAnimIndicator&&n.animateLoader(10),apf.addEventListener("load",function(){apf.isTrue(apf.config.autoHideLoading)?(apf.queue.empty(),n.hide()):apf.config.loaderAnimIndicator&&n.animateLoader(20)})}}),this.lastLoaderStep=0,this.animateLoader=function(e){var t=this,n=document.getElementById(apf.config.loaderAnimIndicator);if(!n)return;e=apf.config.loaderWidth*(e/100);var r=this.lastLoaderStep,i=this.lastLoaderStep+e;this.lastLoaderStep=i,i>apf.config.loaderWidth&&(i=apf.config.loaderWidth),apf.tween.single(document.getElementById("animatedLoader"),{steps:5,anim:apf.tween.EASEOUT,type:"width",from:r,to:i,onfinish:function(){i>=apf.config.loaderWidth&&(apf.queue.empty(),t.hide())}})}},apf.loader.prototype=new apf.AmlElement,apf.aml.setElement("loader",apf.loader),apf.menu=function(e,t){this.$init(t||"menu",apf.NODE_VISIBLE,e),this.animate=apf.enableAnim},function(){function t(e){if(this.$showingSubMenu||this.pinned||apf.isChildOf(e.fromElement,e.toElement)||apf.isChildOf(e.toElement,e.fromElement)||apf.isChildOf(this,e.toElement)||e.name!=="popuphide"&&!e.toElement)return;return this.$hideTree!=-1&&(this.$hideTree=!0,this.hide()),!1}this.$focussable=apf.MENU,this.$positioning="basic",this.visible=!1,this.matchhide=!1,this.$booleanProperties.animate=!0,this.$booleanProperties.pinned=!0,this.$booleanProperties.sticky=!0,this.$booleanProperties.matchhide=!0,this.$propHandlers.visible=function(e,t,n,r,i){if(!this.$ext)return;if(e)this.$ext.style.display="block",this.opener&&this.opener.localName.indexOf("item")>-1&&(this.opener.parentNode.$showingSubMenu=this);else{this.$ext.style.display="none";var s=apf.menu.lastFocus,o=this.opener;s!=this.opener&&this.opener&&this.opener.$blur&&this.opener.$blur();if(this.opener&&this.opener.parentNode&&this.opener.parentNode.localName=="menu")this.$hideTree||(this.$hideTree=-1),this.opener.parentNode.focus();else if(s)if(apf.window.$settingFocus)apf.window.$settingFocus!=s&&s.$blur&&s.$blur(),this.$blur(),apf.window.$settingFocus.localName!="menu"&&(apf.menu.lastFocus=null);else if(this.$hideTree){this.$hideTree||(this.$hideTree=-1);var u=(s.disabled||!s.visible)&&s!=apf.document.documentElement;r||u?(s.$blur&&s.$blur(),this.$blur(),apf.document.activeElement=null,u&&apf.window.moveNext()===!1&&apf.window.$focusRoot()):s.focus(null,null,!0),apf.menu.lastFocus=null}clearTimeout(this.$submenuTimer),this.$showingSubMenu&&(this.$showingSubMenu.hide(),this.$showingSubMenu=null),this.opener&&this.opener.$submenu&&(this.opener.$submenu(!0,!0),this.$hideTree===!0&&this.opener&&this.opener.parentNode&&this.opener.parentNode.localName=="menu"&&(this.opener.parentNode.$hideTree=!0,this.opener.parentNode.hide()),this.opener=null),this.$hideTree=null,this.$selected&&(apf.setStyleClass(this.$selected.$ext,"",["hover"]),this.$selected=null),this.dispatchEvent("hide",{opener:o})}};var e;this.display=function(e,t,n,r,i,s,o){function d(){if(e===null)apf.popup.show(this.$uniqueId,{x:0,y:this.ref?0:r.$ext.offsetHeight,animate:n||!this.animate?!1:"fade",steps:10,ref:(this.ref||r).$ext,allowTogether:s,autohide:!this.pinned,noleft:this.left!==undefined,setZindex:this.zindex?!1:!0,up:(this.ref||r).submenudir=="up"});else{var o=apf.getAbsolutePosition(document.body);apf.popup.show(this.$uniqueId,{x:e-o[0],y:t-o[1]-(apf.isIE&&apf.isIE<8?1:0),animate:n||!this.animate?!1:"fade",steps:10,allowTogether:s,autohide:!this.pinned,setZindex:this.zindex?!1:!0})}var u=apf.menu.lastFocus=r&&r.$focussable===!0?r:apf.menu.lastFocus||apf.document.activeElement;apf.popup.last=null,this.focus(),u&&u!=this&&u.$focus&&u.$focus(),this.xmlReference=i,this.dispatchEvent("display",{opener:r})}this.opener=r;if(i&&!this.disabled){var u,a,f,l=this.childNodes,c=0,h=l.length,p;for(a=0;a<h;a++){f=l[a];if(f.nodeType!=1||f.localName!="item")continue;p=!i||!f.match||(f.cmatch||(f.cmatch=apf.lm.compile(f.match,{xpathmode:3,injectself:!0})))(i),p?(this.matchhide?f.show():f.enable(),f.localName=="divider"&&this.matchhide?(u=f,c==0&&f.hide(),c=0):c++):(this.matchhide?f.hide():f.disable(),!f.nextSibling&&c==0&&u&&u.hide())}}this.oOverlay&&(o?(this.oOverlay.style.display="block",this.oOverlay.style.width=o+"px"):this.oOverlay.style.display="none"),this.visible=!1,this.parentNode||apf.document.documentElement.appendChild(this),this.$rendered!==!1?(this.show(),d.call(this)):(this.addEventListener("afterrender",d),this.show())},this.getValue=function(e){return this.getSelected(e).value||""},this.getSelected=function(e){var t=this.childNodes,n,r=t.length;for(n=0;n<r;n++){if(t[n].group!=e)continue;if(t[n].selected)return t[n]}return!1},this.select=function(e,t){var n=this.childNodes,r,i=n.length;for(r=0;r<i;r++){if(n[r].group!=e)continue;t&&(n[r].value==t||!n[r].value&&n[r].caption==t)?n[r].setProperty("selected",!0,!1,!0):n[r].selected&&n[r].setProperty("selected",!1,!1,!0)}},this.addEventListener("keydown",function(e){var t,n=e.keyCode;switch(n){case 13:if(!this.$selected)return;t=this.$selected,t.$down(),t.$up(),t.$click();break;case 27:this.hide();break;case 38:t=this.$selected&&this.$selected.previousSibling||this.lastChild,t&&t.localName=="divider"&&(t=t.previousSibling);if(!t)return;this.$selected&&apf.setStyleClass(this.$selected.$ext,"",["hover"]),apf.setStyleClass(t.$ext,"hover"),this.$selected=t;break;case 40:t=this.$selected&&this.$selected.nextSibling||this.firstChild,t&&t.localName=="divider"&&(t=t.nextSibling);if(!t)return;this.$selected&&apf.setStyleClass(this.$selected.$ext,"",["hover"]),apf.setStyleClass(t.$ext,"hover"),this.$selected=t;break;case 37:if(!this.opener)return;if(this.opener.localName=="button"){t=this.opener.previousSibling;while(t&&!t.submenu)t=t.previousSibling;if(t){t.dispatchEvent("mouseover");var r=t.parentNode.menuIsPressed;r&&self[r.submenu].dispatchEvent("keydown",{keyCode:40})}}else if(this.opener.parentNode.localName=="menu"){var i=this.opener;this.hide(),apf.setStyleClass(i.$ext,"hover"),i.parentNode.$showingSubMenu=null}break;case 39:if(this.$selected&&this.$selected.submenu){this.$selected.$submenu(null,!0),this.$showingSubMenu.dispatchEvent("keydown",{keyCode:40});return}if(this.opener){var i=this.opener;while(i&&i.parentNode&&i.parentNode.localName=="menu")i=i.parentNode.opener;if(i&&i.localName=="button"){t=i.nextSibling;while(t&&!t.submenu)t=t.nextSibling;if(t){t.dispatchEvent("mouseover");var r=t.parentNode.menuIsPressed;r&&self[r.submenu].dispatchEvent("keydown",{keyCode:40});return}}}this.$selected||arguments.callee.call(this,{keyCode:40});break;default:return}return!1},!0),this.addEventListener("focus",function(){apf.popup.last=this.$uniqueId}),this.addEventListener("blur",t),this.addEventListener("popuphide",t),this.$draw=function(){this.$pHtmlNode=document.body,this.$ext=this.$getExternal(),this.oOverlay=this.$getLayoutNode("main","overlay",this.$ext),apf.popup.setContent(this.$uniqueId,this.$ext,"",null,null)},this.$loadAml=function(e){this.$int=this.$getLayoutNode("main","container",this.$ext)},this.$destroy=function(){apf.popup.removeContent(this.$uniqueId)}}.call(apf.menu.prototype=new apf.Presentation),apf.aml.setElement("menu",apf.menu),apf.method=function(e,t){this.$init(t||"method",apf.NODE_HIDDEN,e),this.async=!0,this.caching=!1,this["ignore-offline"]=!1},function(){this.$parsePrio="002",this.$booleanProperties.async=!0,this.$booleanProperties.caching=!0,this.$booleanProperties["ignore-offline"]=!0,this.$booleanProperties["cors-with-credentials"]=!0,this.$supportedProperties.push("name","receive","async","caching","ignore-offline","method-name","type","url","cors-with-credentials"),this.$propHandlers["ignore-offline"]=function(e){this.ignoreOffline=e},this.$propHandlers["method-name"]=function(e){this.methodName=e},this.$propHandlers["cors-with-credentials"]=function(e){this.withCredentials=e},this.addEventListener("DOMNodeInserted",function(e){this.parentNode.$addMethod&&e.currentTarget==this&&this.parentNode.$addMethod(this)}),this.addEventListener("DOMNodeRemoved",function(e){this.parentNode.$removeMethod&&e.currentTarget==this&&this.parentNode.$removeMethod(this)}),this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.parentNode.$addMethod&&this.parentNode.$addMethod(this)})}.call(apf.method.prototype=new apf.AmlElement),apf.aml.setElement("method",apf.method),apf.WinServer={count:9e3,wins:[],setTop:function(e,t){if(e.zindex||e.modal)return;if(e.$opened){if(e.$opened.visible)return;delete e.$opened}var n;if(!t&&this.wins.length){var n=this.wins[this.wins.length-1];if(n==e)return;!n.modal||!n.visible?n=null:n&&e.modal&&(e.$opener=n,n.$opened=e,n=null)}return this.count+=2,e.setProperty("zindex",this.count),this.wins.remove(e),this.wins.push(e),n&&this.setTop(n,!0),e},setNext:function(){if(this.wins.length<2)return;var e,t=this.wins.shift();do{if(this.setTop(e||t).visible)break;e=this.wins.shift()}while(t!=e)},setPrevious:function(){if(this.wins.length<2)return;this.wins.unshift(this.wins.pop());var e,t=this.wins.pop();do{if(this.setTop(e||t).visible)break;e=this.wins.pop()}while(t!=e)},remove:function(e){this.wins.remove(e)}},apf.toolwindow=function(e,t){this.$init(t||"toolwindow",apf.NODE_VISIBLE,e)},apf.modalwindow=function(e,t){this.$init(t||"modalwindow",apf.NODE_VISIBLE,e)},apf.AmlWindow=function(e,t){this.$init(t||"window",apf.NODE_VISIBLE,e)},function(){this.implement(apf.BaseStateButtons),this.$isWindowContainer=!0,this.collapsedHeight=30,this.canHaveChildren=2,this.visible=!1,this.showdragging=!1,this.kbclose=!1,this.$focussable=apf.KEYBOARD,this.$editableCaption=["title"],this.setTitle=function(e){return this.setProperty("title",e,!1,!0),this},this.setIcon=function(e){return this.setProperty("icon",e,!1,!0),this},this.show=function(e){return this.execAction=e,this.setProperty("visible",!0,!1,!0),this},this.bringToFront=function(){return apf.WinServer.setTop(this),this},this.$booleanProperties.modal=!0,this.$booleanProperties.center=!0,this.$booleanProperties.transaction=!0,this.$booleanProperties.hideselects=!0,this.$booleanProperties.showdragging=!0,this.$booleanProperties.kbclose=!0,this.$supportedProperties.push("title","icon","modal","minwidth","minheight","hideselects","center","kbclose","maxwidth","maxheight","showdragging","transaction"),this.$propHandlers.modal=function(e){e?this.visible&&apf.plane.show(this.$ext,!1,null,null,{color:"black",opacity:this.cover&&this.cover.getAttribute("opacity")||.5,protect:this.$uniqueId,customCover:this.cover||""}):apf.plane.hide(this.$uniqueId)},this.$propHandlers.center=function(e){this.$ext.style.position="absolute"},this.$propHandlers.title=function(e){this.oTitle&&(this.oTitle.nodeValue=e)},this.$propHandlers.icon=function(e){if(!this.oIcon)return;this.oIcon.style.display=e?"":"none",apf.skins.setIcon(this.oIcon,e,this.iconPath)},this.$afterRender=function(){if(this.center&&!this.left&&!this.top&&!this.right&&!this.bottom&&!this.anchors){apf.layout.processQueue();var e=!this.$ext.offsetParent||this.$ext.offsetParent.tagName=="BODY"?[apf.getWindowWidth(),apf.getWindowHeight()]:[this.$ext.offsetParent.offsetWidth,this.$ext.offsetParent.offsetHeight,0,0];e.length==2&&e.push(document.documentElement.scrollLeft,document.documentElement.scrollTop),this.$ext.style.left=Math.max(0,(e[0]-parseInt(this.width||this.$ext.offsetWidth||0))/2)+e[2]+"px",this.$ext.style.top=Math.max(0,(e[1]-parseInt(this.$ext.offsetHeight||0))/3)+e[3]+"px"}this.$amlLoaded&&(this.model||(!this.dockable||!this.aData)&&!this.$isWidget&&this.localName!="toolwindow")&&this.focus(!1,{mouse:!0}),this.dispatchEvent("show")};var e=[],t;this.$propHandlers.visible=function(n){if(apf.isTrue(n)){if(this.dispatchEvent("beforeshow")===!1)return this.visible=!1;this.modal&&apf.plane.show(this.$ext,!1,null,null,{color:"black",opacity:this.cover&&this.cover.getAttribute("opacity")||.5,protect:this.$uniqueId,customCover:this.cover||""}),this.state=this.state.split("|").remove("closed").join("|"),this.$ext.style.display="";if(!apf.canHaveHtmlOverSelects&&this.hideselects){e=[];var r=document.getElementsByTagName("select");for(var i=0;i<r.length;i++){var s=apf.getStyle(r[i],"display");e.push([r[i],s]),r[i].style.display="none"}}if(apf.isIE){var o=this.$ext.className;this.$ext.className="rnd"+Math.random(),this.$ext.className=o}this.$rendered===!1?this.addEventListener("afterrender",this.$afterRender):this.$afterRender()}else{this.modal&&apf.plane.hide(this.$uniqueId),this.$ext.style.display="none";if(!apf.canHaveHtmlOverSelects&&this.hideselects)for(var i=0;i<e.length;i++)e[i][0].style.display=e[i][1];this.hasFocus()&&apf.window.moveNext(!0,this,!0),this.visible=!1,this.dispatchEvent("hide")}apf.layout&&this.$int&&apf.layout.forceResize(this.$int),t=n},this.$propHandlers.zindex=function(e){this.$ext.style.zIndex=e+1},this.addEventListener("keydown",function(e){var t=e.keyCode,n=e.ctrlKey,r=e.shiftKey,i=!1;switch(t){case 38:r&&this.resizable?this.setProperty("height",Math.max(this.minheight||0,this.$ext.offsetHeight-(n?50:10))):this.draggable&&this.setProperty("top",this.$ext.offsetTop-(n?50:10));break;case 37:r&&this.resizable?this.setProperty("width",Math.max(this.minwidth||0,this.$ext.offsetWidth-(n?50:10))):this.draggable&&this.setProperty("left",this.$ext.offsetLeft-(n?50:10));break;case 39:r&&this.resizable?this.setProperty("width",Math.min(this.maxwidth||1e4,this.$ext.offsetWidth+(n?50:10))):this.draggable&&this.setProperty("left",this.$ext.offsetLeft+(n?50:10));break;case 40:r&&this.resizable?this.setProperty("height",Math.min(this.maxheight||1e4,this.$ext.offsetHeight+(n?50:10))):this.draggable&&this.setProperty("top",this.$ext.offsetTop+(n?50:10));break;default:i=null;return}return apf.hasSingleRszEvent&&apf.layout.forceResize(this.$int),i},!0),this.addEventListener("keydown",function(e){e.keyCode==27&&this.buttons.indexOf("close")>-1&&(!this.dockable||!this.aData)&&this.kbclose&&this.close()}),this.$draw=function(){this.popout=apf.isTrue(this.getAttribute("popout")),this.popout&&(this.$pHtmlNode=document.body),this.$ext=this.$getExternal(null,null,function(e){this.$initButtons(e)}),this.oTitle=this.$getLayoutNode("main","title",this.$ext),this.oIcon=this.$getLayoutNode("main","icon",this.$ext),this.oDrag=this.$getLayoutNode("main","drag",this.$ext),this.$buttons=this.$getLayoutNode("main","buttons",this.$ext),this.cover=this.$getLayoutNode("cover"),this.popout&&(this.$ext.style.position="absolute"),this.oIcon&&(this.oIcon.style.display="none");var e=this;this.oDrag&&(this.oDrag.host=this,this.oDrag.onmousedown=function(t){t||(t=event),!e.$isWidget&&(!e.aData||!e.dockable||e.aData.hidden==3)&&apf.WinServer.setTop(e);if(e.$lastState.maximized)return!1;if(e.aData&&e.dockable)return e.$lastState.normal&&e.startDocking(t),!1}),this.$ext.onmousedown=function(){var t=apf.document.activeElement;if(t&&t.$focusParent!=e&&t.$focusParent.modal)return!1;!e.$isWidget&&(!e.aData||!e.dockable||e.aData.hidden==3)&&apf.WinServer.setTop(e);if(!e.$lastState.normal)return!1},this.$ext.onmousemove=function(){if(!e.$lastState.normal)return!1}},this.$loadAml=function(e){apf.WinServer.setTop(this),this.$int=this.$getLayoutNode("main","container",this.$ext);if(this.oTitle){var t=this;(this.oTitle.nodeType!=1?this.oTitle.parentNode:this.oTitle).ondblclick=function(e){t.state.indexOf("normal")==-1?t.restore():t.buttons.indexOf("max")>-1?t.maximize():t.buttons.indexOf("min")>-1&&t.minimize()}}typeof this.draggable=="undefined"&&((this.$propHandlers.draggable||apf.GuiElement.propHandlers.draggable).call(this,!0),this.draggable=!0),typeof this.buttons=="undefined"&&(this.buttons=""),this.modal===undefined&&(this.$propHandlers.modal.call(this,!0),this.modal=!0);if(!this.visible)this.$ext.style.display="none";else if(this.modal){var t=this;apf.queue.add("focus",function(){t.focus(!1,{mouse:!0})})}this.minwidth===undefined&&(this.minwidth=this.$getOption("Main","min-width")),this.minheight===undefined&&(this.minheight=this.$getOption("Main","min-height")),this.maxwidth===undefined&&(this.maxwidth=this.$getOption("Main","max-width")),this.maxheight===undefined&&(this.maxheight=this.$getOption("Main","max-height"));if(this.center&&this.visible){this.visible=!1,this.$ext.style.display="none";var t=this;$setTimeout(function(){t.setProperty("visible",!0)})}},this.addEventListener("$skinchange",function(){this.title&&this.$propHandlers.title.call(this,this.title),this.icon&&this.$propHandlers.icon.call(this,this.icon)}),this.$destroy=function(e){this.oDrag&&(this.oDrag.host=null,this.oDrag.onmousedown=null,apf.destroyHtmlNode(this.oDrag),this.oDrag=null),this.oTitle=this.oIcon=null,this.$ext&&!e&&(this.$ext.onmousedown=null,this.$ext.onmousemove=null)}}.call(apf.modalwindow.prototype=new apf.Presentation),apf.AmlWindow.prototype=apf.toolwindow.prototype=apf.modalwindow.prototype,apf.aml.setElement("toolwindow",apf.toolwindow),apf.aml.setElement("modalwindow",apf.modalwindow),apf.aml.setElement("window",apf.modalwindow),apf.model=function(e,t){this.$init(t||"model",apf.NODE_HIDDEN,e),this.$amlNodes={},this.$propBinds={},this.$listeners={},this.$proplisteners={}},function(){this.$parsePrio="020",this.$isModel=!0,this.$createModel=!0,this.canHaveChildren=!1,this.enablereset=!1,this.$state=0,this.$attrExcludePropBind=apf.extend({submission:1,src:1,session:1},this.$attrExcludePropBind),this.$booleanProperties.whitespace=!0,this.$booleanProperties["create-model"]=!0,this.$booleanProperties.autoinit=!0,this.$booleanProperties.enablereset=!0,this.$supportedProperties=["submission","src","session","autoinit","enablereset","remote","whitespace","create-model"],this.$propHandlers.src=this.$propHandlers.get=function(e,t){this.$amlLoaded&&this.$loadFrom(e)},this.$propHandlers["create-model"]=function(e,t){this.$createModel=e},this.$propHandlers.remote=function(e,t){if(e){if(this.src&&this.src.indexOf("rdb://")===0){var n=this;apf.queue.add("rdb_load_"+this.$uniqueId,function(){n.unshare(),n.share()})}}else this.unshare()},this.share=function(e){this.rdb=typeof this.remote=="string"?apf.nameserver.get("remote",this.remote):this.remote,this.rdb.createSession(this.src,this,e)},this.unshare=function(e){if(!this.rdb)return;this.rdb.endSession(this.src),this.rdb=null},this.register=function(e,t){if(!e||!e.load)return this;var n=e.$model==this;e.$model&&!n&&e.$model.unregister(e);var r=this.$amlNodes[e.$uniqueId]={amlNode:e,xpath:t};e.$model=this,typeof e.noloading=="undefined"&&e.$setInheritedAttribute&&!e.$setInheritedAttribute("noloading")&&(e.noloading=!1),this.$state==1?e.clear&&!e.noloading&&e.clear("loading"):this.data?this.$loadInAmlNode(r):e.hasFeature(apf.__CACHE__)&&e.clear("empty");var i,s,o=e.$propsUsingMainModel,u=e.$uniqueId;for(var a in o)this.$unbindXmlProperty(e,a),i=this.$bindXmlProperty(e,a,o[a].xpath,o[a].optimize),this.data&&((s=i.listen?this.data.selectSingleNode(i.listen):this.data)?e.$execProperty(a,s):this.$waitForXml(e,a));return this},this.$register=function(e,t){this.$amlNodes[e.$uniqueId].xpath=t},this.unregister=function(e){delete this.$amlNodes[e.$uniqueId];var t=e.$propsUsingMainModel;for(var n in t)this.$unbindXmlProperty(e,n);e.dispatchEvent("unloadmodel")},this.getXpathByAmlNode=function(e){var t=this.$amlNodes[e.$uniqueId];return t?t.xpath:!1},this.$loadInAmlNode=function(e){var t,n=e.xpath,r=e.amlNode;this.data&&n?t=this.data.selectSingleNode(n):t=this.data||null,t?(delete this.$listeners[r.$uniqueId],r.xmlRoot!=t&&r.load(t)):this.$waitForXml(r)},this.$loadInAmlProp=function(e,t){var n,r,i=this.$propBinds[e],s=apf.all[e];if(!s){delete this.$propBinds[e];return}for(n in i)t&&(r=i[n].listen?t.selectSingleNode(i[n].listen):t)?(apf.xmldb.addNodeListener(t,s,"p|"+e+"|"+n+"|"+this.$uniqueId),delete this.$proplisteners[e+n],s.$execProperty(n,r)):this.$waitForXml(s,n)},this.$bindXmlProperty=function(e,t,n,r,i){var s,o,u=e.$uniqueId;this.$propBinds[u]||(this.$propBinds[u]={}),o=this.$propBinds[u][t]={bind:n};if(r&&!1){(s=this.$amlNodes[u])&&s.xpath&&(n=(o.root=s.xpath)+"/"+n);var a=n.split("/"),f=a.pop();f.indexOf("@")==0||f.indexOf("text()")>-1||f.indexOf("node()")>-1?o.listen=a.join("/"):o.listen=n}else(s=this.$amlNodes[u])&&s.xpath&&(o.listen=s.xpath);i&&(o.listen=".");if(this.data){var l=o.listen?this.data.selectSingleNode(o.listen):this.data;if(l)return apf.xmldb.addNodeListener(l,e,"p|"+e.$uniqueId+"|"+t+"|"+this.$uniqueId),o}return this.$waitForXml(e,t),o},this.$unbindXmlProperty=function(e,t){var n=e.$uniqueId,r=this.$propBinds[n]&&this.$propBinds[n][t];if(!r)return;if(this.data){var i=r.listen?this.data.selectSingleNode(r.listen):this.data;i&&apf.xmldb.removeNodeListener(i,e,"p|"+n+"|"+t+"|"+this.$uniqueId)}return delete this.$proplisteners[n+t],delete this.$propBinds[n][t],r},this.getXml=function(){return this.data?apf.xmldb.cleanNode(this.data.cloneNode(!0)):!1},this.setQueryValue=function(e,t){if(!this.data)return!1;var n=apf.createNodeFromXpath(this.data,e);return n?(apf.setNodeValue(n,t,!0),n):null},this.setQueryValues=function(e,t){if(!this.data)return[];var n=this.data.selectNodes(e);for(var r=0,i=n.length;r<i;r++)apf.setNodeValue(node,t,!0);return n},this.queryValue=function(e){return this.data?apf.queryValue(this.data,e):!1},this.queryValues=function(e){return this.data?apf.queryValue(this.data,e):[]},this.queryNode=function(e){return this.data?this.data.selectSingleNode(e):null},this.queryNodes=function(e){return this.data?this.data.selectNodes(e):[]},this.appendXml=function(e,t){var n=t?apf.createNodeFromXpath(this.data,t):this.data;if(!n)return null;typeof e=="string"?e=apf.getXml(e):e.nodeFunc&&(e=e.getXml());if(!e)return;return e=apf.xmldb.appendChild(n,e),this.dispatchEvent("update",{xmlNode:e}),e},this.removeXml=function(e){if(!this.data)return;var t;typeof e=="string"?t=this.data.selectNodes(e):e.length||(t=[e]),t.length&&apf.xmldb.removeNodeList(t)},this.clear=function(){this.load(null),doc=null},this.reset=function(){var e=this.data.ownerDocument;this.data.parentNode.replaceChild(this.$copy,this.data),this.load(this.$copy)},this.savePoint=function(){this.$copy=apf.xmldb.getCleanCopy(this.data)},this.reloadAmlNode=function(e){if(!this.data)return;var t=this.$amlNodes[e],n=t.xpath?this.data.selectSingleNode(t.xpath):this.data;t.amlNode.load(n)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t=this.$aml;this.parentNode&&this.parentNode.hasFeature(apf.__DATABINDING__)&&(this.name||this.setProperty("id","model"+this.parentNode.$uniqueId),this.register(this.parentNode));if(!this.src){var n,r=t;if(r&&r.childNodes.length){if(apf.getNode(r,[0]))return(n=r.xml||r.serialize()).match(/^[\s\S]*?>([\s\S]*)<[\s\S]*?$/)&&(n=RegExp.$1,apf.supportNamespaces||(n=n.replace(/xmlns=\"[^"]*\"/g,""))),this.whitespace===!1&&(n=n.replace(/>[\s\n\r]*</g,"><")),this.load(apf.getXmlDom(n).documentElement);if(apf.isJson(r.childNodes[0].nodeValue))return this.load(apf.getXmlDom(r.childNodes[0].nodeValue).documentElement)}this.submission&&this.load("<data />")}return apf.isFalse(this.autoinit)||this.init(),this}),this.init=function(e){this.session?this.$loadFrom(this.session,{isSession:!0}):this.src&&this.$loadFrom(this.src,{callback:e})},this.$loadFrom=function(e,t){if(e.indexOf("rdb://")===0)return this.src=e,this.$propHandlers.remote.call(this,this.remote);var n=e.split(":");t||(t={}),t.isSession||(this.src=e,this.$srcOptions=[e,t]),this.dispatchEvent("beforeretrieve");var r,i;for(r in this.$amlNodes){if(!(i=this.$amlNodes[r])||!i.amlNode)continue;i.amlNode.noloading||i.amlNode.clear("loading")}this.$state=1,this.$callCount?this.$callCount++:this.$callCount=1;var s=this,o=this.$callCount,u=t.callback;return t.callback=function(n,r,i){if(o!=s.$callCount)return;s.dispatchEvent("afterretrieve");if(r!=apf.SUCCESS){var a;a=new Error(apf.formatErrorString(1032,s,"Loading xml data","Could not load data\nInstruction: "+e+"\n"+"Url: "+i.url+"\n"+"Info: "+i.message+"\n\n"+n));if(u&&u.apply(this,arguments)===!0)return!0;if(i.tpModule&&i.tpModule.retryTimeout(i,r,s,a)===!0)return!0;throw s.$state=0,a}if(t&&t.isSession&&!n){if(this.src)return s.$loadFrom(this.src)}else{if(t&&t.cancel)return;s.load(n),s.dispatchEvent("receive",{data:n}),u&&u.apply(this,arguments)}},apf.getData(e,t)},this.reload=function(){if(!this.data)return;this.$srcOptions?this.$loadFrom.apply(this,this.$srcOptions):this.src&&this.$loadFrom(this.src)},this.load=function(e,t){if(typeof e=="string"){if(e.charAt(0)!="<")return this.$loadFrom(e,t);e.substr(0,5).toUpperCase()=="<!DOC"&&(e=e.substr(e.indexOf(">")+1)),apf.supportNamespaces||(e=e.replace(/xmlns\=\"[^"]*\"/g,"")),e=apf.getXmlDom(e,null,!0).documentElement}if(this.ownerDocument&&this.ownerDocument.$domParser.$isPaused(this)){var n=this;this.data=e,apf.xmldb.getXmlDocId(e,this),this.$queueLoading=!0,apf.queue.add("modelload"+this.$uniqueId,function(){n.ownerDocument&&n.ownerDocument.$domParser.$isPaused(n)?apf.queue.add("modelload"+n.$uniqueId,arguments.callee):(n.load(e,t),n.$queueLoading=!1)});return}this.$queueLoading&&apf.queue.remove("modelload"+this.$uniqueId),this.$state=0;if(this.dispatchEvent("beforeload",{xmlNode:e})===!1)return!1;var r=e?e.ownerDocument:null;if(e){if(!apf.supportNamespaces){var i=[],s=e.attributes;for(var o=0,u=s.length;o<u;o++)s[o].nodeName.substr(0,5)=="xmlns"&&i.push(s[o].xml);i.length&&r.setProperty("SelectionNamespaces",i.join(" "))}apf.xmldb.addNodeListener(e,this),apf.xmldb.nodeConnect(apf.xmldb.getXmlDocId(e,this),e,null,this),(!t||!t.nocopy)&&this.enablereset&&(this.$copy=apf.xmldb.getCleanCopy(e))}this.data=e,this.dispatchEvent("afterload",{xmlNode:e}),this.dispatchEvent("update",{xmlNode:e});for(var a in this.$amlNodes)this.$loadInAmlNode(this.$amlNodes[a]);for(a in this.$propBinds)this.$loadInAmlProp(a,e);return this},this.$waitForXml=function(e,t){t?this.$proplisteners[e.$uniqueId+t]={id:e.$uniqueId,amlNode:e,prop:t}:this.$listeners[e.$uniqueId]=e,e.xmlRoot&&e.clear()},this.$xmlUpdate=function(e,t,n,r){if(e=="replacenode"&&t==this.data.ownerDocument.documentElement){var i=this;$setTimeout(function(){i.load(t)});return}this.rdb&&!this.$at&&r&&(this.$at=r.at);var s,o;for(var u in this.$listeners)if(t=this.data.selectSingleNode(this.$amlNodes[u].xpath||"."))this.$listeners[u].load(t),delete this.$listeners[u];for(u in this.$proplisteners){s=this.$proplisteners[u],o=this.$propBinds[s.id][s.prop];if(t=o.listen?this.data.selectSingleNode(o.listen):this.data)delete this.$proplisteners[u],apf.xmldb.addNodeListener(t,s.amlNode,"p|"+s.id+"|"+s.prop+"|"+this.$uniqueId),s.amlNode.$execProperty(s.prop,o.root?this.data.selectSingleNode(o.root):this.data)}this.dispatchEvent("update",{xmlNode:t,action:e,undoObj:r})},this.$insertFrom=function(e,t){if(!e)return!1;this.dispatchEvent("beforeretrieve");var n=t.callback,r=this;t.callback=function(e,i,s){r.dispatchEvent("afterretrieve"),s||(s={});if(i!=apf.SUCCESS){var o;if(s.tpModule.retryTimeout(s,i,t.amlNode||r,o)===!0)return!0;if(n&&n.call(this,s.data,i,s)===!1)return;throw o}typeof t.insertPoint=="string"&&(t.insertPoint=r.data.selectSingleNode(t.insertPoint)),typeof t.clearContents=="undefined"&&s.userdata&&(t.clearContents=apf.isTrue(s.userdata[1])),t.whitespace==undefined&&(t.whitespace=r.whitespace),(t.amlNode||r).insert(e,t),n&&n.call(this,s.data,i,s)},apf.getData(e,t)},this.insert=function(e,t){if(typeof e=="string"){if(e.charAt(0)!="<")return this.$insertFrom(e,t);e.substr(0,5).toUpperCase()=="<!DOC"&&(e=e.substr(e.indexOf(">")+1)),apf.supportNamespaces||(e=e.replace(/xmlns\=\"[^"]*\"/g,"")),this.whitespace===!1&&(e=e.replace(/>[\s\n\r]*</g,"><")),e=apf.getXmlDom(e).documentElement}t.insertPoint||(t.insertPoint=this.data),typeof t.copyAttributes=="undefined"&&(t.copyAttributes=!0);var n=apf.mergeXml(e,t.insertPoint,t);return apf.xmldb.applyChanges("insert",t.insertPoint),e},this.convertXml=function(e){return e?apf.convertXml(this.data,e):this.data.xml},this.submit=function(e,t,n,r){function s(e,t,n){if((t==apf.TIMEOUT||i.retryOnError&&t==apf.ERROR)&&n.retries<apf.maxHttpRetries)return n.tpModule.retry(n.id);t!=apf.SUCCESS?i.dispatchEvent("submiterror",n):i.dispatchEvent("submitsuccess",apf.extend({data:e},n))}e||(e=this.submission),n||(n=this.data),t||(t="form");if(this.dispatchEvent("beforesubmit",{instruction:e})===!1)return!1;var i=this,o;t.indexOf("xml")>-1?o=apf.getXmlString(n):t.indexOf("form")>-1?o=apf.convertXml(apf.xmldb.getCleanCopy(n),"cgiobjects"):t.indexOf("json")>-1&&(o=apf.convertXml(n,"json")),apf.saveData(e,apf.extend({xmlNode:n,data:o,callback:s},r)),this.dispatchEvent("aftersubmit")},this.$destroy=function(){this.session&&this.data&&apf.saveData(this.session,{xmlNode:this.getXml()})}}.call(apf.model.prototype=new apf.AmlElement),apf.aml.setElement("model",apf.model),apf.notifier=function(e,t){this.$init(t||"notifier",apf.NODE_VISIBLE,e)},function(){function t(){return[document.documentElement.scrollTop||document.body.scrollTop,document.documentElement.scrollLeft||document.body.scrollLeft]}function n(e,n,r,i,s,o,u){var a=t();return[(e[0]=="top"?o[0]:e[0]=="bottom"?n-i-o[2]:n/2-i/2)+a[0]+u,(e[1]=="left"?o[3]:e[1]=="right"?r-s-o[1]:r/2-s/2)+a[1]]}var e=this;this.timeout=2e3,this.position="top-right",this.columnsize=300,this.arrange="vertical",this.margin="10 10 10 10",this.startPadding=0,this.lastPos=null,this.showing=0,this.sign=1,this.$supportedProperties.push("margin","position","timeout","columnsize","arrange","start-padding"),this.$propHandlers.position=function(e){this.lastPos=null},this.$propHandlers.margin=function(e){this.margin=e},this.$propHandlers["start-padding"]=function(e){this.startPadding=parseInt(e)},this.$propHandlers.timeout=function(e){this.timeout=parseInt(e)*1e3},this.popup=function(e,r,i){function b(){if(y)return;apf.tween.css(o,"notifier_hidden",{anim:apf.tween.NORMAL,steps:10,interval:20,onfinish:function(e){apf.setStyleClass(o,"",["notifier_hover"]);if(y)return;o.parentNode&&o.parentNode.removeChild(o)&&!f&&(s.showing--,f=!0),s.showing==0&&(s.lastPos=null)}})}if(!this.$ext)return;this.$ext.style.width=this.columnsize+"px";var s=this,o=this.$pHtmlNode.appendChild(this.$ext.cloneNode(!0)),u=apf.isIE?document.documentElement.offsetWidth:window.innerWidth,a=apf.isIE?document.documentElement.offsetHeight:window.innerHeight,f=!1,l=this.$getLayoutNode("notification","icon",o),c=this.$getLayoutNode("notification","body",o);this.showing++,l&&r&&(l.nodeType==1?l.style.backgroundImage="url("+this.iconPath+r+")":l.nodeValue=this.iconPath+r,this.$setStyleClass(o,this.$baseCSSname+"ShowIcon")),c.insertAdjacentHTML("beforeend",e||"[No message]"),o.style.display="block";var h=apf.getBox(this.margin||"0"),p=o.offsetHeight,d=o.offsetWidth,v=this.position.split("-"),m=!1;if(v[1]=="top"||v[1]=="bottom"||v[0]=="left"||v[0]=="right")v=[v[1],v[0]];if(v[0]=="center"&&v[1]!=="center"||v[0]!=="center"&&v[1]=="center")v=["top","right"];this.lastPos||(this.lastPos=n(v,a,u,p,d,h,this.startPadding),this.sign=1,m=!0);if(!m&&v[0]=="bottom"&&this.sign==1||v[0]=="top"&&this.sign==-1)this.arrange=="vertical"?this.lastPos[0]+=v[1]=="center"?0:this.sign*(v[0]=="top"?h[0]+p:v[0]=="bottom"?-h[2]-p:0):this.lastPos[1]+=v[0]=="center"?0:this.sign*(v[1]=="left"?h[3]+d:v[1]=="right"?-h[1]-d:0);var g=t();if(this.lastPos[0]>a+g[0]-p||this.lastPos[0]<g[0])this.lastPos[1]+=v[1]=="left"?d+h[3]:v[1]=="right"?-d-h[3]:0,this.sign*=-1,this.lastPos[0]+=this.sign*(v[0]=="top"?h[0]+p:v[0]=="bottom"?-h[2]-p:0);else if(this.lastPos[1]>u+g[1]-d||this.lastPos[1]<g[1])this.lastPos[0]+=v[0]=="top"?p+h[0]:v[0]=="bottom"?-p-h[0]:0,this.sign*=-1,this.lastPos[1]+=v[0]=="center"?0:this.sign*(v[1]=="left"?h[3]+d:v[1]=="right"?-h[1]-d:0);this.lastPos&&((this.lastPos[0]>a+g[0]-p||this.lastPos[0]<g[1])&&this.arrange=="horizontal"&&(this.lastPos=n(v,a,u,p,d,h,this.startPadding),this.sign=1),(this.lastPos[1]>u+g[1]-d||this.lastPos[1]<g[1])&&this.arrange=="vertical"&&(this.lastPos=n(v,a,u,p,d,h,this.startPadding),this.sign=1)),o.style.left=this.lastPos[1]+"px",o.style.top=this.lastPos[0]+"px";if(v[0]=="top"&&this.sign==1||v[0]=="bottom"&&this.sign==-1)this.arrange=="vertical"?this.lastPos[0]+=v[1]=="center"?0:this.sign*(v[0]=="top"?h[0]+p:v[0]=="bottom"?-h[2]-p:0):this.lastPos[1]+=v[0]=="center"?0:this.sign*(v[1]=="left"?h[3]+d:v[1]=="right"?-h[1]-d:0);var y=!1;apf.tween.css(o,"fade",{anim:apf.tween.NORMAL,steps:10,interval:10,onfinish:function(e){o.style.filter="",$setTimeout(b,s.timeout)}}),o.onmouseover=function(e){e=e||event;var t=e.explicitOriginalTarget||e.toElement;if(y)return;if(t==o||apf.isChildOf(o,t))apf.tween.css(o,"notifier_hover",{anim:apf.tween.NORMAL,steps:10,interval:20,onfinish:function(e){apf.setStyleClass(o,"",["notifier_shown"])}}),y=!0},o.onmouseout=function(e){e=e||event;var t=e.explicitOriginalTarget||e.toElement;if(!y)return;if(apf.isChildOf(t,o)||!apf.isChildOf(o,t)&&o!==t)y=!1,b()},i&&(o.onclick=function(){i.dispatchEvent("click")})},this.$draw=function(){this.$pHtmlNode=document.body,this.$ext=this.$getExternal("notification"),this.$ext.style.display="none",this.$ext.style.position="absolute",apf.window.zManager.set("notifier",this.$ext)}}.call(apf.notifier.prototype=new apf.Presentation),apf.aml.setElement("notifier",apf.notifier),apf.aml.setElement("event",apf.event),apf.page=function(e,t){this.$init(t||"page",apf.NODE_VISIBLE,e)},function(){function e(e){this.parentNode.set(this),this.autofocus&&(this.canHaveChildren=2),this.$setStyleClass(e,"down",null,!0)}this.canHaveChildren=!0,this.$focussable=!1,this.closebtn=!1,this.autofocus=!0,this.setCaption=function(e){this.setProperty("caption",e,!1,!0)},this.setIcon=function(e){this.setProperty("icon",e,!1,!0)},this.addEventListener("beforerender",function(){this.parentNode.dispatchEvent("beforerender",{page:this})}),this.addEventListener("afterrender",function(){this.parentNode.dispatchEvent("afterrender",{page:this})}),this.$booleanProperties.visible=!0,this.$booleanProperties.fake=!0,this.$booleanProperties.closebtn=!0,this.$booleanProperties.autofocus=!0,this.$supportedProperties.push("fake","caption","icon","tooltip","type","buttons","closebtn","trans-in","trans-out","autofocus"),this.$propHandlers.closebtn=function(e){var t=this;if(e){var n=this.parentNode.$getLayoutNode("button","container",this.$button);this.parentNode.$getNewContext("btnclose");var r=this.parentNode.$getLayoutNode("btnclose");r&&(apf.setStyleClass(this.$button,"btnclose"),r.addEventListener("mousedown",function(e){apf.cancelBubble(e,apf.lookup(t.$uniqueId))},!1),r.addEventListener("click",function(e){var n=apf.lookup(t.$uniqueId);n.parentNode.remove(n,e)},!1),n.appendChild(r))}},this.$propHandlers.tooltip=function(e){if(!this.parentNode)return;var t=this.parentNode.$getLayoutNode("button","caption",this.$button);(t.nodeType==1?t:t.parentNode).setAttribute("title",e||"")},this.$propHandlers.caption=function(e){if(!this.parentNode)return;var t=this.parentNode.$getLayoutNode("button","caption",this.$button);t.nodeType==1?t.innerHTML=e:t.nodeValue=e},this.$propHandlers.icon=function(e){if(!this.parentNode)return;var t=this.parentNode.$getLayoutNode("button","icon",this.$button);t&&t.nodeType==1&&apf.skins.setIcon(t,e,this.parentNode.iconPath)},this.$propHandlers.visible=function(e){if(!this.parentNode)return;if(e){if(this.$fake){this.parentNode.set(this.$fake),this.visible=!1;return}this.$ext.style.display="",this.parentNode.$hasButtons&&(this.$button.style.display="block"),this.parentNode.$activepage||this.parentNode.set(this)}else{if(this.$active){this.$deactivate();var t=this.parentNode.activepagenr+1,n=this.parentNode.getPages(),r=n.length;while(t<r&&!n[t].visible)t++;if(t==r){t=this.parentNode.activepagenr-1;while(t>=0&&r&&!n[t].visible)t--}t>=0?this.parentNode.set(t):this.parentNode.activepage=this.parentNode.activepagenr=this.parentNode.$activepage=null}this.$ext.style.display="none",this.parentNode.$hasButtons&&(this.$button.style.display="none")}},this.$propHandlers.fake=function(e){this.$ext&&(apf.destroyHtmlNode(this.$ext),this.$int=this.$ext=null)},this.$propHandlers.type=function(e){this.setProperty("fake",!0),this.relPage&&this.$active&&this.relPage.$deactivate(),this.relPage=this.parentNode.getPage(e),this.$active&&this.$activate()},this.addEventListener("DOMNodeRemoved",function(e){if(e&&e.currentTarget!=this)return;this.$button&&(this.$position&1&&this.parentNode.$setStyleClass(this.$button,"",["firstbtn","firstcurbtn"]),this.$position&2&&this.parentNode.$setStyleClass(this.$button,"",["lastbtn"])),e.$doOnlyAdmin||(this.$button&&this.$button.parentNode.removeChild(this.$button),this.parentNode&&this.parentNode.$activepage==this&&(this.$button&&this.parentNode.$setStyleClass(this.$button,"",["curbtn"]),this.parentNode.$setStyleClass(this.$ext,"",["curpage"])))}),this.addEventListener("DOMNodeRemovedFromDocument",function(e){this.fake&&this.parentNode.$activepage==this&&this.$deactivate()}),this.addEventListener("DOMNodeInserted",function(e){if(e&&e.currentTarget!=this||!this.$amlLoaded)return;!e.$isMoveWithinParent&&this.skinName!=this.parentNode.skinName?this.$destroy():this.$button&&(!e.$oldParent||e.$oldParent.$hasButtons)&&this.parentNode.$buttons&&this.parentNode.$buttons.insertBefore(this.$button,e.$beforeNode&&e.$beforeNode.$button||null)},!0),this.$position=0,this.$first=function(e){e?(this.$isFirst=!1,this.$position-=1,this.parentNode.$setStyleClass(this.$button,"",["firstbtn","firstcurbtn"])):(this.$isFirst=!0,this.$position=this.$position|1,this.parentNode.$setStyleClass(this.$button,"firstbtn"+(this.parentNode.$activepage==this?" firstcurbtn":"")))},this.$last=function(e){e?(this.$isLast=!1,this.$position-=2,this.parentNode.$setStyleClass(this.$button,"",["lastbtn"])):(this.$isLast=!0,this.$position=this.$position|2,this.parentNode.$setStyleClass(this.$button,"lastbtn"))},this.$deactivate=function(e){this.$active=!1;if(!this.parentNode)return;this.parentNode.$hasButtons&&(this.$position>0&&this.parentNode.$setStyleClass(this.$button,"",["firstcurbtn"]),this.parentNode.$setStyleClass(this.$button,"",["curbtn"])),(!this.fake||this.relPage)&&!e&&(this.parentNode.$setStyleClass(this.fake?this.relPage.$ext:this.$ext,"",["curpage"]),this.fake&&(this.relPage.visible||(this.relPage.$ext.style.display="none"),this.relPage.dispatchEvent("prop.visible",{value:!1})),this.dispatchEvent("prop.visible",{value:!1}))},this.$deactivateButton=function(){this.parentNode&&this.parentNode.$hasButtons&&(this.$position>0&&this.parentNode.$setStyleClass(this.$button,"",["firstcurbtn"]),this.parentNode.$setStyleClass(this.$button,"",["curbtn"]))},this.$activate=function(){this.$active=!0;if(!this.$drawn){var e;this.addEventListener("DOMNodeInsertedIntoDocument",e=function(t){this.removeEventListener("DOMNodeInsertedIntoDocument",e);if(!this.$active)return;this.$activate()});return}this.parentNode.$hasButtons&&(this.$isFirst&&this.parentNode.$setStyleClass(this.$button,"firstcurbtn"),this.parentNode.$setStyleClass(this.$button,"curbtn"));if(!this.fake||this.relPage)this.fake?this.relPage&&(this.relPage.$ext.style.display="",this.parentNode.$setStyleClass(this.relPage.$ext,"curpage"),this.relPage.$fake=this,this.relPage.$render&&this.relPage.$render(),this.relPage.dispatchEvent("prop.visible",{value:!0})):this.parentNode.$setStyleClass(this.$ext,"curpage"),apf.layout&&this.relPage&&apf.layout.forceResize(this.fake?this.relPage.$int:this.$int);this.$render&&this.$render();if(!this.fake){if(apf.isIE){var t=this.$ext.className;this.$ext.className="rnd"+Math.random(),this.$ext.className=t}this.dispatchEvent("prop.visible",{value:!0})}},this.$activateButton=function(){if(this.$active)return;if(!this.$drawn){var e;this.addEventListener("DOMNodeInsertedIntoDocument",e=function(t){this.removeEventListener("DOMNodeInsertedIntoDocument",e),this.$activateButton()});return}this.parentNode&&this.parentNode.$hasButtons&&(this.$isFirst&&this.parentNode.$setStyleClass(this.$button,"firstcurbtn"),this.parentNode.$setStyleClass(this.$button,"curbtn")),this.$render&&this.$render()},this.addEventListener("$skinchange",function(){this.caption&&this.$propHandlers.caption.call(this,this.caption),this.icon&&this.$propHandlers.icon.call(this,this.icon)}),this.$enable=function(){this.$button&&this.$setStyleClass(this.$button,null,["btnDisabled"])},this.$disable=function(){this.$button&&this.$setStyleClass(this.$button,"btnDisabled")},this.$btnControl={},this.$btnDown=function(t,n){if(this.disabled)return;if(n.button==2&&this.parentNode.contextmenu){this.parentNode.contextPage=this;return}if(this.parentNode.dispatchEvent("tabselectclick",{page:this,htmlEvent:n})===!1)return;this.$btnPressed=!0,e.call(this,t);if(this.parentNode.$order&&this.parentNode.getPages().length>1){if(this.$btnControl[this.$uniqueId])return;this.$dragging=!0;var r=apf.getAbsolutePosition(this.$button,this.parentNode.$ext),i=n.clientX,s=i-r[0],o=apf.getAbsolutePosition(this.$button)[1],u=t.cloneNode(!0);u.style.opacity=0,t.style.left=t.offsetLeft+"px",t.style.top=t.offsetTop+"px",t.style.width=t.offsetWidth-apf.getWidthDiff(t)+"px",t.style.position="absolute",this.$button.parentNode.insertBefore(u,this.$button);var a=Math.abs(apf.getMargin(u)[0]),f,l,c=this,h;apf.addListener(document,"mousemove",l=function(e){e||(e=event);if(!h){if(Math.abs(i-e.clientX)<3)return;h=!0,t.style.zIndex=1}t.style.left="-2000px";var n=document.elementFromPoint(e.clientX,o+1),r=n&&apf.findHost(n);t.style.left=e.clientX-s+"px";if(r&&r.localName=="page"){r.$button.style.position="relative";var f,l=u.offsetLeft>r.$button.offsetLeft,p=apf.getAbsolutePosition(r.$button);if(l&&r.$button.offsetWidth-e.clientX+p[0]<a)return;if(f=c.$btnControl[r.$uniqueId]){if(f.onRight==l)return;f.stop()}c.$btnControl[r.$uniqueId]={onRight:l};var d=c.$lastPosition=l?r.$button:r.$button.nextSibling;c.$lastLeft=r.$button.offsetLeft,apf.tween.single(r.$button,{steps:20,interval:10,from:0,to:l?r.$button.offsetWidth-a:-1*(r.$button.offsetWidth-a),type:"left",anim:apf.tween.easeInOutCubic,control:c.$btnControl[r.$uniqueId],onstop:function(){},onfinish:function(){r.$button.style.left=r.$button.style.position="",delete c.$btnControl[r.$uniqueId],u&&u.parentNode&&u.parentNode.insertBefore(u,d),c.$lastPosition=c.$lastLeft=undefined}})}}),apf.addListener(document,"mouseup",f=function(e){e||(e=event);var n=c.$lastPosition!==null?apf.findHost(c.$lastPosition||u.nextSibling):null;h&&n!=c.nextSibling?apf.tween.single(c.$button,{steps:20,interval:10,from:c.$button.offsetLeft,to:c.$lastLeft||u.offsetLeft,type:"left",control:c.$btnControl[c.$uniqueId]={},anim:apf.tween.easeInOutCubic,onstop:function(){},onfinish:function(){t.style.position=t.style.zIndex=t.style.top=t.style.width=t.style.left="";var e=c.nextSibling!=n,r;!(r=apf.findHost(c.$button.nextSibling))||r===c.parentNode.lastChild?c.parentNode.appendChild(c):c.parentNode.insertBefore(c,n),u.parentNode.removeChild(u),e&&c.parentNode.dispatchEvent("reorder",{page:c.localName!="page"?c.parentNode.$activepage:c}),delete c.$btnControl[c.$uniqueId]}}):(t.style.position=t.style.zIndex=t.style.top=t.style.width=t.style.left="",u.parentNode.removeChild(u)),apf.removeListener(document,"mouseup",f),apf.removeListener(document,"mousemove",l)})}},this.$btnUp=function(t){this.parentNode.$setStyleClass(t,"",["down"],!0);if(this.disabled)return;this.$btnPressed=!1,this.parentNode.dispatchEvent("tabselectmouseup")},this.$btnOut=function(e){this.parentNode.$setStyleClass(e,"",["over"],!0),this.canHaveChildren=!0,this.$dragging=!1,this.$btnPressed=!1},this.$canLeechSkin=!0,this.addEventListener("prop.class",function(e){apf.setStyleClass(this.$button,e.value,this.$lastClassValueBtn?[this.$lastClassValueBtn]:null),this.$lastClassValueBtn=e.value}),this.$draw=function(e){this.skinName=this.parentNode.skinName;var t=this.getAttribute("type");t&&(this.fake=!0,this.relPage=this.parentNode.getPage(t)||null);if(this.parentNode.$hasButtons){this.parentNode.$getNewContext("button");var n=this.parentNode.$getLayoutNode("button");n.setAttribute(this.parentNode.$getOption("main","select")||"onmousedown","apf.lookup("+this.$uniqueId+").$btnDown(this, event);"),n.setAttribute("onmouseup","apf.lookup("+this.$uniqueId+").$btnUp(this)"),n.setAttribute("onmouseover","var o = apf.lookup("+this.$uniqueId+").parentNode;if(apf.lookup("+this.$uniqueId+") != o.$activepage"+(this.parentNode.overactivetab?" || true":"")+') o.$setStyleClass(this, "over", null, true);'),n.setAttribute("onmouseout","var o = apf.lookup("+this.$uniqueId+");o&&o.$btnOut(this, event);"),this.$button=apf.insertHtmlNode(n,this.parentNode.$buttons);var r=this.closebtn=this.getAttribute("closebtn");(apf.isTrue(r)||(this.parentNode.buttons||"").indexOf("close")>-1&&!apf.isFalse(r))&&this.$propHandlers.closebtn.call(this,!0),!e&&this.nextSibling&&this.nextSibling.$button&&this.$button.parentNode.insertBefore(this.$button,this.nextSibling.$button),this.$button.host=this}if(this.fake)return;this.$ext&&this.$ext.parentNode.removeChild(this.$ext),this.$ext=this.parentNode.$getExternal("page",this.parentNode.oPages,null,this),this.$ext.host=this,this.$int=this.parentNode.$getLayoutNode("page","container",this.$ext),this.$isLast&&this.$last(),this.$isFirst&&this.$first()},this.$destroy=function(){this.$button&&(this.parentNode&&!this.parentNode.$amlDestroyed&&this.$button.parentNode&&this.$button.parentNode.removeChild(this.$button),this.$button.host=null,this.$button=null)}}.call(apf.page.prototype=new apf.Presentation),apf.aml.setElement("page",apf.page),apf.param=function(e,t){this.$init(t||"param",apf.NODE_HIDDEN,e)},apf.param.prototype=new apf.AmlElement,apf.param.prototype.$parsePrio="002",apf.aml.setElement("variable",apf.param),apf.aml.setElement("param",apf.param),apf.progress=function(e,t){this.$init(t||"progress",apf.NODE_VISIBLE,e)},apf.progressbar=function(e,t){this.$init(t||"progressbar",apf.NODE_VISIBLE,e)},function(){this.implement(apf.DataAction),this.$focussable=!1,this.value=0,this.min=0,this.max=100,this.$running=!1,this.$timer,this.$booleanProperties.autostart=!0,this.$booleanProperties.autohide=!0,this.$supportedProperties.push("value","min","max","autostart","autohide"),this.$propHandlers.value=function(e){this.value=parseInt(e)||this.min,this.value>=this.max?apf.setStyleClass(this.$ext,this.$baseCSSname+"Complete",[this.$baseCSSname+"Running",this.$baseCSSname+"Half"]):apf.setStyleClass(this.$ext,this.$baseCSSname+"Running",[this.$baseCSSname+"Complete"]),this.value>=this.max/2&&apf.setStyleClass(this.$ext,this.$baseCSSname+"Half",[]),this.oSlider.style.width=this.value*100/(this.max-this.min)+"%",this.oCaption.nodeValue=Math.round(this.value/(this.max-this.min)*100)+"%"},this.$propHandlers.min=function(e){this.min=parseFloat(e)},this.$propHandlers.max=function(e){this.max=parseFloat(e)},this.setValue=function(e){this.setProperty("value",e,!1,!0)},this.getValue=function(){return this.value},this.clear=function(){this.$clear()},this.$clear=function(e,t){clearInterval(this.$timer),this.setValue(this.min),apf.setStyleClass(this.$ext,"",[this.$baseCSSname+"Running",this.$baseCSSname+"Complete"]);if(e){var n=this;this.$timer=setInterval(function(){n.start(t)})}this.autohide&&this.hide(),this.$running=!1},this.start=function(e){this.autohide&&this.show(),clearInterval(this.$timer);var t=this;this.$timer=setInterval(function(){t.$amlDestroyed?clearInterval(t.$timer):t.$step()},e||1e3),this.$setStyleClass(this.$ext,this.$baseCSSname+"Running")},this.pause=function(){clearInterval(this.$timer)},this.stop=function(e,t,n){clearInterval(this.$timer),this.setValue(this.max);var r=this;this.$timer=setInterval(function(){r.$clear(e,n||0)},t||500)},this.$step=function(){if(this.value==this.max)return;this.setValue(this.value+1)},this.$draw=function(e,t,n,r){this.$ext=this.$getExternal(),this.oSlider=this.$getLayoutNode("main","progress",this.$ext),this.oCaption=this.$getLayoutNode("main","caption",this.$ext)},this.$loadAml=function(e){this.autostart&&this.start(),this.autohide&&this.hide()}}.call(apf.progressbar.prototype=new apf.StandardBinding),apf.progress.prototype=apf.progressbar.prototype,apf.aml.setElement("progress",apf.progress),apf.aml.setElement("progressbar",apf.progressbar),apf.radiobutton=function(e,t){this.$init(t||"radiobutton",apf.NODE_VISIBLE,e)},function(){this.implement(apf.ChildValue),this.$childProperty="label",this.$focussable=apf.KEYBOARD,this.$booleanProperties.selected=!0,this.$supportedProperties.push("value","background","group","label","selected","tooltip","icon"),this.$propHandlers.group=function(e){if(!this.$ext)return;this.$group&&this.$group.$removeRadio&&this.$group.$removeRadio(this);if(!e){this.$group=null;return}var t=typeof e=="string"?apf.nameserver.get("group",e):e;t||(t=apf.nameserver.register("group",e,new apf.$group),t.setAttribute("id",e),t.dispatchEvent("DOMNodeInsertedIntoDocument"),t.parentNode=this),this.$group=t,this.oInput&&this.oInput.setAttribute("name",e),this.$group.$addRadio(this)},this.$propHandlers.tooltip=function(e){this.$ext.setAttribute("title",e)},this.$propHandlers.icon=function(e){if(!this.oIcon)return;e?this.$setStyleClass(this.$ext,this.$baseCSSname+"Icon"):this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Icon"]),apf.skins.setIcon(this.oIcon,e,this.iconPath)},this.$propHandlers.label=function(e){e?this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Empty"]):this.$setStyleClass(this.$ext,this.$baseCSSname+"Empty"),this.oLabel&&(this.oLabel.innerHTML=e)},this.$propHandlers.selected=function(e){if(!this.$group)return;e&&this.$group.setProperty("value",this.value)},this.addEventListener("prop.model",function(e){this.$group&&this.$group.setProperty("model",e.value)}),this.$propHandlers.background=function(e){var t=this.$getLayoutNode("main","background",this.$ext);if(e){var n=e.split("|");this.$background=n.concat(["vertical",2,16].slice(n.length-1)),t.style.backgroundImage="url("+this.mediaPath+n[0]+")",t.style.backgroundRepeat="no-repeat"}else t.style.backgroundImage="",t.style.backgroundRepeat="",this.$background=null},this.setValue=function(e){this.setProperty("value",e,!1,!0)},this.getValue=function(){return this.value},this.select=function(){this.setProperty("selected",!0,!1,!0)},this.getGroup=function(){return this.$group},this.$check=function(e){this.$setStyleClass(this.$ext,this.$baseCSSname+"Selected"),this.selected=!0,this.oInput&&(this.oInput.selected=!0),this.doBgSwitch(2)},this.$uncheck=function(){this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Selected"]),this.selected=!1,this.oInput&&(this.oInput.selected=!1),this.doBgSwitch(1)},this.$enable=function(){this.oInput&&(this.oInput.disabled=!1);var e=this;this.$ext.onclick=function(t){t||(t=event);if((t.srcElement||t.target)==this)return;e.dispatchEvent("click",{htmlEvent:t}),e.$group.change(e.value)},this.$ext.onmousedown=function(t){t||(t=event);if((t.srcElement||t.target)==this)return;apf.setStyleClass(this,e.$baseCSSname+"Down")},this.$ext.onmouseover=function(t){t||(t=event);if((t.srcElement||t.target)==this)return;apf.setStyleClass(this,e.$baseCSSname+"Over")},this.$ext.onmouseout=this.$ext.onmouseup=function(){apf.setStyleClass(this,"",[e.$baseCSSname+"Down",e.$baseCSSname+"Over"])}},this.$disable=function(){this.oInput&&(this.oInput.disabled=!0),this.$ext.onclick=this.$ext.onmousedown=this.$ext.onmouseover=this.$ext.onmouseout=this.$ext.onmouseup=null},this.doBgSwitch=function(e){if(this.bgswitch&&(this.bgoptions[1]>=e||e==4)){e==4&&(e=this.bgoptions[1]+1);var t=this.bgoptions[0]=="vertical"?"0 -"+parseInt(this.bgoptions[2])*(e-1)+"px":"-"+parseInt(this.bgoptions[2])*(e-1)+"px 0";this.$getLayoutNode("main","background",this.$ext).style.backgroundPosition=t}},this.$focus=function(){if(!this.$ext)return;if(this.oInput&&this.oInput.disabled)return!1;this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus")},this.$blur=function(){if(!this.$ext)return;this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"])},this.addEventListener("keydown",function(e){var t=e.keyCode;if(t==13||t==32)return this.$group.change(this.value),!1;if(t==38){var n=this;while(n&&n.previousSibling){n=n.previousSibling;if(n.localName=="radiobutton"&&!n.disabled&&n.$group==this.$group){n.check(),n.focus();return}}}else if(t==40){var n=this;while(n&&n.nextSibling){n=n.nextSibling;if(n.localName=="radiobutton"&&!n.disabled&&n.$group==this.$group){n.check(),n.focus();return}}}},!0),this.$draw=function(){this.$ext=this.$getExternal(),this.oInput=this.$getLayoutNode("main","input",this.$ext),this.oLabel=this.$getLayoutNode("main","label",this.$ext),this.oIcon=this.$getLayoutNode("main","icon",this.$ext),this.oLabel&&this.oLabel.nodeType!=1&&(this.oLabel=this.oLabel.parentNode),this.$enable()},this.$childProperty="label",this.$loadAml=function(e){this.group?this.$propHandlers.group.call(this,this.group):this.parentNode.localName=="group"&&this.$propHandlers.group.call(this,this.parentNode),this.$group||this.$propHandlers.group.call(this,"group"+this.parentNode.$uniqueId)},this.$destroy=function(){this.$group&&this.$group.$removeRadio(this)}}.call(apf.radiobutton.prototype=new apf.Presentation),apf.aml.setElement("radiobutton",apf.radiobutton),apf.$group=apf.group=function(e,t){this.$init(t||"group",apf.NODE_VISIBLE,e),this.implement(apf.StandardBinding,apf.DataAction);var n=[];this.$supportedProperties.push("value","selectedItem"),this.$propHandlers.value=function(e){for(var t=0;t<n.length;t++)if(n[t].value==e)return this.setProperty("selectedItem",n[t]);return this.setProperty("selectedItem",null)};var r;this.$propHandlers.selectedItem=function(e){r&&r.$uncheck();if(!e)return;e.$check(),r=e;for(var t=0;t<n.length;t++)n[t].setProperty("selectedItem",e)},this.$addRadio=function(e){var t=n.push(e)-1;e.value||e.setProperty("value",t);var r=this;e.addEventListener("prop.value",function(e){this.selected?r.setProperty("value",e.value):r.value==e.value&&this.select()}),this.value&&e.value==this.value?this.setProperty("selectedItem",e):e.selected&&this.setProperty("value",e.value)},this.$removeRadio=function(e){n.remove(e),e.value===e.id&&e.setProperty("value",""),e.selectedItem==e&&this.setProperty("value",null)},this.setValue=function(e){this.setProperty("value",e)},this.getValue=function(){return this.value},this.$draw=function(){this.$ext=this.$int=this.$pHtmlNode}},apf.$group.prototype=new apf.GuiElement,apf.aml.setElement("group",apf.$group),apf.remote=function(e,t){this.$init(t||"remote",apf.NODE_HIDDEN,e),this.$sessions={},this.rdbQueue={},this.queueTimer=null,this.pendingTerminations={},this.offlineQueue=[]},apf.remote.SESSION_INITED=1,apf.remote.SESSION_STARTED=2,apf.remote.SESSION_TERMINATED=4,function(){this.logprefix="",apf.isO3||(this.log=function(e){apf.console.log(e)}),this.$attrExcludePropBind=apf.extend({match:1},this.$attrExcludePropBind),this.$supportedProperties.push("transport"),this.$propHandlers.transport=function(e){this.transport=typeof e=="object"?e:self[this.transport];var t=this;this.transport.addEventListener("connect",function(){var e,n;for(e in t.$sessions){n=t.$sessions[e];if(n.state==apf.remote.SESSION_STARTED)continue;this.join(e,function(e,t){})}}),this.transport.addEventListener("disconnect",function(){var e,n;for(e in t.$sessions)n=t.$sessions[e],n.state=apf.remote.SESSION_TERMINATED}),this.transport.addEventListener("update",function(e){t.$update(e)}),this.transport.addEventListener("join",function(e){if(!e.uri)return;var n=e.uri,r=t.$sessions[e.uri];if(!e.document)return t.dispatchEvent("joinrequest",e);r?(r.model.load(e.document),t.$startSession(n,e.basetime)):r=t.createSession(n,null,null,e.document,e.basetime)}),this.transport.addEventListener("leave",function(e){t.endSession(e.uri)})},this.$update=function(e){var t=e.message.args?[e.message]:e.message,n=typeof t=="string"?apf.unserialize(t):t,r=this.$sessions[e.uri],i=0,s=n.length;for(;i<s;i++)this.$receiveChange(n[i],r,e.annotator)},this.clear=function(){this.$sessions={}},this.createSession=function(e,t,n,r,i){this.log&&this.log(this.logprefix+"Creating session for "+e),t||(t=this.dispatchEvent("modelfind",{uri:e})),t?delete t.src:t=new apf.model,t.setProperty("remote",this),t.rdb=this,t.src=e;var s=this.$addSession(e,t,n);if(r)t.load(r),this.$startSession(e,i);else if(this.transport&&this.transport.isConnected()){var o=this;this.transport.join(e,function(e,t){o.$startSession(e,t)})}return s},this.endSession=function(e){if(!this.$sessions||!this.$sessions[e])return;var t=this.$sessions[e];this.transport&&this.transport.isConnected()&&t.state!=apf.remote.SESSION_TERMINATED&&this.transport.leave(e),t.state=apf.remote.SESSION_TERMINATED,delete this.$sessions[e]},this.$addSession=function(e,t,n){return delete this.$sessions[e],this.$sessions[e]={uri:e,model:t,xpath:n,state:apf.remote.SESSION_INITED}},this.$startSession=function(e,t){var n=this.$sessions[e];if(!n)return!1;n.state=apf.remote.SESSION_STARTED,t&&!n.basetime&&(n.basetime=t)},this.$queueMessage=function(e,t,n){n.rdbQueue||(n.rdbQueue={});var r=t.src,i=this.$sessions[r];n.rdbQueue[r]||(n.rdbQueue[r]=[],n.rdbModel=t);for(var s,o=0,u=e.length;o<u;++o)if((s=e[o])&&s.nodeType){if(e[0]=="setAttribute"&&e[2]=="level"&&e[1]==e[1].ownerDocument.documentElement)return!1;e[o]=this.xmlToXpath(e[o],t.data)}else if(s&&s.dataType==apf.ARRAY)for(var a=0;a<s.length;a++)s[a]&&s[a].nodeType&&(s[a]=this.xmlToXpath(s[a],t.data));n.rdbQueue[r].push({uri:r,args:e,currdelta:(new Date).toISOString()-i.basetime})},this.$processQueue=function(e){e===this&&clearTimeout(this.queueTimer);if(apf.xmldb.disableRDB)return;var t;for(var n in e.rdbQueue){if(!(t=e.rdbQueue[n]).length)continue;this.transport&&this.transport.sendUpdate(n,JSON.stringify(t)),this.dispatchEvent("rdbsend",{uri:n,message:t})}e.rdbQueue={}},this.$receiveChange=function(e,t,n){this.log&&this.log(this.logprefix+"Receiving change. disableRDB="+apf.xmldb.disableRDB),!t&&e.uri&&(t=this.$sessions[e.uri]);if(!t)return;var r=t.model;if(!r)return;r.$at||(r.$at=apf.window.$at);var i,s,o=apf.xmldb.disableRDB;apf.xmldb.disableRDB=2;var u=t.basetime+parseInt(e.currdelta,10),a=[],f=0,l=a.length;if(l){for(;f<l;++f)a[f].$dontapply=!0;r.$at.undo(l)}var c=e.args.slice(),h=c[1];s=c[1]=this.xpathToXml(h,r.data);if(s){var p=c.shift();if(p=="addChildNode")c[3]=this.xpathToXml(c[3],r.data);else if(p=="appendChild")c[1]=typeof c[1]=="string"?apf.getXml(c[1]):c[1],c[2]=c[2]?this.xpathToXml(c[2],r.data):null;else if(p=="moveNode")c[1]=this.xpathToXml(c[1],r.data),c[2]=c[2]?this.xpathToXml(c[2],r.data):null;else if(p=="replaceNode")c[0]=typeof c[1]=="string"?apf.getXml(c[1]):c[1],c[1]=s;else if(p=="removeNodeList"){var d=c[0];for(var f=0;f<d.length;f++)d[f]=this.xpathToXml(d[f],r.data)}else p=="setValueByXpath";r.$at.execute({action:p,args:c,annotator:n,message:e,rdb:!0}),this.dispatchEvent("change",{uri:e.uri,model:r,xmlNode:s,message:e})}if(l){r.$at.redo(l);for(f=0;f<l;++f)delete a[f].$dontapply}apf.xmldb.disableRDB=o,i&&apf.console.error(this.logprefix+i.message)},this.xmlToXpath=apf.xmlToXpath,this.xpathToXml=apf.xpathToXml,this.addEventListener("DOMNodeInsertedIntoDocument",function(e){}),this.addEventListener("DOMNodeRemovedFromDocument",function(e){for(var t=0,n=this.$sessions.length;t<n;++t)this.endSession(this.$sessions[t].uri)})}.call(apf.remote.prototype=new apf.AmlElement),apf.aml.setElement("remote",apf.remote),apf.rpc=function(e,t){this.$init(t||"rpc",apf.NODE_HIDDEN,e),this.supportMulticall||(this.multicall=!1),this.stack={},this.urls={},this.$methods={}},function(){function e(e){var t,n;if(typeof e.callback=="string"){t=e.callback.split("."),n=self[t.shift()];while(n&&t.length)n=n[t.shift()]}else n=e.callback;return n||apf.K}this.useHTTP=!0,this.namedArguments=!1,this["route-server"]=apf.host+"/cgi-bin/rpcproxy.cgi",this.autoroute=!1,this.$auth=!1,this.$booleanProperties.multicall=!0,this.$supportedProperties.push("protocol","type","multicall","http-method"),this.$propHandlers["route-server"]=function(e){this.autoroute=e?!0:!1},this.$propHandlers.protocol=function(e){if(!e)return;if(!apf[e])return;var t=this;$setTimeout(function(){t.implement(apf[e])})},this.$propHandlers.type=function(e){this.$useXml=typeof e=="string"&&e.toUpperCase()=="XML"},this.setCallback=function(e,t){this.$methods[e].callback=t},this.setUrl=function(e,t){this.$methods[e].setProperty("url",t)},this.$convertArgs=function(e,t){if(!this.namedArguments)return Array.prototype.slice.call(t);var n=this.$methods[e].names;if(!n||!n.length)return{};var r,i,s,o,u={};for(i=0,s=0,o=n.length;s<o;s++)e=n[s].name,r=n[s].value,r?r=apf.parseExpression(r):(r=t[i++],apf.isNot(r)&&n[s]["default"]&&(r=apf.parseExpression(n[s]["default"]))),r=apf.isTrue(n[s].encoded)?encodeURIComponent(r):r,u[e]=r;return u},this.call=function(t,n,r){function a(e,t,n){n.data=e,t!=apf.SUCCESS?i.call(o,null,t,n):o.isValid&&!o.isValid(n)?i.call(o,null,apf.ERROR,n):i.call(o,o.unserialize(n.data),t,n)}var i,s=this.$methods[t];typeof n[n.length-1]=="function"?(n=Array.prototype.slice.call(n),i=n.pop()):i=e(s),n=this.$convertArgs(t,n);if(this.multicall)return this.stack[this.url]||(this.stack[this.url]=this.getMulticallObject?this.getMulticallObject():[]),this.getSingleCall(t,n,this.stack[this.url]),!0;var o=this,u=r&&r.message?r.message:this.createMessage(s["method-name"]||t,n),f,l=apf.getAbsolutePath(this.baseurl||apf.config.baseurl,this.url),c=apf.extend({callback:a,async:s.async,userdata:s.userdata,nocache:this.nocache===!1?!1:!0,data:u,useXML:this.$useXml||s.type=="xml",caching:s.caching,ignoreOffline:s["ignore-offline"],withCredentials:s.withCredentials===!1?!1:!0},r);if(s.auth&&this.$auth){if(!(f=this.$auth.$credentials))return this.$auth.authRequired(function(){f=o.$auth.$credentials,c.username=f.username,c.password=f.password,o.$get(l,c)});c.username=f.username,c.password=f.password}return this.$get(l,c)},this.purge=function(e,t,n,r){var i=this.createMessage("multicall",[this.stack[this.url]]),s=apf.getAbsolutePath(this.baseurl||apf.config.baseurl,this.url);if(r){for(var o=[],u=0;u<r.length;u++)o.push(encodeURIComponent(r[u][0])+"="+encodeURIComponent(r[u][1]||""));s=s+(s.match(/\?/)?"&":"?")+o.join("&")}var a=this.$get(s,{callback:e,async:n,userdata:t,nocache:!0,data:i,useXML:this.$useXml});this.stack[this.url]=this.getMulticallObject?this.getMulticallObject():[]},this.revert=function(e){this.stack[e.url]=this.getMulticallObject?this.getMulticallObject():[]},this.getStackLength=function(){return this.stack[this.url]?this.stack[this.url].length:0},this.$addMethod=function(e){if(e.localName!="method")return!1;var t=e.name,n=e.receive||this.receive,r=0,i=e.childNodes.length,s;this[t]=function(){return this.call(t,arguments)},n&&(e.callback=n),this.$methods[t]=e,e.names||(e.names=[]);for(;r<i;r++)s=e.childNodes[r],(s.localName=="param"||s.localName=="variable")&&e.names.push(s);return!0},this.$removeMethod=function(e){var t=e.name;delete this[t],delete this.$methods[t]},this.$setAuth=function(e){this.$auth=e},this.exec=function(e,t,n,r){r||(r={}),r.multicall&&(this.forceMulticall=!0);var i=this.$methods[e];r.userdata&&(i.userdata=r.userdata),this.multicall||(i.callback=n);var s=this.call(e,t,r);if(this.multicall)return this.purge(n,"&@^%!@");if(r.multicall)return this.forceMulticall=!1,this;!this.multicall&&!i.async&&n&&n(s,apf.SUCCESS,{tpModule:this})}}.call(apf.rpc.prototype=new apf.Teleport),apf.config.$inheritProperties.baseurl=1,apf.aml.setElement("rpc",apf.rpc),apf.script=function(){this.$init("script",apf.NODE_HIDDEN)},function(){this.$propHandlers.src=function(e){this.type||(this.type=this.getAttribute("type"));if(!this.type||this.type=="text/javascript")apf.isOpera?$setTimeout(function(){apf.window.loadCodeFile(apf.hostPath+e)},1e3):apf.window.loadCodeFile(apf.getAbsolutePath(apf.hostPath,e));else{var t=this;apf.ajax(e,{callback:function(n,r,i){if(r!=apf.SUCCESS)return apf.console.warn("Could not load script "+e);t.$execute(n)}})}},this.$execute=function(e,t){if(!this.type||this.type=="text/javascript")apf.jsexec(e);else if(this.type.indexOf("livemarkup")>-1||this.type.indexOf("lm")>-1){var n=apf.lm.compile(e,{event:!0,parsecode:!0,funcglobal:!0,nostring:!0});n(t||{})}},this.addEventListener("DOMNodeInserted",function(e){(e.currentTarget.nodeType==3||e.currentTarget.nodeType==4)&&this.$execute(e.currentTarget.nodeValue,apf.isIE&&window.event)}),this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var t=this.childNodes,n=[];for(var r=0,i=t.length;r<i;r++)n[n.length]=t[r].nodeValue;var s=n.join("\n");this.$execute(s)})}.call(apf.script.prototype=new apf.AmlElement),apf.aml.setElement("script",apf.script),apf.scrollbar=function(e,t){this.$init(t||"scrollbar",apf.NODE_VISIBLE,e)},function(){this.realtime=!0,this.visible=!1,this.overflow="scroll",this.position=0,this.$visible=!0,this.$scrollSizeValue=0,this.$stepValue=.03,this.$bigStepValue=.1,this.$timer=null,this.$scrollSizeWait,this.$slideMaxSize,this.$booleanProperties=["showonscroll"],this.addEventListener("focus",function(){this.$viewport.focus()}),this.$propHandlers.showonscroll=function(e){clearTimeout(this.$hideOnScrollTimer),e?this.$ext.style.display="none":(this.$ext.style.display="block",this.show())},this.$propHandlers.overflow=function(e){if(this.showonscroll)return;e=="auto"?(this.$ext.style.display="none",this.$resize()):e=="scroll"&&this.setProperty("visible",!0)},this.$propHandlers["for"]=function(e){if(e){var t=typeof e=="string"?self[e]:e;if(!t||!t.$amlLoaded){var n=this;apf.queue.add("scrollbar"+this.$uniqueId,function(){if(!t){t=typeof e=="string"?self[e]:e;if(!t)throw new Error(apf.formatErrorString(0,n,"Attaching scrollbar to element","Could not find element to attach scrollbar to: "+e))}n.attach(t)})}else this.attach(t)}},this.addEventListener("prop.visible",function(e){this.$updating||(this.$visible=e.value)}),this.attach=function(e){e.nodeFunc?e.hasFeature(apf.__VIRTUALVIEWPORT__)?e=e.$viewport:e=new apf.ViewPortAml(e):e.style&&(e=new apf.ViewPortHtml(e)),this.$attach(e)},this.$attach=function(e){if(!e)return apf.console.warn("Scrollbar could not connect to viewport");var t=this;return this.$viewport=e,this.$viewport.scrollbar!=this&&this.$viewport.setScrollbar(this,function(n){if(t.$viewport!=e)return;t.$update(),t.showonscroll&&(t.scrolling=!0,clearTimeout(t.$hideOnScrollTimer),t.$hideOnScrollControl&&t.$hideOnScrollControl.stop(),apf.setOpacity(t.$ext,1),t.visible?t.$ext.style.display="block":t.show(),t.$update(),t.$hideOnScrollTimer=t.animHideScrollbar(500,function(){t.scrolling=!1}))}),this.$recalc(),this.$update(),this},this.$resize=function(){if(!this.$viewport||!this.$viewport.isVisible())return;this.$recalc(),this.$update();if(!this.$viewport.virtual)return;this.setScrollPosition(this.position,!0)},this.$recalc=function(){this.$viewheight=this.$viewport.getHeight(),this.$scrollSizeheight=this.$viewheight,this.$scrollSizeWait=0,this.$stepValue=this.$viewheight/this.$scrollSizeheight/20,this.$bigStepValue=this.$stepValue*3,this.$slideMaxSize=this.$caret.parentNode[this.$offsetSize]-(this.$btnDown?this.$btnDown[this.$offsetSize]:0)-(this.$btnUp?this.$btnUp[this.$offsetSize]:0)},this.$update=function(){if(this.showonscroll&&!this.$ext.offsetHeight)return;var e=this.$viewport;if(!e||!e.isVisible())return;this.$updating=!0;var t=e.getHeight(),n=e.getScrollHeight();if(t>=n)this.overflow=="scroll"?(this.$caret.style.display="none",this.disable()):this.visible&&this.hide();else{this.overflow=="scroll"?(this.$caret.style.display="block",this.enable()):this.visible||this.show(),this.$slideMaxSize||this.$recalc();if(!this.$slideMaxSize)return;this.$caret.style[this.$size]=Math.max(5,t/n*this.$slideMaxSize)-apf[this.$getDiff](this.$caret)+"px",this.position=e.getScrollTop()/(n-t);var r=this.$btnUp?this.$btnUp[this.$offsetSize]:0;this.$caret.style[this.$pos]=r+(apf[this.$getInner](this.$caret.parentNode)-r*2-this.$caret[this.$offsetSize])*this.position+"px"}this.$updating=!1},this.setScrollPosition=function(e,t){if(e==NaN)return;e>1&&(e=1),e<0&&(e=0),this.position=e;var n=this.$btnUp?this.$btnUp[this.$offsetSize]:0;this.$caret.style[this.$pos]=n+(apf[this.$getInner](this.$caret.parentNode)-n*2-this.$caret[this.$offsetSize])*this.position+"px";if(this.animating||!this.$visible)return;var r=this.$viewport,i=(r.getScrollHeight()-r.getHeight())*e;r.setScrollTop(i,t)},this.animShowScrollbar=function(e,t){var n=this;return setTimeout(function(){n.$ext.style.display="block";if(n.$showOnScrollControl&&n.$showOnScrollControl.state==apf.tween.RUNNING)return;n.$hideOnScrollControl&&n.$hideOnScrollControl.stop(),apf.tween.single(n.$ext,{control:n.$hideOnScrollControl={},type:"fade",from:0,to:1,onfinish:function(){t&&t()}})},e)},this.animHideScrollbar=function(e,t){var n=this;return setTimeout(function(){if(n.$hideOnScrollControl&&n.$hideOnScrollControl.state==apf.tween.RUNNING)return;n.$showOnScrollControl&&n.$showOnScrollControl.stop(),apf.tween.single(n.$ext,{control:n.$hideOnScrollControl={},type:"fade",from:1,to:0,steps:20,onfinish:function(){n.$ext.style.display="none",apf.setOpacity(n.$ext,1),t&&t()}})},e)},this.scrollUp=function(e){if(e>this.$caret[this.$offsetPos])return this.$ext.onmouseup();this.setScrollPosition(this.position+this.$bigStepValue),this.$slideFast&&(this.$slideFast.style[this.$size]=Math.max(1,this.$caret[this.$offsetPos]-this.$btnUp[this.$offsetSize])+"px",this.$slideFast.style[this.$pos]=this.$btnUp[this.$offsetSize]+"px")},this.scrollDown=function(e){if(e<this.$caret[this.$offsetPos]+this.$caret[this.$offsetSize])return this.$ext.onmouseup();this.setScrollPosition(this.position+this.$bigStepValue),this.$slideFast&&(this.$slideFast.style[this.$pos]=this.$caret[this.$offsetPos]+this.$caret[this.$offsetSize]+"px",this.$slideFast.style[this.$size]=Math.max(1,apf[this.$getInner](this.$caret.parentNode)-this.$slideFast[this.$offsetPos]-this.$btnUp[this.$offsetSize])+"px")},this.$draw=function(){this.$getNewContext("main"),this.$ext=this.$getExternal(),this.$caret=this.$getLayoutNode("main","indicator",this.$ext),this.$slideFast=this.$getLayoutNode("main","slidefast",this.$ext),this.$btnUp=this.$getLayoutNode("main","btnup",this.$ext),this.$btnDown=this.$getLayoutNode("main","btndown",this.$ext),this.horizontal=apf.isTrue(this.$getOption("main","horizontal")),this.$windowSize=this.horizontal?"getWindowWidth":"getWindowHeight",this.$offsetSize=this.horizontal?"offsetWidth":"offsetHeight",this.$size=this.horizontal?"width":"height",this.$offsetPos=this.horizontal?"offsetLeft":"offsetTop",this.$pos=this.horizontal?"left":"top",this.$scrollSize=this.horizontal?"scrollWidth":"scrollHeight",this.$scrollPos=this.horizontal?"scrollLeft":"scrollTop",this.$getDiff=this.horizontal?"getWidthDiff":"getHeightDiff",this.$getInner=this.horizontal?"getHtmlInnerWidth":"getHtmlInnerHeight",this.$eventDir=this.horizontal?apf.isIE||apf.isWebkit?"offsetX":"layerX":apf.isIE||apf.isWebkit?"offsetY":"layerY",this.$clientDir=this.horizontal?"clientX":"clientY",this.$posIndex=this.horizontal?0:1,this.$startPos=!1,this.$caret.ondragstart=function(){return!1};var e=this;this.$btnUp&&(this.$btnUp.onmousedown=function(t){if(e.disabled)return;t||(t=event),this.className="btnup btnupdown",clearTimeout(e.$timer),e.setScrollPosition(e.position-e.$stepValue),apf.stopPropagation(t),e.$timer=$setTimeout(function(){e.$timer=setInterval(function(){e.setScrollPosition(e.position-e.$stepValue)},20)},300)},this.$btnUp.onmouseout=this.$btnUp.onmouseup=function(){if(e.disabled)return;this.className="btnup",clearInterval(e.$timer)}),this.$btnDown&&(this.$btnDown.onmousedown=function(t){if(e.disabled)return;t||(t=event),this.className="btndown btndowndown",clearTimeout(e.$timer),e.setScrollPosition(e.position+e.$stepValue),apf.stopPropagation(t),e.$timer=$setTimeout(function(){e.$timer=setInterval(function(){e.setScrollPosition(e.position+e.$stepValue)},20)},300)},this.$btnDown.onmouseout=this.$btnDown.onmouseup=function(){if(e.disabled)return;this.className="btndown",clearInterval(e.$timer)}),this.$caret.onmousedown=function(t){if(e.disabled)return;t||(t=event);var n=t.target||t.srcElement,r=n!=this?[n.offsetLeft,n.offsetTop]:[0,0],i=t[e.$eventDir]+r[e.$posIndex];return e.$startPos=i+(e.$btnUp?e.$btnUp[e.$offsetSize]:0),this.setCapture&&this.setCapture(),e.$setStyleClass(e.$ext,e.$baseCSSname+"Down"),e.dispatchEvent("mousedown",{}),e.dragging=!0,document.onmousemove=function(t){t||(t=event);if(e.$startPos===!1)return!1;var n=e.$btnUp?e.$btnUp[e.$offsetSize]:0,r=n+(t[e.$clientDir]-e.$startPos+(apf.isWebkit?document.body:document.documentElement)[e.$scrollPos]-apf.getAbsolutePosition(e.$caret.parentNode)[e.horizontal?0:1]),i=n;r<i&&(r=i);var s=apf[e.$getInner](e.$caret.parentNode)-n-e.$caret[e.$offsetSize];r>s&&(r=s),e.setScrollPosition((r-i)/(s-i))},document.onmouseup=function(){e.$startPos=!1,e.realtime||e.setScrollPosition(e.position),this.releaseCapture&&this.releaseCapture(),e.$setStyleClass(e.$ext,"",[e.$baseCSSname+"Down"]),e.dispatchEvent("mouseup",{}),e.dragging=!1,document.onmouseup=document.onmousemove=null},apf.stopPropagation(t),!1},this.$ext.onmousedown=function(t){if(e.disabled)return;t||(t=event),clearInterval(e.$timer);var n;t[e.$eventDir]>e.$caret[e.$offsetPos]+e.$caret[e.$offsetSize]?(e.setScrollPosition(e.position+e.$bigStepValue),e.$slideFast&&(e.$slideFast.style.display="block",e.$slideFast.style[e.$pos]=e.$caret[e.$offsetPos]+e.$caret[e.$offsetSize]+"px",e.$slideFast.style[e.$size]=apf[e.$getInner](e.$caret.parentNode)-e.$slideFast[e.$offsetPos]-e.$btnUp[e.$offsetSize]+"px"),n=t[e.$eventDir],e.$timer=$setTimeout(function(){e.$timer=setInterval(function(){e.scrollDown(n,null,null,!0)},20)},300)):t[e.$eventDir]<e.$caret[e.$offsetPos]&&(e.setScrollPosition(e.position-e.$bigStepValue),e.$slideFast&&(e.$slideFast.style.display="block",e.$slideFast.style[e.$pos]=e.$btnUp[e.$offsetSize]+"px",e.$slideFast.style[e.$size]=e.$caret[e.$offsetPos]-e.$btnUp[e.$offsetSize]+"px"),n=t[e.$eventDir],e.$timer=$setTimeout(function(){e.$timer=setInterval(function(){e.scrollUp(n,null,null,!0)},20)},300))},this.$ext.onmouseup=function(){if(e.disabled)return;clearInterval(e.$timer),e.realtime||e.setScrollPosition(e.position),e.$slideFast&&(e.$slideFast.style.display="none")},this.$ext.onmouseover=function(t){e.dispatchEvent("mouseover",{htmlEvent:t||event})},this.$ext.onmouseout=function(t){e.dispatchEvent("mouseout",{htmlEvent:t||event})}},this.$loadAml=function(){this.overflow=="scroll"?this.disable():(this.$caret.style.display="block",this.enable()),this.addEventListener("resize",this.$resize),this.$update()}}.call(apf.scrollbar.prototype=new apf.Presentation),apf.aml.setElement("scrollbar",apf.scrollbar),apf.GuiElement.propHandlers.scrollbar=function(e){if(this.$sharedScrollbar==undefined){var t=e.split(" "),n=t[0],r=t[1]||0,i=t[2]||0,s=t[3]||0,o=this;this.$sharedScrollbar=self[n]||!1;function u(){return l&&apf.isTrue(l.getAttribute("showonscroll"))}var a=this.$container||this.$int||this.$ext,f,l,c;apf.addListener(a,"mousemove",c=function(e){o.$sharedScrollbar||(o.$sharedScrollbar=self[n]),l=o.$sharedScrollbar,l.$addedMouseOut||(apf.addListener(l.$ext,"mouseout",function(e){if(!u())return;apf.findHost(e.fromElement)==l&&apf.findHost(e.toElement)!=l&&(clearTimeout(f),p())}),l.$addedMouseOut=!0);if(!l.$viewport||l.$viewport.amlNode!=o){var t=o.$ext==a?o.$ext.parentNode:o.$ext;t.appendChild(l.$ext),apf.getStyle(t,"position")=="static"&&(t.style.position="relative"),l.setProperty("showonscroll",!0),l.$ext.style.display="block",l.setAttribute("top",r),l.setAttribute("right",i),l.setAttribute("bottom",s),l.setAttribute("for",o),l.$ext.style.display="none",l.dragging=!1,l.$hideOnScrollControl&&l.$hideOnScrollControl.stop()}if(u()&&e){clearTimeout(f);var c=apf.getAbsolutePosition(a),d=a.offsetWidth-(e.clientX-c[0]),v=d<25&&d>i;v&&l.$ext.style.display=="none"||!v&&l.$ext.style.display=="block"?v?h():p():v||(l.showonscroll=!0)}}),this.$sharedScrollbarMove=c;function h(){l.setProperty("showonscroll",!1),l.$ext.style.display="none",f=l.animShowScrollbar(200)}function p(e){if(l.scrolling)return;l.dragging?apf.addListener(document,"mouseup",function(e){var t=apf.findHost(e.target);if(t==l)return;t==o?c(e):p(),apf.removeListener(document,"mouseup",arguments.callee)}):f=l.animHideScrollbar(e||200,function(){l.setProperty("showonscroll",!0)})}apf.addListener(a,"mouseout",function(e){if(!u())return;var t=apf.findHost(e.toElement||e.rangeParent);t!=l&&t!=sbShared.$viewport.amlNode&&(clearTimeout(f),p())})}},apf.ViewPortAml=function(e){this.amlNode=e;var t=this,n=function(){t.scrollbar&&t.scrollbar.$update()};e.addEventListener("resize",n),e.hasFeature(apf.__DATABINDING__)&&(e.addEventListener("afterload",n),e.addEventListener("xmlupdate",n)),e.addEventListener("prop.value",n),e.$isTreeArch&&(e.addEventListener("collapse",n),e.addEventListener("expand",n)),e.addEventListener("mousescroll",function(e){t.$mousescroll(e)});var r=t.$getHtmlHost();apf.addListener(r,"scroll",function(){if(t.scrollbar.animating||!t.scrollbar.$visible)return;t.setScrollTop(this.scrollTop)});if("HTML|BODY".indexOf(r.tagName)>-1){var i=r.scrollHeight;setInterval(function(){i!=r.scrollHeight&&(i=r.scrollHeight,t.scrollbar.$recalc(),t.scrollbar.$update())},100)}},function(){this.setScrollbar=function(e,t){this.scrollbar=e,this.amlNode.addEventListener("scroll",t)},this.isVisible=function(){var e=this.$getHtmlHost();return e.offsetHeight||e.offsetWidth?!0:!1},this.focus=function(){this.amlNode.focus&&this.amlNode.$isWindowContainer!==!0&&this.amlNode.focus()},this.getScrollTop=function(){var e=this.$getHtmlHost();return e.scrollTop},this.getScrollLeft=function(){var e=this.$getHtmlHost();return e.scrollLeft},this.getScrollHeight=function(){var e=this.$getHtmlHost();return apf.isIE&&e.lastChild?e.lastChild.offsetTop+e.lastChild.offsetHeight+apf.getBox(apf.getStyle(e,"padding"))[2]+(parseInt(apf.getStyle(e,"marginBottom"))||0):e.scrollHeight},this.getScrollWidth=function(){var e=this.$getHtmlHost();return apf.isIE&&e.lastChild?e.lastChild.offsetLeft+e.lastChild.offsetWidth+apf.getBox(apf.getStyle(e,"padding"))[1]+(parseInt(apf.getStyle(e,"marginRight"))||0):e.scrollWidth},this.getHeight=function(){var e=this.$getHtmlHost();return e.tagName=="HTML"||e.tagName=="BODY"?apf.getWindowHeight():apf.getHtmlInnerHeight(e)},this.getWidth=function(){var e=this.$getHtmlHost();return e.tagName=="HTML"||e.tagName=="BODY"?apf.getWindowHeight():apf.getHtmlInnerWidth(e)},this.setScrollTop=function(e,t,n){var r=this.$getHtmlHost();r.scrollTop=e,t||this.amlNode.dispatchEvent("scroll",{direction:"vertical",byUser:n,viewport:this,scrollbar:this.scrollbar})},this.setScrollLeft=function(e,t,n){var r=this.$getHtmlHost();r.scrollLeft=e,t||this.amlNode.dispatchEvent("scroll",{direction:"horizontal",byUser:n,viewport:this,scrollbar:this.scrollbar})},this.$getHtmlHost=function(){var e=this.amlNode.$int||this.amlNode.$container;return e.tagName=="BODY"||e.tagName=="HTML"?apf.isSafari||apf.isChrome?document.body:e.parentNode:e},this.$mousescroll=function(e){if(this.scrollbar.horizontal)return;if(e.returnValue===!1)return;var t=this.$getHtmlHost(),n=this.scrollbar,r=this.getScrollHeight()-this.getHeight();if(r){if(t[n.$scrollPos]==0&&e.delta>0){if(this.$lastScrollState===0)return;setTimeout(function(){this.$lastScrollState=0},300)}else if(t[n.$scrollPos]==this.getScrollHeight()-t[n.$offsetSize]&&e.delta<0){if(this.$lastScrollState===1)return;setTimeout(function(){this.$lastScrollState=1},300)}delete this.$lastScrollState,this.setScrollTop(this.getScrollTop()+ -1*e.delta*Math.min(45,this.getHeight()/10),!1,!0),e.preventDefault()}}}.call(apf.ViewPortAml.prototype),apf.ViewPortHtml=function(e){this.$getHtmlHost=function(){return e};var t=this;e=e.tagName=="BODY"||e.tagName=="HTML"?apf.isSafari||apf.isChrome?document.body:e.parentNode:e,apf.addEventListener("mousescroll",function(n){(e==n.target||e==document.documentElement&&n.target==document.body)&&t.$mousescroll(n)}),apf.addListener(e,"scroll",function(){t.setScrollTop(this.scrollTop)});if("HTML|BODY".indexOf(e.tagName)>-1){var n=e.scrollHeight;setInterval(function(){n!=e.scrollHeight&&(n=e.scrollHeight,t.scrollbar.$recalc(),t.scrollbar.$update())},100)}this.amlNode=(new apf.Class).$init()},apf.ViewPortHtml.prototype=apf.ViewPortAml.prototype,apf.skin=function(e,t){this.$init(t||"skin",apf.NODE_HIDDEN,e)},apf.aml.setElement("skin",apf.skin),function(){function e(e){if(!e.ownerDocument.documentElement)return!1;var t=e.ownerDocument.documentElement.attributes;for(var n=!1,r=0;r<t.length;r++)if(t[r].nodeValue==apf.ns.aml){n=!0;break}return n}function t(e){var t=this.ownerDocument.$domParser;apf.skins.$first||(apf.skins.$first=this);var n=this.attributes.getNamedItem("defer");(!n||!apf.isTrue(n.nodeValue))&&t.$pauseParsing.apply(t,this.$parseContext=t.$parseContext||[this.ownerDocument.documentElement]),r.call(this,e)}function n(e){e&&apf.skins.Init(e,this,this.$path);if(!this.defer){var t=this.ownerDocument.$domParser;t.$continueParsing(this.$parseContext[0])}}function r(e){var t=this;apf.getData(e,{callback:function(r,i,s){if(i!=apf.SUCCESS){var o=new Error(apf.formatErrorString(1007,t,"Loading skin file","Could not load skin file '"+(e||t.src)+"'\nReason: "+s.message));if(s.tpModule.retryTimeout(s,i,null,o)===!0)return!0;throw o}r=r.replace(/\<\!DOCTYPE[^>]*>/,"").replace(/^[\r\n\s]*/,"").replace(/xmlns\=\"[^"]*\"/g,"");if(!r)throw new Error(apf.formatErrorString(0,t,"Loading skin","Empty skin file. Maybe the file does not exist?",t));var u=apf.getXml(r);if(!u)throw new Error(apf.formatErrorString(0,t,"Loading skin","Could not parse skin. Maybe the file does not exist?",t));u.setAttribute("filename",s.url),n.call(t,u)},async:!0,ignoreOffline:!0})}this.$parsePrio="002",this.$includesRemaining=0,this.$propHandlers.src=function(e){if(e.trim().charAt(0)=="<"){apf.skins.Init(apf.getXml(e),this,this.$path);return}this.$path=apf.getAbsolutePath(apf.hostPath,e),t.call(this,this.$path)},this.$propHandlers.name=function(e){!this.src&&!this.attributes.getNamedItem("src")&&(this.$path=apf.getAbsolutePath(apf.hostPath,e)+"/index.xml",t.call(this,this.$path))},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){if(this.src||this.name)return;apf.skins.Init(this.$aml||this)})}.call(apf.skin.prototype=new apf.AmlElement),apf.smartbinding=function(e,t){this.$init(t||"smartbinding",apf.NODE_HIDDEN,e),this.$bindNodes={}},function(){this.$supportedProperties=["bindings","actions","model"],this.$handlePropSet=function(e,t,n){switch(e){case"model":typeof t=="string"&&(t=apf.nameserver.get("model",t)),this.model=apf.nameserver.register("model",this.name,t);var r;for(var i in this.$bindNodes)r=this.$bindNodes[i],this.model.unregister(r),this.model.register(r,this.$modelXpath[r.getHost?r.getHost().$uniqueId:r.$uniqueId]||this.modelBaseXpath);break;case"bindings":this.$bindings&&this.remove(this.$bindings),this.$bindings=typeof t=="object"?t:apf.nameserver.lookup("bindings",t),this.add(this.$bindings);break;case"actions":this.$actions&&this.remove(this.$actions),this.$actions=typeof t=="object"?t:apf.nameserver.lookup("actions",t),this.add(this.$actions)}this[e]=t},this.add=function(e){for(var t in this.$bindNodes)e.register(this.$bindNodes[t]);this["$"+e.localName]=e},this.remove=function(e){for(var t in this.$bindNodes)e.unregister(this.$bindNodes[t])},this.register=function(e){this.$bindNodes[e.$uniqueId]=e,this.$bindings&&this.$bindings.register(e),this.$actions&&this.$actions.register(e),this.$model&&this.$model.register(e)},this.unregister=function(e){this.$bindNodes[e.$uniqueId]=null,delete this.$bindNodes[e.$uniqueId],this.$bindings&&this.$bindings.unregister(e),this.$actions&&this.$actions.unregister(e),this.$model&&this.$model.unregister(e)},this.load=function(e){(new apf.model).register(this).load(e)},this.clear=function(e){},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.parentNode.hasFeature(apf.__DATABINDING__)&&this.register(this.parentNode)})}.call(apf.smartbinding.prototype=new apf.AmlElement),apf.aml.setElement("smartbinding",apf.smartbinding),apf.source=function(e,t){this.$init(t||"source",apf.NODE_HIDDEN,e)},function(){this.$supportedProperties.push("src","type"),this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.parentNode.$addSource&&this.parentNode.$addSource(this)})}.call(apf.source.prototype=new apf.AmlElement),apf.aml.setElement("source",apf.source),apf.spinner=function(e,t){this.$init(t||"spinner",apf.NODE_VISIBLE,e),this.max=64e3,this.min=-64e3,this.focused=!1,this.value=0,this.realtime=!1},function(){this.implement(apf.DataAction),this.$supportedProperties.push("width","value","max","min","caption","realtime"),this.$booleanProperties.realtime=!0,this.$propHandlers.value=function(e){e=parseInt(e)||0,this.value=this.oInput.value=e>this.max?this.max:e<this.min?this.min:e},this.$propHandlers.min=function(e){if(!(e=parseInt(e)))return;this.min=e,e>this.value&&this.change(e)},this.$propHandlers.max=function(e){if(!(e=parseInt(e)))return;this.max=e,e<this.value&&this.change(e)},this.setValue=function(e){this.setProperty("value",e,!1,!0)},this.getValue=function(){return this.value},this.increment=function(){this.change(parseInt(this.oInput.value)+1)},this.decrement=function(){this.change(parseInt(this.oInput.value)-1)},this.$enable=function(){this.oInput.disabled=!1,this.$setStyleClass(this.oInput,"",["inputDisabled"])},this.$disable=function(){this.oInput.disabled=!0,this.$setStyleClass(this.oInput,"inputDisabled")},this.$focus=function(e){if(!this.$ext||this.focused)return;this.focused=!0,this.$setStyleClass(this.oInput,"focus"),this.$setStyleClass(this.$buttonPlus,"plusFocus"),this.$setStyleClass(this.$buttonMinus,"minusFocus"),this.oLeft&&this.$setStyleClass(this.oLeft,"leftFocus")},this.$blur=function(e){if(!this.$ext&&!this.focused)return;this.$setStyleClass(this.oInput,"",["focus"]),this.$setStyleClass(this.$buttonPlus,"",["plusFocus"]),this.$setStyleClass(this.$buttonMinus,"",["minusFocus"]),this.oLeft&&this.$setStyleClass(this.oLeft,"".leftFocus),this.setValue(this.oInput.value),this.focused=!1},this.addEventListener("keydown",function(e){var t=e.keyCode,n=t<8||t>9&&t<37&&t!==12||t>40&&t<46||t>46&&t<48||t>57&&t<96||t>105&&t<109&&t!==107||t>109&&t!==189;if(n)return!1;switch(t){case 38:this.increment();break;case 40:this.decrement()}},!0),this.addEventListener("keyup",function(e){},!0),this.increment=function(){this.change(parseInt(this.oInput.value)+1)},this.decrement=function(){this.change(parseInt(this.oInput.value)-1)},this.$draw=function(){var e=this;this.$ext=this.$getExternal(null,null,function(e){e.setAttribute("onmousedown",'if (!this.host.disabled)                     this.host.dispatchEvent("mousedown", {htmlEvent : event});'),e.setAttribute("onmouseup",'if (!this.host.disabled)                     this.host.dispatchEvent("mouseup", {htmlEvent : event});'),e.setAttribute("onclick",'if (!this.host.disabled)                     this.host.dispatchEvent("click", {htmlEvent : event});')}),this.$int=this.$getLayoutNode("main","container",this.$ext),this.oInput=this.$getLayoutNode("main","input",this.$ext),this.$buttonPlus=this.$getLayoutNode("main","buttonplus",this.$ext),this.$buttonMinus=this.$getLayoutNode("main","buttonminus",this.$ext),this.oLeft=this.$getLayoutNode("main","left",this.$ext);var t,n=!document.compatMode||document.compatMode=="CSS1Compat"?document.html:document.body,r=0;this.oInput.value=this.value,this.oInput.onmousedown=function(r){function p(e){e=e||window.event;var t=e.pageX||e.clientX+(n?n.scrollLeft:0),r=e.pageY||e.clientY+(n?n.scrollTop:0),i=u-r;if(r>a&&t>f&&r<a+c&&t<f+l){o=0;return}o=Math.pow(Math.min(200,Math.abs(i))/10,2)/10,i<0&&(o=-1*o)}if(e.disabled)return;r=r||window.event,clearTimeout(t);var i,s=parseInt(this.value)||0,o=0,u=r.clientY,a=e.$int.offsetTop,f=e.$int.offsetLeft,l=e.$int.offsetWidth,c=e.$int.offsetHeight,h=function(){clearTimeout(t),t=$setTimeout(h,10);if(!o)return;i=s+o,i<=e.max&&i>=e.min?(s+=o,s=Math.round(s),e.oInput.value=s,e.realtime&&e.change(s)):e.oInput.value=o<0?e.min:e.max};h(),document.onmousemove=p,document.onmouseup=function(n){clearTimeout(t);var r=parseInt(e.oInput.value);r!=e.value&&e.change(r),document.onmousemove=document.onmouseup=null}};var i=!1;this.$buttonPlus.onmousedown=function(n){if(e.disabled)return;n=n||window.event,i=!0;var s=(parseInt(e.oInput.value)||0)+1,o=function(){clearTimeout(t),t=$setTimeout(o,50),r++,s+=Math.pow(Math.min(200,r)/10,2)/10,s=Math.round(s),e.oInput.value=s<=e.max?s:e.max,e.realtime&&e.change(s<=e.max?s:e.max)};apf.setStyleClass(this,"plusDown",["plusHover"]),o()},this.$buttonMinus.onmousedown=function(n){if(e.disabled)return;n=n||window.event,i=!0;var s=(parseInt(e.oInput.value)||0)-1,o=function(){clearTimeout(t),t=$setTimeout(o,50),r++,s-=Math.pow(Math.min(200,r)/10,2)/10,s=Math.round(s),e.oInput.value=s>=e.min?s:e.min,e.realtime&&e.change(s>=e.min?s:e.min)};apf.setStyleClass(this,"minusDown",["minusHover"]),o()},this.$buttonMinus.onmouseout=function(n){if(e.disabled)return;clearTimeout(t),r=0;var i=parseInt(e.oInput.value);i!=e.value&&e.change(i),apf.setStyleClass(this,"",["minusHover"]),e.focused||e.$blur(n)},this.$buttonPlus.onmouseout=function(n){if(e.disabled)return;clearTimeout(t),r=0;var i=parseInt(e.oInput.value);i!=e.value&&e.change(i),apf.setStyleClass(this,"",["plusHover"]),e.focused||e.$blur(n)},this.$buttonMinus.onmouseover=function(t){if(e.disabled)return;apf.setStyleClass(this,"minusHover")},this.$buttonPlus.onmouseover=function(t){if(e.disabled)return;apf.setStyleClass(this,"plusHover")},this.$buttonPlus.onmouseup=function(n){if(e.disabled)return;n=n||event,apf.cancelBubble(n,this),apf.setStyleClass(this,"plusHover",["plusDown"]),clearTimeout(t),r=0;var s=parseInt(e.oInput.value);i?i=!1:(s++,e.oInput.value=s),s!=e.value&&e.change(s)},this.$buttonMinus.onmouseup=function(n){if(e.disabled)return;n=n||event,apf.cancelBubble(n,this),apf.setStyleClass(this,"minusHover",["minusDown"]),clearTimeout(t),r=0;var s=parseInt(e.oInput.value);i?i=!1:(s--,e.oInput.value=s),s!=e.value&&e.change(s)},this.oInput.onselectstart=function(e){e=e||event,e.cancelBubble=!0},this.oInput.host=this},this.$destroy=function(){this.oInput.onkeypress=this.oInput.onmousedown=this.oInput.onkeydown=this.oInput.onkeyup=this.oInput.onselectstart=this.$buttonPlus.onmouseover=this.$buttonPlus.onmouseout=this.$buttonPlus.onmousedown=this.$buttonPlus.onmouseup=this.$buttonMinus.onmouseover=this.$buttonMinus.onmouseout=this.$buttonMinus.onmousedown=this.$buttonMinus.onmouseup=null}}.call(apf.spinner.prototype=new apf.StandardBinding),apf.aml.setElement("spinner",apf.spinner),apf.hsplitbox=function(e,t){this.$init(t||"hsplitbox",apf.NODE_VISIBLE,e)},apf.vsplitbox=function(e,t){this.$init(t||"vsplitbox",apf.NODE_VISIBLE,e)},function(){function e(e){this.parentNode.$handle&&(!e.value||this.parentNode.childNodes.length<3?this.parentNode.$handle.hide():this.parentNode.$handle.show()),e.value&&!this.parentNode.visible&&this.parentNode.show(),this.parentNode.$propHandlers.edge.call(this.parentNode,this.parentNode.edge,!0),apf.layout.forceResize(this.parentNode.$int),this.parentNode.$propHandlers.padding.call(this.parentNode,this.parentNode.padding)}this.minwidth=0,this.minheight=0,this.padding=0,this.edge=0,this.$edge=[0,0,0,0],this.$focussable=!1,this.$useLateDom=!0,this.$box=!0,this.$layout=!0,this.$booleanProperties.splitter=!0,this.$supportedProperties.push("padding","edge","splitter"),this.$propHandlers.padding=function(e){this.padding=parseInt(e);if(!this.$amlLoaded)return;this.$handle&&(this.$handle.$ext.style[this.$vbox?"height":"width"]=e+"px");var t=this.getFirstChild(),n=this.getSecondChild();this.$vbox?this.flexChild2?t.height?n.$ext.style.marginTop=t.visible?this.$edge[0]+e+apf.getHeightDiff(t.$ext)+"px":0:t.$ext.style.marginBottom=n.visible?this.$edge[2]+e+apf.getHeightDiff(n.$ext)+"px":0:this.fixedChild&&this.fixedChild.visible&&(this.flexChild1==t?this.fixedChild.visible&&(this.flexChild1.$ext.style.bottom=parseInt(this.fixedChild.height)+e+this.$edge[2]+"px"):this.flexChild1==n&&(this.flexChild1.$ext.style.top=parseInt(this.fixedChild.height)+e+this.$edge[2]+"px")):this.flexChild2?t.width?n.$ext.style.marginLeft=this.$edge[3]+e+apf.getWidthDiff(t.$ext)+"px":t.$ext.style.marginRight=this.$edge[1]+e+apf.getWidthDiff(n.$ext)+"px":this.fixedChild&&this.fixedChild.visible&&(this.flexChild1==t?this.flexChild1.$ext.style.right=parseInt(this.fixedChild.width)+e+this.$edge[1]+"px":this.flexChild1==n&&(this.flexChild1.$ext.style.left=parseInt(this.fixedChild.width)+e+this.$edge[3]+"px"))},this.$propHandlers.splitter=function(e){e?this.$handle?this.$handle.show():this.$handle=this.insertBefore(this.ownerDocument.createElementNS(apf.ns.aml,"splitter"),this.lastChild):this.$handle.hide()},this.$propHandlers.edge=function(e,t){this.$edge=apf.getBox(e);if(!this.$amlLoaded)return;var n=this.getFirstVisibleChild();if(!n)return this.hide(),!1;n.$ext.style.left=this.$edge[3]+n.$margin[3]+"px",n.$ext.style.top=this.$edge[0]+n.$margin[0]+"px",this.$vbox?n.$ext.style.right=this.$edge[1]+n.$margin[1]+"px":n.$ext.style.bottom=this.$edge[2]+n.$margin[2]+"px";var r=this.getSecondVisibleChild();if(r&&r.visible){r.$ext.style.right=this.$edge[1]+r.$margin[1]+"px",r.$ext.style.bottom=this.$edge[2]+r.$margin[2]+"px";if(this.$vbox){var i;r.$ext.style.left=this.$edge[3]+r.$margin[3]+"px",n.height?(i=String(n.height).indexOf("%")>-1,r.$ext.style.top=i?n.height:parseInt(n.height)+this.padding+this.$edge[0]+n.$margin[0]+"px",this.$handle&&(this.$handle.$ext.style.top=i?n.height:parseInt(n.height)+this.$edge[0]+"px",this.$handle.$ext.style.marginTop=i?this.padding+"px":"0")):(i=String(r.height).indexOf("%")>-1,r.$ext.style.top="",n.$ext.style.bottom=i?r.height:parseInt(r.height)+this.padding+this.$edge[2]+r.$margin[2]+"px",this.$handle&&(this.$handle.$ext.style.bottom=i?r.height:parseInt(r.height)+this.$edge[0]+"px",this.$handle.$ext.style.marginBottom=i?this.padding+"px":"0")),this.$handle&&(this.$handle.$ext.style.left=this.$edge[3]+"px",this.$handle.$ext.style.right=this.$edge[1]+"px")}else{r.$ext.style.top=this.$edge[0]+"px";if(n.width){var i=String(n.width).indexOf("%")>-1;r.$ext.style.left=i?n.width:parseInt(n.width)+this.padding+this.$edge[3]+n.$margin[3]+"px",this.$handle&&(this.$handle.$ext.style.left=i?n.width:parseInt(n.width)+this.$edge[3]+"px",this.$handle.$ext.style.marginLeft=i?this.padding+"px":"0")}else{var i=String(r.width).indexOf("%")>-1;r.$ext.style.left="",n.$ext.style.right=i?r.width:parseInt(r.width)+this.padding+this.$edge[1]+r.$margin[1]+"px",this.$handle&&(this.$handle.$ext.style.right=i?r.width:parseInt(r.width)+this.$edge[3]+"px",this.$handle.$ext.style.marginRight=i?this.padding+"px":"0")}this.$handle&&(this.$handle.$ext.style.top=this.$edge[0]+"px",this.$handle.$ext.style.bottom=this.$edge[2]+"px")}this.$handle&&(this.$handle.$ext.style.position="absolute")}else this.$vbox?(n.$ext.style.bottom=this.$edge[2]+n.$margin[2]+"px",n.$ext.style.height=""):(n.$ext.style.right=this.$edge[1]+n.$margin[1]+"px",n.$ext.style.width=""),this.$handle&&this.$handle.hide();if(t===!0){var s=this.$vbox?"height":"width";n.$propHandlers[s].call(n,n[s])}},this.getFirstChild=function(e){var t=e||this.firstChild;while(t&&t.$splitter)t=t.nextSibling;return t||!1},this.getSecondChild=function(){var e=this.getFirstChild();return e?e.nextSibling&&this.getFirstChild(e.nextSibling):!1},this.getFirstVisibleChild=function(e){var t=e||this.firstChild;while(t&&(!t.visible||t.$splitter))t=t.nextSibling;return t&&t.visible?t:!1},this.getSecondVisibleChild=function(){var e=this.getFirstVisibleChild();return e?e.nextSibling&&this.getFirstVisibleChild(e.nextSibling):!1};var t={width:function(e){this.$ext.style.width=apf.isNot(e)?"":parseFloat(e)==e?e-apf.getWidthDiff(this.$ext)+"px":e,this.$amlLoaded&&this.parentNode.$propHandlers.edge.call(this.parentNode,this.parentNode.edge)},height:function(e){this.$ext.style.height=apf.isNot(e)?"":parseFloat(e)==e?e-apf.getHeightDiff(this.$ext)+"px":e,this.$amlLoaded&&this.parentNode.$propHandlers.edge.call(this.parentNode,this.parentNode.edge)},margin:function(e){this.$margin=apf.getBox(e),this.$amlLoaded&&this.parentNode.$propHandlers.edge.call(this.parentNode,this.parentNode.edge)}};this.register=function(n,r){if(n.$splitter||n.nodeFunc!=apf.NODE_VISIBLE)return;n.$margin=[0,0,0,0],n.$propHandlers.left=n.$propHandlers.top=n.$propHandlers.right=n.$propHandlers.bottom=apf.K;for(var i in t)n.$propHandlers[i]=t[i];if(!this.flexChild1||this.flexChild1!=n)this.$vbox?!n.height||String(n.height).indexOf("%")>-1?this[this.flexChild1?"flexChild2":"flexChild1"]=n:this.fixedChild=n:!n.width||String(n.width).indexOf("%")>-1?this[this.flexChild1?"flexChild2":"flexChild1"]=n:this.fixedChild=n;n.addEventListener("prop.visible",e),n.$ext.style.position="absolute",n.height&&t.height.call(n,n.height),n.width&&t.width.call(n,n.width),n.margin&&t.margin.call(n,n.margin);var s=this.lastChild==n;if(s||r)this.$propHandlers.padding.call(this,this.padding),this.$propHandlers.edge.call(this,this.edge);this.$handle&&this.childNodes.length>2&&this.$handle.show()},this.unregister=function(n){if(!n.$splitter||n.nodeFunc!=apf.NODE_VISIBLE)return;delete n.$margin,n.$propHandlers.left=n.$propHandlers.top=n.$propHandlers.right=n.$propHandlers.bottom=null;for(var r in t)delete n.$propHandlers[r];this.fixedChild==n?delete this.fixedChild:this.flexChild1==n?delete this.flexChild1:this.flexChild2==n&&delete this.flexChild2,n.removeEventListener("prop.visible",e),n.$ext.style.display=n.visible?"block":"none",n.width&&(n.$ext.style.width=""),n.height&&(n.$ext.style.height=""),n.$ext.style.position=n.$ext.style.left=n.$ext.style.top=n.$ext.style.right=n.$ext.style.bottom="",this.$handle&&this.$handle.hide()},this.addEventListener("DOMNodeRemoved",function(e){if(e.$doOnlyAdmin||e.currentTarget==this)return;e.relatedNode==this&&this.unregister(e.currentTarget)}),this.addEventListener("DOMNodeInserted",function(e){if(e.currentTarget==this){this.visible&&(this.$ext.style.display=apf.CSSPREFIX2+"-box");return}if(e.currentTarget.nodeType!=1||e.currentTarget.nodeFunc!=apf.NODE_VISIBLE)return;if(e.relatedNode==this&&!e.$isMoveWithinParent){e.currentTarget.$setLayout(this.localName,!0);if(e.currentTarget.$altExt)return!1}}),this.$draw=function(){var e=this.$pHtmlNode.ownerDocument;this.$ext=this.$pHtmlNode.appendChild(e.createElement("div")),this.getAttribute("style")&&this.$ext.setAttribute("style",this.getAttribute("style")),this.$ext.className=this.localName,this.$vbox=this.localName=="vsplitbox",this.$int=this.$ext,this.$ext.host=this,this.getAttribute("class")&&apf.setStyleClass(this.$ext,this.getAttribute("class"))},this.$loadAml=function(e){}}.call(apf.vsplitbox.prototype=new apf.GuiElement),apf.hsplitbox.prototype=apf.vsplitbox.prototype,apf.aml.setElement("hsplitbox",apf.hsplitbox),apf.aml.setElement("vsplitbox",apf.vsplitbox),apf.splitbutton=function(e,t){this.$init(t||"splitbutton",apf.NODE_VISIBLE,e)},function(){this.$focussable=!1,this.$booleanProperties["disabled-split"]=1,this.$propHandlers.caption=function(e){this.$button1.setProperty("caption",e)},this.$propHandlers.icon=function(e){this.$button1.setProperty("icon",e)},this.$propHandlers.tooltip=function(e){this.$button1.setProperty("tooltip",e)},this.$propHandlers.hotkey=function(e){this.$button1.setProperty("hotkey",e)},this.$propHandlers.disabled=function(e){this.$button1.setProperty("disabled",e),this.$button2.setProperty("disabled",e)},this.$propHandlers["disabled-split"]=function(e){this.$button2.setProperty("disabled",e)},this.$propHandlers["button-skin"]=function(e){this.$button1.setProperty("skin",e),this.$button2.setProperty("skin",e)},this.$propHandlers["class"]=function(e){apf.setStyleClass(this.$ext,e,this.$lastClassValue?[this.$lastClassValue]:null),this.$lastClassValue=e},this.$propHandlers.submenu=function(e){this.$button2.setProperty("submenu",e);var t=this;this.$button2.addEventListener("mousedown",function(){self[e].$splitInited||(t.dispatchEvent("submenu.init"),self[e].addEventListener("display",function(){var e=this.opener.parentNode,t=apf.getAbsolutePosition(e.$button2.$ext)[0]-apf.getAbsolutePosition(e.$button1.$ext)[0];this.$ext.style.marginLeft="-"+t+"px"}),self[e].$splitInited=!0),this.removeEventListener("mousedown",arguments.callee)})},this.$draw=function(){var e=this;this.$ext=this.$pHtmlNode.appendChild(document.createElement("div"));var t=this["button-skin"]||this.getAttribute("skin")||this.localName;this.$button1=new apf.button({htmlNode:this.$ext,parentNode:this,skinset:this.getAttribute("skinset"),skin:t,"class":"main",onmouseover:function(){apf.setStyleClass(this.$ext,"primary");if(e.$button2.disabled)return;e.$button2.$setState("Over",{}),e.dispatchEvent("mouseover",{button:this})},onmouseout:function(){apf.setStyleClass(this.$ext,"",["primary"]);if(e.$button2.disabled)return;e.$button2.$setState("Out",{}),e.dispatchEvent("mouseout",{button:this})},onclick:function(t){e.dispatchEvent("click")}}),this.$button2=new apf.button({htmlNode:this.$ext,parentNode:this,skinset:this.getAttribute("skinset"),skin:t,"class":"arrow",onmouseover:function(){apf.setStyleClass(this.$ext,"primary"),e.$button1.$setState("Over",{}),e.dispatchEvent("mouseover",{button:this})},onmouseout:function(){e.$button2.value?(apf.setStyleClass(this.$ext,"primary"),e.$button1.$setState("Over",{})):(apf.setStyleClass(this.$ext,"",["primary"]),e.$button1.$setState("Out",{})),e.dispatchEvent("mouseout",{button:this})},onclick:function(t){e.dispatchEvent("split.click",t)}})},this.$loadAml=function(e){}}.call(apf.splitbutton.prototype=new apf.GuiElement),apf.aml.setElement("splitbutton",apf.splitbutton),apf.splitter=function(e,t){this.$init(t||"splitter",apf.NODE_VISIBLE,e)},function(){this.minwidth=0,this.minheight=0,this.$scale=0,this.$focussable=!1,this.$splitter=!0,this.$booleanProperties.realtime=!0,this.$propHandlers.realtime=function(e){this.$setStyleClass(this.$ext,e&&this.$baseCSSname+"Realtime"||"",[this.$baseCSSname+"Realtime"])},this.$propHandlers.scale=function(e){this.$scale=e=="left"||e=="top"?1:e=="right"||"bottom "?2:0},this.$propHandlers.parent=function(e){this.$parent=typeof e=="object"?e:self[e]},this.$propHandlers.type=function(e){this.$setStyleClass(this.$ext,e,[e=="horizontal"?"vertical":"horizontal"]),e=="vertical"?this.$setStyleClass(this.$ext,"w-resize",["n-resize"]):this.$setStyleClass(this.$ext,"n-resize",["w-resize"]),e=="horizontal"?this.$info={pos:"top",opos:"left",size:"width",osize:"height",offsetPos:"offsetTop",offsetSize:"offsetHeight",oOffsetPos:"offsetLeft",oOffsetSize:"offsetWidth",clientPos:"clientY",d1:1,d2:0,x1:0,x2:2}:this.$info={pos:"left",opos:"top",size:"height",osize:"width",offsetPos:"offsetLeft",offsetSize:"offsetWidth",oOffsetPos:"offsetTop",oOffsetSize:"offsetHeight",clientPos:"clientX",d1:0,d2:1,x1:3,x2:1}},this.addEventListener("DOMNodeInserted",function(e){if(e.currentTarget!=this)return;this.init&&this.init()}),this.$draw=function(){this.$ext=this.$getExternal();var e="vbox|hbox".indexOf(this.parentNode.localName)>-1?"box":"splitbox";apf.extend(this,apf.splitter.templates[e]),this.decorate()},this.$loadAml=function(e){this.realtime!==!1&&this.$propHandlers.realtime.call(this,this.realtime=!0)}}.call(apf.splitter.prototype=new apf.Presentation),apf.splitter.templates={box:{update:function(newPos,finalPass){with(this.$info){var max=this.$previous?this.$previous.$ext[offsetSize]+this.$next.$ext[offsetSize]:this.parentNode.getWidth(),method=finalPass?"setAttribute":"setProperty";apf.hasFlexibleBox&&(newPos-=this.$previous?apf.getAbsolutePosition(this.$previous.$ext,this.parentNode.$int)[d1]:0),this.$previous&&this.$next&&(this.$previous.flex||this.$previous.flex===0)&&(this.$next.flex||this.$next.flex===0)?(!finalPass&&!this.realtime&&(newPos-=this.$ext[offsetSize]),(!this.$scale||this.$scale==1)&&this.$previous[method]("flex",newPos),(!this.$scale||this.$scale==2)&&this.$next[method]("flex",this.$totalFlex-newPos)):(this.$next&&!this.$next.flex&&(!this.$scale||this.$scale==2)&&this.$next[method](osize,max-newPos),this.$previous&&!this.$previous.flex&&(!this.$scale||this.$scale==1)&&this.$previous[method](osize,newPos))}apf.hasSingleResizeEvent&&apf.layout.forceResize(this.$ext.parentNode)},$setSiblings:function(){this.$previous=this.previousSibling;while(this.$previous&&(this.$previous.nodeType!=1||this.$previous.visible===!1||this.$previous.nodeFunc!=apf.NODE_VISIBLE))this.$previous=this.$previous.previousSibling;this.$next=this.nextSibling;while(this.$next&&(this.$next.nodeType!=1||this.$next.visible===!1||this.$next.nodeFunc!=apf.NODE_VISIBLE))this.$next=this.$next.nextSibling},init:function(size,refNode,oItem){this.$setSiblings(),this.$thickness=null,this.parentNode&&this.parentNode.$box&&(this.setProperty("type",this.parentNode.localName=="vbox"?"horizontal":"vertical"),this.$thickness=parseInt(this.parentNode.padding));if(!this.$previous||!this.$next)return this;with(this.$info){var diff=apf.getDiff(this.$ext);if(!this.parentNode.$box){var iSize=Math.max(this.$previous.$ext[offsetSize],this.$next.$ext[offsetSize]);this.$ext.style[size]=iSize-diff[d1]+"px"}var iThick=this[osize]=this.$thickness||this.$next[oOffsetPos]-this.$previous[oOffsetPos]-this.$previous[oOffsetSize];this.$ext.style[osize]=iThick-diff[d2]+"px"}return this},decorate:function(){var _self=this;this.$ext.onmousedown=function(e){e||(e=event);if(_self.dispatchEvent("dragstart")===!1)return;apf.dragMode=!0,_self.$setSiblings();var changedPosition,pHtml=_self.parentNode.$int,diff=0;"absolute|fixed|relative".indexOf(apf.getStyle(pHtml,"position"))==-1&&(pHtml.style.position="relative",changedPosition=!0),_self.$totalFlex=0;with(_self.$info){if(_self.$parent)if(!_self.$previous){var posNext=apf.getAbsolutePosition(_self.$next.$ext,_self.parentNode.$int),wd=_self.$parent.getWidth();if(_self.$scale==2){var max=posNext[d1]+_self.$next.$ext[offsetSize]-this[offsetSize];diff=_self.parentNode.$int[offsetSize]-max;var min=max-wd-diff}}else!_self.$next;else{if(_self.$previous)var posPrev=apf.getAbsolutePosition(_self.$previous.$ext,_self.parentNode.$int),min=_self.$scale?0:(posPrev[d1]||0)+(parseInt(_self.$previous.minwidth)||0);if(_self.$next)var posNext=apf.getAbsolutePosition(_self.$next.$ext,_self.parentNode.$int),max=posNext[d1]+_self.$next.$ext[offsetSize]-this[offsetSize]-(parseInt(_self.$next.minwidth)||0)}if(_self.$previous&&_self.$next){if((_self.$previous.flex||_self.$previous.flex===0)&&(_self.$next.flex||_self.$next.flex===0)){var set=[],nodes=_self.parentNode.childNodes,padding=0;for(var node,i=0,l=nodes.length;i<l;i++){if((node=nodes[i]).visible===!1||node.nodeFunc!=apf.NODE_VISIBLE||node.$splitter)continue;node.flex&&set.push(node,node.$ext[offsetSize]+(apf.hasFlexibleBox&&!_self.realtime&&node==_self.$previous?2*_self.parentNode.padding:0))}for(var i=0,l=set.length;i<l;i+=2)set[i].setAttribute("flex",set[i+1])}_self.$totalFlex+=_self.$next.flex+_self.$previous.flex}var startPos,startOffset;if(apf.hasFlexibleBox){var coords=apf.getAbsolutePosition(this);startPos=e[clientPos]-coords[d1];if(!_self.realtime){if(_self.$previous.flex&&!_self.$next.flex){var mBox=apf.getBox(_self.$next.margin);mBox[x1]=_self.parentNode.padding,_self.$next.$ext.style.margin=mBox.join("px ")+"px"}else{var mBox=apf.getBox(_self.$previous.margin);mBox[x2]=_self.parentNode.padding,_self.$previous.$ext.style.margin=mBox.join("px ")+"px"}var diff=apf.getDiff(this);this.style.left=coords[0]+"px",this.style.top=coords[1]+"px",this.style.width=this.offsetWidth-diff[0]+"px",this.style.height=this.offsetHeight-diff[1]+"px",this.style.position="absolute"}}else{var coords=apf.getAbsolutePosition(this.offsetParent);startOffset=apf.getAbsolutePosition(_self.$previous.$ext)[d1],startPos=e[clientPos]-coords[d1],_self.realtime||(this.style.left="0px",this.style.top="0px",this.style.position="relative"),min=-1e3}}apf.plane.show(this),_self.$setStyleClass(this,_self.$baseCSSname+"Moving"),_self.$setStyleClass(document.body,_self.type=="vertical"?"w-resize":"n-resize",[_self.type=="vertical"?"n-resize":"w-resize"]),document.onmouseup=function(e){e||(e=event);with(_self.$info){var newPos;if(e[clientPos]>=0){var coords=apf.getAbsolutePosition(_self.$ext.offsetParent);newPos=Math.min(max,Math.max(min,e[clientPos]-coords[d1]-(apf.hasFlexibleBox?startPos:startOffset)))+diff}}_self.$setStyleClass(_self.$ext,"",[_self.$baseCSSname+"Moving"]),_self.$setStyleClass(document.body,"",["n-resize","w-resize"]),changedPosition&&(pHtml.style.position=""),apf.hasFlexibleBox&&!_self.realtime&&((_self.$previous.flex&&!_self.$next.flex?_self.$next:_self.$previous).$ext.style.margin=apf.getBox(_self.$previous.margin).join("px ")+"px"),newPos&&_self.update(newPos,!0),apf.plane.hide(),_self.realtime||(_self.$ext.style.left="",_self.$ext.style.top="",_self.$ext.style[_self.$info.size]="",_self.$ext.style.position=""),_self.dispatchEvent("dragdrop"),document.onmouseup=document.onmousemove=null,apf.dragMode=!1},document.onmousemove=function(e){e||(e=event);with(_self.$info){var newPos;if(e[clientPos]>=0){var coords=apf.getAbsolutePosition(_self.$ext.offsetParent);newPos=Math.min(max,Math.max(min,e[clientPos]-coords[d1]-(apf.hasFlexibleBox||!_self.realtime?startPos:startOffset)))+diff,_self.realtime?_self.update(newPos):_self.$ext.style[pos]=newPos+"px"}}apf.stopEvent(e),_self.dispatchEvent("dragmove")}},apf.queue.add("splitter"+this.$uniqueId,function(){_self.init()})}},splitbox:{update:function(e,t){this[this.parentNode.$vbox?"updateV":"updateH"](e,t)},updateV:function(e,t){var n=t?"setAttribute":"setProperty",r=this.$parent||this.parentNode;if(r.fixedChild)r.fixedChild==r.firstChild?r.fixedChild[n]("height",e-r.$edge[0]):r.fixedChild[n]("height",apf.getHtmlInnerHeight(r.$int)-e-r.padding-r.$edge[1]);else if(r.firstChild.height){var i=apf.getHtmlInnerHeight(r.$int);r.firstChild[n]("height",(e-r.$edge[0])/i*100+"%")}else{var i=apf.getHtmlInnerHeight(r.$int);r.lastChild[n]("height",(i-e-r.$edge[2]-r.padding)/i*100+"%")}apf.hasSingleResizeEvent&&apf.layout.forceResize(this.$ext.parentNode)},updateH:function(e,t){var n=t?"setAttribute":"setProperty",r=this.$parent||this.parentNode;if(r.fixedChild)r.fixedChild==r.firstChild?r.fixedChild[n]("width",e-r.$edge[3]):r.fixedChild[n]("width",apf.getHtmlInnerWidth(r.$int)-e-r.padding-r.$edge[2]);else if(r.firstChild.width){var i=apf.getHtmlInnerWidth(r.$int);r.firstChild[n]("width",(e-r.$edge[3])/i*100+"%")}else{var i=apf.getHtmlInnerWidth(r.$int);r.lastChild[n]("width",(i-e-r.$edge[1]-r.padding)/i*100+"%")}apf.hasSingleResizeEvent&&apf.layout.forceResize(this.$ext.parentNode)},$setSiblings:function(){this.$previous=this.parentNode.firstChild,this.$next=this.parentNode.lastChild},decorate:function(){var e=this;this.parentNode&&this.parentNode.$box&&this.setProperty("type",this.parentNode.$vbox?"horizontal":"vertical"),this.$ext.onmousedown=function(t){function o(t,o){var u,a;n.$vbox?t.clientY>=0&&(a=apf.getAbsolutePosition(e.$parent?e.$parent.$ext:e.$ext.offsetParent),u=Math.min(i,Math.max(r,t.clientY-a[1]-s))):t.clientX>=0&&(a=apf.getAbsolutePosition(e.$parent?e.$parent.$ext:e.$ext.offsetParent),u=Math.min(i,Math.max(r,t.clientX-a[0]-s)));if(!u)return;e.realtime||o?e.update(u,o):e.$ext.style[n.$vbox?"top":"left"]=u+"px"}t||(t=event);if(e.dispatchEvent("dragstart")===!1)return;apf.dragMode=!0,e.$setSiblings();var n=e.$parent||e.parentNode;if(n.$vbox)var r=parseInt(n.firstChild.minheight)+n.$edge[0],i=apf.getHtmlInnerHeight(n.$ext)-n.lastChild.minheight-n.$edge[2]-n.padding,s=t.layerY||t.offsetY;else var r=parseInt(n.firstChild.minwidth)+n.$edge[3],i=apf.getHtmlInnerWidth(n.$ext)-n.lastChild.minwidth-n.$edge[1]-n.padding,s=t.layerX||t.offsetX;apf.plane.show(this),e.$setStyleClass(this,e.$baseCSSname+"Moving"),e.$setStyleClass(document.body,e.type=="vertical"?"w-resize":"n-resize",[e.type=="vertical"?"n-resize":"w-resize"]),document.onmouseup=function(t){t||(t=event),e.$setStyleClass(e.$ext,"",[e.$baseCSSname+"Moving"]),e.$setStyleClass(document.body,"",["n-resize","w-resize"]),o(t,!0),apf.plane.hide(),e.realtime||(e.$ext.style.left="",e.$ext.style.top="",e.$ext.style[e.$info.size]="",e.$ext.style.position=""),e.dispatchEvent("dragdrop"),document.onmouseup=document.onmousemove=null,apf.dragMode=!1},document.onmousemove=function(t){t||(t=event),o(t),apf.stopEvent(t),e.dispatchEvent("dragmove")}}}}},apf.aml.setElement("splitter",apf.splitter),apf.stateGroup=function(){this.$init("state-group",apf.NODE_HIDDEN)},apf.aml.setElement("state-group",apf.stateGroup),function(){this.$handlePropSet=function(e,t,n){if(e=="id")return;var r,i=this.childNodes;for(var s=0,o=i.length;s<o;s++){r=i[s];if(r.nodeType!=1||r.localName!="state")continue;if(!r[e]||r.$inheritProperties[e]==2)r.$inheritProperties[e]=2,r.setProperty(e,t)}},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.id||(this.id="stategroup"+this.$uniqueId);var t=this.childNodes;for(var n=0,r=t.length;n<r;n++)t[n].setProperty("group",this.id)})}.call(apf.stateGroup.prototype=new apf.AmlElement),apf.StateServer={states:{},groups:{},locs:{},removeGroup:function(e,t){this.groups[e].remove(t),this.groups[e].length||(self[e]&&(self[e].destroy(),self[e]=null),delete this.groups[e])},addGroup:function(e,t,n){if(!this.groups[e]){this.groups[e]=[];var r=new apf.state({id:e});r.parentNode=n,r.toggle=function(){for(var t=0,n=0;n<apf.StateServer.groups[e].length;n++)if(apf.StateServer.groups[e][n].active){t=n+1;break}apf.StateServer.groups[e][t==apf.StateServer.groups[e].length?0:t].activate()},this.groups[e].pState=self[e]=r}return t&&this.groups[e].push(t),this.groups[e].pState},removeState:function(e){delete this.states[e.name]},addState:function(e){this.states[e.name]=e}},apf.state=function(e,t){this.$init(t||"state",apf.NODE_HIDDEN,e),this.$signalElements=[],this.$groupAdded={},this.$locationAdded=""},function(){this.$supportedProperties.push("active"),this.$booleanProperties.active=!0,this.$propHandlers.active=function(e){if(apf.isTrue(e)){if(this.group){var t=apf.StateServer.groups[this.group];t||(apf.StateServer.addGroup(this.group,this),t=apf.StateServer.groups[this.group]);for(var n=0;n<t.length;n++)t[n]!=this&&t[n].active!==!1&&t[n].deactivate()}var r=this.$signalElements;for(var n=0;n<r.length;n++){if(!self[r[n][0]]||!self[r[n][0]].setProperty)continue;self[r[n][0]].setProperty(r[n][1],this[r[n].join(".")])}if(this.group){var i=this.attributes;for(var n=0;n<i.length;n++){if(i[n].nodeName.match(/^on|^(?:group|id)$|^.*\..*$/))continue;self[this.group].setProperty(i[n].nodeName,i[n].nodeValue)}apf.StateServer.groups[this.group].pState.dispatchEvent("change")}this.dispatchEvent("activate")}else this.setProperty("active",!1),this.dispatchEvent("deactivate")},this.setValue=function(e){this.active=9999,this.setProperty("active",e,!1,!0)},this.activate=function(){this.active=9999,this.setProperty("active",!0,!1,!0)},this.deactivate=function(){this.setProperty("active",!1,!1,!0)},this.$propHandlers.group=function(e){e?(apf.StateServer.addGroup(e,this),this.$groupAdded={value:e,elState:this}):(apf.StateServer.removeGroup(this.$groupAdded.value,this.$groupAdded.elState),this.$groupAdded={})},this.$propHandlers.location=function(e){e?(apf.StateServer.locs[e]=this,this.$locationAdded=e):(delete apf.StateServer.locs[this.$locationAdded],this.$locationAdded="")},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){apf.StateServer.addState(this);var t=this.attributes;for(var n,r=0;r<t.length;r++)n=t[r].nodeName.split("."),n.length==2&&this.$signalElements.push(n)}),this.addEventListener("DOMNodeRemovedFromDocument",function(){this.$signalElements=null,apf.StateServer.removeState(this),this.group&&apf.StateServer.removeGroup(this.group,this)})}.call(apf.state.prototype=new apf.AmlElement),apf.aml.setElement("state",apf.state),apf["switch"]=function(e,t){this.$hasButtons=!1,this.$init(t||"switch",apf.NODE_VISIBLE,e)},apf.pages=function(e,t){this.$hasButtons=!1,this.$init(t||"pages",apf.NODE_VISIBLE,e),this.$focussable=!1},apf.tab=function(e,t){this.$hasButtons=!0,this.$init(t||"tab",apf.NODE_VISIBLE,e)},function(){this.$focussable=apf.KEYBOARD,this.$draw=function(e){this.$ext=this.$getExternal(),this.$loadChildren()}}.call(apf.tab.prototype=new apf.BaseTab),apf["switch"].prototype=apf.pages.prototype=apf.tab.prototype,apf.aml.setElement("switch",apf["switch"]),apf.aml.setElement("pages",apf.pages),apf.aml.setElement("tab",apf.tab),apf.table=function(e,t){this.$init(t||"table",apf.NODE_VISIBLE,e)},function(){function e(e){var t=e.parentNode||this.parentNode;if(e.sync||e.value&&!this.$altExt||!e.value&&this.$altExt){var n=t.childNodes,r=apf.getArrayFromNodelist(t.$tbody.getElementsByTagName("td")),i=t.$tbody.getElementsByTagName("tr"),s=[],o=1,u,a,f=t.$columns.length,l=t.$columns.length,c;for(var h,p,d,v=n.length,m=0;m<v;m++){if((h=n[m]).visible===!1)continue;p=h.$altExt=d=r[l++];if(!p)break;i[o]||t.$tbody.appendChild(document.createElement("tr")),i[o].appendChild(p),p.appendChild(h.$ext),p.setAttribute("colspan",u=Math.min(f-(s[0]||0),parseInt(h.colspan||h.span||1))),p.setAttribute("rowspan",a=parseInt(h.rowspan||1)),s[0]||(s[0]=0),s[0]+=u;if(a>1)for(var g=1;g<a;g++)s[g]||(s[g]=0),s[g]+=u;s[0]>=f?(c=!0,s.shift(),o++):c=!1,p.style.padding="0px "+(c?0:t.padding)+"px "+(m==v-1?0:t.padding)+"px 0px"}var y=i[i.length-1].getElementsByTagName("td");for(m=0,il=y.length;m<il;m++)y[m].style.padding="0 "+(m==il-1?0:t.padding)+"px 0 0";for(;l<r.length;l++)r[l].parentNode.removeChild(r[l]);if(e.sync)return;e.value?t.$addTd(n[v-1]):this.$altExt=null}}this.$focussable=!1,this.$useLateDom=!0,this.$layout=!0,this.columns=null,this.padding=2,this.$edge=[5,5,5,5],this.cellheight=19,this.$supportedProperties.push("columns","padding","edge","cellheight","span"),this.$propHandlers.columns=function(t){if(!t.match(/^((?:\d+\%?|\*)\s*(?:,\s*|\s*$))+$/))return;var n,r=this.$columns=t.splitSafe(","),i=0,s=this.$table.getElementsByTagName("col");if(s.length)for(var o,u=0,a=Math.min(s.length,r.length);u<a;u++)s[u].style.width=(o=r[u]).indexOf("%")>-1?o:o+"px",i+=parseInt(o);var f=s.length-r.length;if(f>0)for(var u=s.length-f;u<s.length;u++)s[u].parentNode.removeChild(s[u]);else if(f<0)for(var u=r.length+f;u<r.length;u++)n=this.$table.appendChild(document.createElement("col")),n.style.width=(o=r[u]).indexOf("%")>-1?o:o+"px",n.setAttribute("valign","top"),i+=parseInt(o);this.$table.style.width=String(t).indexOf("%")>-1?"auto":i+(r.length-1)*this.padding+this.$edge[0]+this.$edge[2]+"px";var l=this.$tbody.firstChild.getElementsByTagName("td");for(var u=l.length-1;u>=0;u--)l[u].parentNode.removeChild(l[u]);for(var o,c,u=0;u<r.length;u++)c=this.$tbody.firstChild.appendChild(document.createElement("td")),c.style.width=(o=r[u]).indexOf("%")>-1?o:o+"px";f&&this.$amlLoaded&&e({sync:!0,parentNode:this}),this.$resize()},this.$propHandlers.padding=function(e){if(!this.$columns)return;var t=this.$table.getElementsByTagName("td"),n,r,i,s=this.$tbody.lastChild;for(var o=this.$columns.length,u=t.length;o<u;o++)n=(i=t[o]).parentNode.lastChild==i,r=i.parentNode==s,i.style.padding="0px "+(n?0:e)+"px "+(r?0:e)+"px 0px";this.$resize()},this.$propHandlers.edge=function(e){this.$table.style.padding=(this.$edge=apf.getBox(e)).join("px ")+"px",this.$resize()},this.$addTd=function(e){var t=this.$table.getElementsByTagName("td"),n=0,r=this.$columns.length;for(var i,s=0;s<t.length;s++)n+=Math.min(r,parseInt((i=t[s]).getAttribute("colspan")||1)*parseInt(i.getAttribute("rowspan")||1));if(n%r==0)var o=this.$tbody.appendChild(document.createElement("tr"));else o=t[t.length-1].parentNode;var u=o.appendChild(document.createElement("td"));u.style.position="relative",(e.colspan||e.span)&&u.setAttribute("colspan",e.colspan||e.span),e.rowspan&&u.setAttribute("rowspan",e.rowspan),u.appendChild(e.$ext),e.$altExt=u};var t={width:function(e){this.$ext.style.width=""},height:function(e){this.$ext.style.height=e?Math.max(0,e-apf.getHeightDiff(this.$ext))+"px":"",this.parentNode.$resize()},margin:function(e){this.$ext.style.margin=apf.getBox(e).join("px ")+"px",this.parentNode.$resize()},colspan:function(t){t?this.$altExt.setAttribute("colspan",t):this.$altExt.removeAttribute("colspan"),e.call(this,{sync:!0}),this.parentNode.$resize()},rowspan:function(t){t?this.$altExt.setAttribute("rowspan",t):this.$altExt.removeAttribute("rowspan"),e.call(this,{sync:!0}),this.parentNode.$resize()},valign:function(e){this.$altExt.valign=e},align:function(e){if("left|right".indexOf(e)==-1)return;this.$altExt.align=e}};t.span=t.colspan,this.register=function(n){if(n.$altExt)return;n.$propHandlers.left=n.$propHandlers.top=n.$propHandlers.right=n.$propHandlers.bottom=apf.K;for(var r in t)n.$propHandlers[r]=t[r];n.addEventListener("prop.visible",e),this.$addTd(n),this.$noResize=!0,n.margin&&t.margin.call(n,n.margin),n.$ext.tagName!="INPUT"&&(n.$ext.style.width="auto"),this.lastChild==n&&this.$propHandlers.padding.call(this,this.padding),delete this.$noResize},this.unregister=function(n){n.$propHandlers.left=n.$propHandlers.top=n.$propHandlers.right=n.$propHandlers.bottom=null;for(var r in t)delete n.$propHandlers[r];n.removeEventListener("prop.visible",e),e.call(n,{value:!1}),n.margin&&(n.$ext.style.margin=""),n.width&&(n.$ext.style.width="")},this.addEventListener("DOMNodeRemoved",function(e){if(e.$doOnlyAdmin||e.currentTarget==this)return;e.relatedNode==this&&this.unregister(e.currentTarget)}),this.addEventListener("DOMNodeInserted",function(t){if(t.currentTarget==this||t.currentTarget.nodeType!=1)return;t.relatedNode==this&&(t.$isMoveWithinParent?e.call(t.currentTarget,{sync:!0}):(t.currentTarget.$setLayout("table"),t.currentTarget.nextSibling&&e.call(t.currentTarget,{sync:!0})))}),this.$draw=function(){this.$ext=apf.insertHtmlNode(null,this.$pHtmlNode,null,"<div><table cellSpacing='0' cellPadding='0'><tbody><tr class='first'></tr></tbody></table></div>"),this.$table=this.$ext.firstChild,this.$tbody=this.$table.firstChild,this.$ext.className="table "+(this.getAttribute("class")||""),this.$int=this.$ext,this.$ext.host=this,this.getAttribute("class")&&apf.setStyleClass(this.$ext,this.getAttribute("class")),this.addEventListener("resize",this.$resize),this.$originalMin=[this.minwidth||0,this.minheight||0]},this.$resize=function(){if(!this.$amlLoaded||this.$noResize)return;this.$table.offsetWidth>=this.$ext.offsetWidth?this.$ext.style.minWidth=(this.minwidth=Math.max(0,this.$table.offsetWidth-apf.getWidthDiff(this.$ext)))+"px":(this.$ext.style.minWidth="",this.minwidth=this.$originalMin[0]),this.$table.offsetHeight>=this.$ext.offsetHeight?this.$ext.style.minHeight=(this.minheight=Math.max(0,this.$table.offsetHeight-apf.getHeightDiff(this.$ext)))+"px":(this.$ext.style.minHeight="",this.minheight=this.$originalMin[1])},this.$loadAml=function(e){this.$amlLoaded=!1,this.$columns||this.$propHandlers.columns.call(this,this.columns="150, 200"),this.$amlLoaded=!0}}.call(apf.table.prototype=new apf.GuiElement),apf.aml.setElement("table",apf.table),apf.aml.setElement("teleport",apf.AmlElement),apf.text=function(e,t){this.$init(t||"text",apf.NODE_VISIBLE,e),this.$nodes=[]},function(){this.implement(apf.Cache,apf.ChildValue),this.$focussable=!0,this.focussable=!1,this.textselect=!0,this.$hasStateMessages=!0,this.$textTimer=this.$lastMsg=this.$lastClass=this.$changedHeight=null,this.$booleanProperties.scrolldown=!0,this.$booleanProperties.secure=!0,this.$booleanProperties.textselect=!0,this.$supportedProperties.push("behavior","scrolldown","secure","value"),this.$isTextInput=function(){return this.textselect},this.$propHandlers.scrolldown=function(e){var t=this;e?(this.$scrolldown=!0,apf.addListener(this.$scrollArea,"scroll",this.$scrollFunc=function(){t.$scrolldown=this.scrollTop>=this.scrollHeight-this.offsetHeight+apf.getVerBorders(this)}),this.addEventListener("scroll",this.$scroll),this.addEventListener("afterload",this.$scroll),this.addEventListener("resize",function(){t.$scrollArea&&t.$scrolldown&&t.scrolldown&&(t.$scrollArea.scrollTop=t.$scrollArea.scrollHeight)}),clearInterval(this.$textTimer),this.$textTimer=setInterval(function(){t.$scrollArea&&t.$scrolldown&&t.scrolldown&&(t.$scrollArea.scrollTop=t.$scrollArea.scrollHeight)},200)):(this.removeEventListener("scroll",this.$scroll),this.removeEventListener("afterload",this.$scroll),clearInterval(this.$textTimer),this.$scrollArea&&apf.removeListener(this.$scrollArea,"scoll",this.$scrollFunc))},this.$scroll=function(e){var t=this.$scrollArea;if(e.name=="afterload"){this.$scrolldown=!0,t.scrollTop=t.scrollHeight;return}this.$scrolldown=t.scrollTop>=t.scrollHeight-t.offsetHeight+apf.getVerBorders(t)},this.$propHandlers.value=function(e,t,n,r){if(this.each)return;typeof e!="string"&&(e.nodeType?e=e.nodeType>1&&e.nodeType<5?e.nodeValue:e.firstChild&&e.firstChild.nodeValue||"":e=e?e.toString():""),this.secure&&(e=e.replace(/<a /gi,"<a target='_blank' ").replace(/<object.*?\/object>/g,"").replace(/<script.*?\/script>/g,"").replace(new RegExp("ondblclick|onclick|onmouseover|onmouseout|onmousedown|onmousemove|onkeypress|onkeydown|onkeyup|onchange|onpropertychange","g"),"ona")),e=e.replace(/\<\?xml version="1\.0" encoding="UTF-16"\?\>/,""),r?(apf.insertHtmlNodes(null,this.$container,null,e),this.value||(this.value=""),this.value+=e):this.$container.innerHTML=e,apf.cannotSizeIframe&&this.oIframe&&(this.oIframe.style.width=this.oIframe.offsetWidth+"px"),this.scrolldown&&this.$scrolldown&&(this.$scrollArea.scrollTop=this.$scrollArea.scrollHeight)},this.$eachHandler=function(e){this.$attrExcludePropBind=apf.extend({},this.$attrExcludePropBind),this.$attrExcludePropBind.value=e?2:0},this.addEventListener("prop.each",this.$eachHandler),this.addEventListener("$clear",function(){this.$container.innerHTML="",this.value="",this.dispatchEvent("prop.value",{value:""})}),this.$moveNode=function(){},this.addValue=function(e){this.$propHandlers.value.call(this,e,null,null,!0),this.dispatchEvent("prop.value",{value:this.value})},this.setValue=function(e){this.setProperty("value",e,!1,!0)},this.getValue=function(){return this.$container.innerHTML},this.addEventListener("keydown",function(e){var t=e.keyCode;switch(t){case 33:this.$container.scrollTop-=this.$container.offsetHeight;break;case 34:this.$container.scrollTop+=this.$container.offsetHeight;break;case 35:this.$container.scrollTop=this.$container.scrollHeight;break;case 36:this.$container.scrollTop=0;break;case 38:this.$container.scrollTop-=10;break;case 40:this.$container.scrollTop+=10;break;default:return}return!1},!0),this.$canLoadData=function(){return this.$attrBindings.value?!0:!1},this.$add=function(e,t,n,r,i){var s=this.$attrBindings.value.cvalue,o=s(e);o="<div id='"+t+"'>"+o+"</div>",r?(i?i.insertAdjacentHTML("beforebegin",o):this.$container.insertAdjacentHTML("beforeend",o),apf.cannotSizeIframe&&this.oIframe&&(this.oIframe.style.width=this.oIframe.offsetWidth+"px"),this.scrolldown&&this.$scrolldown&&(this.$scrollArea.scrollTop=this.$scrollArea.scrollHeight)):this.$nodes.push(o)},this.$fill=function(){this.$container.insertAdjacentHTML("beforeend",this.$nodes.join("")),this.$nodes=[]},this.$deInitNode=this.$updateNode=this.$moveNode=apf.K,this.$draw=function(){this.$ext=this.$getExternal(),this.$container=this.$getLayoutNode("main","container",this.$ext),apf.hasCssUpdateScrollbarBug&&!apf.getStyle(this.$container,"padding")&&this.$fixScrollBug(),this.$scrollArea=this.oFocus?this.oFocus.parentNode:this.$container;if(this.$container.tagName.toLowerCase()=="iframe")if(apf.isIE){this.oIframe=this.$container;var e=this.skin.selectSingleNode("iframe_style");this.oIframe.contentWindow.document.write("<!DOCTYPE html>                    <head>                        <style>"+(e?e.firstChild.nodeValue:"")+"</style>                        <script>                            document.onkeydown = function(e){                                if (!e) e = event;                                if ("+"top.apf.disableF5"+" && e.keyCode == 116) {                                    e.keyCode = 0;                                    return false;                                }                            }                        </script>                    </head>                    <body oncontextmenu='return false'></body>"),this.$container=this.oIframe.contentWindow.document.body}else{var t=document.createElement("div");this.$ext.parentNode.replaceChild(t,this.$ext),t.className=this.$ext.className,this.$ext=this.$container=t}this.getAttribute("each")&&this.$eachHandler()},this.addEventListener("DOMNodeRemovedFromDocument",function(){clearInterval(this.$textTimer),apf.destroyHtmlNode(this.oDrag),this.$scrollArea&&(this.$scrollArea.onscoll=this.$scrollArea=null),this.oDrag=this.oIframe=this.oFocus=this.$container=this.$ext=null})}.call(apf.text.prototype=new apf.StandardBinding),apf.aml.setElement("text",apf.text),apf.input=function(e,t){this.$init(t||"input",apf.NODE_VISIBLE,e)},apf.secret=function(e,t){this.$init(t||"secret",apf.NODE_VISIBLE,e)},apf.password=function(e,t){this.$init(t||"password",apf.NODE_VISIBLE,e)},apf.textarea=function(e,t){this.$init(t||"textarea",apf.NODE_VISIBLE,e),this.multiline=!0},apf.email=function(e,t){this.$init(t||"email",apf.NODE_VISIBLE,e)},apf.textbox=function(e,t){this.$init(t||"textbox",apf.NODE_VISIBLE,e)},function(){this.implement(apf.DataAction),this.$focussable=!0,this.$masking=!1,this.$autoComplete=!1,this.$childProperty="value",this.value="",this.readonly=!1,this.$isTextInput=!0,this.multiline=!1,this.$booleanProperties.readonly=!0,this.$booleanProperties.focusselect=!0,this.$booleanProperties.realtime=!0,this.$booleanProperties.kbclear=!0,this.$supportedProperties.push("value","mask","initial-message","focusselect","realtime","type","rows","cols","kbclear"),this.$propHandlers.value=function(e,t,n,r){if(!this.$input||!r&&this.getValue()==e)return;if(!r&&!e&&!this.hasFocus())return this.$clear();this.isHTMLBox?this.$input.innerHTML!=e&&(this.$input.innerHTML=e):this.$input.value!=e&&(this.$input.value=e),r||apf.setStyleClass(this.$ext,"",[this.$baseCSSname+"Initial"]),this.$button&&(this.$button.style.display=e&&!r?"block":"none")},this.addEventListener("prop.maxlength",function(e){this.$input.tagName.toLowerCase().match(/input|textarea/)&&(this.$input.maxLength=parseInt(e.value)||null)}),this.addEventListener("prop.editable",function(e){apf.isIE?this.$input.unselectable=e.value?"On":"Off":e.value?apf.addListener(this.$input,"mousedown",apf.preventDefault):apf.removeListener(this.$input,"mousedown",apf.preventDefault)}),this.$propHandlers.mask=function(e){if(this.mask.toLowerCase()=="password")return;if(!e)throw new Error("Not Implemented");this.$masking||(this.$masking=!0,this.implement(apf.textbox.masking),this.focusselect=!1),this.setMask(this.mask)},this.$propHandlers["initial-message"]=function(e){e,this.value||this.$clear(!0),this.type=="password"&&this.$inputInitFix&&(this.$inputInitFix.innerHTML=e,apf.setStyleClass(this.$inputInitFix,"initFxEnabled"))},this.$propHandlers.rows=function(e){this.$input.tagName.toLowerCase()=="textarea"&&e&&(this.setProperty("rows",e),this.$ext&&(this.$ext.rows=e))},this.$propHandlers.cols=function(e){this.$input.tagName.toLowerCase()=="textarea"&&e&&(this.setProperty("cols",e),this.$ext&&(this.$ext.cols=e))},this.$propHandlers.focusselect=function(e){var t=this;this.$input.onmousedown=function(){t.focusselect=!1},this.$input.onmouseup=this.$input.onmouseout=function(){t.focusselect=e}},this.$propHandlers.type=function(e){e&&"password|username".indexOf(e)>-1&&typeof this.focusselect=="undefined"&&(this.focusselect=!0,this.$propHandlers.focusselect.call(this,!0))},this.$isTextInput=function(e){return!0},this.setValue=function(e){return this.setProperty("value",e,!1,!0)},this.clear=function(){this.setProperty("value","")},this.$clear=function(e){this["initial-message"]?(apf.setStyleClass(this.$ext,this.$baseCSSname+"Initial"),this.$propHandlers.value.call(this,this["initial-message"],null,null,!0)):this.$propHandlers.value.call(this,"",null,null,!0),e||this.dispatchEvent("clear")},this.getValue=function(){var e;return this.isHTMLBox?(this.$input.innerText?e=this.$input.innerText:e=apf.html_entity_decode(this.$input.innerHTML.replace(/<br\/?\>/g,"\n").replace(/<[^>]*>/g,"")),e.charAt(e.length-1)=="\n"&&(e=e.substr(0,e.length-1))):e=this.$input.value,e==this["initial-message"]?"":e.replace(/\r/g,"")},this.select=function(){this.$input.select()},this.deselect=function(){this.$input.deselect()},this.$enable=function(){this.$input.disabled=!1},this.$disable=function(){this.$input.disabled=!0},this.$insertData=function(e){return this.setValue(e)},this.insert=function(e){if(apf.hasMsRangeObject){try{this.$input.focus()}catch(t){}var n=document.selection.createRange();this.oninsert&&(e=this.oninsert(e)),n.pasteHTML(e),n.collapse(!0),n.select()}else this.$input.value+=e},this.addEventListener("$clear",function(){this.value="",this["initial-message"]&&apf.document.activeElement!=this?(this.$propHandlers.value.call(this,this["initial-message"],null,null,!0),apf.setStyleClass(this.$ext,this.$baseCSSname+"Initial")):this.$propHandlers.value.call(this,"");if(!this.$input.tagName.toLowerCase().match(/input|textarea/i)&&apf.hasMsRangeObject)try{var e=document.selection.createRange();e.moveStart("sentence",-1),e.select()}catch(t){}this.dispatchEvent("clear")}),this.$keyHandler=function(e,t,n,r,i){this.$button&&e==27&&this.kbclear&&this.value&&(this.change(""),this.dispatchEvent("keydown",{keyCode:e,ctrlKey:t,shiftKey:n,altKey:r,htmlEvent:i}),i.stopPropagation())},this.$registerElement=function(e){if(!e)return;e.localName=="autocomplete"&&(this.$autoComplete=e)};var e;this.$focus=function(t){function i(){try{if(!!e&&document.activeElement==r.$input){clearInterval(e);return}r.$input.focus()}catch(t){}r.$masking&&r.setPosition(),r.focusselect&&r.select()}if(!this.$ext||this.$ext.disabled)return;this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus");var n=this.getValue();this["initial-message"]&&!n&&(this.$propHandlers.value.call(this,"",null,null,!0),apf.setStyleClass(this.$ext,"",[this.$baseCSSname+"Initial"]));var r=this;(!t||t.mouse)&&apf.isIE?(clearInterval(e),e=setInterval(i,1)):i()},this.$blur=function(t){if(!this.$ext)return;this.realtime||this.change(this.getValue()),t&&(t.cancelBubble=!0),this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus","capsLock"]);var n=this.getValue();this["initial-message"]&&!n&&(this.$propHandlers.value.call(this,this["initial-message"],null,null,!0),apf.setStyleClass(this.$ext,this.$baseCSSname+"Initial"));try{(apf.isIE||!t||t.srcElement!=apf.window)&&this.$input.blur()}catch(t){}this.oContainer&&$setTimeout("var o = apf.lookup("+this.$uniqueId+");                o.oContainer.style.display = 'none'",100),clearInterval(e)},this.$draw=function(){var e=this,t=!1;this.localName=="codeeditor"&&(this.skin="textarea",this.$loadSkin()),this.$ext=this.$getExternal(null,null,function(e){var t=this.getAttribute("mask");if(typeof t=="string"&&t.toLowerCase()=="password"||"secret|password".indexOf(this.localName)>-1)this.type="password",this.$getLayoutNode("main","input").setAttribute("type","password");e.setAttribute("onmousedown","if (!this.host.disabled)                 this.host.dispatchEvent('mousedown', {htmlEvent : event});"),e.setAttribute("onmouseup","if (!this.host.disabled)                 this.host.dispatchEvent('mouseup', {htmlEvent : event});"),e.setAttribute("onclick","if (!this.host.disabled)                 this.host.dispatchEvent('click', {htmlEvent : event});")}),this.$input=this.$getLayoutNode("main","input",this.$ext),this.$button=this.$getLayoutNode("main","button",this.$ext),this.$inputInitFix=this.$getLayoutNode("main","initialfix",this.$ext),this.type=="password"&&this.$propHandlers.type.call(this,"password");if(!apf.hasContentEditable&&"input|textarea".indexOf(this.$input.tagName.toLowerCase())==-1){var n=this.$input;this.$input=n.parentNode.insertBefore(document.createElement("textarea"),n),n.parentNode.removeChild(n),this.$input.className=n.className,this.$ext==n&&(this.$ext=this.$input)}this.$button&&(this.$button.onmouseup=function(){e.$clear(),e.change(""),e.focus({mouse:!0})}),this.$input.tagName.toLowerCase()=="textarea"&&this.addEventListener("focus",function(e){}),this.$input.onselectstart=function(e){e||(e=event),e.cancelBubble=!0},this.$input.host=this,this.$input.onkeydown=function(n){n=n||window.event;if(this.host.disabled)return n.returnValue=!1,!1;if(!e.realtime){var r=e.getValue();n.keyCode==13&&r!=e.value&&e.change(r)}else apf.isWebkit&&e.xmlRoot&&e.getValue()!=e.value&&$setTimeout("var o = apf.lookup("+e.$uniqueId+");                    o.change(o.getValue())");if(e.readonly||e.multiline=="optional"&&n.keyCode==13&&!n.shiftKey||n.ctrlKey&&(n.keyCode==66||n.keyCode==73||n.keyCode==85))return n.returnValue=!1,!1;if(t&&this.getAttribute("type")=="password"&&this.value!=""){var i=e.$ext.className.indexOf("capsLock")>-1,s=n.keyCode===20;s&&apf.setStyleClass(e.$ext,i?null:"capsLock",i?["capsLock"]:null)}if(e.$autoComplete||e.oContainer){var o=n.keyCode;$setTimeout(function(){e.$autoComplete?e.$autoComplete.fillAutocomplete(o):e.fillAutocomplete(o)})}if(!e.mask)return e.$keyHandler(n.keyCode,n.ctrlKey,n.shiftKey,n.altKey,n)},this.$input.onkeyup=function(t){t||(t=event);if(this.host.disabled)return!1;var n=t.keyCode;e.$button&&(e.$button.style.display=e.getValue()?"block":"none"),e.realtime?$setTimeout(function(){var t;!e.mask&&(t=e.getValue())!=e.value&&e.change(t),apf.isIE&&e.dispatchEvent("keyup",{keyCode:n})}):apf.isIE&&e.dispatchEvent("keyup",{keyCode:n}),e.isValid&&e.isValid()&&t.keyCode!=13&&t.keyCode!=17&&e.clearError()},apf.hasAutocompleteXulBug&&this.$input.setAttribute("autocomplete","off"),"INPUT|TEXTAREA".indexOf(this.$input.tagName)==-1&&(this.isHTMLBox=!0,this.$input.unselectable="Off",this.$input.contentEditable=!0,this.$input.select=function(){if(apf.hasMsRangeObject){var t=document.selection.createRange();t.moveToElementText(this),t.select()}else if(e.isHTMLBox){var t=document.createRange();t.setStart(e.$input.firstChild||e.$input,0);var n=e.$input.lastChild||e.$input;t.setEnd(n,n.nodeType==1?n.childNodes.length:n.nodeValue.length);var r=window.getSelection();r.removeAllRanges(),r.addRange(t)}},this.$input.onpaste=function(e){if(apf.hasMsRangeObject)return;if(e.clipboardData.types.indexOf("text/html")==-1)return;var t=window.getSelection(),n=t.getRangeAt(0);setTimeout(function(){var e=t.getRangeAt(0);e.setStart(n.startContainer,n.startOffset);var r=e.cloneContents();e.deleteContents();var i=document.body.appendChild(document.createElement("div"));i.appendChild(r);var s=i.innerText;i.parentNode.removeChild(i),e.insertNode(document.createTextNode(s))})}),this.$input.deselect=function(){if(!document.selection)return;var e=document.selection.createRange();e.collapse(),e.select()};var r;apf.addListener(this.$input,"keypress",r=function(n){if(e.$input.getAttribute("type")!="password")return apf.removeListener(e.$input,"keypress",r);n=n||window.event;var i=-1;n.which?i=n.which:n.keyCode&&(i=n.keyCode);var s=!1;n.shiftKey?s=n.shiftKey:n.modifiers&&(s=!!(n.modifiers&4)),i>=65&&i<=90&&!s||i>=97&&i<=122&&s?apf.setStyleClass(e.$ext,"capsLock"):apf.setStyleClass(e.$ext,null,["capsLock"]),t=!0})},this.$loadAml=function(){typeof this["initial-message"]=="undefined"&&this.$setInheritedAttribute("initial-message"),typeof this.realtime=="undefined"&&this.$setInheritedAttribute("realtime")},this.addEventListener("DOMNodeRemovedFromDocument",function(){this.$button&&(this.$button.onmousedown=null),this.$input&&(this.$input.onkeypress=this.$input.onmouseup=this.$input.onmouseout=this.$input.onmousedown=this.$input.onkeydown=this.$input.onkeyup=this.$input.onselectstart=null)})}.call(apf.textbox.prototype=new apf.StandardBinding),apf.config.$inheritProperties["initial-message"]=1,apf.config.$inheritProperties.realtime=1,apf.input.prototype=apf.secret.prototype=apf.password.prototype=apf.textarea.prototype=apf.email.prototype=apf.textbox.prototype,apf.aml.setElement("input",apf.input),apf.aml.setElement("secret",apf.secret),apf.aml.setElement("password",apf.password),apf.aml.setElement("textarea",apf.textarea),apf.aml.setElement("textbox",apf.textbox),apf.toolbar=function(e,t){this.$init(t||"toolbar",apf.NODE_VISIBLE,e)},function(){this.$focussable=!1,this.$draw=function(){this.$ext=this.$getExternal(),this.$int=this.$getLayoutNode("main","container",this.$ext)}}.call(apf.toolbar.prototype=new apf.Presentation),apf.aml.setElement("toolbar",apf.toolbar),apf.tree=function(e,t){this.$init(t||"tree",apf.NODE_VISIBLE,e)},function(){function s(){}var e=2,t=4,n=8,r=16,i=this.$treeState;this.$mode=0,this.$propHandlers.mode=function(e){"check|radio".indexOf(e)>-1?(this.hasFeature(apf.__MULTICHECK__)||this.implement(apf.MultiCheck),this.addEventListener("afterrename",s),this.multicheck=e=="check",this.$mode=this.multicheck?1:2):(this.removeEventListener("afterrename",s),this.$mode=0)},this.$initNode=function(t,n,r){this.$getNewContext("item");var s=n&e||this.emptyMessage&&this.$applyBindRule("empty",t),o=this.$getLayoutNode("item");o.setAttribute("onmouseover","var o = apf.lookup("+this.$uniqueId+");            o.$setStyleClass(this, 'hover', null, true);"),o.setAttribute("onmouseout","var o = apf.lookup("+this.$uniqueId+");            o.$setStyleClass(this, '', ['hover'], true);"),this.$setStyleClass(this.$getLayoutNode("item","class"),i[n]).setAttribute(apf.xmldb.htmlIdTag,r),this.$setStyleClass(this.$getLayoutNode("item","container"),i[n]);var u=this.$getLayoutNode("item","openclose");u&&(u.setAttribute("children",s),u.setAttribute("onmousedown","if (this.getAttribute('children') == false) return;                var o = apf.lookup("+this.$uniqueId+");                o.slideToggle(this, null, null, true);                apf.cancelBubble(event, o);"),u.setAttribute("ondblclick","event.cancelBubble = true"));if(this.$mode){var a=this.$getLayoutNode("item","check");if(!a)return!1;a.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+");                    o.checkToggle(this, true);o.$skipSelect = true;"),apf.isTrue(this.$applyBindRule("checked",t))?(this.$checkedList.push(t),this.$setStyleClass(o,"checked")):this.isChecked(t)&&this.$setStyleClass(o,"checked")}var f=this.opencloseaction||"ondblclick",l=this.$getLayoutNode("item","icon");l&&l!=u&&(f!="ondblclick"&&l.setAttribute(f,"var o = apf.lookup("+this.$uniqueId+");"+(f=="onmousedown"?"o.select(this, apf.getCtrlKey(event), event.shiftKey, event.button);":"")+"o.slideToggle(this, null, null, true);"),f!="onmousedown"&&l.setAttribute("onmousedown","apf.lookup("+this.$uniqueId+").select(this, apf.getCtrlKey(event), event.shiftKey, event.button);"),l.setAttribute("ondblclick","var o = apf.lookup("+this.$uniqueId+");              o.choose(null, true);"+"o.stopRename();"+(!f=="ondblclick"?"o.slideToggle(this, null, null, true);":"")+"apf.cancelBubble(event,o);"));var c=this.$getLayoutNode("item","select"),h;this.hasFeature(apf.__RENAME__)||this.hasFeature(apf.__DRAGDROP__)?(h="var o = apf.lookup("+this.$uniqueId+");                 var xmlNode = apf.xmldb.findXmlNode(this);                 var isSelected = o.isSelected(xmlNode);                 this.hasPassedDown = true;                 if (event.button == 2)                     o.stopRename();                 else if (!o.renaming && o.hasFocus() && isSelected == 1)                     this.dorename = true;                 if (!o.hasFeature(apf.__DRAGDROP__) || !isSelected && !apf.getCtrlKey(event))                     o.select(this, apf.getCtrlKey(event), event.shiftKey, event.button);                 apf.cancelBubble(event, o);",c.setAttribute("onmouseout","this.hasPassedDown = false;"+(c.getAttribute("onmouseout")||"")),c.setAttribute("onmouseup","if (!this.hasPassedDown) return;                var o = apf.lookup("+this.$uniqueId+");"+"if (this.dorename && !o.mode)                    o.startDelayedRename(event, null, true);"+"this.dorename = false;                 var xmlNode = apf.xmldb.findXmlNode(this);                 var isSelected = o.isSelected(xmlNode);                 if (o.hasFeature(apf.__DRAGDROP__))                     o.select(this, apf.getCtrlKey(event), event.shiftKey, event.button);")):h="o.select(this, apf.getCtrlKey(event), event.shiftKey, event.button);                            apf.cancelBubble(event, o);",f!="ondblclick"&&c.setAttribute(f,"var o = apf.lookup("+this.$uniqueId+");"+(f=="onmousedown"?h:"")+"o.slideToggle(this, null, null, true);"),f!="onmousedown"&&c.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+");"+h),c.setAttribute("ondblclick","var o = apf.lookup("+this.$uniqueId+");          o.choose(null, true);"+"o.stopRename();this.dorename=false;"+(f=="ondblclick"?"o.slideToggle(this, null, null, true);":"")+"apf.cancelBubble(event, o);");if(l){var p=this.$applyBindRule("icon",t);p&&(l.tagName.match(/^img$/i)?l.setAttribute("src",apf.getAbsolutePath(this.iconPath,p)):l.setAttribute("style","background-image:url("+apf.getAbsolutePath(this.iconPath,p)+")"))}var d=this.$getLayoutNode("item","caption");d&&apf.setNodeValue(d,this.$applyBindRule("caption",t));var v=this.$applyBindRule("tooltip",t);v&&o.setAttribute("title",v);var m=this.$applyBindRule("css",t);return m&&(this.$setStyleClass(this.$getLayoutNode("item",null,o),m),this.$setStyleClass(this.$getLayoutNode("item","container",o),m),this.$dynCssClasses.push(m)),o},this.$updateNode=function(e,t){if(!e)return;var n=this.$getLayoutNode("item","icon",t),r=this.$applyBindRule("icon",e);n&&r&&(n.tagName&&n.tagName.match(/^img$/i)?n.src=apf.getAbsolutePath(this.iconPath,r):n.style.backgroundImage="url("+apf.getAbsolutePath(this.iconPath,r)+")");var i=this.$getLayoutNode("item","caption",t);i&&(i.nodeType==1?i.innerHTML=this.$applyBindRule("caption",e):i.nodeValue=this.$applyBindRule("caption",e));var s=this.$applyBindRule("tooltip",e);s&&t.setAttribute("title",s);var o=this.$applyBindRule("css",e);if(o||this.$dynCssClasses.length)this.$setStyleClass(t,o,this.$dynCssClasses),o&&!this.$dynCssClasses.contains(o)&&this.$dynCssClasses.push(o)},this.$draw=function(){this.$drawBase()}}.call(apf.tree.prototype=new apf.BaseTree),apf.aml.setElement("tree",apf.tree),apf.aml.setElement("checked",apf.BindingRule),apf.webdav=function(e,t){this.$init(t||"webdav",apf.NODE_HIDDEN,e),this.$locks={},this.$lockedStack=[],this.$lockId=0,this.$serverVars={},this.$fsCache={}},function(){function e(){for(var e=0;e<arguments.length;e++)typeof this.$serverVars[arguments[e]]!="undefined"&&(this.$serverVars[arguments[e]]=null,delete this.$serverVars[arguments[e]])}function t(t){e.call(this,"auth-password");var n={username:this.$getVar("auth-username"),server:this.$server,message:t||"Access denied. Please check you username or password."},r=this.$getVar("auth-callback");return r&&(r(null,apf.ERROR,n),e.call(this,"auth-callback")),this.dispatchEvent("authfailure",n)}function n(t){e.call(this,"auth-password");var n={username:this.$getVar("auth-username"),server:this.$server,message:t||"Could not connect to server, please contact your System Administrator."},r=this.$getVar("auth-callback");return r&&(r(null,apf.ERROR,n),e.call(this,"auth-callback")),this.dispatchEvent("connectionerror",n)}function r(e){return new Error(apf.formatErrorString(0,this,"WebDAV Communication error",e))}function i(e){var t,n=!1;if(apf.isIE)try{t=new ActiveXObject("Msxml2.DOMDocument")}catch(r){}else if(document.implementation&&document.implementation.createDocument)try{t=document.implementation.createDocument("","",null)}catch(r){}try{apf.isIE&&(t.async=!1,t.load(this.$rootPath))}catch(r){n=!0}var i=this.ownerDocument&&this.ownerDocument.getElementsByTagNameNS(apf.ns.apf,"auth")[0];n?i.authRequired(e):(this.$regVar("authenticated",!0),e&&e.method&&e.method.apply(e.context,e.args))}function s(e){return this.$locks[e]={path:e,id:this.$lockId++,token:null}}function o(e,t,n){var i=parseInt(n.status,10),o=n.url.replace(this.$server,""),a=this.$locks[o]||s.call(this,o);if(i==400||i==409||i==423||i==412){u.call(this,n.url.replace(this.$server,""));var l=r.call(this,"Unable to apply lock to '"+o+"'. Server says: "+apf.webdav.STATUS_CODES[String(i)]);if(this.dispatchEvent("error",{error:l,bubbles:!0})===!1)throw l}var c=apf.webdav.NS,h=$xmlns(e,"owner",c.ns0)[0],p=$xmlns(e,"locktoken",c.D)[0];a.path=o,a.type="write",a.scope=$xmlns(e,"exclusive",c.D).length?"exclusive":"shared",a.depth=$xmlns(e,"depth",c.D)[0].firstChild.nodeValue,a.owner=$xmlns(h,"href",c.ns0)[0].firstChild.nodeValue,a.timeout=$xmlns(e,"timeout",c.D)[0].firstChild.nodeValue,a.token=$xmlns(p,"href",c.D)[0].firstChild.nodeValue.split(":")[1],f.call(this,a)}function u(e){var t=this.$locks[e];if(!t)return;f.call(this,t,!0),this.$locks[e]=t=null,delete this.$locks[e]}function a(e,t,n){return this.$lockedStack.push({lockId:e.id,func:t,args:n})}function f(e,t){for(var n=this.$lockedStack.length-1;n>=0;n--){if(this.$lockedStack[n].lockId!=e.id)continue;t||this[this.$lockedStack[n].func].apply(this,this.$lockedStack[n].args),this.$lockedStack.remove(n)}}function l(e,t){var n=['<?xml version="1.0" encoding="utf-8" ?>','<D:propertyupdate xmlns:D="',apf.webdav.NS.D,'">'],r=!1,i,s,o;for(i in e){r=!0;break}if(r){n.push("<D:set>");for(i in e)for(s in e[i])n.push("<D:prop>",e[i][s],"</D:prop>");n.push("</D:set>")}r=!1;for(i in t){r=!0;break}if(r){n.push("<D:remove><D:prop>");for(i in t)for(s=0,o=t[i].length;s<o;s++)n.push("<",t[i][s],' xmlns="',i,'"/>');n.push("</D:prop></D:remove>")}return n.push("</D:propertyupdate>"),n.join("")}function c(e,n,r,i){var s=parseInt(r.status,10);if(s==403||s==401||!e)return i?i.call(this,null,n,r):t.call(this);typeof e=="string"&&(e=apf.getXml(e));var o=$xmlns(e,"response",apf.webdav.NS.D),u=[];o.length&&this.$regVar("authenticated",!0);var a;for(var f=[],l,c=0,p=o.length;c<p;c++){a=decodeURIComponent($xmlns(o[c],"href",apf.webdav.NS.D)[0].firstChild.nodeValue);if(a===r.url)continue;h.call(this,o[c],l={}),l.data&&f.push({toString:function(){return this.v},data:l.data,v:(l.data.type=="file"?1:0)+""+l.data.name.toLowerCase()})}f.sort();for(var c=0,d=f.length;c<d;c++)u.push(f[c].data.xml);i&&i.call(this,"<files>"+u.join("")+"</files>",n,r)}function h(e,t){var n=apf.webdav.NS,r=decodeURIComponent($xmlns(e,"href",n.D)[0].firstChild.nodeValue.replace(/[\\\/]+$/,"")),i=r.split("/").pop(),s=i.charAt(0)==".";if(!this.$showHidden&&s)return"";var o,u,a=$xmlns(e,"collection",n.D).length>0?"folder":"file",f=$xmlns(e,"getcontenttype",n.D),l=$xmlns(e,"executable",n.lp2);u=this.$fsCache[r]=apf.extend(this.$fsCache[r]||{},{path:r,type:a,size:parseInt(a=="file"?(o=$xmlns(e,"getcontentlength",n.lp1)).length?o[0].firstChild.nodeValue:0:0,10),name:i,contentType:a=="file"&&f.length?f[0].firstChild.nodeValue:"",creationDate:(o=$xmlns(e,"creationdate",n.lp1)).length?o[0].firstChild.nodeValue:"",lastModified:(o=$xmlns(e,"getlastmodified",n.lp1)).length?o[0].firstChild.nodeValue:"",etag:(o=$xmlns(e,"getetag",n.lp1)).length?o[0].firstChild.nodeValue:"",lockable:$xmlns(e,"locktype",n.D).length>0,executable:l.length>0&&l[0].firstChild.nodeValue=="T"}),t&&(t.data=u);var c=["<"+a+' path="'+apf.escapeXML(r)+'" type="'+a+'" size="'+u.size+'" name="'+apf.escapeXML(u.name)+'" contenttype="'+u.contentType+'" modifieddate="'+u.lastModified+'" creationdate="'+u.creationDate+'" lockable="'+u.lockable.toString()+'" hidden="'+s.toString()+'" executable="'+u.executable.toString()+'"'];if(this["extra-properties"]){var e,h=e.selectNodes("//a:*"),p=0,d=h.length;for(;p<d;++p)e=h[p],e.firstChild&&e.firstChild.nodeValue&&c.push(" "+e.localName+'="'+e.firstChild.nodeValue+'"')}return u.xml=c.join("")+"/>"}this.useHTTP=!0,this.method="GET",this.$showHidden=!1,this.$booleanProperties.showhidden=!0,this.$booleanProperties["extra-properties"]=!0,this.$supportedProperties.push("showhidden","extra-properties","force-host"),this.$propHandlers.showhidden=function(e){this.$showHidden=e},this.$regVar=function(e,t){return this.$serverVars[e]=t,t},this.$getVar=function(e){return this.$serverVars[e]||""},this.doRequest=function(e,t,n,s,o,u,a){if(!this.$getVar("authenticated"))return i.call(this,{method:this.doRequest,context:this,args:arguments});o&&(s||(s={}),s["Content-type"]="text/xml; charset=utf-8");var f=this["force-host"];f&&t.indexOf(f)===-1&&(t=f.replace(/[\/]+$/,"")+"/"+t.replace(/^[\/]+/,""));var l=this;return this.get(t||this.$server,{callback:function(t,n,i){if(n!=apf.SUCCESS){var o;o=r.call(l,"Url: "+i.url+"\nInfo: "+i.message);if(e)return e.call(l,t,n,i,a);throw o}i.headers=s;var u=parseInt(i.status,10);if(u==401)return;var f=i.http.responseText||"";if((f.length>10||f.replace(/^[\s\n\r]+|[\s\n\r]+$/g,"")!="")&&f.substr(0,14)=="<?xml version=")try{t=i.http.responseXML&&i.http.responseXML.documentElement?apf.xmlParseError(i.http.responseXML):apf.getXmlDom(i.http.responseText),apf.supportNamespaces||t.setProperty("SelectionLanguage","XPath"),t=t.documentElement,i.data=t}catch(c){if(e)return e.call(l,t,n,i,a);throw r.call(l,"Received invalid XML\n\n"+c.message)}typeof e=="function"&&e.call(l,t,n,i,a)},nocache:!1,useXML:!1,ignoreOffline:!0,data:n||"",binary:u||!1,headers:s,username:this.$getVar("auth-username")||null,password:this.$getVar("auth-password")||null})},this.authenticate=function(t,n,r){this.$regVar("auth-username",t),this.$regVar("auth-password",n),this.$regVar("auth-callback",r);var i=apf.document.getElementsByTagNameNS(apf.ns.apf,"auth")[0];if(!i)return;this.doRequest(function(t,n,r){if(r.status==401)return i.authRequired();this.$regVar("authenticated",!0);var s=this.$getVar("auth-callback");s&&(s(null,n,r),e.call(this,"auth-callback"))},this.$rootPath,null,{},!1,null)},this.reset=function(){e.call(this,"authenticated"),e.call(this,"auth-username"),e.call(this,"auth-password"),e.call(this,"auth-callback")},this.exists=function(e,t){this.getProperties(e,0,function(e,n,r){t(n===apf.SUCCESS)})},this.readFile=this.read=function(e,t){this.method="GET",this.doRequest(function(e,n,i){var s=parseInt(i.status,10);if(s==403){var o=r.call(this,"Unable to read file. Server says: "+apf.webdav.STATUS_CODES[403]);if(this.dispatchEvent("error",{error:o,bubbles:!0})===!1&&!t)throw o}else t?t.call(this,i.http.responseText,n,i):this.dispatchEvent("onfilecontents",{data:i.http.responseTex})},e)},this.readdir=function(e,t){return e.charAt(e.length-1)!="/"&&(e+="/"),this.getProperties(e,1,t)},this.mkdir=function(e,t,n){if(t){var i=this.lock(e);if(!i.token)return a.call(this,i,"mkdir",arguments)}var s=this;this.method="MKCOL",this.doRequest(function(i,o,a){t&&u.call(this,e);var f=parseInt(a.status,10);if(f==201)s.readdir(e.substr(0,e.lastIndexOf("/")),n);else if(f==400||f==403||f==405||f==409||f==415||f==507){var l=r.call(this,"Unable to create directory '"+e+"'. Server says: "+apf.webdav.STATUS_CODES[String(f)]);this.dispatchEvent("error",{error:l,bubbles:!0})===!1&&n&&n(l)}},e,null,t&&i.token?{If:"<"+i.token+">"}:null,!0)},this.list=function(e,t){return this.getProperties(e,0,t)},this.writeFile=this.write=function(e,t,n,i,s){if(n){var o=this.lock(e);if(!o.token)return a.call(this,o,"write",arguments)}typeof s=="undefined"&&typeof i=="function"&&(s=i,i=null),this.method="PUT";var u=this;this.doRequest(function(t,n,i){var o=parseInt(i.status,10);if(n!=apf.SUCCESS){var a=r.call(this,"Unable to write to file. Server says: "+apf.webdav.STATUS_CODES[String(o)]);if(this.dispatchEvent("error",{error:a,bubbles:!0})===!1&&!s)throw a;return s&&s.call(this,t,apf.ERROR,i)}u.getProperties(e,0,s)},e,t,n&&o.token?{If:"<"+o.token+">"}:null,null,i)},this.copy=function(e,t,n,i,s){if(!t||e==t)return s&&s("",apf.SUCCESS,{});if(i){var o=this.lock(e);if(!o.token)return a.call(this,o,"copy",arguments)}this.method="COPY";var f={Destination:t||this.$server};typeof n=="undefined"&&(n=!0),n||(f.Overwrite="F"),i&&o.token&&(f.If="<"+o.token+">"),this.doRequest(function(n,o,a){i&&u.call(this,e);var f=parseInt(a.status,10);if(f==400||f==403||f==409||f==412||f==423||f==424||f==502||f==507){var l=r.call(this,"Unable to copy file '"+e+"' to '"+t+"'. Server says: "+apf.webdav.STATUS_CODES[String(f)]);if(this.dispatchEvent("error",{error:l,bubbles:!0})===!1&&!s)throw l}s&&s.call(this,n,o,a)},e,null,f)},this.rename=this.move=function(e,t,n,i,s){if(!t||e==t)return s&&s("",apf.SUCCESS,{});if(i){var o=this.lock(e);if(!o.token)return a.call(this,o,"move",arguments)}this.method="MOVE";var f={Destination:t||this.$server};typeof n=="undefined"&&(n=!0),n||(f.Overwrite="F"),i&&o.token&&(f.If="<"+o.token+">"),this.doRequest(function(n,o,a){i&&u.call(this,e);var f=parseInt(a.status,10);if(f==400||f==403||f==409||f==412||f==423||f==424||f==501||f==502||f==500){var l=r.call(this,"Unable to move file '"+e+"' to '"+t+"'. Server says: "+apf.webdav.STATUS_CODES[String(f)]);if(this.dispatchEvent("error",{error:l,bubbles:!0})===!1&&!s)throw l}else this.$fsCache[e]&&(this.$fsCache[t]=this.$fsCache[e],this.$fsCache[t].path=t,delete this.$fsCache[e]);s&&s.call(this,n,o,a)},e,null,f)},this.remove=function(e,t,n){if(t){var i=this.lock(e);if(!i.token)return a.call(this,i,"remove",arguments)}this.method="DELETE",this.doRequest(function(i,s,o){t&&u.call(this,e);var a=parseInt(o.status,10);if(a==400||a==423||a==424){var f=r.call(this,"Unable to remove file '"+e+"'. Server says: "+apf.webdav.STATUS_CODES[String(a)]);if(this.dispatchEvent("error",{error:f,bubbles:!0})===!1&&!n)throw f}n&&n.call(this,i,s,o)},e,null,t&&i.token?{If:"<"+i.token+">"}:null)},this.report=function(e,t,n,i){var s=['<?xml version="1.0" encoding="utf-8" ?>',"<D:"+t+' xmlns:D="',apf.webdav.NS.D,'">'];if(n)for(var o in n)s.push("<D:"+o,n[o]?">"+apf.escapeXML(n[o])+"</D:"+o+">":"/>");return s.push("</D:",t,">"),this.method="REPORT",this.doRequest(function(t,n,s){var o=parseInt(s.status,10);if(n!=apf.SUCCESS){var u=r.call(this,"Unable to fetch report on '"+e+"'. Server says: "+apf.webdav.STATUS_CODES[String(o)]);if(this.dispatchEvent("error",{error:u,bubbles:!0})===!1&&!i)throw u}i&&i.call(this,t,n,s)},e,s.join(""))},this.lock=function(e,t,n,r,i){var u=this.$locks[e];if(u&&u.token)return u;this.method="LOCK",n=n?"Infinite, Second-4100000000":"Second-"+n;var a={Timeout:n};t&&(a.Depth=t||"Infinity"),r&&(a.If="<"+r+">");var f='<?xml version="1.0" encoding="utf-8"?><D:lockinfo xmlns:D="'+apf.webdav.NS.D+'">'+"<D:lockscope><D:exclusive /></D:lockscope>"+"<D:locktype><D:write /></D:locktype>"+"<D:owner><D:href>"+document.location.toString().escapeHTML()+0/0+"</D:lockinfo>";return this.doRequest(o,e,f,a,!0,null,i),s.call(this,e)},this.unlock=function(e,t){typeof e=="string"&&(e=this.$locks[e]);if(!e||!e.token)return;this.method="UNLOCK",this.doRequest(function(e,t,n){u.call(this,n.url.replace(this.$server,""))},e.path,null,{"Lock-Token":"<"+e.token+">"},!0,t)},this.getProperties=function(e,t,n,r){this.method="PROPFIND";var i='<?xml version="1.0" encoding="utf-8" ?><D:propfind xmlns:D="'+apf.webdav.NS.D+'">'+"<D:allprop />"+"</D:propfind>";r=r||{},r.Depth=typeof t!="undefined"?t:1,this.doRequest(c,e,i,r,!0,null,n)},this.setProperties=function(e,t,n,r){this.method="PROPPATCH",this.doRequest(function(e,t,n){},e,l.call(this,t,n),r?{If:"<"+r+">"}:null,!0)},this.exec=function(e,t,n){var r=function(e,r,i){i.originalArgs=t,typeof t[t.length-1]=="function"&&t[t.length-1](e,r,i),n&&n(e,r,i)};switch(e){case"login":case"authenticate":this.authenticate(t[0],t[1],r);break;case"logout":this.reset();break;case"exists":this.exists(t[0],r);break;case"read":this.readFile(t[0],r);break;case"create":var i=t[0]?t[0]:"";i.charAt(i.length-1)!="/"&&(i+="/"),this.writeFile(i+t[1],t[2],t[3]||!1,r);break;case"write":case"store":case"save":this.writeFile(t[0],t[1],t[2]||!1,r);break;case"copy":case"cp":this.copy(t[0],t[1],t[2]||!0,t[3]||!1,r);break;case"rename":var s=t[1].substr(0,t[1].lastIndexOf("/")+1);this.rename(t[1],s+t[0],t[2]||!1,t[3]||!1,r);break;case"move":case"mv":i=t[1],i.charAt(i.length-1)!="/"&&(i+="/"),this.rename(t[0],i+t[0].substr(t[0].lastIndexOf("/")+1),t[2]||!1,t[3]||!1,r);break;case"remove":case"rmdir":case"rm":this.remove(t[0],t[1]||!1,r);break;case"readdir":case"scandir":this.readdir(t[0],r);break;case"getroot":this.getProperties(this.$rootPath,0,r);break;case"mkdir":i=t[0]?t[0]:"",i.charAt(i.length-1)!="/"&&(i+="/"),this.mkdir(i+t[1],t[2]||!1,r);break;case"lock":this.lock(t[0],null,null,null,r);break;case"unlock":this.unlock(t[0],r);break;case"report":this.report(t[0],t[1],t[2],r);break;default:}}}.call(apf.webdav.prototype=new apf.Teleport),apf.aml.setElement("webdav",apf.webdav),apf.webdav.NS={D:"DAV:",ns0:"DAV:",lp1:"DAV:",lp2:"http://apache.org/dav/props/"},apf.webdav.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"None-Authoritive Information",204:"No Content",1223:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested range not satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version not supported",507:"Insufficient Storage"},apf.UndoData=function(e,t){this.localName="UndoData",this.extra={},this.rdbQueue={},apf.extend(this,e),this.timestamp||(this.timestamp=(new Date).getUTCTime()),t?this.at=t:e&&e.tagName=="UndoData"?(this.args=e.args.slice(),this.rdbArgs=e.rdbArgs.slice()):this.selNode=this.selNode||(this.action=="removeNode"?this.args[0]:this.amlNode?this.amlNode.selected:null);var n,r=this;this.processRsbQueue=function(){this.rdbModel&&this.rdbModel.rdb.$processQueue(this)},this.clearRsbQueue=function(){this.rdbQueue=this.rdbModel=null},this.saveChange=function(e,t,r){if(this.action=="group"){var i=this.args[1];return t.$addToQueue(i,e,!0),t.$queueNext(this)}var s;this.xmlActionNode&&(s=this.xmlActionNode.getAttribute(e?"undo":"set"),e&&!s&&(s=this.xmlActionNode.getAttribute("set")));if(!s)return this.processRsbQueue(),t.$queueNext(this);this.state=e?"restoring":"saving";if(!n.asyncs)return t.$receive(null,apf.SUCCESS,{amlNode:this.amlNode},this,r);n.ignoreOffline=!0,apf.saveData(s,n)},this.preparse=function(e,t,i,s){var o;return this.xmlActionNode&&(o=this.xmlActionNode.getAttribute(e?"undo":"set"),e&&!o&&(o=this.xmlActionNode.getAttribute("set"))),o?(n=apf.extend({xmlNode:this.action=="multicall"?this.args[0].xmlNode:this.selNode||this.xmlNode,userdata:apf.isTrue(this.xmlActionNode.getAttribute("ignore-fail")),multicall:i,undo:e,precall:!0,callback:function(e,i,o){if(n.asyncs)return o.amlNode=r.amlNode,t.$receive(e,i,o,r,s)}},this.extra),apf.saveData(o,n),this):this}},apf.actiontracker.actions={setTextNode:function(e,t){var n=e.args;t?apf.xmldb.setTextNode(n[0],e.extra.oldValue,n[2],e):apf.xmldb.setTextNode(n[0],n[1],n[2],e)},setAttribute:function(e,t){var n=e.args;t?e.extra.oldValue?apf.xmldb.setAttribute(n[0],n[1],e.extra.oldValue,n[3],e):apf.xmldb.removeAttribute(n[0],n[1],null,e):(e.extra.name=n[1],e.extra.oldValue=n[0].getAttribute(n[1]),apf.xmldb.setAttribute(n[0],n[1],n[2],n[3],e))},removeAttribute:function(e,t){var n=e.args;t?apf.xmldb.setAttribute(n[0],n[1],e.extra.oldValue,n[2],e):(e.extra.name=n[1],e.extra.oldValue=n[0].getAttribute(n[1]),apf.xmldb.removeAttribute(n[0],n[1],n[2],e))},replaceNode:function(e,t){var n=e.args;t?apf.xmldb.replaceNode(n[1],n[0],n[2],e):apf.xmldb.replaceNode(n[0],n[1],n[2],e)},addChildNode:function(e,t){var n=e.args;t?apf.xmldb.removeNode(e.extra.addedNode,null,e):apf.xmldb.addChildNode(n[0],n[1],n[2],n[3],e)},appendChild:function(e,t){var n=e.args;t?apf.xmldb.removeNode(e.xmlNode,null,e):apf.xmldb.appendChild(n[0],n[1],n[2],n[3],n[4],e)},moveNode:function(e,t){var n=e.args;t?apf.xmldb.moveNode(e.extra.oldParent,n[1],e.extra.beforeNode,n[3],e):apf.xmldb.moveNode(n[0],n[1],n[2],n[3],e)},removeNode:function(e,t){var n=e.args;t?apf.xmldb.appendChild(e.extra.parent,e.extra.removedNode,e.extra.beforeNode,null,null,e):apf.xmldb.removeNode(n[0],n[1],e)},removeNodeList:function(e,t){if(t){var n=e.extra.removeList;for(var r=n.length-1;r>=0;r--)apf.xmldb.appendChild(n[r].pNode,n[r].removedNode,n[r].beforeNode,null,null,e)}else apf.xmldb.removeNodeList(e.args,e)},group:function(e,t,n){if(!e.$undostack){var r=e.args[0];e.$undostack=r,e.$redostack=[]}n[t?"undo":"redo"](e.$undostack.length,!1,e.$undostack,e.$redostack)},setValueByXpath:function(e,t){var n,r=e.args;if(!t)if(n=e.extra.newNode)n.nodeType==2?(apf.xmldb.setAttribute(e.extra.ownerElement,n.nodeName,n.nodeValue),e.extra.newNode=e.extra.ownerElement.getAttributeNode(n.nodeName)):apf.xmldb.appendChild(e.extra.parentNode,e.extra.newNode,null,null,null,e);else{var i=[];apf.setNodeValue(r[0],r[1],!0,{undoObj:e,xpath:r[2],newNodes:i,forceNew:r[3]}),n=e.extra.newNode=i[0],n&&(n.nodeType==2?e.extra.ownerElement=n.ownerElement||n.selectSingleNode(".."):e.extra.parentNode=e.extra.newNode.parentNode)}else(n=e.extra.newNode)?n.nodeType==2?apf.xmldb.removeAttribute(e.extra.ownerElement,n.nodeName,null,e):apf.xmldb.removeNode(e.extra.newNode,null,e):apf.setNodeValue(e.extra.appliedNode,e.extra.oldValue,!0,{undoObj:e})},multicall:function(e,t,n){var r=e.args,i=apf.xmldb.delayUpdate;apf.xmldb.delayUpdate=!0;if(!t){for(var s=0;s<r.length;s++)r[s].extra||(r[s].extra={}),r[0].rdbModel&&(r[s].rdbQueue=r[0].rdbQueue),apf.actiontracker.actions[r[s].action](r[s],!1,n);r[0].rdbModel&&(e.rdbModel=r[0].rdbModel,e.rdbQueue=r[0].rdbQueue)}else for(var s=r.length-1;s>=0;s--)apf.actiontracker.actions[r[s].action](r[s],!0,n);apf.xmldb.delayUpdate=i}},apf.cgi=function(){this.supportMulticall=!1,this.namedArguments=!0,this.unserialize=function(e){return e},this.getSingleCall=function(e,t,n){n.push(t)},this.createMessage=function(e,t){function i(e,t){if(e&&e.dataType==apf.ARRAY)for(var s=0;s<e.length;s++)i(e[s],t+"%5B"+s+"%5D");else if(e&&typeof e=="object")if(e.nodeType){try{var o=e.outerHTML||e.serialize&&e.serialize()||apf.getCleanCopy(e).xml}catch(u){var o="Could not serialize object"}r.push(t+"="+encodeURIComponent(o))}else for(n in e){if(typeof e[n]=="function")continue;i(e[n],t+"%5B"+encodeURIComponent(n)+"%5D")}else typeof e!="undefined"&&e!==null&&r.push(t+"="+encodeURIComponent(e))}var n,r=[];if(this.multicall){r.push("func="+this.mcallname);for(var s=0;s<t[0].length;s++)i(t[0][s],"f%5B"+s+"%5D")}else for(n in t)i(t[n],n);return this.baseUrl||(this.baseUrl=this.url),this.url=this.$methods[e].url?this.$methods[e].url:this.baseUrl,this.method!="GET"?r.join("&"):(this.url=this.url+(r.length?(this.url.indexOf("?")>-1?"&":"?")+r.join("&"):""),"")},this.addEventListener("DOMNodeInsertedIntoDocument",function(){this.method=(this["http-method"]||"GET").toUpperCase(),this.contentType=this.method=="GET"?null:"application/x-www-form-urlencoded"}),this.submitForm=function(e,t){this.postform||this.addMethod("postform",t);var n=[];for(var r=0,i=e.elements.length;r<i;r++){if(!e.elements[r].name)continue;if(e.elements[r].tagname=="input"&&(e.elements[r].type=="checkbox"||e.elements[r].type=="radio")&&!e.elements[r].checked)continue;if(e.elements[r].tagname=e.elements[r].multiple)for(var s=0;s<e.elements[r].options.length;s++)e.elements[r].options[s].selected&&n.push(e.elements[r].name+"="+encodeURIComponent(e.elements[r].options[s].value));else n.push(e.elements[r].name+"="+encodeURIComponent(e.elements[r].value))}var o=e.action||location.href;return this.urls.postform=o+(o.indexOf("?")>-1?"&":"?")+n.join("&"),this.postform.call(this),!1}},apf.rest=function(){this.supportMulticall=!1,this.namedArguments=!1,this.nocache=!1,this.unserialize=function(e){return e},this.getSingleCall=function(e,t,n){n.push(t)},this.createMessage=function(e,t){this.baseUrl||(this.baseUrl=this.url);var n=this.$methods[e],r="NOTIFY|SEND|POST|PUT".indexOf(n["http-method"].toUpperCase())>-1?t.pop():"",i;this.method=n["http-method"],n["content-type"]&&(this.contentType=n["content-type"]);var s=0,o=t.length;for(;s<o;++s)t[s]=encodeURIComponent(t[s]);return this.url=(i=n.url?n.url:this.baseUrl)+(o?(i.charAt(i.length-1)=="/"?"":"/")+t.join("/"):""),this.contentType=r?"application/x-www-form-urlencoded":null,r}},apf.textbox.masking=function(){function h(n,r){var i=a.substr(r,1),s=f.substr(r,1);return n.match(new RegExp(t[i]))==null?e:s==">"?n.toUpperCase():s=="<"?n.toLowerCase():n}function p(e){e<0&&(e=0);if(apf.hasMsRangeObject){var t=i.createTextRange();t.expand("textedit"),t.select();if(s[e]==null)return t.collapse(!1),t.select(),n=s.length,!1;t.collapse(),t.moveStart("character",s[e]),t.moveEnd("character",1),t.select()}else{if(typeof s[e]=="undefined")return i.selectionStart=i.selectionEnd=s[s.length-1]+1,n=s.length,!1;i.selectionStart=s[e],i.selectionEnd=s[e]+1}n=e}function d(t){if(s.length&&s[n]==null)return!1;t=h(t,n);if(t==e)return!1;if(apf.hasMsRangeObject){var r=i.createTextRange();r.expand("textedit"),r.collapse(),r.moveStart("character",s[n]),r.moveEnd("character",1),r.text=t,apf.document.activeElement==this&&r.select()}else{var o=i.value,a=i.selectionStart,f=i.selectionEnd;i.value=o.substr(0,a)+t+o.substr(f),i.selectionStart=a,i.selectionEnd=f}return u[n]=t,!0}function v(e){if(s[e]==null)return!1;if(apf.hasMsRangeObject){var t=i.createTextRange();t.expand("textedit"),t.collapse(),t.moveStart("character",s[e]),t.moveEnd("character",1),t.text=l,t.select()}else{var n=i.value,r=s[e],o=s[e]+1;i.value=n.substr(0,r)+l+n.substr(o),i.selectionStart=r,i.selectionEnd=o}u[e]=" "}function m(){var e,t=0;if(!apf.hasMsRangeObject)t=i.selectionStart;else{e=document.selection.createRange();var n=e.duplicate();n.expand("textedit"),n.setEndPoint("EndToStart",e),t=n.text.length}for(var r=0;r<s.length;r++)if(s[r]>t)return r==0?0:r-1;return u.length}var e=9128748732,t={0:"\\d",1:"[12]",9:"[\\d ]","#":"[\\d +-]",L:"[A-Za-z]","?":"[A-Za-z ]",A:"[A-Za-z0-9]",a:"[A-Za-z0-9 ]",X:"[0-9A-Fa-f]",x:"[0-9A-Fa-f ]","&":"[^s]",C:"."},n=-1,r=!1,i=this.$input,s=[],o,u,a,f,l;this.setPosition=function(e){p(e||n||0)},this.addEventListener("$clear",function(){this.value="";if(this.mask)return this.setValue("")}),this.$propHandlers.value=function(e){var t="";if(this.includeNonTypedChars)for(var n=0;n<o.length;n++)o.substr(n,1)!=e.substr(n,1)&&(t+=e.substr(n,1));this.$insertData(t||e),p(u.length)};var c={96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",110:"/"};this.addEventListener("keydown",function(e){var t=e.keyCode,r=!1;switch(t){case 39:p(n+1),r=!0;break;case 37:p(n-1),r=!0;break;case 35:case 34:p(u.length),r=!0;break;case 33:case 36:p(0),r=!0;break;case 8:v(n-1),p(n-1),r=!0;break;case 46:v(n),p(n),r=!0;break;default:t==67&&e.ctrlKey&&(window.clipboardData.setData("Text",this.getValue()),r=!0)}var i=c[t]||String.fromCharCode(t);d(i)&&p(n+1);var s,o=n;this.realtime&&(s=this.getValue())!=this.value&&(this.change(s),p(o));if(apf.isCharacter(e.keyCode)||r)return!1},!0),this.$initMasking=function(){this.$keyHandler=null,r=!0,this.$input[apf.isIphone?"onclick":"onmouseup"]=function(e){var t=Math.min(m(),u.length);return p(t),!1},this.$input.onpaste=function(e){e=e||window.event,e.returnValue=!1,this.host.setValue(window.clipboardData.getData("Text")||""),$setTimeout(function(){p(n)},1)},this.getValue=function(){return this.includeNonTypedChars?o==this.$input.value?"":this.$input.value.replace(new RegExp(l,"g"),""):u.join("")},this.setValue=function(e){this.$propHandlers.value.call(this,e)}},this.setMask=function(e){r||this.$initMasking(),e=e.split(";"),l=e.pop(),this.includeNonTypedChars=parseInt(e.pop(),10)!==0;var n=e.join(""),i="",c="",h="-",p=!1,d=!1,v;s=[],a="",f="";for(var m=-1,g=0;g<n.length;g++){v=n.substr(g,1);if(!!v.match(/[\!\'\"\>\<\\]/)){if(v=="!")d=!0;else if(v=="<"||v==">")h=v;else if(v=="'"||v=='"')p=!p;continue}m++,!p&&t[v]?(s.push(m),c+=l,a+=v,f+=h,i+=t[v]):c+=v}this.$input.value=c,o=c,u=[],l=l},this.$insertData=function(t){if(t==this.getValue())return;var r,o;try{!apf.hasMsRangeObject&&i.selectionStart==i.selectionEnd&&p(0)}catch(u){if(!t)return;var a,f;for(r=0,o=t.length;r<o;r++){n=r;if(s[n]==null)continue;a=h(t.substr(r,1),r);if(a==e)continue;f=i.value,i.value=f.substr(0,s[r])+a+f.substr(s[r]+1)}t.length&&n++;return}t=this.dispatchEvent("insert",{data:t})||t;if(!t){if(!this.getValue())return;for(r=this.getValue().length-1;r>=0;r--)v(r);p(0);return}for(r=0,o=t.length;r<o;r++)n=r,d(t.substr(r,1)),apf.hasMsRangeObject||p(r+1);t.length&&n++}},apf.LiveMarkupPi=function(){this.$init()},function(){this.mainBind="data",this.implement(apf.StandardBinding),this.getDocument=function(){return this.$data&&this.$data.ownerDocument},this.clear=function(e){e=="loading"&&apf.getInheritedAttribute(this,"loading-message")&&(this.$propHandlers.calcdata.call(this,"<span class='loading'>Loading...</span>"),this.calcdata="")},this.$propHandlers.calcdata=function(e){if(this.$skipChange)return;if(this.$data){var t=this.$data.childNodes;for(var n=t.length-1;n>=0;n--)t[n].destroy(!0)}if(typeof e=="string"&&e.indexOf("<a:")>-1){this.$ext.innerHTML="";var r=this.ownerDocument.$domParser.parseFromString("<a:application xmlns:a='"+apf.ns.apf+"'>"+e+"</a:application>","text/xml",{htmlNode:this.$ext,host:this});this.$data=r.documentElement}else{if(this.$data){var t=this.$data.childNodes;for(var n=0;n<t.length;n++)t[n].destroy(!0)}this.$ext&&(this.$ext.innerHTML=e||"")}}}.call(apf.LiveMarkupPi.prototype=new apf.AmlProcessingInstruction(!0)),apf.aml.setProcessingInstruction("lm",apf.LiveMarkupPi),apf.aml.setProcessingInstruction("lm-debug",apf.LiveMarkupPi),apf.aml.setProcessingInstruction("livemarkup",apf.LiveMarkupPi);if(document.all){var oldWinError=window.onerror,z;window.onerror=z=function(e){apf.console.error("Error caught from early startup. Might be a html parser syntax error (not your fault). "+e);if(!arguments.caller)return!0}}apf.Init.addConditional(function(){document.all&&window.onerror==z&&(window.onerror=oldWinError),apf.dispatchEvent("domready")},null,["body","class"]),apf.addDomLoadEvent(function(){apf.Init.run("body")}),apf.start(),define("apf-packaged/apf_release",function(){}),apf.webdav.prototype.getProperties=function(e,t,n,r){function i(e,t){var n=apf.webdav.NS,r=decodeURIComponent($xmlns(e,"href",n.D)[0].firstChild.nodeValue.replace(/[\\\/]+$/,"")),r=document.location.pathname.replace(/\/$/,"")+r;sName=r.split("/").pop(),bHidden=sName.charAt(0)==".";if(!this.$showHidden&&bHidden)return"";var i,s,o=$xmlns(e,"collection",n.D).length>0?"folder":"file",u=$xmlns(e,"getcontenttype",n.D),a=$xmlns(e,"executable",n.lp2);s=this.$fsCache[r]=apf.extend(this.$fsCache[r]||{},{path:r,type:o,size:parseInt(o=="file"?(i=$xmlns(e,"getcontentlength",n.lp1)).length?i[0].firstChild.nodeValue:0:0,10),name:sName,contentType:o=="file"&&u.length?u[0].firstChild.nodeValue:"",creationDate:(i=$xmlns(e,"creationdate",n.lp1)).length?i[0].firstChild.nodeValue:"",lastModified:(i=$xmlns(e,"getlastmodified",n.lp1)).length?i[0].firstChild.nodeValue:"",etag:(i=$xmlns(e,"getetag",n.lp1)).length?i[0].firstChild.nodeValue:"",lockable:$xmlns(e,"locktype",n.D).length>0,executable:a.length>0&&a[0].firstChild.nodeValue=="T"}),t&&(t.data=s);var f=["<"+o+' path="'+apf.escapeXML(r)+'" type="'+o+'" size="'+s.size+'" name="'+apf.escapeXML(s.name)+'" contenttype="'+s.contentType+'" modifieddate="'+s.lastModified+'" creationdate="'+s.creationDate+'" lockable="'+s.lockable.toString()+'" hidden="'+bHidden.toString()+'" executable="'+s.executable.toString()+'"'];if(this["extra-properties"]){var e,l=e.selectNodes("//a:*"),c=0,h=l.length;for(;c<h;++c)e=l[c],e.firstChild&&e.firstChild.nodeValue&&f.push(" "+e.localName+'="'+e.firstChild.nodeValue+'"')}return s.xml=f.join("")+"/>"}function s(e,t,n,r){var s=parseInt(n.status,10);if(s==403||s==401||!e)return r?r.call(this,null,t,n):notAuth.call(this);typeof e=="string"&&(e=apf.getXml(e));var o=$xmlns(e,"response",apf.webdav.NS.D),u=[];o.length&&this.$regVar("authenticated",!0);var a;for(var f=[],l,c=0,h=o.length;c<h;c++){a=decodeURIComponent($xmlns(o[c],"href",apf.webdav.NS.D)[0].firstChild.nodeValue),a=document.location.pathname.replace(/\/$/,"")+a;if(a===n.url)continue;i.call(this,o[c],l={}),l.data&&f.push({toString:function(){return this.v},data:l.data,v:(l.data.type=="file"?1:0)+""+l.data.name.toLowerCase()})}f.sort();for(var c=0,p=f.length;c<p;c++)u.push(f[c].data.xml);r&&r.call(this,"<files>"+u.join("")+"</files>",t,n)}this.method="PROPFIND";var o='<?xml version="1.0" encoding="utf-8" ?><D:propfind xmlns:D="'+apf.webdav.NS.D+'">'+"<D:allprop />"+"</D:propfind>";r=r||{},r.Depth=typeof t!="undefined"?t:1,this.doRequest(s,e,o,r,!0,null,n)},define("plugins-server/cloud9.proxy.static/static/apf_patch",function(){}),require(["apf-packaged/apf_release"],function(){require(["plugins-server/cloud9.proxy.static/static/apf_patch"])}),define("apf-patch",function(){}),define("core/document",["require","exports","module"],function(e,t,n){var r=function(e,t){this.$init(),this.getNode=function(){return e},this.setNode=function(t){return this.dispatchEvent("setnode",{node:t}),e=t},this.hasValue=function(){return this.getValue()!==undefined},this.setValue=function(e){this.setProperty("value",e),t=e},this.getValue=function(){return this.hasEventListener("retrievevalue")?this.dispatchEvent("retrievevalue",{value:t}):t}};r.prototype=new apf.Class,n.exports=r}),define("text!core/util.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "winAlert"\n      title     = ""\n      icon      = ""\n      skin      = "bk-window2"\n      class     = "relative"\n      center    = "true"\n      render    = "runtime"\n      kbclose   = "true"\n      buttons   = "close"\n      width     = "512">\n        <a:vbox width="100%">\n            <a:hbox edge="15 10 25 10" padding="10">\n                <div class="alertWarn" margin="0 10 0 10"/>\n                <a:vbox flex="1" padding="5">\n                    <h3 id="winAlertHeader"></h3>\n                    <div id="winAlertMsg" class="alertMsg">An unexpected error occurred. Please refresh your browser window.</div>\n                </a:vbox>\n            </a:hbox>\n<!--            <a:divider skin="hordivider" />-->\n            <a:hbox edge="6 10 10" pack="end">\n                <a:button id="winAlertButton" default="3" onclick="winAlert.hide();" skin="btn-default-css3">OK</a:button>\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n    \n    <a:window\n      id        = "winConfirm"\n      title     = "Confirm"\n      icon      = ""\n      center    = "true"\n      render    = "runtime"\n      kbclose   = "true"\n      buttons   = "close"\n      width     = "512"\n      skin      = "bk-window2"\n      class     = "relative">\n        <a:vbox padding="10" edge="15 20 25 20">\n            <h3 id="winConfirmHeader"></h3>\n            <div id="winConfirmMsg" class="alertMsg">An unexpected error occurred. Please refresh your browser window.</div>\n        </a:vbox>\n    \n        <a:hbox edge="6 10 10" pack="end" padding="8">\n            <a:button id="btnConfirmCancel" onclick="winConfirm.hide()" skin="btn-default-css3">Cancel</a:button>\n            <a:button id="btnConfirmOk" default="3" skin="btn-default-css3" class="btn-green" onclick="winConfirm.hide()">Ok</a:button>\n        </a:hbox>\n    </a:window>\n    \n    <a:window\n      id        = "winQuestion"\n      title     = "Question"\n      icon      = ""\n      center    = "true"\n      render    = "runtime"\n      kbclose   = "true"\n      buttons   = "close"\n      width     = "512"\n      skin      = "bk-window2"\n      onkeydown = "\n        if(event.keyCode == 89) {\n            btnQuestionYes.dispatchEvent(\'click\', {htmlEvent: {}});\n        }\n        if(event.keyCode == 78) {\n            btnQuestionNo.dispatchEvent(\'click\', {htmlEvent: {}});\n        }\n      "\n      class     = "relative">\n        <a:vbox padding="10" edge="15 20 25 20">\n            <h3 id="winQuestionHeader"></h3>\n            <div id="winQuestionMsg" class="alertMsg">An unexpected error occurred. Please refresh your browser window.</div>\n        </a:vbox>\n    \n        <a:hbox edge="6 10 10" pack="end" padding="8">\n            <a:button id="btnQuestionYesToAll" skin="btn-default-css3" class="btn-green" visible="false">Yes to all</a:button>\n            <a:button id="btnQuestionNoToAll" skin="btn-default-css3" class="btn-red" visible="false">No to all</a:button>\n            <a:filler/>\n            <a:button id="btnQuestionYes" default="3" skin="btn-default-css3" class="btn-green">Yes</a:button>\n            <a:button id="btnQuestionNo" skin="btn-default-css3" class="btn-red">No</a:button>\n        </a:hbox>\n    </a:window>\n</a:application>\n'}),define("core/util",["require","exports","module","core/ide","text!core/util.xml"],function(e,t,n){var r=e("core/ide"),i=e("text!core/util.xml");t.escapeXpathString=function(e){if(!e)return"";if(e.indexOf('"')>-1){var t=[],n=e.split('"');return n.each(function(e){t.push(e==""?"'\"'":'"'+e+'"')}),"concat("+t.join(", ")+")"}return'"'+e+'"'},t.isNewPage=function(e){return parseInt(e.$model.data.getAttribute("newfile"),10)===1},t.alert=function(e,n,r,s){self.winAlert||apf.document.documentElement.insertMarkup(i),winAlert.show(),winAlert.setAttribute("title",e),winAlertHeader.$ext.innerHTML=t.escapeXml(n),winAlertMsg.$ext.innerHTML=t.escapeXml(r),s?winAlert.onhide=function(){winAlertMsg.onhide=null,s()}:winAlert.onhide=null},t.confirm=function(e,n,r,s,o){self.winConfirm||apf.document.documentElement.insertMarkup(i),winConfirm.show(),winConfirm.setAttribute("title",e),winConfirmHeader.$ext.innerHTML=t.escapeXml(n),winConfirmMsg.$ext.innerHTML=t.escapeXml(r),btnConfirmOk.onclick=s,btnConfirmCancel.onclick=o},t.question=function(e,n,r,s,o,u,a){self.winQuestion||apf.document.documentElement.insertMarkup(i),winQuestion.show(),winQuestion.setAttribute("title",e),winQuestionHeader.$ext.innerHTML=t.escapeXml(n),winQuestionMsg.$ext.innerHTML=t.escapeXml(r),btnQuestionYes.onclick=s,btnQuestionYesToAll.onclick=o,btnQuestionNo.onclick=u,btnQuestionNoToAll.onclick=a},t.removeInteractive=function(e){if(r.readonly)return!1;e.confirmed==undefined&&(e.confirmed=!1);if(!e.confirmed){var n=e.getSelection();function i(r){var s=r.getAttribute("name"),o=r.getAttribute("type");t.question("Confirm Remove","You are about to remove the "+(o||"item")+" "+s,"Do you want continue? (This change cannot be undone)",function(){r.setAttribute("deleted",!0),e.confirmed=!0,e.remove(r),e.confirmed=!1,n.length>0?i(n.shift()):winQuestion.hide()},function(){e.confirmed=!0,e.remove(r),n.forEach(function(t){t.setAttribute("deleted",!0),e.remove(t)}),e.confirmed=!1,winQuestion.hide()},function(){n.length>0?i(n.shift()):winQuestion.hide()},function(){winQuestion.hide()}),btnQuestionYesToAll.setAttribute("visible",n.length>0),btnQuestionNoToAll.setAttribute("visible",n.length>0)}return i(n.shift()),!1}return!0};var s={"application/xhtml+xml":"html","text/css":"css","text/x-scss":"css","text/x-sass":"css","text/html":"html","application/pdf":"page_white_acrobat",image:"image","application/xml":"page_white_code_red","image/svg+xml":"page_white_picture","text/plain":"page_white_text","application/javascript":"page_white_code","application/json":"page_white_code","text/x-script.python":"page_white_code","text/x-script.ocaml":"page_white_code","text/x-script.clojure":"page_white_code","application/x-httpd-php":"page_white_php","application/x-sh":"page_white_wrench","text/x-coldfusion":"page_white_coldfusion","text/x-script.ruby":"page_white_ruby","text/x-script.coffeescript":"page_white_cup","text/x-logiql":"logiql","text/cpp":"page_white_cplusplus","text/x-c":"page_white_c","text/x-csharp":"page_white_csharp","text/x-java-source":"page_white_cup","text/x-markdown":"page_white_text","text/x-xquery":"page_white_code"},o={c9search:"text/x-c9search",js:"application/javascript",json:"application/json",css:"text/css",scss:"text/x-scss",sass:"text/x-sass",xml:"application/xml",rdf:"application/rdf+xml",rss:"application/rss+xml",svg:"image/svg+xml",wsdl:"application/wsdl+xml",xslt:"application/xslt+xml",atom:"application/atom+xml",mathml:"application/mathml+xml",mml:"application/mathml+xml",php:"application/x-httpd-php",phtml:"application/x-httpd-php",html:"text/html",xhtml:"application/xhtml+xml",coffee:"text/x-script.coffeescript",py:"text/x-script.python",java:"text/x-java-source",ru:"text/x-script.ruby",gemspec:"text/x-script.ruby",rake:"text/x-script.ruby",rb:"text/x-script.ruby",c:"text/x-c",cc:"text/x-c",cpp:"text/x-c",cxx:"text/x-c",h:"text/x-c",hh:"text/x-c",hpp:"text/x-c",bmp:"image",djv:"image",djvu:"image",gif:"image",ico:"image",jpeg:"image",jpg:"image",pbm:"image",pgm:"image",png:"image",pnm:"image",ppm:"image",psd:"image",svgz:"image",tif:"image",tiff:"image",xbm:"image",xpm:"image",clj:"text/x-script.clojure",ml:"text/x-script.ocaml",mli:"text/x-script.ocaml",cfm:"text/x-coldfusion",sql:"text/x-sql",sh:"application/x-sh",bash:"application/x-sh",xq:"text/x-xquery",terminal:"terminal",logic:"text/x-logiql",lql:"text/x-logiql"};t.getFileIcon=function(e){var t=e.getAttribute("name"),n="page_white_text",r;return t&&(r=t.split(".").pop().toLowerCase(),n=s[o[r]]||"page_white_text"),n+".png"},t.getContentType=function(e){var t=e.split(".").pop().split("!").pop().toLowerCase()||"";return o[t]||"text/plain"},t.escapeRegExp=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s"']/g,"\\$&")},t.escapeXml=apf.escapeXML,t.isTrue=apf.isTrue,t.isFalse=apf.isFalse,t.replaceStaticPrefix=function(e){return e.replace(new RegExp("{ide.staticPrefix}","g"),window.cloud9config.staticUrl)},t.linkify=function(){var e="[a-z\\d.-]+://",t="(?:(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])",n="(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+",r="(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)",i="(?:"+n+r+"|"+t+")",s="(?:[;/][^#?<>\\s]*)?",o="(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?",u="\\b"+e+"[^<>\\s]+",a="\\b"+i+s+o+"(?!\\w)",f="mailto:",l="(?:"+f+")?[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@"+i+o+"(?!\\w)",c=new RegExp("(?:"+u+"|"+a+"|"+l+")","ig"),h=new RegExp("^"+e,"i"),p={"'":"`",">":"<",")":"(","]":"[","}":"{","B;":"B+","b:":"b9"},d={callback:function(e,t){return t?'<a href="'+t+'" title="'+t+'">'+e+"</a>":e},punct_regexp:/(?:[!?.,:;'"]|(?:&|&amp;)(?:lt|gt|quot|apos|raquo|laquo|rsaquo|lsaquo);)$/};return function(e,t){t=t||{};var n,r,i,s,o="",u=[],a,l,v,y,w,E,S,x;for(r in d)t[r]===undefined&&(t[r]=d[r]);while(n=c.exec(e)){i=n[0],l=c.lastIndex,v=l-i.length;if(/[\/:]/.test(e.charAt(v-1)))continue;do y=i,x=i.substr(-1),S=p[x],S&&(w=i.match(new RegExp("\\"+S+"(?!$)","g")),E=i.match(new RegExp("\\"+x,"g")),(w?w.length:0)<(E?E.length:0)&&(i=i.substr(0,i.length-1),l--)),t.punct_regexp&&(i=i.replace(t.punct_regexp,function(e){return l-=e.length,""}));while(i.length&&i!==y);s=i,h.test(s)||(s=(s.indexOf("@")!==-1?s.indexOf(f)?f:"":s.indexOf("irc.")?s.indexOf("ftp.")?"http://":"ftp://":"irc://")+s),a!=v&&(u.push([e.slice(a,v)]),a=l),u.push([i,s])}u.push([e.substr(a)]);for(r=0;r<u.length;r++)o+=t.callback.apply(window,u[r]);return o||e}}(),t.pageHasChanged=function(e){if(!e)throw new Error("Page object parameter missing");return Number(e.$model.data.getAttribute("changed"))===1},t.pageIsCode=function(e){if(!e)throw new Error("Page object parameter missing");return e.type==="ext/code/code"},t.stripWSFromPath=function(e){var t=(e||"").replace(window.cloud9config.davPrefix.replace(/\/+$/,""),"");return t=t.charAt(0)==="/"?t.substr(1):t,t},t.getDocPath=function(n){return!n&&tabEditors&&(r.getActivePage||(r=e("core/ide")),n=r.getActivePage()),t.stripWSFromPath(n.name)},t.toXmlTag=function(e,n,r){return"<"+e+" "+t.toXmlAttributes(n)+(r?">":" />")},t.toXmlAttributes=function(e){var t=Object.keys(e).map(function(t){return t+'="'+apf.escapeXML(e[t])+'"'}).join(" ");return t};var u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");t.uuid=function(e,t){var n,r=u,i=[],s=Math.random;t=t||r.length;if(e)for(n=0;n<e;n++)i[n]=r[0|s()*t];else{var o;i[8]=i[13]=i[18]=i[23]="-",i[14]="4";for(n=0;n<36;n++)i[n]||(o=0|s()*16,i[n]=r[n==19?o&3|8:o&15])}return i.join("")}}),function(){function e(t,n,r){var i=e.resolve(t),s=e.modules[i];if(null==i)throw r=r||t,n=n||"root",new Error('failed to require "'+r+'" from "'+n+'"');return s.exports||(s.exports={},s.client=s.component=!0,s.call(this,s,s.exports,e.relative(i))),s.exports}e.modules={},e.aliases={},e.resolve=function(t){var n=t,r=t+".js",i=t+".json",s=t+"/index.js",o=t+"/index.json";return e.modules[r]&&r||e.modules[i]&&i||e.modules[s]&&s||e.modules[o]&&o||e.modules[n]&&n||e.aliases[s]},e.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var r=0;r<t.length;++r)".."==t[r]?e.pop():"."!=t[r]&&""!=t[r]&&n.push(t[r]);return e.concat(n).join("/")},e.register=function(t,n){e.modules[t]=n},e.alias=function(t,n){var r=e.modules[t];if(!r)throw new Error('failed to alias "'+t+'", it does not exist');e.aliases[n]=t},e.relative=function(t){function r(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function i(n){var r=n;return n=i.resolve(n),e(n,t,r)}var n=e.normalize(t,"..");return i.resolve=function(i){if("."!=i.charAt(0)){var s=t.split("/"),o=r(s,"deps")+1;return o||(o=0),i=s.slice(0,o+1).join("/")+"/deps/"+i,i}return e.normalize(n,i)},i.exists=function(t){return!!e.modules[i.resolve(t)]},i},e.register("component-emitter/index.js",function(e,t,n){function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},t._off=r,this.on(e,r),this},r.prototype.off=function(e,t){this._callbacks=this._callbacks||{};var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;var r=n.indexOf(t._off||t);return~r&&n.splice(r,1),this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),e.register("LearnBoost-engine.io-protocol/lib/index.js",function(e,t,n){var r=n("./keys"),i=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=r(i),o={type:"error",data:"parser error"};t.encodePacket=function(e){var t=i[e.type];return undefined!==e.data&&(t+=String(e.data)),""+t},t.decodePacket=function(e){var t=e.charAt(0);return Number(t)!=t||!s[t]?o:e.length>1?{type:s[t],data:e.substring(1)}:{type:s[t]}},t.encodePayload=function(e){if(!e.length)return"0:";var n="",r;for(var i=0,s=e.length;i<s;i++)r=t.encodePacket(e[i]),n+=r.length+":"+r;return n},t.decodePayload=function(e){if(e=="")return[o];var n=[],r="",i,s,u;for(var a=0,f=e.length;a<f;a++){var l=e.charAt(a);if(":"!=l)r+=l;else{if(""==r||r!=(i=Number(r)))return[o];s=e.substr(a+1,i);if(r!=s.length)return[o];if(s.length){u=t.decodePacket(s);if(o.type==u.type&&o.data==u.data)return[o];n.push(u)}a+=i,r=""}}return r!=""?[o]:n}}),e.register("LearnBoost-engine.io-protocol/lib/keys.js",function(e,t,n){e.exports=Object.keys||function(t){var n=[],r=Object.prototype.hasOwnProperty;for(var i in t)r.call(t,i)&&n.push(i);return n}}),e.register("visionmedia-debug/index.js",function(e,t,n){"undefined"==typeof window?e.exports=n("./lib/debug"):e.exports=n("./debug")}),e.register("visionmedia-debug/debug.js",function(e,t,n){function r(e){return r.enabled(e)?function(t){var n=new Date,i=n-(r[e]||n);r[e]=n,t=e+" "+t+" +"+r.humanize(i),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}e.exports=r,r.names=[],r.skips=[],r.enable=function(e){localStorage.debug=e;var t=(e||"").split(/[\s,]+/),n=t.length;for(var i=0;i<n;i++)e=t[i].replace("*",".*?"),e[0]==="-"?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$"))},r.disable=function(){r.enable("")},r.humanize=function(e){var t=1e3,n=6e4,r=60*n;return e>=r?(e/r).toFixed(1)+"h":e>=n?(e/n).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},r.enabled=function(e){for(var t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(var t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},window.localStorage&&r.enable(localStorage.debug)}),e.register("engine.io/lib/index.js",function(e,t,n){e.exports=n("./socket"),e.exports.parser=n("engine.io-parser")}),e.register("engine.io/lib/socket.js",function(e,t,n){function a(e,t){if(!(this instanceof a))return new a(e,t);t=t||{},"object"==typeof e&&(t=e,e=null),e&&(e=r.parseUri(e),t.host=e.host,t.secure=e.protocol=="https"||e.protocol=="wss",t.port=e.port),this.secure=null!=t.secure?t.secure:u.location&&"https:"==location.protocol;if(t.host){var n=t.host.split(":");t.hostname=n.shift(),n.length&&(t.port=n.pop())}this.hostname=t.hostname||(u.location?location.hostname:"localhost"),this.port=t.port||(u.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.timestampParam=t.timestampParam||"t",this.timestampRequests=!!t.timestampRequests,this.flashPath=t.flashPath||"",this.transports=t.transports||["polling","websocket","flashsocket"],this.readyState="",this.writeBuffer=[],this.policyPort=t.policyPort||843,this.open(),a.sockets.push(this),a.sockets.evs.emit("add",this)}function f(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var r=n("./util"),i=n("./transports"),s=n("./emitter"),o=n("debug")("engine-client:socket");e.exports=a;var u=r.global();s(a.prototype),a.protocol=1,a.sockets=[],a.sockets.evs=new s,a.Socket=a,a.Transport=n("./transport"),a.Emitter=n("./emitter"),a.transports=n("./transports"),a.util=n("./util"),a.parser=n("engine.io-parser"),a.prototype.createTransport=function(e){o('creating transport "%s"',e);var t=f(this.query);t.transport=e,this.id&&(t.sid=this.id);var n=new i[e]({hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,flashPath:this.flashPath,policyPort:this.policyPort});return n},a.prototype.open=function(){this.readyState="opening";var e=this.createTransport(this.transports[0]);e.open(),this.setTransport(e)},a.prototype.setTransport=function(e){var t=this;this.transport&&(o("clearing existing transport"),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.flush()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},a.prototype.probe=function(e){function i(i){if(n)return;n=!0;var s=new Error("probe error: "+i);s.transport=t.name,t.close(),t=null,o('probe transport "%s" failed because of error: %s',e,i),r.emit("error",s)}o('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;t.once("open",function(){if(n)return;o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(s){if(n)return;if("pong"==s.type&&"probe"==s.data)o('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),o('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){if(n)return;if("closed"==r.readyState||"closing"==r.readyState)return;o("changing transport and sending upgrade packet"),t.removeListener("error",i),r.emit("upgrade",t),r.setTransport(t),t.send([{type:"upgrade"}]),t=null,r.upgrading=!1,r.flush()});else{o('probe transport "%s" failed',e);var u=new Error("probe error");u.transport=t.name,r.emit("error",u)}})}),t.once("error",i),t.open(),this.once("close",function(){t&&(o("socket closed prematurely - aborting probe"),n=!0,t.close(),t=null)}),this.once("upgrading",function(e){t&&e.name!=t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),t.close(),t=null)})},a.prototype.onOpen=function(){o("socket open"),this.readyState="open",this.emit("open"),this.onopen&&this.onopen.call(this),this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},a.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState){o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat");switch(e.type){case"open":this.onHandshake(r.parseJSON(e.data));break;case"pong":this.ping();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data);var n={data:e.data};n.toString=function(){return e.data},this.onmessage&&this.onmessage.call(this,n)}}else o('packet received with socket readyState "%s"',this.readyState)},a.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.ping(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat)},a.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){if("closed"==t.readyState)return;t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},a.prototype.ping=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",e.pingTimeout),e.sendPacket("ping"),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},a.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.writeBuffer=[])},a.prototype.write=a.prototype.send=function(e){return this.sendPacket("message",e),this},a.prototype.sendPacket=function(e,t){var n={type:e,data:t};this.emit("packetCreate",n),this.writeBuffer.push(n),this.flush()},a.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.onClose("forced close"),o("socket closing - telling transport to close"),this.transport.close(),this.transport.removeAllListeners();return this},a.prototype.onError=function(e){o("socket error %j",e),this.emit("error",e),this.onClose("transport error",e)},a.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState)o('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.readyState="closed",this.emit("close",e,t),this.onclose&&this.onclose.call(this),this.id=null},a.prototype.filterUpgrades=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}),e.register("engine.io/lib/transport.js",function(e,t,n){function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState=""}var r=n("./util"),i=n("engine.io-parser"),s=n("./emitter");e.exports=o,s(o.prototype),o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",this.doOpen();return this},o.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.doClose(),this.onClose();return this},o.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){this.onPacket(i.decodePacket(e))},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}}),e.register("engine.io/lib/emitter.js",function(e,t,n){var r;try{r=n("emitter")}catch(i){r=n("emitter-component")}e.exports=r,r.prototype.addEventListener=r.prototype.on,r.prototype.removeEventListener=r.prototype.off,r.prototype.removeListener=r.prototype.off,r.prototype.removeAllListeners=function(){this._callbacks={}}}),e.register("engine.io/lib/util.js",function(e,t,n){var r=!1;t.global=function(){return"undefined"!=typeof window?window:global},t.inherits=function(t,n){function r(){}r.prototype=n.prototype,t.prototype=new r},t.keys=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t},t.on=function(e,t,n,r){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,r)},t.load=function(e){var n=t.global();if(n.document&&document.readyState==="complete"||r)return e();t.on(n,"load",e,!1)},"undefined"!=typeof window&&t.load(function(){r=!0}),t.defer=function(e){if(!t.ua.webkit||"undefined"!=typeof importScripts)return e();t.load(function(){setTimeout(e,100)})};var i=/^[\],:{}\s]*$/,s=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,u=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,f=/\s+$/;t.parseJSON=function(e){var n=t.global();if("string"!=typeof e||!e)return null;e=e.replace(a,"").replace(f,"");if(n.JSON&&JSON.parse)return JSON.parse(e);if(i.test(e.replace(s,"@").replace(o,"]").replace(u,"")))return(new Function("return "+e))()},t.ua={},t.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return e.withCredentials!=undefined}(),t.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),t.ua.gecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent),t.ua.android="undefined"!=typeof navigator&&/android/i.test(navigator.userAgent),t.ua.ios="undefined"!=typeof navigator&&/^(iPad|iPhone|iPod)$/.test(navigator.platform),t.ua.ios6=t.ua.ios&&/OS 6_/.test(navigator.userAgent),t.request=function(r){if("undefined"==typeof window){var i=n("xmlhttprequest").XMLHttpRequest;return new i}if(r&&"undefined"!=typeof XDomainRequest&&!t.ua.hasCORS)return new XDomainRequest;try{if("undefined"!=typeof XMLHttpRequest&&(!r||t.ua.hasCORS))return new XMLHttpRequest}catch(s){}if(!r)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(s){}};var l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.parseUri=function(e){var t=l.exec(e||""),n={},r=14;while(r--)n[c[r]]=t[r]||"";return n},t.qs=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=n+"="+encodeURIComponent(e[n]));return t}}),e.register("engine.io/lib/transports/index.js",function(e,t,n){function f(e){var t,n=!1,s=!1;if(a.location){var o="https:"==location.protocol,f=location.port;Number(f)!=f&&(f=o?443:80),n=e.host!=location.hostname||f!=e.port,s=e.secure!=o}return t=u.request(n),s&&a.XDomainRequest&&t instanceof a.XDomainRequest?new i(e):t&&!e.forceJSONP?new r(e):new i(e)}var r=n("./polling-xhr"),i=n("./polling-jsonp"),s=n("./websocket"),o=n("./flashsocket"),u=n("../util");t.polling=f,t.websocket=s,t.flashsocket=o;var a=u.global()}),e.register("engine.io/lib/transports/polling.js",function(e,t,n){function a(e){r.call(this,e)}var r=n("../transport"),i=n("../util"),s=n("engine.io-parser"),o=n("debug")("engine.io-client:polling");e.exports=a;var u=i.global();i.inherits(a,r),a.prototype.name="polling",a.prototype.doOpen=function(){this.poll()},a.prototype.pause=function(e){function r(){o("paused"),n.readyState="paused",e()}var t=0,n=this;this.readyState="pausing";if(this.polling||!this.writable){var i=0;this.polling&&(o("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){o("pre-pause polling complete"),--i||r()})),this.writable||(o("we are currently writing - waiting to pause"),i++,this.once("drain",function(){o("pre-pause writing complete"),--i||r()}))}else r()},a.prototype.poll=function(){o("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},a.prototype.onData=function(e){o("polling got data %s",e);var t=s.decodePayload(e);for(var n=0,r=t.length;n<r;n++){"opening"==this.readyState&&this.onOpen();if("close"==t[n].type){this.onClose();return}this.onPacket(t[n])}this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():o('ignoring poll - transport state "%s"',this.readyState)},a.prototype.doClose=function(){o("sending close packet"),this.send([{type:"close"}])},a.prototype.write=function(e){var t=this;this.writable=!1,this.doWrite(s.encodePayload(e),function(){t.writable=!0,t.emit("drain")})},a.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";if(u.ActiveXObject||i.ua.android||i.ua.ios6||this.timestampRequests)e[this.timestampParam]=+(new Date);return e=i.qs(e),this.port&&("https"==t&&this.port!=443||"http"==t&&this.port!=80)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e}}),e.register("engine.io/lib/transports/polling-xhr.js",function(e,t,n){function f(){}function l(e){r.call(this,e),u.location&&(this.xd=e.host!=u.location.hostname||u.location.port!=e.port)}function c(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.async=!1!==e.async,this.data=undefined!=e.data?e.data:null,this.create()}var r=n("./polling"),i=n("../util"),s=n("../emitter"),o=n("debug")("engine.io-client:polling-xhr");e.exports=l,e.exports.Request=c;var u=i.global(),a=u[["Active"].concat("Object").join("X")];i.inherits(l,r),l.prototype.doOpen=function(){var e=this;i.defer(function(){r.prototype.doOpen.call(e)})},l.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,new c(e)},l.prototype.doWrite=function(e,t){var n=this.request({method:"POST",data:e}),r=this;n.on("success",t),n.on("error",function(e){r.onError("xhr post error",e)}),this.sendXhr=n},l.prototype.doPoll=function(){o("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},s(c.prototype),c.prototype.create=function(){var e=this.xhr=i.request(this.xd),t=this;e.open(this.method,this.uri,this.async);if("POST"==this.method)try{e.setRequestHeader?e.setRequestHeader("Content-type","text/plain;charset=UTF-8"):e.contentType="text/plain"}catch(n){}this.xd&&u.XDomainRequest&&e instanceof XDomainRequest?(e.onerror=function(e){t.onError(e)},e.onload=function(){t.onData(e.responseText)},e.onprogress=f):("withCredentials"in e&&(e.withCredentials=!0),e.onreadystatechange=function(){var n;try{if(4!=e.readyState)return;200==e.status||1223==e.status?n=e.responseText:t.onError(e.status)}catch(r){t.onError(r)}undefined!==n&&t.onData(n)}),o("sending xhr with url %s | data %s",this.uri,this.data),e.send(this.data),a&&(this.index=c.requestsCount++,c.requests[this.index]=this)},c.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},c.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},c.prototype.onError=function(e){this.emit("error",e),this.cleanup()},c.prototype.cleanup=function(){this.xhr.onreadystatechange=f,this.xhr.onload=this.xhr.onerror=f;try{this.xhr.abort()}catch(e){}a&&delete c.requests[this.index],this.xhr=null},c.prototype.abort=function(){this.cleanup()},a&&(c.requestsCount=0,c.requests={},u.attachEvent("onunload",function(){for(var e in c.requests)c.requests.hasOwnProperty(e)&&c.requests[e].abort()}))}),e.register("engine.io/lib/transports/polling-jsonp.js",function(e,t,n){function f(){}function l(e){r.call(this,e),u||(s.___eio||(s.___eio=[]),u=s.___eio),this.index=u.length;var t=this;u.push(function(e){t.onData(e)}),this.query.j=this.index}var r=n("./polling"),i=n("../util");e.exports=l;var s=i.global(),o=/\n/g,u,a=0;i.inherits(l,r),l.prototype.doOpen=function(){var e=this;i.defer(function(){r.prototype.doOpen.call(e)})},l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri();var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.script=e,i.ua.gecko&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},l.prototype.doWrite=function(e,t){function a(){f(),t()}function f(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';u=document.createElement(t)}catch(e){u=document.createElement("iframe"),u.name=n.iframeId,u.src="javascript:0"}u.id=n.iframeId,n.form.appendChild(u),n.iframe=u}var n=this;if(!this.form){var r=document.createElement("form"),i=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index,u;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=s,r.method="POST",r.setAttribute("accept-charset","utf-8"),i.name="d",r.appendChild(i),document.body.appendChild(r),this.form=r,this.area=i}this.form.action=this.uri(),f(),this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){n.iframe.readyState=="complete"&&a()}:this.iframe.onload=a}}),e.register("engine.io/lib/transports/websocket.js",function(e,t,n){function a(e){r.call(this,e)}function f(){return"undefined"==typeof window?n("ws"):u.WebSocket||u.MozWebSocket}var r=n("../transport"),i=n("engine.io-parser"),s=n("../util"),o=n("debug")("engine.io-client:websocket");e.exports=a;var u=s.global();s.inherits(a,r),a.prototype.name="websocket",a.prototype.doOpen=function(){if(!this.check())return;var e=this;this.socket=new(f())(this.uri()),this.socket.onopen=function(){e.onOpen()},this.socket.onclose=function(){e.onClose()},this.socket.onmessage=function(t){e.onData(t.data)},this.socket.onerror=function(t){e.onError("websocket error",t)}},a.prototype.write=function(e){for(var t=0,n=e.length;t<n;t++)this.socket.send(i.encodePacket(e[t]))},a.prototype.doClose=function(){typeof this.socket!="undefined"&&this.socket.close()},a.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&this.port!=443||"ws"==t&&this.port!=80)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+(new Date)),e=s.qs(e),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e},a.prototype.check=function(){var e=f();return!!e&&!("__initialize"in e&&this.name===a.prototype.name)}}),e.register("engine.io/lib/transports/flashsocket.js",function(e,t,n){function a(e){r.call(this,e),this.flashPath=e.flashPath,this.policyPort=e.policyPort}function l(e,t){if(f[e])return t();var n=document.createElement("script"),r=!1;s('loading "%s"',e),n.onload=n.onreadystatechange=function(){if(r||f[e])return;var i=n.readyState;if(!i||"loaded"==i||"complete"==i)s('loaded "%s"',e),n.onload=n.onreadystatechange=null,r=!0,f[e]=!0,t()},n.async=1,n.src=e;var i=document.getElementsByTagName("head")[0];i.insertBefore(n,i.firstChild)}function c(e,t){function n(r){if(!e[r])return t();l(e[r],function(){n(++r)})}n(0)}var r=n("./websocket"),i=n("../util"),s=n("debug")("engine.io-client:flashsocket");e.exports=a;var o=i.global(),u=o[["Active"].concat("Object").join("X")];i.inherits(a,r),a.prototype.name="flashsocket",a.prototype.doOpen=function(){function e(e){return function(){var t=Array.prototype.join.call(arguments," ");s("[websocketjs %s] %s",e,t)}}if(!this.check())return;WEB_SOCKET_LOGGER={log:e("debug"),error:e("error")},WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=!0,WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0,"undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=this.flashPath+"WebSocketMainInsecure.swf");var t=[this.flashPath+"web_socket.js"];"undefined"==typeof swfobject&&t.unshift(this.flashPath+"swfobject.js");var n=this;c(t,function(){n.ready(function(){WebSocket.__addTask(function(){r.prototype.doOpen.call(n)})})})},a.prototype.doClose=function(){if(!this.socket)return;var e=this;WebSocket.__addTask(function(){r.prototype.doClose.call(e)})},a.prototype.write=function(){var e=this,t=arguments;WebSocket.__addTask(function(){r.prototype.write.apply(e,t)})},a.prototype.ready=function(e){function t(){a.loaded||(843!=n.policyPort&&WebSocket.loadFlashPolicyFile("xmlsocket://"+n.host+":"+n.policyPort),WebSocket.__initialize(),a.loaded=!0),e.call(n)}if(!(typeof WebSocket!="undefined"&&"__initialize"in WebSocket)||!swfobject)return;if(swfobject.getFlashPlayerVersion().major<10)return;var n=this;if(document.body)return t();i.load(t)},a.prototype.check=function(){if("undefined"==typeof window)return!1;if(typeof WebSocket=="undefined"||"__initialize"in WebSocket){if(u){var e=null;try{e=new u("ShockwaveFlash.ShockwaveFlash")}catch(t){}if(e)return!0}else for(var n=0,r=navigator.plugins.length;n<r;n++)for(var i=0,s=navigator.plugins[n].length;i<s;i++)if(navigator.plugins[n][i].description=="Shockwave Flash")return!0;return!1}return!1};var f={}}),e.alias("component-emitter/index.js","engine.io/deps/emitter/index.js"),e.alias("LearnBoost-engine.io-protocol/lib/index.js","engine.io/deps/engine.io-parser/lib/index.js"),e.alias("LearnBoost-engine.io-protocol/lib/keys.js","engine.io/deps/engine.io-parser/lib/keys.js"),e.alias("LearnBoost-engine.io-protocol/lib/index.js","engine.io/deps/engine.io-parser/index.js"),e.alias("visionmedia-debug/index.js","engine.io/deps/debug/index.js"),e.alias("visionmedia-debug/debug.js","engine.io/deps/debug/debug.js"),e.alias("engine.io/lib/index.js","engine.io/index.js"),"undefined"==typeof module?window.eio=e("engine.io"):module.exports=e("engine.io")}(),define("engine.io",["engine.io/engine.io"],function(e){return e}),define("engine.io/engine.io",function(){}),define("smith/events-amd",["require","exports","module"],function(e,t,n){var r=t.EventEmitter=function(){},i=Array.isArray||function(e){return toString.call(e)==="[object Array]"},s=10;r.prototype.setMaxListeners=function(e){this._events||(this._events={}),this._events.maxListeners=e},r.prototype.emit=function(e){if(e==="error")if(!this._events||!this._events.error||i(this._events.error)&&!this._events.error.length)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if(typeof t=="function"){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);t.apply(this,n)}return!0}if(i(t)){var n=Array.prototype.slice.call(arguments,1),r=t.slice();for(var s=0,o=r.length;s<o;s++)r[s].apply(this,n);return!0}return!1},r.prototype.addListener=function(e,t){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");this._events||(this._events={}),this.emit("newListener",e,t);if(!this._events[e])this._events[e]=t;else if(i(this._events[e])){if(!this._events[e].warned){var n;this._events.maxListeners!==undefined?n=this._events.maxListeners:n=s,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}this._events[e].push(t)}else this._events[e]=[this._events[e],t];return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){var n=this;return n.on(e,function r(){n.removeListener(e,r),t.apply(this,arguments)}),this},r.prototype.removeListener=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var n=this._events[e];if(i(n)){var r=n.indexOf(t);if(r<0)return this;n.splice(r,1),n.length==0&&delete this._events[e]}else this._events[e]===t&&delete this._events[e];return this},r.prototype.removeAllListeners=function(e){return e&&this._events&&this._events[e]&&(this._events[e]=null),this},r.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),i(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]}}),(typeof define=="function"?function(e){define("msgpack-js",e)}:typeof exports=="object"?function(e){module.exports=e()}:function(e){this.msgpack=e()})(function(){"use strict";function t(e){if(e===undefined)return"undefined";var t,n;e instanceof ArrayBuffer?(n="ArrayBuffer",t=new DataView(e)):e instanceof DataView&&(n="DataView",t=e);if(!t)return JSON.stringify(e);var r=[];for(var i=0;i<e.byteLength;i++){if(i>20){r.push("...");break}var s=t.getUint8(i).toString(16);s.length===1&&(s="0"+s),r.push(s)}return"<"+n+" "+r.join(" ")+">"}function n(e,t,n){var r=e.byteLength;for(var i=0,s=n.length;i<s;i++){var o=n.charCodeAt(i);if(o<128){e.setUint8(t++,o>>>0&127|0);continue}if(o<2048){e.setUint8(t++,o>>>6&31|192),e.setUint8(t++,o>>>0&63|128);continue}if(o<65536){e.setUint8(t++,o>>>12&15|224),e.setUint8(t++,o>>>6&63|128),e.setUint8(t++,o>>>0&63|128);continue}if(o<1114112){e.setUint8(t++,o>>>18&7|240),e.setUint8(t++,o>>>12&63|128),e.setUint8(t++,o>>>6&63|128),e.setUint8(t++,o>>>0&63|128);continue}throw new Error("bad codepoint "+o)}}function r(e,t,n){var r="";for(var i=t,s=t+n;i<s;i++){var o=e.getUint8(i);if((o&128)===0){r+=String.fromCharCode(o);continue}if((o&224)===192){r+=String.fromCharCode((o&15)<<6|e.getUint8(++i)&63);continue}if((o&240)===224){r+=String.fromCharCode((o&15)<<12|(e.getUint8(++i)&63)<<6|(e.getUint8(++i)&63)<<0);continue}if((o&248)===240){r+=String.fromCharCode((o&7)<<18|(e.getUint8(++i)&63)<<12|(e.getUint8(++i)&63)<<6|(e.getUint8(++i)&63)<<0);continue}throw new Error("Invalid byte "+o.toString(16))}return r}function i(e){var t=0;for(var n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128){t+=1;continue}if(i<2048){t+=2;continue}if(i<65536){t+=3;continue}if(i<1114112){t+=4;continue}throw new Error("bad codepoint "+i)}return t}function s(e,t){this.offset=t||0,this.view=e}function o(e){var t=new DataView(e),n=new s(t),r=n.parse();if(n.offset!==e.byteLength)throw new Error(e.byteLength-n.offset+" trailing bytes");return r}function u(e,t,r){var s=typeof e;if(s==="string"){var o=i(e);if(o<32)return t.setUint8(r,o|160),n(t,r+1,e),1+o;if(o<65536)return t.setUint8(r,218),t.setUint16(r+1,o),n(t,r+3,e),3+o;if(o<4294967296)return t.setUint8(r,219),t.setUint32(r+1,o),n(t,r+5,e),5+o}if(e instanceof ArrayBuffer){var o=e.byteLength;if(o<65536)return t.setUint8(r,216),t.setUint16(r+1,o),(new Uint8Array(t.buffer)).set(new Uint8Array(e),r+3),3+o;if(o<4294967296)return t.setUint8(r,217),t.setUint32(r+1,o),(new Uint8Array(t.buffer)).set(new Uint8Array(e),r+5),5+o}if(s==="number"){if(e<<0!==e)return t.setUint8(r,203),t.setFloat64(r+1,e),9;if(e>=0){if(e<128)return t.setUint8(r,e),1;if(e<256)return t.setUint8(r,204),t.setUint8(r+1,e),2;if(e<65536)return t.setUint8(r,205),t.setUint16(r+1,e),3;if(e<4294967296)return t.setUint8(r,206),t.setUint32(r+1,e),5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return t.setInt8(r,e),1;if(e>=-128)return t.setUint8(r,208),t.setInt8(r+1,e),2;if(e>=-32768)return t.setUint8(r,209),t.setInt16(r+1,e),3;if(e>=-2147483648)return t.setUint8(r,210),t.setInt32(r+1,e),5;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if(s==="undefined")return t.setUint8(r,196),1;if(e===null)return t.setUint8(r,192),1;if(s==="boolean")return t.setUint8(r,e?195:194),1;if(s==="object"){var o,a=0,f=Array.isArray(e);if(f)o=e.length;else{var l=Object.keys(e);o=l.length}var a;o<16?(t.setUint8(r,o|(f?144:128)),a=1):o<65536?(t.setUint8(r,f?220:222),t.setUint16(r+1,o),a=3):o<4294967296&&(t.setUint8(r,f?221:223),t.setUint32(r+1,o),a=5);if(f)for(var c=0;c<o;c++)a+=u(e[c],t,r+a);else for(var c=0;c<o;c++){var h=l[c];a+=u(h,t,r+a),a+=u(e[h],t,r+a)}return a}throw new Error("Unknown type "+s)}function a(e){var t=typeof e;if(t==="string"){var n=i(e);if(n<32)return 1+n;if(n<65536)return 3+n;if(n<4294967296)return 5+n}if(e instanceof ArrayBuffer){var n=e.byteLength;if(n<65536)return 3+n;if(n<4294967296)return 5+n}if(t==="number"){if(e<<0!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;if(e<0x10000000000000000)return 9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;if(e>=-0x8000000000000000)return 9;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if(t==="boolean"||t==="undefined"||e===null)return 1;if(t==="object"){var n,r=0;if(Array.isArray(e)){n=e.length;for(var s=0;s<n;s++)r+=a(e[s])}else{var o=Object.keys(e);n=o.length;for(var s=0;s<n;s++){var u=o[s];r+=a(u)+a(e[u])}}if(n<16)return 1+r;if(n<65536)return 3+r;if(n<4294967296)return 5+r;throw new Error("Array or object too long 0x"+n.toString(16))}throw new Error("Unknown type "+t)}var e={};return e.inspect=t,e.utf8Write=n,e.utf8Read=r,e.utf8ByteCount=i,e.encode=function(e){var t=new ArrayBuffer(a(e)),n=new DataView(t);return u(e,n,0),t},e.decode=o,s.prototype.map=function(e){var t={};for(var n=0;n<e;n++){var r=this.parse();t[r]=this.parse()}return t},s.prototype.buf=function(e){var t=new ArrayBuffer(e);return(new Uint8Array(t)).set(new Uint8Array(this.view.buffer,this.offset,e),0),this.offset+=e,t},s.prototype.raw=function(e){var t=r(this.view,this.offset,e);return this.offset+=e,t},s.prototype.array=function(e){var t=new Array(e);for(var n=0;n<e;n++)t[n]=this.parse();return t},s.prototype.parse=function(){var e=this.view.getUint8(this.offset),t,n;if((e&224)===160)return n=e&31,this.offset++,this.raw(n);if((e&240)===128)return n=e&15,this.offset++,this.map(n);if((e&240)===144)return n=e&15,this.offset++,this.array(n);if((e&128)===0)return this.offset++,e;if((e&224)===224)return t=this.view.getInt8(this.offset),this.offset++,t;switch(e){case 218:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.raw(n);case 219:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.raw(n);case 192:return this.offset++,null;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return this.offset++,undefined;case 204:return t=this.view.getUint8(this.offset+1),this.offset+=2,t;case 205:return t=this.view.getUint16(this.offset+1),this.offset+=3,t;case 206:return t=this.view.getUint32(this.offset+1),this.offset+=5,t;case 208:return t=this.view.getInt8(this.offset+1),this.offset+=2,t;case 209:return t=this.view.getInt16(this.offset+1),this.offset+=3,t;case 210:return t=this.view.getInt32(this.offset+1),this.offset+=5,t;case 222:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.map(n);case 223:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.map(n);case 220:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.array(n);case 221:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.array(n);case 216:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.buf(n);case 217:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.buf(n);case 202:return t=this.view.getFloat32(this.offset+1),this.offset+=5,t;case 203:return t=this.view.getFloat64(this.offset+1),this.offset+=9,t}throw new Error("Unknown type 0x"+e.toString(16))},e}),define("msgpack-js",["msgpack-js/msgpack"],function(e){return e}),define("msgpack-js/msgpack",function(){}),(typeof module!="undefined"&&function(e){module.exports=e(require("events"),require("msgpack-js"))}||typeof define=="function"&&function(e){define("smith",["./events-amd","msgpack-js"],e)}||function(e){window.smith=e(window.events,window.msgpack)})(function(e,t){"use strict";function r(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e}})}function s(e,n){function u(e){try{s(e)}catch(t){r.emit("error",t)}}function a(){r.emit("drain")}function f(e){r.emit("error",e)}function l(){e.removeListener("data",u),e.removeListener("end",l),e.removeListener("timeout",l),e.removeListener("close",l),i.removeListener("drain",a),e.destroy&&e.destroy(),e!==i&&(i.removeListener("end",l),i.removeListener("timeout",l),i.removeListener("close",l),i.destroy&&i!==process.stdout&&i.destroy()),r.emit("disconnect")}var r=this;this.debug=n;var i;Array.isArray(e)?(i=e[1],e=e[0]):i=e,this.input=e,this.output=i;if(!e.readable)throw new Error("Input is not readable");if(!i.writable)throw new Error("Output is not writable");e.on("data",u),e.on("end",l),e.on("timeout",l),e.on("close",l),e.on("error",f),i.on("drain",a),i!==e&&(i.on("end",l),i.on("timeout",l),i.on("close",l),i.on("error",f));var s=o(function(e){var i;try{i=t.decode(e)}catch(s){return r.emit("error",s)}n&&console.log(process.pid+" <- "+require("util").inspect(i,!1,2,!0)),r.emit("message",i)});this.disconnect=l}function o(e){var t,n=0,r=0,i=0,s=0,o;return function(a){for(var f=0,l=a.length;f<l;f++){switch(n){case 0:r|=a[f]<<24,i=0,n=1;break;case 1:r|=a[f]<<16,n=2;break;case 2:r|=a[f]<<8,n=3;break;case 3:r|=a[f],i+=a[f],i+=i<<10,i+=i>>6,i+=i<<3,i^=i>>11,i+=i<<15,i|=0,s=0,n=4;break;case 4:s|=a[f]<<24,n=5;break;case 5:s|=a[f]<<16,n=6;break;case 6:s|=a[f]<<8,n=7;break;case 7:s|=a[f],n=8;if(s!==i)throw new Error("Hash mismatch, expected: "+i+" got: "+s+", chunk: "+a);if(r>104857600)throw new Error("Too big buffer "+r+", chunk: "+a);t=new Buffer(r),o=0,n=9;break;case 9:n=10;break;case 10:n=11;break;case 11:var c=l-f,h=!1;c+o>=r&&(h=!0,c=r-o),a.copy(t,o,f,f+c),o+=c,f+=c-1,h&&(e(t),n=0,r=0,t=undefined,o=undefined)}n<=3&&!h&&(i+=a[f],i+=i<<10,i+=i>>6),h=!1}}}function u(e){if(!this instanceof u)throw new Error("Forgot to use new with Agent constructor");this.api=e||{},this.disconnect=this.disconnect.bind(this),this._onMessage=this._onMessage.bind(this),this._onDrain=this._onDrain.bind(this),this._onReady=this._onReady.bind(this),this._getFunction=this._getFunction.bind(this),this._storeFunction=this._storeFunction.bind(this),this.remoteApi={},this.transport=undefined,this.callbacks=undefined,this.nextKey=undefined}function a(e,t){function i(e,s){var o=l(e);if(o!=="function"&&o!=="object"&&o!=="array"&&o!=="date")return e;var u=n.indexOf(e);if(u>=0)return{$:r[u]};u=n.length,n[u]=e,r[u]=s;var a;return o==="function"&&(a=t(e)),o==="date"&&(a={d:e.getTime()}),a?{$:a}:p(e,function(e,t){return i(e,s.concat([t]))},null,function(e){return e[0]==="$"?"$"+e:e})}var n=[],r=[];return i(e,[])}function f(e,t){function n(e,i,s){var o=l(e);s[0]==="$"&&(s=s.substr(1));if(o!=="function"&&o!=="object"&&o!=="array")return i[s]=e,e;if(e.hasOwnProperty("$")){var u=e.$;return Array.isArray(u)?(i[s]=c(r.root,u),i[s]):typeof u=="object"?(i[s]=new Date(u.d),i[s]):(i[s]=t(u),i[s])}var a=Array.isArray(e)?[]:{};return i[s]=a,h(e,function(e,t){n(e,a,t)}),r}var r={};return n(e,r,"root"),r.root}function l(e){return e===null?"null":Array.isArray(e)?"array":typeof Buffer!="undefined"&&Buffer.isBuffer(e)?"buffer":e instanceof Date?"date":typeof e}function c(e,t){var n=e;for(var r=0,i=t.length;r<i;r++)n=n[t[r]];return n}function h(e,t,n){if(typeof e.forEach=="function")return e.forEach.call(e,t,n);var r=Object.keys(e);for(var i=0,s=r.length;i<s;i++){var o=r[i];t.call(n,e[o],o,e)}}function p(e,t,n,r){if(typeof e.map=="function")return e.map.call(e,t,n);var i={},s=Object.keys(e);for(var o=0,u=s.length;o<u;o++){var a=s[o];i[r?r(a):a]=t.call(n,e[a],a,e)}return i}function d(e,n){function i(e){r.emit("error",e)}function s(e){var s;try{s=t.decode(e)}catch(o){return i(o)}n&&console.log(process.pid+" <- "+require("util").inspect(s,!1,2,!0)),r.emit("message",s)}function o(){e.removeListener("message",s),e.removeListener("close",o),r.emit("disconnect")}this.socket=e,this.debug=n;var r=this;e.on("message",s),e.on("close",o),e.on("error",i),this.disconnect=o}function v(e,n){function i(e){r.emit("error",e)}function s(){delete e.onmessage,delete e.onclose,r.emit("disconnect")}this.websocket=e,this.debug=n;var r=this;e.binaryType="arraybuffer",e.onmessage=function(e){var s;try{s=t.decode(e.data)}catch(o){return i(o)}n&&console.log("<-",s),r.emit("message",s)},e.onclose=function(e){},e.onerror=function(e){i(new Error(e.data))},this.disconnect=s}function m(e,t){var n=this;this.debug=t,e.on("error",function(e){n.emit("error",e)}),e.on("message",function(e){var r;try{r=JSON.parse(e)}catch(i){n.emit("error",i);return}Array.isArray(r)?(t&&console.log("<-",r),n.emit("message",r)):n.emit("legacy",r)}),e.on("close",function(e){n.emit("disconnect",e)}),this.disconnect=function(){e.close()},this.send=function(t){var r;try{r=JSON.stringify(t)}catch(i){n.emit("error",i);return}return this.debug&&Array.isArray(t)&&console.log("->",t),e.send(r)}}var n=e.EventEmitter,i={};return i.msgpack=t,i.Agent=u,i.Transport=s,i.deFramer=o,i.liven=f,i.freeze=a,i.getType=l,r(s,n),s.prototype.send=function(e){this.debug&&console.log(process.pid+" -> "+require("util").inspect(e,!1,2,!0));var n=t.encode(e),r=new Buffer(10);r.writeUInt32BE(n.length,0);var i=n.length>>24,s=n.length>>16&255,o=n.length>>8&255,u=n.length&255,a=0;return a+=i,a+=a<<10,a+=a>>6,a+=s,a+=a<<10,a+=a>>6,a+=o,a+=a<<10,a+=a>>6,a+=u,a+=a<<10,a+=a>>6,a+=a<<3,a^=a>>11,a+=a<<15,a|=0,r.writeInt32BE(a,4,!0),r.writeUInt16BE(0,8),this.output.write(r),this.output.write(n)},r(u,n),u.prototype.connectionTimeout=1e4,u.prototype.connect=function(e,t){function i(e){a(),t&&t(null,e)}function o(e){a(),t?t(e):r.emit("error",e)}function u(){a();var e=new Error("ETIMEDOUT: Timeout while waiting for Agent agent to connect.");e.code="ETIMEDOUT",r.emit("error",e)}function a(){r.removeListener("connect",i),r.removeListener("disconnect",o),r.removeListener("error",o),clearTimeout(n)}e instanceof s||(e=new s(e)),this.transport=e,this.callbacks={},this.nextKey=1,e.on("error",this.disconnect),e.on("disconnect",this.disconnect),e.on("message",this._onMessage),e.on("drain",this._onDrain),this.send(["ready",this._onReady]),this.on("connect",i),this.on("disconnect",o),this.on("error",o);var n;this.connectionTimeout&&(n=setTimeout(u,this.connectionTimeout));var r=this},u.prototype.send=function(e){return e=a(e,this._storeFunction),this.transport.send(e)},u.prototype._onReady=function(e,t){if(!Array.isArray(e))return;var n=this;e.forEach(function(e){if(n.remoteApi[e])return;n.remoteApi[e]=function(){if(!n.transport){var t=arguments[arguments.length-1];if(typeof t=="function"){var r=new Error("ENOTCONNECTED: Agent is offline, try again later");r.code="ENOTCONNECTED",t(r)}return}var i=[e];return i.push.apply(i,arguments),n.send(i)}}),this.remoteEnv=t,this._emitConnect()},u.prototype._emitConnect=function(){this.emit("connect",this.remoteApi)},u.prototype.disconnect=function(e){if(!this.transport&&e)return this.emit("error",e);this.transport.removeListener("error",this.disconnect),this.transport.removeListener("disconnect",this.disconnect),this.transport.removeListener("message",this._onMessage),this.transport.removeListener("drain",this._onDrain),this.transport.disconnect(),this.transport=undefined;var t=e;t||(t=new Error("EDISCONNECT: Agent disconnected"),t.code="EDISCONNECT"),this.emit("disconnect",e);if(this.callbacks){var n=this.callbacks;this.callbacks=undefined,h(n,function(e){e(t)})}this.nextKey=undefined},u.prototype._onDrain=function(){this.emit("drain")},u.prototype._onMessage=function(e){if(!Array.isArray(e)||!e.length)return this.emit("error",new Error("Message should be an array"));e=f(e,this._getFunction);var t=e[0],n;if(t==="ready"){var r=Object.keys(this.api),i=typeof process!="undefined"&&process.env;n=function(e){e(r,i)}}else n=typeof t=="string"?this.api[t]:this.callbacks[t];if(typeof n!="function")return this.emit("error",new Error("Should be function"));n.apply(this,e.slice(1))},u.prototype._getFunction=function(e){var t=this.transport;return function(){var n=[e];return n.push.apply(n,arguments),t.send(n)}},u.prototype._storeFunction=function(e){var t=this.nextKey;while(this.callbacks.hasOwnProperty(t)){t=t+1>>0;if(t===this.nextKey)throw new Error("Ran out of keys!!")}this.nextKey=t+1>>0;var n=this.callbacks,r=this;return n[t]=function(){return delete n[t],r.nextKey=t,e.apply(this,arguments)},t},i.WebSocketTransport=d,r(d,s),d.prototype.send=function(e){this.debug&&console.log(process.pid+" -> "+require("util").inspect(e,!1,2,!0));var n;try{n=t.encode(e)}catch(r){return this.emit("error",r)}this.socket.send(n,{binary:!0})},i.BrowserTransport=v,r(v,s),v.prototype.send=function(e){this.debug&&console.log("->",e);var n;try{n=t.encode(e)}catch(r){return this.emit("error",r)}this.websocket.send(n)},i.EngineIoTransport=m,r(m,s),i}),define("smith",["smith/smith"],function(e){return e}),define("smith/smith",function(){}),define("smith.io/client",["require","exports","module","engine.io","smith","smith/events-amd"],function(e,t,n){function f(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e}})}function l(){var e=new Date;return"["+e.toLocaleTimeString()+":"+e.getMilliseconds()+"]"}e("engine.io");var r=eio,i=e("smith"),s=e("smith/events-amd"),o=[],u=null,a=0,c=function(e){this.options=e,this.options.host=this.options.host||document.location.hostname,this.options.port===443&&(this.options.secure=!0),this.options.port=this.options.port||document.location.port,this.options.path=this.options.prefix,delete this.options.prefix,this.id=!1,this.serverId=!1,this.connecting=!1,this.connected=!1,this.away=!1,this.buffer=!1,this.connectIndex=-1};f(c,s.EventEmitter),c.prototype.getUri=function(){return"http"+(this.options.secure?"s":"")+"://"+this.options.host+(this.options.port?":"+this.options.port:"")+this.options.path+this.options.resource},c.prototype.connect=function(e,t){function o(e){console.log(l()+"[smith.io:"+n.connectIndex+":"+n.getUri()+"] "+e)}var n=this;a+=1,n.connectIndex=a;var s=!1;try{if(!n.away&&n.connected)throw new Error("smith.io '"+n.getUri()+"' is already connected!");if(n.connecting)throw new Error("smith.io '"+n.getUri()+"' is already connecting!");n.debug&&o("Try connect",e),n.connecting=!0;function u(){n.debug&&o("Trigger re-connect scheduler."),typeof e.reconnectAttempt=="undefined"&&(e.reconnectAttempt=0),e.reconnectAttempt+=1;if(e.reconnectAttempt===1){n.away=!1,n.connected=!1;try{n.emit("disconnect","away re-connect attempts exceeded")}catch(t){console.error(t.stack)}}var r=250;e.reconnectAttempt>10?r=15e3:e.reconnectAttempt>5?r=5e3:e.reconnectAttempt>3&&(r=1e3),n.debug&&o("Schedule re-connect in: "+r),setTimeout(function(){if(!n.away&&n.connected){n.debug&&o("Don't re-connect. Already connected!");return}if(n.connecting){n.debug&&o("Don't re-connect. Already connecting!");return}try{n.emit("reconnect",e.reconnectAttempt)}catch(t){console.error(t.stack)}n.connect({reconnectAttempt:e.reconnectAttempt,fireConnect:e.reconnectAttempt>=1?!0:!1},function(e){if(e){u();return}})},r)}n.socket=new r.Socket(n.options),n.socket.on("error",function(e){n.debug&&o("Connect error (failed: "+s+"): "+e.stack);if(!s){s=!0,n.connecting=!1;try{t(e)}catch(e){console.error(e.stack)}n.debug&&o("Close failed socket ("+n.socket.readyState+") on error");if(n.socket.readyState!=="closed")try{n.socket.close()}catch(e){}}}),n.socket.on("pong",function(e){if(s){n.debug&&o("Close failed socket ("+n.socket.readyState+") on heartbeat");if(n.socket.readyState!=="closed")try{n.socket.close()}catch(t){}return}if(e&&e.serverId&&e.serverId!==n.serverId){n.debug&&o("Detected server reboot on heartbeat. Close connection.");if(n.socket.readyState!=="closed")try{n.socket.close()}catch(t){}return}n.emit("heartbeat")}),n.socket.on("heartbeat",function(){if(s){n.debug&&o("Close failed socket ("+n.socket.readyState+") on heartbeat");if(n.socket.readyState!=="closed")try{n.socket.close()}catch(e){}return}}),n.socket.on("open",function(){function f(e){if(/probe error/i.test(e))return;if(a)return;a=!0,n.debug&&o("Disconnect socket: "+e);if(n.connected){n.away=Date.now();try{n.emit("away")}catch(t){console.error(t.stack)}}u()}n.connecting=!1;if(s){n.debug&&o("Close failed socket ("+n.socket.readyState+") on open");if(n.socket.readyState!=="closed")try{n.socket.close()}catch(r){}return}n.debug&&o("Init new socket ("+n.socket.id+")"),n.transport=new i.EngineIoTransport(n.socket),n.transport.on("legacy",function(t){if(typeof t=="object"&&t.type==="__ASSIGN-ID__"){if(n.serverId!==!1&&n.serverId!==t.serverId){n.debug&&o("Detected server reboot on handshake. Issue re-connect."),e.fireConnect=!0;if(n.connected===!0){n.connected=!1;try{n.emit("disconnect","server reboot")}catch(r){console.error(r.stack)}}}n.serverId=t.serverId,n.id===!1&&(n.id=t.id),n.transport.send({type:"__ANNOUNCE-ID__",id:n.id});if(n.away&&Date.now()-n.away>3e4){n.debug&&o("Long away (hibernate) detected. Issue re-connect."),e.fireConnect=!0;if(n.connected===!0){n.connected=!1;try{n.emit("disconnect","long away (hibernate)")}catch(r){console.error(r.stack)}}}n.away=!1,n.connected=!0;if(e.fireConnect!==!1)try{n.emit("connect",n)}catch(r){console.error(r.stack)}else if(e.reconnectAttempt>0)try{n.emit("back")}catch(r){console.error(r.stack)}e.reconnectAttempt=0,n.buffer&&(n.buffer.forEach(function(e){n.transport.send(e)}),n.buffer=!1)}else try{n.emit("message",t)}catch(r){console.error(r.stack)}}),n.transport.on("disconnect",f),n.transport.on("error",f);var a=!1;t(null,n)})}catch(f){t(f)}},c.prototype.send=function(e){if(this.connected===!1){var t=new Error("Cannot send smith.io message while disconnected! Sender should respect connect/disconnect states!");throw console.log(t.stack),t}this.away&&(this.buffer||(this.buffer=[]),this.buffer.push(e)),this.transport.send(e)},t.connect=function(e,t){var n=new c(e,t);return o.push(n),u&&u.hookTransport(n),n.debug&&console.log(l()+"[smith.io:"+n.getUri()+"] New transport",e),n.connect({},t),n},t.setDebug=function(e,t){u!==null&&(u.stop(),window.localStorage&&(localStorage.smithioDebug="",localStorage.debug=""));if(!e)return;t=t||[],window.localStorage&&(localStorage.smithioDebug=JSON.stringify([e,t])),u={transports:[],handlers:[],start:function(){o.forEach(u.hookTransport)},stop:function(){o.forEach(u.unhookTransport),u=null},hookTransport:function(e){function r(t){console.log(l()+"[smith.io:"+e.connectIndex+":"+e.getUri()+"] "+t)}var n=u.transports.indexOf(e);if(n!==-1)return;r("Hook debugger");var i={};e.debug=!0,e.on("connect",i.connect=function(){r("Connect")}),e.on("reconnect",i.reconnect=function(e){r("Reconnect: "+e)}),e.on("disconnect",i.disconnect=function(e){r("Disconnect: "+e)}),e.on("heartbeat",i.heartbeat=function(e){r("Heartbeat")}),t.indexOf("message")!==-1&&e.on("message",i.message=function(e){r("Message",e)}),e.on("away",i.away=function(){r("Away")}),e.on("back",i.back=function(){r("Back")}),t.indexOf("engine.io")!==-1&&window.localStorage&&(localStorage.debug="*"),u.transports.push(e),u.handlers.push({unhook:function(){r("Unhook debugger"),e.debug=!1;for(var t in i)e.removeListener(t,i[t])}})},unhookTransport:function(e){var t=u.transports.indexOf(e);if(t===-1)return;u.transports.splice(t,1),u.handlers[t].unhook(),u.handlers.splice(t,1)}},u.start()},window.localStorage&&localStorage.smithioDebug&&t.setDebug.apply(null,JSON.parse(localStorage.smithioDebug))}),define("smith.io",["smith.io/client"],function(e){return e});var ide;define("core/ide",["require","exports","module","core/document","core/util","smith.io"],function(e,t,n){var r=e("core/document"),i=e("core/util"),s=e("smith.io");ide=(new apf.Class).$init(),ide.createDocument=function(e,t){return new r(e,t)},ide.start=function(){this.workspaceDir=window.cloud9config.workspaceDir.replace(/\/+$/,""),this.davPrefix=window.cloud9config.davPrefix.replace(/\/+$/,""),this.workerPrefix=window.cloud9config.workerUrl,this.staticPrefix=window.cloud9config.staticUrl,this.sessionId=window.cloud9config.sessionId,this.clientId=i.uuid(),this.workspaceId=window.cloud9config.workspaceId,this.readonly=window.cloud9config.readonly,this.projectName=window.cloud9config.projectName,this.uid=window.cloud9config.uid,this.pid=window.cloud9config.pid,this.env=window.cloud9config.env,this.local=window.cloud9config.local,this.apiPrefix=this.davPrefix.replace(/workspace/,"api"),this.loggedIn=parseInt(this.uid,10)>0,this.onLine=!1,this.offlineFileSystemSupport=!1,this.dispatchEvent("load");var e=location.href;if(location.protocol!=="file:"&&e.indexOf("dev")===-1&&e.indexOf("c9.io")>-1){var t=window.onerror;window.onerror=function(e,n,r){apf.ajax("/api/debug",{method:"POST",contentType:"application/json",data:JSON.stringify({agent:navigator.userAgent,type:"General Javascript Error",e:[e,n,r],workspaceId:ide.workspaceId})}),t&&t.apply(this,arguments)},apf.addEventListener("error",function(e){apf.ajax("/api/debug",{method:"POST",contentType:"application/json",data:JSON.stringify({agent:navigator.userAgent,type:"APF Error",message:e.message,tgt:e.currentTarget&&e.currentTarget.serialize(),url:e.url,state:e.state,e:e.error,workspaceId:ide.workspaceId})})})}},ide.start(),window.cloud9config.debug&&console.info("Connecting",JSON.parse(window.cloud9config.smithIo)),s.connect(JSON.parse(window.cloud9config.smithIo),function(e,t){if(e)return console.error(e);ide.connection=t,t.on("connect",function(){window.cloud9config.debug&&console.info("Connected"),ide.connecting=!0,t.send({command:"attach",sessionId:ide.sessionId,workspaceId:ide.workspaceId})}),t.on("disconnect",function(e){window.cloud9config.debug&&console.info("Disconnected"),ide.connected=!1,ide.dispatchEvent("socketDisconnect")}),t.on("message",function(e){if(typeof e=="string")try{e=JSON.parse(e)}catch(t){window.console&&console.error("Error parsing socket message",t,"message:",e);return}e.type=="attached"&&(ide.connecting=!1,ide.connected=!0,ide.dispatchEvent("socketConnect")),e.type==="error"&&ide.dispatchEvent("showerrormessage",e)!==!1&&i.alert("Error on server","Received following error from server:",JSON.stringify(e.message)),ide.dispatchEvent("socketMessage",{message:e})}),t.on("away",function(){window.cloud9config.debug&&console.info("Away")}),t.on("back",function(){window.cloud9config.debug&&console.info("Back")})}),this.inited=!0,ide.send=function(e){ide.connected===!0?ide.connection.send(e):ide.addEventListener("socketConnect",function t(){ide.removeEventListener("socketConnect",t),ide.connection.send(e)})},ide.getActivePage=function(){return this.dispatchEvent("correctactivepage")||tabEditors.getPage()||null},ide.getActivePageModel=function(){var e=this.getActivePage();return e?e.$model.data:null},ide.getAllPageModels=function(){return tabEditors.getPages().map(function(e){return e.$model.data})},n.exports=ide}),define("core/ext",["require","exports","module","core/ide","core/util"],function(e,t,n){var r=e("core/ide"),i=e("core/util");const s=4,o=16,u=64;var a;n.exports=a={GENERAL:1,defLength:1,extHandlers:{1:{register:function(e){e.hook||a.initExtension(e)},unregister:function(e){}}},extensions:[],extLut:{},commandsLut:{},typeLut:{1:"General"},model:new apf.model,currentLayoutMode:null,addType:function(e,t,n){this[e.toUpperCase()]=++this.defLength,this.extHandlers[this.defLength]={register:t,unregister:n},this.typeLut[this.defLength]=e},register:function(e,t,n){if(t.registered)return t;var s=new Date;this.model.data||this.model.load("<plugins />"),this.model.queryNode("plugin[@path="+i.escapeXpathString(e)+"]")?this.model.setQueryValue("plugin[@path="+i.escapeXpathString(e)+"]/@enabled",1):this.model.appendXml(apf.n("<plugin/>").attr("type",this.typeLut[t.type]).attr("name",t.name||"").attr("path",e).attr("dev",t.dev||"").attr("enabled","1").attr("userext","0").node());if(!n&&t.type==this.GENERAL&&!t.alone)return t.path=e,t;t.registered=!0,t.path=e;var o=this.defaultEnable,u=this.defaultDisable,a=this.defaultDestroy;t.enable=t.enable||o,t.disable=t.disable||u,t.destroy=t.destroy||a,t.$enable=o,t.$disable=u,t.$destroy=a,this.extHandlers[t.type].register(t),this.extLut[e]=t,this.extensions.push(t),t.hook&&(t.hook(),r.addEventListener("$event.hook."+t.path,function(e){e.call(this,{ext:t})}),r.dispatchEvent("hook."+t.path,{ext:t}));var f=i.escapeXpathString(e),l=parseInt(this.model.queryValue("plugin[@path="+f+"]/@init")||0);return this.model.queryNode("plugin[@path="+f+"]").setAttribute("hook",Number(new Date-s)-l),t},unregister:function(e,t){var n=e.using;if(n){var r=[];for(var s,o=0,u=n.length;o<u;o++)(s=n[o]).registered&&r.push(s.path);if(r.length)return t||i.alert("Could not disable extension","Extension is still in use","This extension cannot be disabled, because it is still in use by the following extensions:<br /><br /> - "+r.join("<br /> - ")+"<br /><br /> Please disable those extensions first."),!1}delete e.registered,this.extensions.remove(e),delete this.extLut[e.path];var a=e.commands;if(a)for(var f in a)this.commandsLut[f]&&delete this.commandsLut[f];var l=e.deps;if(l)for(var c,h=0,p=l.length;h<p;h++)c=l[h],c.registered&&c.type==this.GENERAL&&!e.alone&&this.unregister(c,!0);return this.extHandlers[e.type].unregister(e),this.model.setQueryValue("plugin[@path="+i.escapeXpathString(e.path)+"]/@enabled",0),e.inited&&this.destroyExt(e),!0},getExtension:function(e){return this.extLut[e]},initExtension:function(e,t){if(e.inited)return;var n=new Date;e.inited=!0;var s=e.skin;if(s&&typeof s=="object"){var o=e.skin.data;e.skinNode=new apf.skin(apf.extend({},e.skin,{data:null})),e.skinNode.setProperty("src",o),apf.document.documentElement.appendChild(e.skinNode)}var u=e.markup;u&&(e.markupInsertionPoint||t||apf.document.documentElement).insertMarkup(u);var f=e.deps;f&&f.each(function(t){t.registered||a.register(t.path,t,!0),(t.using||(t.using=[])).pushUnique(e)});if(this.currentKeybindings){var l=e.path.substr(e.path.lastIndexOf("/")+1),c=this.currentKeybindings[l];c&&(e.currentKeybindings=c)}e.init&&e.init(t),r.addEventListener("$event.init."+e.path,function(t){t.call(this,{ext:e})}),r.dispatchEvent("init."+e.path,{ext:e}),this.model.queryNode("plugin[@path="+i.escapeXpathString(e.path)+"]").setAttribute("init",Number(new Date-n))},defaultEnable:function(){(this.nodes||[]).each(function(e){e.enable&&e.enable()}),this.disabled=!1,this.enabled=!0},defaultDisable:function(){(this.nodes||[]).each(function(e){e.disable&&e.disable()}),this.disabled=!0,this.enabled=!1},defaultDestroy:function(){(this.nodes||[]).each(function(e){e.destroy&&e.destroy(!0,!0)}),this.nodes=[],this.disabled=!0,this.enabled=!1,delete this.inited},enableExt:function(t){var n=e(t);n.enable(),this.model.setQueryValue("plugin[@path="+i.escapeXpathString(t)+"]/@enabled",1)},disableExt:function(t){var n=e(t);n.disable(),this.model.setQueryValue("plugin[@path="+i.escapeXpathString(t)+"]/@enabled",0)},destroyExt:function(e){e.destroy()},execCommand:function(e,t){e?e=e.trim():e="";var n=self.require("ext/commands/commands"),r=self.require("ext/console/console"),i=n.commands[e];if(!i||!i.exec)return;e!=="clear"&&e!=="newtab"&&(i.msg?r.write([i.msg],t):r.write('"'+e+'" command executed',t));var s=n.exec(e,null,t);return s===undefined?!1:s}}}),define("core/settings",["require","exports","module","core/ide","core/settings"],function(e,t,n){function u(e,t){var n=!1;return function(){if(n)return;n=!0,setTimeout(function(){n=!1},e),t.apply(null,arguments)}}var r=e("core/ide"),i="<settings />",s=1e4,o=6e4;n.exports={model:new apf.model,$checkSave:function(){this.dirty&&this.saveToFile()},startTimer:function(){var e=this;clearInterval(this.$timer);var t=function(){e.$checkSave()};this.$timer=setInterval(t,s)},save:function(e){this.dirty=!0,e&&(this.saveToFile(),this.startTimer())},saveToFile:function(){cloud9config.debug&&console.log("Saving Settings..."),r.dispatchEvent("settings.save",{model:this.model}),this.model.data.setAttribute("time",(new Date).getTime());var e=this.model.data&&apf.xmldb.cleanXml(this.model.data.xml)||"";r.onLine&&(this.dirty=!1,r.send({command:"settings",action:"set",settings:e}),this.throttledTrackAction(e))},load:function(e){try{this.model.load(e)}catch(t){this.model.load(i)}if(!cloud9config.debug)try{r.dispatchEvent("settings.load",{model:this.model,ext:this})}catch(t){self.require("ext/filesystem/filesystem").saveFile("/workspace/.c9.brokensettings.xml",e.xml||e),this.model.load(i),r.dispatchEvent("settings.load",{model:this.model,ext:this})}else r.dispatchEvent("settings.load",{model:this.model,ext:this});r.addEventListener("$event.settings.load",this.$loadsettings),this.loaded=!0},$loadsettings:function(t){var n=e("core/settings");if(cloud9config.debug)t({model:n.model,ext:n});else try{t({model:n.model,ext:n})}catch(r){console.log(r.message,r.stack)}},setDefaults:function(e,t){var n=this.model.queryNode(e);n||(n=apf.createNodeFromXpath(this.model.data,e));for(var r=0,i=t.length;r<i;r++)n.getAttributeNode(t[r][0])||apf.xmldb.setAttribute(n,t[r][0],t[r][1]);apf.xmldb.applyChanges("synchronize",n)},init:function(){function a(){s.startTimer(),apf.addEventListener("exit",function(){s.$checkSave()}),r.addEventListener("afteronline",function(){s.saveToFile(),localStorage[n]=null,delete localStorage[n]}),r.addEventListener("afteroffline",function(){s.loaded&&s.saveToFile()}),s.model.addEventListener("update",function(){s.save()})}var e,t=location.href.indexOf("reset=1")>-1,n=this.sIdent="cloud9.settings."+r.workspaceId,s=this;this.model.setProperty("create-model",!1),t?e=i:localStorage[n]?e=localStorage[n]:!cloud9config.settings||cloud9config.settings=="defaults"?e=i:cloud9config.settings&&(e=cloud9config.settings);if(!e){r.addEventListener("socketMessage",function(e){if(e.message.type=="settings"){var t=e.message.settings;if(!t||t=="defaults")t=i;s.load(t),a(),r.removeEventListener("socketMessage",arguments.callee)}}),r.onLine===!0?r.send({command:"settings",action:"get"}):r.addEventListener("afteronline",function(){r.send({command:"settings",action:"get"})});return}this.load(e),a(),this.throttledTrackAction=u(o,function(e){r.dispatchEvent("track_action",{type:"save settings",settings:e})})}},n.exports.init()}),define("text!ext/main/main.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:appsettings name="ide" debug="false"\n      disable-space             = "true"\n      auto-hide-loading         = "true"\n      allow-select              = "false"\n      allow-blur                = "false"\n      initdelay                 = "false"\n      autoHideLoading           = "false"\n      storage                   = "cookie"\n      baseurl                   = "{apf.host ? apf.host : \'\'}"\n      requested-with-getparam   = "xhr"\n      csrf-header                = "{window.cloud9config._csrf}"/>\n\n    <!-- default model -->\n    <a:model />\n\n    <a:state id="stServerConnected" active="false" />\n    <a:state id="stProcessRunning" active="false" />\n\n    <a:scrollbar\n        id       = "sbShared"\n        skin     = "sbios"\n        top      = "0"\n        right    = "0"\n        bottom   = "0"\n        width    = "7"\n        showonscroll = "true"\n        zindex   = "100000"\n    />\n\n    <a:vsplitbox anchors="0 0 0 0" id="vbMain">\n        <a:bar skin="c9-menu-bar" id="logobar" height="31" minwidth="900">\n            <a:bar class="fakehbox aligncenter padding3" id="barTools" height="25" style="padding-top:1px">\n                <a:divider skin="c9-divider-double" style="margin-left:-1px" />\n            </a:bar>\n            <a:bar style="float:right;" class="fakehbox aligncenter padding3" id="barExtras">\n                <a:divider skin="c9-divider" visible="false" />\n            </a:bar>\n        </a:bar>\n\n        <a:hsplitbox>\n            <a:vsplitbox id="consoleRow" splitter="true">\n                <a:vsplitbox id="searchRow">\n                    <a:vsplitbox id="editorRow">\n                        <a:hsplitbox id="hboxTabBar" height="27">\n                            <a:bar id="barButtonContainer" class="editor_tab" style="line-height:0" />\n                        </a:hsplitbox>\n                        <a:hsplitbox id="hboxMain" splitter="true">\n                            <a:bar id="colLeft" width="1" minwidth="105" visible="false" />\n                            <a:hsplitbox>\n                                <a:vsplitbox id="colMiddle" padding="3" />\n                            </a:hsplitbox>\n                        </a:hsplitbox>\n                    </a:vsplitbox>\n                </a:vsplitbox>\n            </a:vsplitbox>\n            <a:hbox id="hboxDockPanel" class="hboxdockpanel" width="0" pack="end"/>\n        </a:hsplitbox>\n    </a:vsplitbox>\n</a:application>'}),define("text!ext/main/style/skins.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n<a:checkbox name="cboffline">\n    <a:style><![CDATA[\n        .cboffline {\n            width: 55px;\n            height: 21px;\n            background: url(images/sync.png) no-repeat 0 -21px;\n        }\n\n        .cbofflineDown {\n            background-position : 0 0px;\n        }\n\n        .cbofflineChecked {\n            background-position : 0 0px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main>\n            <div class=\'cboffline\'>\n\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:bar name="bar">\n    <a:style><![CDATA[\n        .basic{\n            position : relative;\n        }\n\n        .fakehbox{\n            white-space : nowrap;\n        }\n\n        .fakehbox>*{\n            display : inline-block;\n        }\n\n        .fakehbox.aligntop>*{\n            vertical-align : top;\n        }\n\n        .fakehbox.aligncenter>*{\n            vertical-align : middle;\n        }\n\n        .fakehbox.padding3>*{\n            margin-left : 3px;\n        }\n\n        .fakehbox.static{\n            position : static;\n        }\n\n        .bar-offline-cover {\n            position: absolute;\n            top: 0;\n            right: 0;\n            left: 0;\n            bottom: 0;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="basic">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar name="deprecated">\n    <a:style><![CDATA[\n        .bar{\n            overflow : hidden;\n            position : relative;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main container="div">\n            <div class="bar">\n                <div class="contents"> </div>\n                <div class="barFooter"><div><div> </div></div></div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar name="winGoToFile">\n    <a:style><![CDATA[\n        .winGoToFile {\n            background:#e8e8e8;\n            box-shadow:0 5px 7px rgba(0,0,0,0.5);\n            border:1px solid #bbb;\n            border-width:0 1px 1px 1px;\n            position:absolute;\n            left:50%;\n            margin-left:-250px;\n            top : 37px;\n        }\n        .dark .winGoToFile {\n            border-color: rgba(255,255,255,.1);\n        }\n        .dark .winGoToFile .searchbox_textbox .sbtb_middle {\n            border-color: rgba(0,0,0,.9);\n            box-shadow: 0px 1px 0px rgba(255,255,255,.1);\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="winGoToFile">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar name="c9-header-bar">\n    <a:style><![CDATA[\n        .c9-header-bar{\n            position : absolute;\n            right: 30px;\n            top: -31px;\n        }\n\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="c9-header-bar">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar name="c9-menu-bar">\n    <a:style><![CDATA[\n        body > .vbox,\n        .editor_tab .curbtn .tab_middle {\n            background-color: #e8e8e8 !important; /*#0c9*/\n        }\n        /* ------------------------------------------------------------------------------------------\n         * c9 Menu Bar expanded\n         * --------------------------------------------------------------------------------------- */\n        .c9-menu-bar {\n            position      : relative;\n            overflow      : visible;\n            background    : url(images/c9-repeat-x.png) repeat-x 0 0 #49a8fa;\n            -moz-user-select: -moz-none;\n            -khtml-user-select: none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select: none;\n        }\n        .c9-menu-bar .c9-mbar-bcont {\n            position   : relative;\n            overflow   : visible;\n        }\n\n        .c9-menu-bar .c9-mbar-bcont .c9-offline {\n            width:42px;\n            height:21px;\n            position:absolute;\n            background:url(images/offline.png) no-repeat 0 0;\n            top:26px;\n            right: 3px;\n            display: none;\n            z-index: 100000;\n        }\n\n        .c9-menu-bar.offline .c9-mbar-bcont .c9-offline {\n            display:block;\n        }\n\n        .c9-menu-bar .c9-mbar-bcont .c9-local {\n            width:42px;\n            height:21px;\n            position:absolute;\n            background:url(images/local_green.png) no-repeat 0 0;\n            top:40px;\n            right: 3px;\n            display: none;\n            z-index: 100000;\n        }\n\n        .c9-menu-bar.offline.local .c9-mbar-bcont .c9-local {\n            display:block;\n        }\n\n        .c9-mbar-logo{\n            padding-top: 4px;\n        }\n\n        .c9-menu-bar .c9-mbar-logo .c9-mbar-bcont .c9-offlineInfo {\n            width: 158px;\n            height: auto;\n            line-height : 19px;\n            position: absolute;\n            top: 42px;\n            right: 3px;\n            z-index: 50000;\n            min-width: 0px;\n            min-height: 0px;\n            max-width: 9998px;\n            max-height: 9992px;\n            display: none;\n            opacity: 1;\n            padding: 5px 7px 7px 9px;\n            color: #BDBDBD;\n        }\n\n        .c9-menu-bar .c9-mbar-logo .c9-mbar-bcont .c9-offlineInfo .offlineInfoWarn{\n            color: #91c478;\n        }\n\n        .c9-menu-bar .c9-mbar-cont {\n            position: relative;\n            overflow: hidden;\n            padding: 0 74px 0 22px;\n            margin: 0;\n            height: 25px;\n\n            background: -moz-linear-gradient(top,  #292929, #242424); /* FF3.6+ */\n            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#292929), color-stop(100%,#242424)); /* Chrome,Safari4+ */\n            background: -webkit-linear-gradient(top,  #292929,#242424); /* Chrome10+,Safari5.1+ */\n            background: -o-linear-gradient(top,  #292929,#242424); /* Opera 11.10+ */\n            background: -ms-linear-gradient(top,  #292929,#242424); /* IE10+ */\n            background: linear-gradient(top,  #292929,#242424); /* W3C */\n\n            box-shadow: 0 1px 0 0 #353535 inset;\n            border-bottom: 1px solid #000;\n            border-top: 1px solid #000;\n        }\n\n        .c9-menu-bar .c9-mbar-cont>div{\n            display : inline-block;\n            vertical-align : top;\n        }\n\n        .c9-menu-bar .c9-mbar-cont .c9-divider-double,\n        .c9-menu-bar .c9-mbar-bcont .c9-mbar-minimize {\n            border-right: 1px solid #1B1B1B;\n            box-shadow: 1px 0 0 0 rgba(255,255,255,.08);\n        }\n\n        .c9-menu-bar .c9-mbar-cont .c9-divider-double {\n            border-left-width: 0;\n            height: 16px;\n            top: 1px;\n        }\n\n        .c9-menu-bar .c9-mbar-cont .c9-divider-double div {\n            border: 0 !important;\n        }\n\n        .c9-menu-bar .c9-mbar-bcont .c9-mbar-minimize {\n            background: url(images/c9-no-repeat.png) no-repeat 0 -70px;\n            cursor: pointer;\n            height: 25px;\n            left: 0;\n            position : absolute;\n            top: 0px;\n            width: 20px;\n        }\n        .c9-menu-bar .c9-mbar-bcont .c9-mbar-minimize:hover {\n            background-position: -21px -70px;\n        }\n\n        .c9-menu-bar .c9-mbar-bcont .c9-simple-btnDisabled.c9-mbar-minimize:hover {\n            background-position: 0 -70px;\n            cursor: default;\n        }\n        .c9-mbar-round {\n            background : url(images/c9-no-repeat.png) no-repeat 0 0;\n            height: 37px;\n            pointer-events: none;\n            position: fixed;\n            right: 0;\n            top: 0;\n            width: 74px;\n            z-index: 999;\n        }\n        .c9-mbar-round .mainlogo {\n            background: url("images/c9-no-repeat.png") no-repeat 0 -44px;\n            display: block;\n            height: 26px;\n            left: 33px;\n            pointer-events: all;\n            position: absolute;\n            text-indent: 100%;\n            top: 4px;\n            width: 37px;\n        }\n       .updateAvailable .c9-mbar-round .mainlogo {\n           background: url("images/c9-no-repeat.png") no-repeat -96px -44px;\n           cursor: pointer;\n       }\n\n        .not-loggedin .c9-menu-bar .c9-mbar-bcont .c9-mbar-round {\n          top: 55px;\n       }\n\n        .readonly .c9-menu-bar .c9-mbar-bcont .c9-mbar-round {\n           top: 35px;\n        }\n        .c9-menu-bar .c9-mbar-bcont .c9-activity {\n        	background : url(images/c9-no-repeat.png) no-repeat -84px 0;\n        	height: 10px;\n        	left: 24px;\n            pointer-events: all;\n        	position: absolute;\n        	top: 4px;\n        	width: 10px;\n        }\n        .c9-menu-bar .c9-mbar-bcont .c9-activity .light {\n            background : url(images/c9-no-repeat.png) no-repeat -102px -19px; /* nothing */\n            height: 10px;\n            left: 0;\n            position: absolute;\n            top: 0;\n            width: 10px;\n        }\n\n        .c9-menu-bar .c9-mbar-bcont .c9-sync {\n            background:url(images/sync_toggle.png) no-repeat 0 -20px;\n        }\n\n        .c9-menu-bar .c9-mbar-bcont .c9-sync.btnChecked {\n            background:url(images/sync_toggle.png) no-repeat 0 0;\n        }\n\n        .c9-menu-bar .c9-mbar-bcont .c9-sync.undetermined {\n            background-position: 0 -80px;\n        }\n\n        .c9-menu-bar .c9-mbar-bcont .c9-sync.btnDisabled {\n            background-position: 0 -60px;\n        }\n\n        /* ------------------------------------------------------------------------------------------\n         * c9 Menu Bar minimized\n         * --------------------------------------------------------------------------------------- */\n         .c9-menu-bar.minimized .c9-mbar-cont,\n         .c9-menu-bar.minimized .c9-mbar-bcont .c9-mbar-minimize {\n            background-color: #262626;\n            background-image: url("images/c9-repeat-x.png");\n            background-repeat: no-repeat;\n            background-position: 50% -13px;\n            cursor: pointer;\n            height: 6px;\n         }\n         .c9-menu-bar.minimized .c9-mbar-cont:hover,\n         .c9-menu-bar.minimized .c9-mbar-bcont .c9-mbar-minimize:hover {\n            background-position: 50% -21px;\n            box-shadow: 1px 0 0 0 rgba(255,255,255,.08), 0 6px 0 0 rgba(255,255,255,0.05) inset;\n         }\n         .c9-menu-bar.minimized .c9-mbar-cont * {\n            display: none;\n         }\n\n         .c9-menu-bar.minimized .c9-mbar-bcont .c9-mbar-minimize {\n            top: 1px;\n         }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="div/div/div[1]">\n            <div class="c9-menu-bar">\n                <div class="c9-mbar-logo">\n                    <div class="c9-mbar-bcont">\n                        <div class="c9-mbar-cont"> </div>\n\n                        <div class="c9-mbar-round">\n                            <a id="backToC9" href="http://c9.io/" class="mainlogo backToC9" target="_blank" title="Go to c9.io">c9.io</a>\n                            <div class="c9-activity"><div id="saveStatus" class="light"> </div></div>\n                            <div class="c9-local"> </div>\n                            <div class="c9-offline" onmouseover="require(\'ext/offline/offline\').toggleInfoDiv(1);" onmouseout="require(\'ext/offline/offline\').toggleInfoDiv(0);"> </div>\n                            <div id="offlineInfoDiv" class="c9-offlineInfo menu-bk upward moveleft menu-bkFocus">Keep working without<br />internet. When you\'re back online, Cloud9 syncs your files for you!<div class="offlineInfoWarn">Some features are disabled.</div></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n\n<a:bar name="black-menu-bar">\n    <a:style><![CDATA[\n        .black-menu-bar {\n			background    : rgba(26, 26, 26, .9);\n			border-bottom : 1px solid black;\n			height        : 26px !important;\n			overflow      : hidden;\n			padding       : 0 0 0 0px !important;\n			position      : relative;\n			width         : 200px;\n			box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.05) inset;\n			min-width : 196px;\n            z-index   : 1000;\n        }\n\n        .black-menu-bar .c9menulogo {\n            width    : 65px;\n            height   : 32px;\n            position : absolute;\n            bottom   : 20px;\n        }\n\n        .black-menu-bar .c9menulogo span {\n            background  : url(images/c9menulogo.png) no-repeat 0 0;\n            width       : 45px;\n            height      : 29px;\n            position    : absolute;\n            left        : 50%;\n            margin-left : -22px;\n            top         : 0;\n        }\n\n        .black-menu-bar .c9version {\n            color       : #696969;\n            font-family : Tahoma, Arial;\n            font-size   : 10px;\n            text-align  : center;\n            padding     : 0 0 3px 0;\n            position    : absolute;\n            bottom      : 2px;\n            left        : 0;\n            right       : 0;\n        }\n\n        .black-menu-bar .c9-logo {\n        	background: url(images/c9-no-repeat.png) no-repeat;\n        	box-shadow: 1px 0 0 0  black;\n        	cursor: pointer;\n        	height: 27px;\n        	width: 39px;\n        }\n        .black-menu-bar.closed .c9-logo {\n        	background-position: 0px -346px;\n        }\n        .black-menu-bar.closed .c9-logo.mnubtnOver {\n        	background-position: -40px -346px;\n        }\n        .black-menu-bar.closed .c9-logo.mnubtnDown {\n            background-position: -80px -346px;\n\n        }\n        .black-menu-bar .c9-logo {\n            background-position: -120px -346px;\n        }\n        .black-menu-bar .c9-logo.mnubtnOver {\n        	background-position: -160px -346px;\n        }\n        .black-menu-bar .c9-logo.mnubtnDown {\n            background-position: -200px -346px;\n        }\n        .black-menu-bar .c9-logo .icon{\n            display : none;\n        }\n\n        .black-menu-bar .toggle-black-menu-bar {\n        	background: url(images/c9-no-repeat.png) no-repeat 0 -383px;\n            box-shadow: none;\n        	cursor: pointer;\n        	height: 27px;\n        	position: absolute;\n        	right: 0;\n        	top: 0;\n        	width: 5px;\n        }\n        .black-menu-bar.closed .toggle-black-menu-bar {\n            background-position: 0px -383px;\n            right : 1px;\n        }\n        .black-menu-bar.closed .toggle-black-menu-bar:hover {\n            background-position: -8px -383px;\n        }\n        .black-menu-bar .toggle-black-menu-bar {\n            background-position: -18px -383px;\n        }\n        .black-menu-bar .toggle-black-menu-bar:hover {\n            background-position: -26px -383px;\n        }\n        .black-menu-bar .toggle-black-menu-bar .icon{\n            display : none;\n        }\n        .black-menu-bar.closed.minimized {\n            border-bottom-right-radius: 3px;\n        }\n        .black-menu-bar.closed.minimized .toggle-black-menu-bar {\n            border-bottom-right-radius: 3px;\n            border-top-right-radius: 3px;\n        }\n        .black-menu-bar.closed.minimized {\n            border-right: 1px solid rgba(31,31,31,.8);\n            box-shadow: 0px 1px 0px rgba(255, 255, 255, 0.05) inset, 1px 0 1px 0 rgba(255,255,255,.05)\n        }\n        .black-menu-bar.closed.minimized .toggle-black-menu-bar {\n            background-image: url(images/c9-no-repeat.png), url(images/c9-repeat-x.png);\n            background-position: -38px -383px, 0 -1090px;\n            background-repeat: no-repeat, repeat-x;\n            box-shadow: 0 1px 0 0 rgba(255,255,255,.03) inset;\n            right: 0px;\n            width: 9px;\n        }\n        .black-menu-bar.closed.minimized .toggle-black-menu-bar:hover {\n            background-position: -48px -383px, 0 -1030px;\n        }\n        .black-menu-bar.closed.minimized>.mnubtn{\n            opacity : 0;\n        }\n        .black-menu-bar.closed.minimized>.toggle-black-menu-bar{\n            opacity : 1;\n        }\n     ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="black-menu-bar"> </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar name="debug-panel">\n    <a:style><![CDATA[\n        .debug-panel {\n            position         : relative;\n            overflow         : hidden;\n            width            : 39px;\n            border-left      : 1px solid #1e1e1e;\n            background       : url(images/debug-panel_bg.png) 0 0;\n            padding-left: 1px;\n        }\n\n        .debug-panel .bar_inset {\n            width            : 43px;\n            height           : 12px;\n            position         : relative;\n            background       : url(images/sidebar_right_bar_inset.gif);\n        }\n        .debug-panel-border {\n            position: absolute;\n            height: 100%;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            border-left: 1px solid #38393B;\n        }\n        .debug-panel .body {\n            position    : absolute;\n            top         : 0px;\n            left        : 1px;\n            right       : 0;\n            bottom      : 0;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="div[2]">\n            <div class="debug-panel">\n                <div class="debug-panel-border"></div>\n                <div class="body"/>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar name="dock-panel">\n    <a:style><![CDATA[\n        .dock-panel {\n            position         : relative;\n            overflow         : hidden;\n            width            : 65px;\n            border-right     : 1px solid #333;\n            background       : url(images/dock_cloud9_bg.gif);\n        }\n        .docksection {\n            background       : url(images/debug-panel_bg.png) 0 0;\n            margin-bottom: 2px;\n            position: relative;\n        }\n\n        .docksection:after {\n            background: url(images/c9-no-repeat.png) no-repeat -204px 0;\n            content: "";\n            display: block;\n            height: 2px;\n            left: -1px;\n            position: absolute;\n            top: 100%;\n            width: 36px;\n        }\n\n\n        .docksection div:nth-child(2) {\n            padding-top: 0;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="dock-panel">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:button name="btn-access_request">\n    <a:style><![CDATA[\n        .btn-access_request {\n            background: url(images/red-arrow-down.png) no-repeat right 1px;\n            color: #fec0c0;\n            padding-right: 20px;\n            cursor: default;\n        }\n\n        .btn-access_requestOver {\n            text-decoration: underline;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "text()"\n          background = "."\n          icon       = ".">\n            <div class="btn-access_request"> </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="button">\n    <a:style><![CDATA[\n        .btn {\n            height             : 27px;\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            line-height        : 17px;\n            -moz-user-select: -moz-none;\n            -khtml-user-select : none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select        : none;\n        }\n\n        .btn.smallbtn {\n            height             : 23px;\n        }\n\n        .btn .left {\n            float               : left;\n            width               : 4px;\n            height              : 27px;\n            background-color    : transparent;\n            background-image    : url("images/sprite-rounded-vert.png");\n            background-repeat   : no-repeat;\n            background-position : -16px 0;\n        }\n\n        .btn.smallbtn .left {\n            height              : 23px;\n            background-position : -16px -6717px;\n        }\n\n        .btn .lbl {\n            height              : 22px;\n            padding             : 5px 8px 0 8px;\n            margin              : 0 4px;\n            white-space         : nowrap;\n            overflow            : hidden;\n            background-color    : transparent;\n            background-image    : url("images/sprite-rounded-vert.png");\n            background-repeat   : repeat-x;\n            background-position : 0 -27px;\n            position            : relative;\n            text-align          : center;\n            color               : #474747;\n            text-shadow         : rgba(255, 255, 255, .71) 0px 1px 0px;\n            font-family         : Arial;\n            font-size           : 14px;\n            font-weight         : bold;\n        }\n\n        .btn.smallbtn .lbl {\n            height              : 20px;\n            padding             : 3px 3px 0 3px;\n            background-position : 0 -6740px;\n            font-size           : 12px;\n        }\n\n        .label_small .lbl {\n            padding-left: 2px;\n        }\n\n        .btn .right {\n            float               : right;\n            width               : 4px;\n            height              : 27px;\n            background-color    : transparent;\n            background-image    : url("images/sprite-rounded-vert.png");\n            background-repeat   : no-repeat;\n            background-position : 0 -54px;\n        }\n\n        .btn.smallbtn .right {\n            height              : 23px;\n            background-position : 0 -6763px;\n        }\n\n        .btn .lbl .btnArrow {\n            display             : none;\n            position            : relative;\n            right               : 0;\n            width               : 5px;\n            height              : 3px;\n            vertical-align      : middle;\n        }\n\n        .btnIcon .lbl {\n            overflow : visible;\n        }\n\n        .btnIcon .lbl SPAN {\n            width               : 23px;\n            height              : 23px;\n            background-repeat   : no-repeat;\n            background-position : 0 0;\n            position            : absolute;\n            top                 : 1px;\n            left                : 0;\n        }\n\n        .btnIconOnly .lbl SPAN {\n            background-position: 1px 3px;\n        }\n\n        .btnIconOnly.newFolder .lbl SPAN {\n            background-position: 1px 2px;\n        }\n\n        .smallCaption.btnIconOnly .lbl {\n            color: #323232;\n            font-weight: normal;\n            font-size: 12px;\n            padding-left: 25px;\n        }\n\n        .btnIcon.iconOnTheRight .lbl {\n            padding : 4px 12px 0 0;\n        }\n\n        .btnIcon.iconOnTheRight .lbl SPAN {\n            left  : auto;\n            right : 0;\n        }\n\n        .btnOver .left      {background-position : -16px -81px}\n        .btnOver .lbl       {background-position : 0 -108px}\n        .btnOver .right     {background-position : 0 -135px}\n        .btnFocus .left     {background-position : -16px -243px}\n        .btnFocus .lbl      {background-position : 0 -270px}\n        .btnFocus .right    {background-position : 0 -297px}\n        .btnDown .left      {background-position : -16px -162px}\n        .btnDown .lbl       {background-position : 0 -189px}\n        .btnDown .right     {background-position : 0 -216px}\n        .btnDisabled .left  {background-position : -16px -324px}\n        .btnDisabled .lbl   {\n            background-position : 0 -351px;\n            color               : #b8bbbf;\n            text-shadow         : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .btnDisabled .right {background-position : 0 -378px}\n\n        /* small */\n        .btnOver.smallbtn .left      {background-position : -16px -6786px}\n        .btnOver.smallbtn .lbl       {background-position : 0 -6809px}\n        .btnOver.smallbtn .right     {background-position : 0 -6832px}\n        .btnFocus.smallbtn .left     {background-position : -16px -6924px}\n        .btnFocus.smallbtn .lbl      {background-position : 0 -6947px}\n        .btnFocus.smallbtn .right    {background-position : 0 -6970px}\n        .btnDown.smallbtn .left      {background-position : -16px -6855px}\n        .btnDown.smallbtn .lbl       {background-position : 0 -6878px}\n        .btnDown.smallbtn .right     {background-position : 0 -6901px}\n        .btnDisabled.smallbtn .left  {background-position : -16px -6993px}\n        .btnDisabled.smallbtn .lbl   {\n            background-position : 0 -7016px;\n            color               : #b8bbbf;\n            text-shadow         : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .btnDisabled.smallbtn .right {background-position : 0 -7039px}\n\n\n        /* Additional styles - DARKGREEN */\n        .ui-btn-greenfont {\n            color               : #37a700;\n        }\n\n        /* Additional styles - DARKGREEN */\n        .ui-btn-darkgreen .left {\n            background-position : -16px -1620px;\n        }\n        .ui-btn-darkgreen .lbl {\n            background-position : 0 -1647px;\n            color            : #4d8110;\n            text-shadow      : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .ui-btn-darkgreen .right {\n            background-position : 0 -1674px;\n        }\n        .ui-btn-darkgreen.btnOver .left  {background-position : -16px -1701px;}\n        .ui-btn-darkgreen.btnOver .lbl   {background-position : 0 -1728px;}\n        .ui-btn-darkgreen.btnOver .right {background-position : 0 -1755px;}\n        .ui-btn-darkgreen.btnFocus .left   {background-position : -16px -1863px;}\n        .ui-btn-darkgreen.btnFocus .lbl    {background-position : 0 -1890px;}\n        .ui-btn-darkgreen.btnFocus .right  {background-position : 0 -1917px;}\n        .ui-btn-darkgreen.btnDown .left   {background-position : -16px -1782px;}\n        .ui-btn-darkgreen.btnDown .lbl    {background-position : 0 -1809px;}\n        .ui-btn-darkgreen.btnDown .right  {background-position : 0 -1836px;}\n\n        /* Additional styles - GREEN */\n        .ui-btn-green .left {\n            background-position : -16px -405px;\n        }\n        .ui-btn-green .lbl {\n            background-position : 0 -432px;\n            color            : #4d8110;\n            text-shadow      : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .ui-btn-green .right {\n            background-position : 0 -459px;\n        }\n        .ui-btn-green.btnOver .left   {background-position : -16px -486px}\n        .ui-btn-green.btnOver .lbl    {background-position : 0 -513px}\n        .ui-btn-green.btnOver .right  {background-position : 0 -540px}\n        .ui-btn-green.btnFocus .left  {background-position : -16px -648px}\n        .ui-btn-green.btnFocus .lbl   {background-position : 0 -675px}\n        .ui-btn-green.btnFocus .right {background-position : 0 -702px}\n        .ui-btn-green.btnDown .left   {background-position : -16px -567px}\n        .ui-btn-green.btnDown .lbl    {background-position : 0 -594px}\n        .ui-btn-green.btnDown .right  {background-position : 0 -621px}\n        .ui-btn-green.btnDisabled .left   {background-position : -16px -729px}\n        .ui-btn-green.btnDisabled .lbl    {\n            background-position : 0 -756px;\n            color               : #91ba63;\n            text-shadow         : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .ui-btn-green.btnDisabled .right  {background-position : 0 -783px}\n\n        /* smallbtn */\n        .ui-btn-green.smallbtn .left {\n            background-position : -16px -5889px;\n        }\n        .ui-btn-green.smallbtn .lbl {\n            background-position : 0 -5912px;\n            color            : #4d8110;\n            text-shadow      : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .ui-btn-green.smallbtn .right {\n            background-position : 0 -5935px;\n        }\n        .ui-btn-green.btnOver.smallbtn .left   {background-position : -16px -5958px}\n        .ui-btn-green.btnOver.smallbtn .lbl    {background-position : 0 -5981px}\n        .ui-btn-green.btnOver.smallbtn .right  {background-position : 0 -6004px}\n        .ui-btn-green.btnFocus.smallbtn .left  {background-position : -16px -6096px}\n        .ui-btn-green.btnFocus.smallbtn .lbl   {background-position : 0 -6119px}\n        .ui-btn-green.btnFocus.smallbtn .right {background-position : 0 -6142px}\n        .ui-btn-green.btnDown.smallbtn .left   {background-position : -16px -6027px}\n        .ui-btn-green.btnDown.smallbtn .lbl    {background-position : 0 -6050px}\n        .ui-btn-green.btnDown.smallbtn .right  {background-position : 0 -6073px}\n        .ui-btn-green.btnDisabled.smallbtn .left   {background-position : -16px -6165px}\n        .ui-btn-green.btnDisabled.smallbtn .lbl    {\n            background-position : 0 -6188px;\n            color               : #91ba63;\n            text-shadow         : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .ui-btn-green.btnDisabled.smallbtn .right  {background-position : 0 -6211px}\n\n        /* Additional styles - RED */\n        .ui-btn-red .left {\n            background-position : -16px -810px\n        }\n        .ui-btn-red .lbl {\n            background-position : 0 -837px;\n            color            : white;\n            text-shadow      : rgba(209, 2, 0, .71) 0px 1px 0px;\n        }\n        .ui-btn-red .right {\n            background-position : 0 -864px\n        }\n        .ui-btn-red.btnOver .left   {background-position : -16px -891px}\n        .ui-btn-red.btnOver .lbl    {background-position : 0 -918px}\n        .ui-btn-red.btnOver .right  {background-position : 0 -945px}\n        .ui-btn-red.btnFocus .left  {background-position : -16px -1053px}\n        .ui-btn-red.btnFocus .lbl   {background-position : 0 -1080px}\n        .ui-btn-red.btnFocus .right {background-position : 0 -1107px}\n        .ui-btn-red.btnDown .left   {background-position : -16px -972px}\n        .ui-btn-red.btnDown .lbl    {background-position : 0 -999px}\n        .ui-btn-red.btnDown .right  {background-position : 0 -1026px}\n        .ui-btn-red.btnDisabled .left   {background-position : -16px -1134px}\n        .ui-btn-red.btnDisabled .lbl    {\n            background-position : 0 -1161px;\n            color               : #bd0502;\n            text-shadow         : rgba(255, 255, 255, .31) 0px 1px 0px;\n        }\n        .ui-btn-red.btnDisabled .right  {background-position : 0 -1188px}\n\n        /* small */\n        .ui-btn-red.smallbtn .left {\n            background-position : -16px -6303px\n        }\n        .ui-btn-red.smallbtn .lbl {\n            background-position : 0 -6326px;\n            color            : white;\n            text-shadow      : rgba(209, 2, 0, .71) 0px 1px 0px;\n        }\n        .ui-btn-red.smallbtn .right {\n            background-position : 0 -6349px\n        }\n        .ui-btn-red.btnOver.smallbtn .left   {background-position : -16px -6372px}\n        .ui-btn-red.btnOver.smallbtn .lbl    {background-position : 0 -6395px}\n        .ui-btn-red.btnOver.smallbtn .right  {background-position : 0 -6418px}\n        .ui-btn-red.btnFocus.smallbtn .left  {background-position : -16px -6510px}\n        .ui-btn-red.btnFocus.smallbtn .lbl   {background-position : 0 -6533px}\n        .ui-btn-red.btnFocus.smallbtn .right {background-position : 0 -6556px}\n        .ui-btn-red.btnDown.smallbtn .left   {background-position : -16px -6441px}\n        .ui-btn-red.btnDown.smallbtn .lbl    {background-position : 0 -6464px}\n        .ui-btn-red.btnDown.smallbtn .right  {background-position : 0 -6487px}\n        .ui-btn-red.btnDisabled.smallbtn .left   {background-position : -16px -6579px}\n        .ui-btn-red.btnDisabled.smallbtn .lbl    {\n            background-position : 0 -6602px;\n            color               : #bd0502;\n            text-shadow         : rgba(255, 255, 255, .31) 0px 1px 0px;\n        }\n        .ui-btn-red.btnDisabled.smallbtn .right  {background-position : 0 -6625px}\n\n        /* Additional styles - BLUE */\n        .ui-btn-blue .left {\n            background-position : -16px -1215px\n        }\n        .ui-btn-blue .lbl {\n            background-position : 0 -1242px;\n            color            : #1f78a7;\n            text-shadow      : rgba(205, 243, 255, .71) 0px 1px 0px\n        }\n        .ui-btn-blue .right {\n            background-position : 0 -1269px\n        }\n        .ui-btn-blue.btnOver .left   {background-position : -16px -1296px}\n        .ui-btn-blue.btnOver .lbl    {background-position : 0 -1323px}\n        .ui-btn-blue.btnOver .right  {background-position : 0 -1350px}\n        .ui-btn-blue.btnFocus .lbl   {background-position : 0 -1485px}\n        .ui-btn-blue.btnFocus .right {background-position : 0 -1512px}\n        .ui-btn-blue.btnFocus .left  {background-position : -16px -1458px}\n        .ui-btn-blue.btnDown .left   {background-position : -16px -1377px}\n        .ui-btn-blue.btnDown .lbl    {background-position : 0 -1404px}\n        .ui-btn-blue.btnDown .right  {background-position : 0 -1431px}\n        .ui-btn-blue.btnDisabled .left   {background-position : -16px -1539px}\n        .ui-btn-blue.btnDisabled .lbl    {\n            background-position : 0 -1566px;\n            color               : #33a3d6;\n            text-shadow         : rgba(205, 243, 255, .71) 0px 1px 0px;\n        }\n        .ui-btn-blue.btnDisabled .right  {background-position : 0 -1593px}\n\n        /* Additional styles - BLUE2 */\n        .ui-btn-blue2 .left {\n            background-position : -16px -3945px\n        }\n        .ui-btn-blue2 .lbl {\n            background-position : 0 -3972px;\n            color            : #00536f;\n            text-shadow      : #18c8fe 0px 1px 0px\n        }\n        .ui-btn-blue2 .right {\n            background-position : 0 -3999px\n        }\n        .ui-btn-blue2.btnOver .left   {background-position : -16px -4026px}\n        .ui-btn-blue2.btnOver .lbl    {background-position : 0 -4053px}\n        .ui-btn-blue2.btnOver .right  {background-position : 0 -4080px}\n        .ui-btn-blue2.btnFocus .left  {background-position : -16px -4188px}\n        .ui-btn-blue2.btnFocus .lbl   {background-position : 0 -4215px}\n        .ui-btn-blue2.btnFocus .right {background-position : 0 -4242px}\n        .ui-btn-blue2.btnDown .left   {background-position : -16px -4107px}\n        .ui-btn-blue2.btnDown .lbl    {background-position : 0 -4134px}\n        .ui-btn-blue2.btnDown .right  {background-position : 0 -4161px}\n        .ui-btn-blue2.btnDisabled .left   {background-position : -16px -4269px}\n        .ui-btn-blue2.btnDisabled .lbl    {\n            background-position : 0 -4296px;\n            color               : #36a3d6;\n            text-shadow         : #7bdfff 0px 1px 0px;\n        }\n        .ui-btn-blue2.btnDisabled .right  {background-position : 0 -4323px}\n\n        /* Additional styles - BLUE3 */\n        .ui-btn-blue3 .left {\n            background-position : -16px -3945px\n        }\n        .ui-btn-blue3 .lbl {\n            background-position : 0 -3972px;\n            color               : white;\n            text-shadow         : rgba(3, 156, 208, 1) 0px 1px 0px;\n        }\n        .ui-btn-blue3 .right {\n            background-position : 0 -3999px\n        }\n        .ui-btn-blue3.btnOver .left   {background-position : -16px -4026px}\n        .ui-btn-blue3.btnOver .lbl    {background-position : 0 -4053px}\n        .ui-btn-blue3.btnOver .right  {background-position : 0 -4080px}\n        .ui-btn-blue3.btnFocus .left  {background-position : -16px -4188px}\n        .ui-btn-blue3.btnFocus .lbl   {background-position : 0 -4215px}\n        .ui-btn-blue3.btnFocus .right {background-position : 0 -4242px}\n        .ui-btn-blue3.btnDown .left   {background-position : -16px -4107px}\n        .ui-btn-blue3.btnDown .lbl    {background-position : 0 -4134px}\n        .ui-btn-blue3.btnDown .right  {background-position : 0 -4161px}\n        .ui-btn-blue3.btnDisabled .left   {background-position : -16px -4269px}\n        .ui-btn-blue3.btnDisabled .lbl    {\n            background-position : 0 -4296px;\n            color               : #36a3d6;\n            text-shadow         : #7bdfff 0px 1px 0px;\n        }\n        .ui-btn-blue3.btnDisabled .right  {background-position : 0 -4323px}\n\n\n        /* Additional styles - ORANGE */\n        .ui-btn-orange .left {\n            background-position : -16px -4350px\n        }\n        .ui-btn-orange .lbl {\n            background-position : 0 -4377px;\n            color            : #8a4106;\n            text-shadow      : #ffb639 0px 1px 0px\n        }\n        .ui-btn-orange .right {\n            background-position : 0 -4404px\n        }\n        .ui-btn-orange.btnOver .left   {background-position : -16px -4431px}\n        .ui-btn-orange.btnOver .lbl    {background-position : 0 -4458px}\n        .ui-btn-orange.btnOver .right  {background-position : 0 -4485px}\n        .ui-btn-orange.btnFocus .left  {background-position : -16px -4593px}\n        .ui-btn-orange.btnFocus .lbl   {background-position : 0 -4620px}\n        .ui-btn-orange.btnFocus .right {background-position : 0 -4647px}\n        .ui-btn-orange.btnDown .left   {background-position : -16px -4512px}\n        .ui-btn-orange.btnDown .lbl    {background-position : 0 -4539px}\n        .ui-btn-orange.btnDown .right  {background-position : 0 -4566px}\n        .ui-btn-orange.btnDisabled .left   {background-position : -16px -4674px}\n        .ui-btn-orange.btnDisabled .lbl    {\n            background-position : 0 -4701px;\n            color               : #c47806;\n            text-shadow         : #ffb639 0px 1px 0px;\n        }\n        .ui-btn-orange.btnDisabled .right  {background-position : 0 -4728px}\n\n        /* Additional styles - YELLOW */\n        .ui-btn-yellow .left {\n            background-position : -16px -4755px\n        }\n        .ui-btn-yellow .lbl {\n            background-position : 0 -4782px;\n            color            : #8a5000;\n            text-shadow      : #ffe082 0px 1px 0px\n        }\n        .ui-btn-yellow .right {\n            background-position : 0 -4809px\n        }\n        .ui-btn-yellow.btnOver .left   {background-position : -16px -4836px}\n        .ui-btn-yellow.btnOver .lbl    {background-position : 0 -4863px}\n        .ui-btn-yellow.btnOver .right  {background-position : 0 -4890px}\n        .ui-btn-yellow.btnFocus .left  {background-position : -16px -4998px}\n        .ui-btn-yellow.btnFocus .lbl   {background-position : 0 -5025px}\n        .ui-btn-yellow.btnFocus .right {background-position : 0 -5052px}\n        .ui-btn-yellow.btnDown .left   {background-position : -16px -4917px}\n        .ui-btn-yellow.btnDown .lbl    {background-position : 0 -4944px}\n        .ui-btn-yellow.btnDown .right  {background-position : 0 -4971px}\n        .ui-btn-yellow.btnDisabled .left   {background-position : -16px -5079px}\n        .ui-btn-yellow.btnDisabled .lbl    {\n            background-position : 0 -5106px;\n            color               : #c39658;\n            text-shadow         : #ffe082 0px 1px 0px;\n        }\n        .ui-btn-yellow.btnDisabled .right  {background-position : 0 -5133px}\n\n        .btn.btnDisabled {\n            cursor: default;\n        }\n\n        .submenu .lbl .btnArrow {\n            display             : inline-block;\n            background-image    : url("images/arrow_small.png");\n            background-repeat   : no-repeat;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isSafari || apf.isChrome"><![CDATA[\n        .btn .lbl {\n            margin  : 0;\n            height  : 22px;\n            padding : 5px 8px 0 8px;\n        }\n\n        .btnIcon .lbl {\n            overflow : hidden;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isIE"><![CDATA[\n        .btn .lbl {\n            line-height : 19px;\n        }\n\n        .btn.smallbtn .lbl {\n            line-height : 17px;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main caption="div[3]/text()" label="div[3]/text()" background="." icon="div[3]/span" minwidth="30">\n            <div class="btn">\n                <div class="left"> </div>\n                <div class="right"> </div>\n                <div class="lbl">-\n                    <span/>\n                    <div class="btnArrow"> </div>\n                </div>\n\n             </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="github-button">\n        <a:style><![CDATA[\n            .github-button {\n                height             : 22px;\n                padding            : 0 0 0 23px;\n                margin             : 0;\n                overflow           : hidden;\n                position           : relative;\n                cursor             : pointer;\n                background-color   : #1f7224;\n                background : -webkit-linear-gradient(center bottom, #1e6c22 0%, #24872b 80%) repeat scroll 0 0 transparent;\n                background :    -moz-linear-gradient(center bottom, #1e6c22 0%, #24872b 80%) repeat scroll 0 0 transparent;\n                background :         linear-gradient(center bottom, #1e6c22 0%, #24872b 80%) repeat scroll 0 0 transparent;\n\n                border             : 1px solid #000101;\n\n                -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.3) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.5);\n                -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.3) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.5);\n                box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.3) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.5);\n\n                -moz-user-select: -moz-none;\n                -khtml-user-select: none;\n                -webkit-user-select: none;\n                -o-user-select: none;\n                user-select: none;\n            }\n\n            .github-button .icon {\n                width:22px;\n                height:21px;\n                margin:1px 0 0 0;\n                position:absolute;\n                overflow:hidden;\n                top:0;\n                left:0;\n                border-right:1px solid #1e6b22;\n                background-repeat:no-repeat;\n                background-position: 0 0;\n            }\n\n            .github-button SPAN {\n                font-family:Arial;\n                font-size:11px;\n                line-height:11px;\n                font-weight:bold;\n                color:white;\n                position:relative;\n                border-left:1px solid #469547;\n                height:16px;\n                padding:5px 0 0 0;\n                margin:1px 0 0 0;\n                position:relative;\n                display:block;\n                text-align:center;\n            }\n        ]]></a:style>\n        <a:style condition="apf.isSafari || apf.isChrome"><![CDATA[\n            .hbox > .github-button {\n                height:26px;\n            }\n\n            .github-button SPAN {\n                height  : 17px;\n                padding : 4px 0 0 0;\n            }\n        ]]></a:style>\n        <a:style condition="apf.isIE"><![CDATA[\n            .github-button {\n                height  : 21px;\n                padding : 1px 0 0 23px;\n            }\n        ]]></a:style>\n\n         <a:presentation>\n            <a:main\n              caption    = "span/text()"\n              background = "."\n              icon       = "div">\n                <div class="github-button">\n                    <div class="icon"></div><span>-</span>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n<a:button name="btn_console_open">\n    <a:style><![CDATA[\n        .btn_console_open {\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            height             : 31px;\n            width              : 18px;\n            background-repeat   : no-repeat;\n            background-position : -36px 50%;\n            -moz-user-select: -moz-none;\n            -khtml-user-select: none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select: none;\n        }\n\n        .btn_console_openOver {\n            background-position : -54px 50%;\n        }\n        .btn_console_openOpen.btn_console_openDown {\n            background-position: 0 50%;\n        }\n        .btn_console_openOpen.btn_console_openDown:hover {\n            background-position: -18px 50%;\n        }\n\n\n        .btn_console_openOpen {\n            background-position: 0 50%;\n        }\n\n\n        .btn_console_open.btnDisabled {\n            cursor: default;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main caption="." label="." background="." icon="." minwidth="18">\n            <div class="btn_console_open"> </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="btn_icon_only">\n    <a:style><![CDATA[\n        .btn_icon_only {\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            height             : 21px;\n            width              : 22px;\n            -moz-user-select: -moz-none;\n            -khtml-user-select : none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select        : none;\n        }\n\n        .btn_icon_onlyDown.tabmenubtn {\n            z-index : 10000000;\n        }\n\n        .dim22-22.btn_icon_only {\n            width: 22px;\n            height: 22px;\n        }\n\n        .dim14-14.btn_icon_only {\n            width: 14px;\n            height: 14px;\n        }\n\n        .dim8x8.btn_icon_only {\n            width: 8px;\n            height: 8px;\n        }\n\n        .btn_icon_onlyOver {\n            background-position: 0 -23px;\n        }\n\n        .dim22-22.btn_icon_onlyOver {\n            background-position: 0 -22px;\n        }\n\n        .dim14-14.btn_icon_onlyOver {\n            background-position: 0 -14px;\n        }\n\n        .dim8x8.btn_icon_onlyOver {\n            background-position: 0 -8px;\n        }\n\n        .btn_icon_onlyDown {\n            background-position: 0 -46px;\n        }\n\n        .dim22-22.btn_icon_onlyDown {\n            background-position: 0 -44px;\n        }\n\n        .dim14-14.btn_icon_onlyDown {\n            background-position: 0 -28px;\n        }\n\n        .dim8x8.btn_icon_onlyDown {\n            background-position: 0 -16px;\n        }\n\n        .btn_icon_only.btnDisabled {\n            cursor: default;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main caption="." label="." background="." icon=".">\n            <div class="btn_icon_only"> </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n\n<a:button name="dockButton">\n    <a:style><![CDATA[\n        .dockButton {\n            width              : 37px;\n            height             : 37px;\n            padding-top        : 3px;\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            background-repeat:no-repeat;\n            background-position: 0 0;\n            -moz-user-select: -moz-none;\n            -khtml-user-select : none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select        : none;\n        }\n\n        .dockButton-footer {\n            height: 10px;\n        }\n\n        .dockButtonOver {\n            background-image    : url(images/dock_button_sprite.png);\n            background-position : 3px -47px;\n        }\n\n        .dockButtonDown {\n            background-image    : url(images/dock_button_sprite.png);\n            background-position : 3px 5px;\n        }\n\n        .dockButtonDown .dockButton-footer {\n            -webkit-border-top-left-radius : 5px;\n            -moz-border-radius-topleft     : 5px;\n            border-radius-top-left     : 5px;\n        }\n\n        .dockButtonDown.btn-runcommands {\n            background-image: none;\n        }\n\n        .dockButton .icon {\n            width                 : 31px;\n            height                : 32px;\n            -webkit-border-radius : 3px;\n            -moz-border-radius    : 3px;\n            border-radius         : 3px;\n            margin                : 0px 1px 2px 4px;\n        }\n\n        .dockButton .dock_notification {\n            position    : absolute;\n            top         : 2px;\n            right       : 1px;\n            width       : 11px;\n            text-align  : center;\n            color       : #fff;\n            letter-spacing: 1px;\n\n            border-radius: 11px;\n            box-shadow: 0px 1px 1px black;\n            background  : #CE0E0F url(\'images/bg_counter.png\') repeat-x 0px 0px;\n\n            font-size: 9px;\n            height: 8px;\n            line-height: 8px;\n            padding     : 2px 1px 1px 1px;\n            text-shadow: 0 1px 0 rgba(0, 0, 0, .7);\n            display: none;\n        }\n\n        .dockButton .dock_icon_image {\n            -webkit-border-radius : 3px;\n               -moz-border-radius : 3px;\n                    border-radius : 3px;\n            display               : inline-block;\n            position              : absolute;\n            top                   : 3px;\n            left                  : 3px;\n            width                 : 34px;\n            height                : 33px;\n            cursor: default;\n        }\n\n        .dockButton .dock_icon_image.dii_primary {\n            left   : 5px;\n            top    : 5px;\n            width  : 31px;\n            height : 31px;\n        }\n\n        .dockButton .dock_icon_image.dii_secondary {\n            -webkit-border-radius : 5px;\n               -moz-border-radius : 5px;\n                    border-radius : 5px;\n        }\n\n        .dockButton.debug1 .icon {\n            background-position: 0 -437px;\n        }\n\n        .dockButtonChecked.debug1 .icon {\n            background-position: 0 -556px;\n        }\n\n        .dockButton.debug2 .icon {\n            background-position: 0 -475px;\n        }\n\n        .dockButton.call_stack .icon {\n            background-position: 0 -515px;\n        }\n\n        .dockButton.todo_check .icon {\n            background-position: 0 -163px;\n        }\n\n        .dockButtonChecked.todo_check .icon {\n            background-position: 0 -201px;\n        }\n\n        .dockButton.contact_list .icon {\n            background-position: 0 -243px;\n        }\n\n        .dockButtonChecked.contact_list .icon {\n            background-position: 0 -281px;\n        }\n\n        .dockButton.defaultUser .icon {\n            background-position: 0 -360px;\n        }\n\n        .dockButtonChecked.defaultUser .icon {\n            background-position: 0 -400px;\n        }\n\n    ]]></a:style>\n\n     <a:presentation>\n        <a:main caption="div" label="div" background="." icon="div">\n            <div class="dockButton">\n                <span class="dock_icon_image dii_tertiary"/>\n                <span class="dock_icon_image dii_secondary"/>\n                <span class="dock_icon_image dii_primary"/>\n                <div class="icon"/>\n                <span class="dock_notification"/>\n                <div class="dockButton-footer"/>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="toolbarbutton">\n    <a:style><![CDATA[\n        .menubar .toolbarbutton {\n            display: block;\n            height: 17px;\n            float: left;\n            cursor: default;\n            padding: 2px 8px 0 8px;\n            margin-top: 2px;\n            line-height: 13px;\n            text-decoration: none;\n            color: #e8e8e8;\n        }\n\n        .menubar .toolbarbuttonOver, .menubar .toolbarbuttonDown {\n            cursor: default;\n            border-radius: 4px 4px 0px 0px;\n            -moz-border-radius: 4px 4px 0px 0px;\n            -webkit-border-bottom-right-radius: 0px;\n            -webkit-border-bottom-left-radius: 0px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(51,124,188)),color-stop(1, rgb(64,145,216)));\n            background: -moz-linear-gradient(center bottom,rgb(51,124,188) 0%,rgb(64,145,216) 100%);\n            color : #ffffff;\n        }\n\n        .menubar .toolbarbuttonDisabled, .menubar .toolbarbuttonDisabled {\n            background : none;\n            color : #bebebe;\n        }\n\n        .toolbar .subbar .toolbarbutton {\n            display: block;\n            height: 20px;\n            cursor: default;\n            margin: 2px 1px 0 1px;\n            text-decoration: none;\n            color: #111111;\n            text-align: center;\n            padding: 0 4px 0 0;\n            line-height: 13px;\n            border: 1px solid transparent;\n        }\n\n        .toolbar .subbar .splitbtn.toolbarbutton:first-child {\n            border-right: none;\n        }\n\n        .toolbar .subbar .toolbarbutton div {\n            float: left;\n            margin: 0;\n            height: 15px;\n            padding: 4px 4px 0 8px;\n            border: 0;\n            text-shadow   : #ffffff 0px 1px 0px;\n        }\n\n        .toolbar .subbar .toolbarbuttonOver {\n            border: 1px solid #b3b3b3;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n            -webkit-border-radius: 4px;\n            -moz-border-radius: 4px;\n            border-radius: 4px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(246,246,246)),color-stop(1, rgb(253,253,253)));\n            background: -moz-linear-gradient(center bottom,rgb(246,246,246) 0%,rgb(253,253,253) 100%);\n        }\n\n        .toolbar .subbar .splitbtn.toolbarbuttonOver:first-child,\n        .toolbar .subbar .splitbtn.toolbarbuttonDown:first-child,\n        .toolbar .subbar .splitbtn.toolbarbuttonChecked:first-child {\n            -webkit-border-top-right-radius: 0px;\n            -webkit-border-bottom-right-radius: 0px;\n            -moz-border-radius-topright: 0px;\n            -moz-border-radius-bottomright: 0px;\n            border-top-right-radius: 0px;\n            border-bottom-right-radius: 0px;\n            border-right: none;\n        }\n\n        .toolbar .subbar .splitbtn.toolbarbuttonOver:last-child,\n        .toolbar .subbar .splitbtn.toolbarbuttonDown:last-child,\n        .toolbar .subbar .splitbtn.toolbarbuttonChecked:last-child {\n            -webkit-border-top-left-radius: 0px;\n            -webkit-border-bottom-left-radius: 0px;\n            -moz-border-radius-topleft: 0px;\n            -moz-border-radius-bottomleft: 0px;\n            border-top-left-radius: 0px;\n            border-bottom-left-radius: 0px;\n        }\n\n        .toolbar .subbar .toolbarbuttonOver div {\n\n        }\n\n        .toolbar .subbar .toolbarbuttonDown {\n            border: 1px solid #b3b3b3;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n            -webkit-border-radius: 4px;\n            -moz-border-radius: 4px;\n            border-radius: 4px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(239,241,244)),color-stop(1, rgb(224,226,229)));\n            background: -moz-linear-gradient(center bottom,rgb(239,241,244) 0%,rgb(224,226,229) 100%);\n        }\n\n        .toolbar .subbar .toolbarbuttonDown div {\n\n        }\n\n        .toolbar .subbar .toolbarbuttonChecked {\n            border: 1px solid #b3b3b3;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n            -webkit-border-radius: 4px;\n            -moz-border-radius: 4px;\n            border-radius: 4px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(224,226,229)),color-stop(1, rgb(250,252,255)));\n            background: -moz-linear-gradient(center bottom,rgb(224,226,229) 0%,rgb(250,252,255) 100%);\n        }\n\n        .toolbar .subbar .toolbarbuttonChecked div {\n        }\n\n        .toolbar .subbar .toolbarbuttonDisabled, .toolbar .subbar .toolbarbuttonDisabled div {\n            background: none;\n            color: #bebebe;\n        }\n\n        .toolbar .subbar .toolbarbuttonIcon div{\n            padding-left : 4px;\n        }\n\n        .toolbar .subbar .toolbarbuttonEmpty div{\n            padding: 4px 0 0 7px;\n        }\n\n        .toolbar .subbar .toolbarbuttonIcon span{\n            display: block;\n            float:left;\n            width: 16px;\n            height: 16px;\n            margin: -2px 4px 0 0;\n        }\n\n        .toolbar .subbar .toolbarbuttonIcon.width_20 span {\n            width: 20px;\n        }\n\n        .toolbar .subbar .toolbarbuttonIcon.toolbarbuttonOver span{\n            background-position: 0 -16px;\n        }\n        .toolbar .subbar .toolbarbuttonIcon.toolbarbuttonDown span{\n            background-position: 0 -32px;\n        }\n\n        .toolbar .subbar .toolbarbuttonEmpty span{\n            margin: -2px 3px 0 0;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main caption="div/text()" label="div/text()" background="div/span" icon="div/span">\n            <div class=\'toolbarbutton\'><div><span> </span>-</div></div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="c9-menu-btn">\n    <a:style><![CDATA[\n        .c9-menu-btn {\n            height             : 25px;\n            overflow           : visible;\n            cursor             : default;\n            position           : relative;\n            line-height        : 17px;\n            display            : inline-block;\n        }\n\n        .c9-menu-btn .c9-left,\n        .c9-menu-btn .c9-right {\n            display: none;\n        }\n\n        .c9-menu-btn .c9-label {\n            font-family   : Tahoma, Arial;\n            font-size     : 12px;\n            line-height   : 14px;\n            color         : #cecece;\n            height        : 20px;\n            padding       : 4px 2px 0 2px;\n            margin        : 0 5px;\n            text-shadow   : rgba(41, 42, 43, 1) 0px 1px 0px;\n        }\n\n        .c9-menu-btnOver {\n            background-color: #333;\n            box-shadow:  1px -1px 0 0 black,\n                        -1px 0 0 0 black,\n                         0 1px 0 0 rgba(255,255,255,.15) inset;\n            color: #d4d4d4;\n        }\n\n        .c9-menu-btnDown {\n            background-color: #494949;\n            z-index : 100000000;\n            box-shadow:  1px 0 0 0 black inset,\n                         1px 0 0 0 black,\n                         0 1px 0 0 rgba(255,255,255,.15) inset;\n            z-index : 100000000;\n        }\n\n        /* Why are we using an extra div here??? */\n        .c9-menu-btnDown .c9-fix {\n            height           : 3px;\n            position         : absolute;\n            display          : none;\n            bottom           : -1px;\n            left             : 1px;\n            right            : 1px;\n            background-color : #1c1c1c;\n            z-index          : 20000101;\n        }\n\n        .hbox > DIV > .c9-menu-btn {\n            height : 25px;\n            margin: 0 !important;\n        }\n\n        .c9-menu-btnDisabled.c9-menu-btn .c9-label {\n            color: #999;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "div[2]/text()"\n          background = "."\n          icon       = "div[2]"\n          minwidth   = "26">\n            <div class="c9-menu-btn">\n                <div class="c9-left"></div>\n                <div class="c9-label">-</div>\n                <div class="c9-right"></div>\n                <div class="c9-fix"></div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="c9-simple-btn">\n    <a:style><![CDATA[\n        .c9-simple-btn {\n            -moz-user-select: -moz-none;\n            -khtml-user-select : none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select        : none;\n            cursor: default;\n        }\n\n        .c9-simple-btnIcon {\n            background-repeat: no-repeat;\n            padding-left: 18px;\n            padding-top: 2px;\n        }\n\n        .c9-simple-btn.btn-terminal {\n            color: #909090;\n            font-size: 11px;\n            text-shadow: 0 1px 0 rgba(0,0,0,.25);\n        }\n        .c9-simple-btn.btn-terminal.c9-simple-btnOver {\n            color: #c5d7bf;\n        }\n        .c9-simple-btn.btn-terminal.c9-simple-btnDown {\n            color: #d1ebaf;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption    = "."\n          background = "."\n          icon       = ".">\n            <div class="c9-simple-btn">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n\n<a:button name="c9-toolbarbutton-light">\n    <a:style><![CDATA[\n        .c9-toolbarbutton-light {\n            border-radius: 2px;\n            border: 1px solid transparent;\n            position: relative;\n        }\n        .c9-toolbarbutton-lightOver {\n            height: 19px;\n        }\n        .c9-toolbarbutton-lightOver,\n        .c9-toolbarbutton-lightDown {\n            background-color: rgba(255,255,255,.65);\n            background-image: -webkit-linear-gradient(bottom, rgba(0,0,0,.08), transparent);\n            background-image:    -moz-linear-gradient(bottom, rgba(0,0,0,.08), transparent);\n            background-image:         linear-gradient(bottom, rgba(0,0,0,.08), transparent);\n            border-color: rgba(128,128,128,.55);\n            box-shadow: 0 1px 0 0 rgba(255,255,255,.7) inset;\n            cursor: pointer;\n        }\n\n        .c9-toolbarbutton-lightDown {\n            background-color: rgba(233,233,233,.555);\n            box-shadow: 0 1px 0 0 rgba(0,0,0,.15) inset;\n        }\n        .c9-toolbarbutton-light .c9-label {\n            color: #4D4D4D;\n            height: 19px !important;\n            line-height: 21px;\n            margin-top: 0 !important;\n            padding: 0 5px 0 5px;\n            text-shadow: 0 1px 0 #FFFFFF;\n        }\n        .c9-toolbarbutton-lightIcon .c9-label {\n            padding-left: 25px;\n        }\n        .c9-toolbarbutton-lightIcon .c9-icon {\n            display: block;\n            position: absolute;\n            width:23px;\n            height:19px;\n            top:0px;\n            left:2px;\n        }\n        .c9-toolbarbutton-lightDisabled .c9-label {\n            color: #c5c5c6;\n        }\n        .c9-toolbarbutton-lightDisabled .c9-icon {\n            opacity: 0.3;\n            background-position : 0 -38px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "div[2]/text()"\n          background = "."\n          icon       = "div[1]">\n            <div class="c9-toolbarbutton-light">\n                <div class="c9-icon"></div>\n                <div class="c9-label">-</div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="c9-toolbarbutton">\n    <a:style><![CDATA[\n        .c9-toolbarbutton {\n            height             : 21px;\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            line-height        : 17px;\n            border:1px solid transparent;\n            -moz-user-select: -moz-none;\n            -khtml-user-select : none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select        : none;\n        }\n\n        .with-arrow.c9-toolbarbutton {\n            padding-right: 5px;\n        }\n\n        .hbox > .c9-toolbarbutton {\n            height: 23px;\n        }\n\n        .c9-toolbarbutton .c9-icon {\n            display: none;\n            width:23px;\n            height:19px;\n            position:absolute;\n            top:2px;\n            left:2px;\n            background-position : 0 0;\n            background-repeat   : no-repeat;\n        }\n\n        .c9-toolbarbuttonIcon .c9-icon{\n            display : block;\n        }\n\n        .c9-toolbarbuttonOver {\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius : 5px;\n            border:1px solid #1c1c1c;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n\n            background         : #343434;\n            background         : -webkit-gradient(linear, left top, left bottom, from(#3a3a3a), color-stop(1, #333333));\n            background         :-moz-linear-gradient(center bottom, #333333 0%, #3a3a3a 100%) repeat scroll 0 0 transparent;\n        }\n\n        .c9-toolbarbutton .c9-label {\n            position:relative;\n            overflow:hidden;\n            font-family:Arial;\n            font-size:12px;\n            color:#d6d6d6;\n            line-height:14px;\n            height:15px;\n            padding:4px 6px 0 6px;\n        }\n\n        .with-arrow.c9-toolbarbutton .c9-label {\n            background:url(images/btn-arrow.png) no-repeat right 9px;\n            padding-right: 11px;\n        }\n\n        .with-arrow.c9-toolbarbutton .c9-label {\n            background:url(images/btn-arrow.png) no-repeat right 9px;\n            padding-right: 11px;\n        }\n\n        .with-arrow.c9-toolbarbutton .c9-label {\n            background:url(images/btn-arrow.png) no-repeat right 9px;\n            padding-right: 11px;\n        }\n\n        .c9-toolbarbuttonEmpty .c9-icon {\n            position:relative;\n        }\n\n        .c9-toolbarbuttonEmpty .c9-label {\n            display:none;\n        }\n\n        .c9-toolbarbuttonIcon .c9-label{\n            padding:4px 6px 0 22px;\n        }\n        .record.c9-toolbarbuttonIcon .c9-label{\n            padding:4px 6px 0 26px;\n        }\n\n        .c9-toolbarbuttonIcon.preview .c9-label {\n            padding-left : 25px;\n        }\n\n        .c9-toolbarbuttonDown {\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius : 5px;\n            border:1px solid #1c1c1c;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n\n            background         : #343434;\n\n\n            background         : -webkit-gradient(linear, left top, left bottom, from(#282828), color-stop(1, #2e2e2e));\n            background         :-moz-linear-gradient(center bottom, #2e2e2e 0%, #282828 100%) repeat scroll 0 0 transparent;\n        }\n\n        .c9-toolbarbuttonDown .c9-icon {\n            background-position: 0 -19px;\n        }\n\n        .c9-toolbarbuttonDisabled .c9-icon {\n            background-position : 0 -38px;\n        }\n        .record.c9-toolbarbuttonDisabled .c9-icon, .record.c9-toolbarbuttonDown .c9-icon {\n            background-position : 0 0;\n        }\n\n        .c9-toolbarbuttonDisabled .c9-label {\n            color       : #606060;\n            text-shadow : rgba(0, 0, 0, 1) 0px 1px 0px;\n        }\n\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "div[2]/text()"\n          background = "."\n          icon       = "div[1]">\n            <div class="c9-toolbarbutton">\n                <div class="c9-icon"></div>\n                <div class="c9-label">-</div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="c9-toolbarbutton-glossy">\n    <a:style><![CDATA[\n        .c9-toolbarbutton-glossy,\n        .c9-toolbarbutton-glossy .c9-label,\n        .c9-toolbarbutton-glossy .c9-label:after {\n            color: #D6D6D6;\n            cursor: default;\n            height: 23px;\n            position: relative;\n        }\n        .c9-toolbarbutton-glossy {\n            background: none !important;\n        }\n        .c9-toolbarbutton-glossy .c9-icon {\n            z-index: 100;\n        }\n        .c9-toolbarbutton-glossy .c9-label,\n        .c9-toolbarbutton-glossy .c9-label:after {\n            background: url(images/c9-no-repeat.png) no-repeat;\n        }\n        .c9-toolbarbutton-glossy .c9-icon {\n            display: none;\n        }.c9-toolbarbutton-glossy .c9-label {\n            background-position: 0px 100px; /* nothing */\n            line-height: 23px;\n            margin-right: 4px;\n            overflow: visible;\n            padding: 0 3px 0 7px;\n        }\n        .c9-toolbarbutton-glossy .c9-label:after {\n            background-position: 0px 100px; /* nothing */\n            content: "";\n            display: block;\n            position: absolute;\n            left: 100%;\n            top: 0;\n            width: 4px;\n        }\n        .c9-toolbarbutton-glossyOver .c9-label {\n            background-position: 0px -457px;\n        }\n        .c9-toolbarbutton-glossyOver .c9-label:after {\n            background-position: -476px -457px;\n        }\n        .c9-toolbarbutton-glossyDown .c9-label {\n            background-position: 0px -490px;\n        }\n        .c9-toolbarbutton-glossyDown .c9-label:after {\n            background-position: -476px -490px;\n        }\n\n        .c9-toolbarbutton-glossyDisabled .c9-label{\n            color : #999;\n        }\n\n        .c9-toolbarbutton-glossyIcon .c9-icon {\n            background-position: 0 0;\n            background-repeat: no-repeat;\n            display: block;\n            height: 19px;\n            left: 2px;\n            position: absolute;\n            top: 2px;\n            width: 23px;\n        }\n        .c9-toolbarbutton-glossyIcon .c9-label {\n            padding: 0 0 0 22px;\n        }\n\n        .btnSave .c9-icon {\n            background-image: none !important;\n            border: 1px solid #1C1C1C;\n            border-radius: 50%;\n            box-shadow: 0 1px 0 0 rgba(255,255,255,.2) inset;\n            height: 4px;\n            left: auto;\n            right: 4px;\n            top: 9px;\n            width: 4px;\n        }\n        .btnSave .c9-label {\n            padding-right: 4px;\n        }\n\n        @-webkit-keyframes saving { 0%, 10%, 100% { opacity: 1; } 50%, 60% { opacity: .3; } }\n           @-moz-keyframes saving { 0%, 10%, 100% { opacity: 1; } 50%, 60% { opacity: .3; } }\n               @-keyframes saving { 0%, 10%, 100% { opacity: 1; } 50%, 60% { opacity: .3; } }\n\n        .c9-toolbarbutton-glossy.saving .c9-label,\n        .c9-toolbarbutton-glossy.saved .c9-label {\n            background-position: 0 -523px;\n            font-size: 9px;\n            line-height: 24px;\n            padding: 0 15px 0 10px;\n            text-transform: uppercase;\n        }\n        .c9-toolbarbutton-glossy.saving .c9-label:after,\n        .c9-toolbarbutton-glossy.saved .c9-label:after {\n            background-position: -476px -523px;\n        }\n        .c9-toolbarbutton-glossy.saving .c9-icon {\n            background-color: #85C410;\n            right: 10px;\n            -webkit-animation: saving .4s linear 0 infinite;\n               -moz-animation: saving .4s linear 0 infinite;\n                    animation: saving .4s linear 0 infinite;\n        }\n        .c9-toolbarbutton-glossy.saved .c9-icon {\n            background-color: #85C410;\n            right: 10px;\n        }\n        .c9-toolbarbutton-glossy.error .c9-icon {\n            background-color: red;\n            right: 10px;\n        }\n        .c9-toolbarbutton-glossy.save .c9-icon {\n            background-color: #D01616;\n            right: 10px;\n        }\n        .c9-toolbarbutton-glossy.save .c9-label {\n            font-size: 9px;\n            padding: 0 16px 0 8px;\n            right: 14px;\n            text-transform: uppercase;\n        }\n        .c9-toolbarbutton-glossy.disabled .c9-icon {\n            background-color: white;\n            opacity: .2;\n        }\n\n        .c9-menu-bar .c9-mbar-bcont .c9-activity .saving {\n            -webkit-animation: saving .4s linear 0 infinite;\n               -moz-animation: saving .4s linear 0 infinite;\n                    animation: saving .4s linear 0 infinite;\n\n            background-position: -102px 0px !important;\n        }\n        .c9-menu-bar .c9-mbar-bcont .c9-activity .saved {\n            background-position: -102px -19px !important;\n        }\n        .c9-menu-bar .c9-mbar-bcont .c9-activity .save {\n            background-position: -84px -19px !important;\n        }\n\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "div[2]/text()"\n          background = "."\n          icon       = "div[1]">\n            <div class="c9-toolbarbutton-glossy">\n                <div class="c9-icon"> </div>\n                <div class="c9-label">-</div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="c9-sidepanelsbutton">\n    <a:style><![CDATA[\n        .c9-sidepanelsbutton {\n            height             : 21px;\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            line-height        : 17px;\n            border:1px solid transparent;\n            padding-bottom: 1px;\n            padding-top: 1px;\n\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius : 5px;\n            border:1px solid #1c1c1c;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n\n            background         : #343434;\n            background         : -webkit-gradient(linear, left top, left bottom, from(#282828), color-stop(1, #2e2e2e));\n            background         :-moz-linear-gradient(center bottom, #2e2e2e 0%, #282828 100%) repeat scroll 0 0 transparent;\n\n            width: 25px;\n\n            -moz-user-select: -moz-none;\n            -khtml-user-select: none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select: none;\n        }\n\n        .c9-sidepanelsbutton .c9-icon {\n            display: none;\n            width:23px;\n            height:19px;\n            position:absolute;\n            top:1px;\n            left:2px;\n            background-position : 0 0;\n            background-repeat   : no-repeat;\n            left: 1px;\n        }\n\n        .c9-sidepanelsbuttonIcon .c9-icon{\n            display : block;\n        }\n\n        .c9-sidepanelsbuttonOver {\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius : 5px;\n            border:1px solid #1c1c1c;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n\n            background         : #343434;\n            background         : -webkit-gradient(linear, left top, left bottom, from(#3a3a3a), color-stop(1, #333333));\n            background         :-moz-linear-gradient(center bottom, #333333 0%, #3a3a3a 100%) repeat scroll 0 0 transparent;\n        }\n\n        .c9-sidepanelsbutton.active {\n            background-image: linear-gradient(bottom, rgb(70,94,58) 0%, rgb(74,98,62) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(70,94,58) 0%, rgb(74,98,62) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(70,94,58) 0%, rgb(74,98,62) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(70,94,58) 0%, rgb(74,98,62) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(70,94,58) 0%, rgb(74,98,62) 100%);\n         }\n\n        .c9-sidepanelsbutton .c9-label {\n            position:relative;\n            overflow:hidden;\n            font-family:Arial;\n            font-size:12px;\n            color:#d6d6d6;\n            line-height:14px;\n            height:15px;\n            padding:3px 6px 0 6px;\n        }\n\n        .c9-sidepanelsbuttonEmpty .c9-icon {\n            position:relative;\n        }\n\n        .c9-sidepanelsbuttonEmpty .c9-label {\n            display:none;\n        }\n\n        .c9-sidepanelsbuttonIcon .c9-label{\n            padding:3px 6px 0 22px;\n        }\n\n        .c9-sidepanelsbuttonIcon.preview .c9-label {\n            padding-left : 25px;\n        }\n\n        .c9-sidepanelsbuttonDown {}\n\n        .c9-sidepanelsbuttonDown .c9-icon {}\n\n        .c9-sidepanelsbuttonDisabled {\n\n        }\n\n        .c9-sidepanelsbuttonDisabled .c9-icon {\n            background-position : 0 -38px;\n        }\n\n        .c9-sidepanelsbuttonDisabled .c9-label {\n            color       : #606060;\n            text-shadow : rgba(0, 0, 0, 1) 0px 1px 0px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "div[2]/text()"\n          background = "."\n          icon       = "div[1]">\n            <div class="c9-sidepanelsbutton">\n                <div class="c9-icon"></div>\n                <div class="c9-label">-</div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="c9-toolbarbutton2">\n    <a:style><![CDATA[\n        .c9-toolbarbutton2 {\n            height             : 20px;\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            line-height        : 13px;\n            margin:            : 0 1px;\n            border             : 1px solid transparent;\n            -moz-user-select: -moz-none;\n            -khtml-user-select: none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select: none;\n        }\n\n        .c9-toolbarbutton2 .c9-icon {\n            display: none;\n            width: 18px;\n            height: 18px;\n            background-position : 0 -18px;\n            background-repeat   : no-repeat;\n        }\n\n        .c9-toolbarbutton2Icon .c9-icon {\n            display : block;\n        }\n\n        .c9-toolbarbutton2Over {\n\n        }\n\n        .c9-toolbarbutton2 .c9-label {\n            position:relative;\n            overflow:hidden;\n            font-family:Arial;\n            font-size:12px;\n            color:#d6d6d6;\n            line-height:14px;\n            height:15px;\n            padding:3px 6px 0 6px;\n        }\n\n        .c9-toolbarbutton2Empty .c9-icon {\n            position:relative;\n        }\n\n        .c9-toolbarbutton2Empty .c9-label {\n            display:none;\n        }\n\n        .c9-toolbarbutton2Icon .c9-label {\n            padding:3px 6px 0 22px;\n        }\n\n        .c9-toolbarbutton2Icon.preview .c9-label {\n            padding-left : 25px;\n        }\n\n        .c9-toolbarbutton2Disabled .c9-icon {\n            background-position: 0 1px;\n        }\n\n        .c9-toolbarbutton2Over .c9-icon {\n            background-position: 0 -37px;\n        }\n\n        .c9-toolbarbutton2Down .c9-icon {\n            background-position: 0 -56px;\n        }\n\n        .c9-toolbarbutton2Disabled .c9-label {\n            color       : #606060;\n            text-shadow : rgba(0, 0, 0, 1) 0px 1px 0px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "div[2]/text()"\n          background = "."\n          icon       = "div[1]">\n            <div class="c9-toolbarbutton2">\n                <div class="c9-icon"></div>\n                <div class="c9-label">-</div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="header-btn">\n    <a:style><![CDATA[\n        .header-btn {\n            height              : 26px !important;\n            width               : 30px;\n            overflow            : hidden;\n            cursor              : pointer;\n            position            : absolute;\n            cursor              : default;\n            background-image    : url(images/c9-no-repeat.png);\n            background-repeat   : no-repeat;\n            top: -32px;\n            -moz-user-select: -moz-none;\n            -khtml-user-select: none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select: none;\n        }\n\n        .panel-settings {\n        	background-position: 0px -270px;\n        	right: 0;\n        }\n        .panel-settings:hover,\n        .panel-settings.header-btnDown {\n        	background-position: -30px -270px;\n        }\n        .c9-header-plus {\n        	background-position: 0px -294px;\n        	right:31px;\n        	top: 0;\n        }\n        .deploy.c9-header-plus {\n            right: 1px;\n        }\n\n        .c9-header-plus.header-btnOver {\n        	background-position: -30px -294px;\n        }\n        .c9-header-plus.header-btnDisabled {\n            background-position: -60px -294px;\n        }\n        .c9-header-minus {\n            background-position: 0px -320px;\n            right: 1px;\n            top: 0;\n        }\n\n        .deploy.c9-header-minus {\n            right: -30px;\n        }\n\n        .c9-header-minus.header-btnOver {\n            background-position: -30px -320px;\n        }\n        .c9-header-minus.header-btnDisabled {\n            background-position: -60px -320px;\n        }\n        .header-btnOver {\n            background-color: rgba(255,255,255,.3);\n        }\n        .panel-settings:first-child {\n            background-color: transparent;\n        }\n        .c9-header-plus.header-btnDown {\n            background-color: rgba(0,0,0,.05);\n        }\n        .c9-header-divider:before {\n            background: url(images/c9-no-repeat.png) no-repeat -100px -293px;\n            content: "";\n            display: block;\n            height: 26px;\n            left: 0;\n            position: absolute;\n            top: 0;\n            width: 2px;\n            -moz-user-select: -moz-none;\n            -khtml-user-select: none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select: none;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "text()"\n          background = "."\n          icon       = ".">\n            <div class="header-btn"> </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="browser-btn">\n    <a:style><![CDATA[\n        .browser-btn {\n            height              : 27px;\n            width               : 25px;\n            overflow            : hidden;\n            cursor              : pointer;\n            position            : relative;\n            cursor              : default;\n            background-position : 0 27px;\n            background-repeat   : no-repeat;\n            background-image    : url(images/browser_button.png);\n            -moz-user-select: -moz-none;\n            -khtml-user-select: none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select: none;\n        }\n\n        .browser-btn span{\n            display : block;\n            width : 17px;\n            height : 17px;\n            position : absolute;\n            left : 5px;\n            top : 5px;\n            background-repeat   : no-repeat;\n        }\n\n        .browser-btnOver {\n            background-position : 0 0px;\n        }\n\n        .browser-btnDown {\n            background-position : 0 -27px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption    = "text()"\n          background = "."\n          icon       = "span">\n            <div class="browser-btn"><span> </span></div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="dockheader">\n    <a:style><![CDATA[\n        .dockheader {\n            position : relative;\n            background       : -webkit-gradient(linear, center top, center bottom, from(#3E3F41), color-stop(1, #303132));\n            background       : -moz-linear-gradient(center top , #3E3F41 0%, #303132 100%) repeat scroll 0 0 transparent;\n            height : 10px;\n            cursor : pointer;\n            border-bottom: 1px solid #38393b;\n            border-top: 1px solid #4f5052;\n        }\n\n        .dockcol .dockheader {\n            border-bottom: 1px solid #38393b;\n        }\n\n        .dockheader span{\n            width : 9px;\n            height : 9px;\n            position : absolute;\n            display : block;\n            right : 2px;\n            top : 1px;\n            background : url(images/toolbar-arrows.png) 0 0;\n        }\n\n        .dockheaderOver {\n            background       : -webkit-gradient(linear, center top, center bottom, from(#525354), color-stop(1, #454647));\n            background       : -moz-linear-gradient(center top, #525354 0%, #454647 100%) repeat scroll 0 0 transparent;\n        }\n\n        .dockheader.expanded span{\n            background-position : 0 -10px;\n            right : 3px;\n        }\n\n        .dockheader .dockheader-footer {\n            border-bottom: 1px solid #1D1E1F;\n            bottom: 0;\n            left: 0;\n            position: absolute;\n            width: 100%;\n        }\n        .dockcol .dockheader .dockheader-footer {\n            top: 9px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "text()"\n          background = "."\n          icon       = ".">\n            <div class="dockheader">\n                <span> </span>\n                <div class="dockheader-footer"></div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="mnubtn">\n    <a:style><![CDATA[\n        .mnubtn {\n			height   : 26px !important;\n			position : relative;\n			cursor   : default;\n			overflow : hidden;\n			display  : block;\n			border   : 0;\n			width    : 30px;\n        }\n\n        .mnubtnOver,\n        .mnubtnDown {\n        	background-image: url(images/c9-repeat-x.png);\n        	background-repeat: repeat-x;\n        	box-shadow: -1px 0 0 0 #000, 1px 0 0 0 #000;\n        }\n        .mnubtnOver {\n            background-position: 50% -181px;\n        }\n        .mnubtnDown {\n            background-position: 50% -217px;\n        }\n\n        .mnubtnDisabled .icon, .mnubtnDisabled SPAN{\n            opacity : 0.3\n        }\n\n        .mnubtn .icon {\n			background-image  : url(images/c9-repeat-x.png);\n			background-repeat : no-repeat;\n			width             : 100%;\n			height            : 26px;\n        }\n\n        .mnubtnDisabled .icon {\n        	opacity: 0.3;\n        }\n\n        .mnubtnDisabled {\n        	box-shadow: none;\n        	background-image: none;\n        }\n\n        .mnubtn .pointer {\n            display             : none;\n        }\n\n        .mnubtn SPAN {\n            font-family         : Tahoma, Arial;\n            font-size           : 10px;\n            color               : #aaaaaa;\n            text-align          : center;\n            position:relative;\n            display:none;\n            overflow:hidden;\n        }\n\n        .mnubtnDown SPAN {\n            color : white;\n        }\n\n        .mnubtnDown .pointer {\n        }\n\n        .mnubtn.spacer {\n            border     : 0;\n            border-top : 1px solid #3f3f41;\n            width      : 65px;\n            height     : 15px;\n            padding    : 0;\n            position   : relative;\n        }\n\n        .mnubtn.spacer .pointer,\n        .mnubtn.spacer .icon,\n        .mnubtn.spacer SPAN {\n            display : none;\n        }\n\n        .mnubtn.rundebug .icon {\n            background-position: 50% -305px;\n        }\n\n        .mnubtn.project_files .icon {\n            background-position: 50% -249px;\n        }\n\n        .mnubtn.open_files .icon {\n            background-position: 50% -277px;\n        }\n\n        .mnubtn.testing .icon {\n            background-position: 50% -393px;\n        }\n\n        .mnubtn.visual_editor .icon {\n            background-image:url(images/visual_editor.png);\n        }\n\n        .mnubtn.preferences .icon {\n            background-position: 50% -364px;\n        }\n\n        .mnubtn.git_corner .icon {\n            background-image:url(images/git_corner.png);\n        }\n\n        .mnubtn.deploy .icon {\n            background-position: 50% -334px;\n        }\n\n        .mnubtn.the_store .icon {\n            background-image:url(images/the_store.png);\n        }\n\n        .mnubtn.shop {\n            width    : 65px;\n            height   : 45px;\n            padding  : 0;\n            border   : 0;\n            position : relative;\n        }\n\n        .mnubtn.shop1 .icon {\n            background-image:url(images/shop1.png);\n        }\n\n        .mnubtn.shop2 .icon {\n            background-image:url(images/shop2.png);\n        }\n\n        .mnubtn.shop3 .icon {\n            background-image:url(images/shop3.png);\n        }\n\n        .mnubtn.shop4 .icon {\n            background-image:url(images/shop4.png);\n        }\n\n        .mnubtn.shop SPAN {\n            display:none;\n        }\n\n        .black-menu-bar .mnubtn:not(:first-child):not(:last-child) {\n            margin-right: 1px !important;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main caption="span">\n            <div class="mnubtn">\n                <div class="icon"></div>\n                <div class="pointer"></div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="c9-topbar-btn">\n    <a:style><![CDATA[\n        .c9-topbar-btn {\n            height              : 25px;\n            width               : 25px;\n            overflow            : hidden;\n            cursor              : pointer;\n            position            : relative;\n            cursor              : default;\n            background-repeat   : no-repeat;\n            background-image    : url("images/c9-topbar-btns.png");\n            background-position : 0 0;\n            -moz-user-select: -moz-none;\n            -khtml-user-select: none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select: none;\n        }\n\n        /* dashboard */\n        .c9-topbar-btn.c9-topbar-btnDown.dashboard {\n            background-position : -25px 0;\n        }\n        .c9-topbar-btn.c9-topbar-btnOver.dashboard {\n            background-position : -50px 0;\n        }\n        .c9-topbar-btn.dashboard {\n            background-position : 0 0;\n        }\n\n        /* home */\n        .c9-topbar-btn.c9-topbar-btnDown.home {\n            background-position : -25px -25px;\n        }\n        .c9-topbar-btn.c9-topbar-btnOver.home {\n            background-position : -50px -25px;\n        }\n        .c9-topbar-btn.home {\n            background-position : 0 -25px;\n        }\n\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "text()"\n          background = "."\n          icon       = ".">\n            <div class="c9-topbar-btn"> </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n\n<a:button name="btn-default-css3">\n    <a:style><![CDATA[\n        .btn-default-css3 {\n            background-image: linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n\n            -moz-border-radius    : 6px;\n            -webkit-border-radius : 6px;\n            border-radius         : 6px;\n\n            text-shadow   : #383838 0px 1px 0px;\n            color: #ffffff;\n            font-weight: bold;\n            font-size: 14px;\n\n            -webkit-box-shadow: 0 0px 3px 0 #000000;\n            -moz-box-shadow: 0 0px 3px 0 #000000;\n            box-shadow: 0 0px 3px 0 #000000;\n\n            position: relative;\n        }\n\n        .win-deploy-target .btn-default-css3 {\n            font-size: 13px;\n        }\n\n        .btn-default-css3Over {\n            background-image: linear-gradient(bottom, rgb(92,92,98) 0%, rgb(116,116,119) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(92,92,98) 0%, rgb(116,116,119) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(92,92,98) 0%, rgb(116,116,119) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(92,92,98) 0%, rgb(116,116,119) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(92,92,98) 0%, rgb(116,116,119) 100%);\n        }\n\n        .btn-default-css3Focus {\n            background-image: linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n        }\n\n        .btn-default-css3Down {\n            background-image: linear-gradient(bottom, rgb(100,100,104) 0%, rgb(73,73,80) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(100,100,104) 0%, rgb(73,73,80) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(100,100,104) 0%, rgb(73,73,80) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(100,100,104) 0%, rgb(73,73,80) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(100,100,104) 0%, rgb(73,73,80) 100%);\n        }\n\n        .btn-default-css3Disabled {\n            background-image: linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n\n            text-shadow   : #626267 0px 1px 0px;\n            color: #38383d;\n        }\n\n        .btn-default-css3 .caption {\n            border-top: 1px solid #93939B;\n            padding: 3px 18px 4px;\n            -moz-border-radius    : 6px;\n            -webkit-border-radius : 6px;\n            border-radius         : 6px;\n\n            cursor: default;\n            text-align: center;\n        }\n\n        .btn-default-css3.btn-default-css3Over .caption {\n            border-top: 1px solid #ababb1;\n        }\n\n        .btn-default-css3.btn-default-css3Focus .caption {\n            border-top: 1px solid #6c6c74;\n        }\n        .btn-default-css3.btn-default-css3Down .caption {\n            border-top: 1px solid #93939b;\n        }\n        .btn-default-css3.btn-default-css3Disabled .caption {\n            border-top: 1px solid #93939b;\n        }\n\n        .btn-default-css3 .border {\n            display: none;\n\n            border: 1px solid #ffffff;\n\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            border-radius: 6px 6px 6px 6px;\n        }\n        .btn-default-css3.btn-default-css3Focus .border {\n            display: block;\n        }\n        /*-----------*/\n\n        /*-- GREEN --*/\n        .btn-default-css3.btn-green {\n            background-image: linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n\n            text-shadow   : #068e02 0px 1px 0px;\n        }\n\n        .btn-default-css3Over.btn-green {\n            background-image: linear-gradient(bottom, rgb(53,164,51) 0%, rgb(109,183,67) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(53,164,51) 0%, rgb(109,183,67) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(53,164,51) 0%, rgb(109,183,67) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(53,164,51) 0%, rgb(109,183,67) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(53,164,51) 0%, rgb(109,183,67) 100%);\n        }\n\n        .btn-default-css3Focus.btn-green {\n            background-image: linear-gradient(bottom, rgb(2,141,0) 0%, rgb(70,165,19) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(70,165,19) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(70,165,19) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(70,165,19) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(70,165,19) 100%);\n        }\n\n        .btn-default-css3Down.btn-green {\n            background-image: linear-gradient(bottom, rgb(73,165,20) 0%, rgb(2,141,0) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(73,165,20) 0%, rgb(2,141,0) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(73,165,20) 0%, rgb(2,141,0) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(73,165,20) 0%, rgb(2,141,0) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(73,165,20) 0%, rgb(2,141,0) 100%);\n        }\n\n        .btn-default-css3Disabled.btn-green {\n            background-image: linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n\n            text-shadow   : #3da110 0px 1px 0px;\n            color: #037a01;\n        }\n\n        .btn-default-css3.btn-green .caption {\n            border-top: 1px solid #88c464;\n        }\n\n        .btn-default-css3.btn-default-css3Over.btn-green .caption {\n            border-top: 1px solid #57b357;\n        }\n\n        .btn-default-css3.btn-default-css3Focus.btn-green .caption {\n            border-top: 1px solid #88c464;\n        }\n        .btn-default-css3.btn-default-css3Down.btn-green .caption {\n            border-top: 1px solid #88c464;\n        }\n        .btn-default-css3.btn-default-css3Disabled.btn-green .caption {\n            border-top: 1px solid #88c464;\n        }\n        /*-----------*/\n        /*-- RED --*/\n        .btn-default-css3.btn-red {\n            background-image: linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n\n            text-shadow   : #b60000 0px 1px 0px;\n        }\n\n        .btn-default-css3Over.btn-red {\n            background-image: linear-gradient(bottom, rgb(197,51,51) 0%, rgb(213,51,51) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(197,51,51) 0%, rgb(213,51,51) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(197,51,51) 0%, rgb(213,51,51) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(197,51,51) 0%, rgb(213,51,51) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(197,51,51) 0%, rgb(213,51,51) 100%);\n        }\n\n        .btn-default-css3Focus.btn-red {\n            background-image: linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n        }\n\n        .btn-default-css3Down.btn-red {\n            background-image: linear-gradient(bottom, rgb(203,0,0) 0%, rgb(182,0,0) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(203,0,0) 0%, rgb(182,0,0) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(203,0,0) 0%, rgb(182,0,0) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(203,0,0) 0%, rgb(182,0,0) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(203,0,0) 0%, rgb(182,0,0) 100%);\n        }\n\n        .btn-default-css3Disabled.btn-red {\n            background-image: linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n\n            text-shadow   : #db0000 0px 1px 0px;\n            color: #9c0000;\n        }\n\n        .btn-default-css3.btn-red .caption {\n            border-top: 1px solid #e47979;\n        }\n\n        .btn-default-css3.btn-default-css3Over.btn-red .caption {\n            border-top: 1px solid #dd5757;\n        }\n\n        .btn-default-css3.btn-default-css3Focus.btn-red .caption {\n            border-top: 1px solid #dd5757;\n        }\n        .btn-default-css3.btn-default-css3Down.btn-red .caption {\n            border-top: 1px solid #cf5757;\n        }\n        .btn-default-css3.btn-default-css3Disabled.btn-red .caption {\n            border-top: 1px solid #dd5757;\n        }\n        /*-----------*/\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "div[1]/text()"\n          background = "."\n          icon       = ".">\n            <div class="btn-default-css3">\n                <div class="caption"> </div>\n                <div class="border"></div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n\n<a:button name="btn-default-simple">\n    <a:style><![CDATA[\n        .btn-default-simple {\n            color: #ffffff;\n            font-weight: bold;\n            font-size: 14px;\n            position: relative;\n            cursor: default;\n        }\n\n        .btn-default-simpleOver {\n            color: #bfbfbf;\n        }\n\n        .win-deploy-target .btn-default-simple {\n            font-size          : 11px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "text()"\n          background = "."\n          icon       = ".">\n            <div class="btn-default-simple">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:checkbox name="checkbox">\n    <a:style><![CDATA[\n        .cbcontainer {\n            padding    : 2px 2px 2px 16px;\n            position   : relative;\n            overflow   : visible;\n            color      : #333;\n        }\n\n        .cbcontainer span {\n            font-family : Tahoma, Arial;\n            font-size   : 11px;\n            cursor      : default;\n            padding     : 1px 3px 2px 3px;\n            position    : relative;\n            top         : -2px;\n            overflow    : visible;\n            display     : inline-block;\n            line-height : 13px;\n            white-space        : nowrap;\n            text-overflow      : ellipsis;\n        }\n\n        .cbcontainerFocus span {\n            padding : 0px 2px 1px 2px;\n            border  : 1px dotted #BBB;\n        }\n\n        .cbcontainerChecked.cbcontainerDown.cbcontainerFocus .checkbox {\n            background-position : 0 -48px;\n        }\n\n        .cbcontainer .checkbox {\n            width      : 12px;\n            height     : 12px;\n            overflow   : hidden;\n            position   : absolute;\n            left       : 2px;\n            top        : 2px;\n            background : url("images/checkbox.png") no-repeat 0 -12px;\n        }\n\n        .cbcontainerDown .checkbox {\n            background-position : 0 -36px;\n        }\n\n        .cbcontainerChecked .checkbox {\n            background-position : 0 -24px;\n        }\n\n        .cbcontainerError span {\n            background-color : #ffb500;\n            color            : #fbfbfb;\n        }\n\n        .cbcontainerDisabled .checkbox {\n            background-position : 0 -0px;\n        }\n\n        .cbcontainerDisabled span {\n            color : #bebebe;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isWebkit"><![CDATA[\n        .cbcontainer span {\n            top : -2px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span/text()" minheight="18" minwidth="18">\n            <div class=\'cbcontainer\'>\n                <div class=\'checkbox\'> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:checkbox skin="grouped_checkbox">\n    <a:style><![CDATA[\n        .grouped_checkbox_holder {\n            background: #292929 url(images/c9-repeat-x.png) repeat-x 0 -440px;\n            border: 1px solid #010910;\n            border-radius: 3px;\n            box-shadow: 0 0 0 1px rgba(236, 245, 255, .14) inset;\n            height: 27px;\n            padding: 0;\n        }\n        .grouped_checkbox_holder .cbcontainer {\n            background: url(images/c9-repeat-x.png) no-repeat 0px -474px, /* light */\n                        url(images/c9-repeat-x.png) no-repeat 100% -507px; /* dark */\n            cursor: default;\n            display: inline-block;\n            height: 25px !important;\n            padding: 0;\n            width: 28px;\n        }\n        .grouped_checkbox_holder .cbcontainerOver,\n        .grouped_checkbox_holder .cbcontainerFocus {\n            box-shadow: 0 0 0 1000px rgba(131,145,129,.08) inset;\n        }\n        .grouped_checkbox_holder .cbcontainer:first-child {\n            background: url(images/c9-repeat-x.png) no-repeat 100% -507px;\n            border-top-left-radius: 2px;\n            border-bottom-left-radius: 2px;\n        }\n        .grouped_checkbox_holder .cbcontainer:last-child {\n            background: url(images/c9-repeat-x.png) no-repeat 0px -474px;\n            border-top-right-radius: 2px;\n            border-bottom-right-radius: 2px;\n        }\n        .grouped_checkbox_holder .cbcontainerDown,\n        .grouped_checkbox_holder .cbcontainerChecked {\n            background: none;\n            box-shadow: -1px 0 0 0 #010910, -1px 0 0 0 #010910 inset, 0 0 3px 2px #1a1a1a inset;\n        }\n        .grouped_checkbox_holder .cbcontainerDown:first-child,\n        .grouped_checkbox_holder .cbcontainerChecked:first-child {\n            box-shadow: 0 0 3px 2px #1a1a1a inset;\n        }\n        .grouped_checkbox_holder .cbcontainerDown:last-child,\n        .grouped_checkbox_holder .cbcontainerChecked:last-child {\n            box-shadow: -1px 0 0 0 #010910, 0 0 3px 2px #1a1a1a inset;\n        }\n        .grouped_checkbox_holder .cbcontainer .checkbox {\n            background: url(images/c9-repeat-x.png) no-repeat 50% 0;\n            border: 0;\n            height: 25px;\n            left: 0;\n            top: 0;\n            width: 100%;\n        }\n\n        .grouped_checkbox_holder .chkRegEx .checkbox { background-position: 50% -540px; }\n        .grouped_checkbox_holder .chkRegEx.cbcontainerChecked .checkbox { background-position: 50% -565px; }\n        .grouped_checkbox_holder .chkMatchCase .checkbox { background-position: 50% -590px; }\n        .grouped_checkbox_holder .chkMatchCase.cbcontainerChecked .checkbox { background-position: 50% -615px; }\n        .grouped_checkbox_holder .chkWholeWords .checkbox { background-position: 50% -640px; }\n        .grouped_checkbox_holder .chkWholeWords.cbcontainerChecked .checkbox { background-position: 50% -665px; }\n        .grouped_checkbox_holder .chkPreserveCase .checkbox { background-position: 50% -690px; }\n        .grouped_checkbox_holder .chkPreserveCase.cbcontainerChecked .checkbox { background-position: 50% -715px; }\n        .grouped_checkbox_holder .chkSearchBackwards .checkbox { background-position: 50% -790px; }\n        .grouped_checkbox_holder .chkSearchBackwards.cbcontainerChecked .checkbox { background-position: 50% -815px; }\n\n        .grouped_checkbox_holder .chkWrapAround .checkbox { background-position: 50% -890px; }\n        .grouped_checkbox_holder .chkWrapAround.cbcontainerChecked .checkbox { background-position: 50% -915px; }\n\n        .grouped_checkbox_holder .chkSearchSelection .checkbox { background-position: 50% -840px; }\n        .grouped_checkbox_holder .chkSearchSelection.cbcontainerChecked .checkbox { background-position: 50% -865px; }\n        .grouped_checkbox_holder .chkHighlightMatches .checkbox { background-position: 50% -740px; }\n        .grouped_checkbox_holder .chkHighlightMatches.cbcontainerChecked .checkbox { background-position: 50% -765px; }\n\n        .grouped_checkbox_holder .chkConsole .checkbox { background-position: 50% -1235px; }\n        .grouped_checkbox_holder .chkConsole.cbcontainerChecked .checkbox { background-position: 50% -1268px; }\n\n        .grouped_checkbox_holder .cbcontainer span {\n            display: none;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main label="span/text()" minheight="18" minwidth="18">\n            <div class=\'grouped_checkbox_holder\'>\n                <div class=\'checkbox\'> </div>\n                <span class=\'label\'>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:checkbox name="checkbox-menu">\n    <a:style><![CDATA[\n        .cbmcontainer {\n            padding: 3px 16px 5px 23px;\n            white-space: nowrap;\n            cursor : default;\n            z-index:1100000;\n            position: relative;\n            height: 20px;\n            color: #f1f1f1;\n        }\n\n        .cbmcontainer span {\n\n            font-family   : Tahoma, Arial;\n            font-size     : 11px;\n            line-height   : 14px;\n            cursor:default;\n\n            padding     : 1px 3px 2px 0px;\n            position    : relative;\n            top         : -2px;\n            overflow    : visible;\n            display     : inline-block;\n            line-height : 13px;\n            white-space        : nowrap;\n            text-overflow      : ellipsis;\n        }\n\n        .cbmcontainerFocus span {\n        }\n\n        .cbmcontainerOver  {\n            background-color : #262626;\n            color : #F5B53C;\n        }\n\n        .cbmcontainerChecked.cbmcontainerDown.cbmcontainerFocus .checkbox {\n\n        }\n\n        .cbmcontainer .checkbox {\n            width      : 12px;\n            height     : 12px;\n            overflow   : hidden;\n            position   : absolute;\n            left       : 2px;\n            top        : 1px;\n            background: none;\n        }\n\n        .cbmcontainerDown .checkbox {\n\n        }\n\n        .cbmcontainerChecked .checkbox {\n            background-image: url(images/check.gif);\n            background-repeat: no-repeat;\n            background-position: 0 -16px;\n        }\n\n        .cbmcontainerError span {\n            right: 15px;\n            margin-top: 0px;\n            z-index: 10;\n            text-align: right;\n            padding-left: 15px;\n            float : right;\n        }\n\n        .cbmcontainerDisabled .checkbox {\n            background : none;\n        }\n\n        .cbmcontainerDisabled {\n            color : #bebebe;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span/text()" minheight="18" minwidth="18">\n            <div class=\'cbmcontainer\'>\n                <div class=\'checkbox\'> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:checkbox name="checkbox_black">\n    <a:style><![CDATA[\n        .cbblack.cbcontainer {\n            padding    : 2px 2px 2px 20px;\n        }\n\n        .cbblack.cbcontainer span {\n            color : #C0C0C0;\n            top         : 0;\n        }\n\n        .cbblack.cbcontainer .checkbox {\n            width      : 16px;\n            height     : 17px;\n            background : url("images/checkbox_black.png") no-repeat 0 0;\n        }\n\n        .cbblack.cbcontainerOver .checkbox{\n            background-position : 0 -85px;\n        }\n\n        .cbblack.cbcontainerDown .checkbox{\n            background-position : 0 -17px;\n        }\n\n        .cbblack.cbcontainerChecked .checkbox {\n            background-position : 0 -34px;\n        }\n\n        .cbblack.cbcontainerOver.cbcontainerChecked .checkbox{\n            background-position : 0 -102px;\n        }\n\n        .cbblack.cbcontainerChecked.cbcontainerDown .checkbox {\n            background-position : 0 -51px;\n        }\n\n        .cbblack.cbcontainerError span {\n            background-color : #ffb500;\n            color            : #fbfbfb;\n        }\n\n        .cbblack.cbcontainerDisabled .checkbox {\n            background-position : 0 -68px;\n        }\n\n        .cbblack.cbcontainerDisabled span {\n            color : #bebebe;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span/text()" minheight="18" minwidth="18">\n            <div class=\'cbcontainer cbblack\'>\n                <div class=\'checkbox\'> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:checkbox name="checkbox_grey">\n    <a:style><![CDATA[\n        .cbgrey.cbcontainer {\n            padding    : 2px 2px 2px 20px;\n        }\n\n        .cbgrey.cbcontainer span {\n            color : #333;\n            top   : 0px;\n        }\n\n        .cbgrey.cbcontainer .checkbox {\n            width      : 16px;\n            height     : 17px;\n            background : url("images/checkbox_grey.png") no-repeat 0 0;\n        }\n\n        .cbgrey.cbcontainerOver .checkbox{\n            background-position : 0 -85px;\n        }\n\n        .cbgrey.cbcontainerDown .checkbox{\n            background-position : 0 -17px;\n        }\n\n        .cbgrey.cbcontainerChecked .checkbox {\n            background-position : 0 -34px;\n        }\n\n        .cbgrey.cbcontainerOver.cbcontainerChecked .checkbox{\n            background-position : 0 -102px;\n        }\n\n        .cbgrey.cbcontainerChecked.cbcontainerDown .checkbox {\n            background-position : 0 -51px;\n        }\n\n        .cbgrey.cbcontainerError span {\n            background-color : #ffb500;\n            color            : #fbfbfb;\n        }\n\n        .cbgrey.cbcontainerDisabled .checkbox {\n            background-position : 0 -68px;\n        }\n\n        .cbgrey.cbcontainerChecked.cbcontainerDisabled .checkbox {\n            background-position : 0 -119px;\n        }\n\n        .cbgrey.cbcontainerDisabled span {\n            color : #bebebe;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span/text()" minheight="18" minwidth="18">\n            <div class=\'cbcontainer cbgrey\'>\n                <div class=\'checkbox\'> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:checkbox name="db-checkbox">\n    <a:style><![CDATA[\n        .db-checkbox {\n            overflow    : hidden;\n            position    : relative;\n            cursor      : default;\n            height      : 14px;\n            padding     : 2px 0 0 22px;\n            font-family : Arial;\n            font-size   : 12px;\n            color       : #404040;\n        }\n\n        .db-checkbox.bluecheck {\n            height      : 17px;\n        }\n\n        .db-checkbox .check {\n            width      : 16px;\n            height     : 16px;\n            position   : absolute;\n            top        : 0;\n            left       : 0;\n            background : url(images/checkbox.png) no-repeat 0 0;\n        }\n\n        .db-checkbox.bluecheck .check {\n            width      : 17px;\n            height     : 17px;\n            background : url(images/checkbox-blue.png) no-repeat -1px 2px;\n        }\n\n        .db-checkboxChecked {}\n\n        .db-checkboxChecked .check{\n            background-position: 0 -16px;\n        }\n        .bluecheck.db-checkboxChecked .check{\n            background-position: 0 -17px;\n        }\n\n        .db-checkboxOver {\n\n        }\n\n        .db-checkbox.bold {\n            font-weight : bold;\n            color       : #202020;\n        }\n\n        .vbox > DIV > .db-checkbox {\n            height  : 14px;\n            overflow: visible;\n        }\n\n        .db-checkboxDisabled {\n            color: #ababab;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isChrome || apf.isSafari"><![CDATA[\n        .vbox > .db-checkbox {\n            height  : 16px;\n            overflow: visible;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main label="text()">\n            <div class="db-checkbox">-<div class="check"></div></div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:codeeditor name="codeeditor">\n    <a:style><![CDATA[\n        .ace_smooth_loading {\n            -moz-box-sizing: border-box;\n            box-sizing: border-box;\n            height: 100%;\n        }\n        .ace_smooth_loading .loading_bg {\n            background: url(images/loader_progressbar_bg.png) repeat-x;\n            position: absolute;\n            height: 1px;\n        }\n        .ace_smooth_loading .loading_progress {\n            background-color: #38A3FF;\n            position: absolute;\n            height: 1px;\n        }\n        .ace_editor {\n            position: relative;\n            overflow: hidden;\n            -moz-user-select: -moz-none;\n            -khtml-user-select: none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select: none;\n        }\n\n        .ace_scroller {\n            position: absolute;\n            background-color: #fbfbfb;\n            -webkit-border-top-left-radius: 6px;\n            -moz-border-radius-topleft: 6px;\n            border-top-left-radius: 6px;\n            top: 0;\n            bottom: 0\n        }\n\n        .ace_gutter {\n            -moz-user-select: -moz-none;\n            -khtml-user-select: none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select: none;\n        }\n\n         /* These nocorner classes apply to Search Results tab in the console*/\n        .nocorner.ace_editor {\n            margin-top: 3px;\n        }\n\n        .nocorner ace_fold-fold-widgets {\n            opacity: 1;\n        }\n\n        .nocorner .ace_corner {\n            opacity : 0;\n        }\n\n        .nocorner.ace-monokai .ace_scroller {\n            background: transparent;\n        }\n        .aceSearchConsole div.ace_gutter {\n            background: rgba(0,0,0,0.1);\n            color: #999;\n        }\n        .aceSearchConsole .nocorner.ace_editor {\n            margin-top: 0px;\n        }\n        .aceSearchConsole.ace-monokai .ace_marker-layer .ace_active_line {\n            background: rgba(0,0,0,0.07);\n        }\n        .aceSearchResults .ace_text-layer {\n            pointer-events: auto;\n        }\n        .aceSearchResults .ace_c9searchresults, .aceSearchResults .ace_string {\n            cursor: default;\n        }\n\n        .aceSearchConsole.ace-monokai .ace_marker-layer .ace_selected_word {\n            border: 1px solid #ccc;\n        }\n\n        .ace_gutter .ace_gutter_active_line, .aceSearchConsole .ace_gutter .ace_gutter_active_line {\n            background-color: rgba(0, 0, 0, 0.07);\n        }\n        .dark .ace_gutter .ace_gutter_active_line {\n            background-color: rgba(255, 255, 255, 0.07);\n        }\n\n        .ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\n          position: absolute;\n          z-index: 3;\n        }\n\n        .ceDisabled {\n            border: 1px solid #c3c3c3;\n            color: #bebebe;\n        }\n\n        .ceError{\n            border: 1px solid #ffb500;\n            padding : 5px;\n        }\n\n       /*\n        * Gutter Icons\n\n              .oooooo.                    .       .                         ooooo\n             d8P\'  `Y8b                 .o8     .o8                         `888\'\n            888           oooo  oooo  .o888oo .o888oo  .ooooo.  oooo d8b     888   .ooooo.   .ooooo.  ooo. .oo.    .oooo.o\n            888           `888  `888    888     888   d88\' `88b `888""8P     888  d88\' `"Y8 d88\' `88b `888P"Y88b  d88(  "8\n            888     ooooo  888   888    888     888   888ooo888  888         888  888       888   888  888   888  `"Y88b.\n            `88.    .88\'   888   888    888 .   888 . 888    .o  888         888  888   .o8 888   888  888   888  o.  )88b\n             `Y8bood8P\'    `V88V"V8P\'   "888"   "888" `Y8bod8P\' d888b       o888o `Y8bod8P\' `Y8bod8P\' o888o o888o 8""888P\'\n\n\n        */\n        .ace_gutter-layer .ace_gutter-cell {\n            background-repeat: no-repeat;\n        }\n\n        .ace_gutter-layer .ace_gutter-cell.ace_error {\n            background-image: url(images/c9-no-repeat.png);\n            background-position: -462px 0;\n        }\n        .ace_dark .ace_gutter-layer .ace_gutter-cell.ace_error {\n            background-image: url(images/c9-no-repeat.png);\n            background-position: -462px -20px;\n        }\n\n        .ace_gutter-layer .ace_gutter-cell.ace_warning {\n            background-image: url(images/c9-no-repeat.png);\n            background-position: -462px -40px;\n        }\n        .ace_dark .ace_gutter-layer .ace_gutter-cell.ace_warning {\n            background-image: url(images/c9-no-repeat.png);\n            background-position: -462px -60px;\n        }\n\n        .ace_gutter-layer .ace_gutter-cell.ace_breakpoint {\n            background-image: url("icons/debugger/brkp_obj.png");\n            background-position: 4px center;\n        }\n        .ace_dark .ace_gutter-layer .ace_gutter-cell.ace_breakpoint {\n            background-image: url("icons/debugger/brkp_obj_dark.png");\n        }\n        .ace_gutter-layer .ace_breakpoint.disabled {\n            opacity: 0.65;\n        }\n\n        .ace_gutter-layer .ace_gutter-cell.ace_breakpoint.step {\n            background-image: url("icons/debugger/brkp_obj_current_line.png");\n            background-position: 4px center;\n        }\n        .ace_dark .ace_gutter-layer .ace_gutter-cell.ace_breakpoint.step {\n            background-image: url("icons/debugger/brkp_obj_current_line_dark.png");\n        }\n\n        .ace_gutter-layer .ace_gutter-cell.step {\n            background-image: url("icons/debugger/current_line.png");\n            background-position: 4px center;\n        }\n        .ace_dark .ace_gutter-layer .ace_gutter-cell.step {\n            background-image: url("icons/debugger/current_line_dark.png");\n        }\n\n        .ace_gutter-layer .ace_gutter-cell.stack {\n            background-image: url("icons/debugger/stack_co.png");\n            background-position: 4px center;\n        }\n\n        /*\n         * Themes\n\n             ooooooooooooo oooo\n             8\'   888   `8 `888\n                  888       888 .oo.    .ooooo.  ooo. .oo.  .oo.    .ooooo.   .oooo.o\n                  888       888P"Y88b  d88\' `88b `888P"Y88bP"Y88b  d88\' `88b d88(  "8\n                  888       888   888  888ooo888  888   888   888  888ooo888 `"Y88b.\n                  888       888   888  888    .o  888   888   888  888    .o o.  )88b\n                 o888o     o888o o888o `Y8bod8P\' o888o o888o o888o `Y8bod8P\' 8""888P\'\n\n         */\n\n        .ace-solarized-light .fm-window .fm-content,\n        .fm-window .fm-header .hcontent {\n            background-color: rgba(220, 220, 220, 0.73);\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main content="." corner="div[1]">\n            <div class="ce">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:codeeditor>\n\n<a:datagrid name="datagrid">\n    <a:style><![CDATA[\n        .datagrid{\n            position: relative;\n            border: 1px solid #c3c3c3;\n            background-color: white;\n            /*cursor: default;*/\n            overflow : hidden;\n\n            font-family: Tahoma, Arial;\n            font-size: 8pt;\n\n            padding: 19px 0 0 0;\n            color : #333;\n        }\n\n\n        .datagrid .headings{\n            position : relative;\n            top : 0;\n            left : 0;\n            height : 20px;\n            z-index : 10;\n            background-color : #e6e6e6;\n            margin : -20px 15px 0 0;\n            white-space : nowrap;\n        }\n\n        .noscrollbar .headings {\n    	    margin : -21px 1px 0 0;\n		}\n		.noscrollbar .datagrid{\n		    background : transparant;\n		}\n\n        .datagrid .headings div{\n            background : -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(229,229,229)),color-stop(1, rgb(248,248,248)));\n            background: -moz-linear-gradient(center bottom,rgb(229,229,229) 0%,rgb(248,248,248) 100%);\n            overflow : hidden;\n            text-overflow : ellipsis;\n            color: #333;\n            border-bottom: 1px solid #BFBFBF;\n        }\n\n        .docktab .datagrid .headings div {\n            background-image: linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 49%, rgb(244,246,248) 50%, rgb(250,252,254) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 49%, rgb(244,246,248) 50%, rgb(250,252,254) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 49%, rgb(244,246,248) 50%, rgb(250,252,254) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 49%, rgb(244,246,248) 50%, rgb(250,252,254) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 49%, rgb(244,246,248) 50%, rgb(250,252,254) 100%);\n            border-bottom: 1px solid #e1e5ea;\n        }\n\n        .datagrid .headings div u{\n            padding : 2px 4px 1px 3px;\n            display : block;\n            height : 15px;\n            text-decoration : none;\n            border-left : 1px solid white;\n            border-right : 1px solid #bfbfbf;\n            border-top : 1px solid white;\n        }\n\n        .docktab .datagrid .headings div u{\n            border-top: 1px solid #fafcfe;\n            border-left : 1px solid #fafbfc;\n            border-right : 1px solid #c8c8c8;\n        }\n\n        .datagrid .headings div.hover,\n        .datagrid .headings div.down,\n        .datagrid .headings div.drag{\n            background : -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(221,221,221)),color-stop(1, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(221,221,221) 0%,rgb(255,255,255) 100%);\n            color : #555;\n        }\n\n        .datagrid .headings div.drag{\n            border : 1px solid white;\n        }\n\n        .datagrid .headings div.down u,\n        .datagrid .headings div.hover u {\n            border-left: 1px solid transparent;\n        }\n\n        .datagrid .headings div.ascending u{\n            background-image : url(images/sort_asc.gif);\n            background-repeat : no-repeat;\n            background-position : right 7px;\n        }\n\n\n        .datagrid .headings div.descending u {\n            background-image : url(images/sort_desc.gif);\n            background-repeat : no-repeat;\n            background-position : right 6px;\n        }\n\n        .datagrid .records{\n            overflow-x: hidden;\n            overflow-y: scroll;\n            height : 100%;\n            padding : 18px 0 0 0;\n            position : relative;\n            top : -19px;\n            white-space : nowrap;\n            border-color:white;\n            border-style:solid;\n            border-width:1px 0 0;\n        }\n\n        .with-noise .records {\n            background: #E1E1E1 url(images/dg_noise.png) repeat 0 0;\n        }\n\n        .noscrollbar .records{\n            overflow-y : hidden;\n        }\n\n        .datagrid .records .row span{\n            height : 18px;\n            background : white no-repeat 0 50%;\n        }\n\n        .datagrid .records .row span u{\n            padding : 2px 3px 2px 4px;\n            height : 15px;\n            display : block;\n            text-decoration : none;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n            overflow : hidden;\n            cursor: default;\n            border-right:1px solid #D6D6D6;\n            border-left : 1px solid white;\n        }\n\n        .with-noise .records .row span {\n            border-left : 1px solid #D1D1D1;\n            margin-left : -1px;\n        }\n\n        .with-noise .records .row span {\n            background-image: url(images/dg_noise.png);\n            background-repeat: repeat;\n            border-top: #f0f0f0;\n            background-color: #e1e1e1;\n        }\n        .noscrollbar .datagrid .records .row span{\n            background-color : transparent;\n        }\n\n        .datagrid .records .row{\n            height : 18px;\n            padding-left : 0;\n        }\n\n        .datagrid .records .highlight span{\n\n        }\n\n        .datagrid .records .highlight{\n\n        }\n\n        .datagridFocus .records .indicate span{\n            padding : 0;\n            color : #333;\n        }\n\n        .datagridFocus .records .indicate span u{\n        }\n\n        .datagridFocus .records .row span{\n        }\n\n        .datagrid .row:nth-child(4n-1) span{\n            background: #f0f0f0;\n        }\n        .with-noise .row:nth-child(4n-1) span {\n            background: #d1d1d1;\n            background-image: url(images/dg_noise.png);\n        }\n\n        .datagrid .records .testhead{\n            height : 22px;\n        }\n\n        .datagrid .records .testhead span {\n            border-top : 4px solid #c3c3c3;\n        }\n\n        .datagrid .records .current_execution span {\n            background : #d4e0c6;\n        }\n\n        .datagrid .records .selected, .datagrid .records .selected span{\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #CECECE),color-stop(1, #DEDEDE));\n            background: -moz-linear-gradient(center bottom,#CECECE 0%,#DEDEDE 100%);\n        }\n        .datagridFocus .records .selected, .datagridFocus .records .selected span,\n        .datagridFocus .records .dragAppend, .datagridFocus .records .dragAppend span{\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(51,124,188)),color-stop(1, rgb(64,145,216)));\n            background: -moz-linear-gradient(center bottom,rgb(51,124,188) 0%,rgb(64,145,216) 100%);\n            color : white;\n        }\n        /*.datagrid .records .editing, .datagrid .records .editing span{\n            background-color : white;\n            color : #333;\n        }*/\n        .datagridFocus .records .selected span u {\n            border-left : 1px solid #8bc0ed;\n        }\n\n        .datagrid .move_pointer{\n            height : 100px;\n            width : 2px;\n            position : absolute;\n            top : 0;\n            margin : -10px 0 0 -4px;\n            width : 9px;\n            height : 38px;\n            background : url(images/column_picker.gif) no-repeat 0 0;\n            overflow : hidden;\n            z-index : 1000;\n        }\n\n        .datagrid .size_pointer{\n            border : 1px dotted gray;\n            border-width : 0 1px 0 1px;\n            height : 100%;\n            position : absolute;\n            top : 0px;\n            z-index : 1000;\n            cursor : e-resize;\n            cursor : ew-resize;\n        }\n\n        .datagrid .message{\n            font-weight : normal;\n            color : #333;\n            padding : 0 0 10px 50px;\n            font-size : 11px;\n            margin-top : 10px;\n            border-bottom : 1px solid #eee;\n        }\n\n        .datagrid .message label{\n            padding : 2px 0 0 4px;\n            height : 14px;\n            display : inline-block;\n            position : relative;\n            top : -3px;\n        }\n\n        /*.datagrid .message span{\n            background : url(icons/cog.png) no-repeat left bottom;\n            width : 16px;\n            height : 16px;\n            display : inline-block;\n        }*/\n\n        .datagrid .loading,\n        .datagrid .empty,\n        .datagrid .offline{\n            padding : 5px;\n            margin : 0;\n        }\n\n        .datagrid .loading span,\n        .datagrid .empty span,\n        .datagrid .offline span{\n            background : white;\n            display : inline;\n        }\n\n        .datagrid .empty {\n            position:absolute;\n            top:18px;\n            left:0;\n            right:0;\n            height:15px;\n            line-height:12px;\n        }\n\n        .datagrid .root .message{\n            padding : 0;\n            margin : 0;\n            border-bottom : 0;\n            height : 0;\n        }\n        .datagrid .root .message label{\n            top : 0;\n            padding : 0;\n            height : 0;\n            overflow : hidden;\n        }\n\n        .pointer{\n            display : none;\n        }\n\n        .dginfo{\n            display : none;\n            overflow : hidden;\n            white-space : normal;\n            padding : 5px;\n            background-color : #f3f3f3;\n            margin-top : 3px;\n            margin-left : 6px;\n            position : relative;\n            left : -3px;\n            margin-bottom : 3px;\n        }\n\n        .dginfo h3{\n            margin : 0 0 5px 0;\n        }\n\n        .dginfo p{\n            margin : 0;\n        }\n\n        .datagrid .records .stdel, .datagridFocus .records .stdel,\n        .datagrid .records .stdel span, .datagridFocus .records .stdel span{\n            color : #ccc;\n        }\n\n        .dragdg{\n            border : 2px solid black;\n            width : 10px;\n            height : 5px;\n        }\n\n        .datagrid .records .dragInsert{\n            height : 19px;\n            margin-top : -1px;\n        }\n\n        .datagrid .records .dragInsert span{\n            border-top : 1px solid gray;\n        }\n\n        .datagrid blockquote{\n            padding : 0;\n            margin : 0;\n            display: none;\n            height: 0;\n            overflow: hidden;\n            background: repeat-y 0px center;\n        }\n\n        .datagrid .records span.treecell u{\n            text-decoration : none;\n            display : inline-block;\n            width : 100%;\n            padding : 1px 2px 3px 2px;\n            border : 0;\n        }\n\n        .datagrid .records span.treecell u {\n            background-repeat: no-repeat;\n            padding-left:20px;\n        }\n\n        .datagrid.noicon .records span.treecell u {\n            padding-left: 0;\n        }\n\n        .datagrid .records .row .treecell .iconCell, .datagrid .records .row .iconCell  {\n            background-position : 1px 1px;\n            background-repeat   : no-repeat;\n            padding             : 2px 0 2px 22px;\n        }\n\n        .datagrid .treecell strong{\n            width : 9px;\n            height : 9px;\n            margin : 4px 4px 0 4px;\n            position : relative;\n            top : -5px;\n            display : inline-block;\n        }\n\n        .datagrid .plus>.treecell strong,\n        .datagrid .pluslast>.treecell strong{\n            background-image:url(images/plus.png);\n        }\n\n        .datagrid .min>.treecell strong,\n        .datagrid .minlast>.treecell strong{\n            background-image:url(images/min.png);\n        }\n\n        .datagrid .slider{\n            margin : 5px 5px 0 3px;\n        }\n\n        .datagrid .tb{\n            border : 0;\n            padding : 2px 0 4px 4px;\n            background : white;\n            border-left : 1px solid #eee;\n            border-bottom : 1px solid #eee;\n            height : 13px;\n            position : relative;\n            top : -6px;\n        }\n\n        .datagrid .treecell .tb{\n            padding : 1px 0 0 0;\n            top : 0;\n            border : 0;\n            border-bottom : 1px solid #eee;\n        }\n\n\n    ]]></a:style>\n    <a:style condition="apf.isIE &amp;&amp; !apf.isIE8"><![CDATA[\n        .datagrid .headings div{\n            float : left;\n        }\n\n        .datagrid .records .row span{\n            float : left;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isGecko &amp;&amp; apf.versionGecko &lt; 3"><![CDATA[\n        .datagrid .headings{\n            padding-top : 2px;\n            height : 15px;\n        }\n\n        .datagrid .headings div{\n            display : -moz-inline-box;\n            overflow : visible;\n            position : relative;\n        }\n\n        .datagrid .records{\n        }\n\n        .datagrid .records .row span{\n            display : -moz-inline-box;\n            overflow : visible;\n            position : relative;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isWin">\n    	.datagrid .headings{\n            margin : -20px 17px 0 0;\n        }\n    </a:style>\n    <a:style condition="apf.isWebkit"><![CDATA[\n        .datagrid {\n            position: relative;\n            border: 1px solid #c3c3c3;\n            background-color: white;\n            overflow : hidden;\n            font-family: Tahoma, Arial;\n            font-size: 8pt;\n            padding: 0;\n            color : #333;\n        }\n\n        .datagrid .headings {\n            position : absolute;\n            top : 20px;\n            left : 0;\n            right: -1px;\n            height : 20px;\n            z-index : 10;\n            background-color : #e6e6e6;\n            white-space : nowrap;\n        }\n\n        .datagrid .records {\n            overflow-x: hidden;\n            overflow-y: scroll;\n            position : absolute;\n            top : 0px;\n            bottom:0;\n            height:auto;\n            left:0;\n            right:0;\n            white-space : nowrap;\n            border-color:white;\n            border-style:solid;\n            border-width:1px 0 0;\n            display:block;\n            margin:0;\n        }\n\n        .noscrollbar .records{\n            overflow-y : hidden;\n        }\n\n        .datagrid div.records .treecell strong {\n			top : 0px;\n		}\n\n        .draggrid .treecell .iconCell,\n        .datagrid .records span.treecell .iconCell {\n            padding : 2px 0 1px 24px;\n        }\n    ]]></a:style>\n\n\n    <a:presentation>\n        <a:main head="div[1]" container="div[3]" pointer="div[2]" widthdiff="1" iframe2="true">\n            <div class="datagrid">\n                <div class="headings">\n\n                </div>\n                <div class="pointer"> </div>\n                <div class="records"> </div>\n            </div>\n        </a:main>\n\n        <a:headitem class="." caption="u/text()">\n            <div><u>-<span/></u></div>\n        </a:headitem>\n\n        <a:rowheaditem class="." caption="text()">\n            <span>-</span>\n        </a:rowheaditem>\n\n        <a:item class="." container="following-sibling::blockquote">\n            <div class="row"/>\n            <blockquote> </blockquote>\n        </a:item>\n\n        <a:dragindicator>\n            <div class="dragdg"> </div>\n        </a:dragindicator>\n\n        <a:cell caption="u"><span><u>-</u></span></a:cell>\n\n        <a:treecell caption="u" openclose="strong" editoroffset="41"><span class="treecell"><strong> </strong><u>-</u></span></a:treecell>\n\n        <a:container container=".">\n            <div class="dginfo">-</div>\n        </a:container>\n\n        <a:loading>\n            <div class="message"><span/><label>Calculating...</label></div>\n        </a:loading>\n\n        <a:empty caption=".">\n            <div class="empty"> </div>\n        </a:empty>\n    </a:presentation>\n</a:datagrid>\n<a:datagrid name="dgcheck">\n    <a:style><![CDATA[\n        .dgcheck {\n            position         : relative;\n            background-color : white;\n            cursor           : default;\n            font-family      : Tahoma, Arial;\n            font-size        : 12px;\n            padding          : 16px 0 0 0;\n            color            : #333;\n        }\n\n        .dgcheck .headings {\n            position         : relative;\n            top              : 0;\n            left             : 0;\n            height           : 15px;\n            z-index          : 10;\n            margin           : -16px 16px 0 0;\n            border           : 1px solid #d6d6d6;\n            border-left      : 0;\n            border-right     : 0;\n            white-space      : nowrap;\n\n            background    : #e6e6e6 no-repeat 0 50%;\n\n            background: -webkit-gradient(linear, left top, left bottom, from(#fefefe), color-stop(1, #ebebeb));\n            -webkit-background-origin: padding-box;\n            -webkit-background-clip: content-box;\n\n            background:-moz-linear-gradient(center bottom, #ebebeb 0%, #fefefe 100%) repeat scroll 0 0 transparent;\n        }\n\n        .noscrollbar .headings {\n            margin : -21px 1px 0 0;\n        }\n\n        .noscrollbar .dgcheck{\n            background : transparant;\n        }\n\n        .dgcheck .headings div {\n            display       : inline-block;\n            height        : 15px;\n            overflow      : hidden;\n            text-overflow : ellipsis;\n            color         : #202020;\n            text-shadow   : rgba(255, 255, 255, 1) 0px 1px 0px;\n\n            background    : #e6e6e6 no-repeat 0 50%;\n\n            background: -webkit-gradient(linear, left top, left bottom, from(#fefefe), color-stop(1, #ebebeb));\n            -webkit-background-origin: padding-box;\n            -webkit-background-clip: content-box;\n\n            background:-moz-linear-gradient(center bottom, #ebebeb 0%, #fefefe 100%) repeat scroll 0 0 transparent;\n        }\n\n        .dgcheck .headings div u {\n            padding         : 1px 4px 3px 5px;\n            display         : inline-block;\n            height          : 12px;\n            text-decoration : none;\n            border-left     : 1px solid #d6d6d6;\n            font-size       : 11px;\n            position        : relative;\n        }\n\n        .dgcheck .headings div.hover {\n\n        }\n\n        .dgcheck .headings div.down,\n        .dgcheck .headings div.drag {\n\n        }\n\n        .dgcheck .headings div.drag {\n\n        }\n\n        .dgcheck .headings div.ascending,\n        .dgcheck .headings div.descending {\n\n            background: -webkit-gradient(linear, left top, left bottom, from(#d2d2d2), color-stop(1, #e2e2e2));\n            -webkit-background-origin: padding-box;\n            -webkit-background-clip: content-box;\n\n            background:-moz-linear-gradient(center bottom, #d2d2d2 0%, #e2e2e2 100%) repeat scroll 0 0 transparent;\n        }\n\n        .dgcheck .records {\n            overflow-x   : hidden;\n            overflow-y   : scroll;\n            height       : 100%;\n            margin-top   : -17px;\n            padding      : 17px 25px 0 0;\n            position     : relative;\n            top          : 0;\n            white-space  : nowrap;\n        }\n\n        .noscrollbar .records {\n            overflow-y : hidden;\n        }\n\n        .dgcheck .records DIV:nth-of-type(2n) SPAN {\n            background-color : white;\n            border-bottom    : 1px solid white;\n        }\n\n        .dgcheck .records DIV:nth-of-type(2n+1) SPAN {\n            background-color : #ecf0f4;\n            border-bottom    : 1px solid #ecf0f4;\n        }\n\n        .dgcheck .records .row span {\n            display       : inline-block;\n            height        : 18px;\n            background    : white no-repeat 0 50%;\n        }\n\n        .dgcheck .records .row span u {\n            padding         : 2px 3px 2px 4px;\n            height          : 15px;\n            display         : inline-block;\n            text-decoration : none;\n            border-left     : 1px solid #d2d2d2;\n\n            text-overflow   : ellipsis;\n            white-space     : nowrap;\n            overflow        : hidden;\n        }\n\n        .dgcheck .records .row SPAN:nth-of-type(1) U {\n            border-left : 1px solid #f4f4f4;\n        }\n\n        .noscrollbar .dgcheck .records .row span{\n            background-color : transparent;\n        }\n\n        .dgcheck .records .row{\n            height       : 19px;\n            padding-left : 0;\n            border-top:0;\n        }\n\n        .dgcheck .records .highlight span{\n\n        }\n\n        .dgcheck .records .highlight{\n\n        }\n\n        .dgcheckFocus .records .indicate span{\n            padding : 0;\n            color : #333;\n        }\n\n        .dgcheckFocus .records .indicate span u{\n        }\n\n        .dgcheckFocus .records .row span{\n        }\n\n        .dgcheck .records DIV.selected,\n        .dgcheck .records DIV.selected span{\n            background-color : #6e7e8d;\n            color            : white;\n        }\n\n        .dgcheckFocus .records DIV.selected,\n        .dgcheckFocus .records DIV.selected span{\n            color            : white;\n            background-color : #6e7e8d;\n        }\n\n        .dgcheck .records DIV.selected span,\n        .dgcheckFocus .records DIV.selected span {\n            border-bottom : 1px solid #6e7e8d;\n        }\n\n        .dgcheck .records DIV.editing,\n        .dgcheck .records DIV.editing span{\n            background-color : white;\n            color : #333;\n        }\n\n        .dgcheck .move_pointer{\n            height : 100px;\n            width : 2px;\n            position : absolute;\n            top : 0;\n            margin : -10px 0 0 -4px;\n            width : 9px;\n            height : 38px;\n            background : url(images/column_picker.gif) no-repeat 0 0;\n            overflow : hidden;\n            z-index : 1000;\n        }\n\n        .dgcheck .size_pointer{\n            border : 1px dotted gray;\n            border-width : 0 1px 0 1px;\n            height : 100%;\n            position : absolute;\n            top : 0px;\n            z-index : 1000;\n            cursor : w-resize;\n        }\n\n        .dgcheck .message{\n            font-weight : normal;\n            color : #333;\n            padding : 0 0 10px 50px;\n            font-size : 11px;\n            margin-top : 10px;\n            border-bottom : 1px solid #eee;\n        }\n\n        .dgcheck .message label{\n            padding : 2px 0 0 4px;\n            height : 14px;\n            display : inline-block;\n            position : relative;\n            top : -3px;\n        }\n\n        /*.dgcheck .message span{\n            background : url(icons/cog.png) no-repeat left bottom;\n            width : 16px;\n            height : 16px;\n            display : inline-block;\n        }*/\n\n        .dgcheck .loading, .dgcheck .empty, .dgcheck .offline{\n            padding : 5px;\n            margin : 0;\n        }\n\n        .dgcheck .loading span, .dgcheck .empty span, .dgcheck .offline span{\n            background : white;\n            display : inline;\n        }\n\n        .pointer{\n            display : none;\n        }\n\n        .dginfo{\n            display : none;\n            overflow : hidden;\n            white-space : normal;\n            padding : 5px;\n            background-color : #f3f3f3;\n            margin-top : 3px;\n            margin-left : 6px;\n            position : relative;\n            left : -3px;\n            margin-bottom : 3px;\n        }\n\n        .dginfo h3{\n            margin : 0 0 5px 0;\n        }\n\n        .dginfo p{\n            margin : 0;\n        }\n\n        .dgcheck .records .stdel, .dgcheckFocus .records .stdel,\n        .dgcheck .records .stdel span, .dgcheckFocus .records .stdel span{\n            color : #ccc;\n        }\n\n        .dragdg{\n            border : 2px solid black;\n            width : 10px;\n            height : 5px;\n        }\n\n        .dgcheck .records .dragInsert{\n            border-top : 2px solid gray;\n            height : 17px;\n        }\n\n        .dgcheck .records .dragInsert span{\n            padding-top : 0px;\n            margin-bottom : 0;\n            background-position : 0 0;\n        }\n\n        .dgcheck blockquote{\n            padding : 0;\n            margin : 0;\n            display: none;\n            height: 0;\n            overflow: hidden;\n            background: repeat-y 0px center;\n        }\n\n        .dgcheck .records span.treecell u{\n            text-decoration : none;\n            display : inline-block;\n            padding : 1px 2px 3px 2px;\n            border : 0;\n        }\n\n        .dgcheck .treecell strong{\n            width : 9px;\n            height : 9px;\n            margin : 4px 4px 0 4px;\n            position : relative;\n            top : -5px;\n            display : inline-block;\n        }\n\n        .dgcheck .plus>.treecell strong,\n        .dgcheck .pluslast>.treecell strong{\n            background-image:url(images/plus.png);\n        }\n\n        .dgcheck .min>.treecell strong,\n        .dgcheck .minlast>.treecell strong{\n            background-image:url(images/min.png);\n        }\n\n        .dgcheck .slider{\n            margin : 5px 5px 0 3px;\n        }\n\n        .dgcheck .tb{\n            border : 0;\n            padding : 2px 0 4px 4px;\n            background : white;\n            border-left : 1px solid #eee;\n            border-bottom : 1px solid #eee;\n            height : 13px;\n            position : relative;\n            top : -6px;\n        }\n\n        .dgcheck .treecell .tb{\n            padding : 1px 0 0 0;\n            top : 0;\n            border : 0;\n            border-bottom : 1px solid #eee;\n        }\n\n        .dgcheck b {\n            overflow    : hidden;\n            margin      : 2px;\n            width       : 12px;\n            height      : 12px;\n            background  : url("images/tree_checkbox.png") no-repeat 0 -12px;\n            float       : left;\n        }\n\n        .dgcheck .treecell b {\n            margin-left : -31px;\n        }\n\n        .dgcheck .checkcell {\n            position    : relative;\n        }\n\n        .dgcheck .checkcell B {\n            float:none;\n            margin: 0;\n            position:absolute;\n            top:3px;\n            left:50%;\n            margin-left:-6px;\n        }\n\n        .dgcheck .records .row .checkcell U {\n            border-left:1px solid #f4f4f4;\n            width:0;\n            padding:2px 0;\n        }\n\n        .dgcheck .checked b {\n            background-position : 0 -24px;\n        }\n\n        .dgcheck .partial b {\n            background-position : 0 -48px;\n        }\n\n        .dgcheckDisabled .checked b {\n            background-position : 0 -0px;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isIE &amp;&amp; !apf.isIE8"><![CDATA[\n        .dgcheck .headings div{\n            float : left;\n        }\n\n        .dgcheck .records .row span{\n            float : left;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isGecko &amp;&amp; apf.versionGecko &lt; 3"><![CDATA[\n        .dgcheck .headings{\n            padding-top : 2px;\n            height : 15px;\n        }\n\n        .dgcheck .headings div{\n            display : -moz-inline-box;\n            overflow : visible;\n            position : relative;\n        }\n\n        .dgcheck .records{\n        }\n\n        .dgcheck .records .row span{\n            display : -moz-inline-box;\n            overflow : visible;\n            position : relative;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main head="div[1]" container="div[3]" pointer="div[2]" widthdiff="1" iframe2="true">\n            <div class="dgcheck">\n                <div class="headings">\n\n                </div>\n                <div class="pointer"> </div>\n                <div class="records"> </div>\n            </div>\n        </a:main>\n\n        <a:headitem class="." caption="u/text()">\n            <div><u>-<span/></u></div>\n        </a:headitem>\n\n        <a:rowheaditem class="." caption="text()">\n            <span>-</span>\n        </a:rowheaditem>\n\n        <a:item class="." container="following-sibling::blockquote">\n            <div class="row"/>\n            <blockquote> </blockquote>\n        </a:item>\n\n        <a:dragindicator>\n            <div class="dragdg"> </div>\n        </a:dragindicator>\n\n        <a:cell caption="u"><span><u>-</u></span></a:cell>\n\n        <a:checkcell caption="u" check="b"><span class="checkcell"><b> </b><u>-</u></span></a:checkcell>\n\n        <a:treecell caption="u" check="b" openclose="strong"><span class="treecell"><strong> </strong><b> </b><u>-</u></span></a:treecell>\n\n        <a:treecheckcell caption="u" check="b" openclose="strong"><span class="treecell"><strong> </strong><b> </b><u>-</u></span></a:treecheckcell>\n\n        <a:container container=".">\n            <div class="dginfo">-</div>\n        </a:container>\n\n        <a:loading>\n            <div class="message"><span/><label>Calculating...</label></div>\n        </a:loading>\n\n        <a:empty caption=".">\n            <div class="empty"> </div>\n        </a:empty>\n    </a:presentation>\n</a:datagrid>\n\n<a:divider name="divider">\n    <a:style><![CDATA[\n        .divider{\n            height : 0;\n            border: 1px solid white;\n            border-width : 1px 0 1px 0;\n            border-color : #c3c3c3 white white #c3c3c3;\n            line-height : 0;\n            cursor : default;\n        }\n\n        .hbox .divider, .vdivider{\n            width : 0;\n            margin : 0 10px 0 10px;\n            height: 17px;\n            border-width : 0 1px 0 1px;\n            height: 17px;\n        }\n\n        .divider span{\n            color : #333;\n            background : #f5f5f5;\n            padding : 0 2px 0 2px;\n            position : relative;\n            top : -1px;\n            display : none;\n            font-size : 8pt;\n        }\n\n        .table .divider, .vbox .divider, .hbox .divider{\n            margin : 0;\n        }\n\n        .modal-divider {\n            border-color : #b0b2b4 #E6E6E6 #E6E6E6 #b0b2b4;\n        }\n\n        .divider-status-bar {\n            border: none;\n            background: url(images/toolbar-divider.png) 0px 0px repeat-y;\n        }\n\n        .dark .divider-status-bar {\n            background: none;\n            border-left: 1px solid rgba(0,0,0,.3);\n            border-right: 1px solid rgba(255,255,255,.1);\n        }\n\n        .ace_dark .divider-status-bar {\n            background: url(images/toolbar-divider.png) -6px 0px repeat-y;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="." caption="span" minheight="2" minwidth="2">\n            <div class="divider"><span> </span> </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n<a:divider name="divider_console">\n    <a:style><![CDATA[\n        .divider_console {\n            width : 0;\n            height:23px;\n            border-left:1px solid black;\n            border-right:1px solid #333333;\n            cursor : default;\n        }\n\n        .tab_console .btncontainer > .divider_console {\n            height:23px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="." caption="." minheight="2" minwidth="0">\n            <div class="divider_console"> </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n\n<a:divider name="divider-debugpanel">\n    <a:style><![CDATA[\n        .divider-debugpanel {\n            position      : relative;\n            overflow      : hidden;\n            height        : 8px;\n            z-index       : 1;\n        }\n\n        .divider-debugpanel .container {\n            border-top    : 1px dotted #000000;\n            border-bottom : 1px dotted #39393b;\n        }\n\n        .divider-debugpanel .inner_container {\n            border-bottom : 1px dotted #000000;\n            border-top    : 1px dotted #39393b;\n        }\n\n        .divider-debugpanel:hover {\n            position      : relative;\n            overflow      : hidden;\n        }\n\n        .divider-debugpanel:hover .container {\n            border-top    : 1px dotted #737373;\n            border-bottom : 1px dotted #040404;\n        }\n\n        .divider-debugpanel:hover .inner_container {\n            border-bottom : 1px dotted #737373;\n            border-top    : 1px dotted #040404;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isGecko">\n        .divider-debugpanel div div {\n            position : relative;\n            left : -1px;\n        }\n    </a:style>\n\n    <a:presentation>\n        <a:main container="div/div" caption="div/div">\n            <div class="divider-debugpanel">\n                <div class="container">\n                    <div class="inner_container"> </div>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n    <a:divider name="c9-divider">\n    <a:style><![CDATA[\n        .c9-divider {\n            position   : relative;\n            overflow   : hidden;\n            width:0px;\n            height     : 23px;\n            border-left:1px solid #000000;\n            border-right:1px solid #404040;\n        }\n        .expandedpanel .c9-divider.runcommandsdivider {\n            display: none;\n        }\n\n        .expandedpanel .c9-divider,\n        .dockbar .c9-divider {\n            border-left:1px solid #1d1e1f;\n            border-right:1px solid #373737;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main>\n            <div class="c9-divider"> </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n<a:divider name="c9-divider-hor">\n    <a:style><![CDATA[\n        .c9-divider-hor {\n            position   : relative;\n            height     : 0px;\n            border-top:1px solid #000000;\n            border-bottom:1px solid #404040;\n        }\n\n        .c9-divider-hor span{\n            color : #606060;\n            text-shadow: rgba(0, 0, 0, 1) 0px 1px 0px;\n            background : #1d1d1d;\n            font-size: 7pt;\n            top: -8px;\n            position: relative;\n            left: 4px;\n            padding : 0 3px 0 3px;\n            display :none;\n        }\n\n        .c9-divider-horCaption span{\n            display : block;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main caption="span">\n            <div class="c9-divider-hor"><span> </span></div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n<a:divider name="c9-divider-double">\n    <a:style><![CDATA[\n        .c9-divider-double {\n            position   : relative;\n            overflow   : hidden;\n            width      : 2px;\n            height     : 23px;\n            border-left:1px solid #000000;\n            border-right:1px solid #404040;\n        }\n\n        .c9-divider-double DIV {\n            position:relative;\n            width:1px;\n            height:23px;\n            border-left:1px solid #404040;\n            border-right:1px solid #000000;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main>\n            <div class="c9-divider-double">\n                <div></div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n\n<a:dropdown name="black_dropdown">\n    <a:style><![CDATA[\n        .black_dropdown {\n            position : relative;\n            overflow : hidden;\n            height   : 21px;\n\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius         : 5px;\n            border                : 1px solid #1c1c1c;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n\n            background         : #383838;\n            background         : -webkit-gradient(linear, left top, left bottom, from(#383838), color-stop(1, #323232));\n            background         :-moz-linear-gradient(center bottom, #323232 0%, #383838 100%) repeat scroll 0 0 transparent;\n         }\n\n         .black_dropdown .label {\n            position:relative;\n            overflow:hidden;\n            height:17px;\n            padding:4px 0 0 6px;\n            margin:0 15px 0 0;\n            font-family:Arial;\n            font-size:12px;\n            color:#d6d6d6;\n            line-height:14px;\n            border-right:1px solid #1c1c1c;\n         }\n\n         .black_dropdown .button {\n            width:14px;\n            border-left:1px solid #4d4c4d;\n            height:21px;\n            position:absolute;\n            top:0;\n            right:0;\n            background:url(images/btn-arrow.png) no-repeat 4px 9px;\n         }\n\n         .black_dropdownDown {\n            background         : #2d2d2d;\n            background         : -webkit-gradient(linear, left top, left bottom, from(#272727), color-stop(1, #2d2d2d));\n            background         :-moz-linear-gradient(center bottom, #2d2d2d 0%, #272727 100%) repeat scroll 0 0 transparent;\n         }\n\n         .c9-optionList {\n            width               : 174px;\n            overflow            : hidden;\n            z-index             : 99999;\n            position            : absolute;\n            margin              : 0 0 0 0;\n            display             : none;\n            background-color    : #1c1c1c;\n            border              : 1px solid #00040A;\n            padding             : 0 3px 0;\n\n            -moz-box-shadow    : 0px 3px 15px 0px rgba(0, 0, 0, 0.65);\n            -webkit-box-shadow : 0px 3px 15px 0px rgba(0, 0, 0, 0.65);\n            box-shadow         : 0px 3px 15px 0px rgba(0, 0, 0, 0.65);\n\n            background: #494949;\n            margin-top: 2px;\n        }\n\n        .c9-optionList .c9-dd-item {\n            height:18px;\n            padding:3px 6px 0 6px;\n            position:relative;\n            overflow:hidden;\n            font-family   : Arial;\n            font-size     : 11px;\n            line-height   : 14px;\n            color         : white;\n            cursor:default;\n        }\n\n        .c9-optionList .c9-dd-item.hover {\n            background-color : #292929;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="div[1]/text()" button="." width-diff="-1" item-height="21" minheight="23" maxheight="23">\n            <div class="black_dropdown">\n                <div class="label">-</div>\n                <div class="button"> </div>\n            </div>\n        </a:main>\n        <a:container contents=".">\n            <div class="c9-optionList">\n            </div>\n        </a:container>\n        <a:item\n          class       = "."\n          caption     = "text()"\n          select      = "."\n          inherit     = "true">\n            <div class="c9-dd-item">-</div>\n        </a:item>\n        <a:empty caption=".">\n            <div class="empty">-</div>\n        </a:empty>\n    </a:presentation>\n</a:dropdown>\n\n<a:dropdown name="dropdown-dark-glossy">\n    <a:style><![CDATA[\n    /*\n     * Idle\n     */\n        .dropdown-dark-glossy {\n            background: #292929 url(images/dropdown-dark-glossy/background.png) repeat-x 50% 0;\n            border: 1px solid #010910;\n            border-radius: 3px;\n            box-shadow: 0 1px 0 0 rgba(255, 255, 255, .10) inset,\n                        0 0 0 1px rgba(236, 245, 255, .10) inset,\n                        0 1px 0 0 rgba(237,237,237,.1);\n            max-height: 100px !important;\n            height: 27px;\n            padding: 0 18px 0 0;\n            position: relative;\n        }\n        .dropdown-dark-glossy .label {\n            color: #C0DABE;\n            display: inline-block;\n            font-size: 12px;\n            line-height: 27px;\n            overflow: hidden;\n            padding: 0 0 0 8px;\n        }\n        .dropdown-dark-glossy .button {\n            background: url(images/dropdown-dark-glossy/button.png) no-repeat 50% 0;\n            display: inline-block;\n            height: 25px;\n            position: absolute;\n            right: 0;\n            top: 0;\n            width: 16px;\n        }\n        .dropdown-dark-glossy .button:before {\n            background: url(images/dropdown-dark-glossy/divider.png) no-repeat 50% 0;\n            content: "";\n            display: block;\n            height: 25px;\n            left: -2px;\n            position: absolute;\n            top: 0;\n            width: 2px;\n        }\n    /*\n     * Hover\n     */\n        .dropdown-dark-glossyOver,\n        .dropdown-dark-glossyOver .button,\n        .dropdown-dark-glossyOver .button:before {\n            background-position: 50% -30px;\n        }\n    /*\n     * Down\n     */\n        .dropdown-dark-glossyDown,\n        .dropdown-dark-glossyDown .button,\n        .dropdown-dark-glossyDown .button:before {\n            background-position: 50% -60px;\n        }\n        .dropdown-dark-glossyDown {\n            box-shadow: 0 0 5px 1px rgba(0, 0, 0, .6) inset,\n                        0 0 0 1px rgba(0, 0, 0, .2) inset,\n                        0 1px 0 0 rgba(237,237,237,.04);\n        }\n    /*\n     * Disabled\n     */\n        .dropdown-dark-glossyDisabled,\n        .dropdown-dark-glossyDisabled .button,\n        .dropdown-dark-glossyDisabled .button:before {\n            background-position: 50% -90px;\n        }\n        .dropdown-dark-glossyDisabled {\n            background-color: transparent;\n            border-color: rgba(0, 0, 0, .34);\n            box-shadow: 0 1px 0 0 rgba(255, 255, 255, .02) inset;\n        }\n        .dropdown-dark-glossyDisabled .label {\n            color: rgba(255,255,255,.2);\n        }\n\n    /**\n     * Options list\n     */\n        .dropdown-dark-glossy-options {\n            box-sizing: border-box;\n            display: none;\n            padding: 2px 16px 0 1px;\n        }\n        .dropdown-dark-glossy-options.upward {\n            margin-top: -12px;\n        }\n        .dropdown-dark-glossy-options .list {\n            background: #494949;\n            border: 1px solid #000208;\n            padding: 3px 0;\n        }\n        .dropdown-dark-glossy-options .list .c9-dd-item {\n            color: #f1f1f1;\n            cursor: default;\n            font-size: 11px;\n            font-family: Tahoma, Arial;\n            height: 13px;\n            line-height: 14px;\n            overflow: hidden;\n            padding: 3px 5px 5px;\n            text-overflow: ellipsis-word;\n            white-space: nowrap;\n        }\n    /**\n     * Options list - HOVER\n     */\n        .dropdown-dark-glossy-options .list .c9-dd-item.hover {\n            background-color: #262626;\n            color: #F5B53C;\n        }\n    /**\n     * Options list - SELECTED\n     */\n        .dropdown-dark-glossy-options .list .c9-dd-item.selected {\n            color: #F5B53C;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="div[1]/text()" button="." width-diff="-1">\n            <div class="dropdown-dark-glossy">\n                <div class="label">-</div>\n                <div class="button"> </div>\n            </div>\n        </a:main>\n        <a:container contents="div[1]">\n            <div class="dropdown-dark-glossy-options">\n                <div class="list"> </div>\n            </div>\n        </a:container>\n        <a:item\n          class       = "."\n          caption     = "text()"\n          select      = "."\n          inherit     = "true">\n            <div class="c9-dd-item">-</div>\n        </a:item>\n        <a:empty caption=".">\n            <div class="empty">-</div>\n        </a:empty>\n    </a:presentation>\n</a:dropdown>\n\n<a:dropdown name="light_dropdown">\n    <a:style><![CDATA[\n        .light_dropdown {\n            background-color: rgba(255,255,255,.65);\n            background-image: -webkit-linear-gradient(bottom, rgba(0,0,0,.08), transparent);\n            background-image:    -moz-linear-gradient(bottom, rgba(0,0,0,.08), transparent);\n            background-image:         linear-gradient(bottom, rgba(0,0,0,.08), transparent);\n            border: 1px solid rgba(128, 128, 128, .55);\n            border-radius: 5px;\n            box-shadow: 0 1px 0 0 rgba(255,255,255,.7), 0 1px 0 0 rgba(255,255,255,.5) inset;\n            height: 23px !important;\n            position: relative;\n        }\n        .light_dropdown .label {\n            color: #4d4d4d;\n            height: 23px;\n            line-height: 21px;\n            padding: 0 0 0 10px;\n            text-shadow: 0 1px 0 rgba(247,247,247,1);\n        }\n        .light_dropdown .button {\n            background: url(images/c9-no-repeat.png) no-repeat -80px -390px;\n            box-shadow: 1px 0 0 0 rgba(255,255,255,.6) inset, -1px 0 0 0 rgba(128,128,128,.55), 0 1px 0 0 #fff inset;\n            border-radius: 0 5px 5px 0;\n            height: 21px;\n            position: absolute;\n            right: 0px;\n            top: 0px;\n            width: 15px;\n        }\n        .light_dropdownOver {\n            background-color: rgba(229,229,229,.5);\n        }\n        .light_dropdownDown {\n            background-color: rgba(255,255,255,.1);\n            background-image: -webkit-linear-gradient(top, rgba(0,0,0,.11), transparent);\n            background-image:    -moz-linear-gradient(top, rgba(0,0,0,.11), transparent);\n            background-image:         linear-gradient(top, rgba(0,0,0,.11), transparent);\n            box-shadow: 0 1px 0 0 rgba(255,255,255,.7), 0 1px 3px 0 rgba(0,0,0,.22) inset;\n            border-color: rgba(128, 128, 128, .85);;\n        }\n        .light_dropdownDown .button {\n            box-shadow: 1px 0 0 0 rgba(255,255,255,.6) inset, -1px 0 0 0 rgba(128,128,128,.55);\n        }\n        .light_dropdownDisabled {\n            border-color: rgba(128, 128, 128, .32);\n            background-image: -webkit-linear-gradient(bottom, rgba(0,0,0,.02), transparent);\n            background-image:    -moz-linear-gradient(bottom, rgba(0,0,0,.02), transparent);\n            background-image:         linear-gradient(bottom, rgba(0,0,0,.02), transparent);\n            box-shadow: 0 1px 0 0 rgba(255,255,255,1) inset;\n        }\n        .light_dropdownDisabled .label {\n            color: #c5c5c5;\n        }\n        .light_dropdownDisabled .button {\n            background-position: -105px -390px;\n            box-shadow: 1px 0 0 0 rgba(255,255,255,.6) inset, -1px 0 0 0 rgba(128,128,128,.3), 0 1px 0 0 rgba(255,255,255,.6) inset;\n        }\n\n        .light_dropdown_options {\n            box-sizing: border-box;\n            display: none;\n            padding: 2px 14px 0 3px;\n        }\n        .light_dropdown_options.upward {\n            margin-top: -12px;\n        }\n        .light_dropdown_options .list {\n            background: #494949;\n            border: 1px solid #000208;\n            padding: 3px 0;\n        }\n        .light_dropdown_options .list .c9-dd-item {\n            color: #f1f1f1;\n            cursor: default;\n            font-size: 11px;\n            font-family: Tahoma, Arial;\n            height: 13px;\n            line-height: 14px;\n            overflow: hidden;\n            padding: 3px 5px 5px;\n            text-overflow: ellipsis-word;\n            white-space: nowrap;\n        }\n        .light_dropdown_options .list .c9-dd-item.hover {\n            background-color: #262626;\n            color: #F5B53C;\n        }\n        .light_dropdown_options .list .c9-dd-item.selected {\n            color: #F5B53C;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="div[1]/text()" button="." width-diff="-1" item-height="21" minheight="23" maxheight="23">\n            <div class="light_dropdown">\n                <div class="label">-</div>\n                <div class="button"> </div>\n            </div>\n        </a:main>\n        <a:container contents="div[1]">\n            <div class="light_dropdown_options">\n                <div class="list"> </div>\n            </div>\n        </a:container>\n        <a:item\n          class       = "."\n          caption     = "text()"\n          select      = "."\n          inherit     = "true">\n            <div class="c9-dd-item">-</div>\n        </a:item>\n        <a:empty caption=".">\n            <div class="empty">-</div>\n        </a:empty>\n    </a:presentation>\n</a:dropdown>\n<a:dropdown name="dropdown">\n    <a:style><![CDATA[\n        .dropdown{\n            position: relative;\n            background-color: #dedede;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(222,222,222)),color-stop(1, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(222,222,222) 0%,rgb(255,255,255) 100%);\n            -webkit-border-radius: 2px;\n            -moz-border-radius: 2px;\n            border-radius: 2px;\n            -webkit-box-shadow: 0px 1px 1px #9fa0a3;\n            -moz-box-shadow: 0px 1px 1px #9fa0a3;\n            box-shadow: 0px 1px 1px #9fa0a3;\n            border-top: 1px solid #dddddd;\n            border-bottom: 1px solid #fafafa;\n            border-left: 1px solid #fafafa;\n            border-right: 1px solid #fafafa;\n            height: 15px;\n            margin: 0;\n            padding : 2px 21px 2px 0;\n\n            color: #333;\n            font-family : Tahoma, Arial;\n            font-size : 11px;\n        }\n\n        .dropdownError {\n\n        }\n\n        .dropdownDisabled {\n            color: #bebebe;\n        }\n\n        .dropdownOver {\n\n        }\n\n        .dropdownDown {\n            position: relative;\n        }\n\n        .dropdown .dropdownArrow {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(222,222,222)),color-stop(1, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(222,222,222) 0%,rgb(255,255,255) 100%);\n            height:15px;\n            margin: 2px 0 4px;\n            position:absolute;\n            right:0;\n            top:0;\n            width:18px;\n\n            -webkit-border-top-right-radius: 2px;\n            -webkit-border-bottom-right-radius: 2px;\n            -moz-border-radius-topright: 2px;\n            -moz-border-radius-bottomright: 2px;\n            border-top-right-radius: 2px;\n            border-bottom-right-radius: 2px;\n        }\n\n        .dropdown .dropdownArrow span {\n            background: url("images/ddarrow.png") no-repeat center center;\n            display:block;\n            height:15px;\n            position:absolute;\n            width:18px;\n        }\n\n        .dropdown .dropdownArrow div {\n            border-left:1px solid #B9B9B9;\n            height:13px;\n            width: 1px;\n            background-color: #fff;\n            padding-bottom:2px;\n        }\n\n        .dropdown .dropdownlabel{\n            padding: 1px 1px 1px 5px;\n            cursor : default;\n            height: 13px;\n            margin : 0 0 0 2px;\n            overflow : hidden;\n            white-space : nowrap;\n            text-overflow : ellipsis;\n        }\n\n        .dropdownFocus .dropdownlabel {\n            border: 1px dotted #B8B8B8;\n            padding: 0 0 0 4px;\n        }\n\n        .dropdownError .dropdownArrow {\n\n        }\n\n        .dropdownInitial .dropdownArrow {\n        }\n\n        .dropdownFocus .dropdownArrow {\n            background: none;\n        }\n\n        .dropdownOver .dropdownArrow {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.48, rgb(207,207,207)),color-stop(0.53, rgb(230,230,230)),color-stop(1, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(207,207,207) 48%,rgb(230,230,230) 53%,rgb(255,255,255) 100%);\n        }\n\n        .dropdownDown .dropdownArrow {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.48, rgb(255,255,255)),color-stop(0.53, rgb(230,230,230)),color-stop(1, rgb(207,207,207)));\n            background: -moz-linear-gradient(center bottom,rgb(255,255,255) 48%,rgb(230,230,230) 53%,rgb(207,207,207) 100%);\n        }\n\n        .optionList{\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 120px;\n            margin-top : 2px;\n            -webkit-border-radius: 4px;\n            -moz-border-radius: 4px;\n            border-radius: 4px;\n            -webkit-box-shadow: 0 2px 8px #8A8A8A;\n            -moz-box-shadow: 0 2px 8px #8A8A8A;\n            box-shadow: 0 2px 8px #8A8A8A;\n            background: #ffffff;\n            z-index: 1000;\n            color: #333333;\n            font-family : Tahoma, Arial;\n            font-size : 11px;\n            display : none;\n            overflow : auto;\n        }\n\n        .optionList .dditem {\n            display: block;\n            height: 16px;\n            padding: 2px 3px 2px 20px;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            background-color: white;\n            color: #333333;\n            position: relative;\n            cursor: default;\n        }\n\n        .optionList .dditem:first-child{\n            -webkit-border-top-left-radius: 4px;\n            -webkit-border-top-right-radius: 4px;\n            -moz-border-radius-topleft: 4px;\n            -moz-border-radius-topright: 4px;\n            border-top-left-radius: 4px;\n            border-top-right-radius: 4px;\n        }\n\n        .optionList .dditem:last-child{\n            -webkit-border-bottom-right-radius: 4px;\n            -webkit-border-bottom-left-radius: 4px;\n            -moz-border-radius-bottomright: 4px;\n            -moz-border-radius-bottomleft: 4px;\n            border-bottom-right-radius: 4px;\n            border-bottom-left-radius: 4px;\n        }\n\n        .optionList .dditem.hover {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(51,124,188)),color-stop(1, rgb(64,145,216)));\n            background: -moz-linear-gradient(center bottom,rgb(51,124,188) 0%,rgb(64,145,216) 100%);\n            color : white;\n        }\n\n        .optionList .selected span{\n            background: url("images/dot_blue.png") no-repeat 0 0;\n            height: 8px;\n            left: 5px;\n            position:absolute;\n            top: 6px;\n            width: 9px;\n        }\n\n        .optionList .selected.hover span{\n            background-position: 0 -8px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="div[1]/text()" button="." width-diff="-1" item-height="20" minheight="20" maxheight="20">\n            <div class="dropdown">\n                <div class="dropdownlabel">-</div>\n                <div class="dropdownArrow">\n                    <span/>\n                    <div> </div>\n                </div>\n            </div>\n        </a:main>\n        <a:container contents=".">\n            <div class="optionList">\n            </div>\n        </a:container>\n        <a:item class="." caption="text()" select="." inherit="true">\n            <span class="dditem">\n                -<span/>\n            </span>\n        </a:item>\n        <a:empty caption=".">\n            <div class="empty">-</div>\n        </a:empty>\n    </a:presentation>\n</a:dropdown>\n\n<a:frame name="frame">\n    <a:alias>fieldset</a:alias>\n    <a:style><![CDATA[\n        .frame{\n\n            border: 1px solid #bbbbbb;\n            color: #333;\n            font-family: Tahoma, Arial;\n            font-size: 8pt;\n            position: relative;\n            cursor : default;\n            margin : 0;\n            -webkit-box-shadow: 0px 1px 0px #EDEDED;\n            -moz-box-shadow: 0px 1px 0px #EDEDED;\n            box-shadow: 0px 1px 0px #EDEDED, inset 0px 1px 0px 0px #ededed;\n            padding-bottom: 5px;\n            padding-left: 6px;\n            padding-right: 6px;\n        }\n        .frame .legend{\n            position: absolute;\n            background : #fafbfc;\n            left: 5px;\n            top: -8px;\n            padding: 0 2px 0 2px;\n            margin: 0px;*/\n            margin : 0 0 2px -7px;\n            cursor : default;\n            z-index : 10000;\n            position : relative;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isIE6">\n        .frame {\n    	    height: 1%;\n    	}\n    </a:style>\n    <a:style condition="!apf.isIE">\n    	.frame .legend{\n    	    margin : 5px 0 2px -3px;\n    	}\n    </a:style>\n    <a:style condition="apf.isWebkit">\n    	.frame .legend{\n    	    height:15px\n    	}\n    </a:style>\n    <a:style condition="apf.isIE &gt; 7">\n        .frame {\n            padding-top : 10px;\n        }\n        .frame .legend{\n    	    margin : -15px 0 2px -3px;\n    	}\n    </a:style>\n    <a:style condition="apf.isChrome"><![CDATA[\n        .frame {\n            padding-top:4px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="." caption="legend">\n            <fieldset class="frame">\n                <legend class="legend"> </legend>\n            </fieldset>\n        </a:main>\n    </a:presentation>\n</a:frame>\n\n<a:label name="black_label">\n    <a:style><![CDATA[\n        .black_label{\n            font-size: 8pt;\n            font-family: Tahoma, Arial;\n            overflow: hidden;\n            cursor: default;\n            color : #606060;\n            text-shadow: rgba(0, 0, 0, 1) 0px 1px 0px;\n            padding : 2px;\n            white-space : nowrap;\n        }\n\n        .black_labelDisabled{\n            color: #bebebe;\n        }\n\n        .run-panel-info {\n        	background: rgba(230, 230, 230, 0.8) url(images/c9-repeat-x.png) repeat-x;\n            background-position:  0 -954px;\n            border-right: 1px solid white;\n			padding: 10px 10px 4px 10px;\n        }\n        .run-panel-info .black_label {\n        	color: #919191;\n            text-shadow: 0 1px 0 white;\n        }\n        .run-panel-info .btextbox {\n            background: rgba(255,255,255,.8);\n            border: 1px solid rgba(128,128,128,.55);\n            box-shadow: 0 1px 0 0 rgba(0,0,0,.15) inset, 0 1px 0 0 rgba(255,255,255,.7);\n        }\n        .run-panel-info .btextbox input {\n            color: #4d4d4d;\n        }\n        .run-panel-info .btextboxDisabled {\n            background: rgba(255,255,255,.6);\n            border: 1px solid rgba(128,128,128,.32);\n            box-shadow: 0 1px 0 0 rgba(255,255,255,.7);\n        }\n        .run-panel-info .btextboxDisabled input {\n            color: #bbb;\n            text-shadow: 0 1px 0 white;\n        }\n\n        .run-panel-info .hbox {\n        	padding-bottom: 5px !important;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main caption="." for="@for" minheight="17">\n            <div class="black_label"> </div>\n        </a:main>\n    </a:presentation>\n</a:label>\n<a:label name="label">\n    <a:style><![CDATA[\n        .label{\n            font-size: 8pt;\n            font-family: Tahoma, Arial;\n            overflow: hidden;\n            cursor: default;\n            color : #333;\n            padding : 2px;\n            white-space : nowrap;\n        }\n\n        .labelDisabled{\n            color: #bebebe;\n        }\n\n        .tiny {\n            font-size : 9px;\n        }\n\n        .error .label{\n            background : url(images/alert.png) no-repeat 0 0;\n            min-height : 37px;\n            padding : 3px 0 0 45px;\n        }\n\n        .modal-label {\n            text-shadow: #f0f0f0 0px 1px 0px;\n            padding: 0px 2px 2px;\n            color: #303030;\n            font-size: 12px;\n        }\n\n        .menu-bk .label {\n            color: #F1F1F1;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main caption="." for="@for" minheight="17">\n            <div class="label"> </div>\n        </a:main>\n    </a:presentation>\n</a:label>\n<a:list name="lineselect">\n    <a:style><![CDATA[\n        .lineselect{\n\n        }\n\n        .searchresults {\n            position : relative;\n        }\n\n        .searchresults>div{\n            background : rgba(255,255,255,0.4);\n            color : #666;\n            padding : 2px 3px 4px 10px;\n        }\n        .treeOutline .item-fix label {\n            padding : 3px 3px 4px 14px;\n        }\n        .treeOutline .item-fix {\n            padding: 0\n        }\n        .treeOutline .item span {\n            left: 4px;\n            top: 9px;\n        }\n        .searchresults>div,\n        .treeOutline .item-fix{\n            background : rgba(255,255,255,0.4);\n            border-top : 1px solid rgba(255,255,255,0.8);\n            border-bottom : 1px solid rgba(0,0,0,0.1);\n            cursor : default;\n            white-space : nowrap;\n        }\n        .searchresults>div{\n            color : #666;\n        }\n        .searchresults>div:not(.selected):hover,\n        .treeOutline .item-fix:not(.selected):hover{\n            box-shadow : 0 0 0 1000em rgba(255,255,255,0.6) inset;\n        }\n        .dark .searchresults>div,\n        .dark .treeOutline .item-fix{\n            background : rgba(255,255,255,0.1);\n            border-top-color: rgba(255,255,255,0.05);\n            border-bottom-color : rgba(0,0,0,0.3);\n        }\n        .dark .searchresults>div:not(.selected):hover{\n            box-shadow : 0 0 0 1000em rgba(255,255,255,0.1) inset;\n        }\n        .searchresults>div>span,\n        .treeOutline .item-fix>span{\n            font-size : 14px;\n            display : block;\n            padding : 2px;\n        }\n        .searchresults .path {\n            font-size: 11px;\n        }\n        .searchresults>div.selected,\n        .treeOutline .item-fix.selected{\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(51,124,188)),color-stop(1, rgb(64,145,216)));\n            background: -moz-linear-gradient(center bottom,rgb(51,124,188) 0%,rgb(64,145,216) 100%);\n        }\n        .dark .searchresults>div.selected,\n        .dark .treeOutline .item-fix.selected{\n            background: none !important;\n            box-shadow: none !important;\n        }\n        .searchresults>div.selected:hover{\n            box-shadow : 0 0 0 1000em rgba(255,255,255,0.1) inset;\n        }\n        .dark .searchresults>div.selected:hover{\n            box-shadow : 0 0 0 1000em rgba(255,255,255,0.3) inset;\n        }\n        .searchresults>div.selected,\n        .searchresults>div.selected>span,\n        .treeOutline .item-fix.selected,\n        .treeOutline .item-fix.selected>span {\n            color : white !important;\n        }\n\n        .searchresults>div.selected>span,\n        .treeOutline .item-fix.selected>span{\n            color : #f1f1f1;\n        }\n        .searchresults>div.selected>span>strong,\n        .treeOutline .item-fix.selected>span>strong{\n            color : #fff;\n        }\n        .searchresults .message{\n            border : 0;\n            padding : 3px;\n            text-align : center;\n            background : transparent;\n        }\n\n        .searchresults span strong {\n            color: #76A913;\n        }\n\n        .searchresults > div.selected > span > strong,\n        .treeOutline .item-fix.selected > span > strong,\n        .searchresults .selected span strong {\n            color: #DCFFA0;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class=\'lineselect\'>\n            </div>\n        </a:main>\n        <a:item\n            class     = "."\n            container = "."\n            caption   = "."\n            select    = "."\n        >\n            <div> </div>\n        </a:item>\n        <a:empty caption=".">\n            <div class="message">-</div>\n        </a:empty>\n    </a:presentation>\n</a:list>\n\n<a:list name="list">\n    <a:style><![CDATA[\n        .list{\n            overflow: auto;\n            position: relative;\n            border: 1px solid #c3c3c3;\n            background-color: #fafbfc;\n            cursor: default;\n        }\n        .noscrollbar{\n            overflow: hidden;\n        }\n\n        .white{\n            background : white;\n        }\n\n        .list, .draglist{\n            font-family: Tahoma, Arial;\n            font-size: 8pt;\n        }\n\n        .list>DIV, .draglist{\n            padding: 0;\n            height: 18px;\n        }\n\n        .list>DIV>SPAN, .draglist SPAN{\n            padding: 0 0 0 20px;\n            background: no-repeat 1px center;\n            height: 16px;\n            float: left;\n        }\n\n        .list>DIV>SPAN>U, .draglist U{\n            text-decoration: none;\n            color: black;\n            cursor: default;\n            display: block;\n            padding: 2px 4px 2px 2px;\n            text-decoration: none;\n            white-space: nowrap;\n        }\n\n        .listFocus>.indicate>SPAN>U{\n            border: 1px dotted #BBB;/*#25a8e7;*/\n            color : black;\n            padding: 1px 3px 1px 1px;\n        }\n\n        .list>.selected>SPAN>U{\n            background-color: #f0f0f0;\n            color: black;\n        }\n        .listFocus>.selected>SPAN>U, .draglist U{\n            color: white;\n            background-color: #25a8e7;\n        }\n\n        .list #txt_rename{\n            border: 1px solid #bbb;\n            padding: 1px 15px 1px 1px;\n            font-family: Tahoma, Arial;\n            font-size: 8pt;\n            color: black;\n            word-break: keep-all;\n            overflow: visible;\n            margin-top : 0px;\n            cursor: text;\n            height: 13px;\n            display: block;\n            outline : none;\n        }\n\n        .list .empty, .list .offline, .list .loading{\n            text-align: center;\n            padding: 8px 0 0 5px;\n            color: #AAA;\n            font-weight : normal;\n        }\n\n        .list.emptyLeft .empty {\n            text-align: left;\n        }\n\n        .shortlist{\n            border : 0;\n            overflow-y : auto;\n            overflow-x : hidden;\n            max-height : 90px;\n            width : auto;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="list">\n            </div>\n        </a:main>\n        <a:item class="." caption="span/u" icon="span" select="span">\n            <div><span><u>-</u></span></div>\n        </a:item>\n        <a:dragindicator>\n            <div class="draglist"><span><u>-</u></span></div>\n        </a:dragindicator>\n        <a:loading>\n            <div class="loading">Loading...</div>\n        </a:loading>\n        <a:empty caption=".">\n            <div class="message">-</div>\n        </a:empty>\n    </a:presentation>\n</a:list>\n\n<a:list name="breakpoints">\n    <a:style><![CDATA[\n        .listBP{\n            overflow: hidden;\n            position: relative;\n            background-color: #fafbfc;\n            cursor: default;\n            padding    : 2px 2px 2px 2px;\n            color      : #333;\n        }\n\n        .listBP .bpItem{\n            padding    : 2px 2px 2px 22px;\n            position : relative;\n        }\n\n        .listBP .content{\n            cursor : pointer;\n            font-family : Arial, Tahoma;\n            font-size : 12px;\n            padding : 2px 0 0 0;\n        }\n\n        .listBP .content div{\n            font-family : Courier New;\n            padding : 2px 0 0 0;\n            font-size : 12px;\n            white-space : nowrap;\n            overflow : hidden;\n        }\n\n        .listBP .checkbox {\n            width      : 16px;\n            height     : 17px;\n            background : url("images/checkbox_grey.png") no-repeat 0 0;\n            display : block;\n            position : absolute;\n            left : 2px;\n            top : 3px;\n        }\n\n        .listBP .bpItem .checkbox:hover{\n            background-position : 0 -85px;\n        }\n\n        .listBP .bpItem .checkbox:active{\n            background-position : 0 -51px;\n        }\n\n        .listBP .checked .checkbox:active {\n            background-position : 0 -17px !important;\n        }\n\n        .listBP .checked .checkbox {\n            background-position : 0 -34px;\n        }\n\n        .listBP .checked .checkbox:hover{\n            background-position : 0 -102px;\n        }\n\n        .listBPDisabled .checkbox {\n            background-position : 0 -68px;\n        }\n\n        .listBPDisabled .bpItem {\n            color : #bebebe;\n        }\n\n        .listBP .bpItem:hover .btnclose {\n            width               : 14px;\n            height              : 14px;\n            position            : absolute;\n            right               : 2px;\n            top                 : 5px;\n            background-image    : url(images/close_tab_btn.png);\n            background-repeat   : no-repeat;\n            background-position : 0 0;\n        }\n\n        .listBP .bpItem:hover .btnclose {\n            display: block;\n        }\n\n        .listBP .bpItem .btnclose:hover {\n            background-position : -14px 0;\n        }\n\n        .listBP .bpItem .btnclose::active {\n            background-position : -28px 0;\n        }\n\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="listBP">\n            </div>\n        </a:main>\n        <a:item class="." caption="div" icon="div" select="." check="span">\n            <div class="bpItem">\n                <span class="checkbox"> </span>\n                <div class="content"> </div>\n                <strong class="btnclose"> </strong>\n            </div>\n        </a:item>\n        <a:empty caption=".">\n            <div class="message">-</div>\n        </a:empty>\n    </a:presentation>\n</a:list>\n\n<a:menu name="menu">\n    <a:style><![CDATA[\n        .menu {\n            margin: -1px 0 0 0;\n            padding: 3px 0 3px 0;\n            z-index: 10000;\n            position: absolute;\n            overflow:visible;\n\n            font-family   : Tahoma, Arial;\n            font-size     : 11px;\n            line-height   : 14px;\n            color         : #f1f1f1;\n            cursor:default;\n\n            display : none;\n            border:1px solid #00040a;\n\n            -moz-box-shadow    : 0px 3px 15px 0px rgba(0, 0, 0, 0.65);\n            -webkit-box-shadow : 0px 3px 15px 0px rgba(0, 0, 0, 0.65);\n            box-shadow         : 0px 3px 15px 0px rgba(0, 0, 0, 0.65);\n\n            background-color   : #494949;\n            text-shadow : 0px 1px 0px #2c2c2c;\n        }\n\n        .menu>div.menu_item{\n            padding: 3px 16px 5px 23px;\n            white-space: nowrap;\n            cursor : default;\n            z-index:1100000;\n        }\n        .menu>div.menu_item{\n            height: 13px;\n        }\n        .menu>div.menu_item.hover {\n            background-color : #262626;\n            color : #F5B53C;\n        }\n\n        .menu>div.menu_divider{\n            overflow: visible;\n            padding: 0;\n            font-size: 1px;\n\n            margin:2px 3px;\n            border-top:1px solid #353535;\n            border-bottom:1px solid #565656;\n        }\n\n        .menu>div.menu_divider{\n            height: 0;\n        }\n\n        .menu>div.menu_item>span{\n            right: 15px;\n            margin-top: 0px;\n            z-index: 10;\n            text-align: right;\n            padding-left: 15px;\n            float : right;\n        }\n\n        .menu>div.submenu>span{\n            background: url(images/submenu_arrow.gif) no-repeat right -15px;\n            width: 4px;\n            height: 7px;\n            display: block;\n            position: absolute;\n            right: 8px;\n            margin: 4px 0 0 0;\n            z-index: 10;\n        }\n\n        .menu>div.menu_item.hover>span{\n            background-position : right -15px;\n        }\n\n        .menu>div.menu_item.disabled{\n            color: gray;\n            text-shadow : none;\n        }\n\n        .menu>div.menu_item>u{\n            width: 16px;\n            height: 16px;\n            position: absolute;\n            left: 3px;\n            margin-top : -1px;\n        }\n\n        .menu>div.menu_item.selected>u{\n            background-image: url(images/radio.gif);\n            background-repeat: no-repeat;\n            background-position: 0 -16px;\n        }\n\n        .menu>div.menu_item.checked>u{\n            background-image: url(images/check.gif);\n            background-repeat: no-repeat;\n            background-position: 0 -16px;\n        }\n        .menu>div.menu_item.disabled>u{\n            opacity: 0.2;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main container="." overlay="strong">\n            <blockquote class=\'menu\'>\n\n            </blockquote>\n        </a:main>\n        <a:item caption="text()" icon="u" hotkey="span" inherit="true">\n            <div class="menu_item"><span> </span><u> </u>-</div>\n        </a:item>\n        <a:divider inherit="true">\n            <div class=\'menu_divider\'></div>\n        </a:divider>\n    </a:presentation>\n</a:menu>\n<a:menu name="menu-bk">\n    <a:style><![CDATA[\n        .menu-bk {\n            display  : none;\n\n            /* fallback (Older Opera) */\n            background: #272727;\n            /* Mozilla: */\n            background-image: -moz-linear-gradient(top, #2f2f2f, #202020);\n            /* Chrome, Safari:*/\n            background-image: -webkit-gradient(linear, left top, left bottom, from(#2f2f2f), to(#202020));\n            -moz-border-radius    : 9px;\n            -webkit-border-radius : 9px;\n            border-radius         : 9px;\n            -moz-box-shadow       : 0 1px 5px rgba(0,0,0,0.7), inset 0 1px 0px rgba(255,255,255,0.18);\n            -webkit-box-shadow    : 0 1px 5px rgba(0,0,0,0.7), inset 0 1px 0px rgba(255,255,255,0.21);\n            box-shadow            : 0 1px 5px rgba(0,0,0,0.7), inset 0 1px 0px rgba(255,255,255,0.18);\n            border: 1px solid #000000;\n\n            margin-left: 5px;\n\n\n            margin: -1px 0 0 0;\n            padding: 3px 0 3px 0;\n            z-index: 10000;\n            position: absolute;\n            overflow:visible;\n\n            font-family   : Tahoma, Arial;\n            font-size     : 11px;\n            line-height   : 14px;\n            color         : #f1f1f1;\n            cursor:default;\n        }\n\n        .menu-bk.share-url {\n            text-align: center;\n            background-image: linear-gradient(bottom, #191919 0%, #1D1D1D 50%, #232323 50%, #363636 100%);\n            background-image: -o-linear-gradient(bottom, #191919 0%, #1D1D1D 50%, #232323 50%, #363636 100%);\n            background-image: -moz-linear-gradient(bottom, #191919 0%, #1D1D1D 50%, #232323 50%, #363636 100%);\n            background-image: -webkit-linear-gradient(bottom, #191919 0%, #1D1D1D 50%, #232323 50%, #363636 100%);\n            background-image: -ms-linear-gradient(bottom, #191919 0%, #1D1D1D 50%, #232323 50%, #363636 100%);\n        }\n\n        .menu-bk.moveleft {\n            margin-left: 6px;\n        }\n\n        .menu-bk.upward {\n            margin-top: -10px;\n            margin-left: 6px;\n        }\n\n        .menu-bk.downward {\n            margin-top: 30px;\n        }\n\n        .menu-bk.share-url.upward {\n            margin-top: -12px !important;\n            margin-left: 5px !important;\n        }\n\n        .menu-bk.share-url.downward {\n            margin-top: 9px !important;\n            margin-left: 5px !important;\n        }\n\n        .menu-bk.moveright {\n            margin-left: -8px;\n        }\n\n        .menu-bk .arrow {\n            position : absolute;\n            width: 24px;\n            height: 14px;\n            top: -13px;\n            right: 9px;\n            z-index: 10001;\n            background: url(images/flyout_arrows.png) no-repeat -20px 0;\n        }\n        .menu-bk.moveright .arrow {\n            left: 9px;\n        }\n\n        .menu-bk.upward .arrow {\n            top: auto;\n            bottom: -14px;\n            width: 20px;\n            background-position: -22px -45px;\n        }\n\n        .menu-bk>div.menu_item{\n            padding: 3px 16px 5px 23px;\n            white-space: nowrap;\n            cursor : default;\n            z-index:1100000;\n            height: 13px;\n        }\n        .menu-bk>div:nth-child(2){\n            -webkit-border-top-left-radius: 7px;\n            -webkit-border-top-right-radius: 7px;\n            -moz-border-radius-topleft: 7px;\n            -moz-border-radius-topright: 7px;\n            border-top-left-radius: 7px;\n            border-top-right-radius: 7px;\n        }\n        .menu-bk>div:last-child {\n            -webkit-border-bottom-right-radius: 5px;\n            -webkit-border-bottom-left-radius: 5px;\n            -moz-border-radius-bottomright: 5px;\n            -moz-border-radius-bottomleft: 5px;\n            border-bottom-right-radius: 5px;\n            border-bottom-left-radius: 5px;\n        }\n        .menu-bk>div.menu_item.hover {\n            background-color : #393939;\n        }\n\n        .menu-bk>div.menu_divider{\n            overflow: visible;\n            padding: 0;\n            font-size: 1px;\n\n            margin:2px 3px;\n            border-top:1px solid #000000;\n            border-bottom:1px solid #313131;\n        }\n\n        .menu-bk>div.menu_divider{\n            height: 0;\n        }\n\n        .menu-bk>div.menu_item>span{\n            right: 15px;\n            margin-top: 0px;\n            z-index: 10;\n            text-align: right;\n            padding-left: 15px;\n            float : right;\n        }\n\n        .menu-bk>div.submenu>span{\n            background: url(images/submenu_arrow.gif) no-repeat right -15px;\n            width: 4px;\n            height: 7px;\n            display: block;\n            position: absolute;\n            right: 8px;\n            margin: 4px 0 0 0;\n            z-index: 10;\n        }\n\n        .menu-bk>div.menu_item.hover>span{\n            background-position : right -15px;\n        }\n\n        .menu-bk>div.menu_item.disabled{\n            color: gray;\n        }\n        .menu-bk>div.menu_item.disabled>span{\n        }\n\n        .menu-bk>div.menu_item>u{\n            width: 16px;\n            height: 16px;\n            position: absolute;\n            left: 3px;\n            margin-top : -1px;\n        }\n\n        .menu-bk>div.menu_item.selected>u{\n            background-image: url(images/radio.gif);\n            background-repeat: no-repeat;\n            background-position: 0 -16px;\n        }\n\n        .menu-bk>div.menu_item.checked>u{\n            background-image: url(images/check.gif);\n            background-repeat: no-repeat;\n            background-position: 0 -16px;\n        }\n\n        .menu-bk.c9-tooltip {\n            padding : 7px 10px 10px 12px;\n            line-height : 17px;\n            width : 250px;\n            color : #f1f1f1;\n        }\n\n        .menu-bk.c9-tooltip a, .menu-bk.c9-tooltip span{\n            color: #91c478;\n        }\n\n        .menu-bk.c9-tooltip .arrow{\n            left : 50%;\n            margin-left : -12px;\n        }\n\n        .menu-bk.share-url .arrow {\n            right: 10px;\n            left: auto;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="menu-bk">\n                <div class="arrow"> </div>\n            </div>\n        </a:main>\n        <a:item caption="text()" icon="u" hotkey="span" inherit="true">\n            <div class="menu_item"><span> </span><u> </u>-</div>\n        </a:item>\n        <a:divider inherit="true">\n            <div class=\'menu_divider\'></div>\n        </a:divider>\n    </a:presentation>\n</a:menu>\n<a:menu name="dockwindowblack">\n    <a:style><![CDATA[\n        .dockwindowblack {\n            position              : relative;\n            border                : 1px solid #000;\n            -moz-border-radius    : 8px;\n            -webkit-border-radius : 8px;\n            border-radius         : 8px;\n            background            : -webkit-gradient(linear,left bottom,left top,color-stop(0, #202020),color-stop(1, #2f2f2f));\n            background            : -moz-linear-gradient(center bottom,#202020 0%, #2f2f2f 100%);\n            padding               : 5px 4px 4px;\n\n            margin-top : -20px;\n            border : 1px solid #000;\n\n            -webkit-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            -moz-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n        }\n\n        .dockwindowblack .arrow {\n            background-image: url(images/black-panel_arrow.png);\n            background-repeat: no-repeat;\n            background-position: 0 0;\n            position: absolute;\n            top: 39px;\n            right: -22px;\n            width: 22px;\n            height: 22px;\n        }\n\n        .dockwindowblack.left .arrow {\n            background-position: 0 -22px;\n            right: auto;\n            left: -22px;\n        }\n\n        .dockwindowblack.noarrow .arrow {\n            display: none;\n        }\n\n        .dockwindowblack .noise_top {\n            background : url(images/glossy-header.png) 0 0;\n            height: 13px;\n            left: 0;\n            position: absolute;\n            right: 0;\n            top: 0;\n            -moz-border-radius    : 8px 8px 0px 0px;\n            -webkit-border-radius : 8px 8px 0px 0px;\n            border-radius         : 8px 8px 0px 0px;\n        }\n\n        .dockwindowblack .noise_bg {\n            background: url(images/noise_pattern_transparent.png) 0 0;\n            bottom: 0;\n            left: 0;\n            opacity: 0.1;\n            position: absolute;\n            right: 0;\n            top: 0;\n        }\n\n        .dockwindowblack .page {\n            overflow: hidden;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="dockwindowblack">\n                <div class="noise_bg"></div>\n                <div class="noise_top"></div>\n                <div class="arrow"></div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:menu>\n<a:menu name="dockwin_runbtns">\n    <a:style><![CDATA[\n        .dockwin_runbtns {\n            position              : relative;\n            padding               : 5px 4px;\n            margin-left : -42px;\n            margin-top : 6px;\n        }\n\n        .dockwin_runbtns .dockwin_runbtns-bg {\n            border-top : 1px solid #606166;\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius         : 5px;\n\n            background-image: linear-gradient(bottom, rgb(50,51,54) 0%, rgb(68,69,72) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(50,51,54) 0%, rgb(68,69,72) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(50,51,54) 0%, rgb(68,69,72) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(50,51,54) 0%, rgb(68,69,72) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(50,51,54) 0%, rgb(68,69,72) 100%);\n\n            background-image: -webkit-gradient(\n                linear,\n                left bottom,\n                left top,\n                color-stop(0, rgb(50,51,54)),\n                color-stop(1, rgb(68,69,72))\n            );\n\n            -webkit-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            -moz-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n\n            bottom: -2px;\n            position: absolute;\n            right: -39px;\n            top: 1px;\n            width: 184px;\n        }\n\n        .dockwin_runbtns .dockwin_runbtns-bg .dockwin_runbtns-icon {\n            background: url(images/play-button-active.png) no-repeat 0 0;\n            height: 19px;\n            position: absolute;\n            right: 10px;\n            top: 5px;\n            width: 11px;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isChrome"><![CDATA[\n        .dockwin_runbtns {\n            margin-top: 4px;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main container=".">\n            <div class="dockwin_runbtns">\n                <div class="dockwin_runbtns-bg" onmousedown="apf.findHost(this).hide()">\n                    <div class="dockwin_runbtns-icon"> </div>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:menu>\n\n<a:menu name="dockwindowbasic">\n    <a:style><![CDATA[\n        .dockwindowbasic{\n            position : relative;\n            background: #333;\n            border : 1px solid #333;\n            margin-left : -42px;\n            margin-top : 10px;\n            border-top : 3px solid #333;\n            -webkit-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            -moz-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n        }\n\n        .dockwindowbasic .page {\n            overflow: hidden;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="dockwindowbasic">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:menu>\n\n<a:modalwindow name="fm-window">\n        <a:style><![CDATA[\n            .fm-window {\n                position : relative;\n                overflow : hidden;\n                z-index  : 10000;\n                padding  : 30px 0 0 0;\n                border-right: 1px solid rgba(43,43,43,0.4);\n            }\n            .dark .fm-window {\n                border-right: 1px solid rgba(128,128,128,0.7);\n            }\n\n            .fm-window .fm-header {\n                position : relative;\n                overflow : hidden;\n                height   : 32px;\n                top      : -30px;\n            }\n\n            .fm-window .fm-header .hcontent {\n                background-color: rgba(220, 220, 220, 0.93);\n                background-image: url(images/c9-repeat-x.png),\n                                  url(images/c9-noise-light-10.png),\n                                  url(images/c9-noise-light-10.png),\n                                  url(images/c9-noise-light-10.png);\n                background-position: 0 -138px, 0 0;\n                background-repeat: repeat-x;\n                position      : relative;\n                overflow      : hidden;\n                height        : 26px;\n                padding       : 7px 0 0 7px;\n                font-family   : Arial;\n                font-size     : 11.3px;\n                line-height   : 14px;\n                color         : #595959;\n                text-shadow   : #fff 0px 1px 0px;\n                box-shadow 	  : -1px 0 0 0 rgba(255,255,255,.4) inset;\n                text-transform : uppercase;\n            }\n\n            .dark .fm-window .fm-header .hcontent{\n                background-position: 0 -1318px, 0 0;\n            }\n\n        .fm-window .fm-header {\n            position : relative;\n            overflow : hidden;\n            height   : 32px;\n            top      : -30px;\n        }\n\n        .fm-window .fm-header .hcontent {\n            background    : url(images/c9-repeat-x.png)  repeat-x 0 -138px;\n            position      : relative;\n            overflow      : hidden;\n            height        : 26px;\n            padding       : 7px 0 0 7px;\n            font-family   : Arial;\n            font-size     : 11.3px;\n            line-height   : 14px;\n            color         : #595959;\n            text-shadow   : #fff 0px 1px 0px;\n            box-shadow 	  : -1px 0 0 0 rgba(255,255,255,.8) inset;\n            text-transform : uppercase;\n        }\n\n            .fm-window .fm-content {\n                position:absolute;\n                overflow:visible;\n                left : 0;\n                top  : 32px;\n                right : 0;\n                bottom : 0;\n                box-shadow: 0 1px 0 0 rgba(255,255,255,0.4) inset,\n                            -1px 0 0 0 rgba(255,255,255,.9) inset;\n                background-color: rgba(220, 220, 220, 0.9);\n                background-image:   -webkit-linear-gradient(180deg, rgba(0,0,0,.03) 0, transparent 35px),\n                					url(images/c9-noise-light-10.png),\n                					url(images/c9-noise-light-10.png),\n                                url(images/c9-noise-light-10.png),\n                					url(images/c9-noise-light-10.png);\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main\n              collapsed-height = "30"\n              minheight        = "30"\n              minwidth         = "60"\n              container        = "div[2]"\n              drag             = "div[2]"\n              title            = "div[1]/div[1]/text()"\n              icon             = "div[1]/div[1]/div[1]"\n              buttons          = "div[1]/div[1]/div[2]">\n                <div class="fm-window">\n                    <div class="fm-header">\n                        <div class="hcontent">-<div class="icon"></div><div class="buttons"></div></div>\n                    </div>\n                    <div class="fm-content"> </div>\n                </div>\n            </a:main>\n            <a:button>\n                <div> </div>\n            </a:button>\n        </a:presentation>\n</a:modalwindow>\n<a:scrollbar name="sbios">\n    <a:style><![CDATA[\n        .sbios {\n            position            : relative;\n            width               : 6px;\n            overflow            : hidden;\n            padding             : 6px 3px 3px 0;\n        }\n\n        .sbios SPAN {\n            width               : 6px;\n            bottom              : 0;\n            height              : 3px;\n            position            : absolute;\n        }\n\n        .sbios .filler {\n            height              : 100%;\n            width               : 6px;\n            position            : absolute;\n            top                 : 0;\n            bottom              : 0;\n            z-index             : 1;\n        }\n\n        .deploy-sb.sbios .filler {\n            left: 2px;\n        }\n\n        .sbios .mainrail {\n            height              : 100%;\n            width               : 6px;\n            position            : relative;\n        }\n\n        .sbios .indicator {\n            height   : 6px;\n            display  : none;\n            position : absolute;\n            overflow : hidden;\n            width    : 7px;\n            margin   : 0 0 0 0;\n            min-height: 20px;\n            background: #616161;\n            opacity  : 0.8;\n            -webkit-border-radius: 3px;\n            -moz-border-radius: 3px;\n        }\n\n        .sbios .indicator .indi_left {\n            height              : 3px;\n            width               : 7px;\n            position            : absolute;\n            top                 : 0;\n            left                : 0;\n        }\n\n        .sbios .indicator .indi_middle {\n            position            : absolute;\n            top                 : 3px;\n            bottom              : 3px;\n            left                : 0;\n            width               : 7px;\n        }\n\n        .sbios .indicator .indi_right {\n            height              : 3px;\n            width               : 7px;\n            position            : absolute;\n            bottom              : 0;\n            left                : 0;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isWebkit">\n        .sbios{\n            display : -webkit-box;\n        }\n\n        .sbios span{\n            left : 0;\n        }\n\n        .sbios .mainrail {\n            height : auto;\n        }\n\n        .sbios .filler{\n            left : 0;\n            height : auto;\n            top : 0;\n            bottom : 0;\n        }\n    </a:style>\n\n    <a:presentation>\n        <a:main indicator="div/div">\n            <div class=\'sbios\'>\n                <div class="filler">\n                    <div class=\'indicator\'>\n                        <div class="indi_left"></div>\n                        <div class="indi_middle"></div>\n                        <div class="indi_right"></div>\n                    </div>\n                </div>\n                <div class="mainrail"></div>\n                <span> </span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:scrollbar>\n<a:modalwindow name="dockwin">\n    <a:alias>panel</a:alias>\n\n    <a:style><![CDATA[\n        .dockwin {\n            font-family : "Arial";\n            font-size   : 11px;\n            padding     : 19px 0 1px 0;\n            position    : relative;\n            overflow    : hidden;\n        }\n\n        .smallheader.dockwin {\n            padding-top: 12px;\n        }\n\n        .dockwinFocus {\n\n        }\n\n        .dockwin .docktitle {\n            background   : -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(51,124,188)),color-stop(0.93, rgb(64,145,216)),color-stop(1, rgb(55,120,176)));\n            background   : -moz-linear-gradient(center bottom,rgb(51,124,188) 0%,rgb(64,145,216) 93%,rgb(55,120,176) 100%);\n            height       : 17px;\n            color        : white;\n            position     : absolute;\n            margin       : 0;\n            padding      : 2px 0 0 7px;\n            top          : 0;\n            left         : 0;\n            right        : 0;\n            font-weight  : bold;\n            margin-top   : 0;\n            cursor       : default;\n            white-space  : nowrap;\n            overflow     : hidden;\n            text-shadow  : rgba(17, 92, 158, .71) 0px 1px 0px;\n            border-bottom : 1px solid #1d3a55;\n            border-radius : 4px 4px 0 0;\n            text-transform:uppercase;\n            -moz-border-radius: 4px 4px 0 0;\n            -webkit-border-top-right-radius: 4px;\n            -webkit-border-top-left-radius: 4px;\n        }\n\n        .smallheader.dockwin .docktitle {\n            height: 10px;\n        }\n\n        .nocorners .docktitle{\n            -moz-border-radius: 0 0 0 0;\n            -webkit-border-top-right-radius: 0;\n            -webkit-border-top-left-radius: 0;\n        }\n\n        .dockwin .dockcontent {\n            background    : #f5f5f5;\n            // overflow   : hidden;\n            position      : relative;\n            border-bottom : 1px solid #8C8C8C;\n            position      : absolute;\n            top           : 19px;\n            right         : 0;\n            left          : 0;\n            bottom        : 1px;\n        }\n\n        .smallheader.dockwin .dockcontent {\n            top: 12px;\n        }\n\n        .noborder .dockcontent {\n            border-width : 0;\n        }\n\n        .dockwinMin .dockcontent {\n            overflow : hidden;\n            position : relative;\n        }\n\n        .dockwin .docktitle blockquote {\n            margin     : 0;\n            width      : 49px;\n            position   : absolute;\n            padding    : 1px 1px 2px 0;\n            top        : 0;\n            right      : 0;\n        }\n\n        .dockwin .docktitle blockquote div {\n            width      : 10px;\n            height     : 6px;\n            float      : right;\n            margin-top : 5px;\n            padding-bottom:3px;\n            padding-left:3px;\n            padding-right:0px;\n            background : no-repeat 0 0;\n            background-color    : transparent;\n            cursor     : pointer;\n            _overflow  : hidden; /* IE6 bug fix */\n        }\n\n        .smallheader.dockwin .docktitle blockquote div {\n            margin-top: 1px;\n        }\n\n        .dockwin .docktitle blockquote div.hover {\n            background-position : 0 -9px;\n        }\n\n        .dockwin .docktitle blockquote div.down {\n            background-position : 0 -18px;\n        }\n\n        .dockwin .docktitle .max {\n            background-image : url(images/win_max.gif);\n        }\n\n        .dockwinMax .docktitle .max {\n            background-image : url(images/win_restore.gif);\n        }\n\n        .dockwin .docktitle .min {\n            background-image : url(images/win_min.gif);\n        }\n\n        .dockwinMin .docktitle .min {\n            background-image : url(images/win_restore.gif);\n        }\n\n        .dockwin .docktitle .close {\n            width            : 11px;\n            background-image : url(images/win_x.png);\n        }\n        .smallheader .docktitle .close {\n            margin-right : -3px;\n        }\n\n        .dockwin .docktitle span {\n            width   : 16px;\n            height  : 16px;\n            display : block;\n        }\n\n        body .whitebg .content {\n            background : white;\n        }\n\n        .north{cursor : url(images/cursor/n-point.cur);}\n        .west{cursor : url(images/cursor/w-point.cur);}\n        .east{cursor : url(images/cursor/e-point.cur);}\n        .south{cursor : url(images/cursor/s-point.cur);}\n        .same{cursor : not-allowed;}\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main collapsed-height="22" min-width="150" min-height="80" caption="div[1]/text()" container="div[2]" drag="div[1]" title="div[1]/text()" buttons="div[1]/blockquote">\n            <div class="dockwin">\n                <div class="docktitle">-\n                    <blockquote> </blockquote>\n                </div>\n                <div class="dockcontent"> </div>\n            </div>\n        </a:main>\n        <a:button>\n            <div> </div>\n        </a:button>\n        <a:cover>\n            <div class="cover"> </div>\n        </a:cover>\n    </a:presentation>\n</a:modalwindow>\n<a:modalwindow name="change_photo">\n    <a:alias>window</a:alias>\n    <a:style><![CDATA[\n        .winadv {\n            position : relative;\n            width    : 498px;\n            overflow : hidden;\n            padding  : 42px 11px 15px 11px;\n            z-index  : 100000;\n        }\n\n        .winadv .wn_cp_corner_tl,\n        .winadv .wn_cp_corner_tr,\n        .winadv .wn_cp_corner_bl,\n        .winadv .wn_cp_corner_br {\n            position          : absolute;\n            background-repeat : no-repeat;\n        }\n\n        .winadv .wn_cp_corner_tl {\n            width               : 15px;\n            height              : 42px;\n            top                 : 0;\n            left                : 0;\n            background-image    : url(images/sprite_boxes_hor.png);\n            background-position : 0 0;\n        }\n\n        .winadv .wn_cp_corner_tr {\n            width               : 15px;\n            height              : 42px;\n            top                 : 0;\n            right               : 0;\n            background-image    : url(images/sprite_boxes_hor.png);\n            background-position : 0 -42px;\n        }\n\n        .winadv .wn_cp_corner_bl {\n            width               : 15px;\n            height              : 15px;\n            bottom              : 0;\n            left                : 0;\n            background-image    : url(images/sprite_boxes_hor.png);\n            background-position : 0 -84px;\n        }\n\n        .winadv .wn_cp_corner_br {\n            width               : 15px;\n            height              : 15px;\n            bottom              : 0;\n            right               : 0;\n            background-image    : url(images/sprite_boxes_hor.png);\n            background-position : 0 -99px;\n        }\n\n        .winadv .wn_cp_border_t,\n        .winadv .wn_cp_border_l,\n        .winadv .wn_cp_border_r,\n        .winadv .wn_cp_border_b {\n            position : absolute;\n            overflow : hidden;\n        }\n\n        .winadv .wn_cp_border_t {\n            height            : 42px;\n            top               : 0;\n            left              : 15px;\n            right             : 15px;\n            background-repeat : repeat-x;\n            background-image  : url(images/sprite_boxes_hor.png);\n            background-position : 0 -114px;\n        }\n\n        .winadv .wn_cp_border_b {\n            height            : 15px;\n            bottom            : 0;\n            left              : 15px;\n            right             : 15px;\n            background-repeat : repeat-x;\n            background-image  : url(images/sprite_boxes_hor.png);\n            background-position : 0 -156px;\n        }\n\n        .winadv .wn_cp_border_l {\n            width             : 11px;\n            bottom            : 15px;\n            top               : 42px;\n            left              : 0;\n            background-repeat : repeat-y;\n            background-image  : url(images/sprite_boxes_ver.png);\n            background-position : 0 0;\n        }\n\n        .winadv .wn_cp_border_r {\n            width             : 11px;\n            bottom            : 15px;\n            top               : 42px;\n            right             : 0;\n            background-repeat : repeat-y;\n            background-image  : url(images/sprite_boxes_ver.png);\n            background-position : -11px 0;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_title {\n            font-size   : 15px;\n            color       : #747475;\n            font-weight : bold;\n            font-family : Arial;\n            text-shadow : rgba(255, 255, 255, 1) 0px 1px 0px;\n            height      : 28px;\n            padding     : 14px 0 0 6px;\n            position    : relative;\n            top         : 0;\n            left        : 0;\n            cursor      : default;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_buttons {\n            float : right;\n            margin : 11px 0 0 0;\n            position : relative;\n            z-index : 100;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_buttons div{\n            color: #bfbfbf;\n            font-size : 18px;\n            font-family : Arial;\n            margin : 3px;\n            cursor : pointer;\n            font-weight : bold;\n        }\n        .winadv .wn_cp_border_t .wn_cp_buttons div:hover{\n            color: #7d7d7d;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_buttons .close {\n            background: url(images/big_close.png) no-repeat 0 0;\n            width: 14px;\n            height: 15px;\n            margin-top: 6px;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_buttons .close.hover {\n            background-position: -15px 0;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_buttons .close.down {\n            background-position: -30px 0;\n        }\n\n        .winadv .wn_cp_content {\n            position            : relative;\n            width               : 100%;\n            height              : 100%;\n            background-image    : url(images/change_photo_win_backg.png);\n            background-position : 0 0;\n            background-repeat   : repeat-x;\n            background-color    : #eff1f4;\n            color               : #222222;\n            font-size           : 13px;\n            font-family         : Arial;\n        }\n\n        .winadv .wn_cp_content > H3 {\n            font-size   : 18px;\n            color       : #333333;\n            font-family : Arial;\n            font-weight : bold;\n            margin      : 0;\n            display:block;\n            position:relative;\n            overflow:hidden;\n        }\n\n        .winadv .wn_cp_content H3.wheader {\n            font-size   : 18px;\n            color       : #333333;\n            font-family : Arial;\n            font-weight : bold;\n            margin      : 0;\n            display:block;\n            position:relative;\n            overflow:hidden;\n        }\n\n        .winadv .wn_cp_content > H4 {\n            font-size   : 13px;\n            color       : #222222;\n            font-family : Arial;\n            font-weight : bold;\n            margin      : 0;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isChrome"><![CDATA[\n        .winadv .wn_cp_border_t .wn_cp_title {\n            height      : 25px;\n            padding     : 17px 0 0 6px;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_buttons {\n            margin : 13px 0 0 0;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main collapsed-height="26" minheight="50" minwidth="50" container="div[1]" drag="div[6]" title="div[6]/div[3]/text()" icon="div[6]/div[2]" buttons="div[6]/div[1]">\n            <div class="winadv">\n                <div class="wn_cp_content"/>\n                <div class="wn_cp_corner_tl"/>\n                <div class="wn_cp_corner_tr"/>\n                <div class="wn_cp_corner_bl"/>\n                <div class="wn_cp_corner_br"/>\n\n                <div class="wn_cp_border_t">\n                    <div class="wn_cp_buttons"/>\n                    <div class="wn_cp_icon"/>\n                    <div class="wn_cp_title">-</div>\n                </div>\n                <div class="wn_cp_border_b"/>\n                <div class="wn_cp_border_l"/>\n                <div class="wn_cp_border_r"/>\n            </div>\n        </a:main>\n        <a:button>\n            <div/>\n        </a:button>\n    </a:presentation>\n</a:modalwindow>\n\n<a:modalwindow name="bk-window">\n    <a:style><![CDATA[\n        .bk-window {\n            position : relative;\n            overflow : hidden;\n            z-index  : 10000;\n            padding  : 33px 0 0 0;\n\n            -moz-border-radius    : 6px 6px 6px 6px;\n            -webkit-border-radius : 6px 6px 6px 6px;\n            border-radius         : 6px 6px 6px 6px;\n\n            -webkit-box-shadow: 0 2px 10px 1px #000000;\n            -moz-box-shadow: 0 2px 10px 1px #000000;\n            box-shadow: 0 2px 10px 1px #000000;\n        }\n\n        .win-deploy-target.bk-window {\n            overflow: visible;\n        }\n\n        .bk-window.relative {\n            padding-top: 0;\n        }\n\n        .bk-window .bk-header {\n            position : relative;\n            overflow : hidden;\n            height   : 33px;\n            top      : -33px;\n            background    : url(images/bk-win-header.png)  repeat-x 0 0;\n            -moz-border-radius    : 6px 6px 0 0;\n            -webkit-border-radius : 6px 6px 0 0;\n            border-radius         : 6px 6px 0 0;\n        }\n\n        .bk-window.relative .bk-header {\n            top: 0;\n        }\n\n        .bk-window .bk-header .hcontent {\n\n            position      : relative;\n            height        : 26px;\n            margin       : 8px 14px 0;\n            font-family   : Arial;\n            font-size     : 14px;\n            line-height   : 16px;\n            font-weight   : bold;\n            color         : #ffffff;\n            cursor        : default;\n        }\n\n        .bk-window .bk-header .hcontent .buttons {\n            position: absolute;\n            right: -7px;\n            top: 1px;\n        }\n\n        .bk-window .bk-header .hcontent .buttons .close {\n            background: url(images/bk-close-btn.png)  no-repeat 0 0;\n            width: 13px;\n            height: 15px;\n        }\n\n        .bk-window .bk-header .hcontent .buttons .close.hover {\n            background-position: 0 -19px;\n        }\n        .bk-window .bk-header .hcontent .buttons .close.down {\n            background-position: 0 -39px;\n        }\n\n        .bk-window .bk-container {\n            position:absolute;\n            overflow:visible;\n            left : 0;\n            top  : 33px;\n            right : 0;\n            bottom : 0;\n            z-index: 1;\n        }\n\n        .bk-window.relative .bk-container {\n            top: 0;\n            position: relative;\n        }\n\n        .bk-window .bg-bk-content {\n            background:url(images/modalbg.png) repeat 0 0;\n            position: absolute;\n            top  : 33px;\n            bottom: 46px;\n            right: 0;\n            left: 0;\n            z-index: 0;\n        }\n\n        .bk-window.dark-bg .bg-bk-content {\n            background:url(images/modalbg-dark.png) repeat 0 0;\n        }\n\n        .bk-window.nofooter .bg-bk-content {\n            bottom: 0;\n        }\n\n        .bk-window .bk-win-footer {\n            background:url(images/bk-win-footer.png) repeat-x 0 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            height: 46px;\n            position: absolute;\n\n            -moz-border-radius    : 0 0 6px 6px;\n            -webkit-border-radius : 0 0 6px 6px;\n            border-radius         : 0 0 6px 6px;\n            z-index: 0;\n        }\n\n        .bk-window.nofooter .bk-win-footer {\n            display: none;\n        }\n\n        .bk-window-cover {\n            background:url(images/bg-overlay.png) repeat 0 0;\n            opacity: 1;\n        }\n\n        .bk-window-cover .header {\n            background: url(images/cover-heaeder.png) repeat-x 0 0;\n            height: 12px;\n            position: absolute;\n            top: 0;\n            right: 0;\n            left: 0;\n        }\n        .bk-window-cover .logo {\n            background: url(images/cover-logo.png) no-repeat 0 0;\n            width: 215px;\n            height: 44px;\n            position: absolute;\n            right: 20px;\n            top: 25px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          collapsed-height = "26"\n          minheight        = "50"\n          minwidth         = "50"\n          container        = "div[3]"\n          drag             = "div[1]/div[1]"\n          title            = "div[1]/div[1]/text()"\n          icon             = "div[1]/div[1]/div[1]"\n          buttons          = "div[1]/div[1]/div[2]">\n            <div class="bk-window">\n                <div class="bk-header">\n                    <div class="hcontent">\n                        -\n                        <div class="icon"></div>\n                        <div class="buttons"></div>\n                    </div>\n                </div>\n                <div class="bg-bk-content"></div>\n                <div class="bk-container">\n                    <div class="bk-win-footer"></div>\n                </div>\n            </div>\n        </a:main>\n        <a:button>\n            <div/>\n        </a:button>\n        <a:cover>\n            <div class="bk-window-cover" opacity="1">\n                <div class="header"> </div>\n                <div class="c9-mbar-round"> <a href="/dashboard.html" class="mainlogo" target="_blank" title="back to dashboard">Dashboard</a>\n                </div>\n            </div>\n        </a:cover>\n    </a:presentation>\n</a:modalwindow>\n<a:modalwindow name="bk-window2">\n    <a:presentation>\n        <a:main\n          collapsed-height = "26"\n          minheight        = "50"\n          minwidth         = "50"\n          container        = "div[3]"\n          drag             = "div[1]/div[1]"\n          title            = "div[1]/div[1]/text()"\n          icon             = "div[1]/div[1]/div[1]"\n          buttons          = "div[1]/div[1]/div[2]">\n            <div class="bk-window">\n                <div class="bk-header">\n                    <div class="hcontent">\n                        -\n                        <div class="icon"></div>\n                        <div class="buttons"></div>\n                    </div>\n                </div>\n                <div class="bg-bk-content"></div>\n                <div class="bk-container">\n                    <div class="bk-win-footer"></div>\n                </div>\n            </div>\n        </a:main>\n        <a:button>\n            <div/>\n        </a:button>\n    </a:presentation>\n</a:modalwindow>\n<a:modalwindow name="bk-win-noisebg">\n    <a:style><![CDATA[\n        .bk-win-noisebg {\n            position : relative;\n            overflow : hidden;\n            z-index  : 10000;\n\n            border : 1px solid #000;\n            -moz-border-radius : 8px;\n            -webkit-border-radius : 8px;\n            border-radius : 8px;\n            background : -webkit-gradient(linear,left bottom,left top,color-stop(0, #202020),color-stop(1, #2f2f2f));\n            background : -moz-linear-gradient(center bottom,#202020 0%, #2f2f2f 100%);\n            padding : 0 0 10px;\n\n            color: #ffffff;\n\n            margin-top : 10px;\n            border : 1px solid #000;\n\n            -webkit-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            -moz-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n        }\n\n        .bk-win-noisebg .noise_bg {\n            background: url(images/noise_pattern_transparent.png) 0 0;\n            bottom: 0;\n            left: 0;\n            opacity: 0.1;\n            position: absolute;\n            right: 0;\n            top: 0;\n        }\n\n        .bk-win-noisebg .bk-header {\n            position : relative;\n            overflow : hidden;\n            height   : 20px;\n            top      : 0;\n            padding-top: 5px;\n\n            -moz-border-radius    : 8px 8px 0 0;\n            -webkit-border-radius : 8px 8px 0 0;\n            border-radius         : 8px 8px 0 0;\n\n            -webkit-box-shadow: inset 0px 1px 0px 0px #424242;\n            -moz-box-shadow: inset 0px 1px 0px 0px #424242;\n            box-shadow: inset 0px 1px 0px 0px #424242;\n        }\n\n        .bk-win-noisebg .bk-header .hcontent {\n            position      : relative;\n            /*overflow      : hidden;*/\n            height        : 15px;\n            margin       : 5px 10px 0;\n            font-family   : Arial;\n            font-size     : 14px;\n            line-height   : 16px;\n            font-weight   : bold;\n            color         : #ffffff;\n            cursor        : default;\n        }\n\n        .bk-win-noisebg .bk-header .hcontent .buttons {\n            position: absolute;\n            right: -5px;\n            top: -5px;\n        }\n\n        .bk-win-noisebg .bk-header .hcontent .buttons .close {\n            background: url(images/bk-close-btn.png)  no-repeat 0 0;\n            width: 13px;\n            height: 15px;\n        }\n\n        .bk-win-noisebg .bk-header .hcontent .buttons .close.hover {\n            background-position: 0 -19px;\n        }\n        .bk-win-noisebg .bk-header .hcontent .buttons .close.down {\n            background-position: 0 -39px;\n        }\n\n        .bk-win-noisebg .bk-container {\n            position:relative;\n            overflow:visible;\n            left : 0;\n            top  : 0;\n            right : 0;\n            bottom : 0;\n            z-index: 1;\n        }\n\n        .bk-win-noisebg .bg-bk-content {\n            position: absolute;\n            top  : 30px;\n            bottom: 0;\n            right: 0;\n            left: 0;\n            z-index: 0;\n        }\n\n        .bk-win-noisebg .text-header {\n            font-size: 18px;\n        }\n\n        .bk-win-noisebg .text-content {\n            font-size: 13px;\n        }\n\n        .bk-win-noisebg .smile-icon {\n            width: 45px;\n            height: 46px;\n            background: url(images/smile-image.png) no-repeat 0 0;\n        }\n\n        .bk-window-cover {\n            background:url(images/bg-overlay.png) repeat 0 0;\n            opacity: 1;\n        }\n\n        .bk-window-cover .header {\n            background: url(images/cover-heaeder.png) repeat-x 0 0;\n            height: 12px;\n            position: absolute;\n            top: 0;\n            right: 0;\n            left: 0;\n        }\n        .bk-window-cover .logo {\n            background: url(images/cover-logo.png) no-repeat 0 0;\n            width: 215px;\n            height: 44px;\n            position: absolute;\n            right: 20px;\n            top: 25px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          collapsed-height = "26"\n          minheight        = "50"\n          minwidth         = "50"\n          container        = "div[2]"\n          drag             = "div[1]/div[1]"\n          title            = "div[1]/div[1]/text()"\n          icon             = "div[1]/div[1]/div[1]"\n          buttons          = "div[1]/div[1]/div[2]">\n            <div class="bk-win-noisebg">\n                <div class="bk-header">\n                    <div class="hcontent">\n                        -\n                        <div class="icon"></div>\n                        <div class="buttons"></div>\n                    </div>\n                </div>\n                <div class="bk-container"> </div>\n            </div>\n        </a:main>\n        <a:button>\n            <div/>\n        </a:button>\n    </a:presentation>\n</a:modalwindow>\n<a:pages name="pages">\n    <a:style><![CDATA[\n        .pages{\n            overflow : hidden;\n            position : relative;\n        }\n\n        .pages .page{\n            display: none;\n\n            position : absolute;\n            left : 0;\n            top : 0;\n            right : 0;\n            bottom : 0;\n        }\n\n        .pages .curpage{\n            display: block;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main pages=".">\n            <div class="pages">\n            </div>\n        </a:main>\n        <a:page container=".">\n            <div class="page"/>\n        </a:page>\n    </a:presentation>\n</a:pages>\n\n<a:radiobutton name="classic">\n    <a:style><![CDATA[\n        .rbclassic {\n            height   : 15px;\n            position : relative;\n            overflow : hidden;\n            color    : #333;\n            cursor   : default;\n            padding-left:14px;\n            margin-bottom:1px;\n        }\n\n        .rbclassic .radio {\n            width      : 12px;\n            height     : 12px;\n            position   : absolute;\n            top:1px;\n            left:0;\n            background : url("images/radio.png") no-repeat 0 -12px;\n        }\n\n        .rbclassic span {\n            font-family : Tahoma, Arial;\n            font-size   : 11px;\n            padding     : 0 2px 0px 2px;\n            height      : 15px;\n            margin      : 0;\n            overflow    : hidden;\n            position:relative;\n        }\n\n        .rbclassicFocus span {\n            border : 1px dotted #BBB;\n        }\n\n        .rbclassicDown .radio{\n            background-position: 0 -36px;\n        }\n\n        .rbclassicSelected .radio{\n            background-position: 0 -24px;\n        }\n\n        .rbclassicDisabled .radio{\n            background-position: 0 -0px;\n        }\n\n        .rbclassicDisabled span{\n            color: #bebebe;\n        }\n\n        .rbclassicError span{\n            background-color : #ffb500;\n            color: #fbfbfb;\n        }\n\n        .rbclassic br{\n            display: none;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span">\n            <div class="rbclassic">\n                <div class="radio"> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:radiobutton>\n<a:radiobutton name="radiobutton">\n    <a:style><![CDATA[\n        .rbcontainer {\n            border: 1px solid #8C8C8C;\n            color: #f5f5f5;\n            cursor: pointer;\n            font-family: "Arial";\n            font-size:11px;\n            position:relative;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n            text-shadow  : rgba(17, 92, 158, .71) 0px 1px 0px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(71,73,77)),color-stop(1, rgb(49,52,55)));\n            background: -moz-linear-gradient(center bottom,rgb(71,73,77) 0%,rgb(49,52,55) 100%);\n            text-align : center;\n            width : 91px;\n            height : 22px;\n            padding: 2px 0 2px 0;\n        }\n\n        .rbcontainerOver {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(105,107,109)),color-stop(1, rgb(92,93,96)));\n            background: -moz-linear-gradient(center bottom,rgb(105,107,109) 0%,rgb(92,93,96) 100%);\n        }\n\n        .rbcontainerSelected {\n            color:#000000;\n            text-shadow: none;\n            border-top : 0;\n            padding-top: 3px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(255,255,255)),color-stop(1, rgb(232,232,232)));\n            background: -moz-linear-gradient(center bottom,rgb(255,255,255) 0%,rgb(232,232,232) 100%);\n        }\n\n        .rbcontainerFocus {\n        }\n\n        .rbcontainerDisabled {\n            color: #bebebe;\n        }\n\n        .rbcontainerError {\n            background-color : #ffb500;\n            color: #fbfbfb;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="div">\n            <div class="rbcontainer">\n                <div>\n\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:radiobutton>\n\n<a:radiobutton name="radio_grey">\n    <a:style><![CDATA[\n        .rb_grey {\n            position : relative;\n            color    : #333;\n            cursor   : default;\n            padding: 2px 2px 2px 20px;\n            overflow: visible;\n        }\n\n        .rb_grey .radio {\n            width      : 16px;\n            height     : 17px;\n            position   : absolute;\n            background : url("images/radio-grey.png") no-repeat 0 0px;\n            overflow: hidden;\n            left: 2px;\n            top: 2px;\n        }\n\n        .rb_grey span {\n            top         : 1px;\n            overflow    : hidden;\n            position    : relative;\n            font-family: Tahoma, Arial;\n            font-size: 11px;\n            cursor: default;\n            padding: 1px 3px 2px 3px;\n            display: inline-block;\n            line-height: 13px;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            color: #333;\n        }\n\n        .rb_greyFocus span {\n\n        }\n\n        .rb_greyOver .radio{\n            background-position: 0 -119px;\n        }\n\n        .rb_greyDown .radio{\n            background-position: 0 -17px;\n        }\n\n        .rb_greySelected .radio{\n            background-position: 0 -34px;\n        }\n\n        .rb_greyOver.rb_greySelected .radio{\n            background-position: 0 -102px;\n        }\n\n        .rb_greyChecked.rb_greyDown .radio{\n            background-position: 0 -51px;\n        }\n\n        .rb_greyDisabled .radio{\n            background-position: 0 -68px;\n        }\n\n        .rb_greyDisabled.rb_greySelected .radio{\n            background-position: 0 -85px;\n        }\n\n        .rb_greyDisabled span{\n            color: #bebebe;\n        }\n\n        .rb_greyError span{\n            background-position: 0 -68px;\n            color: #fbfbfb;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span">\n            <div class="rb_grey">\n                <div class="radio"> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:radiobutton>\n\n<a:radiobutton name="radio_black">\n    <a:style><![CDATA[\n        .rb_black {\n            position : relative;\n            color    : #333;\n            cursor   : default;\n            padding: 2px 2px 2px 20px;\n            overflow: visible;\n        }\n\n        .rb_black .radio {\n            width      : 16px;\n            height     : 17px;\n            position   : absolute;\n            background : url("images/radio-black.png") no-repeat 0 0px;\n            overflow: hidden;\n            left: 2px;\n            top: 2px;\n        }\n\n        .rb_black span {\n            top         : 1px;\n            overflow    : hidden;\n            position    : relative;\n            font-family: Tahoma, Arial;\n            font-size: 11px;\n            cursor: default;\n            padding: 1px 3px 2px 3px;\n            display: inline-block;\n            line-height: 13px;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            color: #f1f1f1;\n        }\n\n        .rb_blackFocus span {\n        }\n\n        .rb_blackOver .radio{\n            background-position: 0 -119px;\n        }\n\n        .rb_blackDown .radio{\n            background-position: 0 -17px;\n        }\n\n        .rb_blackSelected .radio{\n            background-position: 0 -34px;\n        }\n\n        .rb_blackOver.rb_greySelected .radio{\n            background-position: 0 -102px;\n        }\n\n        .rb_blackChecked.rb_greyDown .radio{\n            background-position: 0 -51px;\n        }\n\n        .rb_blackDisabled .radio{\n            background-position: 0 -68px;\n        }\n\n        .rb_blackDisabled.rb_greySelected .radio{\n            background-position: 0 -85px;\n        }\n\n        .rb_blackDisabled span{\n            color: #bebebe;\n        }\n\n        .rb_blackError span{\n            background-position: 0 -68px;\n            color: #fbfbfb;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span">\n            <div class="rb_black">\n                <div class="radio"> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:radiobutton>\n\n<a:scrollbar name="scrollbar">\n    <a:style><![CDATA[\n        .scrollbar{\n            height: 200px;\n            position: absolute;\n            background: #D4D0C8 url(images/raster.gif);\n            width: 16px;\n            overflow: hidden;\n        }\n\n        .scrollbar .btnup, .scrollbar .btndown, .scrollbar .indicator{\n            font-family: MS Sans Serif;\n            font-size: 8pt;\n            width : 100%;\n            overflow: hidden;\n            text-align: center;\n            font-weight: bold;\n            cursor: default;\n            position : relative;\n            background-color: #D4D0C8;\n\n            -moz-border-top-colors: #D4D0C8 #FFFFFF;\n            -moz-border-left-colors: #D4D0C8 #FFFFFF;\n            -moz-border-bottom-colors: black gray;\n            -moz-border-right-colors: black gray;\n        }\n\n        .scrollbar img{\n            visibility : hidden;\n        }\n\n        .scrollbar .btnup div, .scrollbar .btndown div{\n            border: 2px outset;\n        }\n\n        body .scrollbar .btnupdown div, body .scrollbar .btndowndown div{\n            border: 1px solid gray;\n            padding: 1px 1px 1px 1px;\n        }\n\n        body .scrollbar .btnupdown span, body .scrollbar .btndowndown span{\n            margin : -1px 0 0 -3px;\n        }\n\n        .scrollbar .btndown span, .scrollbar .btnup span{\n            position : absolute;\n            left : 50%;\n            top : 50%;\n            width : 7px;\n            height : 4px;\n            margin : -2px 0 0 -4px;\n        }\n\n        .scrollbar .btnup span{\n            background: #D4D0C8 url(images/scrollup.gif) no-repeat;\n        }\n\n        .scrollbar .btndown{\n            position: absolute;\n            bottom: 0px;\n        }\n\n        .scrollbar .btndown span{\n            background: #D4D0C8 url(images/scrolldown.gif) no-repeat;\n        }\n\n        .scrollbar .indicator{\n            height: 6px;\n            display : none;\n            position: absolute;\n            overflow: hidden;\n            background-color: #D4D0C8;\n            width : 100%;\n            padding-bottom : 4px;\n        }\n        .scrollbar .indicator div{\n            border: 2px outset;\n            height : 100%;\n        }\n\n        .scrollbar .slidefast{\n            position: absolute;\n            overflow: hidden;\n            background-color: #353535;\n            height: 10px;\n            width: 100%;\n            display: none;\n            overflow: hidden;\n        }\n\n        .scrollbarDisabled .btnup span{\n            background: #D4D0C8 url(images/scrollupdisabled.gif) no-repeat;\n            width : 8px;\n            height : 5px;\n            margin : -3px 0 0 -4px;\n        }\n        .scrollbarDisabled .btndown span{\n            background: #D4D0C8 url(images/scrolldowndisabled.gif) no-repeat;\n            width : 8px;\n            height : 5px;\n            margin : -3px 0 0 -4px;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isIE &gt; 7"><![CDATA[\n        .scrollbar .btnup div, .scrollbar .btndown div, .scrollbar .indicator div{\n            border: 2px outset white;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main btnup="div[1]" indicator="div[2]" btndown="div[3]" slidefast="div[4]">\n            <div class="scrollbar">\n                <div class="btnup"><span> </span><div><img src="images/spacer.gif" width="100%"/></div></div>\n                <div class="indicator"> <div> </div> </div>\n                <div class="btndown"><span> </span><div><img src="images/spacer.gif" width="100%"/></div></div>\n                <div class="slidefast"> </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:scrollbar>\n<a:scrollbar name="console_scrollbar">\n    <a:style><![CDATA[\n        .console_scrollbar {\n            position            : relative;\n            width               : 17px;\n            overflow            : hidden;\n            padding             : 6px 0 3px 0;\n            background-repeat   : no-repeat;\n            background-image    : url(images/scrollbar/sprite_ver_scrollbar.png);\n            background-position : 0 0;\n        }\n\n        .console_scrollbar SPAN {\n            width               : 17px;\n            bottom              : 0;\n            height              : 3px;\n            position            : absolute;\n            background-repeat   : no-repeat;\n            background-image    : url(images/scrollbar/sprite_ver_scrollbar.png);\n            background-position : -34px 0;\n        }\n\n        .console_scrollbar .filler {\n            height              : 100%;\n            width               : 17px;\n            position            : absolute;\n            top                 : 0;\n            bottom              : 0;\n            z-index             : 1;\n        }\n        .console_scrollbar .mainrail {\n            height              : 100%;\n            width               : 17px;\n            position            : relative;\n            background-image    : url(images/scrollbar/sprite_ver_scrollbar.png);\n            background-position : -17px 0;\n        }\n\n        .console_scrollbarDisabled {\n\n        }\n\n        .console_scrollbarDisabled span {\n\n        }\n\n        .console_scrollbarDisabled .filler {\n\n        }\n\n        .console_scrollbar .indicator {\n            height   : 6px;\n            display  : none;\n            position : absolute;\n            overflow : hidden;\n            width    : 18px;\n            margin   : 0 0 0 0;\n            min-height: 20px;\n        }\n\n        .console_scrollbar .indicator .indi_left {\n            height              : 3px;\n            width               : 18px;\n            position            : absolute;\n            top                 : 0;\n            left                : 0;\n            background-image    : url(images/scrollbar/grabber.png);\n            background-repeat   : no-repeat;\n            background-position : 0 0;\n        }\n\n        .console_scrollbar .indicator .indi_middle {\n            background-image    : url(images/scrollbar/grabber.png);\n            background-repeat   : no-repeat;\n            background-position : 0px 50%;\n            position            : absolute;\n            top                 : 3px;\n            bottom              : 3px;\n            left                : 0;\n            width               : 18px;\n        }\n\n        .console_scrollbar .indicator .indi_right {\n            height              : 3px;\n            width               : 18px;\n            position            : absolute;\n            bottom              : 0;\n            left                : 0;\n            background-image    : url(images/scrollbar/grabber.png);\n            background-repeat   : no-repeat;\n            background-position : 0 bottom;\n        }\n\n        .console_scrollbarDown .indicator .indi_left {\n            background-position : -18px 0;\n        }\n\n        .console_scrollbarDown .indicator .indi_middle {\n            background-position : -18px 50%;\n        }\n\n        .console_scrollbarDown .indicator .indi_right {\n            background-position : -18px bottom;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isWebkit">\n        .console_scrollbar{\n            display : -webkit-box;\n        }\n\n        .console_scrollbar span{\n            left : 0;\n        }\n\n        .console_scrollbar .mainrail {\n            height : auto;\n        }\n\n        .console_scrollbar .filler{\n            left : 0;\n            height : auto;\n            top : 0;\n            bottom : 0;\n        }\n    </a:style>\n\n    <a:presentation>\n        <a:main indicator="div/div">\n            <div class="console_scrollbar">\n                <div class="filler">\n                    <div class="indicator">\n                        <div class="indi_left"/>\n                        <div class="indi_middle"/>\n                        <div class="indi_right"/>\n                    </div>\n                </div>\n                <div class="mainrail"/>\n                <span> </span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:scrollbar>\n\n<a:slider name="slider">\n    <a:alias>range</a:alias>\n    <a:alias>horizontal</a:alias>\n\n    <a:style><![CDATA[\n        .slider {\n            background: url("images/bar_right.png") no-repeat top right;\n            height: 8px;\n            position: relative;\n\n            font-family : Tahoma, Arial;\n            font-size : 9px;\n            text-align : center;\n        }\n\n        .sliderDisabled {\n            background-position: right -8px;\n        }\n\n        .slider .left{\n            background: url("images/bar_left.png") no-repeat top left;\n            height: 8px;\n            overflow: hidden;\n            margin-right : 4px;\n        }\n\n        .sliderDisabled .left{\n            background-position: left -8px;\n        }\n\n        .sliderDisabled .filledbar {\n            background-position: 0 -8px;\n        }\n\n        .slider .grabber {\n            background: url("images/slider.png") no-repeat top left;\n            width: 20px;\n            height: 8px;\n            overflow: hidden;\n            position: absolute;\n            z-index : 10;\n        }\n\n        .sliderDisabled .grabber {\n            background-position: left -8px;\n        }\n\n        .slider u{\n            position : absolute;\n            background : #c3c3c3;\n            overflow : hidden;\n            height : 4px;\n            margin : 2px 0 0 0;\n            display : block;\n            width : 1px;\n            margin-left : 10px;\n        }\n\n        .slider .balloon {\n            background : url(images/ballon_middle.png) no-repeat top right;\n            height     : 16px;\n            padding    : 4px 8px 3px 1px;\n            overflow   : visible;\n            margin     : -32px 0 0 2px;\n            position   : absolute;\n            z-index    : 12000;\n            display    : none;\n        }\n\n        .slider .balloon .balleft {\n            width      : 3px;\n            background : url(images/ballon_left.png) no-repeat 0 0;\n            height     : 23px;\n            position   : absolute;\n            left       : -3px;\n            top        : 0;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main slider="div[1]" container="." status="div[3]/text()" markers="div[2]" direction="horizontal" balloon="div[3]" minheight="8" maxheight="8">\n            <div class="slider">\n                <div class="grabber"> </div>\n                <div class="left"> </div>\n                <div class="balloon">-\n                    <div class="balleft"> </div>\n                </div>\n            </div>\n        </a:main>\n        <marker>\n            <u> </u>\n        </marker>\n    </a:presentation>\n</a:slider>\n\n<a:spinner name="spinner">\n    <a:style><![CDATA[\n        .spinner {\n            position  : relative;\n            height    : 19px;\n            margin    : 0;\n            padding   : 0;\n        }\n\n        .spinner .divfix {\n            display    : block;\n            position   : absolute;\n            text-align : right;\n            height     : 19px;\n            left       : 0;\n            right      : 19px;\n            margin     : 0;\n            z-index    : 9000;\n            padding    : 0;\n            border     : 0;\n        }\n\n        .fixMargin2 {\n             margin-bottom: 2px !important;\n         }\n\n         .fixMargin5 {\n             margin-bottom: 5px !important;\n         }\n\n        .spinner .divfix input {\n            outline             : none;\n            display             : block;\n            border-top          : 1px solid #b2b2b2;\n            border-left         : 1px solid #b2b2b2;\n            border-bottom       : 1px solid #b2b2b2;\n            border-right        : 0;\n            padding             : 1px 1px 2px 0;\n            position            : absolute;\n            text-align          : right;\n            left                : 0;\n            height              : 14px;\n            background-position : 0 0;\n            background-image    : url(images/spinner_body2.png);\n            color               : black;\n            font-family         : Tahoma, Arial;\n            font-size           : 11px;\n            width               : 100%;\n            margin              : 0;\n            z-index             : 10000;\n        }\n\n        .spinner .buttons {\n            display  : block;\n            width    : 18px;\n            height   : 19px;\n            position : absolute;\n            right    : 0;\n            z-index  : 11000;\n        }\n\n        .spinner .buttons .plus {\n            height              : 9px;\n            width               : 18px;\n            cursor              : default;\n            border-left         : 0;\n            border-right        : 1px solid #b2b2b2;\n            border-bottom       : 0;\n            border-top          : 1px solid #b2b2b2;\n            background-image    : url(images/spinner_plus.png);\n            background-position : 0 0;\n            margin              : 0;\n        }\n\n        .spinner .buttons .minus {\n            height              : 8px;\n            width               : 18px;\n            cursor              : default;\n            border-left         : 0;\n            border-right        : 1px solid #b2b2b2;\n            border-bottom       : 1px solid #b2b2b2;\n            border-top          : 0;\n            background-image    : url(images/spinner_minus.png);\n            background-position : 0 0;\n        }\n\n        .spinner .buttons .plusFocus {\n            background-position : 0 27px;\n            border-top          : 1px solid #327fbd;\n            border-right        : 1px solid #327fbd;\n        }\n\n        .spinner .buttons .minusFocus {\n            background-position : 0 24px;\n            border-bottom       : 1px solid #327fbd;\n            border-right        : 1px solid #327fbd;\n        }\n\n        .spinner .buttons .plusDown {\n            background-position : 0 9px;\n            border-top          : 1px solid #327fbd;\n            border-right        : 1px solid #327fbd;\n        }\n\n        .spinner .buttons .minusDown {\n            background-position : 0 8px;\n            border-bottom       : 1px solid #327fbd;\n            border-right        : 1px solid #327fbd;\n        }\n\n        .spinner .buttons .plusHover {\n            background-position : 0 18px;\n        }\n\n        .spinner .buttons .minusHover {\n            background-position : 0 16px;\n        }\n\n        .spinner .divfix .focus {\n            background-position : 0 17px;\n            border-top          : 1px solid #327fbd;\n            border-bottom       : 1px solid #327fbd;\n            border-left         : 1px solid #327fbd;\n            border-right        : 0;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isOpera"><![CDATA[\n        .spinner .divfix {\n            right : 20px;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main container="." input="div[2]/input" buttonplus="div/div[1]" buttonminus="div/div[2]" minwidth="35" minheight="19" maxheight="19">\n            <div class="spinner">\n                <div class="buttons">\n                    <div class="plus"> </div>\n                    <div class="minus"> </div>\n                </div>\n                <div class="divfix">\n                    <input type="text"/>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:spinner>\n\n<a:splitbutton name="splitbutton">\n    <a:style><![CDATA[\n        .c9-dropdown-btn {\n            height             : 21px;\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            -moz-user-select   : none;\n            -khtml-user-select : none;\n            user-select        : none;\n            line-height        : 17px;\n            border             : 1px solid transparent;\n            float              : left;\n        }\n\n        .c9-dropdown-btn.main {\n            border-width:1px 0 1px 1px;\n        }\n\n        .c9-dropdown-btn.arrow {\n            border-width:1px 1px 1px 0;\n        }\n\n        .c9-dropdown-btn .c9-icon {\n            width:19px;\n            height:19px;\n            position:absolute;\n            top:2px;\n            left:4px;\n            background-position: 0 0;\n            background-repeat:no-repeat;\n            display : none;\n        }\n        .c9-dropdown-btnIcon .c9-icon {\n            display : block;\n        }\n\n         .c9-dropdown-btn .c9-label {\n            position:relative;\n            overflow:hidden;\n            font-family:Arial;\n            font-size:12px;\n            color:#cecece;\n            line-height:14px;\n            height             : 14px;\n            padding:1px 5px 0 7px;\n            margin:3px 0 0 0;\n            border-right:1px solid #1c1c1c;\n         }\n         .c9-dropdown-btnIcon .c9-label {\n            padding:1px 5px 0 26px;\n         }\n\n         .c9-dropdown-btn .c9-arrow {\n            width:14px;\n            height:15px;\n            margin:3px 0 0 0;\n            position:relative;\n            border-left:1px solid #4d4d4d;\n            background:url(images/btn-arrow.png) no-repeat 4px 6px;\n         }\n\n         .c9-dropdown-btn.arrow .c9-icon,\n         .c9-dropdown-btn.arrow .c9-label,\n         .c9-dropdown-btn.main .c9-arrow {\n            display:none;\n         }\n\n         .c9-dropdown-btnOver {\n            border                : 1px solid #1c1c1c;\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius         : 5px;\n\n            background : #333333;\n            background : -webkit-gradient(linear, left top, left bottom, from(#393939), color-stop(1, #333333));\n            background : -moz-linear-gradient(center bottom, #333333 0%, #393939 100%) repeat scroll 0 0 transparent;\n\n            border:1px solid #1c1c1c;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n\n            float:left;\n        }\n\n        .c9-dropdown-btnOver.main {\n            -moz-border-radius    : 5px 0 0 5px;\n            -webkit-border-radius : 5px 0 0 5px;\n            border-radius         : 5px 0 0 5px;\n            border-right          : 0;\n        }\n\n        .c9-dropdown-btnOver.arrow,\n        .c9-dropdown-btnDown.main.arrow {\n            -moz-border-radius    : 0 5px 5px 0;\n            -webkit-border-radius : 0 5px 5px 0;\n            border-radius         : 0 5px 5px 0;\n            border-left:0;\n        }\n\n        .c9-dropdown-btnDown.main .c9-label,\n        .c9-dropdown-btnOver .c9-label {\n            height       : 17px;\n            padding      : 4px 5px 0 7px;\n            margin       : 0;\n        }\n        .c9-dropdown-btnIcon.c9-dropdown-btnDown .c9-label,\n        .c9-dropdown-btnIcon.c9-dropdown-btnOver .c9-label {\n            padding      : 4px 5px 0 26px;\n         }\n\n        .c9-dropdown-btnDown.main .c9-arrow,\n        .c9-dropdown-btnOver .c9-arrow {\n            width               : 14px;\n            height              : 21px;\n            margin              : 0;\n            background-position : 4px 9px;\n        }\n\n        .c9-dropdown-btnDown {\n            border                : 1px solid #1c1c1c;\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius         : 5px;\n\n            background : #333333;\n            background : -webkit-gradient(linear, left top, left bottom, from(#393939), color-stop(1, #333333));\n            background : -moz-linear-gradient(center bottom, #333333 0%, #393939 100%) repeat scroll 0 0 transparent;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.15);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.15);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.15);\n\n            float:left;\n        }\n\n        .c9-dropdown-btnDown.main {\n            -moz-border-radius    : 5px 0 0 5px;\n            -webkit-border-radius : 5px 0 0 5px;\n            border-radius         : 5px 0 0 5px;\n            border-right          : 0;\n\n            background : #333333;\n            background : -webkit-gradient(linear, left top, left bottom, from(#282828), color-stop(1, #2e2e2e));\n            background : -moz-linear-gradient(center bottom, #2e2e2e 0%, #282828 100%) repeat scroll 0 0 transparent;\n        }\n\n        .c9-dropdown-btnDown.main .c9-icon {\n            background-position: 0 -19px;\n        }\n\n        .c9-dropdown-btnDown.arrow {\n            -moz-border-radius    : 0 5px 5px 0;\n            -webkit-border-radius : 0 5px 5px 0;\n            border-radius         : 0 5px 5px 0;\n            border-left           : 0;\n\n            background : #333333;\n            background : -webkit-gradient(linear, left top, left bottom, from(#282828), color-stop(1, #1f1f1f));\n            background : -moz-linear-gradient(center bottom, #1f1f1f 0%, #282828 100%) repeat scroll 0 0 transparent;\n        }\n\n        .c9-dropdown-btnDisabled.main .c9-icon {\n            background-position: 0 -37px;\n        }\n\n         .c9-dropdown-btnDisabled .c9-label {\n            color:#18191a;\n            text-shadow   : rgba(62, 63, 64, 1) 0px 1px 0px;\n            border-right:0;\n            padding:1px 6px 0 7px;\n         }\n         .c9-dropdown-btnIcon.c9-dropdown-btnDisabled .c9-label {\n            padding:1px 6px 0 26px;\n         }\n\n         .c9-dropdown-btnDisabled .c9-arrow {\n            width:15px;\n            height:15px;\n            margin:3px 0 0 0;\n            border-left:0;\n            background:url(images/btn-arrow2.png) no-repeat 0 6px;\n         }\n\n\n        .btnRun .main,\n        .btnRun .main:after,\n        .btnRun .arrow{\n            background: url(images/c9-no-repeat.png) no-repeat;\n            border: 0 none;\n            border-radius: 0;\n            box-shadow: none;\n            height: 23px;\n        }\n        .btnRun .main {\n            background-position: 0px -434px;\n            margin-right: 3px;\n            overflow: visible;\n        }\n        .btnRun .main.c9-dropdown-btnOver {\n            background-position: 0px -457px;\n        }\n        .btnRun .main:after {\n            background-position: -397px -424px;\n            content: "";\n            display: block;\n            left: 100%;\n            position: absolute;\n            top: 0;\n            width: 3px;\n        }\n        .btnRun .main .c9-label {\n            border-right: 0 none;\n            padding-left: 23px !important;\n        }\n        .btnRun .main .c9-icon {\n            left: 3px;\n            top: 2px;\n        }\n        .btnRun .main.c9-dropdown-btnOver:after {\n            background-position: -397px -457px;\n        }\n        .btnRun .c9-dropdown-btnDown.main {\n            background-position: 0px -490px;\n        }\n        .btnRun .c9-dropdown-btnDown.main:after {\n            background-position: -397px -490px;\n        }\n\n        .btnRun .arrow {\n            background-position: -400px -424px;\n            width: 16px;\n        }\n        .btnRun .c9-dropdown-btnOver.arrow {\n            background-position: -400px -457px;\n        }\n        .btnRun .c9-dropdown-btnDown.arrow {\n            background-position: -400px -490px;\n        }\n        .btnRun .arrow .c9-arrow {\n            display: none;\n        }\n\n        .testpanel .fm-content .c9-header-plus {\n            top: -31px;\n            right: 32px;\n        }\n\n        .testpanel .fm-content .panel-settings {\n            overflow: visible;\n        }\n        .testpanel .fm-content .panel-settings:before {\n            background: url(images/c9-no-repeat.png) no-repeat -100px -293px;\n            content: "";\n            display: block;\n            height: 26px;\n            left: -2px;\n            position: absolute;\n            top: 0;\n            width: 2px;\n        }\n\n        .testpanel .fm-content .testPanelControls {\n            right: 4px;\n            position: relative;\n            top: 1px;\n        }\n        .testPanelControls .c9-toolbarbutton-light,\n        .testPanelControls .light-dropdown {\n            margin-right: 10px !important;\n        }\n        .light-dropdown .c9-dropdown-btn {\n            height: 19px;\n        }\n        .light-dropdown .c9-dropdown-btn.main {\n            border-radius: 2px 0 0 2px;\n        }\n        .light-dropdown .c9-dropdown-btn .c9-label {\n            border-right-color: rgba(76,76,76,.3);\n            color: #4D4D4D;\n            height: 19px !important;\n            line-height: 21px;\n            margin-top: 0 !important;\n            padding: 0 5px !important;\n            text-shadow: 0 1px 0 #FFFFFF;\n        }\n        .light-dropdown .c9-dropdown-btn.arrow {\n            border-radius: 0 2px 2px 0;\n        }\n        .light-dropdown .c9-dropdown-btn .c9-arrow {\n            background-position: 4px 8px;\n            border-left-color: rgba(255,255,255,.75);\n            margin: 0;\n            height: 21px;\n        }\n\n        .light-dropdown .c9-dropdown-btnOver,\n        .light-dropdown .c9-dropdown-btnDown {\n            background-color: rgba(255,255,255,.65);\n            background-image: -webkit-linear-gradient(bottom, rgba(0,0,0,.08), transparent);\n            background-image:    -moz-linear-gradient(bottom, rgba(0,0,0,.08), transparent);\n            background-image:         linear-gradient(bottom, rgba(0,0,0,.08), transparent);\n            border-color: rgba(128,128,128,.55);\n            box-shadow: 0 1px 0 0 rgba(255,255,255,.7) inset;\n        }\n        .light-dropdown .c9-dropdown-btnDown.primary {\n            background-color: rgba(233,233,233,.555);\n            box-shadow: 0 1px 0 0 rgba(0,0,0,.15) inset;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isSafari || apf.isChrome"><![CDATA[\n        .c9-dropdown-btn .c9-label {\n            padding : 1px 3px 0 7px;\n        }\n        .c9-dropdown-btnIcon .c9-label {\n            padding : 1px 3px 0 26px;\n        }\n\n        .c9-dropdown-btnOver .c9-label,\n        .c9-dropdown-btnDown.main .c9-label {\n            height  : 17px;\n            padding : 4px 3px 0 7px;\n            margin  : 0;\n        }\n\n        .c9-dropdown-btnIcon.c9-dropdown-btnOver .c9-label,\n        .c9-dropdown-btnIcon.c9-dropdown-btnDown.main .c9-label {\n            padding : 4px 3px 0 26px;\n        }\n\n        .c9-dropdown-btnDisabled .c9-label {\n            padding:1px 4px 0 7px;\n        }\n        .c9-dropdown-btnIcon.c9-dropdown-btnDisabled .c9-label {\n            padding:1px 4px 0 26px;\n         }\n\n        .c9-dropdown-btnDisabled .c9-arrow {\n            background-position : 0 6px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main caption="div[2]/text()" background="div/span" icon="div[1]">\n            <div class="c9-dropdown-btn">\n                <div class="c9-icon"></div>\n                <div class="c9-label">-</div>\n                <div class="c9-arrow"></div>\n             </div>\n        </a:main>\n    </a:presentation>\n</a:splitbutton>\n\n<a:splitter name="splitter">\n    <a:style><![CDATA[\n        .splitter {\n            position : relative;\n            z-index  : 8000;\n        }\n\n        .topsplitter .splitter{\n            z-index : 100000;\n        }\n\n        .splitterFocus {\n        }\n\n        .w-resize {\n            cursor : ew-resize;\n        }\n\n        .n-resize {\n            cursor : ns-resize;\n        }\n\n        .splitterMoving {\n            background-color : gray;\n        }\n\n        .splitterRealtime{\n            background : url(images/spacer.gif);\n        }\n\n        .splitter.vertical{\n            width  : 0;\n        }\n\n        .splitter.vertical div{\n            width : 5px;\n            margin-left : -3px;\n            background : url(images/spacer.gif);\n            height : 100%;\n        }\n\n        .splitter.vertical.panelsplitter div {\n            width: 3px;\n        }\n\n        .splitter.horizontal{\n            margin : -2px 0 0 0;\n        }\n\n        .splitter.horizontal div{\n            height : 5px;\n            margin-top : -2px;\n            background : url(images/spacer.gif);\n            position : absolute;\n            width : 100%;\n        }\n\n        .dockcol .splitter.horizontal{\n            height : 0px;\n            margin : 0;\n            border-bottom: 1px solid #393A3B;\n            border-top: 1px solid black;\n        }\n\n        .dockcol .splitter.horizontal div{\n            height : 4px;\n        }\n\n        .splitter-editor-right {\n            background: url(images/editor_header.png) repeat-x 0 0;\n            border-right: 1px solid #1E1E1E;\n        }\n\n        .splitter-editor-right.panelsplitter {\n            border-left: 1px solid #1E1E1E;\n            border-right: 1px solid #38393B;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main handle=".">\n            <div class="splitter">\n                <div> </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:splitter>\n\n<a:splitter name="darksplitter">\n    <a:style><![CDATA[\n        .darksplitter {\n            position : relative;\n            z-index  : 90000;\n            background-color: #e8e8e8;\n\n            display  : -moz-box;\n            display  : -webkit-box;\n            display  : -ms-box;\n        }\n\n        .w-resize {\n            cursor : ew-resize;\n        }\n\n        .n-resize {\n            cursor : ns-resize;\n        }\n\n        .darksplitter span {\n            position: absolute;\n        }\n\n        .darksplitter.vertical,\n        .darksplitterMoving.vertical,\n        .darksplitter.vertical:hover {\n            box-shadow: 1px 0 0 0 rgba(255, 255, 255, .07) inset,\n                        0 1px 0 1px #d7d7d7;\n\n            vertical-align: middle;\n            width: 4px;\n        }\n\n        .dark .darksplitter.vertical,\n        .dark .darksplitterMoving.vertical,\n        .dark .darksplitter.vertical:hover {\n            box-shadow: 1px 0 0 0 rgba(255, 255, 255, .07) inset,\n                        0 1px 0 1px #121212;\n        }\n\n        .darksplitter.vertical {\n            background: -moz-linear-gradient(left,  #e8e8e8 50%, #f0f0f0 100%);\n            background: -webkit-gradient(linear, left top, right top, color-stop(50%,#e8e8e8), color-stop(100%,#f0f0f0));\n            background: -webkit-linear-gradient(left,  #e8e8e8 50%,#f0f0f0 100%);\n            background: -o-linear-gradient(left,  #e8e8e8 50%,#f0f0f0 100%);\n            background: -ms-linear-gradient(left,  #e8e8e8 50%,#f0f0f0 100%);\n            background: linear-gradient(left,  #e8e8e8 50%,#f0f0f0 100%);\n        }\n\n        .darksplitterMoving.vertical,\n        .darksplitter.vertical:hover {\n            background: -moz-linear-gradient(left,  #f0f0f0 50%, #e8e8e8 100%);\n            background: -webkit-gradient(linear, left top, right top, color-stop(50%,#f0f0f0), color-stop(100%,#e8e8e8));\n            background: -webkit-linear-gradient(left,  #f0f0f0 50%,#e8e8e8 100%);\n            background: -o-linear-gradient(left,  #f0f0f0 50%,#e8e8e8 100%);\n            background: -ms-linear-gradient(left,  #f0f0f0 50%,#e8e8e8 100%);\n            background: linear-gradient(left,  #f0f0f0 50%,#e8e8e8 100%);\n        }\n\n        .dark .darksplitter.vertical {\n            background: -moz-linear-gradient(left,  #292929 0%, #303030 100%);\n            background: -webkit-gradient(linear, left top, right top, color-stop(0%,#292929), color-stop(100%,#303030));\n            background: -webkit-linear-gradient(left,  #292929 0%,#303030 100%);\n            background: -o-linear-gradient(left,  #292929 0%,#303030 100%);\n            background: -ms-linear-gradient(left,  #292929 0%,#303030 100%);\n            background: linear-gradient(to right,  #292929 0%,#303030 100%);\n            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=\'#292929\', endColorstr=\'#303030\',GradientType=1 );\n        }\n\n        .dark .darksplitterMoving.vertical,\n        .dark .darksplitter.vertical:hover {\n            background: -moz-linear-gradient(left,  #292929 0%, #383838 100%);\n            background: -webkit-gradient(linear, left top, right top, color-stop(0%,#292929), color-stop(100%,#383838));\n            background: -webkit-linear-gradient(left,  #292929 0%,#383838 100%);\n            background: -o-linear-gradient(left,  #292929 0%,#383838 100%);\n            background: -ms-linear-gradient(left,  #292929 0%,#383838 100%);\n            background: linear-gradient(to right,  #292929 0%,#383838 100%);\n            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=\'#292929\', endColorstr=\'#383838\',GradientType=1 );\n        }\n\n        .darksplitter.vertical span {\n            width: 1px;\n            height: 21px;\n            margin-top: 49%;\n            margin-left: 0px;\n            border-left: 1px solid #c9c9c9;\n            border-right: 1px solid #c9c9c9;\n            box-shadow: 1px 0 0 0 rgba(255, 255, 255, .08) inset,\n                        1px 0 0 0 rgba(255, 255, 255, .08);\n        }\n\n        .dark .darksplitter.vertical span {\n            border-left: 1px solid #131313;\n            border-right: 1px solid #131313;\n        }\n\n        .darksplitter.horizontal,\n        .darksplitterMoving.horizontal,\n        .darksplitter.horizontal:hover {\n            position: relative;\n            margin : -2px 0 0 0;\n            height: 4px;\n\n            box-shadow: 1px 1px 0 0 rgba(255, 255, 255, .07) inset,\n                        1px 0 0 1px #c7c7c7;\n\n            vertical-align: middle;\n            text-align: center;\n        }\n\n        .dark .darksplitter.horizontal,\n        .dark .darksplitterMoving.horizontal,\n        .dark .darksplitter.horizontal:hover {\n            box-shadow: 1px 1px 0 0 rgba(255, 255, 255, .07) inset,\n                        1px 0 0 1px #121212;\n        }\n\n        .darksplitter.horizontal {\n            background: -moz-linear-gradient(top,  #e8e8e8 50%, #f2f2f2 100%);\n            background: -webkit-gradient(linear, left top, left bottom, color-stop(50%,#e8e8e8), color-stop(100%,#f2f2f2));\n            background: -webkit-linear-gradient(top,  #e8e8e8 50%,#f2f2f2 100%);\n            background: -o-linear-gradient(top,  #e8e8e8 50%,#f2f2f2 100%);\n            background: -ms-linear-gradient(top,  #e8e8e8 50%,#f2f2f2 100%);\n            background: linear-gradient(top,  #e8e8e8 50%,#f2f2f2 100%);\n        }\n\n        .darksplitterMoving.horizontal,\n        .darksplitter.horizontal:hover {\n            background: -moz-linear-gradient(top,  #f2f2f2 50%, #e8e8e8 100%);\n            background: -webkit-gradient(linear, left top, left bottom, color-stop(50%,#f2f2f2), color-stop(100%,#e8e8e8));\n            background: -webkit-linear-gradient(top,  #f2f2f2 50%,#e8e8e8 100%);\n            background: -o-linear-gradient(top,  #f2f2f2 50%,#e8e8e8 100%);\n            background: -ms-linear-gradient(top,  #f2f2f2 50%,#e8e8e8 100%);\n            background: linear-gradient(top,  #f2f2f2 50%,#e8e8e8 100%);\n        }\n\n        .dark .darksplitter.horizontal {\n            background: -moz-linear-gradient(top,  #292929 0%, #303030 100%);\n            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#292929), color-stop(100%,#303030));\n            background: -webkit-linear-gradient(top,  #292929 0%,#303030 100%);\n            background: -o-linear-gradient(top,  #292929 0%,#303030 100%);\n            background: -ms-linear-gradient(top,  #292929 0%,#303030 100%);\n            background: linear-gradient(to bottom,  #292929 0%,#303030 100%);\n            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=\'#292929\', endColorstr=\'#303030\',GradientType=0 );\n        }\n\n        .dark .darksplitterMoving.horizontal,\n        .dark .darksplitter.horizontal:hover {\n            background: -moz-linear-gradient(top,  #292929 0%, #383838 100%);\n            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#292929), color-stop(100%,#383838));\n            background: -webkit-linear-gradient(top,  #292929 0%,#383838 100%);\n            background: -o-linear-gradient(top,  #292929 0%,#383838 100%);\n            background: -ms-linear-gradient(top,  #292929 0%,#383838 100%);\n            background: linear-gradient(to bottom,  #292929 0%,#383838 100%);\n            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=\'#292929\', endColorstr=\'#383838\',GradientType=0 );\n        }\n\n        .darksplitter.horizontal span {\n            width: 11px;\n            height: 3px;\n\n            width: 21px;\n            height: 1px;\n            margin-left: 49%;\n            margin-top: 0px;\n            border-top: 1px solid #c9c9c9;\n            border-bottom: 1px solid #c9c9c9;\n            box-shadow: 0 1px 0 0 rgba(255, 255, 255, .08) inset,\n                        0 1px 0 0 rgba(255, 255, 255, .08);\n        }\n\n        .dark .darksplitter.horizontal span {\n            border-top: 1px solid #131313;\n            border-bottom: 1px solid #131313;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main handle=".">\n            <div class="darksplitter">\n                <span>&#160;</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:splitter>\n\n<a:statusbar name="statusbar">\n    <a:style><![CDATA[\n        .statusbar {\n            border-top: 1px solid #b2b2b2;\n            overflow: hidden;\n            color: #333;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(222,224,227)),color-stop(1, rgb(239,241,244)));\n            background: -moz-linear-gradient(center bottom,rgb(222,224,227) 0%,rgb(239,241,244) 100%);\n            height: 21px;\n            width: 100%;\n            padding: 0 0 0 0;\n        }\n\n        .statusbar .sbsection {\n            //padding: 1px 5px 0 5px;\n\n            font-size: 11px;\n            font-family: Tahoma, Arial;\n            background: no-repeat 3px 1px;\n            //height: 15px;\n            //float: left;\n            display: inline-block;\n            //margin : 2px 2px 0 0;\n\n            border-right: 1px solid #c3c3c3;\n            border-left: 1px solid #FFFFFF;\n\n            position : relative;\n        }\n\n        .statusbar .sbsectionLast {\n            float: none;\n            margin: 2px 0 0 -2px;\n            border-right: 0;\n        }\n\n        .statusbar .sbsectionIcon {\n            padding-left: 23px\n        }\n\n        .windowMax .statusbar .corner {\n            display: none;\n        }\n\n        .statusbar .corner {\n            width: 13px;\n            height: 13px;\n            position: absolute;\n            right: 0;\n            top: 7px;\n            display: block;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="." corner="span">\n            <div class="statusbar"><span class="corner"/></div>\n        </a:main>\n        <a:section icon="." caption="text()" container="." inherit="true">\n            <div class="sbsection"> </div>\n        </a:section>\n    </a:presentation>\n</a:statusbar>\n\n<a:statusbar name="status">\n    <a:style><![CDATA[\n        .statuscontainer{\n            margin: 8px 4px 0 0;\n            padding: 4px 0 0 8px;\n            width: 50px;\n            height: 50px;\n            float: left;\n        }\n\n        .statuscontainer span{\n            font-family: MS Sans Serif;\n            font-size: 8pt;\n            float: left;\n            margin-left: 4px;\n            cursor: default;\n            padding-right: 2px;\n            text-align: center;\n            width: 50px;\n            margin-top: 5px;\n        }\n\n        .statuscontainerFocus span{\n            margin: 4px 0 0 3px;\n            padding-right: 1px;\n            border: 1px dotted gray;\n        }\n\n        .scheckbox{\n            width: 32px;\n            height: 32px;\n            overflow: hidden;\n            margin: 0 3px 0 13px;\n\n            background: url(icons/icoOff.gif) no-repeat 50% 50%;\n        }\n\n        .statuscontainerDown .scheckbox{\n        }\n\n        .statuscontainerChecked .scheckbox{\n            background: url(icons/icoOn.gif) no-repeat 50% 50%;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span/text()">\n            <div class="statuscontainer">\n                <div class="scheckbox"> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:statusbar>\n\n<a:progressbar name="progressbar">\n    <a:style><![CDATA[\n        .progressbar {\n            position: relative;\n            width: 147px;\n            height : 8px;\n            cursor : default;\n        }\n\n        .progressbar .lbl {\n            position: relative;\n            background: url("images/bar_right.png") no-repeat top left;\n            font-family: Tahoma, Arial;\n            font-size: 9px;\n            float: right;\n            height: 8px;\n            width: 30px;\n            padding: 0;\n        }\n\n        .progressbar .lbl span {\n            display: block;\n            position: absolute;\n            top: -2px;\n            left: 6px;\n        }\n\n        .progressbar .left {\n            background: url("images/bar_left.png") no-repeat top left;\n            height: 8px;\n            margin: 0 30px 0 0;\n            _margin: 0;\n        }\n\n        .lowlabel {\n        }\n\n        .lowlabel .lbl {\n            position: static;\n            width: 4px;\n        }\n\n        .lowlabel .lbl span {\n            display: block;\n            positiom: absolute;\n            top: 10px;\n            left: 0;\n        }\n\n        .lowlabel .left {\n            margin: 0 4px 0 0;\n        }\n\n        .progressbarDisabled {\n            color: #bebebe;\n        }\n\n        .progressbarDisabled .left {\n            background-position: left -8px;\n        }\n\n        .progressbarDisabled .lbl{\n            background-position: left -8px;\n        }\n\n        .progressbar .filledbar {\n            background: url("images/progressbar.png") no-repeat top left;\n            height: 8px;\n            overflow: hidden;\n            padding : 0 0 0 3px;\n            border-right : 1px solid #327fbd;\n            display : none;\n            width : 0%;\n            margin-right: -1px;\n            _margin-right: -4px;\n            z-index: 1000;\n        }\n\n        .progressbarDisabled .filledbar {\n            background-position: 0 -8px;\n            border-right : 1px solid #cfd0d0;\n        }\n\n        .progressbarDisabled .left {\n            background-position: left -8px;\n        }\n\n        .progressbarRunning .filledbar {\n            display: block;\n        }\n\n        .progressbarComplete .left {\n            background: url("images/progressbar.png") no-repeat top left;\n\n        }\n\n        .progressbarComplete .lbl {\n            background: url("images/progressbar.png") no-repeat -496px 0;\n        }\n\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main progress="div[2]/div" caption="div[1]/span/text()">\n            <div class="progressbar">\n                <div class="lbl"><span>0%</span></div>\n                <div class="left">\n                    <div class="filledbar"> </div>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:progressbar>\n\n<a:progressbar name="progressbar-green">\n    <a:style><![CDATA[\n        .progressbar-green {\n            position: relative;\n            cursor : default;\n        }\n\n        .progressbar-green .lbl {\n            display: none;\n        }\n\n        .progressbar-green .left {\n            background-color: #191818;\n            border: 1px solid #111010;\n            -webkit-box-shadow: 0 1px 0 0 #474748;\n           -moz-box-shadow: 0 1px 0 0 #474748;\n                box-shadow: 0 1px 0 0 #474748;\n\n            border-radius : 3px;\n            -moz-border-radius: 3px;\n            -webkit-border-radius: 3px;\n\n            background-image: linear-gradient(bottom, rgb(26,26,26) 0%, rgb(25,24,24) 51%);\n            background-image: -o-linear-gradient(bottom, rgb(26,26,26) 0%, rgb(25,24,24) 51%);\n            background-image: -moz-linear-gradient(bottom, rgb(26,26,26) 0%, rgb(25,24,24) 51%);\n            background-image: -webkit-linear-gradient(bottom, rgb(26,26,26) 0%, rgb(25,24,24) 51%);\n            background-image: -ms-linear-gradient(bottom, rgb(26,26,26) 0%, rgb(25,24,24) 51%);\n        }\n\n        .progressbar-greenDisabled {\n\n        }\n\n        .progressbar-greenDisabled .left {\n\n        }\n\n        .progressbar-green .filledbar {\n            overflow: hidden;\n            display : none;\n            width : 0%;\n            z-index: 1000;\n\n            background-image: linear-gradient(bottom, rgb(127,193,4) 0%, rgb(168,239,37) 51%);\n            background-image: -o-linear-gradient(bottom, rgb(127,193,4) 0%, rgb(168,239,37) 51%);\n            background-image: -moz-linear-gradient(bottom, rgb(127,193,4) 0%, rgb(168,239,37) 51%);\n            background-image: -webkit-linear-gradient(bottom, rgb(127,193,4) 0%, rgb(168,239,37) 51%);\n            background-image: -ms-linear-gradient(bottom, rgb(127,193,4) 0%, rgb(168,239,37) 51%);\n\n            border-right: 1px solid #475b21;\n            border-left: 1px solid #475b21;\n            height: 3px;\n        }\n\n        .progressbar-greenDisabled .filledbar {\n        }\n\n        .progressbar-greenDisabled .left {\n\n        }\n\n        .progressbar-greenRunning .filledbar {\n            display: block;\n        }\n\n        .progressbar-greenComplete .left {\n\n        }\n\n        .progressbar-greenComplete .lbl {\n\n        }\n\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main progress="div[2]/div" caption="div[1]/span/text()">\n            <div class="progressbar-green">\n                <div class="lbl"><span>0%</span></div>\n                <div class="left">\n                    <div class="filledbar"> </div>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:progressbar>\n\n<a:tab name="tab_console">\n<a:style><![CDATA[\n    .tab_console {\n        padding : 0 0 0 0;\n        border: 0px solid #8c8c8c;\n        border-top: 1px solid #000000;\n        margin : 0 auto;\n        overflow: hidden;\n        position:relative;\n        -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.06) inset;\n        -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.06) inset;\n        box-shadow: 0 1px 0 rgba(255, 255, 255, 0.06) inset;\n    }\n\n    .tab_console .btncontainer{\n        padding : 4px 106px 3px 6px;\n        height: 20px;\n        overflow: visible;\n        white-space: nowrap;\n        color: #aaaaaa;\n        text-shadow : rgba(0, 0, 0, 1) 0px 1px 0px;\n        font-family : Arial;\n        font-size : 12px;\n\n        border-top: 1px solid #404040;\n        border-bottom: 1px solid #000000;\n\n        background: #282828;\n        background: -webkit-linear-gradient(top,#282828 0%, #181818 100%);\n        background:    -moz-linear-gradient(top,#282828 0%, #181818 100%);\n        background:         linear-gradient(top,#282828 0%, #181818 100%);\n        width : auto;\n        position : absolute;\n        top : 0;\n        left : 0;\n        right : 0;\n\n        clip: rect(0px 3000px 30px 0px);\n        display : -webkit-box;\n        display : -moz-box;\n    }\n\n    .tab_console .btncontainer > .btntab {\n        cursor: default;\n\n        min-width : 17px;\n        max-width : 70px;\n        -webkit-box-flex : 1;\n        -moz-box-flex : 1;\n        position : relative;\n        width : 0;\n\n        display: block;\n        margin: 0 0 0 0;\n        padding: 0;\n        height : 19px;\n    }\n\n    .tab_console .btncontainer .btntab {\n        padding      : 4px 20px 2px 20px;\n        position     : relative;\n        text-align: center;\n    }\n\n    .tab_console .btncontainer .btntab.btnclose {\n        padding      : 4px 15px 2px 15px;\n    }\n\n    .tab_console .btncontainer .btntab .tab_console_icon {\n        height:16px;\n        left:1px;\n        position:absolute;\n        top:1px;\n        width:16px;\n    }\n\n    .tab_console .btncontainer .btntab .tab_console_title {\n        overflow : hidden;\n        padding  : 0 0 0 0;\n		-moz-user-select: -moz-none;\n	    -khtml-user-select: none;\n	    -webkit-user-select: none;\n	    -o-user-select: none;\n	    user-select: none;\n    }\n\n    .tab_console .btncontainer .btntab.btnclose .tab_console_title {\n        margin-right : 15px;\n        -moz-user-select: -moz-none;\n        -khtml-user-select: none;\n        -webkit-user-select: none;\n        -o-user-select: none;\n        user-select: none;\n    }\n\n    .tab_console .scale .btntab .tab_console_title{\n        display : block;\n        overflow : hidden;\n        text-overflow : ellipsis;\n        white-space : nowrap;\n        -moz-user-select: -moz-none;\n        -khtml-user-select: none;\n        -webkit-user-select: none;\n        -o-user-select: none;\n        user-select: none;\n    }\n\n    .tab_console .btncontainer div.over {\n        color: #ffffff;\n        cursor: default;\n    }\n\n    .tab_console .btncontainer div.curbtn {\n        color       : #cbfaa9;\n        cursor      : default;\n        z-index     : 1;\n        background  : #1d1d1d url(images/console-tab-btn-curr.png) repeat-x 0 0;\n        border-top  : 1px solid #4f4f4f;\n        z-index     : 101;\n        padding     : 2px 20px 2px 20px;\n        text-shadow : rgba(0, 0, 0, 1) 0px 1px 0px;\n    }\n\n    .tab_console .btncontainer div.curbtn.btnclose {\n        padding     : 2px 15px 2px 15px;\n    }\n\n    .tab_console .scale .btntab .tab_console_middle {\n        display : block;\n        overflow : hidden;\n        text-overflow : ellipsis;\n        white-space : nowrap;\n    }\n\n    .tab_consoleFocus .curbtn{\n    }\n\n    .tab_console .btncontainer .btnclose strong {\n        width               : 14px;\n        height              : 14px;\n        display             : block;\n        position            : absolute;\n        right               : 6px;\n        top                 : 6px;\n        background-image    : url(images/console-tab-close-button.png);\n        background-repeat   : no-repeat;\n        background-position : 0 0;\n    }\n\n    .tab_console .btncontainer .btnclose strong:hover {\n        background-position : 0 -14px;\n    }\n\n    .tab_console .btncontainer .btnclose strong:active {\n        background-position : 0 -2spx;\n    }\n\n    .tab_console .btncontainer .curbtn.btnclose strong {\n        background-position : 0 0;\n        top: 4px;\n        right: 6px;\n    }\n\n    .tab_console .btncontainer .curbtn.btnclose strong:hover {\n        background-position : 0 -14px;\n    }\n\n    .tab_console .btncontainer .curbtn.btnclose strong:active {\n        background-position : 0 -28px;\n    }\n\n    .tab_console .page {\n        display : none;\n        position : absolute;\n        top : 28px;\n        bottom : 0;\n        left : 0;\n        right : 0;\n        z-index : 10;\n        margin: 0 auto;\n\n        overflow: hidden;\n        clear: both;\n        font-family : Arial;\n        font-family: 12px;\n        color: #eeeeee;\n\n        border-top: 1px solid #333333;\n\n        background-color: #303030;\n        background-image: -webkit-linear-gradient(top,#1e1e1e 0%, #2a2a2a 8px, #303030 13px, transparent 13px);\n        background-image:    -moz-linear-gradient(top,#1e1e1e 0%, #2a2a2a 8px, #303030 13px, transparent 13px);\n        background-image:         linear-gradient(top,#1e1e1e 0%, #2a2a2a 8px, #303030 13px, transparent 13px);\n        -webkit-box-shadow: 0 -1px 0 0 #000;\n           -moz-box-shadow: 0 -1px 0 0 #000;\n                box-shadow: 0 -1px 0 0 #000;\n    }\n\n    .tab_console .page.curpage{\n        display : block;\n    }\n]]></a:style>\n<a:style condition="apf.isChrome || apf.isSafari"><![CDATA[\n    .tab_console .btncontainer .btntab {\n        padding      : 4px 20px 1px 20px;\n    }\n\n    .tab_console .btncontainer div.curbtn {\n        padding      : 3px 20px 1px 20px;\n    }\n]]></a:style>\n<a:style condition="apf.isGecko"><![CDATA[\n    .tab_console .btncontainer .btntab {\n        float: left;\n        min-width: 70px;\n    }\n]]></a:style>\n<a:presentation>\n    <a:main pages="." buttons="div[1]">\n        <div class="tab_console">\n            <div class="btncontainer"> </div>\n        </div>\n    </a:main>\n    <a:button caption="div/text()" container="div" icon="div[2]" maxwidth="105" minwidth="20">\n        <div class="btntab">\n            <div class="tab_console_title">-</div>\n            <div class="tab_console_icon"> </div>\n        </div>\n    </a:button>\n    <a:btnclose>\n        <strong> </strong>\n    </a:btnclose>\n    <a:page container=".">\n        <div class="page"> </div>\n    </a:page>\n</a:presentation>\n</a:tab>\n\n<a:tab name="editor_tab">\n    <a:style><![CDATA[\n    .editor_tab {\n        padding : 0 0 0 0;\n        margin : 0 auto;\n        position:relative;\n\n        background: rgba(24,24,24,.9) url(images/c9-noise.png);\n        box-shadow: 0 -1px 0 0 black inset, 0 1px 0 0 rgba(255, 255, 255, .06) inset;\n    }\n\n    .editor_tab .btnsesssioncontainer {\n        padding : 5px 4px 0 21px;\n        height: 22px;\n        color: #f5f5f5;\n        font-family : Arial;\n        font-size : 12px;\n        /*overflow : hidden;*/\n\n        /*\n            this fixes the tab being over the white line\n            shadow while not having overflow:hidden\n        */\n        clip: rect(0px 3000px 28px 0px);\n\n        /*background: rgba(24,24,24,.9) url(images/c9-noise.png);*/\n        position : relative;\n        z-index : 100;\n\n        /*-webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.05) inset;\n           -moz-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.05) inset;\n                box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.05) inset;*/\n\n        /*box-shadow: 0 -1px 0 0 black inset, 0 1px 0 0 rgba(255, 255, 255, .06) inset;*/\n        margin-bottom: 1px;\n\n        display : -webkit-box;\n        display : -moz-box;\n    }\n\n    .editor_tab .btnsesssioncontainer.morepadding{\n        padding-right : 53px;\n    }\n    .dark .editor_tab .btnsesssioncontainer {\n        box-shadow: 0 -1px 0 0 black inset, 0 1px 0 0 rgba(255, 255, 255, .06) inset;\n    }\n    .editor_tab.hidetabs .btnsesssioncontainer {\n        clip: rect(0px 3000px 12px 0px);\n    }\n\n    .editor_tab .btnsesssioncontainer > .session_btn {\n        cursor: default;\n\n        min-width : 17px;\n        max-width : 150px;\n        -webkit-box-flex : 1;\n        -moz-box-flex : 1;\n        position : relative;\n        width : 0;\n        line-height : 1.2em;\n    }\n\n    /* ------------------------------------------------------------------------------------------\n     * Tab shape\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab .session_btn {\n		padding      : 0 20px;\n		position     : relative;\n		margin-right : -20px;\n		margin-top   : 0;\n		height       : 21px;\n		overflow     : hidden;\n    }\n    .editor_tab .tab_middle {\n        height   : 18px;\n        position : relative;\n        padding  : 4px 0 0 0;\n    }\n\n    .editor_tab .tab_middle:before,\n    .editor_tab .tab_middle:after {\n        background-color : inherit;\n        content          : "";\n        display          : block;\n        position         : absolute;\n        height           : 22px;\n        width            : 17px;\n        -webkit-mask     : url(images/c9-no-repeat.png) no-repeat;\n        top              : 0;\n    }\n\n    .editor_tab .tab_middle:before {\n        left                  : -17px;\n        -webkit-mask-position : 0 -96px;\n    }\n    .editor_tab .tab_middle:after {\n        right                 : -17px;\n        -webkit-mask-position : -31px -96px;\n    }\n\n    .editor_tab .sessiontab_saving {\n        position: absolute;\n        z-index: 10;\n    }\n\n    /* ------------------------------------------------------------------------------------------\n     * Unselected tab default state\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab .btnclose .tab_middle > strong,\n    .dark .editor_tab .btnclose.curbtn .tab_middle > strong {\n        width               : 14px;\n        height              : 14px;\n        display             : block;\n        position            : absolute;\n        right               : -1px;\n        top                 : 5px;\n        background-image    : url(images/close_tab_btn.png);\n        background-repeat   : no-repeat;\n        background-position : 0 -14px;\n    }\n\n    .editor_tab .btnsesssioncontainer .loading .sessiontab_saving,\n    .editor_tab .btnsesssioncontainer .saving .sessiontab_saving {\n        background-image : url(images/tab-save-spinner-inactive.gif);\n        height           : 13px;\n        right            : 0px;\n        top              : 5px;\n        width            : 13px;\n    }\n\n    .dark .editor_tab .btnsesssioncontainer .loading.btnclose .tab_middle strong,\n    .dark .editor_tab .btnsesssioncontainer .saving.btnclose .tab_middle strong,\n    .editor_tab .btnsesssioncontainer .loading.btnclose .tab_middle strong,\n    .editor_tab .btnsesssioncontainer .saving.btnclose .tab_middle strong {\n        display: none;\n    }\n\n    .dark .editor_tab .btnsesssioncontainer .loading.over.btnclose .tab_middle strong,\n    .dark .editor_tab .btnsesssioncontainer .saving.over.btnclose .tab_middle strong,\n    .editor_tab .btnsesssioncontainer .loading.over.btnclose .tab_middle strong,\n    .editor_tab .btnsesssioncontainer .saving.over.btnclose .tab_middle strong {\n        display: block;\n    }\n    /* ------------------------------------------------------------------------------------------\n     * Unselected tab hover\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab .btnclose .tab_middle > strong:hover,\n    .dark .editor_tab .btnclose.curbtn .tab_middle > strong:hover {\n        background-position : -14px -14px;\n    }\n\n    .editor_tab .btnclose .tab_middle > strong:active,\n    .dark .editor_tab .btnclose.curbtn .tab_middle > strong:active {\n        background-position : -28px -14px;\n    }\n\n    .editor_tab .over .sessiontab_saving {\n        display: none;\n    }\n    /* ------------------------------------------------------------------------------------------\n     * Selected tab default state\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab .btnsesssioncontainer .curbtn {\n        cursor      : default;\n        height      : 23px;\n        text-shadow : 0px 1px 0px rgba(255, 255, 255, .4);\n        z-index     : 10;\n    }\n    .dark .editor_tab .curbtn {\n        text-shadow : 0px 1px 0px rgba(0, 0, 0, .4);\n    }\n    .editor_tab .curbtn .tab_middle:before,\n    .editor_tab .curbtn .tab_middle:after {\n        height: 23px;\n    }\n    .editor_tab .curbtn .tab_middle {\n        background-color    : #e8e8e8;\n        color               : #000;\n        height              : 19px;\n        padding-top         : 4px;\n        text-shadow         : 0 1px 0 0 rgba(255,255,255,.4);\n    }\n    .editor_tab .loading_active .sessiontab_saving,\n    .editor_tab .saving_active .sessiontab_saving {\n        background-image : url(images/tab-save-spinner-active.gif);\n        height           : 15px;\n        right            : -2px;\n        top              : 4px;\n        width            : 15px;\n    }\n\n    .dark .editor_tab .loading_active.btnclose .tab_middle strong,\n    .dark .editor_tab .saving_active.btnclose .tab_middle strong,\n    .editor_tab .loading_active .tab_middle strong,\n    .editor_tab .saving_active .tab_middle strong {\n        display: none;\n    }\n\n    .dark .editor_tab .loading_active.over.btnclose .tab_middle strong,\n    .dark .editor_tab .saving_active.over.btnclose .tab_middle strong,\n    .editor_tab .loading_active.over .tab_middle strong,\n    .editor_tab .saving_active.over .tab_middle strong {\n        display: block;\n    }\n    /* ------------------------------------------------------------------------------------------\n     * Selected tab hover\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab .btnclose.curbtn .tab_middle > strong {\n        background-position : 0 0;\n        top : 4px;\n    }\n\n    .editor_tab .btnclose.curbtn .tab_middle > strong:hover {\n        background-position : -14px 0;\n    }\n\n    .editor_tab .btnclose.curbtn .tab_middle > strong:active {\n        background-position : -28px 0;\n    }\n\n    /* ------------------------------------------------------------------------------------------\n     * Tab elements\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab .session_btn .sessiontab_title {\n        display : block;\n        overflow : hidden;\n        text-overflow : ellipsis;\n        white-space : nowrap;\n    }\n    .editor_tab .btnsesssioncontainer .session_btn.btnclose .tab_middle .sessiontab_title {\n        margin-right : 15px;\n        margin-left : 4px;\n    }\n    .editor_tab .btnsesssioncontainer .session_btn .tab_middle .sessiontab_title {\n        overflow : hidden;\n        padding  : 0 0 0 0;\n           -moz-user-select: -moz-none;\n         -khtml-user-select: none;\n        -webkit-user-select: none;\n             -o-user-select: none;\n                user-select: none;\n    }\n\n    .editor_tab #q5 {\n        top: 2px !important;\n    }\n\n    .editor_tab .btnsesssioncontainer .session_btn .tab_middle .sessiontab_icon {\n        display: none;\n    }\n\n    .editor_tab .btnsesssioncontainer .plus_tab_button {\n		background-image: url(images/c9-no-repeat.png);\n		background-position: -58px -80px;\n		background-repeat: no-repeat;\n    	display: inline-block;\n		height: 17px;\n		margin: 0px 0px 0 12px;\n		top: 2px;\n		width: 30px;\n        vertical-align : top;\n    }\n    .editor_tab .btnsesssioncontainer .plus_tab_button:hover {\n		background-position: -58px -106px;\n    }\n    .editor_tab .btnsesssioncontainer .plus_tab_button:active {\n		background-position: -58px -132px;\n    }\n\n    .editor_tab .btnsesssioncontainer > .tabmenubtn {\n    	background: url(images/c9-no-repeat.png) no-repeat -98px -80px;\n    	height: 17px;\n    	left: 4px;\n    	position: absolute;\n    	top: 7px;\n    	width: 19px;\n    }\n    .editor_tab .btnsesssioncontainer > .tabmenubtn:hover {\n    	background-position: -98px -106px;\n    }\n    .editor_tab .btnsesssioncontainer > .tabmenubtn.btn_icon_onlymenuDown {\n    	background-position: -98px -132px;\n    	z-index: 10000000;\n    }\n    .tabsContextMenu:before {\n        background: url(images/c9-no-repeat.png) no-repeat -98px -132px;\n        content: "";\n        display: block;\n        height: 17px;\n        left: -1px;\n        pointer-events: none;\n        position: absolute;\n        top: -17px;\n        width: 19px;\n    }\n\n    /* ------------------------------------------------------------------------------------------\n	 * LEGACY CODE\n	 * --------------------------------------------------------------------------------------- */\n    .editor_tab .tab_middle {\n        background-image    : url(images/editor_tab.png);\n        background-position : 0 -104px;\n        height              : 18px;\n        position            : relative;\n        overflow            : hidden;\n        padding             : 4px 0 0 0;\n    }\n    .editor_tab .tab_left,\n    .editor_tab .tab_right {\n        position            : absolute;\n        height              : 25px;\n        width               : 20px;\n        background-image    : url(images/editor_tab.png);\n        background-repeat   : no-repeat;\n        top                 : 0;\n    }\n\n    .editor_tab .tab_left {\n        background-position : 0 -78px;\n        left                : 0;\n    }\n    .editor_tab .tab_right {\n        background-position : 0 -130px;\n        right               : 0;\n    }\n    .editor_tab .down {\n        text-shadow: none;\n        color: #d9d9d9;\n    }\n\n    .editor_tab .over .tab_middle {\n        background-position : 0 -182px;\n    }\n    .editor_tab .over .tab_left {\n        background-position : 0 -156px;\n    }\n    .editor_tab .over .tab_right {\n        background-position : 0 -208px;\n    }\n\n    .editor_tab .curbtn {\n        color       : #333333;\n        cursor      : default;\n        text-shadow : rgba(255, 255, 255, .4) 0px 1px 0px;\n        z-index     : 10;\n    }\n\n    .editor_tab .curbtn .tab_middle {\n        background-position : 0 -26px;\n        color:#000000;\n    }\n    .editor_tab .curbtn .tab_left {\n        background-position : 0 0;\n    }\n    .editor_tab .curbtn .tab_right {\n        background-position : 0 -52px;\n    }\n\n    /* ------------------------------------------------------------------------------------------\n     * END LEGACY CODE\n     * --------------------------------------------------------------------------------------- */\n\n    /* ------------------------------------------------------------------------------------------\n     * minimized tabs\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab.hidetabs {\n        box-shadow: -1px 0 0 0 #2B2B2B;\n    }\n    .editor_tab.hidetabs .tab_middle *,\n    .editor_tab.hidetabs .btnclose .tab_middle > strong {\n    	display: none;\n    }\n    .editor_tab.hidetabs .tab_middle:before,\n    .editor_tab.hidetabs .tab_middle:after {\n		-webkit-mask-image  : none;\n		top                 : 0;\n		width: 19px;\n    }\n\n    /* ------------------------------------------------------------------------------------------\n     * Unselected tab default state\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab.hidetabs .session_btn:not(.curbtn) {\n    	border-bottom: 2px solid transparent;\n        height: 5px;\n    	overflow: hidden;\n        top : 0px;\n    }\n    .editor_tab.hidetabs .session_btn .tab_middle {\n    	overflow: visible;\n    }\n    .editor_tab.hidetabs .session_btn .tab_left,\n    .editor_tab.hidetabs .session_btn .tab_right {\n    	display: none;\n    }\n    .editor_tab.hidetabs .session_btn:not(.curbtn) .tab_middle {\n    	background-color: #7A7A7A;\n        background-image    : url(images/c9-repeat-x.png), url(images/c9-repeat-x.png);\n        background-position : 50% -124px, 0 -79px;\n        background-repeat   : no-repeat, repeat-x;\n    }\n    .editor_tab.hidetabs .session_btn:not(.curbtn) .tab_middle:before {\n        background-image    : url(images/c9-repeat-x.png);\n        background-repeat   : repeat-x;\n        background-position : 0 -79px;\n    }\n    .editor_tab.hidetabs .session_btn:not(.curbtn) .tab_middle,\n    .editor_tab.hidetabs .session_btn:not(.curbtn) .tab_middle:before {\n        box-shadow   : 0 -1px 0 0 #000 inset, 0 1px 0 0 rgba(255,255,255,.3) inset;\n    }\n\n    .editor_tab.hidetabs .tab_middle {\n    	border-top-right-radius: 1px;\n    }\n    .editor_tab.hidetabs .tab_middle:before {\n    	border-top-left-radius: 1px;\n    }\n    .editor_tab.hidetabs .session_btn:not(.curbtn) .tab_middle:after {\n    	display: none;\n    }\n\n    /* ------------------------------------------------------------------------------------------\n     * Unselected tab hover\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab.hidetabs .session_btn.over:not(.curbtn) .tab_middle {\n        background-color: #616161;\n    }\n    /* ------------------------------------------------------------------------------------------\n     * Selected tab default state\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab.hidetabs .curbtn {\n    	height: 8px;\n    	overflow: hidden;\n        top : 0px;\n    }\n    .editor_tab.hidetabs .curbtn .tab_middle {\n        background-image    : url(images/c9-repeat-x.png), url(images/c9-repeat-x.png);\n        background-position : 50% -123px, 0 -111px;\n        background-repeat   : no-repeat, repeat-x;\n        border-top-right-radius: 1px;\n    }\n    .dark .editor_tab.hidetabs .curbtn .tab_middle {\n        background-position: 50% -129px, 0 -1185px;\n    }\n    .editor_tab.hidetabs .curbtn .tab_middle:before {\n        background-image    : url(images/c9-repeat-x.png);\n        background-position : 0 -111px;\n        background-repeat   : repeat-x;\n    	border-top-left-radius: 1px;\n    }\n    .dark .editor_tab.hidetabs .curbtn .tab_middle:before {\n        background-position: 0 -1185px;\n    }\n    .editor_tab.hidetabs .curbtn .tab_middle:after {\n    		display: none;\n    }\n\n    /* ------------------------------------------------------------------------------------------\n     * Selected tab hover\n     * --------------------------------------------------------------------------------------- */\n\n\n    /* ------------------------------------------------------------------------------------------\n     * Minimized tab elements\n     * --------------------------------------------------------------------------------------- */\n    /*.editor_tab.hidetabs .btnsesssioncontainer .plus_tab_button {\n		background-position: -58px -158px;\n		height: 10px;\n		margin: 0px 0px 5px 3px;\n		top: 2px;\n    }\n    .editor_tab.hidetabs .btnsesssioncontainer .plus_tab_button:hover {\n		background-position: -58px -178px;\n    }\n    .editor_tab.hidetabs .btnsesssioncontainer .plus_tab_button:active {\n		background-position: -58px -198px;\n    }\n    .editor_tab.hidetabs .btnsesssioncontainer > .tabmenubtn {\n    	background-position: -98px -158px;\n    	height: 9px;\n    	left: 1px;\n    	top: 2px;\n    	width: 19px;\n    }\n    .editor_tab.hidetabs .btnsesssioncontainer > .tabmenubtn:hover {\n    	background-position: -98px -178px;\n    }\n    .editor_tab.hidetabs .btnsesssioncontainer > .tabmenubtn.btn_icon_onlymenuDown {\n    	background-position: -98px -198px;\n    }*/\n\n    .editor_tab.hidetabs .btnsesssioncontainer .plus_tab_button,\n    .editor_tab.hidetabs .btnsesssioncontainer > .tabmenubtn {\n        opacity : 0;\n    }\n\n    /* ------------------------------------------------------------------------------------------\n     * Animation steps\n     * --------------------------------------------------------------------------------------- */\n\n    .editor_tab.step1 .tab_middle:after\n        { -webkit-mask-position : -164px    0px; top : 0; width : 17px; right: -17px; display: block;}\n    .editor_tab.step2 .tab_middle:after\n        { -webkit-mask-position : -164px  -32px; top : 0; width : 14px; right: -14px; display: block;}\n    .editor_tab.step3 .tab_middle:after\n        { -webkit-mask-position : -164px  -64px; top : 0; width : 11px; right: -11px; display: block;}\n    .editor_tab.step4 .tab_middle:after\n        { -webkit-mask-position : -164px  -96px; top : 0; width : 7px;  right: -7px;  display: block;}\n    .editor_tab.step5 .tab_middle:after,\n    .editor_tab.step6 .tab_middle:after\n        { -webkit-mask-position : -164px -128px; top : 0; width : 0px;  right: 0;     display: block;}\n\n    .editor_tab.step1 .tab_middle:before\n        { -webkit-mask-position : -137px    0px; width : 17px; }\n    .editor_tab.step2 .tab_middle:before\n        { -webkit-mask-position : -137px  -32px; width : 17px; }\n    .editor_tab.step3 .tab_middle:before\n        { -webkit-mask-position : -137px  -64px; width : 18px; }\n    .editor_tab.step4 .tab_middle:before\n        { -webkit-mask-position : -137px  -96px; width : 18px; }\n    .editor_tab.step5 .tab_middle:before\n        { -webkit-mask-position : -137px -128px; width : 19px; }\n    .editor_tab.step6 .tab_middle:before\n        { -webkit-mask-position : -137px -128px; width : 19px; }\n\n    .editor_tab.step1 .session_btn:not(.curbtn) .tab_middle:before,\n    .editor_tab.step2 .session_btn:not(.curbtn) .tab_middle:before,\n    .editor_tab.step3 .session_btn:not(.curbtn) .tab_middle:before,\n    .editor_tab.step4 .session_btn:not(.curbtn) .tab_middle:before,\n    .editor_tab.step5 .session_btn:not(.curbtn) .tab_middle:before {\n        background-image    : url(images/c9-repeat-x.png);\n        background-position : 0 -79px;\n        background-repeat   : repeat-x;\n        top                 : 0;\n    }\n    .editor_tab.step1 .curbtn .tab_middle:before,\n    .editor_tab.step2 .curbtn .tab_middle:before,\n    .editor_tab.step3 .curbtn .tab_middle:before,\n    .editor_tab.step4 .curbtn .tab_middle:before,\n    .editor_tab.step5 .curbtn .tab_middle:before {\n        background-image    : url(images/c9-repeat-x.png);\n        background-position : 0 -57px;\n        background-repeat   : repeat-x;\n        top                 : 0;\n    }\n\n    .dark .editor_tab.step1 .curbtn .tab_middle:before,\n    .dark .editor_tab.step2 .curbtn .tab_middle:before,\n    .dark .editor_tab.step3 .curbtn .tab_middle:before,\n    .dark .editor_tab.step4 .curbtn .tab_middle:before,\n    .dark .editor_tab.step5 .curbtn .tab_middle:before {\n        background-position : 0 -1126px;\n    }\n\n    .editor_tab.step5 .session_btn:not(.curbtn) .tab_middle:before\n        { height : 8px; }\n    .editor_tab.step6 .session_btn:not(.curbtn) .tab_middle:before\n        { height : 5px; }\n\n    .editor_tab.step5 .session_btn:not(.curbtn) .tab_middle\n        { height : 3px; }\n    .editor_tab.step6 .session_btn:not(.curbtn) .tab_middle\n        { height : 0px; }\n\n    .editor_tab.step1 .tab_middle *\n        { opacity: 0.8; }\n    .editor_tab.step2 .tab_middle *\n        { opacity: 0.6; }\n    .editor_tab.step3 .tab_middle *\n        { opacity: 0.4; }\n    .editor_tab.step4 .tab_middle *\n        { opacity: 0.2; }\n    .editor_tab.step5 .tab_middle *\n        { opacity: 0; }\n\n\n    /* ------------------------------------------------------------------------------------------\n     * Other\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab .btnsesssioncontainer .session_btn .sessiontab_icon {\n        background-repeat: no-repeat;\n        background-position: 0 0;\n    }\n\n    /*.editor_tab .btnsesssioncontainer .saving_active .sessiontab_icon {\n        background-image: url(images/save-indicator-active-tab.gif);\n    }\n    .editor_tab .btnsesssioncontainer .saving .sessiontab_icon {\n        background-image: url(images/save-indicator-inactive-tab.gif);\n    }*/\n\n    /*.editor_tab .btnsesssioncontainer .loading_active .sessiontab_icon {\n\n        background-image: url(images/load-indicator-active-tab.gif);\n    }\n\n    .editor_tab .btnsesssioncontainer .loading .sessiontab_icon {\n        background-image: url(images/load-indicator-inactive-tab.gif);\n    }*/\n\n    .editor_tab .btnsesssioncontainer div.down {\n        text-shadow: none;\n        color: #d9d9d9;\n    }\n\n    .codeditorHolder {\n    }\n\n    .editor_tab.offline .btnsesssioncontainer .btnclose strong{\n        display : none;\n    }\n\n    .codeditorHolder .editor_tab {\n        background-color: rgba(220, 220, 220, 0.93);\n        background-image: url(images/c9-noise-light-10.png),\n                          url(images/c9-noise-light-10.png),\n                          url(images/c9-noise-light-10.png);\n    }\n    .editor_tab .editor_bg {\n        position : absolute;\n        /* Old, from before merge\n        top : 0;\n        margin : 0 auto 0 auto;\n        background: #e8e8e8 url(images/editor_tab_bg.png) repeat 0 0;\n	*/\n        top : 25%;\n        margin: 0px auto 0 auto;\n        /*background: #e8e8e8 url(images/editor_tab_bg.png) repeat 0 0;*/\n        /*border-bottom: 1px solid #8c8c8c;\n        border-left: 1px solid #8c8c8c;\n        border-right: 1px solid #8c8c8c;*/\n        overflow: hidden;\n        clear: both;\n        left: 0;\n        right: 0;\n        opacity: .8;\n    }\n\n    .editor_tab .editor_bg .editor_bg_content {\n        width: 430px;\n        margin: 0 auto 0;\n        background: url(images/empty_editor_icon.png) no-repeat center 0;\n        padding-top: 170px;\n        text-align: center;\n        color: #333333;\n        text-shadow : rgba(255, 255, 255, .71) 1px 1px 1px;\n        font-size: 18px;\n        top : 25%;\n        position : relative;\n    }\n\n    .infraeditor.editor_tab .editor_bg .editor_bg_content {\n        margin-top: 0;\n    }\n\n    .editor_tab .editor_bg .editor_bg_content .editor_bg_message2 {\n        background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(237,237,237)),color-stop(1, rgb(255,255,255)));\n        background: -moz-linear-gradient(center bottom,rgb(237,237,237) 0%,rgb(255,255,255) 100%);\n        -webkit-box-shadow: 1px 1px 3px #aaaaaa;\n        -moz-box-shadow: 1px 1px 3px #aaaaaa;\n        box-shadow: 1px 1px 1px #aaaaaa;\n        padding: 15px 20px;\n        margin-top: 21px;\n        color: #2270b2;\n        font-size: 11px;\n        text-transform:uppercase;\n        border-radius : 4px;\n        -moz-border-radius: 4px;\n        -webkit-border-radius: 4px;\n    }\n\n    .editor_tab .editor_bg .editor_bg_content .editor_bg_message {\n        color: #489829;\n        font-family: georgia;\n        padding-top: 4px;\n        background: url(images/green-arrow-left.png) no-repeat 0 0;\n        text-shadow : rgba(240, 240, 240, .71) 1px 1px 1px;\n    }\n\n    .editor_tab .editor_bg .editor_bg_message-top {\n        color: #489829;\n        font-family: georgia;\n        padding-top: 4px;\n        text-shadow : rgba(240, 240, 240, .71) 0px 1px 1px;\n        font-size: 16px;\n        margin: 35px auto 0;\n        width: 430px;\n        text-align: center;\n        display: none;\n    }\n\n    .infraeditor.editor_tab .editor_bg .editor_bg_message-top {\n        display: block;\n    }\n\n    .editor_tab .editor_bg .editor_bg_message-top span {\n        color: #a1a1a1;\n        font-size: 12px;\n    }\n\n    .editor_tab .editor_bg .editor_divider {\n        background: url(images/empty_editor_divider.png) no-repeat center center;\n        height: 14px;\n        width: 430px;\n        margin-top: 20px;\n    }\n\n    .editor_tab .session_page {\n        display : none;\n        position : absolute;\n        top : 0px;\n        bottom : 0;\n        left : 0;\n        right : 0;\n        z-index : 10;\n        margin: 0 auto;\n        padding-top:6px;\n        clear: both;\n        box-shadow: 0 1px 0 0 rgba(255, 255, 255, .9) inset;\n    }\n    .dark .editor_tab .session_page {\n        box-shadow: 0 1px 0 0 rgba(255, 255, 255, .1) inset;\n    }\n\n    .editor_tab .session_page.curpage{\n        display : block;\n    }\n\n\n/*\n    .editor_tab.hidetabs .btnsesssioncontainer:hover {\n        height: 32px;\n    }\n\n    .editor_tab.hidetabs .btnsesssioncontainer:hover ~ .editor_bg,\n    .editor_tab.hidetabs .btnsesssioncontainer:hover ~ .session_page {\n        top: 30px;\n    }\n\n    .editor_tab.hidetabs .btnsesssioncontainer:hover .tab_middle{\n        text-indent: 0;\n    }*/\n\n    .editor_tab:not(.empty) .editor_bg {\n        display: none;\n    }\n\n    .editor_tab:not(.empty) {\n        /*background: #F0F0F0 none;*/\n    }\n]]></a:style>\n<a:style condition="apf.isGecko">\n    .editor_tab.hidetabs .session_btn:not(.curbtn) {\n        top: 0px;\n    }\n    .editor_tab.hidetabs .curbtn {\n        top: 0px;\n    }\n\n    .editor_tab .tab_middle {\n        height : 18px;\n    }\n\n    .editor_tab .tab_right, .editor_tab .tab_left {\n        height : 22px;\n    }\n\n    .editor_tab .curbtn .tab_right,\n    .editor_tab .curbtn .tab_left{\n        box-shadow : 0 1px 0 0 #e9e9e9;\n    }\n\n    .editor_tab .btnsesssioncontainer > .session_btn {\n        max-width : 190px;\n    }\n</a:style>\n<a:style condition="apf.isWebkit">\n	/* ------------------------------------------------------------------------------------------\n     * Tab shape\n     * --------------------------------------------------------------------------------------- */\n	.editor_tab .tab_middle {\n        overflow: visible;\n    }\n    .editor_tab .tab_left,\n    .editor_tab .tab_right {\n    	display: none;\n    }\n    .editor_tab .scale .btn .tab_middle {\n        display : block;\n        overflow : hidden;\n        text-overflow : ellipsis;\n        white-space : nowrap;\n    }\n    .editor_tab .session_btn {\n        overflow: visible;\n    }\n    /* ------------------------------------------------------------------------------------------\n     * Unselected tab default state\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab .session_btn:not(.curbtn) .tab_middle:before,\n    .editor_tab .session_btn:not(.curbtn) .tab_middle:after {\n        box-shadow   : 0 1px 0 0 rgba(255,255,255,.10) inset, 0 -1px 0 0 #000 inset;\n    }\n    .editor_tab .session_btn:not(.curbtn) .tab_middle {\n        box-shadow   : 0 -1px 0 0 #000 inset, 0 1px 0 0 rgba(255,255,255,.10) inset;\n    }\n    .editor_tab .session_btn .tab_middle {\n        background-image    : url(images/c9-repeat-x.png);\n        background-repeat   : repeat-x;\n        background-position : 0 -79px;\n    }\n    .dark .editor_tab .session_btn .tab_middle {\n        background-position : 0 -1155px;\n    }\n    .dark .editor_tab .session_btn:not(.curbtn) .tab_middle .sessiontab_title {\n        color: rgba(255,255,255,.5);\n    }\n    .editor_tab .session_btn:not(.curbtn) .tab_middle {\n        background-color    : #303030;\n        color               : #cecece;\n        /*-webkit-transition: background-color .1s linear;*/\n    }\n\n    .editor_tab .session_btn .tab_middle:before {\n        background-image    : url(images/c9-no-repeat.png), url(images/c9-repeat-x.png);\n        background-position : 0 -158px, 0 -79px;\n        background-repeat   : no-repeat, repeat-x;\n    }\n    .dark .editor_tab .session_btn .tab_middle:before {\n        background-position : 0 -158px, 0 -1155px;\n    }\n    .editor_tab .session_btn .tab_middle:after {\n        background-image    : url(images/c9-no-repeat.png), url(images/c9-repeat-x.png);\n        background-position : -31px -158px, 0 -79px;\n        background-repeat   : no-repeat, repeat-x;\n    }\n\n    .dark .editor_tab .session_btn .tab_middle:after {\n        background-position : -31px -158px, 0 -1155px;\n    }\n\n    /* ------------------------------------------------------------------------------------------\n     * Unselected tab hover\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab .session_btn.over:not(.curbtn) .tab_middle {\n        background-color: #222222;\n    }\n\n    /* ------------------------------------------------------------------------------------------\n     * Selected tab default state\n     * --------------------------------------------------------------------------------------- */\n    .editor_tab .curbtn .tab_middle {\n        background-image    : url(images/c9-repeat-x.png);\n        background-position : 0 -57px;\n        background-repeat   : repeat-x;\n        color               : #000;\n    }\n    .dark .editor_tab .curbtn .tab_middle {\n        background-position : 0 -1126px;\n    }\n    .editor_tab .curbtn .tab_middle:before {\n        background-image    : url(images/c9-no-repeat.png), url(images/c9-repeat-x.png);\n        background-position : 0px -132px, 0 -57px;\n    }\n    .dark .editor_tab .curbtn .tab_middle:before {\n        background-position : 0px -192px, 0 -1126px;\n    }\n    .editor_tab .curbtn .tab_middle:after {\n        background-image    : url(images/c9-no-repeat.png), url(images/c9-repeat-x.png);\n        background-position : -31px -132px, 0 -57px;\n    }\n    .dark .editor_tab .curbtn .tab_middle:after {\n        background-position : -31px -192px, 0 -1126px;\n    }\n\n    /* ------------------------------------------------------------------------------------------\n     * Selected tab hover\n     * --------------------------------------------------------------------------------------- */\n\n</a:style>\n\n<a:presentation>\n    <a:main pages="." buttons="div[1]">\n        <div class="editor_tab empty">\n            <div class="btnsesssioncontainer">\n\n            </div>\n            <div class="editor_bg">\n                <div class="editor_bg_message-top">\n                    Invite people to this project by sharing the URL with them.\n<!--                    <span>To access private projects both parties must have a Premium Account.</span>-->\n                    <div class="editor_divider"></div>\n                </div>\n                <div class="editor_bg_content">\n                    <div class="editor_bg_message">Open a file or create a new one to get started</div>\n                </div>\n            </div>\n        </div>\n    </a:main>\n    <a:button\n      caption   = "div[1]/div[2]/text()"\n      container = "div"\n      icon      = "div[1]/div">\n        <div class="session_btn">\n            <div class="tab_middle">\n                <div class="sessiontab_icon"> </div>\n                <div class="sessiontab_title">-</div>\n                <div class="sessiontab_saving"> </div>\n            </div>\n            <div class="tab_left"> </div>\n            <div class="tab_right"> </div>\n        </div>\n    </a:button>\n    <a:btnclose>\n        <strong> </strong>\n    </a:btnclose>\n    <a:page container=".">\n        <div class="session_page"> </div>\n    </a:page>\n</a:presentation>\n</a:tab>\n<a:tab name="tab">\n    <a:style><![CDATA[\n        .tab {\n            padding : 0 0 0 0;\n            border: 0px solid #c3c3c3;\n            margin : 0 auto;\n            overflow: hidden;\n            position:relative;\n            padding-top: 17px;\n        }\n\n        .tab .btncontainer{\n            padding : 0 0 1px;\n            z-index : 100;\n            height: 15px;\n            overflow: visible;\n            white-space: nowrap;\n            color: #404040;\n            text-shadow : rgba(255, 255, 255, 1) 0px 1px 0px;\n            font-family : Tahoma, Arial;\n            font-size : 11px;\n            border-bottom : 1px solid #8c8c8c;\n\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(209,209,209)),color-stop(1, rgb(227,227,227)));\n            background: -moz-linear-gradient(center bottom,rgb(209,209,209) 0%,rgb(227,227,227) 100%);\n            margin-top : -16px;\n            width : auto;\n        }\n\n        .tab .btncontainer>div {\n            display: block;\n            display : inline-block;\n            margin: 0 0 0 0;\n            padding: 0;\n            position : relative;\n            vertical-align : bottom;\n            cursor : default;\n        }\n\n        .tab .btncontainer .btntab {\n            padding      : 1px 10px 2px 10px;\n            position     : relative;\n            margin-top:-1px;\n            text-align: center;\n            border-top : 1px solid #ffffff;\n            border-right : 1px solid #8c8c8c;\n            border-bottom : 1px solid #8c8c8c;\n\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.5, rgb(199,199,199)),color-stop(1, rgb(214,214,214)));\n            background: -moz-linear-gradient(center bottom,rgb(199,199,199) 50%,rgb(214,214,214) 100%);\n        }\n\n        /*.tab .btncontainer div.firstbtn {\n            margin-left: 0;\n        }*/\n\n        .tab .btncontainer .btntab .tab_icon {\n            height:16px;\n            left:1px;\n            position:absolute;\n            top:1px;\n            width:16px;\n        }\n\n        .tab .btncontainer .btntab .tab_title {\n            overflow : hidden;\n            padding  : 0 0 0 0;\n        }\n\n        .tab .btncontainer .btntab.btnclose .tab_title {\n            margin-right : 15px;\n        }\n\n        .tab .scale .btntab .tab_title{\n            display : block;\n            overflow : hidden;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n        }\n\n        .tab .btncontainer div.over {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(209,209,209)),color-stop(1, rgb(227,227,227)));\n            background: -moz-linear-gradient(center bottom,rgb(209,209,209) 0%,rgb(227,227,227) 100%);\n            cursor: default;\n        }\n\n        .tab .btncontainer div.curbtn {\n            color       : #202020;\n            cursor      : default;\n            z-index     : 1;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.6 rgb(246,246,246)),color-stop(1, rgb(237,237,237)));\n            background: -moz-linear-gradient(center bottom,rgb(246,246,246) 60%,rgb(237,237,237) 100%);\n            border-right : 1px solid #8c8c8c;\n            border-top: 1px solid #f9f9f9;\n            border-bottom: 1px solid #F6F6F6;\n        }\n\n        .tab .scale .btntab .tab_middle {\n            display : block;\n            overflow : hidden;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n        }\n\n        .tabFocus .curbtn{\n        }\n\n        .tab .btncontainer .btnclose strong {\n            width               : 14px;\n            height              : 14px;\n            display             : block;\n            position            : absolute;\n            right               : 0;\n            top                 : 7px;\n            background-image    : url(images/close_tab_btn.png);\n            background-repeat   : no-repeat;\n            background-position : 0 -14px;\n        }\n\n        .tab .btncontainer .btnclose strong:hover {\n            background-position : -14px -14px;\n        }\n\n        .tab .btncontainer .btnclose strong:active {\n            background-position : -28px -14px;\n        }\n\n        .tab .btncontainer .curbtn.btnclose strong {\n            background-position : 0 0;\n            top: 7px;\n        }\n\n        .tab .btncontainer .curbtn.btnclose strong:hover {\n            background-position : -14px 0;\n        }\n\n        .tab .btncontainer .curbtn.btnclose strong:active {\n            background-position : -28px 0;\n        }\n\n        .tab .page {\n            display : none;\n            position : absolute;\n            top : 18px;\n            bottom : 0;\n            left : 0;\n            right : 0;\n            z-index : 10;\n            margin: 0 auto;\n            background-color: #f6f6f6;\n            overflow: hidden;\n            clear: both;\n            font-family : Arial;\n            font-family: 12px;\n        }\n\n        .tab .page.curpage{\n            display : block;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main pages="." buttons="div[1]">\n            <div class="tab">\n                <div class="btncontainer"> </div>\n            </div>\n        </a:main>\n        <a:button caption="div[1]/text()" container="div" maxwidth="90" minwidth="10">\n            <div class="btntab">\n                <!--div class="tab_icon"> </div-->\n                <div class="tab_title">-</div>\n            </div>\n        </a:button>\n        <a:btnclose>\n            <strong> </strong>\n        </a:btnclose>\n        <a:page container=".">\n            <div class="page"> </div>\n        </a:page>\n    </a:presentation>\n</a:tab>\n<a:tab name="extensions_tab">\n    <a:style><![CDATA[\n        .extensions_tab {\n            padding : 0 0 0 0;\n            border: 0px solid #c3c3c3;\n            margin : 0 auto;\n            overflow: hidden;\n            position:relative;\n        }\n\n        .extensions_tab .btncontainer{\n            float: left;\n            z-index : 100;\n            white-space: nowrap;\n            color: #404040;\n            text-shadow : rgba(255, 255, 255, 1) 0px 1px 0px;\n            font-family : Tahoma, Arial;\n            font-size : 11px;\n\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(209,209,209)),color-stop(1, rgb(227,227,227)));\n            background: -moz-linear-gradient(center bottom,rgb(209,209,209) 0%,rgb(227,227,227) 100%);\n            width : auto;\n        }\n\n        .extensions_tab .btncontainer>div {\n            display: block;\n            margin: 0 0 0 0;\n            padding: 0;\n            position : relative;\n        }\n\n        .extensions_tab .btncontainer .btntab {\n            padding      : 10px;\n            position     : relative;\n            border-bottom : 1px solid #8c8c8c;\n            cursor : default;\n            width : 110px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.5, rgb(234,234,234)),color-stop(1, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(234,234,234) 50%,rgb(255,255,255) 100%);\n        }\n\n        .extensions_tab .btncontainer .btntab .tab_icon {\n            height:16px;\n            left:1px;\n            position:absolute;\n            top:1px;\n            width:16px;\n        }\n\n        .extensions_tab .btncontainer .btntab .tab_title {\n            overflow : hidden;\n            padding  : 0 0 0 0;\n            font-size: 12px;\n        }\n\n        .extensions_tab .btncontainer .btntab.btnclose .tab_title {\n            margin-right : 15px;\n        }\n\n        .extensions_tab .scale .btntab .tab_title{\n            display : block;\n            overflow : hidden;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n        }\n\n        .extensions_tab .btncontainer div.over {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(209,209,209)),color-stop(1, rgb(227,227,227)));\n            background: -moz-linear-gradient(center bottom,rgb(209,209,209) 0%,rgb(227,227,227) 100%);\n        }\n\n        .extensions_tab .btncontainer div.curbtn {\n            color       : #202020;\n            z-index     : 1;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(209,209,209)),color-stop(1, rgb(227,227,227)));\n            background: -moz-linear-gradient(center bottom,rgb(209,209,209) 0%,rgb(227,227,227) 100%);\n            -webkit-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.2) inset;\n            -moz-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.2) inset;\n        }\n\n        .extensions_tab .scale .btntab .tab_middle {\n            display : block;\n            overflow : hidden;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n        }\n\n        .extensions_tab .page {\n            display : none;\n            position : absolute;\n            padding: 10px 14px;\n            top : 0;\n            bottom : 0;\n            left : 130px;\n            right : 0;\n            z-index : 10;\n            background-color: #f6f6f6;\n            overflow: hidden;\n            clear: both;\n            font-family : Arial;\n            font-family: 12px;\n        }\n\n        .extensions_tab .page.curpage{\n            display : block;\n            border-left : 1px solid #8c8c8c;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main pages="." buttons="div[1]">\n            <div class="extensions_tab">\n                <div class="btncontainer"> </div>\n            </div>\n        </a:main>\n        <a:button caption="div[1]/text()" container="div" maxwidth="90" minwidth="10">\n            <div class="btntab">\n                <!--div class="tab_icon"> </div-->\n                <div class="tab_title">-</div>\n            </div>\n        </a:button>\n        <a:btnclose>\n            <strong> </strong>\n        </a:btnclose>\n        <a:page container=".">\n            <div class="page"> </div>\n        </a:page>\n    </a:presentation>\n</a:tab>\n<a:tab name="dockbar">\n    <a:style><![CDATA[\n        .dockbar {\n            position:relative;\n            overflow: visible;\n        }\n\n        .expandedpanel .dockbar {\n            border-bottom: 1px solid #38393b;\n        }\n\n        .dockcol .dockbar {\n\n        }\n\n        .dockbar .btncontainer{\n            display: none;\n        }\n\n        .dockbar .page {\n            display : none;\n        }\n\n        .dockcol .dockbar .page {\n\n        }\n\n        .dockbar .page.curpage{\n            display : block;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isWebkit"><![CDATA[\n\n    ]]></a:style>\n    <a:presentation>\n        <a:main pages="." buttons="div[1]">\n            <div class="dockbar">\n                <div class="btncontainer"> </div>\n            </div>\n        </a:main>\n        <a:button\n          caption   = "text()"\n          container = "."\n          maxwidth  = "100"\n          minwidth  = "10">\n            <div class="btntab">\n            </div>\n        </a:button>\n        <a:btnclose>\n            <strong> </strong>\n        </a:btnclose>\n        <a:page container=".">\n            <div class="page"> </div>\n        </a:page>\n    </a:presentation>\n</a:tab>\n<a:tab name="docktab">\n    <a:style><![CDATA[\n        .docktab {\n            border: 0px solid #c3c3c3;\n            margin : 0 auto;\n            overflow: hidden;\n            position:relative;\n\n            -webkit-border-radius: 4px;\n            -moz-border-radius: 4px;\n            border-radius: 4px;\n        }\n\n        .dockcol .docktab,\n        .dragging.docktab {\n            -webkit-border-radius: 0;\n            -moz-border-radius: 0;\n            border-radius: 0;\n        }\n\n        .docktab .btncontainer{\n            padding : 0;\n            z-index : 100;\n            height: 22px;\n            overflow: visible;\n            white-space: nowrap;\n            width : auto;\n\n            clip: rect(0px 3000px 30px 0px);\n            display : -webkit-box;\n            display : -moz-box;\n        }\n\n        .dockcol .docktab .btncontainer{\n            padding-top: 4px;\n            padding-left: 3px;\n            padding-right: 5px;\n        }\n\n        .dragging.docktab .btncontainer {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #202020),color-stop(1, #2f2f2f));\n            background: -moz-linear-gradient(center bottom,#202020 0%, #2f2f2f 100%);\n        }\n\n        .docktab .btncontainer .btntab {\n            display: block;\n            margin: 0 0 0 0;\n            padding: 0;\n            position : relative;\n            cursor : default;\n\n            min-width : 17px;\n            max-width : 100px;\n            -webkit-box-flex : 1;\n            -moz-box-flex : 1;\n            width : 0;\n\n            padding       : 3px 2px 4px;\n            position      : relative;\n            text-align    : center;\n            border-right  : 1px solid #464646;\n            border-bottom : 1px solid #464646;\n\n            -moz-box-shadow: 0 1px 0 rgba(100, 100, 100, 0.26) inset;\n            -webkit-box-shadow: 0 1px 0 rgba(100, 100, 100, 0.26) inset;\n\n            background: url(images/black-tab_btn_bg.png) 0 0;\n        }\n\n        .docktab .btncontainer .btntab.firstbtn {\n            -webkit-border-top-left-radius : 4px;\n            -moz-border-radius-topleft     : 4px;\n            border-top-left-radius: 4px;\n        }\n        .docktab .btncontainer .btntab.lastbtn {\n            -webkit-border-top-right-radius : 4px;\n            -moz-border-radius-topright     : 4px;\n            border-top-right-radius: 4px;\n        }\n\n        .expandedpanel .docktab .btncontainer .btntab {\n            padding-top: 2px;\n            -webkit-border-radius: 0;\n            -moz-border-radius: 0;\n            border-radius: 0;\n        }\n\n        .dragging.docktab .btncontainer .btntab {\n            -webkit-border-radius: 0;\n            -moz-border-radius: 0;\n            border-radius: 0;\n        }\n\n        .docktab .btncontainer .btntab .tab_icon {\n            height   : 16px;\n            left     : 1px;\n            position : absolute;\n            top      : 1px;\n            width    : 16px;\n        }\n\n        .docktab .btncontainer .btntab .tab_title {\n            overflow : hidden;\n            padding  : 1px 0 0 2px;\n            color    : #bbbbbb;\n\n            text-shadow : #303030 0px 1px 0px;\n            font-family : "Arial", Tahoma;\n            font-size : 11px;\n        }\n\n        .docktab .btncontainer .btntab.btnclose .tab_title {\n            margin-right : 15px;\n        }\n\n        .docktab .scale .btntab .tab_title{\n            display : block;\n            overflow : hidden;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n        }\n\n        .docktab .btncontainer div.over {\n            background: url(images/black-tab_btn_bg.png) 0 -22px;\n            cursor: default;\n        }\n\n        .docktab .btncontainer div.curbtn {\n            color       : #202020;\n            cursor      : default;\n            z-index     : 1;\n            background-image: linear-gradient(bottom, rgb(250,252,254) 60%, rgb(255,255,255) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(250,252,254) 60%, rgb(255,255,255) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(250,252,254) 60%, rgb(255,255,255) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(250,252,254) 60%, rgb(255,255,255) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(250,252,254) 60%, rgb(255,255,255) 100%);\n            border-right : 1px solid #8c8c8c;\n            border-bottom: 1px solid #FAFCFE;\n        }\n\n        .docktab .btncontainer .btntab.curbtn .tab_title {\n            color: #373d43;\n            text-shadow : rgba(255,255,255,0.7) 0px 1px 0px;\n        }\n\n        .docktab .scale .btntab .tab_middle {\n            display : block;\n            overflow : hidden;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n        }\n\n        .tabFocus .curbtn{\n        }\n\n        .docktab .btncontainer .btnclose strong {\n            width               : 14px;\n            height              : 14px;\n            position            : absolute;\n            right               : 2px;\n            top                 : 5px;\n            background-image    : url(images/close_tab_btn.png);\n            background-repeat   : no-repeat;\n            background-position : 0 -14px;\n        }\n\n        .docktab .btncontainer .btnclose:hover strong {\n            display: block;\n        }\n\n        .docktab .btncontainer .btnclose strong:hover {\n            background-position : -14px -14px;\n        }\n\n        .docktab .btncontainer .btnclose strong:active {\n            background-position : -28px -14px;\n        }\n\n        .docktab .btncontainer .curbtn.btnclose strong {\n            background-position : 0 0;\n            top: 4px;\n        }\n\n        .docktab .btncontainer .curbtn.btnclose strong:hover {\n            background-position : -14px 0;\n        }\n\n        .docktab .btncontainer .curbtn.btnclose strong:active {\n            background-position : -28px 0;\n        }\n\n        .expandedpanel .docktab .btncontainer .btnclose strong {\n            top: 4px;\n        }\n\n        .expandedpanel .docktab .btncontainer .curbtn.btnclose strong {\n            top: 3px;\n        }\n\n        .dockcol .docktab .noise_bg {\n            background: url(images/noise_pattern_transparent.png) 0 0;\n            bottom: 0;\n            left: 0;\n            opacity: 0.1;\n            position: absolute;\n            right: 0;\n            top: 0;\n            display: none;\n        }\n\n        .dockcol .docktab .noise_bg {\n            display: block;\n        }\n\n        .docktab .page {\n            display : none;\n            position : absolute;\n            top : 19px;\n            bottom : 0;\n            left : 0;\n            right : 0;\n            z-index : 10;\n            margin: 0 auto;\n            background-color: #f6f6f6;\n            overflow: hidden;\n            border-radius: 0 0 4px 4px;\n        }\n        .docktab .page > div {\n            border-radius: 0 0 4px 4px;\n        }\n\n        .docktab .page .ace_gutter {\n            border-radius: 0 0 0 4px;\n        }\n\n        .expandedpanel .docktab .page > div,\n        .expandedpanel .docktab .page .ace_gutter {\n            border-radius: 0;\n        }\n\n        .dockcol .docktab .page {\n            top: 23px;\n            right: 4px;\n            left: 3px;\n            bottom: 5px;\n        }\n\n        .docktab .page.curpage{\n            display : block;\n        }\n\n        /**\n         * blink 182\n         */\n        @-webkit-keyframes blink_tab { 0%, 49.99% { color: rgba(206, 164, 164, 1) } 50%, 100% { color: rgba(206, 164, 164, 0.5) }  }\n        @-moz-keyframes blink_tab { 0%, 49.99% { color: rgba(206, 164, 164, 1) } 50%, 100% { color: rgba(206, 164, 164, 0.5) }  }\n        @keyframes blink_tab { 0%, 49.99% { color: rgba(206, 164, 164, 1) } 50%, 100% { color: rgba(206, 164, 164, 0.5) }  }\n\n        .un-read-message .tab_title {\n            -webkit-animation:blink_tab 2s/*this is the time*/ linear 0s infinite normal;\n            -moz-animation:blink_tab 2s/*this is the time*/ linear 0s infinite normal;\n            animation:blink_tab 2s/*this is the time*/ linear 0s infinite normal;\n        }\n\n    ]]></a:style>\n    <a:style condition="apf.isWebkit">\n        .docktab .btncontainer .btntab {\n            padding : 2px 2px 3px 2px;\n        }\n\n        .docktab .btncontainer .btnclose strong {\n            top: 4px;\n        }\n\n        .docktab .btncontainer .curbtn.btnclose strong {\n            top: 3px;\n        }\n    </a:style>\n\n    <a:presentation>\n        <a:main pages="." buttons="div[3]">\n            <div class="docktab">\n                <div class="expand-panel-bg"> </div>\n                <div class="noise_bg"> </div>\n                <div class="btncontainer"> </div>\n            </div>\n        </a:main>\n        <a:button\n          caption   = "div[1]"\n          container = "."\n          maxwidth  = "100"\n          minwidth  = "10">\n            <div class="btntab">\n                <!--div class="tab_icon"> </div-->\n                <div class="tab_title">-</div>\n            </div>\n        </a:button>\n        <a:btnclose>\n            <strong> </strong>\n        </a:btnclose>\n        <a:page container=".">\n            <div class="page"> </div>\n        </a:page>\n    </a:presentation>\n</a:tab>\n\n<a:text name="text">\n    <a:style><![CDATA[\n        .text{\n            font-family: "Lucida Grande", Verdana;\n            font-size: 8pt;\n            color: #333;\n            background : white;\n            overflow : auto;\n        }\n        .dockblank .text{\n            height : 100%;\n        }\n\n        .textEmpty{\n            font-size : 8pt;\n            font-weight : bold;\n            color : #ccc;\n            text-align : center;\n        }\n\n        .textFocus{\n        }\n\n        .text.modal_text {\n            font-family: Arial;\n            font-size: 12px;\n            background-color: transparent;\n            color: #202020;\n            line-height: 18px;\n        }\n\n        .apf_console{\n            border : 1px solid #c3c3c3;\n            border-width : 0 1px 0 0;\n            font-size : 11px;\n            font-family : Monaco,"Courier New",monospace;\n        }\n\n        .apf_console .item{\n            min-height : 13px;\n            padding : 2px 2px 2px 2px;\n            line-height : 13px;\n            border-bottom : 1px solid #EEE;\n            word-wrap : break-word;\n        }\n\n        .apf_console .console_time{\n            background : url(resources/time.png) no-repeat 2px 2px;\n        }\n\n        .apf_console .console_log{\n            color : #eeeeee;\n            background : url(resources/bullet_green.png) no-repeat 2px 2px;\n        }\n\n        .apf_console .console_custom{\n            background : url(resources/bullet_green.png) no-repeat 2px 2px;\n        }\n\n        .apf_console .console_warn{\n            background : url(resources/error.png) no-repeat 2px 2px;\n            color      : green;\n        }\n\n        .apf_console .console_error{\n            background : url(resources/exclamation.png) no-repeat 2px 2px;\n            color      : #c93a40;\n        }\n\n        .apf_console .console_repeat{\n            background : url(resources/bullet_green.png) no-repeat 2px 2px;\n            color      : #909090;\n        }\n\n        .apf_console .item a{\n            text-decoration : none;\n        }\n        .apf_console .item a:hover{\n            text-decoration : underline;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="text"/>\n        </a:main>\n    </a:presentation>\n</a:text>\n\n<a:textbox name="tb_console">\n    <a:style><![CDATA[\n        .tb_console {\n            position : relative;\n            height   : 31px;\n        }\n\n        .tb_console .sbtb_middle {\n            border          : 1px solid #000;\n            background      : #eee;\n            box-shadow      : inset 0 2px 3px 0 rgba(0,0,0,.5);\n            color           : #202020;\n            font-size       : 14px;\n            height          : 19px;\n            line-height     : 18px;\n            padding         : 2px 4px 0px 4px;\n            outline         : none;\n            text-overflow   : ellipsis;\n        }\n        .tb_console .sbtb_middle .input { height : 18px; }\n        .tb_consoleFocus .sbtb_middle,\n        .tb_consoleOver .sbtb_middle,\n        .tb_console .sbtb_middle:hover {\n        }\n\n        .topborder .sbtb_middle{\n            border-width : 1px 0 0 0;\n        }\n\n        .tb_console .sbtb_middle INPUT,\n        .consoleInputCloned {\n            border           : 0;\n            height           : 17px;\n            line-height      : 15px;\n            font-size        : 12px;\n            color            : #303030;\n            font-family      : menlo,courier new,fixed,swiss,sans-serif;\n            outline          : none;\n            background-color : transparent;\n            width: 100%;\n            padding : 0;\n        }\n\n        .tb_console.tb_textboxInitial .input {\n            font-size : 10px;\n        }\n        \n        .tb_console.tb_textboxInitial .ace_cursor{\n            display : none;\n        }\n\n        .tb_consoleDisabled .sbtb_middle {\n            background      : #e2e2e2;\n        }\n        .tb_consoleDisabled .sbtb_middle INPUT {\n            color : #b3b3b3;\n        }\n\n        .tb_consoleDisabled .sbtb_middle{\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(235,235,235)),color-stop(0.4, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(235,235,235) 0%,rgb(255,255,255) 40%);\n            cursor : default;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input="div[1]/div">\n            <div class="tb_console">\n                <div class="sbtb_middle">\n                    <div class="input"/>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:textbox name="tbsimple">\n    <a:style><![CDATA[\n        .tbsimple{\n            border : 0;\n            padding : 1px 1px 2px 1px;\n            margin : 1px 0 0 2px;\n            font-family : Tahoma, Arial;\n            outline : none;\n        }\n\n        .tbsimple.tbtree{\n            margin : -1px 0 0 -2px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input=".">\n            <input type="text" class="tbsimple" />\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:textbox name="textbox">\n    <a:alias>input</a:alias>\n    <a:alias>secret</a:alias>\n    <a:style><![CDATA[\n        .tb_textbox {\n            position : relative;\n            height   : 25px;\n        }\n\n        .tb_textbox .sbtb_middle {\n            height           : 19px;\n            padding          : 2px 5px;\n            border: 1px solid #afafaf;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.5, rgb(255,255,255)),color-stop(1, rgb(235,235,235)));\n            background: -moz-linear-gradient(center bottom,rgb(255,255,255) 50%,rgb(235,235,235) 100%);\n            color: #333333;\n            margin: 0;\n            outline: none;\n            font-family: Tahoma, Arial;\n            font-size: 12px;\n            text-overflow: ellipsis;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n        }\n\n        .topborder .sbtb_middle{\n            border-width : 1px 0 0 0;\n        }\n\n        .tb_textbox .sbtb_middle INPUT {\n            border           : 0;\n            height           : 17px;\n            font-size        : 12px;\n            color            : #333333;\n            font-family      : Arial;\n            outline          : none;\n            background-color : transparent;\n            width: 100%;\n        }\n\n        .tb_textboxInitial .sbtb_middle INPUT {\n            color : #777777;\n        }\n\n        .tb_textboxDisabled .sbtb_middle INPUT {\n            color : #CCC;\n        }\n\n        .tb_textboxDisabled .sbtb_middle{\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(235,235,235)),color-stop(0.4, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(235,235,235) 0%,rgb(255,255,255) 40%);\n            cursor : default;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input="div[1]/input">\n            <div class="tb_textbox">\n                <div class="sbtb_middle">\n                    <input type="text"/>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:textbox name="black_textbox">\n    <a:style><![CDATA[\n        .btextbox {\n            position : relative;\n            -webkit-box-shadow: 0px 1px 0px #424242;\n            -moz-box-shadow: 0px 1px 0px #424242;\n            box-shadow: 0px 1px 0px #424242;\n            background-image: linear-gradient(bottom, rgb(92,92,92) 0%, rgb(105,105,105) 75%, rgb(92,92,92) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(92,92,92) 0%, rgb(105,105,105) 75%, rgb(92,92,92) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(92,92,92) 0%, rgb(105,105,105) 75%, rgb(92,92,92) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(92,92,92) 0%, rgb(105,105,105) 75%, rgb(92,92,92) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(92,92,92) 0%, rgb(105,105,105) 75%, rgb(92,92,92) 100%);\n\n            padding          : 1px;\n            color: #ffffff;\n            margin: 0;\n            outline: none;\n            font-family: Tahoma, Arial;\n            font-size: 12px;\n            text-overflow: ellipsis;\n            border : 1px solid #262626;\n        }\n\n        .btextbox INPUT {\n            border           : 0;\n            font-size        : 11px;\n            color            : #ffffff;\n            font-family      : Arial;\n            outline          : none;\n            background-color : transparent;\n            width: 100%;\n        }\n\n        .btextboxFocus {\n            background-color: #96a28f;\n            background-image: none;\n        }\n\n        .btextboxInitial INPUT {\n            color : #777777;\n        }\n\n        .btextboxError {\n            background-color: #9f3636;\n            background-image: none;\n        }\n\n        .btextboxDisabled INPUT {\n            color : #fff;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input="input">\n            <div class="btextbox">\n                <input type="text"/>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:textbox name="searchbox_textbox">\n    <a:style><![CDATA[\n        .searchbox_textbox {\n            position : relative;\n            height   : 25px;\n        }\n\n        .docs_searchbox.searchbox_textbox {\n            height: 34px;\n        }\n\n        .searchbox_textbox .sbtb_middle {\n            height           : 19px;\n            padding          : 2px 25px 2px 4px;\n\n\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.5, rgb(255,255,255)),color-stop(1, rgb(235,235,235)));\n            background: -moz-linear-gradient(center bottom,rgb(255,255,255) 50%,rgb(235,235,235) 100%);\n            color: #333333;\n            border: 1px solid #afafaf;\n            border-radius : 3px;\n            margin: 0;\n            outline: none;\n            font-family: Tahoma, Arial;\n            font-size: 12px;\n            text-overflow: ellipsis;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n        }\n\n        .docs_searchbox.searchbox_textbox .sbtb_middle {\n            height: 28px;\n            -webkit-box-shadow: inset 0px 1px 4px 0px rgba(0, 0, 0, 0.1), 0px 1px 0px 0px #ffffff; ;\n            box-shadow: inset 0px 1px 4px 0px rgba(0, 0, 0, 0.1), 0px 1px 0px 0px #ffffff; ;\n            background: #ffffff;\n            border: 1px solid #d2d2d2;\n        }\n\n        .searchbox_textbox .sbtb_middle INPUT {\n            border           : 0;\n            height           : 17px;\n            font-size        : 12px;\n            color            : #333333;\n            font-family      : Arial;\n            outline          : none;\n            background-color : transparent;\n            width: 100%;\n        }\n\n        .docs_searchbox.searchbox_textbox.searchbox_textboxInitial .sbtb_middle INPUT {\n            color: #acacac;\n        }\n\n        .docs_searchbox.searchbox_textbox .sbtb_middle INPUT {\n            margin-top: 6px;\n            margin-left: 5px;\n            font-size: 14px;\n        }\n\n        .searchbox_textbox.small_font .sbtb_middle,\n        .searchbox_textbox.small_font .sbtb_middle INPUT {\n            font-size: 11px;\n        }\n\n        .searchbox_textboxInitial .sbtb_middle INPUT {\n            color : #777777;\n        }\n\n        .searchbox_textbox .sbtb_arrow {\n\n        }\n\n        .searchbox_textbox .sbtb_icon {\n            width               : 18px;\n            height              : 18px;\n            position            : absolute;\n            top                 : 4px;\n            left                : 5px;\n            background-image    : url(images/searchbox_textbox_icon.png);\n            background-position : 0 0;\n            background-repeat   : no-repeat;\n            display: none;\n        }\n\n        .searchbox_textboxFocus .sbtb_icon {\n            background-position : 0 -18px;\n        }\n\n        .docs_searchbox.searchbox_textbox .sbtb_icon {\n            background-image: url(images/search-icon.png);\n            top: 9px;\n            right: 9px;\n            width: 20px;\n            left: auto;\n            display: block !important;\n        }\n\n        .docs_searchbox.searchbox_textboxFocus .sbtb_icon {\n            background-position: 0 0;\n        }\n\n        .docs_searchbox.searchbox_textbox.searchbox_hasValue .sbtb_icon {\n            display: none !important;\n        }\n\n        .searchbox_textboxFocus .btnclose {\n            position : absolute;\n            right : 8px;\n            top : 5px;\n            width : 14px;\n            height : 14px;\n            background : url(images/btnclose.gif) no-repeat 0 0;\n            display : none;\n        }\n\n        .searchbox_textboxFocus .btnclose:hover{\n            background-position : 0 -14px;\n        }\n\n        .docs_searchbox.searchbox_textbox .btnclose {\n            top: 11px;\n            right: 8px;\n            background : url(images/close-search-icon.png) no-repeat 0 0;\n            display: none;\n        }\n\n        .docs_searchbox.searchbox_textbox .btnclose:hover {\n            background-position: 0 -20px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input="div[2]/input" button="div[3]">\n            <div class="searchbox_textbox">\n                <div class="sbtb_arrow"/>\n                <div class="sbtb_middle">\n                    <input type="text"/>\n                </div>\n                <div class="btnclose"> </div>\n                <div class="sbtb_icon"/>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:textbox name="textarea">\n    <a:style><![CDATA[\n        .ta{\n            overflow: auto;\n            resize: none;\n\n            padding: 2px 6px;\n            border: 1px solid #AFAFAF;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.5, white),color-stop(1, #EBEBEB));\n            background: -moz-linear-gradient(center bottom,white 50%,#EBEBEB 100%);\n            margin: 0;\n            text-overflow: ellipsis;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n\n            font-size: 12px;\n            color: #333;\n            font-family: Arial;\n            outline: none;\n            background-color: transparent;\n        }\n\n        .taFocus{\n        }\n\n        .taDisabled{\n            border: 1px solid #c3c3c3;\n            color: #bebebe;\n        }\n\n        .taInitial{\n            color : gray;\n        }\n\n        .taError{\n            border: 2px solid #ffb500;\n            padding : 5px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input=".">\n            <textarea type="text" class="ta" />\n        </a:main>\n    </a:presentation>\n</a:textbox>\n\n<a:textarea name="textarea_ide">\n    <a:style><![CDATA[\n        .textarea_ide {\n            font-family: Arial;\n            font-size: 10px;\n            color: #202020;\n            padding: 5px;\n            word-wrap: break-word;\n            line-height: 14px;\n            margin-left: 70px;\n            border-top: 1px solid #737373;\n            border-bottom: 1px solid #999999;\n            border-left: 1px solid #999999;\n            border-right: 1px solid #999999;\n            overflow    : auto;\n            outline     : none;\n            background-color: #ffffff;\n        }\n\n        .textarea_ideFocus {\n\n        }\n\n        .textarea_ideDisabled{\n\n        }\n\n        .textarea_ideInitial{\n\n        }\n\n        .textarea_ideError{\n\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input=".">\n            <textarea type=\'text\' class="textarea_ide" />\n        </a:main>\n    </a:presentation>\n</a:textarea>\n\n<a:textbox name="textbox-modal">\n    <a:style><![CDATA[\n        .textbox-modal {\n            position : relative;\n            height   : 29px;\n\n            border-bottom: 1px solid #E3E3E3;\n            border-radius: 0 0px 6px 6px;\n        }\n\n        .textbox-modal .sbtb_middle {\n            margin: 0;\n            outline: none;\n            font-family: Arial;\n            font-size: 11px;\n            text-overflow: ellipsis;\n            color: #333333;\n\n            height           : 22px;\n            padding          : 2px 5px;\n            background-color: #ffffff;\n\n            -webkit-box-shadow: inset 0px 1px 1px 0px #cccccc;\n            -moz-box-shadow: inset 0px 1px 1px 0px #cccccc;\n            box-shadow: inset 0px 1px 1px 0px #cccccc;\n\n            border-width: 1px;\n            border-style: solid;\n            border-color: #8d8d8e #9e9e9c #a5a5a5;\n\n            -webkit-border-radius: 6px;\n            -moz-border-radius: 6px;\n            border-radius: 6px;\n        }\n\n        .textbox-modal.required-tb .sbtb_middle {\n            background-color: #e9f3d0;\n        }\n\n        .textbox-modal .sbtb_middle INPUT {\n            border           : 0;\n            height           : 21px;\n            font-size        : 11px;\n            color            : #333333;\n            font-family      : Arial;\n            outline          : none;\n            background-color : transparent;\n            width: 100%;\n        }\n\n        .textbox-modalInitial .sbtb_middle INPUT {\n            color : #bdbdbd;\n            text-shadow : #ffffff 0px 1px 0px;\n        }\n\n        .textbox-modalInitial.required-tb .sbtb_middle INPUT {\n            color : #9fa987;\n            text-shadow : #fbfff1 0px 1px 0px;\n        }\n\n        .textbox-modalDisabled.required-tb .sbtb_middle INPUT {\n            color : #CCC;\n        }\n\n        .textbox-modalDisabled .sbtb_middle{\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(235,235,235)),color-stop(0.4, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(235,235,235) 0%,rgb(255,255,255) 40%);\n            cursor : default;\n            box-shadow: none;\n        }\n\n        .textbox-modalDisabled .sbtb_middle INPUT {\n            color : #CCC;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isChrome || apf.isSafari"><![CDATA[\n        .textbox-modal .sbtb_middle {\n            padding: 1px 5px 3px;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main input="div[1]/input">\n            <div class="textbox-modal">\n                <div class="sbtb_middle">\n                    <input type="text"/>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n\n<a:toolbar name="toolbar">\n    <a:style><![CDATA[\n        .docktab .toolbar {\n            border-bottom: 1px solid #e1e5ea;\n        }\n\n        .toolbar .menubar {\n            background: url(images/menubar_row.png) repeat-x top left;\n            height: 22px;\n            z-index: 1;\n            font-family: Tahoma, Arial;\n            font-size: 12px;\n            position: relative;\n        }\n\n        .toolbar .subbar {\n            background-image: linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 50%, rgb(243,246,248) 51%, rgb(249,251,254) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 50%, rgb(243,246,248) 51%, rgb(249,251,254) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 50%, rgb(243,246,248) 51%, rgb(249,251,254) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 50%, rgb(243,246,248) 51%, rgb(249,251,254) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 50%, rgb(243,246,248) 51%, rgb(249,251,254) 100%);\n\n\n\n            font-family: Arial;\n            font-size: 12px;\n            border-bottom: 1px solid #E1E5EA;\n            position: relative;\n            padding: 0;\n            width : 100%;\n            overflow : hidden;\n            height : 27px;\n        }\n\n        .docktab .toolbar .subbar {\n            border-bottom: 1px solid #e8ecef;\n        }\n\n        .toolbar.modal-toolbar .subbar {\n            background-image: linear-gradient(bottom, rgb(217,217,217) 0%, rgb(237,237,237) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(217,217,217) 0%, rgb(237,237,237) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(217,217,217) 0%, rgb(237,237,237) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(217,217,217) 0%, rgb(237,237,237) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(217,217,217) 0%, rgb(237,237,237) 100%);\n\n            border-top: 1px solid #f6f6f6;\n            border-bottom: 1px solid #bfbfbf;\n        }\n        .toolbar .subbar.no_border {\n            border-bottom: none;\n            padding-top: 1px;\n        }\n\n        .toolbar>.subbar>*{\n            display : inline-block;\n            float : left;\n            margin : 2px;\n        }\n\n        .toolbar>.subbar>.hbox, .toolbar>.subbar>.vbox, .toolbar>.subbar>.table{\n            display : block;\n            float : none;\n            margin : 0;\n        }\n\n        .toolbar>.subbar>.divider {\n            border-left: 1px solid #c4c4c4;\n            border-right: 1px solid #fafafa;\n            border-bottom: none;\n            border-top: none;\n            height: 17px;\n            float: left;\n            margin: 4px 0 0 0;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="toolbar"> </div>\n        </a:main>\n        <a:bar container="." inherit="true" minheight="28">\n            <div class="subbar"> </div>\n        </a:bar>\n        <a:menubar container="." inherit="true">\n            <div class="menubar">\n            </div>\n        </a:menubar>\n        <a:button link="toolbarbutton" inherit="true"/>\n        <a:divider inherit="true">\n            <div class="divider"> </div>\n        </a:divider>\n    </a:presentation>\n</a:toolbar>\n\n<a:tree name="tree">\n    <a:style><![CDATA[\n        .filemgr-tree {\n            cursor           : default;\n            position         : relative;\n            padding          : 0;\n            overflow         : hidden;\n            border-right     : 1px solid #f5f5f5;\n\n            -webkit-user-select: none;\n            -khtml-user-select: none;\n            -moz-user-select: none;\n            -o-user-select: none;\n            user-select: none;\n\n            color: #222;\n            -webkit-font-smoothing: auto;\n        }\n\n        .hboxTrFiles {\n            background :url(images/tree-shadow-left.png) repeat-y left 0, url(images/tree-shadow-right.png) repeat-y right 0, url(images/tree_backg.png) repeat 0 0;\n        }\n\n        .filemgr-tree U {\n            position:relative;\n            overflow:hidden;\n            display:block;\n            margin:0;\n            padding:0 0 0 0;\n            text-decoration:none;\n        }\n\n        .filemgr-tree U .item-fix {\n            padding-left : 15px;\n        }\n\n        .filemgr-tree U U .item-fix {\n            padding-left : 30px;\n        }\n\n        .filemgr-tree U U U .item-fix {\n            padding-left : 45px;\n        }\n\n        .filemgr-tree U U U U .item-fix {\n            padding-left : 60px;\n        }\n\n        .filemgr-tree U U U U U .item-fix {\n            padding-left : 75px;\n        }\n\n        .filemgr-tree U U U U U U .item-fix {\n            padding-left : 90px;\n        }\n\n        .filemgr-tree U U U U U U U .item-fix {\n            padding-left : 105px;\n        }\n\n        .filemgr-tree U U U U U U U U .item-fix {\n            padding-left : 120px;\n        }\n\n        .filemgr-tree U U U U U U U U U .item-fix {\n            padding-left : 135px;\n        }\n\n        .filemgr-tree U U U U U U U U U U .item-fix {\n            padding-left : 150px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U .item-fix {\n            padding-left : 165px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U .item-fix {\n            padding-left : 180px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U .item-fix {\n            padding-left : 195px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U .item-fix {\n            padding-left : 210px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U U .item-fix {\n            padding-left : 225px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U U U .item-fix {\n            padding-left : 240px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U U U U .item-fix {\n            padding-left : 255px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U U U U U .item-fix {\n            padding-left : 270px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U U U U U U .item-fix {\n            padding-left : 285px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U U U U U U U .item-fix {\n            padding-left : 300px;\n        }\n\n        .filemgr-tree .item-fix {\n            position:relative;\n            /*width:100%;*/\n        }\n        .filemgr-tree:not(.searchresults) .item-fix {\n            border-top:1px solid transparent;\n            border-bottom:1px solid transparent;\n        }\n\n        .filemgr-treeDisabled .item-fix{\n            opacity : 0.9;\n        }\n\n        .filemgr-tree .item-fix .item {\n            padding:0 0 0 14px;\n            position:relative;\n        }\n        .filemgr-tree.openfile .item-fix .item{\n        }\n\n        .rundebug .item-fix .item label{\n            padding-left : 4px;\n        }\n\n        .rundebug .curfile span{\n            display : none !important;\n        }\n\n        .filemgr-tree .item-fix.selected {\n            background : rgba(0,0,0,0.04);\n        }\n        .treeOutline .filemgr-tree .item-fix.selected label u {\n            color: white;\n        }\n\n\n        .filemgr-dragtree .item .caption,\n        .filemgr-tree .item-fix.dragAppend .item,\n        .filemgr-tree .item-fix.dragAppendUpload .item {\n            color: white;\n            margin-right: 5px;\n        }\n\n        .filemgr-dragtree .item .caption,\n        .filemgr-tree .item-fix.dragAppend .label-content,\n        .filemgr-tree .item-fix.dragAppendUpload .label-content {\n            -webkit-border-radius: 10px;\n            -moz-border-radius: 10px;\n            border-radius: 10px;\n            background : -webkit-gradient(linear, left top, left bottom, from(#2890e5), color-stop(1, #1f82d2));\n            background : -moz-linear-gradient(center bottom, #1f82d2 0%, #2890e5 100%) repeat scroll 0 0 transparent;\n        }\n\n        .filemgr-tree .item-fix.dragAppendUpload .label-content > LABEL {\n            background: url(images/tree_upload_icon.png) no-repeat 0 0 !important;\n            background-position: 3 0;\n        }\n\n        .filemgr-tree .item-fix.dragDenied {\n\n        }\n\n        .filemgr-tree .item-fix.dragInsert {\n\n        }\n\n        .filemgr-treeFocus .item-fix.selected,\n        .filemgr-tree.openfile .item-fix.selected{\n            border-top:1px solid #3a9bec;\n            border-bottom:1px solid #185f97;\n            background : -webkit-gradient(linear, left top, left bottom, from(#2890e5), color-stop(1, #1f82d2));\n            background : -moz-linear-gradient(center bottom, #1f82d2 0%, #2890e5 100%) repeat scroll 0 0 transparent;\n        }\n\n        .filemgr-dragtree,\n        .filemgr-tree .item-fix.dragAppend .item LABEL .caption,\n        .filemgr-tree .item-fix.dragAppendUpload .item LABEL .caption,\n        .filemgr-treeFocus .item-fix.selected .item LABEL .caption,\n        .filemgr-treeFocus .item-fix.dragAppend .item LABEL .caption,\n        .filemgr-tree.openfile .item-fix.selected .item LABEL .caption,\n        .filemgr-treeFocus .item-fix.dragAppend .item LABEL .caption {\n            color:white;\n        }\n\n        .filemgr-treeFocus > .item-fix.selected:first-child,\n        .filemgr-tree.openfile > .item-fix.selected:first-child {\n        	border-top-color:#166CAD;\n        }\n\n        .filemgr-tree .item SPAN {\n            top:5px;\n            left:4px;\n            width:10px;\n            height:10px;\n            position:absolute;\n            overflow:hidden;\n            text-indent : -2000px;\n        }\n\n        .filemgr-tree.openfile .item SPAN{\n            left: 3px;\n            display: block;\n            text-indent: 0;\n            line-height: 6px;\n            width: 7px;\n            height: 7px;\n            padding: 2px 3px 5px 3px;\n            font-family: Tahoma;\n            font-size: 11px;\n            top: 2px;\n            cursor: default;\n            z-index: 1000;\n            text-shadow: 1px 1px 0px white;\n            color: #999;\n        }\n        .filemgr-tree.openfile .item-fix SPAN:hover{\n            color : #555;\n        }\n        .filemgr-tree.openfile .item-fix.selected SPAN{\n            color : rgb(17,82,139);\n            text-shadow: 1px 1px 0 rgba(255,255,255,0.5);\n        }\n        .filemgr-tree.openfile .item-fix.selected SPAN:hover{\n            color : #041b2f;\n        }\n        .filemgr-tree.openfile .item-fix SPAN:active{\n            color : red;\n            text-shadow: 1px 1px 0 rgba(255,0,0,0.3);\n        }\n        .filemgr-tree.openfile .item-fix.selected SPAN:active{\n            color : red;\n        }\n\n        .filemgr-tree U.root .item-fix.min .item SPAN,\n        .filemgr-tree U.root .item-fix.minlast .item SPAN,\n        .filemgr-tree U.root .item-fix.plus .item SPAN,\n        .filemgr-tree U.root .item-fix.pluslast .item SPAN,\n        .filemgr-tree:not(.treeOutline) .item-fix.root .item SPAN {\n            background-image:url(images/tree_close_arrow_small.png);\n            background-repeat: no-repeat;\n        }\n        .treeOutline .item-fix.root.min .item SPAN {\n            background-image:url(images/tree_close_arrow_small.png) !important;\n            background-repeat: no-repeat;\n        }\n        .dark .filemgr-tree U.root .item-fix.min .item SPAN,\n        .dark .filemgr-tree U.root .item-fix.minlast .item SPAN,\n        .dark .filemgr-tree U.root .item-fix.plus .item SPAN,\n        .dark .filemgr-tree U.root .item-fix.pluslast .item SPAN,\n        .dark .filemgr-tree .item-fix.root .item SPAN {\n        }\n\n        .filemgr-tree .item-fix.min .item SPAN,\n        .filemgr-tree .item-fix.minlast .item SPAN {\n            background-position: -10px -1px;\n        }\n\n        .filemgr-tree .item-fix.plus .item SPAN,\n        .filemgr-tree .item-fix.pluslast .item SPAN {\n            background-position: 0 0;\n        }\n\n        .filemgr-tree .item LABEL {\n            display:block;\n            position:relative;\n            height:18px;\n            background-position:3px 1px;\n            background-repeat:no-repeat;\n            padding-left:0px;\n        }\n        .filemgr-tree.searchresults .item LABEL {\n            background-position: 3px 50%;\n        }\n\n        .filemgr-tree .item LABEL .caption {\n            font-family : Tahoma, Arial;\n            font-size   : 11px;\n            display:block;\n            position:relative;\n            overflow:hidden;\n            height:16px;\n            padding:1px 0 0 23px;\n            text-decoration:none;\n            white-space: nowrap;\n        }\n        .filemgr-tree.not(treeOutline) .item LABEL .caption {\n            color       : #101010;\n        }\n        .treeOutline.filemgr-tree .item LABEL .caption {\n            padding: 1px 0 0 2px;\n        }\n\n        .filemgr-tree .fileupload .item LABEL .caption {\n            color: #a6a6a6;\n            text-shadow : #ffffff 0px 1px 0px;\n        }\n\n        .filemgr-tree .loading .item {\n            background : url(images/file-tree-load-spinner.gif) no-repeat 17px 1px;\n        }\n\n        .filemgr-tree .loading .item LABEL {\n            background-position : -1000px 0;\n        }\n\n        .filemgr-tree .loading.selected .item {\n            background : url(images/file-tree-load-spinner-selected.gif) no-repeat 17px 1px;\n        }\n\n        .filemgr-tree .ldng,\n        .filemgr-tree .empty {\n            display : none;\n        }\n\n        #txt_rename {\n            height:16px;\n            padding-left:1px;\n            margin-top:0px;\n\n            font-family : Tahoma, Arial;\n            font-size   : 11px;\n            color       : #101010;\n            position:relative;\n            overflow:visible;\n            text-decoration:none;\n            white-space: nowrap;\n            word-break: keep-all;\n            cursor: text;\n            outline : none;\n\n            -webkit-user-select: text;\n            -khtml-user-select: text;\n            -moz-user-select: text;\n            -o-user-select: text;\n            user-select: text;\n\n            overflow: visible;\n            display: inline-block;\n            background-color: #EAF1F7;\n            border: 1px solid #90C3EF;\n            -moz-box-shadow: 0px 0px 6px #76839A;\n            -webkit-box-shadow: 0px 0px 6px #76839A;\n            box-shadow: 0px 0px 6px #76839A;\n        }\n\n        .filemgr-tree #txt_rename {\n            margin-left: 21px;\n        }\n\n        #txt_rename::selection {\n            background: #90C3EF;\n            }\n        #txt_rename::-moz-selection {\n            background: #90C3EF;\n        }\n\n        .filemgr-dragtree {\n            overflow:hidden;\n            height:22px;\n            opacity: .6;\n        }\n\n        .filemgr-dragtree .item SPAN {\n            display:none;\n        }\n\n        .filemgr-dragtree .item LABEL {\n            display:block;\n            position:relative;\n            overflow:hidden;\n            height:20px;\n            background-position:0 2px;\n            background-repeat:no-repeat;\n            margin-left:6px;\n            padding-right:6px;\n            float:left;\n        }\n\n        .filemgr-dragtree .item LABEL .caption {\n            font-family     : Tahoma, Arial;\n            font-size       : 11px;\n            color           : white;\n            display         : block;\n            position        : relative;\n            overflow        : hidden;\n            height          : 16px;\n            padding         : 0 5px 0;\n            margin-left     : 18px;\n            margin-top      : 3px;\n            text-decoration : none;\n            white-space     : nowrap;\n            text-shadow : #8394a2 0px 1px 0px;\n        }\n\n        .openfile .ldng, .openfile .message{\n            text-align : center;\n            font-size : 11px;\n            padding : 5px;\n        }\n\n        .filemgr-tree .syncing .caption{\n            background : url(icons/syncing_unsel.gif) no-repeat 2px 9px;\n        }\n        .filemgr-tree .syncing.selected .caption{\n            background : url(icons/syncing_sel.gif) no-repeat 2px 9px;\n        }\n        .filemgr-tree .synced .caption{\n            background : url(icons/synced_unsel.png) no-repeat 2px 9px;\n        }\n        .filemgr-tree .synced.selected .caption{\n            background : url(icons/synced_sel.png) no-repeat 2px 9px;\n        }\n        .filemgr-tree .conflict .caption{\n            background : url(icons/conflict_unsel.png) no-repeat 2px 9px;\n        }\n        .filemgr-tree .conflict.selected .caption{\n            background : url(icons/conflict_sel.png) no-repeat 2px 9px;\n        }\n        .filemgr-tree .syncing_added .caption{\n            background : url(icons/syncing_unsel.gif) no-repeat 2px 9px;\n        }\n        .filemgr-tree .syncing_added.selected .caption{\n            background : url(icons/syncing_sel.gif) no-repeat 2px 9px;\n        }\n        .filemgr-tree .syncing_added, .filemgr-tree .syncing_added.selected{\n            opacity : 0.5;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isChrome || apf.isSafari"><![CDATA[\n        .filemgr-tree .item LABEL .caption {\n            height:16px;\n        }\n        .filemgr-tree.not(treeOutline) .item LABEL .caption {\n            padding:2px 0 0 23px;\n        }\n\n        #txt_rename {\n            height:15px;\n            padding-top:1px;\n        }\n\n        .filemgr-dragtree2 .item LABEL .caption {\n            height          : 16px;\n            padding         : 3px 0 0 20px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="." startclosed="false">\n            <div class="filemgr-tree">\n\n            </div>\n        </a:main>\n        <a:item\n          class     = "."\n          caption   = "div/div/label/u"\n          icon      = "div/div/label"\n          openclose = "div/span"\n          select    = "div/div/label"\n          container = "following-sibling::u">\n            <div class="item-fix">\n                <div class="item">\n                    <span>x</span>\n                    <div class="label-content">\n                        <label>\n                            <u class="caption">-</u>\n                        </label>\n                    </div>\n                </div>\n            </div>\n            <u> </u>\n        </a:item>\n        <a:dragindicator>\n            <div class="filemgr-dragtree">\n                <div class="item">\n                    <span> </span>\n                    <div class="label-content">\n                        <label>\n                            <u class="caption">-</u>\n                        </label>\n                    </div>\n                </div>\n            </div>\n        </a:dragindicator>\n        <a:loading>\n            <div class="ldng">\n                <span> </span>\n                <label></label>\n            </div>\n        </a:loading>\n        <a:empty caption=".">\n            <div class="message"></div>\n        </a:empty>\n    </a:presentation>\n</a:tree>\n<a:errorbox name="errorbox">\n        <a:style><![CDATA[\n            .errorbox {\n                cursor      : default;\n                z-index     : 2000000;\n                position    : absolute;\n                margin      : 33px 0 0 5px;\n            }\n\n            .errorbox.upward {\n                margin-top: -5px;\n            }\n\n            .errorReserveUrl {\n                max-width: 350px !important;\n            }\n\n            .errorbox strong{\n                display : block;\n                margin  : 0 0 3px 0;\n            }\n\n            .errorbox .errorbox_ctl,\n            .errorbox .errorbox_ctr,\n            .errorbox .errorbox_cbl,\n            .errorbox .errorbox_cbr {\n                position            : absolute;\n                width               : 12px;\n                background-repeat   : no-repeat;\n                background-position : 0 0;\n            }\n\n            .errorbox .errorbox_ctl {\n                background-image    : url(images/hp_errorbox_ctl.png);\n                height              : 12px;\n                top                 : 0;\n                left                : 0;\n            }\n\n            .errorbox .errorbox_ctr {\n                background-image    : url(images/hp_errorbox_ctr.png);\n                height              : 12px;\n                top                 : 0;\n                right               : 0;\n            }\n\n            .errorbox .errorbox_cbl {\n                background-image    : url(images/hp_errorbox_cbl.png);\n                height              : 20px;\n                bottom              : 0;\n                left                : 0;\n            }\n\n            .errorbox .errorbox_cbr {\n                background-image    : url(images/hp_errorbox_cbr.png);\n                height              : 20px;\n                bottom              : 0;\n                right               : 0;\n            }\n\n            .errorbox .errorbox_bt,\n            .errorbox .errorbox_bl,\n            .errorbox .errorbox_br,\n            .errorbox .errorbox_bb {\n                position            : absolute;\n            }\n\n            .errorbox .errorbox_bt,\n            .errorbox .errorbox_bb {\n                background-repeat : repeat-x;\n            }\n\n            .errorbox .errorbox_bl,\n            .errorbox .errorbox_br {\n                background-repeat : repeat-y;\n            }\n\n            .errorbox .errorbox_bt {\n                background-image    : url(images/hp_errorbox_bt.png);\n                top                 : 0;\n                left                : 12px;\n                right               : 12px;\n                height              : 12px;\n                background-position : 0 0px;\n            }\n\n            .errorbox .errorbox_bb {\n                background-image    : url(images/hp_errorbox_bb.png);\n                bottom              : 0;\n                left                : 12px;\n                right               : 12px;\n                height              : 20px;\n                background-position : 0 0px;\n            }\n\n            .errorbox .errorbox_bl {\n                bottom              : 20px;\n                top                 : 12px;\n                left                : 0;\n                width               : 12px;\n                background-image    : url(images/hp_errorbox_bl.png);\n                background-position : 0 0;\n            }\n\n            .errorbox .errorbox_br {\n                bottom              : 20px;\n                top                 : 12px;\n                right               : 0;\n                width               : 12px;\n                background-image    : url(images/hp_errorbox_br.png);\n                background-position : 0 0;\n            }\n\n            .errorbox .errorboxContent {\n                top         : 12px;\n                left        : 12px;\n                right       : 12px;\n                bottom      : 12px;\n                padding     : 12px 12px 20px 12px;\n            }\n\n            .errorReserveUrl .errorboxContent {\n                width       : 325px;\n            }\n\n            .errorbox .errorboxContent SPAN {\n                padding         : 6px 8px 6px 2px;\n                display         : block;\n                background-color: #bf0202;\n                font-family     : Tahoma, Arial;\n                font-size       : 8pt;\n                color           : #ffffff;\n            }\n\n            .errorReserveUrl .errorboxContent SPAN {\n                text-align: center;\n            }\n\n            .errorbox .errbox_arrow {\n                background : url("images/hp_errorbox_arrow.png") no-repeat top left;\n                width      : 11px;\n                height     : 9px;\n                position   : absolute;\n                top        : -8px;\n                left       : 15px;\n                padding    : 0;\n                margin     : 0;\n                border     : 0;\n                z-index    : 10000000;\n            }\n\n            .errorbox.upward .errbox_arrow {\n                background-position: 0 -9px;\n                top: 54px;\n            }\n\n            .errorReserveUrl .errbox_arrow {\n                display: none;\n            }\n\n            .errorbox .close {\n                width      : 9px;\n                height     : 10px;\n                background : url("images/hp_errorbox_close.png") no-repeat top left;\n                position   : absolute;\n                top        : 5px;\n                left       : -5px;\n                z-index    : 999999;\n            }\n\n            .errorbox .close:hover {\n                background-position : 0 -10px;\n            }\n\n            .errorReserveUrl .close {\n                display: none;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main\n              container = "div[1]/span"\n              caption   = "div[1]/span"\n              for       = "@for"\n              close     = "div[3]/a"\n              maxwidth  = "275">\n                <div class="errorbox">\n                    <div class="errorboxContent">\n                        <span> </span>\n                    </div>\n                    <div class="errorbox_ctl"> </div>\n                    <div class="errorbox_ctr">\n                        <a class="close" href="javascript:void(0)" onclick="return false;"> </a>\n                    </div>\n                    <div class="errorbox_cbl"> </div>\n                    <div class="errorbox_cbr"> </div>\n                    <div class="errorbox_bt">\n                        <div class="errbox_arrow"> </div>\n                    </div>\n                    <div class="errorbox_bl"> </div>\n                    <div class="errorbox_br"> </div>\n                    <div class="errorbox_bb"> </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:errorbox>\n\n    <a:img name="img">\n        <a:style><![CDATA[\n            .img{\n                overflow: auto;\n            }\n\n            .img div {\n                width : 100%;\n                height : 100%;\n                display: -moz-box;\n                display: -webkit-box;\n                -moz-box-orient: horizontal;\n                -webkit-box-orient: horizontal;\n                box-orient: horizontal;\n                -moz-box-pack: center;\n                -webkit-box-pack: center;\n                box-pack: center;\n                -moz-box-align: center;\n                -webkit-box-align: center;\n                box-align: center;\n            }\n\n            .img IMG {\n                display: block;\n            }\n\n            .img span{\n                display:block;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main image="div/span/img/@src">\n                <div class="img">\n                    <div>\n                        <span><img src="" /></span>\n                    </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:img>\n\n    <a:button name="button-colorless">\n        <a:style><![CDATA[\n            .button-colorless {\n                background-image: -webkit-linear-gradient(top, rgba(255,255,255,0.18) 0, rgba(255,255,255,0) 100%);\n                background-image:    -moz-linear-gradient(top, rgba(255,255,255,0.18) 0, rgba(255,255,255,0) 100%);\n                background-image:         linear-gradient(top, rgba(255,255,255,0.18) 0, rgba(255,255,255,0) 100%);\n                border: 1px solid rgba(0,0,0,.1);\n                border-radius: 4px;\n                box-shadow: 0 1px 0px 0 rgba(237,237,237,.37) inset,\n                            0 1px 0 0 rgba(0,0,0,.08),\n                            0 1px 2px 1px rgba(0,0,0,.1);\n                color: #FFFFFF;\n                cursor: pointer;\n                font-family: Arial;\n                font-size: 13px;\n                height: 25px;\n                line-height: 25px;\n                text-align: center;\n                text-shadow: 0 1px 0 rgba(0,0,0,.25);\n            }\n\n            .button-colorlessOver {\n                background-image: -webkit-linear-gradient(top, rgba(255,255,255,0.31) 0, rgba(255,255,255,0.1) 100%);\n                background-image:    -moz-linear-gradient(top, rgba(255,255,255,0.31) 0, rgba(255,255,255,0.1) 100%);\n                background-image:         linear-gradient(top, rgba(255,255,255,0.31) 0, rgba(255,255,255,0.1) 100%);\n            }\n            .button-colorlessDown {\n                background-image: -webkit-linear-gradient(bottom, rgba(255,255,255,.18) 0, rgba(255,255,255,0) 100%);\n                background-image:    -moz-linear-gradient(bottom, rgba(255,255,255,.18) 0, rgba(255,255,255,0) 100%);\n                background-image:         linear-gradient(bottom, rgba(255,255,255,.18) 0, rgba(255,255,255,0) 100%);\n            }\n            .button-colorlessDisabled {\n                color: rgba(0,0,0,.5);\n                text-shadow: 0 1px 0 rgba(255,255,255,.15)\n            }\n            .button-colorlessFocus {\n                box-shadow: 0 1px 0 0 rgba(237,237,237,.34) inset,\n                            0 0 2px 1px rgba(255,255,255,.2) inset,\n                            0 0 1px 0 rgba(255,255,255,.4) inset,\n                            0 1px 0 0 rgba(0,0,0,.23);\n            }\n            /*\n             * Dark\n             */\n            .button-colorless.dark {\n                border: 1px solid rgba(0,0,0,.89);\n                box-shadow: 0 1px 0 0 rgba(237,237,237,.37) inset,0 1px 0 0 rgba(0,0,0,.23);\n            }\n            /*\n             * Colors\n             */\n            .button-colorless.grey {\n                background-color: #303030;\n            }\n            .button-colorless.light-grey {\n                background-color: #494850\n            }\n            .button-colorless.red {\n                background-color: #B60000;\n            }\n            .button-colorless.green {\n                background-color: #088E04;\n            }\n            .button-colorless.light-blue {\n                background-color: #415566\n            }\n            .button-colorless.blue {\n                background-color: #1473DA\n            }\n\n\n        ]]></a:style>\n        <a:presentation>\n            <a:main caption = ".">\n                <div class="button-colorless"> </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n\n    <a:button name="blackbutton">\n        <a:style><![CDATA[\n            .blackbutton {\n                background: #292929 url(images/c9-repeat-x.png) repeat-x 0 -440px;\n                border: 1px solid #010910;\n                border-radius: 3px;\n                box-shadow: 0 0 0 1px rgba(236, 245, 255, .14) inset;\n                color: #C0DABE;\n                height: 27px;\n                line-height: 27px;\n                padding: 0 11px;\n                text-align : center;\n                cursor : default;\n            }\n            .blackbuttonOver {\n                box-shadow: 0 0 0 1px rgba(236, 245, 255, .14) inset, 0 0 0 1000px rgba(131,145,129,.08) inset;\n            }\n            .blackbuttonDown {\n                box-shadow: 0 0 3px 2px #1a1a1a inset;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main caption = ".">\n                <div class="blackbutton"> </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n\n    <a:label name="tooltipLabel">\n        <a:style><![CDATA[\n            .tooltipLabel {\n                background-color: #4E4F51;\n                background-image: -webkit-linear-gradient(bottom, rgba(255,255,255,.04), rgba(255,255,255,0));\n                background-image:    -moz-linear-gradient(bottom, rgba(255,255,255,.04), rgba(255,255,255,0));\n                background-image:         linear-gradient(bottom, rgba(255,255,255,.04), rgba(255,255,255,0));\n                border: 1px solid #000;\n                border-bottom-width: 0;\n                border-radius: 3px 3px 0 0;\n                box-shadow: 0 1px 0 0 rgba(255,255,255,.2) inset;\n                color: #eee;\n                font-size: 10px;\n                height: 14px;\n                line-height: 14px;\n                padding: 1px 4px 0px 4px;\n                position: absolute;\n                text-shadow: 0 1px 0 rgba(0,0,0,.14);\n                z-index: 100000;\n            }\n\n            /* Temporary spot */\n            .find-and-replace {\n                background-image: url(images/c9-find-and-replace.png), url(images/c9-noise-with-background.png);\n                background-position: 100% 1px, 0 0;\n                background-repeat: repeat-y, repeat;\n                box-shadow: 0 1px 0 0 rgba(255,255,255,.1) inset, 0 0 17px 1px rgba(0,0,0,.7) inset;\n                border-top: 1px solid #000;\n            }\n\n            .find-and-replace .rb_grey span{\n                color : #eee;\n            }\n\n            .find-and-replace .rb_black span {\n                color: #dedede;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main caption=".">\n                <div class="tooltipLabel"> </div>\n            </a:main>\n        </a:presentation>\n    </a:label>\n    <a:textbox name="searchbox">\n        <a:style><![CDATA[\n            .searchbox .sbtb_middle .input{\n                border           : 0;\n                font-size        : 12px;\n                color            : #333333;\n                font-family      : menlo,courier new,fixed,swiss,sans-serif;\n                outline          : none;\n                background-color : transparent;\n                width: 100%;\n                overflow         : auto;\n                white-space      : pre-wrap;\n                max-height       : 95px;\n                min-height       : 18px;\n            }\n\n            .searchTxt.tb_console {\n                margin: 0;\n            }\n            .searchTxt.tb_console .sbtb_middle {\n                background-color: #F2F2F2;\n                border-radius: 3px;\n            }\n\n            .tb_textboxInitial .sbtb_middle .input {\n                color : #777777;\n            }\n\n            .tb_textboxDisabled .sbtb_middle .input {\n                color : #CCC;\n            }\n\n            .searchbox.tb_console .sbtb_middle .input {\n                height: auto;\n                position: relative;\n            }\n            .searchTxt.tb_textboxInitial .sbtb_middle .input {\n                color: #BABABA !important;\n                text-shadow: 0 1px 0 #FFFFFF;\n            }\n\n            .searchbox span, .searchbox font{\n                text-shadow : none;\n                padding : 1px 0 1px 0;\n            }\n\n            .searchbox{\n                height : auto !important;\n            }\n\n            .searchbox.tb_console .sbtb_middle{\n                height : auto !important;\n                padding : 4px 7px 3px 7px;\n                box-shadow: inset 0 2px 3px 0 rgba(0,0,0,.3);\n            }\n\n            .searchbox.tb_console.buttonsright .sbtb_middle{\n                padding-right : 114px;\n            }\n\n            .searchTxt .btnclose {\n                position: absolute;\n                top: 6px;\n                right: 8px;\n                width: 14px;\n                height: 14px;\n                background: url(images/btnclose.gif) no-repeat 0 0;\n                display: none;\n                cursor: pointer;\n            }\n            .searchTxt .btnclose:hover {\n                background-position: 0 -14px;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main input="div[1]/div" button="div[2]">\n                <div class="tb_textbox searchbox searchTxt tb_console">\n                    <div class="sbtb_middle">\n                        <div class="input"> </div>\n                    </div>\n                    <div class="btnclose"> </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:textbox>\n\n<a:button name="button-colorless">\n        <a:style><![CDATA[\n            .button-colorless {\n                background-image: -webkit-linear-gradient(top, rgba(255,255,255,0.18) 0, rgba(255,255,255,0) 100%);\n                background-image:    -moz-linear-gradient(top, rgba(255,255,255,0.18) 0, rgba(255,255,255,0) 100%);\n                background-image:         linear-gradient(top, rgba(255,255,255,0.18) 0, rgba(255,255,255,0) 100%);\n                border: 1px solid rgba(0,0,0,.1);\n                border-radius: 4px;\n                box-shadow: 0 1px 0px 0 rgba(237,237,237,.37) inset,\n                            0 1px 0 0 rgba(0,0,0,.08),\n                            0 1px 2px 1px rgba(0,0,0,.1);\n                color: #FFFFFF;\n                cursor: pointer;\n                font-family: Arial;\n                font-size: 13px;\n                height: 25px;\n                line-height: 23px;\n                text-align: center;\n                text-shadow: 0 1px 0 rgba(0,0,0,.25);\n            }\n\n            .button-colorlessOver {\n                background-image: -webkit-linear-gradient(top, rgba(255,255,255,0.31) 0, rgba(255,255,255,0.1) 100%);\n                background-image:    -moz-linear-gradient(top, rgba(255,255,255,0.31) 0, rgba(255,255,255,0.1) 100%);\n                background-image:         linear-gradient(top, rgba(255,255,255,0.31) 0, rgba(255,255,255,0.1) 100%);\n            }\n            .button-colorlessDown {\n                background-image: -webkit-linear-gradient(bottom, rgba(255,255,255,.18) 0, rgba(255,255,255,0) 100%);\n                background-image:    -moz-linear-gradient(bottom, rgba(255,255,255,.18) 0, rgba(255,255,255,0) 100%);\n                background-image:         linear-gradient(bottom, rgba(255,255,255,.18) 0, rgba(255,255,255,0) 100%);\n            }\n            .button-colorlessDisabled {\n                color: rgba(0,0,0,.5);\n                text-shadow: 0 1px 0 rgba(255,255,255,.15)\n            }\n            .button-colorlessFocus {\n                box-shadow: 0 1px 0 0 rgba(237,237,237,.34) inset,\n                            0 0 2px 1px rgba(255,255,255,.2) inset,\n                            0 0 1px 0 rgba(255,255,255,.4) inset,\n                            0 1px 0 0 rgba(0,0,0,.23);\n            }\n            /*\n             * Dark\n             */\n            .button-colorless.dark {\n                border: 1px solid rgba(0,0,0,.89);\n                box-shadow: 0 1px 0 0 rgba(237,237,237,.37) inset,0 1px 0 0 rgba(0,0,0,.23);\n            }\n            /*\n             * Colors\n             */\n            .button-colorless.grey {\n                background-color: #303030;\n            }\n            .button-colorless.lightGrey {\n                background-color: #494850;\n            }\n            .button-colorless.lighterGrey {\n                background-color: #7d7d7d;\n            }\n            .button-colorless.red {\n                background-color: #B60000;\n            }\n            .button-colorless.green {\n                background-color: #088E04;\n            }\n            .button-colorless.lightGreen {\n                background-color: #7ca734;\n            }\n            .button-colorless.lightBlue {\n                background-color: #415566;\n            }\n            .button-colorless.blue {\n                background-color: #1473DA;\n            }\n            .button-colorless.orange {\n                background-color: #bb3411;\n            }\n\n            /* larger buttons */\n            .button-colorless.large {\n                height: 42px;\n                line-height: 42px;\n                font-size: 14px;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main caption = ".">\n                <div class="button-colorless"> </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n\n    <a:codebox name="codebox">\n        <a:style><![CDATA[\n            .ace_one-line {\n                line-height: inherit!important;\n            }\n            .ace_one-line .ace_cursor {\n                border-left-width: 1px!important;\n            }\n            .ace_one-line.ace_editor .ace_scroller {\n                background-color: inherit!important;\n                color: inherit!important;\n                border-radius: 0!important;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main input="div[1]/div" button="div[2]">\n                <div class="ace_searchbox tb_textbox searchbox searchTxt tb_console">\n                    <div class="sbtb_middle">\n                        <div class="input"> </div>\n                    </div>\n                    <div class="btnclose"> </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:codebox>\n</a:skin>\n'}),define("ext/main/main",["require","exports","module","core/ide","core/ext","text!ext/main/main.xml","text!ext/main/style/skins.xml"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("text!ext/main/main.xml"),o=e("text!ext/main/style/skins.xml");document.documentElement.style.display="block",document.body.style.display="block",apf.config.resize=cloud9config.debug?!0:!1,apf.initialize('<a:application xmlns:a="http://ajax.org/2005/aml" />'),n.exports=i.register("ext/main/main",{dev:"Ajax.org",name:"Main",alone:!0,type:i.GENERAL,markup:s,skin:{data:o,"media-path":r.staticPrefix+"/ext/main/style/images/","icon-path":r.staticPrefix+"/ext/main/style/icons/"},init:function(){r.addEventListener("extload",function(){apf.config.resize=!0,apf.layout.$onresize()}),window.splitterPanelLeft=hboxMain.$handle}})}),define("treehugger/tree",["require","exports","module"],function(e,t,n){function r(e,t,n){if(e&&e.sl<=t.line&&t.line<=e.el){if(e.sl<t.line&&t.line<e.el)return!0;if(e.sl==t.line&&t.line<e.el)return e.sc<=t.col;if(e.sl==t.line&&e.el===t.line)return e.sc<=t.col&&t.col<=e.ec+(n?1:0);if(e.sl<t.line&&e.el===t.line)return t.col<=e.ec+(n?1:0)}}function i(){}function s(e,t){this.cons=e;for(var n=0;n<t.length;n++)this[n]=t[n];this.length=t.length}function o(e){for(var t=0;t<e.length;t++)this[t]=e[t];this.length=e.length}function u(e){this.value=e}function a(e){this.value=e}function f(e){this.id=e}function c(e){function n(n){for(var r=0;r<n.length&&t+r<e.length;r++)if(n[r]!=e[t+r])return!1;return r==n.length}function r(){return e[t]>="a"&&e[t]<="z"||e[t]>="A"&&e[t]<="Z"||e[t]==="_"||e[t]>="0"&&e[t]<="9"}function i(){while(t<e.length&&(e[t]===" "||e[t]==="\n"||e[t]==="\r"||e[t]==="	"))t++}function c(){var n=t;if(e[t]>="0"&&e[t]<="9"){var r=e[t];t++;while(t<e.length&&e[t]>="0"&&e[t]<="9")r+=e[t],t++;return i(),new u(+r,n)}return null}function h(){var r=t;if(n('"')){var s="";t++;while(!n('"')||n('"')&&e[t-1]=="\\")s+=e[t],t++;var o="";for(var u=0;u<s.length;u++)if(s[u]=="\\"){u++;switch(s[u]){case"n":o+="\n";break;case"t":o+="	";break;default:o+=s[u]}}else o+=s[u];return t++,i(),new a(o,r)}return null}function p(){var n=t;if(r()&&e[t].toLowerCase()===e[t]){var s="";while(r()&&t<e.length)s+=e[t],t++;return i(),new f(s,n)}return null}function d(){var r=t;if(n("[")){var s=[];t++,i();while(!n("]")&&t<e.length)s.push(m()),n(",")&&(t++,i());return t++,i(),new o(s,r)}return null}function v(){var r=t,o="";while(!n("("))o+=e[t],t++;t++;var u=[];while(!n(")")&&t<e.length)u.push(m()),n(",")&&(t++,i());return t++,i(),new s(o,u,r)}function m(){var e=c();return e?e:(e=h(),e?e:(e=d(),e?e:(e=p(),e?e:v())))}var t=0;if(typeof e!="string")return null;if(e.length<200&&!l[e])l[e]=m();else if(!l[e])return m();return l[e]}i.prototype.toPrettyString=function(e){return e=e||"",e+this.toString()},i.prototype.setAnnotation=function(e,t){this.annos=this.annos||{},this.annos[e]=t},i.prototype.getAnnotation=function(e){return this.annos?this.annos[e]:undefined},i.prototype.getPos=function(){return this.annos&&this.annos.pos?this.annos.pos:null},i.prototype.findNode=function(e){var t=this.getPos();return r(t,e)?this:null},s.prototype=new i,s.prototype.toString=function(e){try{var t=this.cons+"(";for(var n=0;n<this.length;n++)t+=this[n].toString()+",";return this.length>0&&(t=t.substring(0,t.length-1)),t+")"}catch(r){console.error("Something went wrong: ",this,r)}},s.prototype.toPrettyString=function(e){e=e||"";try{if(this.length===0)return e+this.cons+"()";if(this.length===1&&(this[0]instanceof a||this[0]instanceof u))return e+this.cons+"("+this[0].toString()+")";var t=e+this.cons+"(\n";for(var n=0;n<this.length;n++)t+=this[n].toPrettyString(e+"    ")+",\n";return t=t.substring(0,t.length-2),t+="\n",t+e+")"}catch(r){console.error("Something went wrong: ",this,r)}},s.prototype.match=function(e,t){t=t||{};if(e instanceof s&&this.cons===e.cons&&this.length===e.length){for(var n=0;n<this.length;n++)if(!this[n].match(e[n],t))return!1;return t}return!1},s.prototype.build=function(e){var t=[];for(var n=0;n<this.length;n++)t.push(this[n].build(e));return new s(this.cons,t)},s.prototype.toJSON=function(){var e=[];for(var t=0;t<this.length;t++)e.push(this[t]);return{cons:this.cons,children:e}},s.prototype.getPos=function(){var e={sl:9999999999,sc:9999999999,el:0,ec:0};if(this.getAnnotation("pos")){var t=this.getAnnotation("pos");e={sl:t.sl,sc:t.sc,el:t.el,ec:t.ec}}for(var n=0;n<this.length;n++){var r=this[n].getPos();if(r){var i=e.sl;e.sl=Math.min(e.sl,r.sl),e.sl!==i?e.sc=r.sc:e.sc=Math.min(e.sc,r.sc);var s=e.el;e.el=Math.max(e.el,r.el),e.el!==s?e.ec=r.ec:e.el===r.el&&(e.ec=Math.max(e.ec,r.ec))}}return e},s.prototype.findNode=function(e){var t=this.getPos();if(!r(t,e))return null;for(var n=0;n<this.length;n++){var i=this[n].getPos();if(r(i,e)){var s=this[n].findNode(e);return s?s instanceof a?this:s:this[n]}}},t.cons=function(e,t){return new s(e,t)},o.prototype=new i,o.prototype.toString=function(){var e="[";for(var t=0;t<this.length;t++)e+=this[t].toString()+",";return this.length>0&&(e=e.substring(0,e.length-1)),e+"]"},o.prototype.toPrettyString=function(e){e=e||"";try{if(this.length===0)return e+"[]";var t=e+"[\n";for(var n=0;n<this.length;n++)t+=this[n].toPrettyString(e+"  ")+",\n";return t=t.substring(0,t.length-2),t+="\n",t+e+"]"}catch(r){console.error("Something went wrong: ",this)}},o.prototype.match=function(e,t){t=t||{};if(e instanceof o){if(this.length===e.length){for(var n=0;n<this.length;n++)if(!this[n].match(e[n],t))return!1;return t}return!1}return!1},o.prototype.build=function(e){var t=[];for(var n=0;n<this.length;n++)t.push(this[n].build(e));return new o(t)},o.prototype.getPos=s.prototype.getPos,o.prototype.findNode=s.prototype.findNode,o.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e.call(this[t],this[t],t)},o.prototype.isEmpty=function(){return this.length===0},o.prototype.contains=function(e){for(var t=0;t<this.length;t++)if(e.match(this[t]))return!0;return!1},o.prototype.concat=function(e){var n=[];for(var r=0;r<this.length;r++)n.push(this[r]);for(r=0;r<e.length;r++)n.push(e[r]);return t.list(n)},o.prototype.toJSON=function(){var e=[];for(var t=0;t<this.length;t++)e.push(this[t]);return e},o.prototype.removeDuplicates=function(){var e=[];e:for(var n=0;n<this.length;n++){for(var r=0;r<e.length;r++)if(e[r].match(this[n]))continue e;e.push(this[n])}return new t.list(e)},o.prototype.toArray=o.prototype.toJSON,t.list=function(e){return new o(e)},u.prototype=new i,u.prototype.toString=function(){return""+this.value},u.prototype.match=function(e,t){return t=t||{},e instanceof u?this.value===e.value?t:!1:!1},u.prototype.build=function(e){return this},t.num=function(e){return new u(e)},a.prototype=new i,a.prototype.toString=function(){return'"'+this.value+'"'},a.prototype.match=function(e,t){return t=t||{},e instanceof a?this.value===e.value?t:!1:!1},a.prototype.build=function(e){return this},t.string=function(e){return new a(e)},f.prototype=new i,f.prototype.toString=function(){return this.id},f.prototype.match=function(e,t){return t=t||{},this.id==="_"?t:t[this.id]?t[this.id].match(e):(t[this.id]=e,t)},f.prototype.build=function(e){return e[this.id]},t.placeholder=function(e){return new f(e)};var l={};t.Node=i,t.ConsNode=s,t.ListNode=o,t.NumNode=u,t.StringNode=a,t.PlaceholderNode=f,t.parse=c,t.inRange=r}),define("treehugger/traverse",["require","exports","module","treehugger/tree"],function(e,t,n){function i(e){return e.length===1&&e[0].apply?e[0]:(e=Array.prototype.slice.call(e,0),e[0]&&Object.prototype.toString.call(e[0])==="[object Array]"&&(e=e[0]),function(){var n;for(var i=0;i<e.length;i++)if(typeof e[i]=="string"){var s=r.parse(e[i]),o=s.match(this);if(o){while(e[i+1]){if(e[i+1].apply)break;i++}e[i+1]&&e[i+1].apply?(n=e[i+1].call(this,o,this),i++):n=this;if(n)return n}else e[i+1]&&e[i+1].apply&&i++}else{if(!e[i].apply)throw Error("Invalid argument: ",e[i]);n=e[i].call(this);if(n)return n}return!1})}function s(){var e,t=this;for(var n=0;n<arguments.length;n++){e=arguments[n],t=e.call(t);if(!t)return!1}return this}function o(e){var t,n;t=e.call(this);if(t)return t;if(this instanceof r.ConsNode||this instanceof r.ListNode)for(n=0;n<this.length;n++)o.call(this[n],e);return this}var r=e("treehugger/tree");Function.prototype.curry||(Function.prototype.curry=function(){var e=this,t=Array.prototype.slice.call(arguments);return function(){return e.apply(this,t.concat(Array.prototype.slice.call(arguments)))}}),t.traverseAll=function(e){var t,n;e=i(arguments);if(this instanceof r.ConsNode||this instanceof r.ListNode)for(n=0;n<this.length;n++){t=e.call(this[n]);if(!t)return!1}return this},t.attempt=function(e){e=i(arguments);var t=e.call(this);return t?t:this},t.debug=function(e){return console.log(e?this.toPrettyString(""):this.toString()),this},t.traverseTopDown=function(e){return e=i(arguments),o.call(this,e)},t.traverseUp=function(e){e=i(arguments);var t=e.call(this);return t?t:this.parent?this.parent.traverseUp(e):!1},t.collectTopDown=function(e){e=i(arguments);var t=[];return this.traverseTopDown(function(){var n=e.call(this);return n&&t.push(n),n}),r.list(t)},t.map=function(e){e=i(arguments);var t,n=[];for(var s=0;s<this.length;s++){t=e.call(this[s],this[s]);if(!t)throw Error("Mapping failed: ",this[s]);n.push(t)}return r.list(n)},t.each=function(e){e=i(arguments);for(var t=0;t<this.length;t++)e.call(this[t],this[t])},t.filter=function(e){e=i(arguments);var t=[];return this.forEach(function(n){var r=e.call(n);r&&t.push(r)}),r.list(t)},t.rewrite=function(e){return e=i(arguments),e.call(this)},t.isMatch=function(e){return!!this.rewrite(e)};for(var u in t)t.hasOwnProperty(u)&&(r.Node.prototype[u]=t[u]);t.addParentPointers=function(e){return e.traverseTopDown(function(){var e=this;this.traverseAll(function(){return this.parent=e,this})})}}),define("treehugger/js/uglifyparser",["require","exports","module"],function(e,t,n){function g(e){return m.letter.test(e)}function y(e){return e=e.charCodeAt(0),e>=48&&e<=57}function b(e){return y(e)||g(e)}function w(e){return m.non_spacing_mark.test(e)||m.space_combining_mark.test(e)}function E(e){return m.connector_punctuation.test(e)}function S(e){return e=="$"||e=="_"||g(e)}function x(e){return S(e)||w(e)||y(e)||E(e)||e=="‌"||e=="‍"}function T(e){if(a.test(e))return parseInt(e.substr(2),16);if(f.test(e))return parseInt(e.substr(1),8);if(l.test(e))return parseFloat(e)}function N(e,t,n,r){this.message=e,this.line=t,this.col=n,this.pos=r,this.stack=(new Error).stack}function C(e,t,n,r){throw new N(e,t,n,r)}function k(e,t,n){return e.type==t&&(n==null||e.value==n)}function A(e){function n(){return t.text.charAt(t.pos)}function i(e){var n=t.text.charAt(t.pos++);if(e&&!n)throw L;return n=="\n"?(t.newline_before=!0,++t.line,t.col=0):++t.col,n}function a(){return!t.peek()}function f(e,n){var r=t.text.indexOf(e,t.pos);if(n&&r==-1)throw L;return r}function l(){t.tokline=t.line,t.tokcol=t.col,t.tokpos=t.pos}function v(e,n,r){t.regex_allowed=e=="operator"&&!W(M,n)||e=="keyword"&&W(s,n)||e=="punc"&&W(p,n);var i={type:e,value:n,line:t.tokline,col:t.tokcol,pos:t.tokpos,nlb:t.newline_before};return r||(i.comments_before=t.comments_before,t.comments_before=[]),t.newline_before=!1,i}function m(){while(W(h,n()))i()}function g(e){var t="",r=n(),s=0;while(r&&e(r,s++))t+=i(),r=n();return t}function w(e){C(e,t.tokline,t.tokcol,t.tokpos)}function E(e){var t=!1,n=!1,r=!1,i=e==".",s=g(function(s,o){return s=="x"||s=="X"?r?!1:r=!0:!!r||s!="E"&&s!="e"?s=="-"?n||o==0&&!e?!0:!1:s=="+"?n:(n=!1,s=="."?!i&&!r?i=!0:!1:b(s)):t?!1:t=n=!0});e&&(s=e+s);var o=T(s);return v("num",s)}function N(){var e=i(!0);switch(e){case"n":return"\n";case"r":return"\r";case"t":return"	";case"b":return"\b";case"v":return"";case"f":return"\f";case"0":return"\0";case"x":return String.fromCharCode(k(2));case"u":return String.fromCharCode(k(4));case"\n":return"";default:return e}}function k(e){var t=0;for(;e>0;--e){var n=parseInt(i(!0),16);isNaN(n)&&w("Invalid hex-character pattern in string"),t=t<<4|n}return t}function A(){return q("Unterminated string constant",function(){var e=i(),t="";for(;;){var n=i(!1);if(n=="\\"){var r=0,s=null;n=g(function(e){if(e>="0"&&e<="7"){if(!s)return s=e,++r;if(s<="3"&&r<=2)return++r;if(s>="4"&&r<=1)return++r}return!1}),r>0?n=String.fromCharCode(parseInt(n,8)):n=N()}else{if(n==e)break;if(n=="\n"||n=="\r"||!n){var o=v("string",t);return O("Unterminated string literal",o),o}}t+=n}return v("string",t)})}function O(e,t){t.error=e}function _(){i();var e=f("\n"),n;return e==-1?(n=t.text.substr(t.pos),t.pos=t.text.length):(n=t.text.substring(t.pos,e),t.pos=e),v("comment1",n,!0)}function D(){return i(),q("Unterminated multiline comment",function(){var e=f("*/",!0),n=t.text.substring(t.pos,e),r=v("comment2",n,!0);return t.pos=e+2,t.line+=n.split("\n").length-1,t.newline_before=n.indexOf("\n")>=0,/^@cc_on/i.test(n)&&(X("WARNING: at line "+t.line),X('*** Found "conditional comment": '+n),X("*** UglifyJS DISCARDS ALL COMMENTS.  This means your code might no longer work properly in Internet Explorer.")),r})}function P(){var e=!1,t="",r;while((r=n())!=null)if(!e)if(r=="\\")e=!0,i();else{if(!x(r))break;t+=i()}else r!="u"&&w("Expecting UnicodeEscapeSequence -- uXXXX"),r=N(),x(r)||w("Unicode char: "+r.charCodeAt(0)+" is not valid in identifier"),t+=r,e=!1;return t}function H(e){return q("Unterminated regular expression",function(){var t=!1,n,r=!1;while(n=i(!0))if(t)e+="\\"+n,t=!1;else if(n=="[")r=!0,e+=n;else if(n=="]"&&r)r=!1,e+=n;else{if(n=="/"&&!r)break;n=="\\"?t=!0:e+=n}var s=P();return v("regexp",[e,s])})}function B(e){function t(e){if(!n())return e;var r=e+n();return W(c,r)?(i(),t(r)):e}return v("operator",t(e||i()))}function j(){i();var e=t.regex_allowed;switch(n()){case"/":return t.comments_before.push(_()),t.regex_allowed=e,R();case"*":return t.comments_before.push(D()),t.regex_allowed=e,R()}return t.regex_allowed?H(""):B("/")}function F(){return i(),y(n())?E("."):v("punc",".")}function I(){var e=P();return W(r,e)?W(c,e)?v("operator",e):W(o,e)?v("atom",e):v("keyword",e):v("name",e)}function q(e,t){try{return t()}catch(n){if(n!==L)throw n;w(e)}}function R(e){if(e!=null)return H(e);m(),l();var t=n();return t?y(t)?E():t=='"'||t=="'"?A():W(d,t)?v("punc",i()):t=="."?F():t=="/"?j():W(u,t)?B():t=="\\"||S(t)?I():(O("Unexpected character '"+t+"'",v("ignore")),i(!0),R(e)):v("eof")}var t={text:e.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,""),pos:0,tokpos:0,line:0,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[]};return R.context=function(e){return e&&(t=e),t},R}function B(e,t,n){this.name=e,this.start=t,this.end=n}function j(e,t,n){function i(e,t){return k(r.token,e,t)}function s(){return r.peeked||(r.peeked=r.input())}function o(e,t){t||(t=r.token),r.error||(r.error={line:t.line,col:t.col,message:e})}function u(){r.prev=r.token;var e=r.input.context();return r.line=e.line,r.col=e.col,r.peeked?(r.token=r.peeked,r.peeked=null):r.token=r.input(),r.token}function a(){return r.prev}function f(e,t,n,i){var s=r.input.context();C(e,t!=null?t:s.tokline,n!=null?n:s.tokcol,i!=null?i:s.tokpos)}function l(e,t){o(t,e)}function c(e){e==null&&(e=r.token),o("Unexpected token: "+e.type+" ("+e.value+")",e)}function h(e,t){if(i(e,t))return u();o("Unexpected token "+r.token.type+", expected "+e,r.token)}function p(e){if(i("punc",e))return u();o("Expected: "+e)}function d(){return!t&&(r.token.nlb||i("eof")||i("punc","}"))}function v(){i("punc",";")?u():d()||o("Semicolon expected")}function m(){return R(arguments)}function g(){if(!i("punc","("))return o("Expected: ("),m("ERROR");p("(");var e=pt();return p(")"),e}function y(e,t,n){return e instanceof B?e:new B(e,t,n)}function b(e){return n?function(){var t=r.token,n=e.apply(this,arguments);return n?(n[0]=y(n[0],t,t===r.token?t:a()),n):(o("Parse error"),["ERROR"])}:e}function E(e){r.labels.push(e);var n=r.token,i=w();return t&&!W(P,i[0])&&c(n),r.labels.pop(),m("label",e,i)}function S(){return m("stat",I(pt,v))}function x(e){var t;return d()||(t=i("name")?r.token.value:null),t!=null?(u(),z(t,r.labels)||f("Label "+t+" without matching loop or statement")):r.in_loop==0&&f(e+" not inside a loop or switch"),v(),m(e,t)}function T(){if(!i("punc","("))return o("Expected: ("),m("for",m("ERROR"),m("ERROR"),m("ERROR"),m("ERROR"));p("(");var e=null;if(!i("punc",";")){i("keyword","var")?e=(u(),J(!0)):i("keyword","let")?e=(u(),K(!0)):e=pt(!0,!0);if(i("operator","in"))return L(e)}return N(e)}function N(e){p(";");var t=i("punc",";")?null:pt();if(i("punc",";")){p(";");var n=i("punc",")")?null:pt();p(")")}else o("Expected: ;");return m("for",e,t,n,dt(w))}function L(e){var t;e[0]=="var"?t=m("name",e[1][0]):e[0]=="let"?t=m("name",e[1][0]):t=e,u();var n=pt();return p(")"),m("for-in",e,t,n,dt(w))}function q(){var e=g(),t=w(),n;return i("keyword","else")&&(u(),n=w()),m("if",e,t,n)}function U(){p("{");var e=[];while(!i("punc","}")){if(i("eof"))return e;e.push(w())}return u(),e}function V(){var e=U(),t,n;if(i("keyword","catch")){u(),p("("),i("name")||f("Name expected");var s=r.token.value;u(),p(")"),t=[s,U()]}return i("keyword","finally")&&(u(),n=U()),!t&&!n&&f("Missing catch/finally blocks"),m("try",e,t,n)}function $(e){var t=[];for(;;){i("name")||c();var n=r.token,s=r.token.value;u(),s=y(s,n,r.token),i("operator","=")?(u(),t.push([s,pt(!1,e)])):t.push([s]);if(!i("punc",","))break;u()}return t}function J(e){return m("var",$(e))}function K(e){return m("let",$(e))}function Q(){return m("const",$())}function G(){var e=Y(!1),t;return i("punc","(")?(u(),t=Z(")")):t=[],st(m("new",e,t),!0)}function Z(e,t,n){var r=!0,s=[];while(!i("punc",e)&&!i("eof")){r?r=!1:p(",");if(t&&i("punc",e))break;i("punc",",")&&n?s.push(["atom","undefined"]):s.push(pt(!1))}return u(),s}function et(){return m("array",Z("]",!t,!0))}function tt(){var e=!0,n=[];while(!i("punc","}")&&!i("eof")){e?e=!1:p(",");if(!t&&i("punc","}"))break;var s=r.token.type,o=nt();s!="name"||o!="get"&&o!="set"||!!i("punc",":")?(p(":"),n.push([o,pt(!1)])):n.push([rt(),j(!1),o])}return u(),m("object",n)}function nt(){switch(r.token.type){case"num":case"string":return I(r.token.value,u)}return rt()}function rt(){switch(r.token.type){case"name":case"operator":case"keyword":case"atom":return I(r.token.value,u);default:return o("Name, operator, keyword or atom expected."),""}}function it(e,t){return e[0]=y(e[0],t,r.token),e}function st(e,t){var n=r.prev;return e[0]instanceof B||(e=it(e,n)),i("punc",".")?(u(),st(it(m("dot",e,rt()),n),t)):i("punc","[")?(u(),st(m("sub",e,I(pt,F(p,"]"))),t)):t&&i("punc","(")?(u(),st(m("call",e,Z(")")),!0)):e}function ot(e){if(i("operator")&&W(O,r.token.value))return ut("unary-prefix",I(r.token.value,u),ot(e));var t=Y(e);while(i("operator")&&W(M,r.token.value)&&!r.token.nlb)t=ut("unary-postfix",r.token.value,t),u();return t}function ut(e,t,n){return(t=="++"||t=="--")&&!ct(n)&&f("Invalid use of "+t+" operator"),m(e,t,n)}function at(e,t,n){var s=i("operator")?r.token.value:null;s&&s=="in"&&n&&(s=null);var o=s!=null?D[s]:null;if(o!=null&&o>t){u();var a=at(ot(!0),o,n);return at(m("binary",s,e,a),t,n)}return e}function ft(e){return at(ot(!0),0,e)}function lt(e){var t=ft(e);if(i("operator","?")){u();var n=pt(!1);return p(":"),m("conditional",t,n,pt(!1,e))}return t}function ct(e){if(!t)return!0;switch(e[0]+""){case"dot":case"sub":case"new":case"call":return!0;case"name":return e[1]!="this"}}function ht(e){var t=lt(e),n=r.token.value;if(i("operator")&&W(_,n)){if(ct(t))return u(),m("assign",_[n],t,ht(e));f("Invalid assignment")}return t}function dt(e){try{return++r.in_loop,e()}finally{--r.in_loop}}var r={input:typeof e=="string"?A(e,!0):e,token:null,prev:null,peeked:null,in_function:0,in_loop:0,labels:[],line:0,col:0,error:null};r.token=u();var w=b(function(){if(i("operator","/")||i("operator","/="))r.peeked=null,r.token=r.input(r.token.value.substr(1));switch(r.token.type){case"num":case"string":case"regexp":case"operator":case"atom":return S();case"name":return k(s(),"punc",":")?E(I(r.token.value,u,u)):S();case"punc":switch(r.token.value){case"{":return m("block",U());case"[":case"(":return S();case";":return u(),m("block");default:return u(),o("Bracket expected."),m("ERROR")};case"keyword":switch(I(r.token.value,u)){case"break":return x("break");case"continue":return x("continue");case"debugger":return v(),m("debugger");case"do":return function(e){return i("keyword","while")?(h("keyword","while"),m("do",I(g,v),e)):(o("Invalid do statement."),m("do",m("ERROR"),m("ERROR")))}(dt(w));case"for":return T();case"function":return j(!0);case"if":return q();case"return":return r.in_function==0&&o("'return' outside of function"),m("return",i("punc",";")?(u(),null):d()?null:I(pt,v));case"switch":return m("switch",g(),X());case"throw":return r.token.nlb&&f("Illegal newline after 'throw'"),m("throw",I(pt,v));case"try":return V();case"var":return I(J,v);case"let":return I(K,v);case"const":return I(Q,v);case"while":return m("while",g(),dt(w));case"with":return m("with",g(),w());default:c()}}}),j=b(function(e){var t=r.token,n=i("name")?I(r.token.value,u):null;return n=y(n,t,r.token),e&&!n?(o("Invalid function definition"),m("function","",[],[])):(p("("),m(e?"defun":"function",n,function(e,t){while(!i("punc",")")&&!i("eof"))e?e=!1:p(","),i("name")||c(),t.push(y(r.token.value,r.token)),u();return u(),t}(!0,[]),function(){++r.in_function;var e=r.in_loop;r.in_loop=0;var t=U();return--r.in_function,r.in_loop=e,t}()))}),X=F(dt,function(){i("punc","{")&&p("{");var e=[],t=null;while(!i("punc","}")){if(i("eof"))break;if(i("keyword","case"))u(),t=[],e.push([pt(),t]),p(":");else if(i("keyword","default"))u(),p(":"),t=[],e.push([null,t]);else{if(!t)return e;t.push(w())}}return u(),e}),Y=b(function(e){if(i("operator","new"))return u(),G();if(i("punc")){switch(r.token.value){case"(":return u(),st(I(pt,function(){p(")")}),e);case"[":return u(),st(et(),e);case"{":return u(),st(tt(),e)}return o("Bracket expected."),m("ERROR")}if(i("keyword","function"))return u(),st(j(!1),e);if(W(H,r.token.type)){var t=r.token.type=="regexp"?m("regexp",r.token.value[0],r.token.value[1]):m(r.token.type,r.token.value);return st(I(t,u),e)}c()}),pt=b(function(e,t){arguments.length==0&&(e=!0);var n=r.line,s=r.col,o=ht(t);return e&&i("punc",",")?(u(),m("seq",o,pt(!0,t))):(r.col===s&&r.line===n&&u(),o)});return{ast:m("toplevel",function(e){while(!i("eof"))e.push(w());return e}([])),error:r.error}}function F(e){var t=R(arguments,1);return function(){return e.apply(this,t.concat(R(arguments)))}}function I(e){e instanceof Function&&(e=e());for(var t=1,n=arguments.length;--n>0;++t)arguments[t]();return e}function q(e){var t={};for(var n=0;n<e.length;++n)t[e[n]]=!0;return t}function R(e,t){return Array.prototype.slice.call(e,t||0)}function U(e){return e.split("")}function z(e,t){for(var n=t.length;--n>=0;)if(t[n]===e)return!0;return!1}function W(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var r=q(["break","case","catch","const","continue","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","throw","try","typeof","var","void","while","with","let"]),i=q(["abstract","boolean","byte","char","class","debugger","double","enum","export","extends","final","float","goto","implements","import","int","interface","long","native","package","private","protected","public","short","static","super","synchronized","throws","transient","volatile"]),s=q(["return","new","delete","throw","else","case"]),o=q(["false","null","true","undefined"]),u=q(U("+-*&%=<>!?|~^")),a=/^0x[0-9a-f]+$/i,f=/^0[0-7]+$/,l=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i,c=q(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","||"]),h=q(U("  \n\r	\f​᠎             　")),p=q(U("[{}(,.;:")),d=q(U("[]{}(),;:")),v=q(U("gmsiy")),m={letter:new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0523\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0621-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971\\u0972\\u097B-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D28\\u0D2A-\\u0D39\\u0D3D\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC\\u0EDD\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8B\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10D0-\\u10FA\\u10FC\\u1100-\\u1159\\u115F-\\u11A2\\u11A8-\\u11F9\\u1200-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u1676\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19A9\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u2094\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2C6F\\u2C71-\\u2C7D\\u2C80-\\u2CE4\\u2D00-\\u2D25\\u2D30-\\u2D65\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31B7\\u31F0-\\u31FF\\u3400\\u4DB5\\u4E00\\u9FC3\\uA000-\\uA48C\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA65F\\uA662-\\uA66E\\uA67F-\\uA697\\uA717-\\uA71F\\uA722-\\uA788\\uA78B\\uA78C\\uA7FB-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA90A-\\uA925\\uA930-\\uA946\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAC00\\uD7A3\\uF900-\\uFA2D\\uFA30-\\uFA6A\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),non_spacing_mark:new RegExp("[\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065E\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0900-\\u0902\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0CBC\\u0CBF\\u0CC6\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F90-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1DC0-\\u1DE6\\u1DFD-\\u1DFF\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F\\uA67C\\uA67D\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26]"),space_combining_mark:new RegExp("[\\u0903\\u093E-\\u0940\\u0949-\\u094C\\u094E\\u0982\\u0983\\u09BE-\\u09C0\\u09C7\\u09C8\\u09CB\\u09CC\\u09D7\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB\\u0ACC\\u0B02\\u0B03\\u0B3E\\u0B40\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0B57\\u0BBE\\u0BBF\\u0BC1\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD7\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82\\u0C83\\u0CBE\\u0CC0-\\u0CC4\\u0CC7\\u0CC8\\u0CCA\\u0CCB\\u0CD5\\u0CD6\\u0D02\\u0D03\\u0D3E-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D57\\u0D82\\u0D83\\u0DCF-\\u0DD1\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0F3E\\u0F3F\\u0F7F\\u102B\\u102C\\u1031\\u1038\\u103B\\u103C\\u1056\\u1057\\u1062-\\u1064\\u1067-\\u106D\\u1083\\u1084\\u1087-\\u108C\\u108F\\u109A-\\u109C\\u17B6\\u17BE-\\u17C5\\u17C7\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930\\u1931\\u1933-\\u1938\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A19-\\u1A1B\\u1A55\\u1A57\\u1A61\\u1A63\\u1A64\\u1A6D-\\u1A72\\u1B04\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43\\u1B44\\u1B82\\u1BA1\\u1BA6\\u1BA7\\u1BAA\\u1C24-\\u1C2B\\u1C34\\u1C35\\u1CE1\\u1CF2\\uA823\\uA824\\uA827\\uA880\\uA881\\uA8B4-\\uA8C3\\uA952\\uA953\\uA983\\uA9B4\\uA9B5\\uA9BA\\uA9BB\\uA9BD-\\uA9C0\\uAA2F\\uAA30\\uAA33\\uAA34\\uAA4D\\uAA7B\\uABE3\\uABE4\\uABE6\\uABE7\\uABE9\\uABEA\\uABEC]"),connector_punctuation:new RegExp("[\\u005F\\u203F\\u2040\\u2054\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFF3F]")};N.prototype.toString=function(){return this.message+" (line: "+this.line+", col: "+this.col+", pos: "+this.pos+")"+"\n\n"+this.stack};var L={},O=q(["typeof","void","delete","--","++","!","~","-","+"]),M=q(["--","++"]),_=function(e,t,n){while(n<e.length)t[e[n]]=e[n].substr(0,e[n].length-1),n++;return t}(["+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&="],{"=":!0},0),D=function(e,t){for(var n=0,r=1;n<e.length;++n,++r){var i=e[n];for(var s=0;s<i.length;++s)t[i[s]]=r}return t}([["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{}),P=q(["for","do","while","switch"]),H=q(["atom","num","string","regexp","name"]);B.prototype.toString=function(){return this.name};var X=function(){};t.tokenizer=A,t.parse=j,t.slice=R,t.curry=F,t.member=z,t.array_to_hash=q,t.PRECEDENCE=D,t.KEYWORDS_ATOM=o,t.RESERVED_WORDS=i,t.KEYWORDS=r,t.ATOMIC_START_TOKEN=H,t.OPERATORS=c,t.is_alphanumeric_char=b,t.set_logger=function(e){X=e}}),define("treehugger/js/parse",["require","exports","module","treehugger/js/uglifyparser","treehugger/tree"],function(e,t,n){function s(e,t){return e.name||(e.name=""),t.setAnnotation("pos",{sl:e.start.line,sc:e.start.col,el:e.start.line,ec:e.start.col+e.name.length}),t}var r=e("treehugger/js/uglifyparser"),i=e("treehugger/tree");t.parse=function(e){var n=r.parse(e,!1,!0),i=t.transform(n.ast);return n.error&&i.setAnnotation("error",n.error),i},t.transform=function(e){if(!e)return i.cons("None",[]);var n=t.transform,r=typeof e[0]=="string"?e[0]:e[0].name,o;switch(r){case"toplevel":o=i.list(e[1].map(n));break;case"var":o=i.cons("VarDecls",[i.list(e[1].map(function(e){var t=i.string(e[0].name);return s(e[0],t),e[1]?i.cons("VarDeclInit",[t,n(e[1])]):i.cons("VarDecl",[t])}))]);break;case"let":o=i.cons("LetDecls",[i.list(e[1].map(function(e){var t=i.string(e[0].name);return s(e[0],t),e[1]?i.cons("LetDeclInit",[t,n(e[1])]):i.cons("LetDecl",[t])}))]);break;case"const":o=i.cons("ConstDecls",[i.list(e[1].map(function(e){var t=i.string(e[0].name);return s(e[0],t),e[1]?i.cons("ConstDeclInit",[t,n(e[1])]):i.cons("ConstDecl",[t])}))]);break;case"num":o=i.cons("Num",[i.string(e[1])]);break;case"string":o=i.cons("String",[i.string(e[1])]);break;case"stat":return n(e[1]);case"call":o=i.cons("Call",[n(e[1]),i.list(e[2].map(n))]);break;case"return":o=i.cons("Return",[n(e[1])]);break;case"new":o=i.cons("New",[n(e[1]),i.list(e[2].map(n))]);break;case"object":o=i.cons("ObjectInit",[i.list(e[1].map(function(e){return i.cons("PropertyInit",[i.string(e[0]),n(e[1])])}))]);break;case"array":o=i.cons("Array",[i.list(e[1].map(n))]);break;case"conditional":o=i.cons("TernaryIf",[n(e[1]),n(e[2]),n(e[3])]);break;case"label":o=i.cons("Label",[i.string(e[1]),n(e[2])]);break;case"continue":o=i.cons("Continue",[i.string(e[1])]);break;case"assign":typeof e[1]=="string"?o=i.cons("OpAssign",[i.string(e[1]),n(e[2]),n(e[3])]):o=i.cons("Assign",[n(e[2]),n(e[3])]);break;case"dot":o=i.cons("PropAccess",[n(e[1]),i.string(e[2])]);break;case"name":o=i.cons("Var",[i.string(e[1])]);break;case"defun":o=i.cons("Function",[s(e[1],i.string(e[1].name||"")),i.list(e[2].map(function(e){return s(e,i.cons("FArg",[i.string(e.name)]))})),i.list(e[3].map(n))]);break;case"function":var u=i.string(e[1].name||"");e[1].name&&s(e[1],u);var a=i.list(e[2].map(function(e){return s(e,i.cons("FArg",[i.string(e.name)]))}));o=i.cons("Function",[u,a,i.list(e[3].map(n))]);break;case"binary":o=i.cons("Op",[i.string(e[1]),n(e[2]),n(e[3])]);break;case"unary-postfix":o=i.cons("PostfixOp",[i.string(e[1]),n(e[2])]);break;case"unary-prefix":o=i.cons("PrefixOp",[i.string(e[1]),n(e[2])]);break;case"sub":o=i.cons("Index",[n(e[1]),n(e[2])]);break;case"for":o=i.cons("For",[n(e[1]),n(e[2]),n(e[3]),n(e[4])]);break;case"for-in":o=i.cons("ForIn",[n(e[1]),n(e[3]),n(e[4])]);break;case"while":o=i.cons("While",[n(e[1]),n(e[2])]);break;case"do":o=i.cons("Do",[n(e[2]),n(e[1])]);break;case"switch":o=i.cons("Switch",[n(e[1]),i.list(e[2].map(function(e){return i.cons("Case",[n(e[0]),i.list(e[1].map(n))])}))]);break;case"break":o=i.cons("Break",[]);break;case"seq":o=i.cons("Seq",[n(e[1]),n(e[2])]);break;case"if":o=i.cons("If",[n(e[1]),n(e[2]),n(e[3])]);break;case"block":o=i.cons("Block",[i.list(e[1]?e[1].map(n):[])]);break;case"regexp":o=i.cons("RegExp",[i.string(e[1]),i.string(e[2])]);break;case"throw":o=i.cons("Throw",[n(e[1])]);break;case"try":o=i.cons("Try",[i.list(e[1].map(n)),i.list(e[2]?[i.cons("Catch",[i.string(e[2][0]),i.list(e[2][1].map(n))])]:[]),e[3]?i.list(e[3].map(n)):i.cons("None",[])]);break;case"with":o=i.cons("With",[n(e[1]),i.list(e[2][1].map(n))]);break;case"atom":o=i.cons("Atom",[]);break;case"ERROR":o=i.cons("ERROR",[]);break;default:console.log("Not yet supported: "+r),console.log("Current node: "+JSON.stringify(e))}return o.setAnnotation("origin",e),e[0].start&&(o.length===1&&o[0]instanceof i.StringNode&&o[0].value?o.setAnnotation("pos",{sl:e[0].start.line,sc:e[0].start.col,el:e[0].start.line,ec:e[0].start.col+o[0].value.length}):o.setAnnotation("pos",{sl:e[0].start.line,sc:e[0].start.col,el:e[0].end.line,ec:e[0].end.col})),o}}),define("v8debug/util",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(){var e=function(){};return function(t,n){e.prototype=n.prototype,t.super_=n.prototype,t.prototype=new e,t.prototype.constructor=t}}(),t.mixin=function(e,t){for(var n in t)e[n]=t[n]},t.implement=function(e,n){t.mixin(e,n)};var r={};r._emit=r.emit=r._dispatchEvent=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(!n||!n.length)return;var t=t||{};t.type=e;for(var r=0,i=n.length;r<i;r++)n[r](t)},r.on=r.addEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(!n)var n=this._eventRegistry[e]=[];n.indexOf(t)==-1&&n.push(t)},r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(!n)return;var r=n.indexOf(t);r!==-1&&n.splice(r,1)},r.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=r}),define("v8debug/V8Message",["require","exports","module","./util"],function(e,t,n){"use strict";var r=e("./util"),i=n.exports=function(e){this.seq=i.$seq++,this.type=e};(function(){this.$msgKeys=["seq","type","command","arguments","request_seq","body","running","success","message","event","runner"];var e=this.$msgKeys.length;this.parse=function(e){var t=JSON.parse(e);return r.mixin(this,t),this},this.stringify=function(){var t={};for(var n=0;n<e;n++){var r=this.$msgKeys[n];typeof this[r]!="undefined"&&(t[r]=this[r])}return JSON.stringify(t)}}).call(i.prototype),i.$seq=1,i.fromString=function(e){return(new i).parse(e)},i.fromObject=function(e){var t=new i;return r.mixin(t,e),t}}),define("v8debug/V8Debugger",["require","exports","module","./util","./V8Message"],function(e,t,n){"use strict";var r=e("./util"),i=r.EventEmitter,s=e("./V8Message"),o=n.exports=function(e,t){this.tabId=e,this.$running=!0,this.$service=t;var n=this.$pending={},r=this;this.$service.addEventListener("debugger_command_"+e,function(e){var t=s.fromObject(e.data),i=t.request_seq;n[i]?(n[i](t.body,t.refs||null,!t.success&&{message:t.message}||null),delete n[i]):t.event&&r.emit(t.event,{data:t.body}),r.$updateRunning(t)})};(function(){r.implement(this,i),this.$seq=0,this.$updateRunning=function(e){if(e.event=="scriptCollected")return;var t=!0;e.type=="response"?t=e.running:e.type=="event"&&(e.event=="break"||e.event=="exception")&&(t=!1),t!==this.$running&&(this.$running=t,this.emit("changeRunning",{data:t}))},this.isRunning=function(){return this.$running},this.continueScript=function(e,t,n){var r=new s("request");r.command="continue",e&&(r.arguments={stepcount:t||1,stepaction:e}),this.$send(r,n)},this.lookup=function(e,t,n){var r=new s("request");r.command="lookup",r.arguments={inlineRefs:!1,handles:e},t&&(r.arguments.includesSource=t),this.$send(r,n)},this.backtrace=function(e,t,n,r,i){var o=new s("request");o.command="backtrace",o.arguments={inlineRefs:!!r},e&&(o.arguments.fromFrame=e),t&&(o.arguments.toFrame=t),typeof n=="boolean"&&(o.arguments.bottom=n),this.$send(o,i)},this.scope=function(e,t,n,r){var i=new s("request");i.command="scope",i.arguments={number:e,inlineRefs:!!n},typeof t=="number"&&(i.arguments.frameNumber=t),this.$send(i,r)},this.version=function(e){var t=new s("request");t.command="version",this.$send(t,e)},this.scripts=function(e,t,n,r){var i=new s("request");i.command="scripts",i.arguments={types:e||o.NORMAL_SCRIPTS,includeSource:!!n},t&&(i.arguments.ids=t),this.$send(i,function(e,t,n){r(e||[],t,n)})},this.evaluate=function(e,t,n,r,i){var o=this,u=new s("request");u.command="evaluate",u.arguments={expression:e},t&&(u.arguments.frame=t),n&&(u.arguments.global=n),r&&(u.arguments.disable_break=r),this.backtrace(null,null,!1,!0,function(e){var t={};for(var n=0,r=e.frames,s=r[n];n<r.length;s=r[++n])for(var a=0,f=s.locals[a];a<s.locals.length;f=s.locals[++a])t[f.name]||(t[f.name]=f.value.ref);u.arguments.additional_context=[];for(var l in t){if(!t.hasOwnProperty(l))continue;u.arguments.additional_context.push({name:l,handle:t[l]})}o.$send(u,i)})},this.setbreakpoint=function(e,t,n,r,i,o,u,a){var f=new s("request");f.command="setbreakpoint",f.arguments={type:e,target:t,line:n,enabled:i===undefined?i:!0},r&&(f.column=r),o&&(f.condition=o),u&&(f.ignoreCount=u),this.$send(f,a)},this.changebreakpoint=function(e,t,n,r,i){var o=new s("request");o.command="changebreakpoint",o.arguments={enabled:t!==!0?!1:!0,breakpoint:e},n&&(o.condition=n),r&&(o.ignoreCount=r),this.$send(o,i)},this.clearbreakpoint=function(e,t){var n=new s("request");n.command="clearbreakpoint",n.arguments={breakpoint:e},this.$send(n,t)},this.listbreakpoints=function(e){var t=new s("request");t.command="listbreakpoints",this.$send(t,e)},this.suspend=function(e){var t=new s("request");t.command="suspend",this.$send(t,e)},this.changelive=function(e,t,n,r){var i=new s("request");i.command="changelive",i.arguments={script_id:e,new_source:t,preview_only:!!n},this.$send(i,r)},this.$send=function(e,t){t&&(this.$pending[e.seq]=t),e.runner="node",this.$service.debuggerCommand(this.tabId,e.stringify())}}).call(o.prototype),o.NATIVE_SCRIPTS=1,o.EXTENSION_SCRIPTS=2,o.NORMAL_SCRIPTS=4})})(),define("build/src/core.packed",function(){}),define("apf/elements/codeeditor",["require","exports","module","ace/editor","ace/edit_session","ace/virtual_renderer","ace/undomanager","ace/multi_select","ace/document","ace/lib/dom","ace/lib/fixoldbrowsers"],function(e,t,n){"use strict";var r=e("ace/editor").Editor,i=e("ace/edit_session").EditSession,s=e("ace/virtual_renderer").VirtualRenderer,o=e("ace/undomanager").UndoManager,u=e("ace/multi_select").MultiSelect,a=e("ace/document").Document,f=e("ace/lib/dom");e("ace/lib/fixoldbrowsers"),apf.codeeditor=n.exports=function(e,t){this.$init(t||"codeeditor",apf.NODE_VISIBLE,e),this.documents=[],this.$cache={}},function(){this.implement(apf.DataAction),this.$focussable=!0,this.$childProperty="value",this.$isTextInput=!0,this.value="",this.multiline=!0,this.caching=!0,this.$booleanProperties.activeline=!0,this.$booleanProperties.gutterline=!0,this.$booleanProperties.caching=!0,this.$booleanProperties.readonly=!0,this.$booleanProperties.showinvisibles=!0,this.$booleanProperties.showprintmargin=!0,this.$booleanProperties.showindentguides=!0,this.$booleanProperties.overwrite=!0,this.$booleanProperties.softtabs=!0,this.$booleanProperties.gutter=!0,this.$booleanProperties.highlightselectedword=!0,this.$booleanProperties.autohidehorscrollbar=!0,this.$booleanProperties.behaviors=!0,this.$booleanProperties.wrapbehaviors=!0,this.$booleanProperties.folding=!0,this.$booleanProperties.wrapmode=!0,this.$booleanProperties.wrapmodeViewport=!0,this.$booleanProperties.animatedscroll=!0,this.$booleanProperties.globalcommands=!0,this.$booleanProperties.fadefoldwidgets=!0,this.$supportedProperties.push("value","syntax","activeline","selectstyle","caching","readonly","showinvisibles","showprintmargin","printmargincolumn","overwrite","tabsize","softtabs","scrollspeed","showindentguides","theme","gutter","highlightselectedword","autohidehorscrollbar","animatedscroll","behaviors","wrapbehaviors","folding","newlinemode","globalcommands","fadefoldwidgets","gutterline"),this.$getCacheKey=function(e){var t;return typeof e=="string"?this.xmlRoot?t=this.xmlRoot.getAttribute(apf.xmldb.xmlIdTag):t=e:e.nodeType&&(t=e.getAttribute(apf.xmldb.xmlIdTag)),t},this.clearCacheItem=function(e){if(!this.caching)return;var t=this.$getCacheKey(e);t&&delete this.$cache[t]},this.addEventListener("unloadmodel",function(){this.syncValue()}),this.$propHandlers.value=function(e){var t,n,r=this;this.caching&&(n=this.$getCacheKey(e)),e instanceof i&&(t=e),!t&&n&&(t=this.$cache[n]),t?typeof e=="string"&&!t.hasValue&&(t.setValue(e),t.hasValue=!0):(e.nodeType&&(apf.xmldb.addNodeListener(e.nodeType==1?e:e.parentNode,this),e.nodeType>1&&e.nodeType<5?e=e.nodeValue:e=e.firstChild&&e.firstChild.nodeValue),t=new i(new a(e||"")),t.setUndoManager(new o),t.setMode(this.getMode(this.syntax)),t.cacheId=n,n&&(this.$cache[n]=t)),t.$hasModeListener||(t.$hasModeListener=!0,t.on("loadmode",function(e){r.dispatchEvent("loadmode",e)})),r.syntax=t.syntax,r.dispatchEvent("prop.syntax",{value:t.syntax}),t.setTabSize(parseInt(r.tabsize,10)),t.setUseSoftTabs(r.softtabs),t.setUseWrapMode(r.wrapmode),r.wrapmodeViewport?t.setWrapLimitRange(r.wraplimitmin,null):t.setWrapLimitRange(r.wraplimitmin,r.printmargincolumn),t.setFoldStyle(r.folding?"markbegin":"manual"),t.setNewLineMode(r.newlinemode),r.$editor.setShowPrintMargin(r.showprintmargin),r.$editor.setSession(t)},this.afterOpenFile=function(e,t){},this.$propHandlers.theme=function(e){this.$editor.setTheme(e)},this.$propHandlers.newlinemode=function(e){this.newlinemode=e||"auto",this.$editor.getSession().setNewLineMode(this.newlinemode)},this.$propHandlers.syntax=function(e){this.$editor.session.setMode(this.getMode(e)),this.$editor.session.syntax=e},this.getMode=function(e){return e=(e||"text").toLowerCase(),e.indexOf("/")==-1&&(e="ace/mode/"+e),e},this.$propHandlers.activeline=function(e){this.$editor.setHighlightActiveLine(e)},this.$propHandlers.gutterline=function(e){this.$editor.setHighlightGutterLine&&this.$editor.setHighlightGutterLine(e)},this.$propHandlers.selectstyle=function(e){this.$editor.setSelectionStyle(e)},this.$propHandlers.showprintmargin=function(e,t,n){this.$editor.setShowPrintMargin(e)},this.$propHandlers.printmargincolumn=function(e,t,n){this.$editor.setPrintMarginColumn(e),this.wrapmodeViewport||this.$editor.getSession().setWrapLimitRange(this.wraplimitmin,e)},this.$propHandlers.showinvisibles=function(e,t,n){this.$editor.setShowInvisibles(e)},this.$propHandlers.showindentguides=function(e,t,n){this.$editor.setDisplayIndentGuides(e)},this.$propHandlers.animatedscroll=function(e,t,n){this.$editor.setAnimatedScroll(e)},this.$propHandlers.overwrite=function(e,t,n){this.$editor.setOverwrite(e)},this.$propHandlers.readonly=function(e,t,n){this.$editor.setReadOnly(e)},this.$propHandlers.tabsize=function(e,t,n){this.$editor.getSession().setTabSize(parseInt(e,10))},this.$propHandlers.folding=function(e,t,n){this.$editor.setShowFoldWidgets(e),this.$editor.getSession().setFoldStyle(e?"markbegin":"manual")},this.$propHandlers.fadefoldwidgets=function(e,t,n){this.$editor.setFadeFoldWidgets&&this.$editor.setFadeFoldWidgets(e)},this.$propHandlers.softtabs=function(e,t,n){this.$editor.getSession().setUseSoftTabs(e)},this.$propHandlers.scrollspeed=function(e,t,n){this.$editor.setScrollSpeed(e||2)},this.$propHandlers.gutter=function(e,t,n){this.$editor.renderer.setShowGutter(e)},this.$propHandlers.fontsize=function(e,t,n){this.$ext.style.fontSize=e+"px"},this.$propHandlers.wrapmode=function(e,t,n){this.$editor.getSession().setUseWrapMode(e)},this.$propHandlers.wraplimitmin=function(e,t,n){this.$editor.getSession().setWrapLimitRange(e,this.wraplimitmax)},this.$propHandlers.wraplimitmax=function(e,t,n){this.$editor.getSession().setWrapLimitRange(this.wraplimitmin,e)},this.$propHandlers.wrapmodeViewport=function(e,t,n){e===!0?this.$editor.getSession().setWrapLimitRange(this.wraplimitmin,null):this.$editor.getSession().setWrapLimitRange(this.wraplimitmin,this.printmargincolumn)},this.$propHandlers.highlightselectedword=function(e,t,n){this.$editor.setHighlightSelectedWord(e)},this.$propHandlers.autohidehorscrollbar=function(e,t,n){this.$editor.renderer.setHScrollBarAlwaysVisible(!e)},this.$propHandlers.behaviors=function(e,t,n){this.$editor.setBehavioursEnabled(e)},this.$propHandlers.wrapbehaviors=function(e,t,n){this.$editor.setWrapBehavioursEnabled(e)};var e=this.$propHandlers.model;this.$propHandlers.model=function(t){e.call(this,t)},this.addEventListener("xmlupdate",function(e){var t=e.xmlNode.getAttribute(apf.xmldb.xmlIdTag);this.$cache[t]}),this.addEventListener("keydown",function(e){if(e.keyCode==9)return!1}),this.setValue=function(e){return this.setProperty("value",e,!1,!0)},this.clear=function(){this.$propHandlers.value.call(this,"",null,!0),this.$editor.resize(!0),this.dispatchEvent("clear")},this.getValue=function(){return this.$editor.getSession().getValue()},this.getDocument=this.getSession=function(){return this.$editor.getSession()},this.getSelection=function(){return this.$editor.getSession().getSelection()},this.getLastSearchOptions=function(){return this.$editor.getLastSearchOptions()},this.select=function(){},this.deselect=function(){this.$editor.clearSelection()},this.scrollTo=function(){},this.getDefaults=function(){return this.$defaults},this.$focus=function(e){if(!this.$ext||this.$ext.disabled)return;this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus"),this.$editor.focus()},this.syncValue=function(){var e=this.$editor.getSession();if(!e.cacheId||e.cacheId==this.$getCacheKey(this.value)){var t=this.getValue();this.value!=t&&this.setProperty("value",t)}},this.$blur=function(e){if(!this.$ext)return;this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"]),this.$editor.blur()},this.$isTextInput=function(e){return!0},this.$draw=function(){this.$ext=this.$getExternal(),this.$input=this.$getLayoutNode("main","content",this.$ext),this.addEventListener("resize",function(e){this.$editor.resize()}),this.$editor=new r(new s(this.$input),null),new u(this.$editor),apf.isTrue(this.getAttribute("globalcommands"))&&this.$editor.keyBinding.setDefaultHandler&&this.$editor.keyBinding.setDefaultHandler(null);var e=this.$editor,t=this;e.addEventListener("changeOverwrite",function(e){t.setProperty("overwrite",e.data)}),e.addEventListener("guttermousedown",function(e){t.dispatchEvent("guttermousedown",e)}),e.addEventListener("gutterdblclick",function(e){t.dispatchEvent("gutterdblclick",e)})},this.$loadAml=function(){var e=this.$editor,t=e.getSession();this.syntax===undefined&&(this.syntax="text"),this.tabsize===undefined&&(this.tabsize=t.getTabSize()),this.softtabs===undefined&&(this.softtabs=t.getUseSoftTabs()),this.scrollspeed===undefined&&(this.scrollspeed=e.getScrollSpeed()),this.selectstyle===undefined&&(this.selectstyle=e.getSelectionStyle()),this.activeline=e.getHighlightActiveLine(),this.gutterline=e.getHighlightGutterLine(),this.animatedscroll=e.getAnimatedScroll(),this.showindentguides=e.getDisplayIndentGuides(),this.autohidehorscrollbar=!e.renderer.getHScrollBarAlwaysVisible(),this.highlightselectedword=e.getHighlightSelectedWord(),this.behaviors=!e.getBehavioursEnabled(),this.wrapbehaviors=e.getWrapBehavioursEnabled(),this.readonly===undefined&&(this.readonly=e.getReadOnly()),this.showinvisibles===undefined&&(this.showinvisibles=e.getShowInvisibles()),this.showprintmargin===undefined&&(this.showprintmargin=e.getShowPrintMargin()),this.printmargincolumn===undefined&&(this.printmargincolumn=e.getPrintMarginColumn()),this.overwrite===undefined&&(this.overwrite=e.getOverwrite()),this.fontsize===undefined&&(this.fontsize=12);var n=t.getWrapLimitRange();this.wraplimitmin===undefined&&(this.wraplimitmin=40),this.wraplimitmax===undefined&&(this.wraplimitmax=n.max),this.wrapmode===undefined&&(this.wrapmode=t.getUseWrapMode()),this.gutter===undefined&&(this.gutter=e.renderer.getShowGutter()),this.folding===undefined&&(this.folding=!0),this.newlinemode==undefined&&(this.newlinemode="auto")}}.call(apf.codeeditor.prototype=new apf.StandardBinding),apf.config.$inheritProperties["initial-message"]=1,apf.aml.setElement("codeeditor",apf.codeeditor),apf.codebox=function(e,t){this.$init(t||"codebox",apf.NODE_VISIBLE,e)},function(){this.$isTextInput=function(e){return!0},this.$focussable=!0,this.$childProperty="value",this.value="",this.$draw=function(){function t(){if(e.$isFocused||e.session.getValue())return;f.addCssClass(e.codebox.$ext,"tb_textboxInitial");if(e.renderer.initialMessageNode)return;e.renderer.initialMessageNode=document.createTextNode(e.codebox["initial-message"]||""),e.renderer.scroller.appendChild(e.renderer.initialMessageNode)}this.$ext=this.$getExternal(),this.$input=this.$getLayoutNode("main","input",this.$ext),this.$button=this.$getLayoutNode("main","button",this.$ext),this.$inputInitFix=this.$getLayoutNode("main","initialfix",this.$ext),this.addEventListener("resize",function(e){this.ace.resize()}),this.$input.style.textShadow="none";var e=this.createSingleLineAceEditor(this.$input);e.commands.removeCommands(["find","replace","replaceall","gotoline","findnext","findprevious"]),e.commands.removeCommands(["indent","outdent"]),this.$editor=this.ace=e,e.renderer.setPadding(0),this.ace.codebox=this,e.on("focus",function(){f.removeCssClass(e.codebox.$ext,"tb_textboxInitial"),e.renderer.initialMessageNode&&(e.renderer.scroller.removeChild(e.renderer.initialMessageNode),e.renderer.initialMessageNode=null)}),e.on("blur",t),setTimeout(t,100);if(apf.isTrue(this.getAttribute("clearbutton"))){var n=this,r=!1;e.renderer.on("afterRender",function(){var t=!!e.getValue();r!=t&&(r=t,n.$button.style.display=r?"block":"")}),this.$button.addEventListener("click",function(){e.setValue("")},!1)}this.$ext.addEventListener("mousedown",function(){e.focus()},!1)},this.getValue=function(){return this.ace.getValue()},this.setValue=function(e){return this.ace.setValue(e)},this.select=function(){return this.ace.selectAll()},this.$focus=function(e){if(!this.$ext||this.disabled)return;this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus"),this.ace.focus()},this.$blur=function(){if(!this.$ext)return;this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"]),this.ace&&this.ace.blur()},this.$enable=function(){this.ace.setReadOnly(!1)},this.$disable=function(){this.ace.setReadOnly(!0)},this.execCommand=function(e){this.ace.commands.exec(e,this.ace)},this.createSingleLineAceEditor=function(e){var t=new s(e);t.screenToTextCoordinates=function(e,t){var n=this.pixelToScreenCoordinates(e,t);return this.session.screenToDocumentPosition(Math.min(this.session.getScreenLength()-1,Math.max(n.row,0)),Math.max(n.column,0))},t.setOption("maxLines",4),t.setStyle("ace_one-line");var n=new r(t);return new u(n),n.session.setUndoManager(new o),n.setHighlightActiveLine(!1),n.setShowPrintMargin(!1),n.renderer.setShowGutter(!1),n.renderer.setHighlightGutterLine(!1),n.$mouseHandler.$focusWaitTimout=0,n.setReadOnly=function(e){this.$readOnly!=e&&(this.codebox.$ext.style.pointerEvents=e?"none":""),this.setOption("readOnly",e)},n},this.$loadAml=function(){typeof this["clearbutton"]=="undefined"&&this.$setInheritedAttribute("clearbutton"),typeof this["initial-message"]=="undefined"&&this.$setInheritedAttribute("initial-message")}}.call(apf.codebox.prototype=new apf.StandardBinding),apf.aml.setElement("codebox",apf.codebox)}),define("text",["module"],function(e){"use strict";var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.3",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),n!==-1&&(t=i.substring(n+1,i.length),t=t==="strip",i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+"."+s.ext,h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.moduleName+"."+o.ext,a=r.toUrl(o.moduleName+"."+o.ext)+".js";t.load(u,r,function(n){var r=function(e){return i(a,e)};r.asModule=function(e,t){return i.asModule(e,a,t)},t.write(e,u,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!ext/commands/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:hbox edge="2 5 2 5" align="center" position="20000" class="underlined">\n        <a:label flex="1">Keybindings: </a:label>\n        <a:dropdown id="ddKeyBind"\n          model     = "mdlKeyBindings"\n          width     = "120"  \n          height    = "21"\n          value     = "[{require(\'ext/settings/settings\').model}::general/keybindings/@preset]"\n          each      = "[item]"\n          caption   = "[text()]"\n          eachvalue = "[@value]" />\n        \n        <a:model id="mdlKeyBindings">\n            <data>\n                <item value="auto">Auto</item>\n                <item value="mac">Apple OSX</item>\n                <item value="win">Microsoft Windows</item>\n            </data>\n        </a:model>\n    </a:hbox>\n</a:application>'}),define("ext/commands/commands",["require","exports","module","core/ide","core/ext","ace/lib/event","ace/keyboard/keybinding","ace/commands/command_manager","text!ext/commands/settings.xml"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ace/lib/event"),o=e("ace/keyboard/keybinding").KeyBinding,u=e("ace/commands/command_manager").CommandManager,a=e("text!ext/commands/settings.xml"),f=new u(apf.isMac?"mac":"win"),l=f.addCommand,c=f.removeCommand,h=new o({commands:f,fake:!0});s.addCommandKeyListener(document.documentElement,h.onCommandKey.bind(h)),r.commandManager=(new apf.Class).$init(),n.exports=i.register("ext/commands/commands",apf.extend(f,{name:"Keyboard Commands",dev:"Ajax.org",alone:!0,type:i.GENERAL,init:function(){var e=this;r.addEventListener("settings.load",function(t){t.ext.setDefaults("general/keybindings",[["preset","auto"]]);var n=t.model.queryValue("general/keybindings/@preset");n&&n!="auto"&&e.changePlatform(n)}),r.addEventListener("init.ext/settings/settings",function(t){t.ext.addSettings("General",a,function(){ddKeyBind.addEventListener("afterchange",function(){e.changePlatform(this.selected.getAttribute("value"))})})})},changePlatform:function(e){this.platform=e=="auto"?apf.isMac?"mac":"win":e,this.addCommands(this.commands)},getHotkey:function(e){return this.commands[e].bindKey[this.platform]},exec:function(e,t,n,r){typeof e=="string"&&(e=this.commands[e]);if(!e)return!1;if(!t||t.fake){var i=self.tabEditors&&tabEditors.$activepage;t=i&&i.$editor}if(Array.isArray(e)){for(var s=e.length;s--;){var o=e[s];if(!o.isAvailable||o.isAvailable(t,r))break;o=null}if(!o)return;e=o}else if(e.isAvailable&&!e.isAvailable(t,r))return;e.findEditor&&(t=e.findEditor(t));if(t&&t.$readOnly&&!e.readOnly)return!1;var u={editor:t,command:e,args:n};if(cloud9config.debug)var a=this._emit("exec",u);else try{var a=this._emit("exec",u)}catch(r){}return a!==!1&&r&&apf.queue.empty(),a!==!1},addCommand:function(e){r.commandManager[e.name]="",e.readOnly==undefined&&(e.readOnly=!0),l.apply(this,arguments),e.bindKey&&r.commandManager.setProperty(e.name,e.bindKey[this.platform])},addCommands:function(e,t){var n=this;e&&Object.keys(e).forEach(function(r){var i=e[r];if(typeof i=="string")return this.bindKey(i,r,t);typeof i=="function"&&(i={exec:i}),i.name||(i.name=r);if(t&&n.commands[i.name])return;i.isDefault=t,this.addCommand(i)},this)},removeCommands:function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},removeCommand:function(e,t){var n=typeof e=="string"?e:e.name;r.commandManager[n]&&r.commandManager.setProperty(n,""),e=this.commands[n],delete this.commands[n];var i=this.commmandKeyBinding;for(var s in i)for(var o in i[s]){var u=i[s][o];if(u==e)delete i[s][o];else if(u&&u.indexOf&&u.splice){var a=u.indexOf(e);a!=-1&&u.splice(a,1)}}},bindKey:function(e,t,n){if(!e)return;var r=this.commmandKeyBinding,i=this;e.split("|").forEach(function(e){var s=i.parseKeys(e,t),o=s.hashId,u=r[o]||(r[o]={});u[s.key]?(Array.isArray(u[s.key])||(u[s.key]=[u[s.key]]),n||t.isDefault?u[s.key].unshift(t):u[s.key].push(t)):u[s.key]=t})},removeCommandByName:function(e){var t=this.commands[e];t&&this.removeCommand(t)},removeCommandsByName:function(e){var t=this;e.forEach(function(e){var n=t.commands[e];n&&t.removeCommand(n)})}}))}),define("text!ext/uploadfiles/uploadfiles.css",[],function(){return".uploadactivity-header {\n    width: 100%;\n    background: url({ide.staticPrefix}/ext/uploadfiles/style/images/list_uploadactivity_header_bg.png) no-repeat 0 0;\n    background-size: 100% 30px;\n}\n\n.uploadactivity-header .header, #uploadactivityNumFiles {\n    height: 30px;\n    font-family: Arial;\n    font-size: 11px;\n    color: #a3a3a3;\n    text-shadow: #ffffff 0 1px 0;\n    line-height: 37px;\n    font-weight: bold;\n    overflow: hidden;\n}\n\n.uploadactivity-header .header {\n    text-indent: 10px;\n}\n.uploadDropArea {\n    height: 95px;\n    width: 335px;\n    background: url({ide.staticPrefix}/ext/uploadfiles/style/images/upload-droparea-box.png) no-repeat 0 0;\n}\n\n.uploadDropArea.over {\n    background: url({ide.staticPrefix}/ext/uploadfiles/style/images/upload-droparea-box.png) no-repeat 0 -95px;\n}\n.uploadOrText {\n    height: 12px;\n    width: 18px;\n    background: url({ide.staticPrefix}/ext/uploadfiles/style/images/upload-dialog-or-text.png) no-repeat 0 1px;\n}\n\n.uploadOrSelectText {\n    height: 15px;\n    width: 77px;\n    background: url({ide.staticPrefix}/ext/uploadfiles/style/images/upload-dialog-or-select-text.png) no-repeat 0 0;\n}\n\n.txtUploadTargetFolder {\n    font-size: 11px;\n    color: #838383;\n}\n#fileUploadSelect {\n    z-index: 9999;\n}\n#fileUploadSelect {\n    position: absolute;\n    top: 127px;\n    left: 99px;\n    width: 181px;\n    height: 24px;\n    opacity: 0;\n}\n\n#fileUploadSelect.uploadWithFolders {\n    position: absolute;\n    top: 122px;\n    left: 93px;\n    width: 65px;\n    height: 24px;\n    opacity: 0;\n}\n\n#folderUploadSelect {\n    display: none;\n    position: absolute;\n    top: 127px;\n    left: 188px;\n    width: 152px;\n    height: 24px;\n    opacity: 0;\n}\n\n.uploadSelectButtons div {\n    color: #ffffff;\n}"}),define("text!ext/uploadfiles/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:list name="list-uploadactivity">\n        <a:style><![CDATA[\n            .list-uploadactivity {\n                position      : relative;\n                overflow      : hidden;\n                left: 0;\n                right: 0;\n                background  : url(images/list_uploadactivity_bg.png) no-repeat 0 0;\n                background-size: 100% 100%;\n            }\n            \n            .list-uploadactivity>DIV.uploadactivity-items {\n                height: 100px;\n                max-height: 100px;\n                overflow: hidden;\n            }\n            \n            .list-uploadactivity .item {\n                height      : 20px;\n                padding     : 0 5px 2px 5px;\n                position    : relative;\n                cursor      : default;\n                border-bottom:1px solid transparent;\n            }\n\n            .list-uploadactivity .item .icon {\n                position    : absolute;\n                width       : 16px;\n                height      : 16px;\n                top         : 2px;\n                left        : 12px;\n                background-position:0 0;\n            }\n\n            .list-uploadactivity .item .uploadactivity-caption,\n            .list-uploadactivity .item .uploadactivity-progress {\n                display     : block;\n                height      : 18px;\n                padding     : 3px 0 0 0;\n                margin      : 0 0 0 5px;\n                font-family : Arial;\n                font-size   : 11px;\n                font-weight : normal;\n                color       : #303030;\n                text-shadow : rgba(255, 255, 255, 1) 0px 1px 0px;\n                cursor      : default;\n            }\n            \n            .list-uploadactivity .item .uploadactivity-caption {\n                overflow: hidden;\n                white-space: nowrap;\n                text-overflow: ellipsis;\n                padding-right: 30px;\n            }\n            .list-uploadactivity .item .uploadactivity-caption.bold {\n                font-weight: bold;\n            }\n            \n            .list-uploadactivity .item .uploadactivity-progress {\n                display     : block;\n                color       : #179439;\n                position: absolute;\n                right: 5px;\n                top: 1px;\n            }\n            \n            .list-uploadactivity .item.hover {\n                border-bottom:1px solid #d3d3d3;\n                background : #fefefe no-repeat 0 50%;\n                background : -webkit-gradient(linear, left top, left bottom, from(#fefefe), color-stop(1, #1f2f2f2));\n                background : -moz-linear-gradient(center bottom, #fefefe 100%, #f2f2f2 100%) repeat scroll 0 0 transparent;\n                cursor     : pointer;\n            }\n            \n            .list-uploadactivity .item.hover .uploadactivity-caption {\n                text-shadow : none;\n            }\n            \n            .list-uploadactivity .item.selected {\n                cursor:default;\n            }\n            \n            .list-uploadactivity .item .uploadactivity-delete {\n                width       : 13px;\n                height      : 14px;\n                position    : absolute;\n                top         : 4px;\n                right       : 12px;\n                background  : url(images/delete_btn.png) no-repeat 0 0;\n                cursor      : default;\n                display     : none;\n            }\n\n            .list-uploadactivity .item.hover .uploadactivity-delete {\n                display: block;\n            }\n            \n            .list-uploadactivity .item.hover .uploadactivity-delete:hover {\n                background-position: 0 -14px;\n            }\n            \n            .list-uploadactivity .message.empty {\n                padding:0 10px;\n                font-family : Arial;\n                font-size   : 11px;\n                color       : #404040;\n                text-shadow : rgba(255, 255, 255, 1) 0px 1px 0px;\n            }\n        ]]></a:style>\n        <a:style condition="apf.isChrome || apf.isSafari"><![CDATA[\n            .list-uploadactivity .item .uploadactivity-caption {\n                height  : 17px;\n                padding : 4px 30px 0 0;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main container=".">\n                <div class="list-uploadactivity">\n                    <div class="uploadactivity-items"></div>\n                </div>\n            </a:main>\n            <a:item\n                class   = "."\n                caption = "."\n                icon    = "div"\n                select  = ".">\n                <div class="item"> </div>\n            </a:item>\n            <a:dragindicator>\n                <div class=\'draglist\'><span><u>-</u></span></div>\n            </a:dragindicator>\n            <a:loading>\n                <div class="loading">Loading...</div>\n            </a:loading>\n            <a:empty caption=".">\n                <div class="message">-</div>\n            </a:empty>\n        </a:presentation>\n    </a:list>\n    <a:checkbox name="uploadactivity-switch">\n        <a:style><![CDATA[\n            .uploadactivity-switch {\n                position   : relative;\n                overflow   : visible;\n                width      : 9px;\n                height     : 15px;\n            }\n    \n            .uploadactivity-switch .checkbox {\n                width      : 9px;\n                height     : 15px;\n                overflow   : hidden;\n                position   : absolute;\n                background : url("images/list_uploadactivity_switch.png") no-repeat -18px 0;\n            }\n    \n            .uploadactivity-switchChecked.uploadactivity-switchDown .checkbox {\n                background-position : -9px 0;\n            }\n    \n            .uploadactivity-switchChecked .checkbox {\n                background-position : 0 0;\n            }\n    \n            .uploadactivity-switchError span {\n                background-color : #ffb500;\n                color            : #fbfbfb;\n            }\n    \n            .uploadactivity-switchDisabled .checkbox {\n                background-position : 0 0;\n            }\n    \n            .uploadactivity-switchDisabled span {\n                color : #bebebe;\n            }\n        ]]></a:style>\n        <a:style condition="apf.isWebkit"><![CDATA[\n            .uploadactivity-switch span {\n                top : -2px;\n            }\n        ]]></a:style>\n    \n        <a:presentation>\n            <a:main label="span/text()" minheight="15" minwidth="9">\n                <div class=\'uploadactivity-switch\'>\n                    <div class=\'checkbox\'> </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:checkbox>\n    \n    <a:button name="btn-cancel-upload">\n        <a:style><![CDATA[\n            .btn-cancel-upload {\n                position            : relative;\n                -moz-user-select    : none;\n                -khtml-user-select  : none;\n                user-select         : none;\n                color               : #a4a4a4;\n                font-size           : 11px;\n                height              : 14px;\n                cursor              : default;\n            }\n            \n            .btn-cancel-uploadOver {\n                color: #c91212;\n            }\n            \n            .btn-cancel-uploadDown {\n                color: #810707;\n            }\n        ]]></a:style>\n    \n        <a:presentation>\n            <a:main\n              caption    = ".">\n                <div class="btn-cancel-upload">\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n</a:skin>\n'}),define("text!ext/uploadfiles/uploadfiles.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n\n    <a:window id="winUploadFiles"\n      onshow  = "require(\'ext/uploadfiles/uploadfiles\').onShow()"\n      onhide = "require(\'ext/uploadfiles/uploadfiles\').onClose()"\n      title   = "Upload Files"\n      buttons = "close"\n      skin    = "bk-window"\n      class   = "relative dark-bg"\n      modal   = "false"\n      render  = "runtime"\n      center  = "true"\n      width   = "354"\n      kbclose = "true">\n        <a:vbox edge="10" padding="0" align="center">\n            <div id="uploadDropArea" class="uploadDropArea"></div>\n            <a:hbox id="hboxUploadNoFolders" class="uploadSelectButtons" padding="10" height="60" pack="center" align="center">\n                <div class="uploadOrText"></div>\n                <a:button skin="btn-default-css3" disabled="true">Select files to upload</a:button>\n            </a:hbox>\n            <a:hbox id="hboxUploadWithFolders" class="uploadSelectButtons" padding="5" height="60" pack="center" align="center" visible="false">\n                <div class="uploadOrSelectText"></div>\n                <a:button id="fileUploadSelectBtn" skin="btn-default-css3" disabled="true">files</a:button>\n                <div class="uploadOrText"></div>\n                <a:button skin="btn-default-css3" disabled="true">a complete folder</a:button>\n            </a:hbox>\n            <div class="txtUploadTargetFolder" margin="0 0 10">Upload folder: <span id="uplTargetFolder"></span></div>\n        </a:vbox>\n        <input id="fileUploadSelect" class="uploadWithFolders" type="file" multiple="multiple" />\n        <input id="folderUploadSelect" type="file" webkitdirectory="" directory="" />\n\n        <a:hbox padding="10" pack="end" edge="6 10 10">\n            <a:button onclick="winUploadFiles.hide()" skin="btn-default-css3">Close</a:button>\n        </a:hbox>\n    </a:window>\n\n    <a:model id="mdlUploadActivity">\n        <data />\n    </a:model>\n\n    <a:vbox id="boxUploadActivity" visible="false">\n        <a:hbox class="uploadactivity-header" height="30" align="center" padding="3">\n            <span class="header">Upload Activity</span>\n            <span id="uploadactivityNumFiles"></span>\n            <a:filler />\n            <a:button id="btnCancelUploads"\n              caption="Cancel"\n              skin="btn-cancel-upload"\n              skinset="uploadfiles"\n              margin="7 3 0 0"\n              onclick="require(\'ext/uploadfiles/uploadfiles\').cancelAll()"\n            ></a:button>\n            <a:checkbox id="cbToggleUploadQueue" skin="uploadactivity-switch" skinset="uploadfiles" value="1" margin="6 5 0 0" />\n        </a:hbox>\n        <a:list id="lstUploadActivity"\n            skin = "list-uploadactivity"\n            skinset = "uploadfiles"\n            model = "mdlUploadActivity"\n            height="160"\n            scrollbar = "sbShared 32 2 2"\n        >\n            <a:each match="[file]">\n                <a:caption><?lm\n                    if ([@progress]) {\n                        <div class="uploadactivity-caption bold">[@name]</div>\n                        <div class="uploadactivity-progress">[@progress]%</div>\n                    }\n                    else {\n                        <div class="uploadactivity-caption">[@name]</div>\n                        <div class="uploadactivity-delete" onclick="require(\'ext/uploadfiles/uploadfiles\').removeFromQueue(%[.].getAttribute(\'name\'))"></div>\n                    }\n                ?></a:caption>\n            </a:each>\n        </a:list>\n    </a:vbox>\n\n    <a:window\n      id        = "winUploadFileExists"\n      title     = "File already exists"\n      icon      = ""\n      center    = "true"\n      render    = "runtime"\n      kbclose   = "true"\n      buttons   = "close"\n      width     = "512"\n      skin      = "bk-window"\n      class     = "relative"\n      modal     = "false">\n        <a:vbox padding="10" edge="15 20 25 20">\n            <h3>File already exists</h3>\n            <div id="uploadFileExistsMsg" class="alertMsg">Do you want to overwrite this file?</div>\n        </a:vbox>\n\n        <a:hbox edge="6 10 10" pack="end" padding="8">\n            <a:button id="btnUploadOverwriteAll"\n                skin="btn-default-css3"\n                class="btn-green"\n                onclick="\n                    winUploadFileExists.hide();\n                    require(\'ext/uploadfiles/uploadfiles\').overwriteAll()\n                "\n                visible="false">Overwrite all</a:button>\n            <a:button id="btnUploadSkipAll"\n                skin="btn-default-css3"\n                class="btn-red"\n                onclick="\n                    winUploadFileExists.hide();\n                    require(\'ext/uploadfiles/uploadfiles\').skipAll()\n                "\n                visible="false">Skip all</a:button>\n            <a:filler/>\n            <a:button id="btnUploadOverwrite"\n                default="3"\n                skin="btn-default-css3"\n                class="btn-green"\n                onclick="\n                    winUploadFileExists.hide();\n                    require(\'ext/uploadfiles/uploadfiles\').overwrite()\n                ">Overwrite</a:button>\n            <a:button id="btnUploadSkip"\n                skin="btn-default-css3"\n                class="btn-red"\n                onclick="\n                    winUploadFileExists.hide();\n                    require(\'ext/uploadfiles/uploadfiles\').skip()\n                ">Skip</a:button>\n        </a:hbox>\n    </a:window>\n\n    <a:window\n      id        = "winNoFolderSupport"\n      title     = "Browser limitations"\n      icon      = ""\n      skin      = "bk-window"\n      class     = "relative"\n      modal     = "false"\n      center    = "true"\n      render    = "runtime"\n      kbclose   = "true"\n      buttons   = "close"\n      width     = "512">\n        <a:vbox width="100%">\n            <a:hbox edge="15 10 25 10" padding="10">\n                <div class="alertWarn" margin="0 10 0 10"/>\n                <a:vbox flex="1" padding="5">\n                    <h3>Folder Drag and Drop is currently not supported by any browser.</h3>\n                    <div class="alertMsg">Chrome-users can use our upload dialog to upload folders.</div>\n                </a:vbox>\n            </a:hbox>\n<!--            <a:divider skin="hordivider" />-->\n            <a:hbox edge="6 10 10" pack="end" padding="8">\n                <a:button id="btnNoFolderSupportOpenDialog"\n                  onclick="\n                    winNoFolderSupport.hide();\n                    if (!winUploadFiles.visible)\n                        winUploadFiles.show();\n                  "\n                  skin="btn-default-css3"\n                  class="btn-green">Open Upload Dialog</a:button>\n                <a:button id="btnNoFolderSupportClose" onclick="winNoFolderSupport.hide();" skin="btn-default-css3">Close</a:button>\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n</a:application>\n'}),define("ext/anims/firmin-all-min",["require","exports","module"],function(e,t,n){FirminCSSMatrix=function(e){this.m11=this.m22=this.m33=this.m44=1,this.m12=this.m13=this.m14=this.m21=this.m23=this.m24=this.m31=this.m32=this.m34=this.m41=this.m42=this.m43=0,typeof e=="string"&&this.setMatrixValue(e)},FirminCSSMatrix.displayName="FirminCSSMatrix",FirminCSSMatrix.degreesToRadians=function(e){return e*Math.PI/180},FirminCSSMatrix.determinant2x2=function(e,t,n,r){return e*r-t*n},FirminCSSMatrix.determinant3x3=function(e,t,n,r,i,s,o,u,a){var f=FirminCSSMatrix.determinant2x2;return e*f(i,s,u,a)-r*f(t,n,u,a)+o*f(t,n,i,s)},FirminCSSMatrix.determinant4x4=function(e){var t=FirminCSSMatrix.determinant3x3,n=e.m11,r=e.m21,i=e.m31,s=e.m41,o=e.m12,u=e.m22,a=e.m32,f=e.m42,l=e.m13,c=e.m23,h=e.m33,p=e.m43,d=e.m14,v=e.m24,m=e.m34,g=e.m44;return n*t(u,c,v,a,h,m,f,p,g)-r*t(o,l,d,a,h,m,f,p,g)+i*t(o,l,d,u,c,v,f,p,g)-s*t(o,l,d,u,c,v,a,h,m)},[["m11","a"],["m12","b"],["m21","c"],["m22","d"],["m41","e"],["m42","f"]].forEach(function(e){var t=e[0],n=e[1];Object.defineProperty(FirminCSSMatrix.prototype,n,{set:function(e){this[t]=e},get:function(){return this[t]}})}),FirminCSSMatrix.prototype.isAffine=function(){return this.m13===0&&this.m14===0&&this.m23===0&&this.m24===0&&this.m31===0&&this.m32===0&&this.m33===1&&this.m34===0&&this.m43===0&&this.m44===1},FirminCSSMatrix.prototype.multiply=function(e){var t=this,n=e,r=new FirminCSSMatrix;return r.m11=t.m11*n.m11+t.m12*n.m21+t.m13*n.m31+t.m14*n.m41,r.m12=t.m11*n.m12+t.m12*n.m22+t.m13*n.m32+t.m14*n.m42,r.m13=t.m11*n.m13+t.m12*n.m23+t.m13*n.m33+t.m14*n.m43,r.m14=t.m11*n.m14+t.m12*n.m24+t.m13*n.m34+t.m14*n.m44,r.m21=t.m21*n.m11+t.m22*n.m21+t.m23*n.m31+t.m24*n.m41,r.m22=t.m21*n.m12+t.m22*n.m22+t.m23*n.m32+t.m24*n.m42,r.m23=t.m21*n.m13+t.m22*n.m23+t.m23*n.m33+t.m24*n.m43,r.m24=t.m21*n.m14+t.m22*n.m24+t.m23*n.m34+t.m24*n.m44,r.m31=t.m31*n.m11+t.m32*n.m21+t.m33*n.m31+t.m34*n.m41,r.m32=t.m31*n.m12+t.m32*n.m22+t.m33*n.m32+t.m34*n.m42,r.m33=t.m31*n.m13+t.m32*n.m23+t.m33*n.m33+t.m34*n.m43,r.m34=t.m31*n.m14+t.m32*n.m24+t.m33*n.m34+t.m34*n.m44,r.m41=t.m41*n.m11+t.m42*n.m21+t.m43*n.m31+t.m44*n.m41,r.m42=t.m41*n.m12+t.m42*n.m22+t.m43*n.m32+t.m44*n.m42,r.m43=t.m41*n.m13+t.m42*n.m23+t.m43*n.m33+t.m44*n.m43,r.m44=t.m41*n.m14+t.m42*n.m24+t.m43*n.m34+t.m44*n.m44,r},FirminCSSMatrix.prototype.isIdentityOrTranslation=function(){var e=this;return e.m11===1&&e.m12===0&&e.m13===0&&e.m14===0&&e.m21===0&&e.m22===1&&e.m23===0&&e.m24===0&&e.m31===0&&e.m31===0&&e.m33===1&&e.m34===0&&e.m44===1},FirminCSSMatrix.prototype.adjoint=function(){var e=new FirminCSSMatrix,t=this,n=FirminCSSMatrix.determinant3x3,r=t.m11,i=t.m12,s=t.m13,o=t.m14,u=t.m21,a=t.m22,f=t.m23,l=t.m24,c=t.m31,h=t.m32,p=t.m33,d=t.m34,v=t.m41,m=t.m42,g=t.m43,y=t.m44;return e.m11=n(a,h,m,f,p,g,l,d,y),e.m21=-n(u,c,v,f,p,g,l,d,y),e.m31=n(u,c,v,a,h,m,l,d,y),e.m41=-n(u,c,v,a,h,m,f,p,g),e.m12=-n(i,h,m,s,p,g,o,d,y),e.m22=n(r,c,v,s,p,g,o,d,y),e.m32=-n(r,c,v,i,h,m,o,d,y),e.m42=n(r,c,v,i,h,m,s,p,g),e.m13=n(i,a,m,s,f,g,o,l,y),e.m23=-n(r,u,v,s,f,g,o,l,y),e.m33=n(r,u,v,i,a,m,o,l,y),e.m43=-n(r,u,v,i,a,m,s,f,g),e.m14=-n(i,a,h,s,f,p,o,l,d),e.m24=n(r,u,c,s,f,p,o,l,d),e.m34=-n(r,u,c,i,a,h,o,l,d),e.m44=n(r,u,c,i,a,h,s,f,p),e},FirminCSSMatrix.prototype.inverse=function(){var e,t,n,r,i;if(this.isIdentityOrTranslation()){e=new FirminCSSMatrix;if(this.m41!==0||this.m42!==0||this.m43!==0)e.m41=-this.m41,e.m42=-this.m42,e.m43=-this.m43;return e}n=this.adjoint(),t=FirminCSSMatrix.determinant4x4(this);if(Math.abs(t)<1e-8)return null;for(r=1;r<5;r++)for(i=1;i<5;i++)n["m"+r+i]/=t;return n},FirminCSSMatrix.prototype.rotate=function(e,t,n){var r=FirminCSSMatrix.degreesToRadians;if(typeof e!="number"||isNaN(e))e=0;(typeof t!="number"||isNaN(t))&&(typeof n!="number"||isNaN(n))&&(n=e,e=0,t=0);if(typeof t!="number"||isNaN(t))t=0;if(typeof n!="number"||isNaN(n))n=0;e=r(e),t=r(t),n=r(n);var i=new FirminCSSMatrix,s=new FirminCSSMatrix,o=new FirminCSSMatrix,u,a,f;return n/=2,u=Math.sin(n),a=Math.cos(n),f=u*u,o.m11=o.m22=1-2*f,o.m12=o.m21=2*u*a,o.m21*=-1,t/=2,u=Math.sin(t),a=Math.cos(t),f=u*u,s.m11=s.m33=1-2*f,s.m13=s.m31=2*u*a,s.m13*=-1,e/=2,u=Math.sin(e),a=Math.cos(e),f=u*u,i.m22=i.m33=1-2*f,i.m23=i.m32=2*u*a,i.m32*=-1,o.multiply(s).multiply(i).multiply(this)},FirminCSSMatrix.prototype.rotateAxisAngle=function(e,t,n,r){if(typeof e!="number"||isNaN(e))e=0;if(typeof t!="number"||isNaN(t))t=0;if(typeof n!="number"||isNaN(n))n=0;if(typeof r!="number"||isNaN(r))r=0;e===0&&t===0&&n===0&&(n=1);var i=new FirminCSSMatrix,s=Math.sqrt(e*e+t*t+n*n),o,u,a,f,l,c,h;return r=(FirminCSSMatrix.degreesToRadians(r)||0)/2,o=Math.cos(r),u=Math.sin(r),a=u*u,s===0?(e=0,t=0,n=1):s!==1&&(e/=s,t/=s,n/=s),e===1&&t===0&&n===0?(i.m22=i.m33=1-2*a,i.m23=i.m32=2*o*u,i.m32*=-1):e===0&&t===1&&n===0?(i.m11=i.m33=1-2*a,i.m13=i.m31=2*o*u,i.m13*=-1):e===0&&t===0&&n===1?(i.m11=i.m22=1-2*a,i.m12=i.m21=2*o*u,i.m21*=-1):(f=u*o,l=e*e,c=t*t,h=n*n,i.m11=1-2*(c+h)*a,i.m12=2*(e*t*a+n*f),i.m13=2*(e*n*a-t*f),i.m21=2*(t*e*a-n*f),i.m22=1-2*(h+l)*a,i.m23=2*(t*n*a+e*f),i.m31=2*(n*e*a+t*f),i.m32=2*(n*t*a-e*f),i.m33=1-2*(l+c)*a),this.multiply(i)},FirminCSSMatrix.prototype.scale=function(e,t,n){var r=new FirminCSSMatrix;if(typeof e!="number"||isNaN(e))e=1;if(typeof t!="number"||isNaN(t))t=e;if(typeof n!="number"||isNaN(n))n=1;return r.m11=e,r.m22=t,r.m33=n,this.multiply(r)},FirminCSSMatrix.prototype.translate=function(e,t,n){var r=new FirminCSSMatrix;if(typeof e!="number"||isNaN(e))e=0;if(typeof t!="number"||isNaN(t))t=0;if(typeof n!="number"||isNaN(n))n=0;return r.m41=e,r.m42=t,r.m43=n,this.multiply(r)},FirminCSSMatrix.prototype.setMatrixValue=function(e){e=e.trim();var t=e.match(/^matrix(3d)?\(\s*(.+)\s*\)$/),n,r,i,s,o,u;if(!t)return;n=!!t[1],r=t[2].split(/\s*,\s*/),i=r.length,s=new Array(i);if(n&&i!==16||!n&&i!==6)return;for(o=0;o<i;o++){u=r[o];if(!u.match(/^-?\d+(\.\d+)?$/))return;s[o]=parseFloat(u)}for(o=0;o<i;o++)point=n?"m"+(Math.floor(o/4)+1)+(o%4+1):String.fromCharCode(o+97),this[point]=s[o]},FirminCSSMatrix.prototype.toString=function(){var e=this,t,n;return this.isAffine()?(n="matrix(",t=["a","b","c","d","e","f"]):(n="matrix3d(",t=["m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44"]),n+t.map(function(t){return e[t].toFixed(6)}).join(", ")+")"},Firmin=typeof Firmin=="undefined"?{}:Firmin,Firmin.CSSMatrix=typeof WebKitCSSMatrix=="object"?WebKitCSSMatrix:FirminCSSMatrix,Firmin.prefix=function(){var e=document.createElement("div"),t=["webkit","Moz","O"],n=3,r;while(n--){r=t[n],e.style.cssText="-"+r.toLowerCase()+"-transition-property:opacity;";if(typeof e.style[r+"TransitionProperty"]!="undefined")return r}return r}(),Firmin.matrixToString=function(e){if(Firmin.prefix!="Moz")return e.toString();var t="matrix(",n=["a","b","c","d","e","f"];return t+n.map(function(t,n){var r=e[t].toFixed(6);return n>3&&(r+="px"),r}).join(", ")+")"},Firmin.angleToRadians=function(e,t){var n;switch(e){case"rad":return t;case"deg":n=Math.PI/180;break;case"grad":n=Math.PI/200;break;case"turn":n=Math.PI*2}return n*t},Firmin.pointToVector=function(e){return e?e instanceof Array?e:[e.x,e.y,e.z]:null},Firmin.NUMBER_PATTERN=/^-?\d+(\.\d+)?/,Firmin.parseNumeric=function(e,t){return function(n){var r,i;return typeof n=="number"?[t,n]:typeof n!="string"?null:(i=(n.match(Firmin.NUMBER_PATTERN)||[""])[0],i.length===n.length?r=t:r=e.filter(function(e){return n.substr(i.length)===e})[0],r&&i?[r,parseFloat(i)]:null)}},Firmin.parseAngle=Firmin.parseNumeric(["deg","grad","rad","turn"],"deg"),Firmin.parseTime=Firmin.parseNumeric(["s","ms"],"s"),Firmin.Transform=function(e,t){this.ctm=e||new Firmin.CSSMatrix,this.centre=Firmin.pointToVector(t)||["50%","50%",0]},Firmin.Transform.methods=["translate","translate3d","translateX","translateY","translateZ","scale","scale3d","scaleX","scaleY","scaleZ","rotate","rotate3d","rotateX","rotateY","rotateZ","skew","skewX","skewY","matrix","matrix3d"],Firmin.Transform.parse=function(e,t){var n=Firmin.Transform.methods,r={},i=null,s,o;typeof t=="object"&&t.transform&&(s=t.transform.ctm,o=t.transform.centre,i=new Firmin.Transform(s,o));for(property in e)n.indexOf(property)!==-1?(i=i||new Firmin.Transform,i[property](e[property])):property==="origin"?(i=i||new Firmin.Transform,i[property](e[property])):r[property]=e[property];return{result:i,remainder:r}},Firmin.Transform.prototype.build=function(e){var t=this.centre;return Firmin.prefix=="O"&&(t=t.slice(0,2)),e=e||{},e[Firmin.prefix+"Transform"]=Firmin.matrixToString(this.ctm),e[Firmin.prefix+"TransformOrigin"]=t.join(" "),e},Firmin.Transform.prototype.matrix=Firmin.Transform.prototype.matrix3d=function(e){var t=new Firmin.CSSMatrix;e.length===6?(t.a=e[0],t.b=e[1],t.c=e[2],t.d=e[3],t.e=e[4],t.f=e[5]):(t.m11=e[0],t.m12=e[1],t.m13=e[2],t.m14=e[3],t.m21=e[4],t.m22=e[5],t.m23=e[6],t.m24=e[7],t.m31=e[8],t.m32=e[9],t.m33=e[10],t.m34=e[11],t.m41=e[12],t.m42=e[13],t.m43=e[14],t.m44=e[15]),this.ctm=this.ctm.multiply(t)},Firmin.Transform.prototype.translate=Firmin.Transform.prototype.translate3d=function(e){var t,n,r,i;typeof e=="number"||typeof e=="string"?(n=r=parseInt(e,10)||0,i=0):(t=Firmin.pointToVector(e),n=t[0],r=t[1],i=t[2],typeof n!="number"&&(n=parseInt(n,10)||0),typeof r!="number"&&(r=parseInt(r,10)||0),typeof i!="number"&&(i=parseInt(i,10)||0)),this.ctm=this.ctm.translate(n,r,i)},Firmin.Transform.prototype.translateX=function(e){this.translate([e,0])},Firmin.Transform.prototype.translateY=function(e){this.translate([0,e])},Firmin.Transform.prototype.translateZ=function(e){this.translate3d([0,0,e])},Firmin.Transform.prototype.scale=Firmin.Transform.prototype.scale3d=function(e){var t,n,r,i;typeof e=="number"?(n=r=e,i=1):(t=Firmin.pointToVector(e),n=t[0],r=t[1],i=t[2]),this.ctm=this.ctm.scale(n,r,i)},Firmin.Transform.prototype.scaleX=function(e){this.scale3d([e,1,1])},Firmin.Transform.prototype.scaleY=function(e){this.scale3d([1,e,1])},Firmin.Transform.prototype.scaleZ=function(e){this.scale3d([1,1,e])},Firmin.Transform.prototype.skew=function(e){var t=Firmin.parseAngle,n=Firmin.angleToRadians,r,i;typeof e=="number"||typeof e=="string"?r=i=n.apply(null,t(e))||0:(e=Firmin.pointToVector(e),r=n.apply(null,t(e[0]))||0,i=n.apply(null,t(e[1]))||0),this.matrix([1,Math.tan(i),Math.tan(r),1,0,0])},Firmin.Transform.prototype.skewX=function(e){this.skew([e,0])},Firmin.Transform.prototype.skewY=function(e){this.skew([0,e])},Firmin.Transform.prototype.rotate=function(e){e=Firmin.angleToRadians.apply(null,Firmin.parseAngle(e))*(180/Math.PI),this.ctm=this.ctm.rotate(0,0,e)},Firmin.Transform.prototype.rotate3d=function(e){var t=e.x,n=e.y,r=e.z,i=e.angle;typeof t!="number"&&(t=0),typeof n!="number"&&(n=0),typeof r!="number"&&(r=0),i=Firmin.angleToRadians.apply(null,Firmin.parseAngle(i))*(180/Math.PI),this.ctm=this.ctm.rotateAxisAngle(t,n,r,i)},Firmin.Transform.prototype.rotateX=function(e){this.rotate3d({x:1,angle:e})},Firmin.Transform.prototype.rotateY=function(e){this.rotate3d({y:1,angle:e})},Firmin.Transform.prototype.rotateZ=function(e){this.rotate3d({z:1,angle:e})},Firmin.Transform.prototype.origin=function(e){var t=Firmin.pointToVector(e),n,r,i;if(v0=t[0])this.centre[0]=v0;if(n=t[1])this.centre[1]=n;if(r=t[2])this.centre[2]=r},Firmin.Transition=function(){this.properties=["all"],this.duration=["ms",0],this.delay=["ms",0],this.timingFunction="ease"},Firmin.Transition.methods=["properties","timingFunction","duration","delay"],Firmin.Transition.parse=function(e,t){var n=Firmin.Transition.methods,r={},i=new Firmin.Transition,s,o;for(p in e)n.indexOf(p)!==-1?p==="properties"&&typeof p=="string"?i[p]=[e[p]]:p==="timingFunction"&&typeof e[p]!="string"?i[p]="cubic-bezier("+e[p].join(",")+")":p==="duration"?(s=Firmin.parseTime(e[p]),s&&(i[p]=s)):p==="delay"?(o=Firmin.parseTime(e[p]),o&&(i[p]=o)):i[p]=e[p]:r[p]=e[p];return{result:i,remainder:r}},Firmin.Transition.prototype.hasDuration=function(){return this.duration[1]!==0},Firmin.Transition.prototype.getDuration=function(){var e=this.duration;return e[0]==="s"?e[1]*1e3:e[1]},Firmin.Transition.prototype.hasDelay=function(){return this.delay[1]!==0},Firmin.Transition.prototype.getDelay=function(){var e=this.delay;return e[0]==="s"?e[1]*1e3:e[1]},Firmin.Transition.prototype.build=function(e){return e=e||{},typeof this.properties=="string"?e[Firmin.prefix+"TransitionProperty"]=this.properties:e[Firmin.prefix+"TransitionProperty"]=this.properties.join(", "),e[Firmin.prefix+"TransitionDuration"]=this.duration[1]+this.duration[0],e[Firmin.prefix+"TransitionDelay"]=this.delay[1]+this.delay[0],this.timingFunction&&(e[Firmin.prefix+"TransitionTimingFunction"]=this.timingFunction),e},Firmin.Animation=function(e,t){var n,r;typeof e.callback=="function"&&(this.callback=e.callback),delete e.callback,n=Firmin.Transition.parse(e,t),this.transition=n.result,r=Firmin.Transform.parse(n.remainder,t),this.transform=r.result,this.style=r.remainder},Firmin.Animation.prototype.hasDuration=function(){return this.transition&&this.transition.hasDuration()},Firmin.Animation.prototype.getTotalDuration=function(){return this.transition?this.transition.getDuration()+this.transition.getDelay():0},Firmin.Animation.prototype.exec=function(e){var t=this.style,n;this.transition&&(t=this.transition.build(t)),this.transform&&(t=this.transform.build(t));for(n in t)e.style[n]=t[n]},Firmin.Animated=function(e){var t=this;this.element=e,this.operations=[],this.callback=null},Firmin.Animated.prototype.run=function(){var e=this.operations.shift(),t=this;return e?(setTimeout(function(){e.exec(t.element)},10),setTimeout(function(){t.fireCallback(),t.run()},e.getTotalDuration()||10),this.callback=e.callback,this):(this.fired=!0,this)},Firmin.Animated.prototype.fireCallback=function(){var e=this.callback;typeof e=="function"&&e.call(null,this.element)},Firmin.Animated.prototype.__animate__=function(e){return this.operations.push(e),this.__lastAnim=e,this.fired&&(this.fired=!1,this.run()),this},Firmin.Animated.prototype.animate=function(e,t,n){return e.duration=t,e.callback=n,this.__animate__(new Firmin.Animation(e))},Firmin.Animated.prototype.animateR=function(e,t,n){return e.duration=t,e.callback=n,this.__animate__(new Firmin.Animation(e,this.__lastAnim))},Firmin.animate=function(e,t,n,r){var i=new Firmin.Animated(e);return i.animate(t,n,r),i.run()},Firmin.animateR=function(e,t,n,r){var i=new Firmin.Animated(e),s=new Firmin.Animation({}),o=new Firmin.Transform,u=new Firmin.CSSMatrix,a=e.style[Firmin.prefix+"Transform"];return u.setMatrixValue(a),o.ctm=u,s.transform=o,i.__lastAnim=s,i.animateR(t,n,r),i.run()},Firmin.Transform.methods.forEach(function(e){var t=e+"R";Firmin[e]=function(t,n,r,i){var s={};return s[e]=n,Firmin.animate(t,s,r,i)},Firmin[t]=function(t,n,r,i){var s={};return s[e]=n,Firmin.animateR(t,s,r,i)},Firmin.Animated.prototype[e]=function(t,n,r){var i={};return i[e]=t,this.animate(i,n,r)},Firmin.Animated.prototype[t]=function(t,n,r){var i={};return i[e]=t,this.animateR(i,n,r)}})}),define("ext/anims/anims",["require","exports","module","ext/anims/firmin-all-min","core/ide","core/ext","core/settings"],function(e,t,n){e("ext/anims/firmin-all-min");var r=e("core/ide"),i=e("core/ext"),s=e("core/settings");n.exports=i.register("ext/anims/anims",{name:"Animations",dev:"Ajax.org",alone:!0,type:i.GENERAL,animateMultiple:function(e,t){var n=apf.isTrue(s.model.queryValue("general/@animateui"));if(n){var r=0;e.forEach(function(e){var t=e.node;Firmin.animate(t.$ext||t,e,e.duration||.2,function(){(t.$ext||t).style[apf.CSSPREFIX+"TransitionDuration"]=""}),r=Math.max(r,e.duration||.2)}),setTimeout(function(){t&&t()},r*1e3+50)}else t&&t()},animate:function(e,t,n){var r=apf.isTrue(s.model.queryValue("general/@animateui"));r?Firmin.animate(e.$ext||e,t,t&&t.duration||.2,function(){(e.$ext||e).style[apf.CSSPREFIX+"TransitionDuration"]="",n&&n()}):n&&n()},animateSplitBoxNode:function(e,t,n){var i=apf.isTrue(s.model.queryValue("general/@animateui")),o=e.parentNode,u=o.getFirstChild(),a=o.getSecondChild(),f,l=(f=e==u)?a:u;if(l==e||!l.visible)throw new Error("animating object that has no partner");var c;o.$vbox?(c={timingFunction:t.timingFunction},f?c.top=parseInt(t.height,10)+o.$edge[0]+o.padding+"px":c.bottom=parseInt(t.height,10)+o.$edge[2]+o.padding+"px"):(c={timingFunction:t.timingFunction},f?c.left=parseInt(t.width,10)+o.$edge[3]+o.padding+"px":c.right=parseInt(t.width,10)+o.$edge[1]+o.padding+"px");if(i&&!t.immediate)r.dispatchEvent("animate",{type:"splitbox",which:e,other:l,options:t,options2:c}),Firmin.animate(e.$ext,t,t.duration||.2,function(){e.$ext.style[apf.CSSPREFIX+"TransitionDuration"]=""}),Firmin.animate(l.$ext,c,t.duration||.2,function(){l.$ext.style[apf.CSSPREFIX+"TransitionDuration"]="",e.parentNode&&(o.$vbox?e.setHeight(parseInt(t.height,10)):e.setWidth(parseInt(t.width,10))),n&&n()});else{if(o.$vbox){e.setHeight(t.height);var h=f?"top":"bottom"}else{e.setWidth(t.width);var h=f?"left":"right"}l.$ext.style[h]=c[h],n&&n()}}})}),define("ext/menus/menus",["require","exports","module","core/ide","core/ext","core/settings","ext/commands/commands","ext/main/main","ext/anims/anims"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/settings"),o=e("ext/commands/commands"),u=e("ext/main/main"),a=e("ext/anims/anims");n.exports=i.register("ext/menus/menus",{name:"Menus",dev:"Ajax.org",alone:!0,type:i.GENERAL,deps:[u],nodes:[],items:{},menus:{},count:0,debug:location.href.indexOf("menus=1")>-1,minimized:!1,init:function(){var e=this;this.nodes.push(this.menubar=logobar.insertBefore(new apf.bar({"class":"fakehbox aligncenter",style:"padding : 0 5px 0 5px;position:static"}),logobar.firstChild),this.setRootMenu("File",100),this.setRootMenu("Edit",200),this.setRootMenu("Selection",300),this.setRootMenu("Find",400),this.setRootMenu("View",500),this.setRootMenu("Goto",600),this.setRootMenu("Tools",700));var t;this.menubar.insertBefore(new apf.button({"class":"c9-mbar-minimize",skin:"c9-simple-btn",onclick:function(t){e.minimized?e.restore():e.minimize()}}),this.menubar.firstChild),logobar.$ext.addEventListener("mousedown",function(){e.restore()});var n=document.querySelector(".c9-mbar-round");logobar.$ext.addEventListener("mouseover",function(i){if(!e.minimized||!r.inited||apf.isChildOf(logobar.$ext,i.fromElement,!0)||apf.isChildOf(n,i.toElement,!0))return;clearTimeout(t),t=setTimeout(function(){e.restore(!0)},500)}),logobar.$ext.addEventListener("mouseout",function(n){if(!e.minimized||!r.inited||apf.isChildOf(logobar.$ext,n.toElement,!0))return;clearTimeout(t),apf.popup.isShowing(apf.popup.last)?t=setTimeout(function(){apf.popup.isShowing(apf.popup.last)?t=setTimeout(arguments.callee,500):e.minimize(!0)},500):t=setTimeout(function(){e.minimize(!0)},500)}),r.addEventListener("settings.load",function(t){t.ext.setDefaults("auto/menus",[["minimized","false"]]),apf.isTrue(t.model.queryValue("auto/menus/@minimized"))&&(e.minimize(!0,!0),e.minimized=!0)}),this.addItemByPath("File/~",new apf.divider,1e6),this.addItemByPath("File/Quit Cloud9 IDE",new apf.item({onclick:function(){location.href="http://c9.io"}}),2e6),this.addItemByPath("View/~",new apf.divider,9999),apf.button.prototype.$propHandlers.hotkey=function(e){this.$hotkey&&apf.setNodeValue(this.$hotkey,apf.isMac?apf.hotkeys.toMacNotation(this.hotkey):this.hotkey),this.tooltip&&apf.GuiElement.propHandlers.tooltip.call(this,this.tooltip)},apf.item.prototype.$propHandlers.hotkey=function(e){if(!this.$amlLoaded){var t=this;this.addEventListener("DOMNodeInsertedIntoDocument",function(e){t.$hotkey&&t.hotkey&&apf.setNodeValue(this.$hotkey,apf.isMac?apf.hotkeys.toMacNotation(this.hotkey):this.hotkey)})}else this.$hotkey&&apf.setNodeValue(this.$hotkey,apf.isMac?apf.hotkeys.toMacNotation(e):e)},apf.splitbutton.prototype.$propHandlers.command=apf.button.prototype.$propHandlers.command=apf.item.prototype.$propHandlers.command=function(e){if(!e){this.removeAttribute("hotkey"),this.onclick=null;return}this.setAttribute("hotkey",e&&"{ide.commandManager."+e+"}"||""),this.onclick=(function(){o.exec(e,null,{source:"click"});var t=o.commands[e];t&&t.focusContext&&self.require("ext/editors/editors").currentEditor.focus()})||null};if(window.cloud9config.hosted){var i=logobar.$ext.getElementsByClassName("mainlogo");i&&(i=i[0])&&(i.title="back to dashboard",i.href="/dashboard.html",i.innerHTML="Dashboard")}},$insertByIndex:function(e,t,n){t.$position=n;var r,i=1e8,s=e.childNodes;for(var o=0,u=s.length;o<u;o++){var a=s[o].$position-n;a>0&&a<i&&(r=s[o],i=a)}return e.insertBefore(t,r)},$checkItems:function(e){if(e.value){var t=self.tabEditors&&tabEditors.$activepage,n=t&&t.$editor,r=this.childNodes;for(var i,s,u,a=r.length-1;a>=0;a--)(i=(s=(u=r[a]).command)&&o.commands[s].isAvailable||u.isAvailable)&&u[i(n)?"enable":"disable"]()}},setRootMenu:function(e,t,n,r){var i=this.items,s=this.menus;return r?(r.id||r.setAttribute("id","mnuMenus"+ ++this.count),s[e]=r):(r=s[e],r||(r=s[e]=new apf.menu({id:"mnuMenus"+ ++this.count,"onprop.visible":this.$checkItems}))),n?(n.setAttribute("submenu",r.id||"mnuMenus"+this.count),i[e]=n):(n=i[e],n||(n=i[e]=new apf.button({skin:"c9-menu-btn",submenu:r.id,margin:"0 0 0 0",caption:(this.debug?"\\["+t+"\\] ":"")+e}))),typeof t=="number"&&this.$insertByIndex(this.menubar,n,t),r},setSubMenu:function(e,t,n,r,i){var s=this.items,i,o=this.menus,r;if(i){if(o[t]){var u=o[t].childNodes;for(var a=0,f=u.length;a<f;a++)this.$insertByIndex(i,u[a],u[a].$position);o[t].destroy(!0,!0)}i.id||i.setAttribute("id","mnuMenus"+ ++this.count),o[t]=i}else i=o[t],i||(i=o[t]=new apf.menu({id:"mnuMenus"+ ++this.count,"onprop.visible":this.$checkItems}));return r?(r.setAttribute("submenu",i.id),r.setAttribute("caption",apf.escapeXML((this.debug?"["+n+"]":"")+t.split("/").pop())),s[t]=r):(r=s[t],r?r.setAttribute("submenu",i.id):r=s[t]=new apf.item({submenu:i.id,caption:(this.debug?"\\["+n+"\\] ":"")+t.split("/").pop()})),typeof n=="number"&&this.$insertByIndex(e,r,n),i},setMenuItem:function(e,t,n,r,i){var s=this.items,o=t.split("/").pop();o=="~"&&(t+=r),i=s[t],i||(i=s[t]=n,o!="~"&&i.setAttribute("caption",apf.escapeXML((this.debug?"\\["+r+"\\] ":"")+o))),typeof r=="number"?this.$insertByIndex(e,i,r):e.appendChild(i)},addItemByPath:function(e,t,n,r){var i=e.split("/"),s,o=[],u,a=this.menus,f;t||(t="");for(var l=0,c=i.length;l<c;l++){s=i[l],o.push(s),f=o.join("/"),l==0&&!r?(u=!i[l+1],r=!u&&a[f]||this.setRootMenu(s,l==c-1||u?n:null,u&&(!t.nodeFunc&&t.item||t.localName=="button"&&t),u&&(!t.nodeFunc&&t.menu||t.localName=="menu"&&t))):l!=c-1||!t.nodeFunc?(u=!i[l+1],r=!u&&a[f]||this.setSubMenu(r,f,l==c-1||u?n:null,u&&(t.nodeFunc?t.localName!="menu"&&t:t.item),u&&(!t.nodeFunc&&t.menu||t.localName=="menu"&&t))):this.setMenuItem(r,o.join("/"),t,n);if(u)break}return t||r},addItemToMenu:function(e,t,n){this.$insertByIndex(e,t,n)},enableItem:function(e){},disableItem:function(e){},remove:function(e){},getMenuId:function(e){var t=this.menus[e];return t&&t.id},restore:function(e){apf.setStyleClass(logobar.$ext,"",["minimized"]),logobar.$ext.style.overflow="hidden",a.animateSplitBoxNode(logobar,{height:"31px",timingFunction:"cubic-bezier(.10, .10, .25, .90)",duration:.2},function(){apf.layout.forceResize(tabEditors.$ext),logobar.$ext.style.overflow=""}),e||(s.model.setQueryValue("auto/menus/@minimized","false"),this.minimized=!1,r.dispatchEvent("menus.restore"))},minimize:function(e,t){logobar.$ext.style.overflow="hidden",a.animateSplitBoxNode(logobar,{height:"12px",timingFunction:"cubic-bezier(.10, .10, .25, .90)",duration:.2,immediate:t},function(){apf.setStyleClass(logobar.$ext,"minimized"),apf.layout.forceResize(),logobar.$ext.style.overflow=""}),e||(s.model.setQueryValue("auto/menus/@minimized","true"),this.minimized=!0,r.dispatchEvent("menus.minimize"))},enable:function(){this.hbox.show()},disable:function(){this.hbox.hide()},destroy:function(){this.hbox.destroy(!0,!0),this.$destroy()}})}),define("text!ext/newresource/newresource.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "winNewFileTemplate"\n      title     = "New from Template"\n      icon      = ""\n      center    = "true"\n      width     = "350"\n      height    = "300"\n      skin      = "bk-window2"\n      resizable = "true"\n      kbclose   = "true"\n      buttons   = "close"\n      draggable = "true">\n        <a:vbox padding="10" anchors="0 0 0 0">\n\n            <a:list id="lstFileTemplates"\n              model     = "mdlFileTemplates"\n              flex      = "1"\n              margin    = "10 10 10 10"\n              caption   = "[@caption]"\n              icon      = "[@icon]"\n              class     = "noscrollbar"\n              scrollbar = "sbShared 12 12 55"\n              each      = "item"\n              eachvalue = "[@value]"\n              style     = "overflow:hidden"\n              onafterchoose = "\n                btnFileTemplateSave.dispatchEvent(\'click\');\n              " />\n            <a:hbox pack="end" padding="7" edge="10">\n                <a:button id="btnFileTemplateSave" width="80" default="2"\n                  class="btn-green" skin="btn-default-css3" caption="Create"\n                  onclick="\n                    require(\'ext/newresource/newresource\').newfile(\n                        \'.\' + lstFileTemplates.value,\n                        lstFileTemplates.selected.firstChild.nodeValue\n                    );\n                    winNewFileTemplate.hide();\n                  "/>\n                <a:button id="btnFileTemplateCancel" skin="btn-default-css3" width="80"\n                  onclick="winNewFileTemplate.hide()">Cancel</a:button>\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n\n    <a:model id="mdlFileTemplates">\n        <templates>\n            <item value="txt" icon="page_white_text.png" caption="Text file"><![CDATA[]]></item>\n            <item value="js" icon="page_white_code.png" caption="JavaScript file"><![CDATA[]]></item>\n            <item value="js" icon="page_white_code.png" caption="Unit Test"><![CDATA["use strict";\nrequire("./support/paths");\n\nvar assert = require("assert");\n//var module = require("./module");\n\nmodule.exports = {\n\n    "test untitled 1" : function() {\n        //assert.equal(!true, false);\n    }\n\n};\n\nif (typeof module !== "undefined" && module === require.main) {\n    require("asyncjs").test.testcase(module.exports).exec()\n}]]></item>\n            <item value="stest" icon="page_white_code.png" caption="Selenium Test"><![CDATA[{}]]></item>\n            <item value="coffee" icon="page_white_code.png" caption="CoffeeScript file"><![CDATA[]]></item>\n            <item value="html" icon="html.png" caption="HTML file"><![CDATA[<!DOCTYPE html>\n<html>\n    <head>\n        <title> </title>\n    </head>\n    <body>\n\n    </body>\n</html>\n]]></item>\n            <item value="xml" icon="page_white_code_red.png" caption="XML file"><![CDATA[]]></item>\n            <item value="xq" icon="page_white_code.png" caption="XQuery file"><![CDATA[xquery version "1.0";\nlet $message := "Hello World!"\nreturn <results>\n  <message>{$message}</message>\n</results>]]></item>\n            <item value="css" icon="css.png" caption="CSS file"><![CDATA[]]></item>\n            <item value="scss" icon="css.png" caption="SCSS file"><![CDATA[]]></item>\n            <item value="svg" icon="page_white_picture.png" caption="SVG file"><![CDATA[]]></item>\n            <item value="py" icon="script_code.png" caption="Python file"><![CDATA[]]></item>\n            <item value="php" icon="page_white_php.png" caption="PHP file"><![CDATA[<?php\n\n?>]]></item>\n            <item value="rb" icon="page_white_ruby.png" caption="Ruby file"><![CDATA[]]></item>\n            <item value="mli" icon="page_white_code.png" caption="OCaml file"><![CDATA[]]></item>\n            <item value="clj" icon="page_white_code.png" caption="Clojure file"><![CDATA[]]></item>\n            <item value="md" icon="page_white_text.png" caption="Markdown"><![CDATA[]]></item>\n            <item value="js" icon="page_white_code.png" caption="Express file"><![CDATA[// *******************************************************\n// expressjs template\n//\n// assumes: npm install express\n// defaults to jade engine, install others as needed\n//\n// assumes these subfolders:\n//   public/\n//   public/javascripts/\n//   public/stylesheets/\n//   views/\n//\nvar express = require(\'express\');\nvar app = module.exports = express.createServer();\nvar viewEngine = \'jade\'; // modify for your view engine\n// Configuration\napp.configure(function(){\n  app.set(\'views\', __dirname + \'/views\');\n  app.set(\'view engine\', viewEngine);\n  app.use(express.bodyParser());\n  app.use(express.methodOverride());\n  app.use(app.router);\n  app.use(express.static(__dirname + \'/public\'));\n});\napp.configure(\'development\', function(){\n  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));\n});\napp.configure(\'production\', function(){\n  app.use(express.errorHandler());\n});\n// *******************************************************\n]]></item>\n            <item value="js" icon="page_white_code.png" caption="Node.js web server"><![CDATA[var http = require(\'http\');\nhttp.createServer(function (req, res) {\n  res.writeHead(200, {\'Content-Type\': \'text/plain\'});\n  res.end(\'Hello World from Cloud9\\n\');\n}).listen(process.env.PORT);\n]]>\n            </item>\n        </templates>\n    </a:model>\n</a:application>\n'}),define("ext/newresource/newresource",["require","exports","module","core/ide","core/ext","ext/menus/menus","ext/filesystem/filesystem","text!ext/newresource/newresource.xml","ext/commands/commands","ext/editors/editors"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ext/menus/menus"),o=e("ext/filesystem/filesystem"),u=e("text!ext/newresource/newresource.xml"),a=e("ext/commands/commands");n.exports=i.register("ext/newresource/newresource",{dev:"Ajax.org",name:"New Resource",alone:!0,offline:!1,autodisable:i.ONLINE|i.LOCAL,type:i.GENERAL,markup:u,deps:[o],nodes:[],hook:function(e){var t=this,n=r.readonly;a.addCommand({name:"newfile",hint:"create a new file resource",msg:"New file created.",bindKey:{mac:"Option-Shift-N",win:"Ctrl-N"},exec:function(){t.newfile()}}),a.addCommand({name:"newfiletemplate",hint:"create a new directory resource",msg:"New directory created.",bindKey:{mac:"Option-Ctrl-N",win:"Alt-N"},exec:function(){t.newfiletemplate()}}),a.addCommand({name:"newfolder",hint:"open the new file template dialog",bindKey:{mac:"Option-Ctrl-Shift-N",win:"Ctrl-Shift-N"},exec:function(){t.newfolder()}}),this.nodes.push(s.addItemByPath("File/New File",new apf.item({disabled:n,command:"newfile"}),100),s.addItemByPath("File/New From Template...",new apf.item({disabled:n,command:"newfiletemplate"}),200),s.addItemByPath("File/New Folder",new apf.item({disabled:n,command:"newfolder"}),300),s.addItemByPath("File/~",new apf.divider,400))},init:function(){},newfile:function(t,n,i){if(r.readonly)return;t||(t="");var s=apf.getXml("<file />");if(!i&&self.trFiles){var o=trFiles.selected;o||(trFiles.select(trFiles.$model.queryNode("folder")),o=trFiles.selected),o&&(i=o.getAttribute("path"),trFiles.selected.getAttribute("type")=="file"||trFiles.selected.tagName=="file"?i=i.replace(/\/[^\/]*$/,"/"):i+="/")}i||(i=r.davPrefix+"/");var u="Untitled",a=1;while(tabEditors.getPage(i+u+a+t))a++;s.setAttribute("name",u+a+t),s.setAttribute("path",i+u+a+t),s.setAttribute("changed","1"),s.setAttribute("newfile","1");var f=r.createDocument(s);n&&(f.cachedValue=n),e("ext/editors/editors").gotoDocument({doc:f,type:"newfile",origin:"newfile"}),r.dispatchEvent("track_action",{type:"template",template:t})},newfiletemplate:function(){i.initExtension(this),winNewFileTemplate.show()},newfolder:function(){return o.createFolder(),!1},destroy:function(){a.removeCommandsByName(["newfile","newfiletemplate","newfolder"]),tabEditors.removeEventListener("close",this.$close),this.$destroy()}})}),define("ext/editors/editors",["require","exports","module","core/ide","core/ext","ext/menus/menus","core/util","core/settings","ext/commands/commands","ext/anims/anims","ext/newresource/newresource","ext/menus/menus","ext/editors/editors","ext/filesystem/filesystem","ext/filesystem/filesystem"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ext/menus/menus"),o=e("core/util"),u=e("core/settings"),a=e("ext/commands/commands"),f=e("ext/anims/anims");n.exports=i.register("ext/editors/editors",{name:"Editors",dev:"Ajax.org",alone:!0,type:i.GENERAL,nodes:[],fileExtensions:{},showTabs:!0,register:function(e){var t=this;e.$itmEditor=s.addItemByPath("View/Editors/"+e.name,new apf.item({type:"radio",value:e.path,group:this.$itmGroup,onclick:function(){t.switchEditor(this.value)}}),4e4),e.fileExtensions.each(function(n){n=n.toLowerCase(),(t.fileExtensions[n]||(t.fileExtensions[n]=[])).push(e)});if(!this.fileExtensions["default"]||e.name&&e.path=="ext/code/code")this.fileExtensions["default"]=e},unregister:function(e){e.$itmEditor.destroy(!0,!0);var t=this;e.fileExtensions.each(function(n){t.fileExtensions[n].remove(e),t.fileExtensions[n].length||delete t.fileExtensions[n]}),s.remove("View/Editors/"+e.name);if(this.fileExtensions["default"]==e){delete this.fileExtensions["default"];for(var n in this.fileExtensions){this.fileExtensions["default"]=this.fileExtensions[n][0];break}}},toggleTabs:function(e,t,n,i){typeof n=="undefined"&&(n=apf.isFalse(u.model.queryValue("general/@animateui"))),!e||e>0?(t||(u.model.setQueryValue("auto/tabs/@show","true"),this.showTabs=!0,r.dispatchEvent("tabs.visible",{value:!0,noanim:n})),this.setTabResizeValues(tabEditors.parentNode.$ext,e==1,!n,i,1)):(t||(u.model.setQueryValue("auto/tabs/@show","false"),this.showTabs=!1,r.dispatchEvent("tabs.visible",{value:!1,noanim:n})),this.setTabResizeValues(tabEditors.parentNode.$ext,e==1,!n,i,0))},addTabSection:function(){var t=this,n,i,s=new apf.bar({skin:"basic","class":"codeditorHolder",style:"position:absolute;",childNodes:[new apf.tab({id:"tabEditors",skin:"editor_tab",style:"height : 100%",buttons:"close,scale,order",animate:apf.isGecko?!1:"[{require('core/settings').model}::general/@animateui]",anims:"{apf.isTrue(this.animate) ? 'add|remove|sync' : ''}",overactivetab:!0,onfocus:function(e){t.switchfocus(e)},onbeforeswitch:function(e){t.beforeswitch(e)},onafterswitch:function(e){t.afterswitch(e)},onclose:function(e){if(!r.onLine&&!r.offlineFileSystemSupport)return!1;this.length==1&&(n.$ext.style.position="absolute",n.$ext.style.right="5px",n.$ext.style.top="6px",n.$ext.parentNode.style.overflow="hidden");try{r.dispatchEvent("tab.close",{page:e.page})}catch(e){console.warn("Error tab.close",e)}try{e.page.addEventListener("afterclose",t.$close)}catch(e){console.warn("Error afterclose",e)}},childNodes:[n=new apf.button({id:"plus_tab_button","class":"plus_tab_button",skin:"btn_icon_only",style:"position:absolute;right:5px;top:6px",onclick:function(){e("ext/newresource/newresource").newfile()}})]}),i=new apf.button({id:"btnEditorTabsBehavior",onmouseover:function(){this.setAttribute("submenu",e("ext/menus/menus").getMenuId("View/Tabs"))},skin:"btn_icon_only","class":"tabmenubtn"})]});colMiddle.appendChild(s);var o=tabEditors;this.buttons={add:n,menu:i},o.$buttons.appendChild(n.$ext),o.$buttons.appendChild(i.$ext),o.addEventListener("DOMNodeInserted",function(e){if(e.$isMoveWithinParent){var t=e.currentTarget;if(t.localName!="page"||e.relatedNode!=this||t.nodeType!=1)return;u.save()}e.relatedNode==this&&e.currentTarget.localName=="page"&&(o.$buttons.appendChild(n.$ext),n.$ext.style.position&&(n.$ext.style.position="",n.$ext.style.right="",n.$ext.style.top=""))}),tabEditors.$gotContainer&&tabEditors.$buttons.parentNode.removeNode(),barButtonContainer.$int.appendChild(tabEditors.$buttons),barButtonContainer.$int.style.paddingRight=parseInt(apf.getStyle(tabEditors.$buttons,"paddingLeft"))+parseInt(apf.getStyle(tabEditors.$buttons,"paddingRight"))+"px",apf.isGecko||(tabEditors.$buttons.style.position="absolute",tabEditors.$buttons.style.left="0",tabEditors.$buttons.style.top="0",tabEditors.$buttons.style.right="0",tabEditors.$buttons.style.bottom="0")},setTabResizeValues:function(e,t,n,i,s){var o=this;if(this.animating&&(!n||this.animating[0]==t))return;if(n){this.animateControl&&this.animateControl.stop(),this.animating=[t],s==undefined&&(s=tabEditors.$buttons.style.height=="10px"?1:0);var u=i?.2:.2;tabEditors.$buttons.style.overflow="hidden",s?(apf.setStyleClass(tabEditors.$buttons.parentNode,"",["hidetabs"]),apf.setStyleClass(tabEditors.$buttons.parentNode,"step5")):r.dispatchEvent("animate",{type:"editor",delta:16});var a=s?6:0,l=0;[1,2,3,4,5,6].forEach(function(e){setTimeout(function(){if(e==6){s||apf.setStyleClass(tabEditors.$buttons.parentNode,"hidetabs");return}apf.setStyleClass(tabEditors.$buttons.parentNode,"step"+(s?--a:++a),["step"+(s?a+1:a-1)])},++l*(u/6)*1e3)}),f.animateMultiple([{duration:u,node:e,top:(this.showTabs||t?0:-16)+"px"},{duration:u,node:tabEditors.$buttons,height:(this.showTabs||t?22:7)+"px"},{duration:u,node:this.buttons.add,opacity:s?1:0},{duration:u,node:this.buttons.add,height:(s?17:10)+"px"},{duration:u,node:this.buttons.menu,opacity:s?1:0},{duration:u,node:this.buttons.menu,height:(s?17:10)+"px"}],function(e){apf.setStyleClass(tabEditors.$buttons.parentNode,"",["step"+a]),o.animating=!1,tabEditors.parentNode.setAttribute("margin",this.showTabs||t?"0 0 0 0":"-16 0 0 0"),tabEditors.$buttons.style.overflow=""})}else this.showTabs||t?(tabEditors.$buttons.style.height="22px",apf.setStyleClass(tabEditors.$buttons.parentNode,"",["hidetabs"]),this.buttons.menu.setHeight(17),this.buttons.add.setHeight(17),tabEditors.parentNode.setAttribute("margin","0 0 0 0")):(tabEditors.$buttons.style.height="7px",apf.setStyleClass(tabEditors.$buttons.parentNode,"hidetabs"),this.buttons.menu.setHeight(10),this.buttons.add.setHeight(10),tabEditors.parentNode.setAttribute("margin","-16 0 0 0"))},isEditorAvailable:function(e,t){var n=i.extLut[t];if(!n)return!1;var r=n.fileExtensions,s=(tabEditors.getPage(e).$model.queryValue("@path")||"").split(".").pop().toLowerCase(),o=r.indexOf(s)>-1;return!o&&this.fileExtensions["default"]==n?!0:o},initEditor:function(e){var t=new apf.page({id:e.path,mimeTypes:e.fileExtensions,visible:!1,realtime:!1});return tabEditors.appendChild(t),i.initExtension(e,t),t},switchEditor:function(e){var t=r.getActivePage();if(!t||t.type==e)return;var n=t.type,s;if((s=t.$doc.dispatchEvent("validate",s))===!0){o.alert("Could not switch editor","Could not switch editor because this document is invalid.","Please fix the error and try again:"+s);return}var u=i.extLut[e];u.inited||this.initEditor(u),t.setAttribute("type",e),t.$editor=u,this.currentEditor=u,this.beforeswitch({nextPage:t}),this.afterswitch({nextPage:t,previousPage:{type:n},keepEditor:!0})},openEditor:function(e,t,n,i){var s=e.getNode(),a=s.getAttribute("path"),f=tabEditors;if(!i){var l=f.getPage(a);if(l){f.set(l);return}}var c=(s.getAttribute("path")||"").split(".").pop().toLowerCase(),h=this.fileExtensions[c]&&this.fileExtensions[c][0]||this.fileExtensions["default"];!t&&this.currentEditor&&this.currentEditor.disable();if(!h){o.alert("No editor is registered!","Could not find an editor to display content","There is something wrong with the configuration of your IDE. No editor plugin is found");return}h.inited||this.initEditor(h),t&&f.setAttribute("buttons","close"),apf.isGecko||(tabEditors.$buttons.style.overflow="");var p=new apf.model,d=f.add("{([@changed] == 1 ? '*' : '') + %[.].getAttribute('name')}",a,h.path,null,function(t){t.$at=new apf.actiontracker,t.$doc=e,e.$page=t,t.$editor=h,t.setAttribute("autofocus",!1),t.setAttribute("tooltip","{%[.].getAttribute('path')}"),t.setAttribute("class","{parseInt([@saving], 10) || parseInt([@lookup], 10) ? (tabEditors.getPage(tabEditors.activepage) == this ? 'saving_active' : 'saving') :                 ([@loading] ? (tabEditors.getPage(tabEditors.activepage) == this ? 'loading_active' : 'loading') : '')}"),t.setAttribute("model",t.$model=p),p.load(s),p.addEventListener("update",function(){u.save()})});return t&&f.setAttribute("buttons","close,scale,order"),e.addEventListener("setnode",function(e){d.$model.load(e.node)}),this.initEditorEvents(d,p),r.dispatchEvent("tab.create",{page:d,model:p,doc:e}),apf.setStyleClass(tabEditors.$ext,"",["empty"]),n===!1?{editor:h,page:d}:(f.set(a),h.enable(),this.currentEditor=h,setTimeout(function(){typeof h.amlEditor!="undefined"&&(h.amlEditor.focus(),r.dispatchEvent("aftereditorfocus"))},100),u.save(),{editor:h,page:d})},initEditorEvents:function(e,t){t=t||e.$model,e.$at.addEventListener("afterchange",function(n){if(n.action=="reset"){delete this.undo_ptr;return}var i;e.$at.ignoreChange?(i=undefined,e.$at.ignoreChange=!1):this.undolength===0&&!this.undo_ptr?i=undefined:i=this.$undostack[this.$undostack.length-1]!==this.undo_ptr?1:undefined;if(Number(t.queryValue("@changed"))!==Number(i)){t.setQueryValue("@changed",i?"1":"0");var s=e.$model.data;r.dispatchEvent("updatefile",{changed:i?1:0,xmlNode:s,newPath:n.newPath})}})},resizeTabs:function(e){clearTimeout(this.closeTimer);if(e)return;this.closeTimer=setTimeout(function(){tabEditors.$waitForMouseOut=!1,tabEditors.$scaleinit(null,"sync")},500)},close:function(e){var t=tabEditors.getPages(),n=t[t.length-1]==e;tabEditors.remove(e),this.resizeTabs(n)},$close:function(){var t=this,n=t.$at,i=t.$editor,s=t.$model,o=!!n&&!!i;o&&(s.setQueryValue("@changed",0),t.$doc.dispatchEvent("close")),s.data&&(o&&s.removeXml("data"),r.dispatchEvent("closefile",{xmlNode:s.data,page:t})),o&&(s.destroy(),n.reset(),n.destroy()),tabEditors.getPages().length==1&&(i.clear&&i.clear(),e("ext/editors/editors").currentEditor=null,apf.setStyleClass(tabEditors.$ext,"empty")),u.save()},switchfocus:function(e){},beforeswitch:function(e){var t=e.nextPage,n=tabEditors.getPage(t.type);if(!n)return;if(r.dispatchEvent("tab.beforeswitch",{previousPage:e.previousPage,nextPage:e.nextPage})===!1)return!1;n.model!=t.$model&&n.setAttribute("model",t.$model),n.actiontracker!=t.$at&&n.setAttribute("actiontracker",t.$at),t.$editor.setDocument&&t.$editor.setDocument(t.$doc,t.$at)},afterswitch:function(e){var t=this,n=e.nextPage;if(this.switchLoop==n.id)return;var s,a=i.extLut[n.type];e.previousPage&&e.previousPage!=e.nextPage&&(s=i.extLut[e.previousPage.type]),s!=a&&(s&&s.disable(),a.enable());var f=new RegExp("^"+r.davPrefix),l=n.$model.data.getAttribute("path").replace(f,"");apf.history.setHash("!"+l),n.$model.data.getAttribute("ignore")!=="1"&&u.model.setQueryValue("auto/files/@active",l);if(!e.keepEditor){var c=(l||"").split(".").pop().toLowerCase(),h=this.fileExtensions[c]&&this.fileExtensions[c][0]||this.fileExtensions["default"];if(!h){o.alert("No editor is registered","Could not find an editor to display content!","There is something wrong with the configuration of your IDE. No editor plugin is found.");return}h.inited||this.initEditor(h),this.currentEditor=h}else var h=n.$editor;h.focus&&h.focus(),clearTimeout(this.afterswitchTimeout),this.afterswitchTimeout=setTimeout(function(){t.switchLoop=n.id,r.dispatchEvent("tab.afterswitch",{previousPage:e.previousPage,nextPage:e.nextPage}),delete t.switchLoop},150)},init:function(){var e=this;window.onpopstate=function(e){var t="/workspace"+e.state;tabEditors.activepage!=t&&tabEditors.getPage(t)&&tabEditors.set(t)},apf.addEventListener("hashchange",function(e){var t="/workspace"+e.page;tabEditors.activepage!=t&&tabEditors.getPage(t)&&tabEditors.set(t)}),s.addItemByPath("View/Editors/",new apf.menu({"onprop.visible":function(t){if(t.value)if(!e.currentEditor)this.disable();else{this.enable();var n=this.childNodes;for(var r=n.length-1;r>=0;r--)n[r].setAttribute("disabled",!e.isEditorAvailable(tabEditors.activepage,n[r].value));e.$itmGroup.setValue(e.currentEditor.path)}}}),190),a.addCommand({name:"toggleTabs",bindKey:{mac:"Ctrl-M",win:"Ctrl-M"},exec:function(t){e.toggleTabs(e.showTabs?-1:1)}}),a.addCommand({name:"largerfont",bindKey:{mac:"Ctrl-Shift-.",win:"Ctrl-Shift-."},exec:function(e){var t=u.model.queryValue("editors/code/@fontsize");u.model.setQueryValue("editors/code/@fontsize",++t>72?72:t)}}),a.addCommand({name:"smallerfont",bindKey:{mac:"Ctrl-Shift-,",win:"Ctrl-Shift-,"},exec:function(e){var t=u.model.queryValue("editors/code/@fontsize");u.model.setQueryValue("editors/code/@fontsize",--t<1?1:t)}}),s.addItemByPath("View/Font Size/",null,290001),s.addItemByPath("View/Font Size/Increase Font Size",new apf.item({command:"largerfont"}),1),s.addItemByPath("View/Font Size/Decrease Font Size",new apf.item({command:"smallerfont"}),2),s.addItemByPath("View/Tab Buttons",new apf.item({type:"check",checked:"[{require('core/settings').model}::auto/tabs/@show]",command:"toggleTabs"}),300),i.addType("Editor",function(t){e.register(t)},function(t){e.unregister(t)}),r.addEventListener("filenotfound",function(e){var t=tabEditors.getPage(e.path);t&&tabEditors.remove(t)}),r.addEventListener("afteroffline",function(e){tabEditors.$setStyleClass(tabEditors.$ext,"offline")}),r.addEventListener("afteronline",function(e){tabEditors.$setStyleClass(tabEditors.$ext,"",["offline"])}),this.$itmGroup=new apf.group,this.nodes.push(this.addTabSection()),r.addEventListener("animate",function(e){self.logobar&&e.which==logobar&&(e.options.height=="12px"?f.animate(tabEditors.$buttons,{paddingRight:"53px",timingFunction:e.options.timingFunction,duration:e.options.duration},function(){apf.setStyleClass(tabEditors.$buttons,"morepadding")}):f.animate(tabEditors.$buttons,{paddingRight:"4px",timingFunction:e.options.timingFunction,duration:e.options.duration},function(){apf.setStyleClass(tabEditors.$buttons,"",["morepadding"])}))}),this.$settings={},r.addEventListener("settings.load",function(t){function i(e,t){r.addEventListener("init.ext/tree/tree",function(){var n=(apf.getDirname(e)||"").replace(/\/$/,""),r=function(i){i.xmlNode&&i.xmlNode.getAttribute("path")==n&&(t.getNode().getAttribute("newfile")!=1?t.setNode(i.xmlNode.selectSingleNode("node()[@path="+o.escapeXpathString(e)+"]")):t.setNode(t.getNode()),trFiles.removeEventListener("expand",r))};trFiles.addEventListener("expand",r)})}u.setDefaults("auto/files",[]),u.setDefaults("auto/tabs",[["show","true"]]),e.loadedSettings=!1,apf.isTrue(t.model.queryValue("auto/menus/@minimized"))&&apf.setStyleClass(tabEditors.$buttons,"morepadding");var n=u.model.queryValue("auto/tabs/@show");e.showTabs=apf.isTrue(n),e.showTabs||e.toggleTabs(e.showTabs?1:-1,!0,!0);var s=t.model;r.addEventListener("extload",function(){var t=e.loadFileFromHash(window.location.hash,i);if(t){window.location.hash=t;return}var n=s.queryValue("auto/files/@active"),o=s.queryNodes("auto/files/file");for(var u=0,a=o.length;u<a;u++){var f=o[u],l=f.getAttribute("state"),c=r.createDocument(f);if(r.local&&f.getAttribute("path").split("/")[2]!==r.workspaceId)continue;try{l&&(c.state=JSON.parse(l))}catch(h){}f.getAttribute("changed")==1&&f.firstChild&&(c.cachedValue=f.firstChild.nodeValue.replace(/\n\]\n\]/g,"]]").replace(/\\r/g,"\r").replace(/\\n/g,"\n")),e.gotoDocument({doc:c,init:!0,type:c.state&&c.state.type,forceOpen:!0,active:n?n==f.getAttribute("path"):u==a-1,origin:"settings"}),c.state&&c.state.type!="nofile"&&i(f.getAttribute("path"),c)}e.loadedSettings=!0})}),r.addEventListener("settings.save",function(t){if(!t.model.data||!e.loadedSettings)return;var n=t.model.data.selectSingleNode("auto/files"),r=tabEditors.getPages();n&&(n.parentNode.removeChild(n),n=null);if(r.length){n=apf.createNodeFromXpath(t.model.data,"auto/files");for(var i=0,s=r.length;i<s;i++){if(!r[i]||!r[i].$model||!r[i].$model.data||r[i].$model.data.getAttribute("ignore")=="1")continue;var o=r[i].$model.data;if(!o||o.getAttribute("debug"))continue;var u=apf.xmldb.cleanNode(o.cloneNode(!1));u.getAttribute("newfile")||u.removeAttribute("changed"),u.removeAttribute("loading"),u.removeAttribute("saving"),n.appendChild(u);var a=r[i].$editor&&r[i].$editor.getState&&r[i].$editor.getState(r[i].$doc);a&&u.setAttribute("state",JSON.stringify(a)),u.getAttribute("changed")==1&&u.getAttribute("newfile")==1&&u.appendChild(u.ownerDocument.createTextNode((r[i].$doc.getValue()||"").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\]\]/g,"\n]\n]")))}}})},loadFileFromHash:function(t,n){var i=/openfile-(.[^:&$]*)(?:\:(\d+)-(\d+))?/,s=t.match(i);if(s){var o=r.davPrefix.replace(/\/$/,"")+"/"+s[1],u=r.createDocument(e("ext/filesystem/filesystem").createFileNodeFromPath(o));return s[2]&&s[3]&&(u.state={scrollleft:0,scrolltop:0,selection:{start:{row:parseInt(s[2]||0,10)-1,column:0},end:{row:parseInt(s[3]||0,10),column:0}}}),this.gotoDocument({doc:u,active:!0,origin:"hash"}),n(o,u),t.replace(i,"")}return null},pauseTabResize:function(){tabEditors.setAttribute("buttons","close,order")},continueTabResize:function(){setTimeout(function(){tabEditors.setAttribute("buttons","close,scale,order"),tabEditors.$waitForMouseOut=!1,tabEditors.$scaleinit(null,"sync")},300)},gotoDocument:function(t){!t.node&&t.path&&(t.node=e("ext/filesystem/filesystem").createFileNodeFromPath(t.path)),this.jump(t)},jump:function(e){function f(){var n=t.currentEditor.amlEditor.$editor;i-=1;var r=typeof e.endRow=="number"?e.endRow-1:i,s=e.endColumn,o=e.column||(e.getColumn?e.getColumn():0);n.session.unfold({row:i,column:o||0}),typeof s=="number"&&n.session.unfold({row:r,column:s}),n.$blockScrolling+=1,n.selection.clearSelection(),n.moveCursorTo(i,o||0),typeof s=="number"&&n.selection.selectTo(r,s),n.$blockScrolling-=1;var u=n.selection.getRange(),a=n.renderer.scrollTop;n.renderer.scrollSelectionIntoView(u.start,u.end,.5),e.animate!==!1&&n.renderer.animateScrolling(a)}function l(){var e=t.currentEditor.amlEditor;if(!e)return;var n=e.$editor;n&&!n.$isFocused&&setTimeout(function(){n.focus(),r.dispatchEvent("aftereditorfocus")},1)}function c(){i&&f(),l(),t.currentEditor.$pendingJumpTo&&(r.removeEventListener("afteropenfile",t.currentEditor.$pendingJumpTo),t.currentEditor.$pendingJumpTo=null)}var t=this,n=tabEditors,i=e.row,s=e.node,o=e.path||s&&s.getAttribute("path"),u=e.page||o&&n.getPage(o),a=!!u&&!!u.$doc;if(a)n.set(u),c();else{e.origin="jump",e.doc||(e.doc=r.createDocument(e.node));var h=this.openEditor(e.doc,e.init,e.active,e.forceOpen);i&&(o||(o=e.node.getAttribute("path")),r.removeEventListener("afteropenfile",t.currentEditor.$pendingJumpTo),t.currentEditor.$pendingJumpTo=function(e){var t=e.doc.getNode();t.getAttribute("path")==o&&c()},r.addEventListener("afteropenfile",t.currentEditor.$pendingJumpTo)),r.dispatchEvent("openfile",apf.extend(e,h))}},destroy:function(){s.remove("View/Tab Bar"),s.remove("View/Editors/"),this.$destroy()}})}),define("ext/filesystem/filesystem",["require","exports","module","core/ide","core/ext","core/util","ext/commands/commands","ext/editors/editors","ext/main/main"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("ext/commands/commands"),u=e("ext/editors/editors");e("ext/main/main"),n.exports=i.register("ext/filesystem/filesystem",{name:"File System",dev:"Ajax.org",type:i.GENERAL,alone:!0,deps:[],autodisable:i.ONLINE|i.LOCAL,createFileNodeFromPath:function(e,t){var n=e.split("/").pop(),r=apf.n("<file />").attr("name",n).attr("contenttype",s.getContentType(n)).attr("type","file").attr("path",e);if(t!==undefined)for(var i in t)i.indexOf("date")>=0&&(t[i]=new Date(t[i])),r.attr(i,t[i]);return r.node()},createFolderNodeFromPath:function(e,t){var n=e.split("/").pop(),r=apf.n("<folder />").attr("name",n).attr("path",e).attr("type","folder");if(t!==undefined)for(var i in t)i.indexOf("date")>=0&&(t[i]=new Date(t[i])),r.attr(i,t[i]);return r.node()},readFile:function(e,t){if(!this.webdav)return;var n=this;if(!r.onLine){var i=function(){n.webdav.read(e,t),r.removeEventListener("afteronline",i)};r.addEventListener("afteronline",i)}else this.webdav.read(e,t)},saveFile:function(e,t,n){if(!this.webdav)return;this.webdav.write(e,t,null,function(e,t,r){if(t==apf.ERROR&&r.status==400&&r.retries<3||t==apf.TIMEOUT)return r.tpModule.retry(r.id);n(e,t,r)})},list:function(e,t){this.webdav&&this.webdav.list(e,t)},exists:function(e,t){this.webdav&&this.webdav.exists(e,t)},createFolder:function(e,t,n,i){if(!t){t=apf.document.activeElement;if(!t||t.localName!="tree")t=trFiles}var o=t.selected;!o&&t.xmlRoot&&(o=t.xmlRoot.selectSingleNode("folder"));if(!o)return i&&i();o.getAttribute("type")!="folder"&&o.tagName!="folder"&&(o=o.parentNode);if(this.webdav){var u=e?e:"New Folder",a=o.getAttribute("path");a||(a=r.davPrefix,o.setAttribute("path",a));var f=this,l=0;function c(h){h?(e=u+"."+l++,f.exists(a+"/"+e,c)):(t.focus(),f.webdav.exec("mkdir",[a,e],function(u){if(!u||u instanceof Error)throw i&&i(),Error;var f=apf.getXml(u),l=a+"/"+e,c=f.selectSingleNode("//folder[@path="+s.escapeXpathString(l)+"]");if(!c){s.alert("Error","Folder '"+e+"' could not be created","An error occurred while creating a new folder, please try again."),i&&i();return}t.slideOpen(null,o,!0,function(u,f,h){u||t.add(c,o),c=apf.queryNode(o,"folder[@path="+s.escapeXpathString(l)+"]"),t.select(c),n||t.startRename(),r.dispatchEvent("newfolder",{folderName:e,parentPath:a,path:l}),i&&i(c)})}))}e=u,this.exists(a+"/"+e,c)}},createFile:function(e,t,n){var i;if(!n){n=apf.document.activeElement;if(!n||n.localName!="tree")n=trFiles}t?i=apf.getXml('<file newfile="1" type="file" size="" changed="1" name="Untitled.txt" contenttype="text/plain; charset=utf-8" modifieddate="" creationdate="" lockable="false" hidden="false" executable="false"></file>'):(i=n.selected,i||(i=n.xmlRoot.selectSingleNode("folder")),i.getAttribute("type")!="folder"&&i.tagName!="folder"&&(i=i.parentNode));if(this.webdav){var o=e?e:"Untitled";t||n.focus();var a=this,f=i.getAttribute("path");f||(f=r.davPrefix,i.setAttribute("path",f));var l=0,c=function(h){if(h)e=o+"."+l++,a.exists(f+"/"+e,c);else if(!t){var p,d=0;function v(){d==2&&(p=apf.xmldb.appendChild(i,p),n.select(p),n.startRename(),n.slideOpen(null,i,!0))}n.slideOpen(null,i,!0,function(){d++,v()}),a.webdav.exec("create",[f,e],function(t){a.webdav.exec("readdir",[f],function(t){if(!t||t instanceof Error)return s.alert("Error","File '"+e+"' could not be created","An error occurred while creating a new file, please try again.");var n=apf.getXml(t),i=f+"/"+e,o=n.selectNodes("//file[@path="+s.escapeXpathString(i)+"]");if(o.length===0)return s.alert("Error","File '"+e+"' could not be created","An error occurred while creating a new file, please try again.");p=o[0],d++,r.dispatchEvent("newfile",{fileName:e,parentPath:f,path:i}),v()})})}else i.setAttribute("name",e),i.setAttribute("path",f+"/"+e),u.gotoDocument({doc:r.createDocument(i),type:"newfile",origin:"newfile"})};e=o,this.exists(f+"/"+e,c)}},getFileNode:function(e){return this.model.queryNode("//node()[@path="+s.escapeXpathString(e)+"]")},createFolderTree:function(e){var t=this,n=[];do n.unshift(e),e=e.substr(0,e.lastIndexOf("/"));while(this.model.queryNode("//node()[@path="+s.escapeXpathString(e)+"]")===null&&e&&e!=r.davPrefix);n.forEach(function(e){var n=e.substring(0,e.lastIndexOf("/"));t.model.appendXml(t.createFolderNodeFromPath(e),"//node()[@path="+s.escapeXpathString(n)+"]")})},beforeRename:function(e,t,n,i,s){var o=e.getAttribute("path"),u=tabEditors.getPage(o);if(t){var a=t.match(/^(?:\w|[.])(?:\w|[.-])*$/);if(a===null||a[0]!=t)return!1;n=o.replace(/^(.*\/)[^\/]+$/,"$1"+t)}else t=n.match(/[^\/]+$/);e.setAttribute("oldpath",e.getAttribute("path")),e.setAttribute("path",n),(i||e.getAttribute("name")!=t)&&apf.xmldb.setAttribute(e,"name",t),u&&!i&&u.setAttribute("id",n);var f=e.childNodes,l=f.length;for(var c=0;c<l;++c){var h=f[c];if(!h||h.nodeType!=1)continue;this.beforeRename(h,null,e.getAttribute("path")+"/"+h.getAttribute("name"))}return r.dispatchEvent("updatefile",{path:o,newPath:n,filename:t&&t[0],xmlNode:e,replace:s,isFolder:e.getAttribute("type")==="folder"}),!0},beforeMove:function(e,t){var n=t.getAttribute("path"),i=e.getAttribute("path")+"/"+t.getAttribute("name");t.setAttribute("oldpath",n),t.setAttribute("path",i);var s=tabEditors.getPage(n);s&&s.setAttribute("id",i);var o=t.childNodes.length;for(var u=0;u<o;++u)this.beforeMove(t,t.childNodes[u]);return r.dispatchEvent("updatefile",{path:n,newPath:i,xmlNode:t,isFolder:t.getAttribute("type")==="folder"}),!0},remove:function(e,t){var n=e.getAttribute("path"),i=tabEditors.getPage(n);i&&tabEditors.remove(i),davProject.list(n,function(e){var i=new apf.model;i.load(e);var o=i.queryNode("//node()[@path="+s.escapeXpathString(n)+"]"),u=o&&o.getAttribute("type")==="folder",a=function(e,i,s){s&&s.status&&s.status===204&&r.dispatchEvent("removefile",{path:n,isFolder:u}),t&&t(e,i,s)};davProject.remove(n,!1,a)})},init:function(){function n(e){return r.send({command:"internal-isfile",argv:e.data.argv,cwd:e.data.cwd,sender:"filesystem",extra:e.data.extra}),!1}o.addCommand({name:"open",hint:"open a file to edit in a new tab",commands:{"[PATH]":{hint:"path pointing to a file. Autocomplete with [TAB]"}}}),o.addCommand({name:"c9",hint:"alias for 'open'",commands:{"[PATH]":{hint:"path pointing to a file. Autocomplete with [TAB]"}}}),this.model=new apf.model,this.model.load("<data><folder type='folder' name='"+r.projectName+"' path='"+r.davPrefix+"' root='1'/></data>"),this.model.setAttribute("whitespace",!1);var e=location.href.replace(location.pathname+location.hash,"")+r.davPrefix;this.webdav=apf.document.documentElement.appendChild(new apf.webdav({id:"davProject",url:e,onauthfailure:function(){r.dispatchEvent("authrequired")}}));var t=this.webdav.get;this.webdav.get=function(e,n){n.headers||(n.headers={});var i=n.headers;return i["X-clientId"]=r.clientId,t.apply(this,arguments)},r.addEventListener("consolecommand.open",n),r.addEventListener("consolecommand.c9",n);var i=this;r.addEventListener("openfile",function(e){function s(){setTimeout(function(){r.dispatchEvent("afteropenfile",{doc:t,node:n})},150)}var t=e.doc,n=t.getNode();apf.xmldb.setAttribute(n,"loading","true"),r.addEventListener("afteropenfile",function(e){e.node==n&&(apf.xmldb.removeAttribute(e.node,"loading"),r.removeEventListener("afteropenfile",arguments.callee))});if(t.hasValue()){s();return}if(t.cachedValue)t.setValue(t.cachedValue),delete t.cachedValue,s();else if(e.type&&(e.type==="newfile"||e.type=="nofile")||Number(n.getAttribute("newfile")||0)===1)t.setValue(""),s();else{if(r.dispatchEvent("readfile",{doc:t,node:n,origin:e.origin||"fs"})===!1)return;var o=n.getAttribute("path"),u=function(e,i,u){i!=apf.SUCCESS?(u.status!==404&&console.log("Opening file failed for",o,"server responded with",i,u),r.dispatchEvent("filenotfound",{node:n,url:u.url,path:o})):(t.setValue(e),s())};i.readFile(o,u)}}),r.addEventListener("reload",function(e){var t=e.doc,n=t.getNode(),s=n.getAttribute("path"),o=function(e,u,a){u==apf.OFFLINE?r.addEventListener("afteronline",function(e){i.readFile(s,o),r.removeEventListener("afteronline",arguments.callee)}):u!=apf.SUCCESS?a.status==404&&r.dispatchEvent("filenotfound",{node:n,url:a.url,path:s}):r.dispatchEvent("afterreload",{doc:t,data:e})};i.readFile(s,o)})},destroy:function(){o.removeCommandsByName(["open","c9"]),this.webdav.destroy(!0,!0),this.model.destroy(!0,!0)}})}),define("text!ext/settings/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window id="winSettings"\n      skin      = "fm-window"\n      class     = "unselectable"\n      title     = "Preferences"\n      flex      = "1"\n      minwidth  = "240"\n      modal     = "false"\n      model     = "{require(\'ext/settings/settings\').model}"\n      optimize  = "true">\n        <a:bar id="barSettings" skinset="prefs" anchors ="0 0 0 0" skin="bar-preferences" flex="1" scrollbar="sbShared 2 2 2">\n        </a:bar>\n    </a:window>\n</a:application>\n'}),define("ext/panels/panels",["require","exports","module","core/ide","core/ext","core/util","core/settings","ext/menus/menus","ext/anims/anims"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("core/settings"),u=e("ext/menus/menus"),a=e("ext/anims/anims");n.exports=i.register("ext/panels/panels",{name:"Panel Manager",dev:"Ajax.org",alone:!0,type:i.GENERAL,nodes:[],panels:{},currentPanel:null,register:function(e,t){var n=this;e.mnuItem=u.addItemByPath("View/Side Bar/"+e.name,new apf.item({type:"radio",value:e.path,group:this.group,hotkey:"{ide.commandManager."+t.command+"}",onclick:function(){e.show&&e.show()},"onprop.selected":function(t){t.value&&!e.show&&n.activate(e)}}),t.position),r.addEventListener("init.ext/sidebar/sidebar",function(n){n.ext.add(e,t)}),this.panels[e.path]=e,e.$panelPosition=t.position,r.addEventListener("init."+e.path,function(t){e.panel.setAttribute("draggable","false"),e.panel.$ext.style.zIndex=100,e.panel.$ext.style.minWidth="",e.panel.setAttribute("anchors","0 0 0 0")}),r.addEventListener("settings.load",function(){o.model.queryNode("auto/panels/panel[@path="+s.escapeXpathString(e.path)+"]")||o.model.appendXml(apf.n("<panel/>").attr("path",e.path).attr("width",e.defaultWidth).node(),"auto/panels")});if(r.dispatchEvent("panels.activateDefault")!==!1){var i=o.model.queryValue("auto/panels/@active");(e["default"]&&!i||i==e.path)&&n.activate(e,null,!0)}},animate:function(e,t,n){var i=this;this.animating=!0,self.navbar&&(navbar.$ext.style.zIndex=1e4),colLeft.setAttribute("minwidth",0);var s=function(){t?(o.style.zIndex=u,o.style.left=0,o.style.minWidth="",colLeft.setAttribute("minwidth",t.minwidth)):colLeft.hide(),e&&(f.style.zIndex=l,e.$ext.style.left=0,e.$ext.style.minWidth="",e.hide()),i.animating=!1};r.dispatchEvent("panels.animate",{win:e,toWin:t,toWidth:n,onfinish:s});if(t){var o=t.$altExt||t.$ext;t.show(),t.hide()}if(t){var u=o.style.zIndex;o.style.zIndex=2e3,t.show()}if(e){var f=e.$altExt||e.$ext,l=f.style.zIndex;f.style.zIndex=1e3;if(t){var c={timingFunction:"cubic-bezier(.10, .10, .25, .90)",duration:.15};self.require("ext/themes/themes").isDark?e.hide():(apf.setOpacity(t.$ext,0),a.animate(t,apf.extend({opacity:1},c))),a.animateSplitBoxNode(colLeft,apf.extend({width:n+"px"},c),s)}else f.style.minWidth=f.offsetWidth-apf.getWidthDiff(f)+"px",f.style.left="",a.animateSplitBoxNode(colLeft,{width:0,duration:.15,timingFunction:"cubic-bezier(.10, .10, .25, .90)"},s)}else t.show(),colLeft.show(),o.style.minWidth=n-apf.getWidthDiff(o)+"px",o.style.left="",a.animateSplitBoxNode(colLeft,{width:n+"px",duration:.15,timingFunction:"cubic-bezier(.10, .10, .25, .90)"},s)},activate:function(e,t,n){if(this.currentPanel==e)return;i.initExtension(e),lastPanel=this.currentPanel,this.currentPanel&&this.currentPanel!=this&&this.deactivate();var u=o.model.queryValue("auto/panels/panel[@path="+s.escapeXpathString(e.path)+"]/@width")||e.defaultWidth;colLeft.show();if(n||!apf.isTrue(o.model.queryValue("general/@animateui")))e.panel.show(),colLeft.show(),colLeft.setAttribute("minwidth",e.panel.minwidth),colLeft.setWidth(u),r.dispatchEvent("panels.animate",{noanim:!0,toWidth:u}),apf.layout.forceResize();else if(!n){var a=this;setTimeout(function(){a.animate(lastPanel&&lastPanel.panel,e.panel,u)},10)}!t&&e.button&&e.button.setValue(!0),this.currentPanel=e,this.lastPanel=e,o.model.setQueryValue("auto/panels/@active",e.path),r.dispatchEvent("showpanel."+e.path),this.mnuPanelsNone.setAttribute("selected",!1),e.mnuItem.select(),e.panel.setTitle(e.button&&e.button.caption||"Workspace Files")},deactivate:function(e,t){if(!this.currentPanel)return;t===!1||!apf.isTrue(o.model.queryValue("general/@animateui"))?(this.currentPanel.panel.hide(),colLeft.hide(),r.dispatchEvent("panels.animate",{noanim:!0}),apf.layout.forceResize()):t&&this.animate(this.currentPanel.panel),!e&&this.currentPanel.button&&this.currentPanel.button.setValue(!1),apf.isGecko&&apf.layout.forceResize(vbMain.$ext),r.dispatchEvent("hidepanel."+this.currentPanel.path),this.currentPanel=null,t!=undefined&&(o.model.setQueryValue("auto/panels/@active","none"),this.mnuPanelsNone.select())},unregister:function(e){u.remove("View/Side Bar/"+e.name),delete this.panels[e.path]},init:function(e){var t=this;this.nodes.push(this.group=apf.document.documentElement.appendChild(new apf.group({value:"[{require('core/settings').model}::auto/panels/@active]"})),u.addItemByPath("View/Side Bar/",null,100),u.addItemByPath("View/~",new apf.divider,200),this.mnuPanelsNone=u.addItemByPath("View/Side Bar/None",new apf.item({type:"radio",selected:"true",group:this.group,onclick:function(e){t.deactivate(null,!0)}}),100),u.addItemByPath("View/Side Bar/~",new apf.divider,200)),splitterPanelLeft.addEventListener("dragdrop",function(e){if(!t.currentPanel)return;var n="auto/panels/panel[@path="+s.escapeXpathString(t.currentPanel.path)+"]/@width";o.model.queryValue(n)!=colLeft.getWidth()&&o.model.setQueryValue(n,colLeft.getWidth())});var t=this;r.addEventListener("settings.load",function(e){o.setDefaults("general",[["animateui",!0]])})},destroy:function(){u.remove("View/~",200),this.$destroy()}})}),define("text!ext/settings/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:bar name="bar-preferences">\n        <a:style><![CDATA[\n            .bar-preferences {\n                position         : relative;\n                overflow-y       : hidden;\n                overflow-x       : hidden;\n                /*background-image : url(images/panelbg.png);*/\n                color            : #202020;\n                font-family      : Tahoma, Arial;\n                font-size        : 12px;\n                text-shadow : rgba(255, 255, 255, 0.8) 0px 1px 0px;\n            }\n            \n            .bar-preferences .header {\n                background-color : rgba(0,0,0,.05);\n                background-image : -webkit-linear-gradient(bottom,rgba(0,0,0,.05), transparent);\n                height           : 29px;\n                line-height      : 30px;\n                padding          : 0 0 0 10px;\n                cursor           : default;\n                position         : relative;\n                overflow         : visible;\n                font-family      : Arial;\n                font-size        : 11.3px;\n                color            : #3b3b3b;\n                margin           : 5px 4px 10px 4px;\n                text-transform   : uppercase;\n                text-shadow      : 0 1px 0 rgba(255,255,255,.35);\n                \n                border-radius: 3px;\n                \n                -webkit-box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25) inset, 0 1px 0 0 rgba(255,255,255,.7);\n                   -moz-box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25) inset, 0 1px 0 0 rgba(255,255,255,.7);\n                        box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25) inset, 0 1px 0 0 rgba(255,255,255,.7);\n            }\n            \n            .bar-preferences .header SPAN {\n                display: none;\n            }\n            \n            .bar-preferences .cbcontainer {\n                margin : 0px 0 0 5px;\n                padding-left: 28px;\n            }\n\n            .bar-preferences .cbcontainer .checkbox {\n                left: 8px;\n            }\n            \n            .bar-preferences .first {\n                margin-top : 10px;\n            }\n            \n            .bar-preferences .underlined,\n            .bar-preferences .underlined2 {\n                margin        : 5px 5px 0 5px;\n                padding-bottom : 6px;\n                \n            }\n\n            .bar-preferences .underlined:not(:last-child),\n            .bar-preferences .underlined2:not(:last-child) {\n                border-bottom : 1px solid #b9b9b9;\n                \n                -webkit-box-shadow : 0 1px 0 0 rgba(255, 255, 255, 0.3);\n                   -moz-box-shadow : 0 1px 0 0 rgba(255, 255, 255, 0.3);\n                        box-shadow : 0 1px 0 0 rgba(255, 255, 255, 0.3);\n            }\n\n            .bar-preferences .underlined:last-child {\n                margin-bottom: 10px;\n            }\n            \n        ]]></a:style>\n    \n        <a:presentation>\n            <a:main container=".">\n                <div class="bar-preferences">\n                    \n                </div>\n            </a:main>\n        </a:presentation>\n    </a:bar>\n</a:skin>'}),define("text!ext/panels/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\r\n    <a:checkbox class="underlined" label="Enable UI Animations" value="[general/@animateui]" skin="checkbox_grey" position="1000" />\r\n    <a:checkbox position="1001" class="underlined" label="Animate Scrolling" value="[editors/code/@animatedscroll]" skin="checkbox_grey" />\r\n</a:application>\r\n'}),define("ext/settings/settings",["require","exports","module","core/ide","core/ext","text!ext/settings/settings.xml","ext/panels/panels","text!ext/settings/skin.xml","core/settings","ext/commands/commands","text!ext/panels/settings.xml"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("text!ext/settings/settings.xml"),o=e("ext/panels/panels"),u=e("text!ext/settings/skin.xml"),a=e("core/settings"),f=e("ext/commands/commands"),l=e("text!ext/panels/settings.xml");n.exports=i.register("ext/settings/settings",{name:"Preferences",dev:"Ajax.org",alone:!0,type:i.GENERAL,markup:s,skin:{id:"prefs",data:u,"media-path":r.staticPrefix+"/ext/settings/images/"},defaultWidth:250,nodes:[],save:function(e){a.save(e)},addSection:function(e,t,n,r){var i=this.model.queryNode(n+"/"+e);i||this.model.appendXml(apf.n("<"+apf.escapeXML(e)+"/>").attr("name",t).node(),n)},hook:function(){var e=this;this.markupInsertionPoint=colLeft,o.register(this,{position:1e5,caption:"Preferences","class":"preferences",command:"opensettingspanel"}),f.addCommand({name:"opensettingspanel",hint:"show the open settings panel",bindKey:{mac:"Command-,",win:"Ctrl-,"},exec:function(){e.show()}}),this.model=a.model,this.setDefaults=a.setDefaults},headings:{},getHeading:function(e){if(this.headings[e])return this.headings[e];var t=barSettings.appendChild(new apf.bar({skin:"basic"}));return t.$int.innerHTML='<div class="header"><span></span><div>'+apf.escapeXML(e)+"</div></div>",this.headings[e]=t,t},init:function(e){this.panel=winSettings,this.nodes.push(winSettings),this.addSettings("General",l)},addSettings:function(e,t,n){r.addEventListener("init.ext/settings/settings",function(r){function f(e,t){var n=t.$map,r,i=1e6;for(var s in n){var o=s-e.position;o>0&&o<i&&(r=t.$map[s],i=o)}return r}var i=r.ext.getHeading(e),s=i.lastChild;i.insertMarkup(t),i.$map||(i.$map={});var o=[];s||(s=i.firstChild,o.push(s));while(!s)o.push(s=s.nextSibling);o.length==0&&(o=i.childNodes);for(var u,a=0;a<o.length;a++)o[a].nodeType==1&&o[a].position&&(i.$map[o[a].position]=o[a],u=f(o[a],i),u!==undefined&&o[a].nextSibling!=u&&i.insertBefore(o[a],u));n&&n()})},show:function(e){return!this.panel||!this.panel.visible?(o.activate(this),this.enable()):o.deactivate(null,!0),!1},destroy:function(){f.removeCommandByName("opensettingspanel"),o.unregister(this),this.$destroy()}})}),define("text!ext/tree/tree.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:script><![CDATA[\n        function filesort(value, args, xmlNode) {\n            return (xmlNode.tagName == "folder" ? 0 : 1) + value.toLowerCase();\n        }\n\n        function createPath(a, b){\n            return b + "/" + apf.getFilename(a);\n        }\n    ]]></a:script>\n    <a:window id="winFilesViewer"\n      flex     = "1"\n      skin     = "fm-window"\n      title    = "Workspace Files"\n      modal    = "false"\n      buttons  = "close"\n      minwidth = "130"\n      optimize = "true">\n        <a:button\n          skin="header-btn"\n          class="panel-settings"\n          submenu="mnuFilesSettings"/>\n\n        <!--a:button skin="header-btn" icon="order.png" top="-22" right="7"></a:button-->\n\n        <a:menu id="mnuFilesSettings">\n            <a:item onclick="require(\'ext/tree/tree\').refresh()">Refresh Project Tree</a:item>\n            <a:divider />\n        </a:menu>\n\n        <a:vsplitbox id="vboxTreeContainer" anchors="0 0 0 0" minheight="1">\n            <a:tree id="trFiles" canrename="true" border="0" simpledata="true"\n              contextmenu="mnuCtxTree" multiselect="true" reselectable="true"\n              onbeforeremove="return require(\'core/util\').removeInteractive(this)"\n              onbeforemove="this.disable();"\n              scrollbar="sbShared 2 2 2"\n            >\n                <a:each match="[project|file|folder]" sort="[@name]" sort-method="filesort">\n                    <a:insert match="[folder]" get="{davProject.readdir(%[.].getAttribute(\'path\'))}" />\n                    <a:caption match="[@name]" value="{([../@changed] == 1 ? \'*\' : \'\') + [.]}" />\n                    <a:icon match="[folder|project]" value="folder.png" />\n                    <a:selectable match="[folder|file[not(@type=\'fileupload\')]]" />\n                    <a:icon match="[file[@type=\'fileupload\']]" value="file-tree-load-spinner.gif" />\n                    <a:css match="[file[@type=\'fileupload\']]" value="fileupload" />\n                    <a:icon match="[file]" value="{require(\'core/util\').getFileIcon(%[.])}" />\n                </a:each>\n\n                <a:add type="folder" get="{davProject.mkdir(%[.].getAttribute(\'path\'), \'New Folder\')}" />\n                <a:add type="file" get="{davProject.create(%[.].getAttribute(\'path\'), \'New File.txt\', \'\')}" />\n                <a:rename match="[file|folder[not(@root)]]" set="{require(\'ext/tree/tree\').renameFile(%[.])}" />\n                <a:move set="{require(\'ext/tree/tree\').moveFile(%[.], createPath(%[.].getAttribute(\'path\'), %[../.].getAttribute(\'path\')))}"/>\n\n                <a:remove match="[file|folder]" set="{require(\'ext/filesystem/filesystem\').remove(%[.])}"/>\n                <a:copy match="[file|folder]" set="{\n                    davProject.copy([@path], createPath(%[.].getAttribute(\'newname\') || %[.].getAttribute(\'path\'), %[../.].getAttribute(\'path\')))\n                }" undo="{\n\n                }"/>\n\n                <a:drag match="[folder|file]" />\n                <a:drop match="[folder|file]" target="[folder]"\n                    action="tree-append" copy="{event.ctrlKey}" />\n                <a:drop match="[folder|file]" target="[file]"\n                    action="insert-before" copy="{event.ctrlKey}" />\n            </a:tree>\n        </a:vsplitbox>\n\n        <a:menu id="mnuCtxTree" disabled="{{!stServerConnected.active}}" render="runtime">\n            <a:item match="[file]" class="strong"  onclick="\n                require(\'ext/tree/tree\').openSelection();\n            ">Edit</a:item>\n            <a:divider />\n            <a:item onclick="require(\'ext/tree/tree\').refresh()">Refresh</a:item>\n            <a:item match="[file|folder[not(@root)]]" onclick="apf.activeElement.startRename()" visible="{!require(\'core/ide\').readonly}">Rename</a:item>\n            <a:item match="[file|folder[not(@root)]]" onclick="apf.activeElement.remove()" visible="{!require(\'core/ide\').readonly}">Delete</a:item>\n            <a:divider />\n            <a:item match="[file|folder]" command="searchinfiles">Search Files Here</a:item>\n            <a:divider visible="{!require(\'core/ide\').readonly}"/>\n            <a:item match="[file|folder|project]" visible="{!require(\'core/ide\').readonly}" onclick="\n                var store = apf.clipboard.store;\n                apf.clipboard.put(trFiles.getSelection().map(function (node) {\n                    return apf.xmldb.cleanNode(node.cloneNode(false))\n                }));\n                apf.clipboard.copied = true;\n                apf.clipboard.pasteSelection(apf.activeElement,\n                    trFiles.selected ? trFiles.selected.parentNode : trFiles.getFirstTraverseNode());\n                apf.clipboard.store = store;\n            ">Duplicate</a:item>\n            <a:divider visible="{!require(\'core/ide\').readonly}"/>\n            <a:item match="[file|folder[not(@root)]]" command="cut" visible="{!require(\'core/ide\').readonly}">Cut</a:item>\n            <a:item match="[file|folder[not(@root)]]" command="copy" visible="{!require(\'core/ide\').readonly}">Copy</a:item>\n            <a:item match="[file|folder|project]" disabled="{apf.clipboard.empty}" visible="{!require(\'core/ide\').readonly}" command="paste">Paste</a:item>\n            <a:divider visible="{!require(\'core/ide\').readonly}"/>\n            <a:item id="itemCtxTreeNewFile" match="[file|folder|project]" visible="{!require(\'core/ide\').readonly}" \n              onclick="\n                require(\'ext/filesystem/filesystem\').createFile();\n            ">New File</a:item>\n            <a:item match="[file|folder|project]" visible="{!require(\'core/ide\').readonly}" onclick="\n                require(\'ext/filesystem/filesystem\').createFolder();\n            ">New Folder</a:item>\n        </a:menu>\n    </a:window>\n</a:application>\n\n'}),define("ext/tree/tree",["require","exports","module","core/ide","core/ext","core/util","ext/filesystem/filesystem","ext/settings/settings","ext/panels/panels","text!ext/tree/tree.xml","ext/commands/commands","ext/editors/editors"],function(e,t,n){function p(){this.$scrollTimer&&clearTimeout(this.$scrollTimer),h=trFiles.$ext.scrollTop,this.scrollPos=-1,this.$scrollTimer=setTimeout(function(){var e=u.model.data,t=e.selectSingleNode("auto/projecttree");t&&apf.xmldb.setAttribute(t,"scrollpos",trFiles.$ext.scrollTop)},1e3)}function d(){if(!r.onLine&&!r.offlineFileSystemSupport)return!1}var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("ext/filesystem/filesystem"),u=e("ext/settings/settings"),a=e("ext/panels/panels"),f=e("text!ext/tree/tree.xml"),l=e("ext/commands/commands"),c=e("ext/editors/editors"),h;n.exports=i.register("ext/tree/tree",{name:"Workspace Files",dev:"Cloud9 IDE, Inc.",alone:!0,type:i.GENERAL,markup:f,defaultWidth:200,deps:[o],expandedNodes:[],loadedSettings:0,expandedList:{},treeSelection:{path:null,type:null},loading:!1,changed:!1,animControl:{},nodes:[],model:null,offline:!1,"default":!0,hook:function(){var e=this;this.markupInsertionPoint=colLeft,a.register(this,{position:1e3,caption:"Workspace Files","class":"project_files",command:"opentreepanel"}),l.addCommand({name:"opentreepanel",hint:"show the open settings panel",bindKey:{mac:"Command-U",win:"Ctrl-U"},exec:function(){e.show()}}),r.addEventListener("init.ext/filesystem/filesystem",function(t){e.model=t.ext.model,e.loadedSettings>0&&e.inited&&e.onReady()}),r.addEventListener("settings.load",function(t){var n=t.model;(davProject.realWebdav||davProject).setAttribute("showhidden",apf.isTrue(n.queryValue("auto/projecttree/@showhidden"))),e.scrollPos=n.queryValue("auto/projecttree/@scrollpos");var i=n.queryValue("auto/projecttree");if(i){try{e.expandedNodes=JSON.parse(i)}catch(s){e.expandedNodes=[r.davPrefix]}var o=n.queryNode("auto/tree_selection");o&&(e.treeSelection.path=n.queryValue("auto/tree_selection/@path"),e.treeSelection.type=n.queryValue("auto/tree_selection/@type")),e.loadedSettings=1,e.model&&e.inited&&e.onReady()}else e.loadedSettings=2,e.model&&e.inited&&e.onReady()}),r.addEventListener("settings.save",function(t){if(!e.changed)return;var n=apf.createNodeFromXpath(t.model.data,"auto/projecttree/text()");e.expandedNodes=[];var i,s,o={};for(s in e.expandedList)i=e.expandedList[s].getAttribute("path"),i?o[i]=!0:delete e.expandedList[s];var u=r.davPrefix.split("/");u.pop();var a=u.length,f=u.join("/"),l,c;for(i in o){c=i.split("/").splice(a),l=f+"/"+c.shift();while(o[l]){if(!c.length)break;l+="/"+c.shift()}c.length||e.expandedNodes.push(i)}n.nodeValue=JSON.stringify(e.expandedNodes),e.changed=!1}),r.addEventListener("treechange",function(e){var t="//node()[@path='"+e.path.replace(/'/g,"\\'").replace(/\\/g,"\\\\")+"']",n=trFiles.getModel().data.selectSingleNode(t);if(!n)return;var r=n.childNodes,i={};e.files.forEach(function(e){i[e.name]=e});if(!apf.isTrue(u.model.queryValue("auto/projecttree/@showhidden"))){var s=["pyc","class"],o=new RegExp("\\.(?:"+s.join("|")+")$");for(var a in i)(a.charAt(0)=="."||o.test(a))&&delete i[a]}var f=[];for(var l=0;l<r.length;++l){var c=r[l],h=c.getAttribute("name");i&&i[h]?delete i[h]:f.push(c)}f.forEach(function(e){apf.xmldb.removeNode(e)}),t=n.getAttribute("path");for(var p in i){var a=i[p],d=new apf.getXml("<"+apf.escapeXML(a.type)+" />");d.setAttribute("type",a.type),d.setAttribute("name",a.name),d.setAttribute("path",t+"/"+a.name),trFiles.add(d,n)}})},onReady:function(){var e=this;trFiles.setAttribute("model",this.model),this.loadedSettings===1?r.inited?setTimeout(function(){e.loadProjectTree()},200):e.loadProjectTree():(self.trFilesInsertRule&&trFilesInsertRule.setAttribute("get","{davProject.readdir([@path])}"),trFiles.expandAll())},init:function(){var e=this;this.panel=winFilesViewer,this.nodes.push(winFilesViewer),r.addEventListener("afteroffline",function(){trFiles.selectable=!1}),r.addEventListener("afteronline",function(){trFiles.selectable=!0}),mnuFilesSettings.appendChild(new apf.item({id:"mnuitemHiddenFiles",type:"check",caption:"Show Hidden Files",visible:"{trFiles.visible}",checked:"[{require('core/settings').model}::auto/projecttree/@showhidden]",onclick:function(t){setTimeout(function(){e.changed=!0,u.save(),(davProject.realWebdav||davProject).setAttribute("showhidden",t.currentTarget.checked),e.refresh()})}})),trFiles.filterUnique=function(e,t){var n=[];for(var r=0,i=t.length;r<i;r++)e.selectSingleNode("node()[@path="+s.escapeXpathString(t[r].getAttribute("path"))+"]")||n.push(t[r]);return n},this.setupTreeListeners(),e.loadedSettings>0&&e.model&&e.onReady()},setupTreeListeners:function(){var e=this;winFilesViewer.addEventListener("prop.visible",function(e){e.value&&h&&setTimeout(function(){trFiles.$ext.scrollTop=h})}),trFiles.addEventListener("afterselect",this.$afterselect=function(t){if(u.model&&u.model.data&&trFiles.selected){var n=trFiles.selected.getAttribute("path").replace(/"/g,"&quot;"),r=trFiles.selected.getAttribute("type"),i=u.model.data,s=i.selectSingleNode("auto/tree_selection");s?(apf.xmldb.setAttribute(s,"path",n),apf.xmldb.setAttribute(s,"type",r)):apf.xmldb.appendChild(i.selectSingleNode("auto"),apf.n("<tree_selection />").attr("path",n).attr("type",r).node()),e.treeSelection.path=n,e.treeSelection.type=r}}),trFiles.addEventListener("keydown",function(e){if(e.keyCode==13)return e.preventDefault(),!1}),trFiles.addEventListener("afterchoose",this.$afterchoose=function(){e.openSelection()}),trFiles.addEventListener("beforecopy",this.$beforecopy=function(e){function t(e,t,n,r){setTimeout(function(){o.beforeRename(e,null,t.getAttribute("path").replace(/[\/]+$/,"")+"/"+n,!0,r),e.removeAttribute("newname")})}if(!r.onLine&&!r.offlineFileSystemSupport)return!1;var n,i;for(var u=0,a=e.args.length;u<a;u++){n=e.args[u].args,i=n[1].getAttribute("name");var f=0;i.match(/\.(\d+)$/,"")&&(f=parseInt(RegExp.$1,10));while(n[0].selectSingleNode("node()[@name="+s.escapeXpathString(i)+"]")){i=i.replace(/\.(\d+)$/,"");var l=i.lastIndexOf(".");l==-1&&(l=i.length);var c=i.substr(0,l),h=i.substr(l);i=c+"."+ ++f+h}n[1].setAttribute("newname",i),t(n[1],n[0],i,f>0)}}),trFiles.addEventListener("beforerename",this.$beforerename=function(e){if(!r.onLine&&!r.offlineFileSystemSupport)return!1;if(trFiles.$model.data.firstChild==trFiles.selected)return!1;var t=e.args[0].getAttribute("path"),n=t.replace(/^(.*\/)[^\/]+$/,"$1"+e.args[1]).toLowerCase(),i,u=trFiles.getModel().queryNodes(".//node()");for(var a=0,f=u.length;a<f;a++){var l=u[a].getAttribute("path").toLowerCase();if(u[a]!=e.args[0]&&l===n){i=!0;break}}if(i)return s.alert("Error","Unable to Rename","That name is already taken. Please choose a different name."),trFiles.getActionTracker().undo(),!1;if(o.beforeRename(e.args[0],e.args[1])===!1)return!1}),trFiles.addEventListener("beforemove",this.$beforemove=function(e){if(!r.onLine&&!r.offlineFileSystemSupport)return!1;setTimeout(function(){var t=e.args;for(var n=0;n<t.length;n++)o.beforeMove(t[n].args[0],t[n].args[1],trFiles)})}),trFiles.addEventListener("keyup",this.$keyup=function(e){this.dragging>0&&e.keyCode==27&&apf.DragServer.stop()}),trFiles.addEventListener("scroll",p),trFiles.addEventListener("beforeadd",d),trFiles.addEventListener("renamestart",d),trFiles.addEventListener("beforeremove",d),trFiles.addEventListener("dragstart",d),trFiles.addEventListener("dragdrop",d),trFiles.addEventListener("expand",this.$expand=function(t){if(!t.xmlNode)return;e.expandedList[t.xmlNode.getAttribute(apf.xmldb.xmlIdTag)]=t.xmlNode,e.loading||(e.changed=!0,u.save())}),trFiles.addEventListener("collapse",this.$collapse=function(t){if(!t.xmlNode)return;var n=t.xmlNode.getAttribute(apf.xmldb.xmlIdTag);delete e.expandedList[n],e.changed=!0,u.save()})},$cancelWhenOffline:function(){if(!r.onLine&&!r.offlineFileSystemSupport)return!1},openSelection:function(){if(!r.onLine&&!r.offlineFileSystemSupport)return;var e=trFiles.getSelection();e.forEach(function(e){if(!e||e.tagName!="file")return;c.gotoDocument({node:e})})},moveFile:function(e,t){var n=e.getAttribute("path");davProject.move(n,t,!0,!1,function(n,i,s){if(i!==apf.SUCCESS)return;r.dispatchEvent("afterupdatefile",{path:e.getAttribute("oldpath"),newPath:t,xmlNode:e,isFolder:e.getAttribute("type")==="folder"})}),trFiles.enable(),trFiles.focus()},renameFile:function(e){var t=e.getAttribute("path"),n=e.getAttribute("oldpath");davProject.rename(n,t,!0,!1,function(i,s,o){if(s!==apf.SUCCESS)return;r.dispatchEvent("afterupdatefile",{path:n,newPath:t,xmlNode:e,isFolder:e.getAttribute("type")==="folder"})})},loadProjectTree:function(e){function o(e){var t;return e===r.davPrefix?t=trFiles.queryNode("folder[@root=1]"):t=trFiles.queryNode("//folder[@path="+s.escapeXpathString(e)+"]"),t}function a(e,t){trFiles.insert(t,{insertPoint:e}),trFiles.$setLoadStatus(e,"loaded"),trFiles.slideToggle(apf.xmldb.getHtmlNode(e,trFiles),1,!0,null,null)}function f(){for(var e=0;e<i.length;e++){var r=i[e].cleanParentPath,s=o(r);if(s){a(s,i[e].dataXml),i.splice(e,1),setTimeout(function(){f()});return}}if(n===t.expandedNodes.length)return c()}function c(){if(!t.loading)return;t.loading=!1;if(t.treeSelection.path){var n=trFiles.$model.queryNode("//node()[@path="+s.escapeXpathString(t.treeSelection.path)+' and @type="'+t.treeSelection.type+'"]');n&&trFiles.select(n)}else trFiles.select(trFiles.getFirstTraverseNode());t.scrollPos&&t.scrollPos>-1&&(e?apf.tween.single(trFiles,{type:"scrollTop",from:0,to:t.scrollPos}):trFiles.$ext.scrollTop=t.scrollPos),self.trFilesInsertRule&&trFilesInsertRule.setAttribute("get","{davProject.readdir([@path])}"),u.save()}var t=this;this.expandedNodes.sort(),this.loading=!0;var n=0,i=[];if(!this.expandedNodes.length)return c();for(var l=0;l<this.expandedNodes.length;l++)(davProject.realWebdav||davProject).readdir(this.expandedNodes[l],function(e,r,s){n++;if(s.status===404){t.changed=!0,u.save();for(var l=0;l<i.length;){var h=i[l];(h.cleanParentPath+"/").indexOf(s.url)===0?i.splice(l,1):l++}}else{var p=apf.getXml(e),d=s.url.substr(0,s.url.length-1),v=o(d);v?(a(v,p),f()):i.push({cleanParentPath:d,dataXml:p})}if(n===t.expandedNodes.length&&!i.length)return c()})},refresh:function(){u.save(!0),trFiles.removeEventListener("scroll",p),this.scrollPos=trFiles.$ext.scrollTop,trFiles.getModel().load("<data><folder type='folder' name='"+r.projectName+"' path='"+r.davPrefix+"' root='1'/></data>"),this.expandedList={},self.trFilesInsertRule&&trFilesInsertRule.setAttribute("get",""),r.dispatchEvent("track_action",{type:"reloadtree"}),this.loadProjectTree(!0),trFiles.addEventListener("scroll",p)},show:function(e){return!this.panel||!this.panel.visible?(a.activate(this),this.enable()):a.deactivate(null,!0),!1},destroy:function(){l.removeCommandByName("opentreepanel"),a.unregister(this),this.$destroy()}})}),define("ext/uploadfiles/uploadfiles",["require","exports","module","core/ide","core/ext","core/util","text!ext/uploadfiles/uploadfiles.css","text!ext/uploadfiles/skin.xml","text!ext/uploadfiles/uploadfiles.xml","ext/filesystem/filesystem","ext/menus/menus","ext/settings/settings","ext/uploadfiles/uploadfiles","ext/tree/tree","ext/tree/tree"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("text!ext/uploadfiles/uploadfiles.css"),u=e("text!ext/uploadfiles/skin.xml"),a=e("text!ext/uploadfiles/uploadfiles.xml"),f=e("ext/filesystem/filesystem"),l=e("ext/menus/menus"),c=e("ext/settings/settings"),h=52428800,p=2097152,d=20,v=5;n.exports=i.register("ext/uploadfiles/uploadfiles",{dev:"Ajax.org",name:"Upload Files",alone:!0,skin:{id:"uploadfiles",data:u,"media-path":r.staticPrefix+"/ext/uploadfiles/style/images/"},type:i.GENERAL,css:s.replaceStaticPrefix(o),markup:a,deps:[],offline:!1,autodisable:i.ONLINE|i.LOCAL,worker:null,currentSettings:[],nodes:[],uploadFiles:[],uploadQueue:[],lockHideQueueItems:[],ignoreFiles:[".",".DS_Store"],hook:function(){var e=this;r.addEventListener("init.ext/tree/tree",function(){e.nodes.push(l.addItemByPath("File/~",new apf.divider,350),l.addItemByPath("File/Upload Local Files...",new apf.item({onclick:function(){i.initExtension(e),winUploadFiles.show()}}),370)),mnuCtxTree.addEventListener("afterrender",function(){e.nodes.push(mnuCtxTree.insertBefore(new apf.item({id:"mnuCtxTreeUpload",match:"[folder]",visible:"{trFiles.selected.getAttribute('type')=='folder'}",caption:"Upload to this folder",onclick:function(){i.initExtension(e),winUploadFiles.show()}}),itemCtxTreeNewFile),mnuCtxTree.insertBefore(new apf.divider({visible:"{mnuCtxTreeUpload.visible}"}),itemCtxTreeNewFile))}),window.cloud9config.hosted&&e.nodes.push(l.addItemByPath("File/Download Project",new apf.item({onclick:function(){window.open(r.apiPrefix+"/project/download")}}),390))})},init:function(){function t(t){var n=Array.prototype.slice.call(t.target.files);e.startUpload(n),t.target.value=""}var e=this;apf.importCssString(e.css),winUploadFiles.addEventListener("afterrender",function(){this.filebrowser=fileUploadSelect.$ext,this.filebrowser.addEventListener("change",t,!1),apf.isWebkit&&(hboxUploadNoFolders.hide(),hboxUploadWithFolders.show(),apf.setStyleClass(fileUploadSelectBtn.$ext,"uploadWithFolders"),this.folderbrowser=folderUploadSelect.$ext,this.folderbrowser.style.display="block",this.folderbrowser.addEventListener("change",t,!1))}),r.addEventListener("init.ext/tree/tree",function(){vboxTreeContainer.appendChild(boxUploadActivity)});var n=lstUploadActivity;n.$ext.addEventListener("mouseover",function(t){e.lockHideQueue=!0,apf.isChildOf(this,t.relatedTarget)||(e.lockHideQueue=!0)}),n.$ext.addEventListener("mouseout",function(t){if(apf.isChildOf(this,t.relatedTarget))return;e.lockHideQueue=!1,e.clearCompletedUploads()}),cbToggleUploadQueue.addEventListener("click",function(e){e.currentTarget.checked?n.show():n.hide()})},initWorker:function(){var e=this;this.worker=new Worker(r.workerPrefix+"/ext/uploadfiles/uploadworker.js"),this.worker.onmessage=function(t){var n=t.data;if(!n.type)return;switch(n.type){case"complete":e.onComplete();break;case"progress":e.onProgress(n.value);break;case"paused":!r.onLine||n.error===500?r.addEventListener("afteronline",function(t){e.upload()}):(s.alert("Upload failed","Uploading "+n.filepath+" failed","The server responded with error code "+n.error),e.removeCurrentUploadFile());break;case"debug":console.log(JSON.stringify(n));break;case"canceled":this.cancelAllUploads=!1;break;default:console.log("unknown message from uploadworker: ",n.type)}}},onShow:function(){if(!(window.File&&window.FileReader&&window.FileList&&window.Blob))return alert("The File APIs are not fully supported in this browser."),winUploadFiles.hide();this.setTargetFolder(),tabEditors.$ext.disableDropbox=!0,trFiles.addEventListener("afterselect",this.setTargetFolder)},onClose:function(){tabEditors.$ext.disableDropbox=!1,trFiles.removeEventListener("afterselect",this.setTargetFolder)},getTargetFolder:function(){var e=trFiles.selected?trFiles.selected.nodeName=="file"?trFiles.selected.parentElement:trFiles.selected:trFiles.root.firstChild;return e},setTargetFolder:function(){var t=e("ext/uploadfiles/uploadfiles").getTargetFolder();t||trFiles.root.firstChild,uplTargetFolder.$ext.innerHTML=t.getAttribute("name")},onBeforeDrop:function(e){if(!window.File||!window.FileReader)return s.alert("Could not upload file(s)","An error occurred while dropping this file(s)","Your browser does not offer support for drag and drop for file uploads. Please try with a recent version of Chrome or Firefox."),!1;var t=e.dataTransfer.files;if(!t.length||!t[0].size||t.length==1&&t[0].type==""&&t[0].name.indexOf(".")===-1)return i.initExtension(this),winNoFolderSupport.show(),apf.isWebkit||btnNoFolderSupportOpenDialog.hide(),!1;var n=t.length;if(n<1)return!1;if(e.currentTarget.id=="tabEditorsDropArea"){if(!(n<=v))return s.alert("Maximum files exceeded","The number of files dropped in the editor exceeds the limit.","Please update your selection to "+v+" files to continue.");this.openOnUpload=!0}return this.onDrop(e),!0},onDrop:function(e){i.initExtension(this);var t=Array.prototype.slice.call(e.dataTransfer.files);this.startUpload(t)},startUpload:function(e){this.numFilesUploaded=e.length;var t=trFiles.selected;t||(t=trFiles.xmlRoot.selectSingleNode("folder")),t.getAttribute("type")!="folder"&&t.tagName!="folder"&&(t=t.parentNode),winUploadFiles.visible&&winUploadFiles.hide(),(davProject.realWebdav||davProject).setAttribute("showhidden",!0);var n=[],r=[],i;this.uploadIndex=-1,this.totalNumUploads||(this.totalNumUploads=0);var s=-1,o=this.uploadInProgress?mdlUploadActivity.data&&mdlUploadActivity.data.childNodes.length:0,u;for(var a=0,f=e.length;a<f;a++){u=e[a],s++,i=u.name;if(this.ignoreFiles.indexOf(i)==-1){u.size>h&&r.push(i);if(r.length>1)return this.showFilesTooBigDialog(r);this.totalNumUploads++,o<d&&(this.uploadIndex=s,o++,n.push(u))}}if(r.length)return this.showFilesTooBigDialog(r);this.uploadFiles.push({targetFolder:t,queue:e});if(f=n.length)for(a=0;a<f;a++)this.addToQueue(n[a],t);this.uploadInProgress||(boxUploadActivity.show(),btnCancelUploads.show(),this.uploadNextFile())},showFilesTooBigDialog:function(e){e.length==1?s.alert("Maximum file-size exceeded","A file exceeds our upload limit of 50MB per file.","Please remove the file '"+e[0]+"' from the list to continue."):s.alert("Maximum file-size exceeded","Some files exceed our upload limit of 50MB per file.","Please remove all files larger than 50MB from the list to continue.")},checkSelectableFile:function(e){if(e.selected&&e.selected.getAttribute("type")=="fileupload")return!1},addToQueue:function(e,t,n){e.targetFolder=t;var r=e.targetFolder.getAttribute("path"),i;e.webkitRelativePath&&(i=e.webkitRelativePath&&e.webkitRelativePath.split("/"),i.pop(),i=i.join("/")),i?e.path=r+"/"+i:e.path=r,this.addToQueueList(e),this.uploadQueue.push(e),n&&n()},addToFileTree:function(e){var t=apf.escapeXML(e.name),n=apf.escapeXML(e.path)+"/"+t,r=trFiles.getModel().queryNode("//file[@path="+s.escapeXpathString(n)+"]");r&&apf.xmldb.removeNode(r);var i=apf.n("<file />").attr("type","fileupload").attr("name",t).attr("path",n).node();e.treeNode=apf.xmldb.appendChild(e.targetFolder,i)},addToQueueList:function(e){e.queueNode=mdlUploadActivity.appendXml(apf.n("<file />").attr("name",e.name).node())},removeFromQueue:function(e){var t;for(var n=this.uploadQueue.length-1;n>=0;--n){t=this.uploadQueue[n];if(t.name==e){this.uploadQueue.splice(n,1),apf.xmldb.removeNode(t.queueNode),uploadactivityNumFiles.$ext.innerHTML="("+ --this.totalNumUploads+")";break}}},removeCurrentUploadFile:function(){var e=this.currentFile;apf.xmldb.removeNode(e.queueNode),mdlUploadActivity.data.childNodes.length||boxUploadActivity.hide()},clearCompletedUploads:function(){var e=this,t=mdlUploadActivity.queryNodes("file[@progress='100']");apf.asyncForEach(t,function(t,n){if(e.lockHideQueue)return;setTimeout(function(){apf.xmldb.removeNode(t),n()},200)},function(){})},uploadNextFile:function(){function a(){t.uploadInProgress=!1,t.existingOverwriteAll=!1,t.existingSkipAll=!1,btnCancelUploads.hide(),(davProject.realWebdav||davProject).setAttribute("showhidden",c.model.queryValue("auto/projecttree/@showhidden")),e("ext/tree/tree").refresh(),t.hideUploadActivityTimeout=setTimeout(function(){mdlUploadActivity.load("<data />"),boxUploadActivity.hide()},5e3)}if(this.cancelAllUploads)return this.uploadCanceled();var t=this;uploadactivityNumFiles.$ext.innerHTML="("+this.totalNumUploads+")";var n=this.currentFile=this.uploadQueue.shift();if(n){var r=n.targetFolder.getAttribute("path"),i;n.webkitRelativePath&&(i=n.webkitRelativePath&&n.webkitRelativePath.split("/"),i.pop(),i=i.join("/")),this.uploadInProgress=!0,this.hideUploadActivityTimeout&&(clearTimeout(this.hideUploadActivityTimeout),this.hideUploadActivityTimeout=null);if(window.File&&window.FileReader&&window.FileList&&window.Blob){function o(e){e?t.existingOverwriteAll?t.overwrite():t.existingSkipAll?(t.removeCurrentUploadFile(),t.uploadNextFile()):(winUploadFileExists.show(),t.uploadQueue.length?(btnUploadOverwriteAll.show(),btnUploadSkipAll.show()):(btnUploadOverwriteAll.hide(),btnUploadSkipAll.hide()),uploadFileExistsMsg.$ext.innerHTML='"'+apf.escapeXML(n.name)+'" already exists, do you want to replace it? Replacing it will overwrite its current contents.'):u()}function u(){function l(n){if(t.cancelAllUploads)return t.uploadCanceled();n&&(e.targetFolder=n),t.addToFileTree(e);var r=e.queueNode;apf.xmldb.setAttribute(r,"progress",0),t.worker||t.initWorker(),t.worker.postMessage({cmd:"connect",id:e.name,file:e,path:e.targetFolder.getAttribute("path"),_csrf:window.cloud9config._csrf})}var e=t.currentFile,n;if(i){n=trFiles.getModel().data.selectSingleNode("//folder[@path="+s.escapeXpathString(r+"/"+i)+"]");if(!n){var o,u=r,a=i.split("/");apf.asyncForEach(a,function(n,r){u+="/"+n,o=trFiles.getModel().data.selectSingleNode("//folder[@path="+s.escapeXpathString(u)+"]"),o?(trFiles.select(o),r()):f.createFolder(n,trFiles,!0,function(n){n||(t.removeFromQueue(e.name),t.uploadNextFile()),o=n,r()})},function(){if(t.ignoreFiles.indexOf(e.name)>-1)return t.uploadNextFile();l(o)})}else l(n)}else l()}t.upload=u,f.exists(apf.escapeXML(r+(i?"/"+i:""))+"/"+n.name,o)}}else a()},skip:function(){this.removeCurrentUploadFile(),this.uploadNextFile()},skipAll:function(){this.existingSkipAll=!0,this.skip()},overwrite:function(){var e=this.currentFile,t=e.targetFolder,n=t.getAttribute("path"),r=e.name,i=trFiles.getModel().queryNode("//file[@path="+s.escapeXpathString(n+"/"+r)+"]");i&&apf.xmldb.removeNode(i),f.remove(i,this.upload)},overwriteAll:function(){this.existingOverwriteAll=!0,this.overwrite()},onProgress:function(e){if(this.cancelAllUploads)return this.uploadCanceled();if(!this.currentFile)return;var t=Math.floor(e*100),n=this.currentFile.queueNode,r=n.getAttribute("progress");apf.xmldb.setAttribute(n,"progress",Math.max(t,r))},onComplete:function(){if(this.cancelAllUploads)return this.uploadCanceled();var e=this,t=this.currentFile;return this.totalNumUploads--,apf.xmldb.setAttribute(t.queueNode,"progress","100"),apf.xmldb.setAttribute(t.treeNode,"type","file"),e.openOnUpload&&t.size<p&&r.dispatchEvent("openfile",{doc:r.createDocument(t.treeNode),origin:"upload"}),setTimeout(function(){!e.lockHideQueue&&t.queueNode?apf.xmldb.removeNode(t.queueNode):e.lockHideQueueItems.push(t)},1e3),this.addNextFileToQueue(),e.uploadNextFile()},addNextFileToQueue:function(){(!this.uploadFiles[0]||!this.uploadFiles[0].queue[this.uploadIndex])&&this.uploadFiles.shift();if(!this.uploadFiles.length)return;var e;if(!(e=this.uploadFiles[0].queue[++this.uploadIndex]))return this.uploadFiles.shift(),this.uploadIndex=0,this.addNextFileToQueue();if(this.ignoreFiles.indexOf(e.name)>-1)return this.addNextFileToQueue();this.addToQueue(e,this.uploadFiles[0].targetFolder)},cancelAll:function(){this.cancelAllUploads=!0,this.worker&&this.worker.postMessage({cmd:"cancelall"}),this.uploadFiles=[],this.uploadQueue=[],mdlUploadActivity.load("<data />"),boxUploadActivity.hide(),(davProject.realWebdav||davProject).setAttribute("showhidden",c.model.queryValue("auto/projecttree/@showhidden")),this.currentFile.treeNode&&apf.xmldb.removeNode(this.currentFile.treeNode)},uploadCanceled:function(){this.uploadInProgress=!1,this.cancelAllUploads=!1,this.existingOverwriteAll=!1,this.existingSkipAll=!1,this.totalNumUploads=0,(davProject.realWebdav||davProject).setAttribute("showhidden",c.model.queryValue("auto/projecttree/@showhidden")),e("ext/tree/tree").refresh()},getFormData:function(e){var t=new FormData;return t.append("upload",e),t}})}),define("ext/themes/themes",["require","exports","module","core/ide","core/ext","ext/menus/menus","ext/settings/settings","ext/editors/editors"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ext/menus/menus"),o=e("ext/settings/settings");e("ext/editors/editors"),n.exports=i.register("ext/themes/themes",{name:"Themes",dev:"Ajax.org",alone:!0,offline:!1,type:i.GENERAL,nodes:[],defaultTheme:"ace/theme/textmate",currTheme:"",activeTheme:null,saved:!1,register:function(e){function i(i,o){s.addItemByPath("View/Themes/"+i,new apf.item({type:"radio",value:o||e[i],onmouseover:function(e){var r=this.value;clearTimeout(n),n=setTimeout(function(){t.set(r,!0)},200)},onmouseout:function(e){clearTimeout(n),t.saved||(n=setTimeout(function(){t.set(t.currTheme)},200))},onclick:function(e){var n=e.currentTarget.value;t.set(n),r.dispatchEvent("track_action",{type:"theme change",theme:n})}}))}var t=this,n;for(var o in e)e[o]instanceof Array?(s.addItemByPath("View/Themes/"+o,new apf.item),e[o].forEach(function(e){var t=Object.keys(e)[0];i(o+"/"+t,e[t])})):i(o);this.themes=e},set:function(e,t){o.model.setQueryValue("editors/code/@theme",e),this.setThemedGUI(e),this.saved=!t,t||(this.currTheme=e)},loaded:{},setThemedGUI:function(t){var n=this,i;try{i=e(t)}catch(s){return setTimeout(function(){n.setThemedGUI(t)},10)}if(i.isDark===undefined)return setTimeout(function(){n.setThemedGUI(t)},10);this.activeTheme=i,this.isDark=i.isDark;var o=hboxMain.$ext,u=tabEditors.parentNode.$ext,a=tabEditors.$buttons.parentNode.parentNode;o.setAttribute("id","editorDiv"),a.setAttribute("id","tabsDiv"),i.isDark?(apf.setStyleClass(o,"dark"),apf.setStyleClass(u,"dark"),apf.isGecko||apf.setStyleClass(a,"dark")):(apf.setStyleClass(o,"",["dark"]),apf.setStyleClass(u,"",["dark"]),apf.setStyleClass(a,"",["dark"]));var f=i.cssClass,l=f.replace(/^ace/,"c9");n.lastTheme&&(apf.setStyleClass(o,"",[n.lastTheme]),apf.setStyleClass(u,"",[n.lastTheme]),apf.setStyleClass(a,"",[n.lastTheme])),n.lastTheme=l,apf.setStyleClass(o,l),apf.setStyleClass(u,l),apf.setStyleClass(a,l),i.bg||(i.bg=apf.getStyleRule("."+f+" .ace_gutter","backgroundColor"),i.fg=apf.getStyleRule("."+f+" .ace_gutter","color"),i.textBg=apf.getStyleRule("."+f,"backgroundColor")||apf.getStyleRule("."+f+", ."+f+" .ace_scroller","backgroundColor")),r.dispatchEvent("theme.change",{theme:i,path:t});if(n.loaded[t])return;n.loaded[t]=!0,i.textBg=="rgb(255, 255, 255)"&&(i.textBg="#fbfbfb"),apf.importStylesheet([apf.isGecko?[]:["#tabsDiv."+l+" .curbtn .tab_middle",(i.isDark?"color:rgba(255, 255, 255, 0.8)":"")+";background-color: "+i.bg+" !important"],["#editorDiv."+l+" > .basic, "+"#editorDiv."+l+" > .vsplitbox, "+"#tabsDiv."+l+", "+"."+l+" .c9terminal, "+"."+l+" .codeditorHolder, "+"."+l+" .winGoToFile, "+"."+l+" .revisionsBar .topbar, "+"."+l+" .revisionsBar .revisionsHolder, "+"."+l+" .code_complete_text_holder, "+"."+l+" .session_page,"+"."+f,"color:"+i.fg+" !important; background-color: "+i.bg+" !important"],["."+l+" .searchresults > div > span, "+"."+l+".dark .revisions-list .revision, "+"."+l+".dark .cc_complete_option, "+"."+l+" .searchresults > div",i.isDark?"color:rgba(255, 255, 255, 0.8)":"color:"+i.fg+";"],["."+f+" .ace_scroller","color:"+i.fg+" !important; background-color: "+i.textBg+" !important"]],self,n.stylesheet),r.dispatchEvent("theme.init",{theme:i,path:t})},init:function(){var e=this;this.stylesheet=apf.createStylesheet(),this.nodes.push(this.group=new apf.group);var t=s.addItemByPath("View/Themes/",new apf.menu({"onprop.visible":function(n){n.value&&t.select(null,o.model.queryValue("editors/code/@theme")||e.defaultTheme)}}),35e4);r.addEventListener("init.ext/code/code",function(n){n.ext.amlEditor&&n.ext.amlEditor.$editor&&t.select(null,e.defaultTheme)}),r.addEventListener("settings.load",function(t){var n=e.currTheme=t.model.queryValue("editors/code/@theme")||e.defaultTheme;e.setThemedGUI(n)})},getActiveTheme:function(){return this.activeTheme},enable:function(){s.enableItem("View/Themes")},disable:function(){s.disableItem("View/Themes")},destroy:function(){s.remove("View/Themes")}})}),define("ext/themes_default/themes_default",["require","exports","module","core/ext","ext/themes/themes"],function(e,t,n){var r=e("core/ext"),i=e("ext/themes/themes");n.exports=r.register("ext/themes_default/themes_default",{name:"Themes",dev:"Ajax.org",alone:!0,type:r.GENERAL,themes:{Ambiance:"ace/theme/ambiance",Chrome:"ace/theme/chrome",Clouds:[{Clouds:"ace/theme/clouds"},{"Clouds Midnight":"ace/theme/clouds_midnight"}],Cobalt:"ace/theme/cobalt","Crimson Editor":"ace/theme/crimson_editor",Dawn:"ace/theme/dawn",Dreamweaver:"ace/theme/dreamweaver",Eclipse:"ace/theme/eclipse",GitHub:"ace/theme/github","Idle Fingers":"ace/theme/idle_fingers","Kr Theme":"ace/theme/kr_theme",Merbivore:[{Merbivore:"ace/theme/merbivore"},{"Merbivore Soft":"ace/theme/merbivore_soft"}],"Mono Industrial":"ace/theme/mono_industrial",Monokai:"ace/theme/monokai","Pastel On Dark":"ace/theme/pastel_on_dark",Solarized:[{"Solarized Dark":"ace/theme/solarized_dark"},{"Solarized Light":"ace/theme/solarized_light"}],TextMate:"ace/theme/textmate",Tomorrow:[{Tomorrow:"ace/theme/tomorrow"},{"Tomorrow Night":"ace/theme/tomorrow_night"},{"Tomorrow Night Blue":"ace/theme/tomorrow_night_blue"},{"Tomorrow Night Bright":"ace/theme/tomorrow_night_bright"},{"Tomorrow Night Eighties":"ace/theme/tomorrow_night_eighties"}],Twilight:"ace/theme/twilight","Vibrant Ink":"ace/theme/vibrant_ink",Xcode:"ace/theme/xcode"},init:function(){i.register(this.themes)}})}),define("ext/dockpanel/libdock",["require","exports","module"],function(e,t,n){var r=n.exports=function(e,t,n,r,i,s){this.columnCounter=0,this.$parentHBox=e,this.$cbFindPage=t,this.$cbStorePage=n,this.$cbChange=i,this.$cbFindOptions=r,this.$cbAnimate=s;var o=this.indicator=document.body.appendChild(document.createElement("div"));o.style.position="absolute",o.style.display="none",o.style.border="3px solid #5c5c5c",o.style.zIndex=1e6};(function(){function o(e,t){var n=(e||{}).uniqueId;if(!n)return;var r=s[n].node;if(!t&&r&&r.parentNode)return r.parentNode.$dockData;var o;return i.bars.each(function(e){if(o)return;e.sections.each(function(t){if(o)return;t.uniqueId==n&&(o=e),t.buttons.each(function(e){if(o)return;e.uniqueId==n&&(o=t)})})}),o}function u(e){for(var t=0;t<e.length;t++){if(!e[t])continue;var n=e[t].buttons||e[t].sections;if(n){if(u(n))return!0}else if(e[t].hidden<0)return!0}return!1}function a(e,t){for(var n=t;n<e.length;n++)if(e[n]&&e[n].uniqueId&&s[e[n].uniqueId].node&&s[e[n].uniqueId].node.parentNode)return s[e[n].uniqueId].node}function f(e,t,n,r){if(!e.getPages||!e.getPages().length){if(r){var i=t.$dockData.buttons;for(var s=0;s<i.length;s++)r.insertIndex(i[s].$dockData,s)}var o=t.parentNode;n.removeNode(),e.parentNode&&n.appendChild(e),t.removeNode(),o.selectNodes("vbox").length||(o.removeNode(),o.vbox&&(o.vbox.removeNode(),o.splitter.removeNode()),this.resizeMainHbox())}}function l(e){e.$dockData.uniqueId?s[e.$dockData.uniqueId]={node:e,data:e.$dockData}:e.$dockData.uniqueId=s.push({node:e,data:e.$dockData})-1}function c(e){var t=e.nextSibling;while(t){if(t.localName=="bar"&&t.visible)break;if(t.localName=="vbox"&&t.visible){t=t.bar;break}t=t.nextSibling}return t!=e?t:null}function h(e){var t=e.previousSibling;while(t){if(t.localName=="bar"&&t.visible)break;if(t.localName=="vbox"&&t.visible){t=t.bar;break}t=t.previousSibling}return t!=e?t:null}function p(e,t){var n=e.nextSibling;while(n&&!n.visible&&(!t||n.localName!=t))n=n.nextSibling;return n}function d(e,t){var n=e.sections;if(!u(n))return;var r=this.$addBar(t,e);for(var i=0;i<n.length;i++)v.call(this,n[i],n[i].position?r.childNodes[n[i].position]:null,r);e.expanded>0&&this.expandBar(r,e.expanded==2,!0)}function v(e,t,n){var r=e.buttons;if(!u(r))return;var i=this.$addSection(n,t,null,e);this.$addMenu(i,e);for(var s=0;s<r.length;s++)m.call(this,r[s],null,i)}function m(e,t,n){if(e.hidden>0)return;n.parentNode,this.$addButton(n,t,n.$menu,this.$addPage(this.$cbFindPage(e.ext),t&&t.$dockpage,n.$menu,e.caption,e.caption&&e.caption.toLowerCase()||"",n),apf.extend(e,this.$cbFindOptions(e.ext)||{}))}function g(e,t,n){var r=this;this.animateControl&&this.animateControl.stop(),this.animating=!0,e.show(),e.vbox.show();var i=e.getWidth(),s=e.vbox.getWidth()-apf.getWidthDiff(e.vbox.$ext);t?e.hide():e.vbox.setWidth(i);var o=[t?{oHtml:e.vbox.$ext,type:"width",from:s,to:i}:{oHtml:e.vbox.$ext,type:"width",from:i,to:s}],u=e.vbox.getElementsByTagNameNS(apf.ns.aml,"tab");u.each(function(e){o.push(t?{oHtml:e.$ext,type:"fade",from:1,to:-1}:{oHtml:e.$ext,type:"fade",from:0,to:1}),e.$ext.style.width=s+"px"});var a={steps:6,interval:apf.isChrome?5:5,control:this.animateControl={},anim:apf.tween.easeOutCubic,tweens:o,oneach:function(){apf.layout.forceResize(e.vbox.$ext)},onfinish:function(){setTimeout(function(){u.each(function(e){apf.setOpacity(e.$ext,1),e.$ext.style.width=""})}),e.vbox.setWidth(s),n&&n(),r.animating=!1}};a.onstop=a.onfinish,apf.tween.multi(document.body,a)}function y(e,t){var n;if(e=="button"){if(t.localName=="page")return t.$dockbutton;if(t.localName=="divider"){n=t.parentNode.selectNodes("button");if(n.length==1)return n[0]}return t}if(e=="page"){if(t.localName=="button")return t.$dockpage;if(t.localName=="divider"){n=t.parentNode.selectNodes("button");if(n.length==1)return n[0].$dockpage}return t}if(e=="section")return t.localName=="page"&&t.parentNode.getPages().length==1?t.$dockbutton.parentNode:t.localName=="divider"?t.parentNode:t}function b(e,t){return t>e-n&&t<e+n}var e,t,n=3,r=100,i,s;this.resizeMainHbox=function(){var e=this.$parentHBox,t=e.lastChild,n=e.firstChild;while(t&&!t.visible)t=t.previousSibling;while(n&&!n.visible)n=n.nextSibling;if(!t){e.setWidth(0);return}e.setWidth(t.getLeft()+t.getWidth()-n.getLeft())},this.checkBars=function(){var e,t=i.bars;for(var n=t.length-1;n>=0;n--)e=t[n],e&&e.cache&&e.cache.childNodes.length==1&&(e.cache.destroy(!0,!0),delete e.cache);this.resizeMainHbox()},this.getState=function(e){if(e)return i;var t={};return t.bars=i.bars.slice(0),t.bars.each(function(e,t,n){e=n[t]=apf.extend({},e),delete e.cache,e.sections=e.sections.slice(0),e.sections.each(function(e,t,n){e=n[t]=apf.extend({},e),delete e.cache,e.buttons=e.buttons.slice(0),e.buttons.each(function(e,t,n){e=n[t]=apf.extend({},e),delete e.cache})})}),JSON.parse(JSON.stringify(t))},this.loadState=function(e){this.clearState(),i=JSON.parse(JSON.stringify(e)),s=[];if(!i.bars)return;for(var t in i.bars)i.bars[t]||delete i.bars[t];i.bars.each(function(e){e.uniqueId=s.push({data:e})-1,e.sections.each(function(e){e.uniqueId=s.push({data:e})-1,e.buttons.each(function(e){e.uniqueId=s.push({data:e})-1})})});var n=i.bars;for(var t=0;t<n.length;t++)n[t]&&d.call(this,n[t])},this.clearState=function(){if(!i||!i.bars)return;i.bars.each(function(e){var t=e.cache;if(!t)return;if(t.localName=="bar"&&t.dock){t.hide(),t.vbox&&t.vbox.hide();var n=t.selectNodes("vbox");for(var r=0;r<n.length;r++){var i=n[r].selectNodes("button");if(i&&i.length&&i[0])for(var s=0;s<i.length;s++)i[s].hideMenu(),i[s].$dockpage.parentNode.remove(i[s].$dockpage),i[s].$dockData.hidden=-1}}else if(!t.bar)return;t.destroy(!0,!0),t.vbox&&t.vbox.destroy(!0,!0)})},this.addTo=function(e,t){var n=s[t]&&s[t].data;return n?(n.buttons?n.buttons.push(e):n.sections&&n.sections.push(e),e.uniqueId=s.push({data:e})-1,e.uniqueId):!1},this.show=function(e,t){var n=s[e]&&s[e].data;if(!n)return;var r;if(!n.bars&&!n.sections){var f=o(s[e].data);if(!u(f.buttons)){var l=o(f);u(l.sections)?(f.buttons.each(function(n){if(n.hidden!=2||n.uniqueId==e)n.hidden=t?-2:-1}),r=a(l.sections,l.sections.indexOf(f)+1),v.call(this,f,r,s[l.uniqueId].node)):(f.buttons.each(function(n){if(n.hidden!=2||n.uniqueId==e)n.hidden=t?-2:-1}),r=a(i.bars,i.bars.indexOf(l)+1),d.call(this,l,r))}else n.hidden>0?(n.hidden=t?-2:-1,r=a(f.buttons,f.buttons.indexOf(n)+1),m.call(this,n,r,s[f.uniqueId].node)):m.call(this,n,null,s[f.uniqueId].node)}else(n.bars||[n]).each(function(e){(e.sections||[e]).each(function(e){(e.buttons||[e]).each(function(e){})})})},this.hide=function(e,t){var n=s[e].data;(n.bars||[n]).each(function(e){(e.sections||[e]).each(function(e){(e.buttons||[e]).each(function(e){e=s[e.uniqueId].node;if(e.$dockData.hidden<0){e.setValue(!1);var n=e.$dockpage;n.parentNode.remove(n,null,!0),e.$dockData.hidden=t?2:1}})})})},this.isExpandedFull=function(e){var t=e.parentNode;while(t&&t.id!="hboxDockPanel"){if(t.expanded)return!0;t=t.parentNode}return!1},this.isExpanded=function(e){var t=s[e].node;t||(this.show(e),t=s[e].node);var n=o(o(s[e].data));return n?s[n.uniqueId].data.expanded:-1},this.showMenu=function(e){var t=s[e].node;t||(this.show(e),t=s[e].node),t.showMenu();var n=t.$dockpage.parentNode;n.activepage||n.set(n.getPage(0))},this.findBar=function(e,t){var n=s[e].node,r=n&&n.parentNode.parentNode;return t?r:r.$dockData},this.findTabs=function(e,t){var n=s[e].node,r=n.vbox.selectNodes("tab");if(t)return apf.getArrayFromNodelist(r);var i=[];for(var o=0;o<r.length;o++)i.push(r[o].$dockData);return i},this.expandBar=function(e,t,n){typeof e=="number"&&(e=s[e].node),this.$currentMenu&&this.$currentMenu.hide();var r=e.parentNode||this.$parentHBox;if(!e.vbox){var i=this;e.$dockData.minWidth&&(r.minwidth=e.$dockData.minWidth),e.vbox=r.insertBefore(new apf.vbox({padding:0,width:e.$dockData&&e.$dockData.width||260,splitters:!0,vdock:1,"class":"dockcol unselectable expandedpanel",childNodes:[new apf.button({dock:1,skin:"dockheader",visible:e.$dockData&&e.$dockData.headerVisibility||"true","class":"expanded",nosplitter:!0,height:11,resizable:!1,margin:"0 0 0 0",onclick:function(){i.collapseBar(e,!0,!0)}})]}),e);if(!e.vbox)return;var o=e.vbox.previousSibling;e.splitter=r.insertBefore(new apf.splitter({scale:"right","class":"splitter-editor-right panelsplitter",width:"0",ondragstart:function(){i.$currentMenu&&i.$currentMenu.hide()}}),e.vbox),e.splitter.addEventListener("dragstart",function(){if(!this.previousSibling){if(!e.splitter.parent)return e.splitter.setAttribute("parent",e.parentNode.parentNode),apf.extend(e.splitter,apf.splitter.templates.splitbox),e.splitter.decorate(),e.splitter.$ext.onmousedown(),!1;e.vbox.setAttribute("width",""),e.vbox.setAttribute("flex","1")}else if(e.splitter.parent)return e.splitter.removeAttribute("parent"),apf.extend(e.splitter,apf.splitter.templates.box),e.splitter.decorate(),e.splitter.$ext.onmousedown(),!1}),e.splitter.addEventListener("dragdrop",function(){if(!this.previousSibling){var t=e.vbox.getWidth();e.vbox.removeAttribute("flex"),e.vbox.setWidth(t)}}),e.splitter.addEventListener("dragmove",function(){if(this.previousSibling){var t=e.parentNode,n=t.lastChild,r=t.firstChild;while(n&&!n.visible)n=n.previousSibling;while(r&&!r.visible)r=r.nextSibling;t.setWidth(n.getLeft()+n.getWidth()-r.getLeft())}}),e.splitter.bar=e.vbox.bar=e}else r.insertBefore(e.vbox,e),r.insertBefore(e.splitter,e.vbox);var u=e.selectNodes("vbox");for(var a=0;a<u.length;a++){var f=u[a].selectSingleNode("button"),l=self[f.submenu],c=l&&l.firstChild;c&&(c.extId=f.$dockData.ext[0],e.vbox.appendChild(c),c.skin=="dockbar"&&c.setAttribute("height",34),!c.flex&&c.tagName!="bar"&&!c.noflex&&c.setAttribute("flex",1))}e.vbox&&(e.vbox.show(),e.vbox.expanded=!0,e.vbox.firstChild.$ext.onmousemove({})),this.findTabs(e.$dockData.uniqueId,!0).each(function(e){if(!e.activepage){var t=e.getPage(0);e.set(t),t.$active=!0}else e.getPage(e.activepage).$active=!0}),e.hide(),e.expanded=!0,e.splitter.show(),e.$dockData.expanded=t?2:1,this.$cbChange(),this.resizeMainHbox()},this.collapseBar=function(e,t,n){function r(){var t=e.selectNodes("vbox"),n=e.vbox.selectNodes("tab");for(var r=0;r<t.length;r++){var i=self[t[r].selectSingleNode("button").submenu];i.appendChild(n[r])}e.show(),e.vbox.hide(),e.parentNode&&e.parentNode.removeChild(e.vbox),e.vbox.expanded=!1,e.splitter.hide()}typeof e=="number"&&(e=s[e].node),e.$dockData.expanded=t?-2:-1,e.expanded=!1,this.$currentMenu&&this.$currentMenu.hide(),r(),e.firstChild.$ext.onmousemove({}),this.$cbChange(),this.resizeMainHbox()},this.$isLastBar=function(e){var t=this.$parentHBox.lastChild;while(t&&!t.visible)t=t.previousSibling;return e==t||e==t.vbox},this.$getLastBar=function(){var e=this.$parentHBox.firstChild;if(!e)return;if(!e.visible)while(e&&!e.visible)e=e.nextSibling;return e.localName!="bar"&&(e=e.bar),e.visible?e:e.vbox},this.$startDrag=function(n,r){var i,s=0,o=this;apf.setOpacity(n.$ext,.2),apf.setStyleClass(n.$ext,"dragging");var u=this.$getLastBar(),a=apf.getAbsolutePosition(u.$ext)[0],f=this.indicator;t=null,apf.addListener(document,"mouseup",function(t){apf.removeListener(document,"mousemove",e),apf.removeListener(document,"mouseup",arguments.callee)}),apf.addListener(document,"mousemove",e=function(e){i&&(i.$ext.style.borderBottom="",i=null);if(!e)return;if(e.button!==0){document.onmouseup(null,!0);return}var l=f.style.top;n.$ext.style.top="-2000px",f.style.top="-2000px",apf.plane.hide();var c,h;if(e.clientX>a-40&&e.clientX<a){var d=n.localName=="vbox"&&n.$dockbar==u&&!n.$dockbar.selectNodes("vbox").length;c={position:d?"none":"left_of_column",aml:h=i=u}}else c=o.$calcAction(e,r),h=i=c.aml;if(t&&t.position==c.position&&t.aml==h){f.style.top=l;return}t=c;if(!h||!h.dock&&!h.bar){!s&&!1&&(s=1,apf.tween.single(n.$ext,{type:"fade",from:.2,to:1,steps:20,onfinish:function(){s=1}}));return}var v="rgba(154,190,144,0.50)",m="rgba(154,190,144,0.75)",g=apf.getAbsolutePosition(h.$ext);f.style.left=g[0]+"px",f.style.top=g[1]+"px",f.style.display="block",f.style.backgroundColor="",f.style.borderColor=v,f.style.marginLeft="0",f.innerHTML="",s&&!1&&(s=0,apf.tween.single(n.$ext,{type:"fade",from:1,to:.2,steps:20,onfinish:function(){s=0}}));var b=o.isExpandedFull(c.aml),w=h.$ext.offsetWidth,E=h.$ext.offsetHeight;switch(c.position){case"before_button":case"after_button":f.innerHTML="<div></div><div style='position:absolute'></div>",f.style.border="1px solid "+m;var S=apf.getAbsolutePosition(h.parentNode.$ext);f.style.left=S[0]-1+"px",f.style.top=S[1]+"px",w=h.parentNode.$ext.offsetWidth+1,E=h.parentNode.$ext.offsetHeight+1;var x=f.firstChild;x.style.height="7px",x.style.backgroundColor=v;var T=f.childNodes[1],N=y("button",r),C=h==N||p(h,"button")==N&&c.position=="after_button";C?(h!=N&&(g=apf.getAbsolutePosition(N.$ext)),T.style.top=g[1]-S[1]+4+"px",T.style.left="2px",T.style.right="3px",T.style.height=N.$ext.offsetHeight-9+"px",T.style.border="2px solid "+v,T.style.webkitBorderRadius="4px"):(T.style.top=g[1]-S[1]+(c.position=="before_button"?0:h.$ext.offsetHeight)+"px",T.style.width="34px",T.style.margin="0 2px 0 1px",T.style.borderBottom="3px solid "+v);break;case"in_section":y("section",r)==h.$dockfor&&(f.style.borderWidth="1px 1px 1px 1px",E--);break;case"after_page":case"before_page":var k=h.parentNode,S=apf.getAbsolutePosition(k.$ext);f.style.left=S[0]+(b?3:0)+"px",f.style.top=S[1]+(b?3:-2)+"px",f.style.borderColor=m,w=k.$ext.offsetWidth+(b?2:6),E=k.$ext.offsetHeight+(b?0:11),f.style.borderWidth="3px 3px 3px 3px";var L=c.position=="before_page"?h.previousSibling:h.nextSibling,A=y("page",r),O=A==h?h:A==L?L:!1,M=apf.getAbsolutePosition((O||h).$button,k.$ext);if(O){f.innerHTML="<div style='position:absolute;'></div><div style='position:absolute;'></div><div style='position:absolute;'></div>";var _=f.firstChild,D=f.childNodes[1],P=f.childNodes[2];_.style.left=M[0]-(b?6:3)+"px",_.style.width=O.$button.offsetWidth-6+"px",_.style.height=b?"19px":"16px",_.style.margin="-19px 0 0 0px",_.style.border="3px solid "+m,_.style.borderWidth="3px 3px 0 3px",D.style.left=M[0]+O.$button.offsetWidth-(b?6:6)+"px",D.style.right="0px",P.style.borderBottom=D.style.borderBottom="3px solid "+m,P.style.left="0px",P.style.right=w-M[0]-(b?8:12)+"px",f.style.borderTop="0px solid "+m,f.style.top=S[1]+(b?23:19)+"px",E-=26+(b?2:4),w-=b?8:6}else{f.style.top=S[1]+(b?4:0)+"px",f.innerHTML="<div style='position:absolute;'><div></div></div>",f.firstChild.style.height="16px",f.firstChild.style.width="7px",f.firstChild.style.background=m,f.firstChild.style.top="0px",f.firstChild.firstChild.style.width="0px",f.firstChild.firstChild.style.height="100%",f.firstChild.firstChild.style.margin="0 3px 0 3px",f.firstChild.firstChild.style.borderLeft="1px dotted #666",f.firstChild.firstChild.style.opacity=.6;var H=M[0]+(c.position=="before_page"?0:h.$button.offsetWidth);H+7>=w?(H-=b?11:10,f.firstChild.style.width="4px",f.firstChild.firstChild.style.marginRight="0px"):H>10?H-=b?10:7:(H-=b?3:0,f.firstChild.style.width="4px",f.firstChild.firstChild.style.marginLeft="0px"),f.firstChild.style.left=H+"px",E-=b?9:11,w-=b?8:6}break;case"before_tab":E=0;case"after_tab":f.style.left=g[0]+2+"px",f.style.top=g[1]+E-(h.nextSibling?0:3)+"px",f.style.height="3px",f.style.width=w-7+"px",f.style.borderWidth="0 0 0 0",f.style.backgroundColor=m;return;case"before_section":E=0;case"after_section":f.style.left=g[0]+"px",f.style.top=g[1]+E-3+"px",f.style.height="5px",f.style.width=h.$ext.offsetWidth+"px",f.style.borderWidth="0 0 0 0",f.innerHTML="<div style='margin:2px 0 2px 0'></div>",f.firstChild.style.backgroundColor="#5c5c5c",f.firstChild.style.height="1px",f.style.backgroundColor=v;return;case"in_column":f.innerHTML="<div style='position:absolute'></div>",f.style.borderWidth="0 0 0 0",T=f.firstChild,T.style.top="100%",T.style.borderTop="3px solid "+v,T.style.height=(n.localName=="vbox"?n.$ext.offsetHeight:50)+"px",T.style.background="rgba(172,172,172,0.5)",T.style.width="100%",T.style.webkitBorderRadius="0 0 4px 4px";break;case"left_of_column":if(h!=o.$getLastBar())f.style.borderWidth="0 0 0 3px",f.style.marginLeft="-1px";else{f.innerHTML="<div style='position:absolute'></div>",f.style.borderWidth="0 0 0 0";var T=f.firstChild;T.style.right="100%",T.style.width=0,T.style.height="100%",T.style.borderRight="3px solid "+v,T.style.background="rgba(172,172,172,0.5)",T.style.webkitBorderRadius="4px 0 0 4px",apf.tween.single(T,{type:"width",from:0,to:40,anim:apf.tween.EASEOUT,steps:20})}break;case"right_of_column":f.style.borderWidth="0 3px 0 0",o.$isLastBar(h)||(f.style.marginLeft="2px");break;default:f.style.display="none",apf.setStyleClass(n.$ext,"",["dragging"])}M=apf.getDiff(f),f.style.width=w-M[0]+"px",f.style.height=E-M[1]+"px"}),e.dragged=n,e.original=r},this.$calcAction=function(e,t){var r="none",i=document.elementFromPoint(e.clientX,e.clientY);if(i==document.body)return{};var s=apf.findHost(i);if(!s)return{};if(s.localName=="codeeditor")while(s&&!s.$dockData)s=s.bar||s.parentNode;if(!s)return{};var o;if(!s.dock||s.localName=="page"||s.localName=="tab"){var u=s;while(u&&!u.vdock)u=u.parentNode;if(u&&u.localName=="vbox"){o=apf.getAbsolutePosition(u.$ext)[1];var a=u.selectNodes("tab"),f=t.parentNode.localName=="tab"&&t.parentNode.getPages().length==1;if(b(apf.getAbsolutePosition(a[0].$ext,u.$ext)[1]+o,e.clientY))return f&&t.parentNode==a[0]?{}:{position:"before_tab",aml:a[0]};for(var l=0;l<a.length;l++)if(b(a[l].$ext.offsetHeight+1+apf.getAbsolutePosition(a[l].$ext,u.$ext)[1]+o-(s.nextSibling?0:3),e.clientY))return!f||t.parentNode!=a[l]&&t.parentNode!=a[l+1]?{position:"after_tab",aml:a[l]}:{}}}s.localName=="splitter"&&(s=s.nextSibling);if(!s.dock&&!s.bar)return{};var p=s;while(p&&p.localName!="bar"&&(p.localName!="vbox"||!p.dock&&!p.bar))p=p.parentNode;var d,v,m,g,w;p&&(o=apf.getAbsolutePosition(e.target,p.$ext),d=o[0]+e.offsetX,v=p.$ext.offsetWidth-d);if(p&&d<n)return s=p.parentNode.localName=="bar"?p.parentNode:p,g=t.localName=="divider"&&(t.parentNode.$dockbar==s||t.parentNode.$dockbar==h(s))&&!t.parentNode.$dockbar.selectNodes("vbox").length||t.localName=="button"&&t.parentNode.childNodes.length==2&&(t.parentNode.parentNode==s||t.parentNode.parentnode==h(s))||t.localName=="page"&&t.parentNode.getPages().length==1&&(t.$dockbutton.parentNode.parentNode==(s.bar||s)||t.$dockbutton.parentNode.parentNode==h(s)),{position:g?"none":"left_of_column",aml:s};if(p){if(!p)return{};var E=this.$isLastBar(p)?n*2:n;if(p&&v<E)return s=p.parentNode.localName=="bar"?p.parentNode:p,g=t.localName=="divider"&&(t.parentNode.$dockbar==s||t.parentNode.$dockbar==c(s))&&!t.parentNode.$dockbar.selectNodes("vbox").length||t.localName=="button"&&t.parentNode.childNodes.length==2&&(t.parentNode.parentNode==s||t.parentNode.parentnode==c(s))||t.localName=="page"&&t.parentNode.getPages().length==1&&(t.$dockbutton.parentNode.parentNode==(s.bar||s)||t.$dockbutton.parentNode.parentNode==c(s)),{position:g?"none":"right_of_column",aml:s}}if(s.localName=="page"||s.localName=="tab"||s.localName=="menu")r="before_page",s.localName=="page"?(o=apf.getAbsolutePosition(s.$button),d=e.clientX-o[0],d>s.$button.offsetWidth/2&&(r="after_page")):s.localName=="menu"?(s.firstChild.getPages&&(w=s.firstChild.getPages(),s=w[w.length-1]),r="after_page"):s.localName=="tab"&&(w=s.getPages(),s=w[w.length-1],r="after_page");else if(s.localName=="bar"||s.skin=="dockheader")s.skin=="dockheader"?(s=s.parentNode.selectNodes("vbox")[0],r="before_section"):(r=t.localName=="divider"&&t.parentNode.$dockbar==s&&s.lastChild.$dockfor==t.parentNode?"in_section":"in_column",s=s.lastChild);else if(s.localName=="button")r="after_button",o=apf.getAbsolutePosition(s.$ext),m=e.clientY-o[1],m<s.$ext.offsetHeight/2&&(s.previousSibling&&s.previousSibling.localName=="button"?s=s.previousSibling:r="before_button");else if(s.dock&&(s.localName=="divider"||s.localName=="vbox")){s.localName=="divider"&&(s=s.parentNode);var S=s.selectNodes("button");if(!S.length)return{position:"in_section",aml:s};o=apf.getAbsolutePosition(s.$ext),m=e.clientY-o[1];var x=s.$ext.offsetHeight-m;if(m<n){if(t.localName!="divider"||t.parentNode!=(s.previousSibling&&s.previousSibling.$dockfor))r="before_section"}else x<n&&s.nextSibling&&(t.localName!="divider"||t.parentNode!=s.$dockfor)&&(!s.nextSibling||s.nextSibling.$dockfor!=y("section",t))&&(r="after_section");r=="none"&&(m<s.$ext.offsetHeight/2?(r="before_button",s=S[0]):(r="after_button",s=S[S.length-1]))}return{position:r,aml:s}},this.$stopDrag=function(n){e(),apf.removeListener(document,"mousemove",e);var r=this.indicator,i=t,s=i&&i.aml;r.style.display="none";var o=e.dragged;apf.setOpacity(o.$ext,1),apf.setStyleClass(o.$ext,"",["dragging"]);if(!s)return;switch(i.position){case"before_button":case"after_button":var u=self[s.submenu],a=e.original;this.$moveTo(u,a,s,i.position=="before_button"?s:s.nextSibling,s.parentNode,i.position);break;case"before_tab":case"after_tab":var f=s.parentNode.bar,l=apf.getChildNumber(s),c=f.selectNodes("vbox"),h=this.$addSection(f,i.position=="before_tab"?c[0]:c[l+1],null,o&&o.$dockData),u=this.$addMenu(h),a=e.original,p=s.parentNode.insertBefore(u.firstChild,i.position=="before_tab"?s:s.nextSibling);p.setAttribute("flex",1),this.$moveTo(u,a,p,null,h,i.position,p);break;case"before_section":case"in_column":case"after_section":var h=this.$addSection(s.parentNode,i.position=="before_section"?s:i.position=="in_column"?null:s.nextSibling,null,o&&o.$dockData),u=this.$addMenu(h),a=e.original;this.$moveTo(u,a,s,null,h,i.position);break;case"before_page":case"after_page":var u=self[s.$dockbutton.submenu],a=e.original;this.$moveTo(u,a,s.parentNode,i.position=="before_page"?s.$dockbutton:s.nextSibling&&s.nextSibling.$dockbutton,u.ref,i.position,s.parentNode);break;case"left_of_column":var f=this.$addBar(s),h=this.$addSection(f,null,null,o&&o.$dockData),a=e.original,d;a.localName=="button"||a.localName=="divider"?d=a.parentNode.$dockData:a.localName=="page"&&(d=a.$dockbutton.parentNode.$dockData);var u=this.$addMenu(h,d);this.$moveTo(u,a,s,null,h,i.position);break;case"right_of_column":var f=this.$addBar(s.nextSibling),h=this.$addSection(f,null,null,o&&o.$dockData),u=this.$addMenu(h),a=e.original;this.$moveTo(u,a,s,null,h,i.position);break;default:}},this.$moveTo=function(e,t,n,r,i,s,o,u,a){var l=r&&r.$dockpage;if(t.localName=="page"||t.localName=="button"||t.localName=="hbox"){if(e.skin=="dockwin_runbtns"&&t.id!="btnRunCommands"||e.skin!="dockwin_runbtns"&&t.id=="btnRunCommands")return;if(t.localName=="page"||t.localName=="hbox")var c=t,h=t.$dockbutton;else t.localName=="button"&&(c=t.$dockpage,h=t);u||(u=c.parentNode);var p=h.parentNode,d=self[c.$dockbutton.submenu],v=o||e.firstChild;if(v){v.insertBefore(c,l),self[c.id]||(self[c.id]=c);if(!v.getPages||v.getPages().length==1){var m=self[c.$dockbutton.submenu];m&&(m.setAttribute("width",d.width),m.setAttribute("height",d.height));var g=0,y=0;if(v.parentNode.localName=="vbox")v.parentNode.selectNodes("tab").each(function(e){g+=e.flex||1,y++});else{var b=i.parentNode.selectNodes("vbox");b.each(function(e){var t=e.selectSingleNode("button");g+=t&&self[t.submenu].firstChild.flex||1,y++})}v.height||v.setAttribute("flex",g/y)}}if(r&&r.previousSibling==h||r==h||!r&&!h.nextSibling&&h.parentNode==i)return;h.setAttribute("submenu",e.id),i.insertBefore(h,r);var w,E=i.$dockData.buttons;p.$dockData.buttons.remove(h.$dockData),r?E.insertIndex(h.$dockData,E.indexOf(r.$dockData)):w=E.push(h.$dockData),f.call(this,u,p,d,E),this.checkBars()}else if(t.localName=="divider"){var S=t.parentNode&&t.parentNode.selectNodes("button");for(var w=S.length-1;w>=0;w--){var h=S[w];this.$moveTo(e,h,n,r,i,s,o,u,!0)}this.checkBars()}a||this.$cbChange()},this.$addMenu=function(e,t){t||(t=e.$dockData);var n=this,i=t.id||"submenu"+r++,s;if(e.$menu)return apf.document.documentElement.appendChild(e.$menu);var o=new apf.menu({id:i,width:t.width||"350",height:t.height||"200",ref:e,right:10,pinned:"true",animate:"false",skin:t.skin?t.skin:"dockwindowblack",resizable:t.resizable===!1?!1:"left bottom",dock:1,minwidth:t.minWidth?t.minWidth:150,minheight:t.minHeight?t.minHeight:t.height||150,onhide:function(e){this.firstChild&&this.firstChild.getPage()&&(this.firstChild.getPage().$dockbutton.$dockData.showMenu=!1)},ondisplay:function(e){n.$currentMenu&&n.$currentMenu!=this&&n.$currentMenu.parentNode&&n.$currentMenu.hide(),n.$currentMenu=this;var t=apf.getAbsolutePosition(o.$ext),r=apf.getWindowHeight(),i=apf.getAbsolutePosition(o.opener.$ext),s=apf.getWindowWidth(),u=s-i[0];o.$ext.style.right=u+5+"px",o.$ext.style.left="",o.maxheight=r-t[1]>150?r-t[1]:150;var a;setTimeout(a=function(){if(o.opener&&o.opener.$dockData&&o.opener.$dockData.caption){var e=apf.getAbsolutePosition(o.opener.$ext),t;typeof o.$ext.getElementsByClassName=="function"&&(t=o.$ext.getElementsByClassName("arrow")[0])&&(t.style.top=e[1]-apf.getAbsolutePosition(o.$ext)[1]+8+"px")}}),a(),this.firstChild.getPage()&&(this.firstChild.getPage().$dockbutton.$dockData.showMenu=!0)},onafterresize:function(){e.$dockData.width=this.getWidth(),e.$dockData.height=this.getHeight(),n.$cbChange()},childNodes:[new apf.tab({anchors:t.noTab?"1 -7 0 4":"5 4 5 4",skin:t.noTab?"dockbar":"docktab",buttons:"scale, close",anims:"",dock:1,"class":t["class"]?t["class"]:"",nosplitter:t.noTab?!0:!1,flex:t.flex||(t.noflex?0:1),activepage:0,noflex:t.noflex,onafterswitch:function(e){setTimeout(function(){if(e.previousPage){var t=e.previousPage.$dockbutton;t.$dockData.active=!1,t.value&&o.visible&&(t.value=!1,t.$setState("Out",{}))}if(e.nextPage&&e.nextPage.$dockbutton){var t=e.nextPage.$dockbutton;t.$dockData.active=!0,!t.value&&o.visible&&(t.value=!0,t.$setState("Down",{})),o.visible&&(o.opener=t,o.dispatchEvent("display"))}n.$cbChange()})},onresize:function(r){clearTimeout(s);var i=this;s=setTimeout(function(){e.parentNode&&e.parentNode.$dockData&&e.parentNode.$dockData.expanded>0&&(e.parentNode.$dockData.width=i.getWidth(),t.flex=i.flex,n.$cbChange())},500)},onclose:function(e){var t=e.page;t.lastParent=this,n.$cbChange()}})]});return apf.document.documentElement.appendChild(o),o.show(),o.hide(),e.$menu=o,o.setAttribute("width",t.width||260),t.height&&o.setAttribute("height",t.height),o},this.$addBar=function(e,t){var n=this;this.columnCounter++,e&&e.previousSibling&&e.previousSibling.tagName=="splitter"&&(e=e.previousSibling),t||(t={sections:[]},t.uniqueId=s.push({data:t})-1);if(t&&t.cache)var r=this.$parentHBox.insertBefore(t.cache,e);else{var r=this.$parentHBox.insertBefore(new apf.bar({skin:"debug-panel",margin:"0 0 0 0",dock:1,onDOMNodeRemovedFromDocument:function(){n.columnCounter--},childNodes:[new apf.button({dock:1,skin:"dockheader",onclick:function(){n.expandBar(this.parentNode,!0,!0)}})]}),e);r.$dockData=t,r.$dockData.cache=r,i.bars.indexOf(r.$dockData)==-1&&i.bars.insertIndex(r.$dockData,e?i.bars.indexOf(e.$dockData):i.bars.length)}return this.resizeMainHbox(),l.call(this,r),r},this.$addPage=function(e,t,n,r,i,s){var o=this;if(!e)e=n.firstChild.add(r,i);else if(s&&s.parentNode.expanded){var u=s.parentNode;if(n.firstChild)n.firstChild.insertBefore(e,t),u.vbox.insertBefore(n.firstChild,s.nextSibling&&s.nextSibling.lastChild&&s.nextSibling.lastChild.$dockpage.parentNode);else{var a=apf.getArrayFromNodelist(u.selectNodes("vbox")).indexOf(s),l=u.vbox.selectNodes("tab")[a];l.insertBefore(e,t)}}else n.firstChild.insertBefore(e,t);e.oDrag=e.$button,e.dock=1,e.setAttribute("draggable",!0);var c;return e.$addedDockEvent||(e.addEventListener("beforedrag",c=function(t){this.$ext.style.zIndex="";var n=this.parentNode,r=n.length==1,i=(r?this.parentNode:this).$ext;r?(n.$buttons.style.opacity=0,this.$ext.style.opacity=0):i.style.background="#fafcfe";var s=this.parentNode.cloneNode(!1);s.removeAttribute("id"),s.removeAttribute("activepage"),s.setAttribute("buttons","close"),s.removeAttribute("anchors"),apf.document.documentElement.appendChild(s),s.setWidth(this.parentNode.$ext.offsetWidth-6),s.setHeight(this.parentNode.$ext.offsetHeight-6);var u=this.cloneNode(!1);u.removeAttribute("id"),u.removeAttribute("render"),s.appendChild(u);var a=this.childNodes;for(var f=a.length-1;f>=0;f--)u.insertBefore(a[f],u.firstChild);var l=apf.getAbsolutePosition(this.parentNode.$ext);s.setLeft(l[0]-1+3),s.setTop(l[1]-2+3),s.$ext.style.border="1px solid #333",s.addEventListener("afterdrag",function(t){n.$buttons.style.opacity="",e.$ext.style.opacity="",i.style.background="",i.style.border="";var r=u.childNodes;for(var a=r.length-1;a>=0;a--)e.appendChild(r[a],e.firstChild);s.id=s.name="",s.destroy(!0,!0),o.$stopDrag(t.htmlEvent),s.removeEventListener("afterdrag",arguments.callee)});var c=t.htmlEvent.clientX,h=t.htmlEvent.clientY;return s.setAttribute("draggable",!0),setTimeout(function(){s.$dragStart({clientX:c,clientY:h}),s.$ext.style.zIndex=1e6}),o.$startDrag(s,this),!1}),e.addEventListener("afterclose",function(e){var t=this.$dockbutton,n=this.lastParent,r=t.parentNode;return t.removeNode(),this.removeNode(),t.$dockData.hidden=2,f.call(o,n,r,n.parentNode.localName=="menu"?n.parentNode:self[t.submenu]),o.$cbStorePage(this),!1},!0),e.$addedDockEvent=!0),e},this.$getSection=function(e,t){for(var n in e.childNodes)if(e.childNodes[n].value&&e.childNodes[n].value==t)return e.childNodes[n];return null},this.$addSection=function(e,t,n,r){var i=this;r||(r={buttons:[]},r.uniqueId=s.push({data:r})-1),e||(e=this.$parentHBox.lastChild);if(r.cache){var u=e.insertBefore(r.cache,t),a=o(r,!0);a&&a!=e.$dockData&&a.sections.remove(r);var f=e.$dockData.sections;f.indexOf(u.$dockData)==-1&&f.insertIndex(u.$dockData,t?f.indexOf(t.$dockData):f.length)}else{var u=e.insertBefore(new apf.vbox({padding:0,edge:"0 0 3 0","class":"docksection",value:n,dock:r.draggable===!1?0:1,draggable:r.draggable===!1?!1:!0,childNodes:[new apf.divider({skin:"divider-debugpanel",margin:"3 2 -4 2",dock:1,visible:r.draggable===!1?!1:!0,draggable:!0})]}),t);if(r.draggable!==!1){var c=u.firstChild;c.addEventListener("beforedrag",function(e){var t=this.parentNode,n=t.$dockbar=t.parentNode,r=t.cloneNode(!1);r.removeAttribute("id"),r.$dockfor=t;var s=apf.getDiff(t.$ext),o=t.$ext.offsetHeight,u=apf.getAbsolutePosition(t.$ext);n.insertBefore(r,t),r.$ext.style.background="#434343",r.$ext.style.borderTop="1px solid #373737",r.$ext.style.height=o-s[1]+"px",t.setWidth(t.$ext.offsetWidth),apf.document.documentElement.appendChild(t),t.setLeft(u[0]),t.setTop(u[1]),t.addEventListener("afterdrag",function(e){n.insertBefore(t,r),t.setAttribute("draggable",!1),setTimeout(function(){t.removeAttribute("left"),t.removeAttribute("top"),t.removeAttribute("width"),t.$ext.style.position="relative",t.$ext.style.zIndex=1});var s=this.selectNodes("button");s.length&&s[0].setValue(!1),r.destroy(!0,!0),i.$stopDrag(e.htmlEvent),t.removeEventListener("afterdrag",arguments.callee)}),t.setAttribute("draggable",!0);var a=e.htmlEvent.clientX,f=e.htmlEvent.clientY;return setTimeout(function(){t.$dragStart({clientX:a,clientY:f}),t.$ext.style.zIndex=1e6}),i.$startDrag(t,this),!1})}var a=o(r);a&&a!=e.$dockData&&a.sections.remove(r),u.$dockData=r,u.$dockData.cache=u;var f=e.$dockData.sections;f.indexOf(u.$dockData)==-1&&f.insertIndex(u.$dockData,t?f.indexOf(t.$dockData):f.length)}return l.call(this,u),u},this.$addButton=function(e,t,n,r,i){var s=this,u,a,f=!0;typeof i.draggable!="undefined"&&(f=!1);if(i.cache){var c=e.insertBefore(i.cache,t),h=o(i);h&&h!=e.$dockData&&h.buttons.remove(i);var p=e.$dockData.buttons;p.indexOf(c.$dockData)==-1&&p.insertIndex(c.$dockData,t?p.indexOf(t.$dockData):p.length)}else{var c=e.insertBefore(new apf.button({skin:"dockButton",submenu:n.id,dock:f?1:"",visible:i&&i.hidden<0||!0,"class":i["class"]||"",draggable:f,onblur:function(){},onmousedown:function(){u=!0,self[this.submenu]&&self[this.submenu].firstChild&&self[this.submenu].firstChild.set&&self[this.submenu].firstChild.set(r),u=!1;if(i&&(a=i.primary)){var e=this.value?a.defaultState:a.activeState,t=c.$ext.getElementsByTagName("span");this.value||(this.$dockpage.$active=!1),t[2].style.backgroundPosition=e.x+"px "+e.y+"px";if(a=i.secondary)t[1].style.backgroundPosition=e.x+"px "+e.y+"px";this.value?i.cbOnPageHide&&i.cbOnPageHide():i.cbOnPageShow&&i.cbOnPageShow()}setTimeout(function(){s.$cbChange()})}}),t);i&&i.id&&c.setAttribute("id",i.id);function d(e){if(i&&(a=i.primary)){var t=e.value?a.activeState:a.defaultState,n=e.$ext.getElementsByTagName("span");e.value||(e.$dockpage.$active=!1),e.setAttribute("tooltip",i.menu.split("/").pop()),n[2].style.background='url("'+a.backgroundImage+'") '+t.x+"px "+t.y+"px no-repeat";if(a=i.secondary)n[1].style.background='url("'+a.backgroundImage+'") '+t.x+"px "+t.y+"px no-repeat";if(a=i.tertiary)n[0].style.background=a.backgroundColor+' url("'+a.backgroundImage+'") '+t.x+"px "+t.y+"px no-repeat",n[0].style.border="1px solid #c7c7c7"}}setTimeout(function(){d(c)}),r.addEventListener("prop.visible",function(e){e.value==1&&i&&i.cbOnPageShow?i.cbOnPageShow():e.value==0&&i&&i.cbOnPageHide&&i.cbOnPageHide()}),c.addEventListener("prop.value",function(e){if(i&&(a=i.primary)){var t=c.value?a.activeState:a.defaultState,n=c.$ext.getElementsByTagName("span");c.value||(c.$dockpage.$active=!1),n[2].style.backgroundPosition=t.x+"px "+t.y+"px";if(a=i.secondary)n[1].style.backgroundPosition=t.x+"px "+t.y+"px"}}),c.addEventListener("beforedrag",function(e){var t=this;this.hideMenu(),this.setValue(!0);if(this.parentNode.selectNodes("button").length==1)return this.parentNode.firstChild.dispatchEvent("beforedrag",{htmlEvent:e.htmlEvent}),!1;var n=this.cloneNode(!0);n.removeAttribute("id"),apf.document.documentElement.appendChild(n),n.setValue(!0),d(n);var r=apf.getAbsolutePosition(this.$ext);n.setLeft(r[0]),n.setTop(r[1]),n.addEventListener("afterdrag",function(e){n.destroy(!0,!0),t.setValue(!1),s.$stopDrag(e.htmlEvent),n.removeEventListener("afterdrag",arguments.callee)});var i=e.htmlEvent.clientX,o=e.htmlEvent.clientY;return setTimeout(function(){n.$dragStart({clientX:i,clientY:o}),n.$ext.style.zIndex=1e6,this.removeEventListener("mouseover",arguments.callee)}),s.$startDrag(n,this),!1}),r.$dockbutton=c,c.$dockpage=r;var h=o(i);h&&h!=e.$dockData&&h.buttons.remove(i),c.$dockData=i,c.$dockData.cache=c;var p=e.$dockData.buttons;p.indexOf(c.$dockData)==-1&&p.insertIndex(c.$dockData,t?p.indexOf(t.$dockData):p.length)}return l.call(this,c),i&&(i.showMenu&&!i.active?i.showMenu=!1:i.showMenu?(i.active&&n.firstChild&&n.firstChild.set&&n.firstChild.set(r),c.showMenu()):i.active&&apf.window.vManager.check(r.parentNode,"page",function(){r.parentNode.activepage||r.parentNode.set(r)})&&!r.parentNode.activepage&&r.parentNode.set(r)),c}}).call(r.prototype)}),define("ext/dockpanel/dockpanel",["require","exports","module","core/ext","core/ide","ext/menus/menus","ext/dockpanel/libdock","ext/settings/settings","ext/anims/anims"],function(e,t,n){var r=e("core/ext"),i=e("core/ide"),s=e("ext/menus/menus"),o=e("ext/dockpanel/libdock"),u=e("ext/settings/settings"),a=e("ext/anims/anims");n.exports=r.register("ext/dockpanel/dockpanel",{name:"Dock Panel",dev:"Ajax.org",alone:!0,type:r.GENERAL,defaultState:{bars:[]},nodes:[],dockpanels:{},loaded:!1,initDocTitle:document.title,notificationMsgs:{},init:function(e){var t=this,n=new apf.visibilitymanager;this.layout=new o(hboxDockPanel,function(e){if(!e||!t.dockpanels[e[0]])return!1;var r=t.dockpanels[e[0]][e[1]];if(!r)return!1;if(r.page)return r.page;var i=r.getPage();return i&&(i.$arrExtension=e),n.permanent(i,function(e){r.mnuItem.check()},function(){r.mnuItem.uncheck()}),i},function(e){var n=e.$arrExtension,r=t.dockpanels[n[0]][n[1]];r.page=e,r.mnuItem.uncheck(),t.saveSettings()},function(e){if(!e||!t.dockpanels[e[0]])return!1;var n=t.dockpanels[e[0]][e[1]];return n&&n.options},function(){t.saveSettings()},function(){return apf.isTrue(u.model.queryValue("general/@animateui"))}),i.addEventListener("extload",function(e){i.addEventListener("settings.load",function(e){var n=u.model,r=n.queryValue("auto/dockpanel/text()"),s=t.defaultState;if(r)try{s=JSON.parse(r);var o=t.defaultState.bars;for(var a=0,f=Math.max(s.bars.length,o.length);a<f;a++){if(!o[a]){s.bars[a]=null;continue}if(!s.bars[a]||s.bars[a].sections.length<o[a].sections.length)s.bars[a]=o[a]}}catch(l){}i.dispatchEvent("dockpanel.load.settings",{state:s}),t.layout.loadState(s),t.loaded=!0,i.dispatchEvent("dockpanel.loaded",{state:s})})}),t.updateParentHboxTop(),i.addEventListener("menus.restore",t.updateParentHboxTop),i.addEventListener("menus.minimize",t.updateParentHboxTop),this.nodes.push(s.addItemByPath("View/Dock Panels/",null,150),s.addItemByPath("View/Dock Panels/Restore Default",new apf.item({onclick:function(){var e=t.defaultState,n;if(e){try{n=e}catch(r){}t.layout.loadState(n),u.model.setQueryValue("auto/dockpanel/text()",n),t.saveSettings(),i.dispatchEvent("restorelayout")}}}),100),s.addItemByPath("View/Dock Panels/~",new apf.divider,200))},updateParentHboxTop:function(){var e=hboxDockPanel.$ext,t=s.minimized?22:3;e.style.paddingTop=t+"px"},saveSettings:function(){clearTimeout(this.$timer);var e=this;this.$timer=setTimeout(function(){var t=e.layout.getState();u.model.setQueryValue("auto/dockpanel/text()",JSON.stringify(t))})},enable:function(){this.$lastState&&this.layout.loadState(this.$lastState)},disable:function(){this.$lastState=this.layout.getState(),this.layout.clearState()},destroy:function(){s.remove("View/Dock Panels/Restore Default"),s.remove("View/Dock Panels/~",200),this.layout.clearState(),this.$destroy()},register:function(e,t,n,r){var i=this.dockpanels[e]||(this.dockpanels[e]={});i[t]={options:n,getPage:r};var o=this.layout,u=this;i[t].mnuItem=s.addItemByPath((n.menuPath||"View/Dock Panels/")+n.menu.split("/").pop(),new apf.item({id:"mnu"+t,type:"check",onclick:function(){var n=r(),i=u.getButtons(e,t);i.length&&(i=i[0].uniqueId)&&(this.value?o.hide(i):(o.show(i,!0),o.isExpanded(i)<0&&o.showMenu(i),n.parentNode.set(n)))}}),n.menuIndex)},unregister:function(){},addDockable:function(e){var t=this.defaultState;e.barNum||(e.barNum=0);if(e.sections){e.barNum||e.barNum===0?t.bars[e.barNum]?t.bars[e.barNum].sections.merge(e.sections):t.bars[e.barNum]=e:t.bars.push(e);return}t.bars[e.barNum||0]||(t.bars[e.barNum||0]={expanded:!1,width:230,sections:[]});var n=t.bars[e.barNum||0];return e.buttons?n.sections.push(e):n.sections.push({flex:2,width:260,height:350,buttons:[e]}),n.sections.slice(-1)},removeButton:function(e,t,n,r){var i=this;n=n||this.layout.getState(!0);if(!n||!e||!t)return;n.bars||(n=n.state),n.bars.each(function(n){n.sections.each(function(n){for(var o=0;o<n.buttons.length;o++){var u=n.buttons[o];u.ext[0]==e&&u.ext[1]==t&&(r&&delete s.items["View/Dock Panels/"+u.caption],n.buttons.remove(u),delete i.dockpanels[e][t])}})})},getButtons:function(e,t,n){n=n||this.layout.getState(!0);var r=[];return n?(n.bars||(n=n.state),n.bars.each(function(n){n.sections.each(function(n){n.buttons.each(function(n){(!e||n.ext[0]==e)&&(!t||n.ext[1]==t)&&r.push(n)})})}),r):r},getBars:function(e,t,n){n=n||this.layout.getState(!0);var r=[];if(!n)return;return n.bars||(n=n.state),n.bars?(n.bars.each(function(n){var i=!1;n.sections.each(function(n){n.buttons.each(function(n){(!e||n.ext[0]==e)&&(!t||n.ext[1]==t)&&(i=!0)})}),i&&r.push(n)}),r):r},hideSection:function(e,t){var n=this.getButtons(e),r=[],i=this;n.each(function(e){e.hidden<0&&r.pushUnique(i.layout.findBar(e.uniqueId)),e.hidden==-1&&i.layout.hide(e.uniqueId)}),t&&r.each(function(e){e.expanded==1&&i.layout.collapseBar(e.uniqueId)})},showSection:function(e,t){var n=this.getButtons(e),r=this,i=[];n.each(function(e){e.hidden&&e.hidden==1&&(r.layout.show(e.uniqueId),i.pushUnique(r.layout.findBar(e.uniqueId)))}),i.each(function(e){t&&e.expanded<0&&r.layout.expandBar(e.uniqueId)})},showBar:function(e){if(e.cache){e.cache.show();return}var t=this;e.sections.each(function(e){e.buttons.each(function(e){t.layout.show(e.uniqueId)})})},hideBar:function(e){e.cache&&e.cache.hide()},expandBar:function(e){this.layout.expandBar(e.cache)},increaseNotificationCount:function(e){},resetNotificationCount:function(e){if(e===-1)return;if(!this.dockObjects)return;for(var t=0;t<this.dockObjects.length;t++)if(this.dockObjects[t].ident==e)return this.dockObjects[t].notCount=0,this.updateNotificationElement(this.dockObjects[t].btn,0),!0;return!1},updateNotificationElement:function(e,t,n){if(!e)return console.trace("dockpanel.updateNotificationElement requires btnObj not to be null");var r=t===0?"":t,i=e.$ext.getElementsByClassName("dock_notification")[0];n||(n={});var s=n.type||"";apf.isGecko?i.textContent=r:i.innerText=r,t>0?i.style.display="block":i.style.display="none";var o=e.$dockpage;o.initCaption||(o.initCaption=o.getAttribute("caption"));var u=o.initCaption;return o.$active?(o.setAttribute("caption",u),apf.setStyleClass(o.$button,"",["un-read-message"]),s=="chat"&&e.notificationOpt&&e.notificationOpt&&e.notificationOpt.name&&(delete this.notificationMsgs[e.notificationOpt.name],this.updateDocTitleNotifications())):(t>0?(u+=" ("+t+")",apf.setStyleClass(o.$button,"un-read-message"),s=="chat"&&(e.notificationOpt=n,n.name&&(this.notificationMsgs[n.name]=t,this.updateDocTitleNotifications()))):(apf.setStyleClass(o.$button,"",["un-read-message"]),s=="chat"&&e.notificationOpt&&e.notificationOpt&&e.notificationOpt.name&&(delete this.notificationMsgs[e.notificationOpt.name],this.updateDocTitleNotifications())),o.setAttribute("caption",u)),!0},updateDocTitleNotifications:function(){var e=this,t=0;for(var n in this.notificationMsgs)this.notificationMsgs.hasOwnProperty(n)&&(t+=this.notificationMsgs[n]);t>0?(this.barNotificationTimer&&clearInterval(this.barNotificationTimer),this.barNotificationCount=0,this.barNotificationTimer=setInterval(function(){e.barNotificationCount%2?document.title="("+t+") message"+(t>1?"s":"")+" | "+e.initDocTitle:document.title=e.initDocTitle,e.barNotificationCount++},1e3)):this.barNotificationTimer&&(clearInterval(this.barNotificationTimer),this.barNotificationCount=0,document.title=e.initDocTitle)}})}),define("text!ext/openfiles/openfiles.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:script><![CDATA[\n        function filesort(value, args, xmlNode) {\n            return (xmlNode.tagName == "folder" ? 0 : 1) + value.toLowerCase();\n        }\n    ]]></a:script>\n    <a:window id="winOpenFiles"\n      flex     = "1"\n      skin     = "fm-window"\n      title    = "Open Files"\n      modal    = "false"\n      buttons  = "close"\n      optimize = "true"\n      minwidth = "101">\n        <a:button\n          skin="header-btn"\n          class="panel-settings"\n          submenu="mnuOpenFilesSettings"/>\n        \n        <a:menu id="mnuOpenFilesSettings">\n            <a:item id="cbShowFiles"\n                caption = "Show Path"\n                type    = "check"\n                visible = "{lstOpenFiles.visible}"\n                checked = "[{require(\'ext/settings/settings\').model}::auto/openfiles/@showpath]"\n                onclick = "\n                    setTimeout(function() {\n                        var sel = lstOpenFiles.getSelection();\n                        lstOpenFiles.reload();\n                        lstOpenFiles.selectList(sel);\n                    });\n                "\n            />\n        </a:menu>\n        \n        <a:list id="lstOpenFiles" \n          canrename   = "true" \n          anchors     = "0 0 0 0" \n          model       = "{require(\'ext/openfiles/openfiles\').model}"\n          border      = "0"\n          scrollbar   = "sbShared 2 2 2"\n          class       = "openfile"\n          multiselect = "true" \n          autoselect  = "false"\n          skin        = "tree">\n            <a:each match="[file]" sort="[@name]" sort-method="filesort">\n                <a:caption match="[@name]" value="{([../@changed] == 1 ? \'*\' : \'\') + [.] + (cbShowFiles.checked ? \' - \' + [../@path].split(\'/\').slice(-2).join(\'/\') : \'\')}" />\n                <a:icon match="[folder|project]" value="folder.png" />\n                <a:icon match="[file]" value="{require(\'core/util\').getFileIcon(%[.])}" />\n            </a:each>\n            <a:remove match="[file|folder]" />\n        </a:list>\n    </a:window>\n</a:application>'}),define("ext/openfiles/openfiles",["require","exports","module","core/ide","core/ext","core/util","core/settings","ext/panels/panels","text!ext/openfiles/openfiles.xml","ext/commands/commands","ext/editors/editors"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("core/settings"),u=e("ext/panels/panels"),a=e("text!ext/openfiles/openfiles.xml"),f=e("ext/commands/commands"),l=e("ext/editors/editors");n.exports=i.register("ext/openfiles/openfiles",{name:"Open Files",dev:"Ajax.org",alone:!0,type:i.GENERAL,markup:a,nodes:[],defaultWidth:130,hook:function(){var e=this;this.markupInsertionPoint=colLeft,u.register(this,{position:2e3,caption:"Open Files","class":"open_files",command:"openfilepanel"}),f.addCommand({name:"openfilepanel",hint:"show the open files panel",bindKey:{mac:"Shift-Command-U",win:"Shift-Ctrl-U"},exec:function(){e.show()}});var t=this.model=(new apf.model).load("<files />");r.addEventListener("openfile",function(n){var i=n.doc.getNode();if(i&&!t.queryNode("//node()[@path="+s.escapeXpathString(i.getAttribute("path"))+"]")){var o=t.appendXml(apf.getCleanCopy(i));r.inited&&e.inited&&lstOpenFiles.$ext.offsetWidth&&e.animateAdd(o)}}),r.addEventListener("afteropenfile",function(e){var n=t.queryNode("//node()[@path="+s.escapeXpathString(e.node.getAttribute("path"))+"]");if(!n||!e.doc.$page)return;n.getAttribute("customtype")==s.getContentType("c9search")&&r.dispatchEvent("c9searchopen",e);var i=e.doc.$page.$model;i.addEventListener("update",i.$lstOpenFilesListener=function(){if(!i.data)return;var e=i.data.getAttribute("changed");e!=n.getAttribute("changed")&&apf.xmldb.setAttribute(n,"changed",e)})}),r.addEventListener("filenotfound",function(e){var n=t.queryNode("//node()[@path="+s.escapeXpathString(e.path)+"]");n&&t.removeXml(n)});var n=function(n){if(n.returnValue===!1)return;var i=t.queryNode("//node()[@path="+s.escapeXpathString(n.page.id||"")+"]");if(!i||!i.parentNode||i.beingRemoved)return;i.getAttribute("customtype")==s.getContentType("c9search")&&r.dispatchEvent("c9searchclose",n),n.page.$model.removeEventListener("update",n.page.$model.$lstOpenFilesListener),r.inited&&e.inited&&lstOpenFiles.$ext.offsetWidth?(i.beingRemoved=!0,e.animateRemove(i)):t.removeXml(i)};r.addEventListener("closefile",n),tabEditors.addEventListener("close",n),r.addEventListener("updatefile",function(e){var n=e.xmlNode;if(!self.trFiles)return;if(n.getAttribute("customtype")==s.getContentType("c9search")){apf.xmldb.setAttribute(n,"changed",0);return}var r=s.escapeXpathString(e.newPath||e.path||n.getAttribute("path")),i=t.queryNode("//node()[@path="+r+"]");if(!e.replace)var o=trFiles.queryNode("//node()[@path="+r+"]");n&&i&&(e.path&&(apf.xmldb.setAttribute(i,"path",n.getAttribute("path")),o&&apf.xmldb.setAttribute(o,"path",n.getAttribute("path"))),e.newPath&&(apf.xmldb.setAttribute(i,"path",e.newPath),o&&apf.xmldb.setAttribute(o,"path",e.newPath)),e.filename&&apf.xmldb.setAttribute(i,"name",apf.getFilename(e.filename)),e.changed!=undefined&&apf.xmldb.setAttribute(i,"changed",e.changed))})},animateAdd:function(e){if(!apf.isTrue(o.model.queryValue("general/@animateui")))return;var t=apf.xmldb.findHtmlNode(e,lstOpenFiles);t.style.overflow="hidden",apf.tween.multi(t,{steps:10,interval:10,tweens:[{type:"left",to:0,from:-1*t.offsetWidth,steps:10,interval:10,anim:apf.tween.NORMAL}],onfinish:function(){}})},animateRemove:function(e){var t=this;if(apf.isTrue(o.model.queryValue("general/@animateui"))){var n=apf.xmldb.findHtmlNode(e,lstOpenFiles);n.style.overflow="hidden",apf.tween.multi(n,{steps:10,interval:10,tweens:[{type:"left",from:0,to:-1*n.offsetWidth,steps:10,interval:10,anim:apf.tween.NORMAL}],onfinish:function(){n.style.display="none",t.model.removeXml(e)}})}else t.model.removeXml(e)},init:function(){var e=this;this.panel=winOpenFiles,this.nodes.push(winOpenFiles),lstOpenFiles.addEventListener("afterselect",function(e){var t=this.selected;if(!t||this.selection.length>1)return;l.gotoDocument({doc:r.createDocument(t),origin:"openfiles"})}),lstOpenFiles.addEventListener("afterremove",function(e){var t=this.getSelection(),n,r,i=tabEditors.getPages();for(var s=0;s<t.length;s++)n=tabEditors.getPage(t[s].getAttribute("path")),!r&&(r=i[i.length-1]==n),l.close(n)}),lstOpenFiles.addEventListener("click",function(e){if(e.htmlEvent.target.tagName=="SPAN"){var t=apf.xmldb.findXmlNode(e.htmlEvent.target.parentNode.parentNode),n=tabEditors.getPage(t.getAttribute("path"));l.close(n)}}),r.addEventListener("tab.afterswitch",function(t){var n=t.nextPage;if(n&&n.$model.data){var r=e.model.queryNode("file[@path="+s.escapeXpathString(n.$model.data.getAttribute("path"))+"]");r&&!lstOpenFiles.isSelected(r)&&lstOpenFiles.select(r)}})},show:function(e){return!this.panel||!this.panel.visible?(u.activate(this),this.enable()):u.deactivate(null,!0),!1},destroy:function(){f.removeCommandByName("openfilepanel"),u.unregister(this),this.$destroy()}})}),define("text!ext/save/save.css",[],function(){return".lbl_saveas {\n    font-weight: bold;\n    color: #323232;\n}\n.lbl_filepath {\n    padding-left: 7px;\n    font-size: 11px;\n    color: #bababa;\n    text-shadow: rgba(255, 255, 255, 1) 0px 1px 0px;\n}\n\n.trDgLike .item-fix:nth-child(4n-1) {\n    background-color: #f1f0f1;\n}\n.trDgLike .item-fix:nth-child(4n+1) {\n    background-color: #fefdfe;\n}\n\n.trDgLike .item-fix.root {\n    background-color: #fefdfe;\n}\n\n.dgLikeContaier {\n    background-color: white;\n    border: 1px solid #C3C3C3;\n    color: #333333;\n    cursor: default;\n    font-family: Tahoma, Arial;\n    font-size: 8pt;\n    overflow: hidden;\n    position: relative;\n    height: 210px;\n}\n\n.dgLikeContaier .heading {\n    position : relative;\n    top : 0;\n    left : 0;\n    height : 20px;\n    z-index : 10;\n    /*padding-left : 5px;*/\n    background-color : #e6e6e6;\n    margin : 0 0 0 0;\n    white-space : nowrap;\n    \n    display : inline-block;\n    background : -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(229,229,229)),color-stop(1, rgb(248,248,248)));\n    background: -moz-linear-gradient(center bottom,rgb(229,229,229) 0%,rgb(248,248,248) 100%);\n    overflow : hidden;\n    text-overflow : ellipsis;\n    color: #333;\n    border-bottom: 1px solid #BFBFBF;\n\n    padding : 2px 4px 1px 3px;\n    display : block;\n    height : 15px;\n    text-decoration : none;\n    border-left : 1px solid white;\n    border-right : none;\n    border-top : 1px solid white;\n}\n\n.hidefiles .file_item {\n    display: none;\n}"}),define("text!ext/save/save.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:script><![CDATA[\n        function filesort(value, args, xmlNode) {\n            return (xmlNode.tagName == "folder" ? 0 : 1) + value.toLowerCase();\n        }\n    ]]></a:script>\n    <a:window\n      id        = "winCloseConfirm"\n      title     = "Save this file?"\n      icon      = ""\n      center    = "true"\n      render    = "runtime"\n      width     = "512"\n      skin      = "bk-window2"\n      draggable = "true"\n      class     = "relative"\n      onkeydown = "\n        if(event.keyCode == 89) {\n            btnSaveYes.dispatchEvent(\'click\', {htmlEvent: {}});\n        }\n        if(event.keyCode == 78) {\n            btnSaveNo.dispatchEvent(\'click\', {htmlEvent: {}});\n        }\n      ">\n        <a:vbox id="fileDesc" padding="10" edge="15 20 25 20">\n            \n        </a:vbox>\n\n        <a:hbox edge="6 10 10" pack="end" padding="8">\n            <a:button id="btnYesAll" caption="Yes to all" skin="btn-default-css3" />\n            <a:button id="btnNoAll" caption="No to all" skin="btn-default-css3"/>\n            <a:filler />\n            <a:button id="btnSaveYes" default="3" class="btn-green" caption="Yes" skin="btn-default-css3"/>\n            <a:button id="btnSaveNo" class="btn-red" caption="No" skin="btn-default-css3"/>\n            <a:button id="btnSaveCancel" skin="btn-default-css3">Cancel</a:button>\n        </a:hbox>\n    </a:window>\n\n    <a:script><![CDATA[\n        function chooseSaveAsFolder(folder) {\n            var fooPath = folder.getAttribute("path");\n            if (folder.getAttribute("type") != "folder" && folder.tagName != "folder") {\n                var fooPath = fooPath.split("/");\n                txtSaveAs.setValue(fooPath.pop());\n                fooPath = fooPath.join("/");\n            }\n            lblPath.setProperty(\'caption\', fooPath + \'/\');\n        }\n    ]]></a:script>\n\n    <a:window\n      id        = "winSaveAs"\n      center    = "true"\n      height    = "395"\n      icon      = ""\n      buttons   = "close"\n      skin      = "bk-window2"\n      kbclose   = "true"\n      resizable = "true"\n      title     = "Save As"\n      onshow    = "require(\'ext/save/save\').expandTree();"\n      width     = "480"\n      draggable = "true">\n        <a:vbox\n          anchors   = "10 10 0 10"\n          padding   = "5">\n            <a:hbox\n              align     = "center"\n              padding   = "5">\n                <a:label class="lbl_saveas">Save as:</a:label>\n                <a:textbox\n                  id           = "txtSaveAs"\n                  flex         = "7"\n                  focusselect  = "true"\n                  onkeydown    = "if (event.keyCode == 13) require(\'ext/save/save\').choosePath(lblPath.getProperty(\'caption\') + this.getValue())" />\n            </a:hbox>\n            <a:hbox\n              align     = "center"\n              padding   = "5">\n                <a:label class="lbl_saveas">Where:</a:label>\n                <a:label id="lblPath" class="lbl_filepath" />\n            </a:hbox>\n            \n            <div class="dgLikeContaier"  flex="1">\n                <div class="heading">Project folder</div>\n                <a:hbox\n                  anchors  = "20 0 0 0"\n                  overflow = "hidden">\n                    <a:tree\n                      id            = "trSaveAs"\n                      class         = "trDgLike"\n                      flex          = "1"\n                      scrollbar     = "sbShared 2 2 2"\n                      model         = "{require(\'ext/filesystem/filesystem\').model}"\n                      contextmenu   = "mnuCtxSaveTree"\n                      canrename     = "true"\n                      onafterselect = "chooseSaveAsFolder(this.selected)"\n                      onafterchoose = "chooseSaveAsFolder(this.selected)">\n                        <a:each match="[project|file|folder]" sort="[@name]" sort-method="filesort">\n                           <a:insert\n                             match = "[folder]"\n                             get   = "{location.host &amp;&amp; davProject.readdir([@path])}" />\n                           <a:caption match="[@name]" />\n                           <a:icon\n                             match = "[folder]"\n                             value = "folder.png" />\n                           <a:icon\n                             match = "[file]"\n                             value = "{require(\'core/util\').getFileIcon(%[.])}" />\n                           <a:css match="[file]" value="file_item"></a:css>\n                        </a:each>\n                        <a:add type="folder" get="{davProject.mkdir([@path], \'New Folder\')}" />\n                        <a:add type="file" get="{davProject.create([@path], \'New File.txt\', \'\')}" />\n                        <a:rename match="[file|folder[not(@root)]]" set="{require(\'ext/save/save\').renameFile(%[.])}" />\n                        <a:copy match="[file|folder]" set="{davProject.copy([@path], [../@path])}"/>\n                        <a:move set="{davProject.move([@path], [../@path])}"/>\n                        <a:remove match="[file|folder]" set="{require(\'ext/filesystem/filesystem\').remove([@path])}"/>\n\n                        <a:drag match="[folder|file]" />\n                        <a:drop match="[folder|file]" target="[folder]"\n                            action="tree-append" copy="{event.ctrlKey}" />\n                    </a:tree>\n                </a:hbox>\n            </div> \n            <a:hbox padding="15" align="center">\n                <a:button\n                  width    = "104"\n                  icon     = "folder_new.png"\n                  class    = "btnIconOnly smallCaption newFolder"\n                  onclick  = "require(\'ext/filesystem/filesystem\').createFolder(\'New Folder\', trSaveAs)"\n                  tooltip  = "Create folder">\n                    Create folder\n                </a:button>\n                <a:filler />\n                <a:checkbox\n                  skin    = "checkbox_grey"\n                  checked = "true"\n                  width   = "120"\n                  margin  = "4 0 0"\n                  onafterchange="\n                    if(this.checked)\n                        trSaveAs.$ext.className = trSaveAs.$ext.className.replace(/hidefiles/, \'\');\n                    else\n                        apf.setStyleClass(trSaveAs.$ext, \'hidefiles\');\n                  ">Show files in tree</a:checkbox>\n            </a:hbox>\n            \n            <a:hbox edge="23 0 10" pack="end" padding = "8">\n                <a:button\n                  skin     = "btn-default-css3"\n                  caption  = "Cancel"\n                  margin   = "0 10 0 0"\n                  onclick  = "winSaveAs.hide()"\n                />\n                <a:button\n                  class   = "btn-green"\n                  caption = "Save"\n                  default  = "2"\n                  margin = "0 0 0 10"\n                  skin = "btn-default-css3"\n                  onclick = "require(\'ext/save/save\').confirmSaveAs()"\n                />\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n    <a:menu id="mnuCtxSaveTree" disabled="{{!stServerConnected.active}}" render="runtime">\n        <a:item match="[file|folder[not(@root)]]" onclick="trSaveAs.startRename()">Rename</a:item>\n        <a:item match="[file|folder[not(@root)]]" onclick="trSaveAs.remove()">Delete</a:item>\n        <a:divider />\n        <a:item id="itemCtxTreeNewFile" match="[file|folder|project]" onclick="\n            require(\'ext/filesystem/filesystem\').createFile(\'Untitled\', null, trSaveAs);\n        ">New File</a:item>\n        <a:item match="[file|folder|project]" onclick="\n            require(\'ext/filesystem/filesystem\').createFolder(\'New Folder\', trSaveAs);\n        ">New Folder</a:item>\n    </a:menu>\n</a:application>\n'}),define("ext/save/save",["require","exports","module","core/ide","core/ext","core/util","ext/filesystem/filesystem","text!ext/save/save.css","ext/menus/menus","text!ext/save/save.xml","ext/commands/commands"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("ext/filesystem/filesystem"),u=e("text!ext/save/save.css"),a=e("ext/menus/menus"),f=e("text!ext/save/save.xml"),l=e("ext/commands/commands"),c=0,h=1,p=2;n.exports=i.register("ext/save/save",{dev:"Ajax.org",name:"Save",alone:!0,type:i.GENERAL,markup:f,css:u,deps:[o],offline:!0,nodes:[],saveBuffer:{},hook:function(){var e=this;l.addCommand({name:"quicksave",hint:"save the currently active file to disk",bindKey:{mac:"Command-S",win:"Ctrl-S"},isAvailable:function(e){return!!e},exec:function(){e.quicksave()}}),l.addCommand({name:"saveas",hint:"save the file to disk with a different filename",bindKey:{mac:"Command-Shift-S",win:"Ctrl-Shift-S"},isAvailable:function(e){return!!e},exec:function(){e.saveas()}}),l.addCommand({name:"saveall",hint:"downgrade the currently active file to the last saved version",isAvailable:function(e){return!!e},exec:function(){e.saveall()}}),l.addCommand({name:"reverttosaved",bindKey:{mac:"Ctrl-Shift-Q",win:"Ctrl-Shift-Q"},isAvailable:function(e){return!!e},exec:function(){e.reverttosaved()}}),r.addEventListener("init.ext/editors/editors",function(){tabEditors.addEventListener("close",e.$close=function(t){var n=t.page.$at,s=t.page.$doc.getNode();if(s&&s.getAttribute("deleted"))return;if(s&&(n&&n.undo_ptr&&n.$undostack[n.$undostack.length-1]!==n.undo_ptr||!n.undo_ptr&&s.getAttribute("changed")==1)&&(!s.getAttribute("newfile")||t.page.$doc.getValue())){i.initExtension(e);if(r.dispatchEvent("beforesavewarn",{page:t.page,doc:t.page.$doc})===!1)return;var o=tabEditors.getPages(),u=o.indexOf(t.page);tabEditors.set(o[u].id);var a=s.getAttribute("path").replace(r.workspaceDir,"").replace(r.davPrefix,"");winCloseConfirm.page=t.page,winCloseConfirm.all=-100,winCloseConfirm.show(),fileDesc.replaceMarkup("<div><h3>Save "+apf.escapeXML(a)+"?</h3><div>This file has unsaved changes. Your changes will be lost if you don't save them.</div></div>",{noLoadingMsg:!1}),winCloseConfirm.addEventListener("hide",function(){if(winCloseConfirm.all!=-100){var t=function(e){var t;if(!(t=winCloseConfirm.page))return;delete winCloseConfirm.page,delete t.noAnim,t.dispatchEvent("aftersavedialogclosed"),tabEditors.remove(t,!0,t.noAnim),e&&t.$at.undo(-1)};winCloseConfirm.all==-200?e.quicksave(winCloseConfirm.page,t):t(!0)}else tabEditors.dispatchEvent("aftersavedialogcancel");winCloseConfirm.removeEventListener("hide",arguments.callee)}),btnYesAll.hide(),btnNoAll.hide(),t.preventDefault()}},!0)}),this.nodes.push(a.$insertByIndex(barTools,new apf.button({id:"btnSave",icon:"save.png",caption:"Save",tooltip:"Save",skin:"c9-toolbarbutton-glossy",disabled:"{!!!tabEditors.activepage}",command:"quicksave"}),1e3));var t,n,s;this.nodes.push(t=a.addItemByPath("File/Save",new apf.item({command:"quicksave",disabled:"{!!!tabEditors.activepage}"}),1e3),n=a.addItemByPath("File/Save As...",new apf.item({command:"saveas",disabled:"{!!!tabEditors.activepage}"}),1100),a.addItemByPath("File/Save All",new apf.item({command:"saveall",disabled:"{!!!tabEditors.activepage}"}),1200),s=a.addItemByPath("File/Revert to Saved",new apf.item({command:"reverttosaved",disabled:"{!!!tabEditors.activepage}"}),700)),r.addEventListener("afterreload",function(e){var t=e.doc,n=t.$page.$at;n.addEventListener("afterchange",function r(){n.removeEventListener("afterchange",r),n.undo_ptr=n.$undostack[n.$undostack.length-1],n.dispatchEvent("afterchange")})}),r.addEventListener("afteroffline",function(){e.disable()}),r.addEventListener("afteronline",function(){e.enable()}),r.addEventListener("fs.beforefilesave",function(){e.setUiStateSaving()}),r.addEventListener("fs.afterfilesave",function(t){t.success?e.setUiStateSaved():e.setUiStateOffline()})},init:function(e){this.fileDesc=winCloseConfirm.selectSingleNode("a:vbox"),apf.importCssString(this.css||""),winCloseConfirm.onafterrender=function(){btnYesAll.addEventListener("click",function(){winCloseConfirm.all=1,winCloseConfirm.hide()}),btnNoAll.addEventListener("click",function(){winCloseConfirm.all=-1,winCloseConfirm.hide()}),btnSaveYes.addEventListener("click",function(){winCloseConfirm.all=-200,winCloseConfirm.hide()}),btnSaveNo.addEventListener("click",function(){winCloseConfirm.all=0,winCloseConfirm.hide()}),btnSaveCancel.addEventListener("click",function(){winCloseConfirm.all=-100,winCloseConfirm.hide()})},winSaveAs.addEventListener("hide",function(){winSaveAs.page&&(tabEditors.remove(winSaveAs.page,!0),winSaveAs.page.$at.undo(-1),delete winSaveAs.page)}),trSaveAs.addEventListener("beforerename",this.$beforerename=function(e){if(!r.onLine&&!r.offlineFileSystemSupport)return!1;if(trSaveAs.$model.data.firstChild==trSaveAs.selected)return!1;var t=e.args[0].getAttribute("path"),n=t.replace(/^(.*\/)[^\/]+$/,"$1"+e.args[1]).toLowerCase(),i,u=trSaveAs.getModel().queryNodes(".//node()");for(var a=0,f=u.length;a<f;a++){var l=u[a].getAttribute("path").toLowerCase();if(u[a]!=e.args[0]&&l===n){i=!0;break}}if(i)return s.alert("Error","Unable to Rename","That name is already taken. Please choose a different name."),trSaveAs.getActionTracker().undo(),!1;o.beforeRename(e.args[0],e.args[1])})},reverttosaved:function(){r.dispatchEvent("reload",{doc:r.getActivePage().$doc})},saveall:function(){var e=this;tabEditors.getPages().forEach(function(t){e.quicksave(t)})},saveAllInteractive:function(e,t){i.initExtension(this),winCloseConfirm.all=0;var n=this;apf.asyncForEach(e,function(t,r){var i=t.$at;if(i.undo_ptr&&i.$undostack[i.$undostack.length-1]!==i.undo_ptr){winCloseConfirm.all==1&&n.quicksave(t);if(winCloseConfirm.all)return r();tabEditors.set(t),winCloseConfirm.page=t,winCloseConfirm.show(),winCloseConfirm.addEventListener("hide",function(){winCloseConfirm.all==1&&n.quicksave(t),winCloseConfirm.removeEventListener("hide",arguments.callee),r()}),btnYesAll.setProperty("visible",e.length>1),btnNoAll.setProperty("visible",e.length>1)}else r()},function(){t(winCloseConfirm.all)})},ideIsOfflineMessage:function(){s.alert("Could not save","Please check your connection","When your connection has been restored you can try to save the file again.")},quicksave:function(e,t,n){if(!e||!e.$at)e=r.getActivePage();if(!e)return;typeof t!="function"&&(t=null);var i=r.dispatchEvent("correctactivepage",{page:e});i&&(e=i);var u=e.$doc,a=u.getNode(),f=a.getAttribute("path");if(a.getAttribute("debug"))return;if(r.dispatchEvent("beforefilesave",{node:a,doc:u})===!1)return;if(a.getAttribute("newfile")&&!a.getAttribute("cli")&&!a.getAttribute("ignore")!=="1"){this.saveas(e,t);return}if(!r.onLine)return this.ideIsOfflineMessage();var l=this,c=u.getValue();if(typeof c=="undefined")return;var h=parseInt(a.getAttribute("saving"),10);if(h){this.saveBuffer[f]=e;return}apf.xmldb.setAttribute(a,"saving","1"),t&&r.addEventListener("afterfilesave",function(e){e.node==a&&(t(),r.removeEventListener("afterfilesave",arguments.callee))}),r.dispatchEvent("fs.beforefilesave",{path:f,node:a,doc:u});var p=e.$at,d=p.$undostack[p.$undostack.length-1];return o.saveFile(f,c,function(t,i,o){r.dispatchEvent("track_action",{type:"save as filetype",fileType:a.getAttribute("name").split(".").pop().toLowerCase(),success:i!=apf.SUCCESS?"false":"true"}),apf.xmldb.removeAttribute(a,"saving"),r.dispatchEvent("fs.afterfilesave",{path:f,success:i==apf.SUCCESS});if(i!=apf.SUCCESS){if(!r.onLine||r.connection.away){if(n)return;return l.ideIsOfflineMessage()}return s.alert("Could not save document","An error occurred while saving this document","Please see if your internet connection is available and try again. "+(i==apf.TIMEOUT?"The connection timed out.":"The error reported was "+o.message))}p.undo_ptr=d,e.$at.dispatchEvent("afterchange"),r.dispatchEvent("afterfilesave",{node:a,doc:u,value:c,oldpath:f,silentsave:n}),p.undo_ptr==p.$undostack[p.$undostack.length-1]&&apf.xmldb.removeAttribute(a,"changed"),apf.xmldb.removeAttribute(a,"new"),apf.xmldb.setAttribute(a,"modifieddate",apf.queryValue(o.data,"//d:getlastmodified")),l.saveBuffer[f]&&(delete l.saveBuffer[f],l.quicksave(e))}),!1},_saveAsNoUI:function(e,t,n,i){if(!e||!t)return;n=n||t;var u=e.$model.data,a=u,f=a.getAttribute("path"),l=parseInt(u.getAttribute("saving"),10);if(l){this.saveBuffer[t]=e;return}apf.xmldb.setAttribute(u,"saving","1");var c=this,h=e.$doc.getValue();o.saveFile(n,h,function(l,h,p){if(h!==apf.SUCCESS)return apf.xmldb.removeAttribute(u,"saving"),s.alert("Could not save document","An error occurred while saving this document","Please see if your internet connection is available and try again.The server responded with status "+p.status+".");var d=e.$model,v=d.getXml(),m=e.$doc;if(t!==n||parseInt(v.getAttribute("newfile")||0,10)===1)u=apf.getCleanCopy(v),o.beforeRename(u,null,n,!1,i),m.setNode(u),d.load(u),tabEditors.set(r.getActivePage());apf.xmldb.removeAttribute(a,"saving"),apf.xmldb.removeAttribute(u,"saving"),c.saveBuffer[t]&&(delete c.saveBuffer[t],c._saveAsNoUI(e));if(parseInt(u.getAttribute("newfile")||"0",10)===1){apf.xmldb.removeAttribute(u,"newfile"),apf.xmldb.removeAttribute(u,"changed");var g=n.replace(new RegExp("/"+window.cloud9config.davPrefix.split("/")[1]),"").replace(new RegExp("/"+u.getAttribute("name")),"").replace(/\/([^/]*)/g,'/node()[@name="$1"]').replace(/\/node\(\)\[@name="workspace"\]/,"").replace(/\//,"")||"node()";if(self.trFiles&&g){var y=trFiles.queryNode(g);y&&!trFiles.queryNode("//node()[@path="+s.escapeXpathString(n)+"]")&&apf.xmldb.appendChild(y,u)}}r.dispatchEvent("afterfilesave",{node:v,doc:m,value:l,oldpath:f,silentsave:!1})});var p=e.$at;p.undo_ptr=p.$undostack[p.$undostack.length-1],e.$at.dispatchEvent("afterchange",{newPath:n})},choosePath:function(e,t){o.list((e.match(/(.*)\/[^/]*/)||{})[1]||e,function(t,n,r){(new RegExp("<folder.*"+e+".*>")).test(t)&&(e=e.replace(new RegExp("/"+window.cloud9config.davPrefix.split("/")[1]),"").replace(/\/([^/]*)/g,'/node()[@name="$1"]').replace(/\/node\(\)\[@name="workspace"\]/,"").replace(/\//,""),trSaveAs.expandList([e],function(){var t=trSaveAs.getModel().data.selectSingleNode(e);trSaveAs.select(t)}))})},saveas:function(e,t){if(!e||!e.$at)e=r.getActivePage();if(!e)return;var n=e?e.$model.data.getAttribute("path"):!1;if(!n)return;i.initExtension(this);if(t){var s=e.$doc;r.addEventListener("afterfilesave",function(e){e.doc==s&&(t(),r.removeEventListener("afterfilesave",arguments.callee))})}var o=n.split("/");txtSaveAs.setValue(o.pop()),lblPath.setProperty("caption",o.join("/")+"/"),winSaveAs.show()},confirmSaveAs:function(e){e=e||r.getActivePage();var t=e.$model.data,n=t.getAttribute("path"),i=lblPath.getProperty("caption")+txtSaveAs.getValue(),u=!1,a=parseInt(t.getAttribute("saving"),10);if(a){this.saveBuffer[n]=e;return}var f=this,l=function(){winSaveAs.hide(),f._saveAsNoUI(e,n,i,u),window.winConfirm&&(winConfirm.hide(),window.btnConfirmOk&&btnConfirmOk.caption=="Yes"&&btnConfirmOk.setCaption("Ok"))},c=function(){window.winConfirm&&btnConfirmOk.caption=="Yes"&&btnConfirmOk.setCaption("Ok")};n!==i||parseInt(t.getAttribute("newfile")||0,10)===1?o.exists(i,function(e){if(e){var t=i.match(/\/([^/]*)$/)[1];u=!0,s.confirm("A file with this name already exists",'"'+t+'" already exists, do you want to replace it?',"A file with the same name already exists at this location.Selecting Yes will overwrite the existing document.",l,c),btnConfirmOk.setCaption("Yes")}else l()}):l()},expandTree:function(){function t(){var t=r.getActivePage(),n=t?t.$model.data.getAttribute("path"):!1,i=t?t.$model.data.getAttribute("newfile"):!1;i?trSaveAs.slideOpen(null,trSaveAs.getModel().data.selectSingleNode("//folder")):e.choosePath(n)}var e=this;trSaveAs.getModel()?t():trSaveAs.addEventListener("afterload",t)},renameFile:function(e){var t=e.getAttribute("path"),n=e.getAttribute("oldpath");davProject.rename(n,t,!0,!1,function(i,s,o){if(s!==apf.SUCCESS)return;r.dispatchEvent("afterupdatefile",{path:n,newPath:t,xmlNode:e,isFolder:e.getAttribute("type")==="folder"})})},setUiStateSaving:function(){btnSave.show(),apf.setStyleClass(btnSave.$ext,"saving",["saved","error"]),apf.setStyleClass(saveStatus,"saving",["saved"]),btnSave.currentState=c,btnSave.setCaption("Saving")},$uiStateSavedTimeout:null,setUiStateSaved:function(){var e=this;btnSave.show(),apf.setStyleClass(btnSave.$ext,"saved",["saving","error"]),apf.setStyleClass(saveStatus,"saved",["saving"]),btnSave.currentState=h,btnSave.setCaption("Changes saved"),e.$uiS$uiStateSavedTimeout&&clearTimeout(e.$ui$uiStateSavedTimeout),e.$uiStateSavedTimeout=setTimeout(function(){btnSave.currentState===h&&btnSave.hide()},4e3)},setUiStateOffline:function(){btnSave.show(),apf.setStyleClass(btnSave.$ext,"saved"),apf.setStyleClass(btnSave.$ext,"error",["saving"]),btnSave.currentState=p,btnSave.setCaption("Not saved")},destroy:function(){a.remove("File/~",1100),a.remove("File/Save All"),a.remove("File/Save As..."),a.remove("File/Save"),a.remove("File/~",800),a.remove("File/Revert to Saved"),l.removeCommandsByName(["quicksave","saveas","saveall","reverttosaved"]),tabEditors.removeEventListener("close",this.$close,!0),this.$destroy()}})}),define("ext/recentfiles/recentfiles",["require","exports","module","core/ide","core/ext","core/util","core/settings","ext/menus/menus","ext/editors/editors"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("core/settings"),u=e("ext/menus/menus"),a=e("ext/editors/editors");n.exports=i.register("ext/recentfiles/recentfiles",{dev:"Ajax.org",name:"Recent Files",alone:!0,type:i.GENERAL,offline:!1,nodes:[],init:function(){function t(t){var n=t.node||t.xmlNode;if(!n)return;if(t.name!="afterfilesave"&&n.getAttribute("newfile")==1)return;var r={caption:n.getAttribute("name"),value:n.getAttribute("path"),node:n};e.$add(r),o.save()}var e=this;this.nodes.push(this.menu=u.addItemByPath("File/Open Recent/",null,600),this.divider=u.addItemByPath("File/Open Recent/~",new apf.divider,1e6),u.addItemByPath("File/Open Recent/Clear Menu",new apf.item({onclick:function(){e.clearMenu()}}),2e6)),r.addEventListener("settings.load",function(t){var n=t.model,r=n.queryValue("auto/recentfiles");if(r){var i;try{i=JSON.parse(r)}catch(s){i=[]}e.clearMenu();for(var o=i.length-1;o>=0;o--)e.$add(i[o])}}),r.addEventListener("settings.save",function(t){if(!e.changed)return;var n=apf.createNodeFromXpath(t.model.data,"auto/recentfiles/text()"),r=[],i=e.menu.childNodes;for(var s=0;s<i.length;s++){if(i[s].localName!="item")break;r.push({caption:i[s].caption,value:i[s].value})}n.nodeValue=JSON.stringify(r)}),r.addEventListener("afteropenfile",t),r.addEventListener("afterfilesave",t),r.addEventListener("closefile",t)},$add:function(e){var t,n=this.menu.childNodes;for(var i=0;i<n.length;i++){if(n[i].nodeType!=1)continue;if(n[i].localName!="item")break;if(n[i].getAttribute("value")==e.value){t=n[i];break}}t?this.menu.insertBefore(t,this.menu.firstChild):e.caption&&e.value&&this.menu.insertBefore(new apf.item({caption:e.caption,value:e.value,onclick:function(){var t=apf.n("<file/>").attr("name",e.caption).attr("path",e.value).node();a.gotoDocument({doc:r.createDocument(t),origin:"recentfiles"})}}),this.menu.firstChild);while(this.menu.childNodes.length>12)this.divider.previousSibling.destroy(!0,!0);this.changed=!0;var s=this.menu.selectNodes("item");s.length==1?s[0].disable():s[s.length-1].enable()},clearMenu:function(){var e=this.menu.childNodes;for(var t=e.length-1;t>=0;t--){if(e[0].localName!="item")break;e[0].destroy(!0,!0)}this.menu.selectNodes("item")[0].disable()},destroy:function(){u.remove("File/Open Recent"),this.$destroy()}})}),define("text!ext/gotofile/gotofile.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="winGoToFile"\n      buttons   = "close" \n      width     = "500" \n      skin      = "winGoToFile"\n      minheight = "35"\n      maxheight = "400"\n      zindex    = "99999"\n      showtab   = "[{require(\'ext/settings/settings\').model}::auto/tabs/@show]"\n      top       = "6"\n      >\n        <a:vbox id="vboxGoToFile" edge="5 5 5 5" padding="5" anchors2="0 0 0 0">\n            <a:textbox id="txtGoToFile" realtime="true" skin="searchbox_textbox" focusselect="true" />\n            <a:list id="dgGoToFile"\n              class           = "searchresults noscrollbar"\n              skin            = "lineselect"\n              maxheight       = "350"\n              scrollbar       = "sbShared 32 7 7"\n              viewport        = "virtual"\n              multiselect     = "true"\n              loading-message = "Loading file list. One moment please..."\n              empty-message   = "No files found that match \'{txtGoToFile.value}\'">\n                <a:each match="[d:response/d:href]" />\n                <a:caption><?lm\n                    var gotofile = require(\'ext/gotofile/gotofile\');\n                    var value = gotofile.arraySearchResults[[text()]] || "";\n                    <span>{\n                        gotofile.replaceStrong(apf.getFilename(value), txtGoToFile.value);\n                    }</span>\n                    <span class="path">{gotofile.replaceStrong(value, txtGoToFile.value);}</span>\n                ?></a:caption>\n            </a:list>\n        </a:vbox>\n    </a:bar>\n\n    <a:window id = "winBlockGotoFile"\n      title   = "Can\'t Use GotoFile!"\n      icon      = ""\n      center    = "true"\n      kbclose   = "true"\n      buttons   = "close"\n      width     = "600"\n      skin      = "bk-window2"\n      render    = "runtime"\n      class     = "relative"\n      model     = "true">\n        <a:vbox padding="10" edge="15 20 25 20">\n            <h4>Generic workspaces can\'t use gotofile!</h4>\n            <p>Due to the size of your filesystem, we can\'t launch gotofile. In the future, we will provide an update to resolve this limitation.</p>\n            <p>Smaller workspaces and folders can continue to use gotofile.</p>\n       </a:vbox>\n        <a:hbox edge="6 10 10" pack="end" padding="8">\n            <a:button onclick = "winBlockGotoFile.close();" skin="btn-default-css3" class="btn-green">Got it</a:button>\n        </a:hbox>\n    </a:window>\n</a:application>'}),define("ext/gotofile/heap",["require","exports","module"],function(e,t,n){"use strict";function r(e){var t;Array.isArray(e)?(t=e.slice(),t.unshift(null)):t=[null],this.pq=t,this.__defineGetter__("N",function(){return t.length-1});for(var n=Math.floor(this.N/2);n>=1;n--)this.sink(n)}(function(){this.empty=function(){return this.N===0},this.size=function(){return this.N},this.min=function(){if(this.empty())throw new Exception("Priority queue underflow");return this.pq[1]},this.push=function(e){this.pq.push(e),this.heapify(this.N)},this.pop=function(){if(this.empty())throw new Exception("Priority queue underflow");this.$exch(1,this.N);var e=this.pq.splice(this.pq.length-1,1)[0];return this.sink(1),e},this.heapify=function(e){while(e>1&&this.$greater(Math.floor(e/2),e))this.$exch(e,Math.floor(e/2)),e=Math.floor(e/2)},this.sink=function(e){while(2*e<=this.N){var t=2*e;t<this.N&&this.$greater(t,t+1)&&t++;if(!this.$greater(e,t))break;this.$exch(e,t),e=t}},this.$exch=function(e,t){var n=this.pq[e];this.pq[e]=this.pq[t],this.pq[t]=n},this.$greater=function(e,t){return this.pq[e]>this.pq[t]}}).call(r.prototype),n.exports=r}),define("ext/gotofile/search",["require","exports","module","./heap"],function(e,t,n){var r=e("./heap"),i={js:1,json:11,css:5,less:5,scss:5,sass:5,xml:11,rdf:15,rss:15,svg:5,wsdl:11,xslt:5,atom:5,mathml:5,mml:5,php:1,phtml:1,html:5,xhtml:5,coffee:1,py:1,ru:1,gemspec:5,rake:5,rb:1,c:1,cc:1,cpp:1,cxx:1,h:2,hh:2,hpp:2,cs:1,java:1,clj:1,groovy:1,logic:1,lql:1,scala:1,ml:1,mli:1,md:2,markdown:2,textile:5,latex:5,tex:5,ltx:5,lua:1,pl:1,pm:2,ps1:1,cfm:1,sql:2,sh:1,bash:1,bmp:10,djv:10,djvu:10,gif:10,ico:10,jpg:10,jpeg:10,pbm:10,pgm:10,png:10,pnm:10,ppm:10,psd:10,tiff:10,xbm:10,xpm:10,go:5,hx:5,yaml:5,psql:2};n.exports.fileSearch=function(e,t){var n=t.length,s=new Date,u="value",a=function(){return this[u]},f,l=n<3?[]:new r,c,h;for(var p=0,d=e.length,v,m,g,y,b,w,E;p<d;p++){f=e[p],c=0;if((m=f.lastIndexOf(t))>-1){if(n<3){l.push(f);continue}m>(y=f.lastIndexOf("/"))?(g=f.lastIndexOf("/"+t),g>-1&&(f.length==n+1+g?c+=1e3:f.lastIndexOf(".")==g+n+1?c+=201:g==y?c+=200:c+=100),c+=200-Math.min(f.split("/").length*10,150)):c+=50}else{if(n<4||f.split("/").length>5)continue;var S="",x;x=o(f,t);if(!x.length||x.length>10)continue;var T=f.substring(x[0].val.length);c+=20-Math.min((x.length-2)*3,19),c+=15-Math.min(f.split("/").length*2,14),c+=10-Math.min(T.length-t.length,9),c+=20}c>0&&(v=f.lastIndexOf("."),v>-1?c-=10*(i[f.substr(v+1)]||0)||20:c-=20,l.size()===100&&c>l.min().value&&l.pop(),l.size()<100&&l.push({toString:a,value:c,name:f}))}if(n<3)return l;var N=[];while(l.size())N.unshift(l.pop().name);return N};var s=n.exports.treeSearch=function(e,t,n,r,i){n&&(t=t.toLowerCase()),r=r||[],i=i||0;for(var o=0;o<e.length;o++){var u=e[o],a=u.name;n&&(a=a.toLowerCase());var f=a.indexOf(t);if(f===-1){u.items&&(r=s(u.items,t,n,r,i));continue}var l={items:u.items?s(u.items,t,n):[]};for(var c in u)u.hasOwnProperty(c)&&c!=="items"&&(l[c]=u[c]);f===0?(r.splice(i,0,l),i++):r.push(l)}return r},o=n.exports.matchPath=function(e,t){var n=[],r=e.split("/");r.length>4&&(r=[r.slice(0,r.length-4).join("/")+"/"].concat(r.slice(r.length-4,r.length)));var i="",s,o,u=-1;for(s=r.length-1;s>=0&&!n.length;s--){i=(s>0?"/":"")+r[s]+i;var a=null,f=null;for(o=0,u=0;o<i.length&&u<t.length;o++)i[o]===t[u]?(a=a===null?o:a,u++,f!==null&&(n.push({val:i.substring(f,o)}),f=null)):(f=f===null?o:f,a!==null&&(n.push({match:!0,val:i.substring(a,o)}),a=null));if(u!==t.length){n=[];continue}f!==null&&n.push({val:i.substring(f,o)}),a!==null&&n.push({match:!0,val:i.substring(a,o)}),n.push({val:i.substring(o,i.length)}),s&&n.unshift({val:r.slice(0,s).join("/")})}return n}}),define("ext/filelist/filelist",["require","exports","module","core/ide","core/ext","core/util"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util");n.exports=i.register("ext/filelist/filelist",{name:"File List",dev:"Ajax.org",type:i.GENERAL,alone:!0,queue:[],autodisable:i.ONLINE|i.LOCAL,getFileList:function(e,t){var n=this;if(!e&&this.cached)return t(this.cached,apf.SUCCESS);this.queue.push(t);if(this.retrieving)return;this.cached="",apf.ajax(r.apiPrefix+"/fs/list?path=&showHiddenFiles=0",{method:"GET",callback:function(e,t,r){n.cached=e||r.http.responseText,n.retrieving=!1;var i=n.queue;i.forEach(function(n){n(e,t)}),n.queue=[]}}),this.retrieving=!0}})}),define("ext/gotofile/gotofile",["require","exports","module","core/ide","core/ext","ext/menus/menus","ext/commands/commands","ext/editors/editors","text!ext/gotofile/gotofile.xml","ext/gotofile/search","ext/filelist/filelist","ext/anims/anims","ext/themes/themes"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ext/menus/menus"),o=e("ext/commands/commands"),u=e("ext/editors/editors"),a=e("text!ext/gotofile/gotofile.xml"),f=e("ext/gotofile/search"),l=e("ext/filelist/filelist"),c=e("ext/anims/anims"),h=e("ext/themes/themes");n.exports=i.register("ext/gotofile/gotofile",{name:"Go To File",dev:"Ajax.org",alone:!0,offline:!1,type:i.GENERAL,markup:a,autodisable:i.ONLINE|i.LOCAL,eventsEnabled:!0,dirty:!0,nodes:[],arraySearchResults:[],arrayCache:[],isGeneric:window.cloud9config.local&&window.cloud9config.workspaceId&&window.cloud9config.workspaceId=="generic",hook:function(){var e=this,t=new apf.item({command:"gotofile"});o.addCommand({name:"gotofile",hint:"search for a filename and jump to it",bindKey:{mac:"Command-E",win:"Ctrl-E"},exec:function(){e.isGeneric?(i.initExtension(e),winGoToFile.visible=!0,winGoToFile.hide(),winBlockGotoFile.show()):e.toggleDialog(1)}}),this.nodes.push(s.addItemByPath("File/Open...",t,500),s.addItemByPath("Goto/Goto File...",t.cloneNode(!1),100),this.model=new apf.model),r.addEventListener("init.ext/editors/editors",this.$initEditorExt=function(){e.markupInsertionPoint=tabEditors}),r.addEventListener("extload",this.$extLoad=function(){e.isGeneric||e.updateFileCache()}),r.addEventListener("closefile",this.$closeFile=function(){setTimeout(function(){e.updateWinPos()})}),r.addEventListener("newfile",this.$newFile=function(){e.updateFileCache(!0)}),r.addEventListener("removefile",this.$removeFile=function(){e.updateFileCache(!0)})},setEventsEnabled:function(e){this.eventsEnabled=e},init:function(){var e=this;txtGoToFile.addEventListener("keydown",function(t){if(!e.eventsEnabled)return;if(t.keyCode==27)e.toggleDialog(-1);else{if(t.keyCode==13)return e.openFile(!0),r.dispatchEvent("track_action",{type:"gotofile"}),!1;if(dgGoToFile.xmlRoot)if(t.keyCode==38&&dgGoToFile.viewport.length){if(dgGoToFile.selected==dgGoToFile.$cachedTraverseList[0])return;var n=dgGoToFile.getNextTraverseSelected(dgGoToFile.selected,!1);n&&(dgGoToFile.select(n,t.ctrlKey,t.shiftKey),dgGoToFile.focus(),t.preventDefault())}else if(t.keyCode==40&&dgGoToFile.viewport.length&&dgGoToFile.selected){var i=dgGoToFile.getNextTraverseSelected(dgGoToFile.selected);i&&(dgGoToFile.select(i,t.ctrlKey,t.shiftKey),dgGoToFile.focus(),t.preventDefault())}}}),txtGoToFile.addEventListener("afterchange",function(t){if(!e.eventsEnabled)return;e.filter(txtGoToFile.value),e.dirty&&txtGoToFile.value.length>0&&e.model.data&&(e.dirty=!1,e.updateFileCache(!0))}),dgGoToFile.addEventListener("keydown",function(t){t.keyCode==27&&e.toggleDialog(-1);if(t.keyCode==9)txtGoToFile.focus(),t.preventDefault();else if(t.keyCode==38&&!t.shiftKey)this.selected==this.$cachedTraverseList[0]&&txtGoToFile.focus();else{if(t.keyCode==13)return e.openFile(!0),!1;if(apf.isCharacter(t.keyCode)){txtGoToFile.focus();return}}t.preventDefault()},!0),apf.addListener(dgGoToFile.$ext,"mouseup",function(t){e.openFile()}),winGoToFile.addEventListener("blur",function(t){winGoToFile.visible&&!apf.isChildOf(winGoToFile,t.toElement)&&e.toggleDialog(-1)}),winGoToFile.addEventListener("prop.visible",function(t){t.value&&e.updateWinPos()}),txtGoToFile.addEventListener("blur",function(t){self.winGoToFile&&winGoToFile.visible&&!apf.isChildOf(winGoToFile,t.toElement)&&e.toggleDialog(-1)}),r.addEventListener("closepopup",this.$closepopup=function(t){t.element!=e&&e.toggleDialog(-1,!0)}),r.addEventListener("beforewatcherchange",this.$beforewatcherchange=function(){e.dirty=!0}),this.updateDatagrid(!0),this.nodes.push(winGoToFile),this.updateWinPos()},updateWinPos:function(){if(!window.winGoToFile)return;!r.getActivePage()||!h.isDark?(winGoToFile.setProperty("top",0),vboxGoToFile.setProperty("edge","5 5 5 5"),winGoToFile.$ext.style.top=0):(winGoToFile.setProperty("top",6),vboxGoToFile.setProperty("edge","1 5 5 5"),winGoToFile.$ext.style.top="6px")},windowVisible:function(e,t){var n=this;if(e){var r=n.lastSearch;n.lastSearch=null;var i=[];dgGoToFile.getSelection().forEach(function(e){var t=e.firstChild.nodeValue;i.push(n.arraySearchResults[t])});var s={sel:i,caret:dgGoToFile.caret&&n.arraySearchResults[dgGoToFile.caret.firstChild.nodeValue],scrollTop:dgGoToFile.$viewport.getScrollTop()};n.model.load(t),n.filter(r,s.sel.length);if(s.sel.length&&s.sel.length<100){var o=[];i=s.sel;for(var u=0,a=i.length;u<a;u++)o.push(dgGoToFile.queryNode("//d:href[text()='"+n.arraySearchResults.indexOf(i[u])+"']"));dgGoToFile.selectList(o),s.caret&&dgGoToFile.setCaret(dgGoToFile.queryNode("//d:href[text()='"+n.arraySearchResults.indexOf(s.caret)+"']")),dgGoToFile.$viewport.setScrollTop(s.scrollTop)}}},updateFileCache:function(e){var t=this;l.getFileList(e,function(e,n){if(n!=apf.SUCCESS)return;var r=e.replace(/^\./gm,"").split("\n");r.pop();var i="<d:href>",s="</d:href>",o=s+i,u=r.length,a=0,f=[];while(a<u)f.push(a++);e=apf.getXml("<d:multistatus  xmlns:d='DAV:'><d:response>"+i+f.join(o)+s+"</d:response></d:multistatus>"),t.arrayCache=r;if(self.winGoToFile&&t.lastSearch)if(!winGoToFile.visible){var l;winGoToFile.addEventListener("prop.visible",l=function(n){t.windowVisible(n.value,e),winGoToFile.removeEventListener("prop.visible",l)})}else t.windowVisible(!0,e);else t.arraySearchResults=r,t.model.load(e),self.dgGoToFile&&t.updateDatagrid()})},filter:function(e,t,n){e=e.replace(/\*/g,"");if(!this.model.data){this.lastSearch=e;return}if(!e||!e.length){var i=this.arrayCache.slice();tabEditors.getPages().forEach(function(e){var t=e.$doc.getNode().getAttribute("path").substring(window.cloud9config.davPrefix.length);i.remove(t),i.unshift(t)}),this.arraySearchResults=i}else dgGoToFile.$viewport.setScrollTop(0),this.arraySearchResults=f.fileSearch(this.arrayCache,e);this.lastSearch=e,this.updateDatagrid();if(t)return;var s=tabEditors.getPages(),o={};for(var u=s.length-1;u>=0;u--)o[s[u].id]=!0;var a=dgGoToFile.getTraverseNodes();if(!a)return;for(var u=Math.max(dgGoToFile.$viewport.limit-3,a.length-1);u>=0;u--)if(o[r.davPrefix+a[u].firstChild.nodeValue]){dgGoToFile.select(a[u]);return}var l=dgGoToFile.getFirstTraverseNode();l&&dgGoToFile.select(l)},replaceStrong:function(e,t){if(!e)return"";t=t.replace(/\*/g,"");var n;if((n=e.lastIndexOf(t))!==-1)return e.substring(0,n)+"<strong>"+t+"</strong>"+e.substring(n+t.length);var r=f.matchPath(e,t);return r.length?(r.forEach(function(e,t){e.match?r[t]="<strong>"+e.val+"</strong>":r[t]=e.val}),r.join("")):e},updateDatagrid:function(e){var t=dgGoToFile.$viewport;if(!this.arraySearchResults)return;if(!this.arraySearchResults.length)e||!txtGoToFile.value?(dgGoToFile.clear("loading"),this.filter("")):(dgGoToFile.removeAttribute("height"),dgGoToFile.clear("empty"));else{dgGoToFile.$removeClearMessage(),dgGoToFile.load(this.model.data),t.length=this.arraySearchResults.length;var n=Math.ceil(t.getHeight()/t.$getItemHeight()+2);n>t.length?t.resize(t.length):t.length>n&&t.limit!=11&&t.resize(Math.min(t.length,11)),t.change(0,t.limit,!0),setTimeout(function(){dgGoToFile.select(dgGoToFile.getFirstTraverseNode()),txtGoToFile.focus()})}if(!t.length)this.arraySearchResults.length&&dgGoToFile.setAttribute("height",18);else if(t.length<100){var r=t.getScrollHeight();if(r/t.length==1e3)return setTimeout(arguments.callee.bind(dgGoToFile));var i=Math.min(350,r);i!=dgGoToFile.height&&dgGoToFile.setAttribute("height",i)}else dgGoToFile.height!=350&&dgGoToFile.setAttribute("height",350)},openFile:function(e){var t=dgGoToFile.getSelection();if(t.length===0)return!1;var n=this;this.toggleDialog(-1,e,function(){setTimeout(function(){for(var e=0,i=t.length;e<i;e++){var s=r.davPrefix.replace(/[\/]+$/,"")+"/"+n.arraySearchResults[t[e].firstChild.nodeValue].replace(/^[\/]+/,"");u.gotoDocument({path:s,active:e==i-1}),r.dispatchEvent("track_action",{type:"fileopen"})}},10)})},gotofile:function(){return this.isGeneric?winBlockGotoFile.show():this.toggleDialog(),!1},_gotofilelegacy:function(){return this.toggleDialog(),!1},toggleDialog:function(e,t,n){if(!self.winGoToFile||!e&&!winGoToFile.visible||e>0){if(self.winGoToFile&&winGoToFile.visible)return;i.initExtension(this),r.dispatchEvent("closepopup",{element:this}),winGoToFile.show(),dgGoToFile.$model!=this.model&&dgGoToFile.setModel(this.model),dgGoToFile.xmlRoot?apf.setOpacity(winGoToFile.$ext,1):(dgGoToFile.$setClearMessage(dgGoToFile["loading-message"],"loading"),apf.setOpacity(winGoToFile.$ext,1)),txtGoToFile.inited?txtGoToFile.focus():setTimeout(function(){txtGoToFile.inited=!0,txtGoToFile.focus()});if(this.lastSearch){var s=this.lastSearch;this.lastSearch=null,this.filter(s)}else this.filter("")}else self.winGoToFile&&winGoToFile.visible&&(t?(winGoToFile.hide(),n&&n()):(winGoToFile.visible=!1,c.animate(winGoToFile,{opacity:"0",timingFunction:"linear",duration:.025},function(){winGoToFile.visible=!0,winGoToFile.hide(),setTimeout(function(){u.currentEditor&&u.currentEditor.amlEditor&&u.currentEditor.amlEditor.focus()},0),n&&n()})));return!1},destroy:function(){o.removeCommandByName("gotofile"),winGoToFile.destroy(!0,!0),this.$destroy(),r.removeEventListener("init.ext/editors/editors",this.$initEditorExt),r.removeEventListener("extload",this.$extLoad),r.removeEventListener("closefile",this.$closeFile),r.removeEventListener("newfile",this.$newFile),r.removeEventListener("removefile",this.$removeFile),r.removeEventListener("closepopup",this.$closepopup),r.removeEventListener("beforewatcherchange",this.$beforewatcherchange)}})}),define("ext/undo/undo",["require","exports","module","core/ext","ext/menus/menus","ext/commands/commands"],function(e,t,n){var r=e("core/ext"),i=e("ext/menus/menus"),s=e("ext/commands/commands"),o={INPUT:1,TEXTAREA:1,SELECT:1,EMBED:1,OBJECT:1};n.exports=r.register("ext/undo/undo",{dev:"Ajax.org",name:"Undo",alone:!0,type:r.GENERAL,init:function(e){i.addItemByPath("Edit/Undo",new apf.item({command:"undo"}),100),i.addItemByPath("Edit/Redo",new apf.item({command:"redo"}),200)},undo:function(){if(document.activeElement&&o[document.activeElement.tagName])return!1;if(apf.isChildOf(tabEditors,apf.activeElement,!0)){var e;(e=ide.getActivePage())&&e.$at.undo()}else apf.activeElement==self.trFiles},redo:function(){if(document.activeElement&&o[document.activeElement.tagName])return!1;if(apf.isChildOf(tabEditors,apf.activeElement,!0)){var e;(e=ide.getActivePage())&&e.$at.redo()}else apf.activeElement==self.trFiles},destroy:function(){i.remove("Edit/Undo"),i.remove("Edit/Redo"),this.$destroy()}})}),define("ext/clipboard/clipboard",["require","exports","module","core/ide","core/ext","ext/menus/menus","ext/commands/commands","ext/editors/editors"],function(e,t,n){"use strict";var r=e("core/ide"),i=e("core/ext"),s=e("ext/menus/menus"),o=e("ext/commands/commands"),u=e("ext/editors/editors"),a="";n.exports=i.register("ext/clipboard/clipboard",{dev:"Ajax.org",name:"Clipboard",alone:!0,type:i.GENERAL,nodes:[],text:"",range:null,hook:function(){var e=this,t=function(e,t){if(apf.activeElement&&apf.activeElement.localName=="codeeditor"){var n=t&&t.type;return n!="keypress"&&n!="keydown"&&!r.readonly}return self.trFiles&&apf.activeElement==trFiles&&!trFiles.renaming&&!r.readonly};o.addCommand({name:"cut",bindKey:{mac:"Command-X",win:"Ctrl-X"},isAvailable:t,exec:function(){e.cut()}}),o.addCommand({name:"copy",bindKey:{mac:"Command-C",win:"Ctrl-C"},isAvailable:t,exec:function(){e.copy()}}),o.addCommand({name:"paste",bindKey:{mac:"Command-V",win:"Ctrl-V"},isAvailable:t,exec:function(){e.paste()}}),o.addCommand({name:"clearcut",bindKey:{mac:"ESC",win:"ESC"},isAvailable:function(){return self.trFiles&&apf.activeElement==trFiles&&apf.clipboard.store&&!apf.clipboard.copied},exec:function(){var e=apf.clipboard.store;return e?(apf.clipboard.$highlightSelection(trFiles,e,!0),apf.clipboard.clear(),!1):!1}}),this.nodes.push(s.addItemByPath("Edit/~",new apf.divider,300),s.addItemByPath("Edit/Cut",new apf.item({command:"cut"}),400),s.addItemByPath("Edit/Copy",new apf.item({command:"copy"}),500),s.addItemByPath("Edit/Paste",new apf.item({command:"paste"}),600))},cut:function(){if(self.trFiles&&apf.document.activeElement==trFiles)apf.clipboard.cutSelection(trFiles);else{var e=this.$getAce();e.focus();try{document.execCommand("copy")}catch(t){}a=e.getCopyText()||a;var n=e.$nativeCommands.commands.cut;e.commands.exec(n,e)}},copy:function(){if(self.trFiles&&apf.document.activeElement==trFiles)apf.clipboard.put(trFiles.getSelection().map(function(e){return apf.xmldb.cleanNode(e.cloneNode(!1))})),apf.clipboard.copied=!0;else{var e=this.$getAce();e.focus();try{if(document.execCommand("copy"))return}catch(t){}a=e.getCopyText()||a}},paste:function(){if(self.trFiles&&apf.document.activeElement==trFiles)apf.clipboard.pasteSelection(trFiles);else{var e=this.$getAce();e.focus();try{if(document.execCommand("paste"))return}catch(t){}e.onPaste(a)}},$getAce:function(){var e=u.currentEditor;if(!e||!e.amlEditor)return;var t=e.amlEditor;return t.$editor},destroy:function(){s.remove("Edit/~",300),s.remove("Edit/Cut"),s.remove("Edit/Copy"),s.remove("Edit/Paste"),this.$destroy()}})}),define("text!ext/searchinfiles/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:button name="btnquicksearchnav">\n        <a:style><![CDATA[\n            .btnquicksearchnav {\n                height             : 22px;\n                cursor             : pointer;\n                position           : relative;\n                -moz-user-select   : none;\n                -khtml-user-select : none;\n                user-select        : none;\n                width              : 20px;\n            }\n            .btnquicksearchnav .lbl{\n                margin: 0;\n                outline: none;\n                height : 25px;\n            }\n            .btnquicksearchnav.btnquicksearchnavLeft .lbl {\n                border-right: none;\n                border-left: none;\n            }\n\n            .btnquicksearchnav span {\n                background-position: 0 0;\n                background-repeat:no-repeat;\n                display: block;\n                height: 25px;\n            }\n            .btnquicksearchnavOver span {\n                background-position: 0 -25px;\n            }\n            .btnquicksearchnavDown span {\n                background-position: 0 -50px;\n            }\n            .btnquicksearchnavDisabled span {\n                background-position: 0 -75px;\n            }\n\n            .btnquicksearchnav .btnDivider {\n                z-index: 1;\n                border-color: transparent white transparent #C3C3C3;\n                border-left:1px solid #C3C3C3;\n                border-right:1px solid white;\n                border-style:none solid;\n                border-width:medium 1px;\n                cursor:default;\n                height:17px;\n                line-height:0;\n                position:absolute;\n                right: -1px;\n                top:4px;\n                width:0;\n                display: none;\n            }\n\n            .btnquicksearchnav.withDivider .btnDivider {\n                display: block;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main\n              caption    = "div[1]/text()"\n              label      = "div[1]/text()"\n              background = "."\n              icon       = "div[1]/span"\n              minwidth   = "20">\n                <div class="btnquicksearchnav">\n                    <div class="lbl">-\n                        <span></span>\n                        <div class="btnDivider"></div>\n                    </div>\n                 </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n</a:skin>'}),define("text!ext/searchinfiles/searchinfiles.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:label id="tooltipSearchInFiles" skin="tooltipLabel" visible="false" />\n    <a:bar id="winSearchInFiles" skin="basic" skinset="searchreplace" focussable="container" zindex="1000" minheight="0" visible="false" height="0">\n        <a:vbox class="find-and-replace" padding="5" edge="5" model="{require(\'core/settings\').model}">\n             <a:hbox padding="5" align="start">\n                <a:hbox class="grouped_checkbox_holder" align="start">\n                    <a:checkbox id="chkSFRegEx" value="[editors/code/filesearch/@regex]" class="chkRegEx" label="Regular Expressions" skin="grouped_checkbox" width="28" />\n                    <a:checkbox id="chkSFMatchCase" value="[editors/code/filesearch/@matchcase]" class="chkMatchCase" label="Match Case" skin="grouped_checkbox" width="28" />\n                    <a:checkbox id="chkSFWholeWords" value="[editors/code/filesearch/@wholeword]" class="chkWholeWords" label="Whole Words" skin="grouped_checkbox" width="28" />\n                </a:hbox>\n                <a:hbox class="grouped_checkbox_holder" align="start">\n                    <a:checkbox id="chkSFConsole" value="[editors/code/filesearch/@console]" class="chkConsole" label="Show in Console" skin="grouped_checkbox" width="28" />\n                </a:hbox>\n                <a:codebox id="txtSFFind" tabindex="1000" flex="1" skin="searchbox" initial-message="Find in Files" focusselect="true" />\n                <a:button id="btnSFFind" focussable="false" skin="blackbutton" width="80"\n                  onclick="require(\'ext/searchinfiles/searchinfiles\').execFind()">Find</a:button>\n            </a:hbox>\n            <a:hbox padding="5" align="start" height="27" edge="0 85 0 126">\n                <a:codebox id="txtSFPatterns" tabindex="1001" skin="searchbox" flex="1" initial-message="*.*" focusselect="true"/>\n                <a:radiobutton margin="3 0 0 0"\n                  group  = "grpSFScope"\n                  skin   = "radio_black"\n                  value  = "projects"\n                  label  = "Project" />\n                <a:radiobutton id="rbSFSelection" margin="3 0 0 0"\n                  group  = "grpSFScope"\n                  skin   = "radio_black"\n                  value  = "selection"\n                  label  = "Selection"\n                  selected = "true" />\n            </a:hbox>\n            <a:hbox id="test" padding="5" align="start" edge="0 0 0 126">\n                <a:codebox id="txtSFReplace" tabindex="1002" skin="searchbox" flex="1" initial-message="Replace With" focusselect="true"/>\n                <a:button id="btnSFReplaceAll" focussable="false" skin="blackbutton" width="80"\n                  onclick="require(\'ext/searchinfiles/searchinfiles\').replace()">Replace</a:button>\n            </a:hbox>\n        </a:vbox>\n    </a:bar>\n</a:application>'}),define("ext/tooltip/tooltip",["require","exports","module","core/ext","core/ide","ext/tooltip/tooltip","ext/tooltip/tooltip"],function(e,t,n){var r=e("core/ext"),i=e("core/ide");n.exports=r.register("ext/tooltip/tooltip",{name:"Tooltip",dev:"Ajax.org",alone:!0,type:r.GENERAL,nodes:[],init:function(){},create:function(e,t){var n;if(!e.tooltip){n=document.body.appendChild(document.createElement("div")),n.className="menu-bk downward menu-bkFocus c9-tooltip",e.width&&(n.style.width=e.width),n.style.position="absolute",n.innerHTML="<div></div>";var r=n.appendChild(document.createElement("div"));r.className="arrow revisionsInfoArrow",e.tooltip=n}else n=e.tooltip;n.addEventListener("mouseover",this.$ttmouseover),n.addEventListener("mouseout",this.$ttmouseout),n.companion=t},add:function(e,t){e.nodeFunc&&(e=e.$ext),e.addEventListener("mouseover",this.$mouseover),e.addEventListener("mouseout",this.$mouseout),e.addEventListener("mousedown",this.$mousedown),t.timeout==undefined&&(t.timeout=500),e.$c9tooltipOptions=t},destroy:function(e){var t=e.$c9tooltipOptions,n=t.tooltip;if(!n)return;this.nodes.remove(n),n.parentNode.removeChild(n),n.htmlNodes.forEach(function(e){e.removeEventListener("mouseover",this.$mouseover),e.removeEventListener("mouseout",this.$mouseout),e.removeEventListener("mousedown",this.$mousedown)},this),this.$destroy()},$ttmouseover:function(){var e=this.companion,t=e.$c9tooltipOptions;clearTimeout(t.timer),t.control&&t.control.stop(),apf.setOpacity(this,1)},$ttmouseout:function(t){var n=e("ext/tooltip/tooltip");n.$mouseout.call(this.companion)},$mouseover:function(t){var n=e("ext/tooltip/tooltip"),r=this.$c9tooltipOptions;clearTimeout(r.timer),r.tooltip&&clearTimeout(r.tooltip.timer);if(r.isAvailable&&r.isAvailable()===!1)return;var i=this;r.timer=setTimeout(function(){r.control&&r.control.stop(),n.create(r,i),r.tooltip.style.display="block";var e;if(r.getPosition)e=r.getPosition();else{var t=apf.getAbsolutePosition(i);e=[t[0]-(r.tooltip.offsetWidth-i.offsetWidth)/2,t[1]]}r.tooltip.style.left=e[0]+"px",r.tooltip.style.top=e[1]+"px",r.message&&((r.tooltip.firstElementChild||r.tooltip).innerHTML=r.message),r.animate!==!1?apf.tween.single(r.tooltip,{type:"fade",from:0,to:1,steps:10,interval:0,control:r.control={}}):apf.setOpacity(r.tooltip,1)},r.timeout)},$mouseout:function(e){var t=this.$c9tooltipOptions;clearTimeout(t.timer);if(!t.tooltip||t.tooltip.style.display!="block")return;var n=this;t.timer=t.tooltip.timer=setTimeout(function(){t.control&&t.control.stop(),apf.tween.single(t.tooltip,{type:"fade",from:1,to:0,steps:10,interval:0,control:t.control={},onfinish:function(){t.tooltip.style.display="none"}})},200)},$mousedown:function(e){var t=this.$c9tooltipOptions;clearTimeout(t.timer),t.tooltip&&t.hideonclick&&(t.control&&t.control.stop(),t.tooltip.style.display="none")}})}),define("ext/searchreplace/libsearch",["require","exports","module","core/settings","ace/keyboard/hash_handler","core/settings","ace/lib/dom"],function(e,t,n){var r=e("core/settings"),i="search/";n.exports={keyStroke:"",addSearchKeyboardHandler:function(t,n){var r=this,i=e("ace/keyboard/hash_handler").HashHandler;t.ace.session.listName=n;var s=new i;return s.bindKeys({Up:function(e){if(e.getCursorPosition().row>0)return!1;r.keyStroke="next",r.navigateList(r.keyStroke,e),e.selection.moveCursorFileStart(),e.selection.clearSelection()},Down:function(e){if(e.getCursorPosition().row<e.session.getLength()-1)return!1;r.keyStroke="prev",r.navigateList(r.keyStroke,e),e.selection.lead.row=e.session.getLength()-1},"Ctrl-Home":function(e){r.keyStroke="prev",r.navigateList("first",e)},"Ctrl-End":function(e){r.keyStroke="next",r.navigateList("last",e)},Esc:function(){r.toggleDialog(-1)},"Shift-Esc|Ctrl-Esc":function(){r.restore()},"Ctrl-Return|Alt-Return":function(e){e.insert("\n")},Return:function(e){r.saveHistory(e.session.getValue()),r.execFind(!1,!1,!0,!0)},"Shift-Return":function(e){r.saveHistory(e.session.getValue()),r.execFind(!1,!0,!0,!0)}}),s.handleKeyboard=function(e,t,n,r){if(n=="\0")return;var i=this.findKeyCommand(t,n),s=e.editor;if(!i)return;var o=i.exec(s);if(o!=0)return{command:"null"}},t.ace.setKeyboardHandler(s),s},navigateList:function(e,t){var n=t.session.listName,s=r.model,o=JSON.parse(s.queryValue(i+n+"/text()")||"[]"),u=t.getValue();u&&(this.position==-1||o[this.position]!=u)&&(o=this.saveHistory(u,n),this.position=0);var a;if(e=="prev"){if(this.position<=0){t.setValue(""),this.keyStroke="",this.position=-1;return}a=Math.max(0,this.position-1)}else e=="next"?a=Math.min(o.length-1,this.position+1):e=="last"?a=Math.max(o.length-1,0):e=="first"&&(a=0);o[a]&&a!=this.position&&(t.setValue(o[a],!0),this.keyStroke="",this.position=a)},saveHistory:function(t,n){var r=e("core/settings");if(!r.model)return;var s=r.model,o=s.queryNodes(i+n+"/word"),u=o[0]&&o[0].parentNode;for(var a=o.length-1;a>=0;a--)u.removeChild(o[a]);var f;try{f=JSON.parse(s.queryValue(i+n+"/text()"))}catch(l){f=[]}return f[0]!=t&&(f.unshift(t),s.setQueryValue(i+n+"/text()",JSON.stringify(f))),f},checkRegExp:function(e,t,n){var r=e.getValue();try{new RegExp(r)}catch(i){t.$ext.innerHTML=apf.escapeXML(i.message.replace(": /"+r+"/","")),apf.setOpacity(t.$ext,1);var s=apf.getAbsolutePosition(n.$ext);return t.$ext.style.left=e.getLeft()+"px",t.$ext.style.top=s[1]-16+"px",this.tooltipTimer=setTimeout(function(){t.$ext.style.display="block"},200),!1}return clearTimeout(this.tooltipTimer),t.$ext.style.display="none",!0},$setRegexpMode:function(t,r){var i={};i.getLineTokens=r?function(e){return{tokens:n.exports.parseRegExp(e),state:""}}:function(e){return{tokens:[{value:e,type:"text"}],state:""}},t.ace.session.bgTokenizer.tokenizer=i,t.ace.session.bgTokenizer.lines=[],t.ace.renderer.updateFull();if(this.colorsAdded)return;this.colorsAdded=!0,e("ace/lib/dom").importCssString("            .ace_r_collection {background:#ffc080;color:black}            .ace_r_escaped{color:#cb7824}            .ace_r_subescaped{background:#dbef5c;color:orange}            .ace_r_sub{background:#dbef5c;color:black;}            .ace_r_replace{background:#80c0ff;color:black}            .ace_r_range{background:#80c0ff;color:black}            .ace_r_modifier{background:#80c0ff;color:black}            .ace_r_error{background:red;color:white;","ace_regexps")},regexp:{alone:{"^":1,$:1,".":1},rangeStart:{"+":1,"*":1,"?":1,"{":1},replace:/^\\[sSwWbBnrd]/,searches:/^\((?:\?\:|\?\!|\?|\?\=|\?\<\=)/,range:/^([+*?]|\{(\d+,\d+|\d+,?|,?\d+)\})\??|^[$\^]/},parseRegExp:function(e){var t=this.regexp,n,r,i,s=0,o=0,u=[],a=function(t,n){typeof t=="number"&&(t=e.substr(0,t)),u.push(t,n),e=e.substr(t.length)};while(e.length){if((i=e.charAt(0))=="\\"){if(r=e.match(/^\\\\+/g)){var f=(n=r[0].length)%2;a(n-f,s>0?"subescaped":"escaped");continue}if(r=e.match(t.replace)){a(r[0],"replace");continue}if(r=e.match(/^\\(?:(u)\d{0,4}|(x)\d{0,2})/)){var l=r[1]=="u"&&r[0].length!=6||r[1]=="x"&&r[0].length!=4;a(r[0],l?"error":"escaped");continue}a(2,"escaped");continue}if(i=="|"){a(i,"collection");continue}if(i=="("){s++,r=e.match(t.searches);if(r){a(r[0],"sub");continue}a("(","sub");continue}if(i==")"){s===0?a(")","error"):(s--,a(")","sub"));continue}if(i=="["){o=1;var c,h=["["];for(var p=1,n=e.length;p<n;p++){c=e.charAt(p),h.push(c),c=="["?o++:c=="]"&&o--;if(!o)break}a(h.join(""),"collection");continue}if(i=="]"||i=="}"){a(i,s>0?"sub":"text");continue}if(t.rangeStart[i]){var d=e.match(t.range);if(!d){a(i,"text");continue}a(d[0],"range"),d=e.match(t.range);if(d){a(d[0],"error");continue}continue}if(t.alone[i]){a(i,"replace");if(i==".")continue;var d=e.match(t.range);d&&a(d[0],"error");continue}a(i,s>0?"sub":"text")}var v="text",m=[],g={type:v,value:""};for(var p=0;p<u.length;p+=2)u[p+1]!=v&&(g.value&&m.push(g),v=u[p+1],g={type:"r_"+v,value:""}),g.value+=u[p];return g.value&&m.push(g),m}}}),define("text!ext/searchreplace/searchreplace.css",[],function(){return'#divSearchCount {\n    position: absolute;\n    width: auto;\n    height: 19px;\n    right: 51px;\n    top: 10px;\n    z-index : 100;\n}\n\n#divSearchCount .searchIter,\n#divSearchCount .searchTotal {\n    color: #aaa;\n    font-size: 11px;\n    height: 19px;\n    line-height: 19px;\n    text-align: center;\n    vertical-align: middle;\n    display:inline;\n    float: left;\n}\n\n#divSearchCount .searchIter {\n    margin: 0 1px 0 0;\n    padding: 0 0 0 7px;\n}\n\n#divSearchCount .searchTotal {\n    margin: 0;\n    padding: 0 5px 0 2px;\n}\n\n.tb_textbox.searchTxt .sbtb_middle input {\n    width: 100%;\n}\n\n.btnquicksearchnav.btnquicksearchnavLeft .lbl span {\n    background-image: url("{ide.staticPrefix}/ext/main/style/icons/arrow_left_search.png");\n}\n.btnquicksearchnav.btnquicksearchnavRight .lbl span {\n    background-image: url("{ide.staticPrefix}/ext/main/style/icons/arrow_right_search.png");\n}'}),define("text!ext/searchreplace/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:button name="btnquicksearchnav">\n        <a:style><![CDATA[\n            .btnquicksearchnav {\n                height             : 22px;\n                cursor             : pointer;\n                position           : relative;\n                -moz-user-select   : none;\n                -khtml-user-select : none;\n                user-select        : none;\n                width              : 20px;\n            }\n            .btnquicksearchnav .lbl{\n                margin: 0;\n                outline: none;\n                height : 25px;\n            }\n            .btnquicksearchnav.btnquicksearchnavLeft .lbl {\n                border-right: none;\n                border-left: none;\n            }\n            .btnquicksearchnav span {\n                background-position: 0 0;\n                background-repeat:no-repeat;\n                display: block;\n                height: 25px;\n            }\n            .btnquicksearchnavOver span {\n                background-position: 0 -25px;\n            }\n            .btnquicksearchnavDown span {\n                background-position: 0 -50px;\n            }\n            .btnquicksearchnavDisabled span {\n                background-position: 0 -75px;\n            }\n\n            .btnquicksearchnav .btnDivider {\n                z-index: 1;\n                border-color: transparent white transparent #C3C3C3;\n                border-left:1px solid #C3C3C3;\n                border-right:1px solid white;\n                border-style:none solid;\n                border-width:medium 1px;\n                cursor:default;\n                height:17px;\n                line-height:0;\n                position:absolute;\n                right: -2px;\n                top:4px;\n                width:0;\n                display: none;\n            }\n\n            .btnquicksearchnav.withDivider .btnDivider {\n                display: block;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main\n              caption    = "div[1]/text()"\n              label      = "div[1]/text()"\n              background = "."\n              icon       = "div[1]/span"\n              minwidth   = "20">\n                <div class="btnquicksearchnav">\n                    <div class="lbl">-\n                        <span></span>\n                        <div class="btnDivider"></div>\n                    </div>\n                 </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n</a:skin>'}),define("text!ext/searchreplace/searchreplace.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:label id="tooltipSearchReplace" skin="tooltipLabel" visible="false" />\n    <a:bar id="winSearchReplace" skin="basic" skinset="searchreplace" focussable="container" zindex="1000" minheight="0" visible="false" height="0">\n        <div id="divSearchCount"><span class="searchIter" id="spanSearchIter">0</span><span class="searchTotal" id="spanSearchTotal">0</span></div>\n        <a:button onclick="require(\'ext/searchreplace/searchreplace\').findprevious(1)" \n          skin="btnquicksearchnav" class="btnquicksearchnavLeft withDivider" \n          right="29"\n          top="7"\n          focussable = "false"\n          zindex="100"/>\n        <a:button onclick="require(\'ext/searchreplace/searchreplace\').findnext(1)" \n          skin="btnquicksearchnav" class="btnquicksearchnavRight" \n          right="7"\n          top="7"\n          focussable = "false"\n          zindex="100"/>\n        <a:vbox class="find-and-replace" padding="5" edge="5" model="{require(\'core/settings\').model}">\n             <a:hbox id="hboxFind" padding="5" align="start">\n                <a:hbox class="grouped_checkbox_holder" align="start">\n                    <a:checkbox id="chkRegEx" value="[editors/code/search/@regex]" class="chkRegEx" label="Regular Expressions" skin="grouped_checkbox" width="28" />\n                    <a:checkbox id="chkMatchCase" value="[editors/code/search/@matchcase]" class="chkMatchCase" label="Match Case" skin="grouped_checkbox" width="28" />\n                    <a:checkbox id="chkWholeWords" value="[editors/code/search/@wholeword]" class="chkWholeWords" label="Whole Words" skin="grouped_checkbox" width="28" />\n                </a:hbox>\n                <a:hbox class="grouped_checkbox_holder" align="start">\n                    <a:checkbox id="chkSearchBackwards" value="[editors/code/search/@backwards]" class="chkSearchBackwards" label="Search Backwards" skin="grouped_checkbox" width="28" />\n                    <a:checkbox id="chkWrapAround" value="[editors/code/search/@wraparound]" class="chkWrapAround" label="Wrap Around" skin="grouped_checkbox" width="28" />\n                    <a:checkbox id="chkSearchSelection" class="chkSearchSelection" label="Search Selection" skin="grouped_checkbox" width="28" />\n                </a:hbox>\n                <a:hbox class="grouped_checkbox_holder" align="start">\n                    <a:checkbox id="chkHighlightMatches" value="[editors/code/search/@highlightmatches]" class="chkHighlightMatches" label="Highlight Matches" skin="grouped_checkbox" width="28" />\n                </a:hbox>\n                <a:codebox id="txtFind" tabindex="1000" flex="1" skin="codebox" initial-message="Find" focusselect="true" class="buttonsright" />\n            </a:hbox>\n            <a:hbox id="hboxReplace" padding="5" align="start" render="runtime">\n                <a:hbox class="grouped_checkbox_holder" margin="0 56 0 0">\n                    <a:checkbox id="chkPreserveCase" value="[editors/code/search/@preservecase]" class="chkPreserveCase" label="Preserve Case" skin="grouped_checkbox" width="28" />\n                </a:hbox>\n                <a:hbox class="grouped_checkbox_holder" margin="0 56 0 0">\n                \n                </a:hbox>\n                <a:codebox id="txtReplace" tabindex="1001" skin="codebox" margin="0 -1 0 0"  flex="1" initial-message="Replace With" focusselect="true" />\n                <a:button margin="0 -2 0 0" focussable="false" skin="blackbutton" onclick="require(\'ext/searchreplace/searchreplace\').replace()">Replace</a:button>\n                <a:button skin="blackbutton" tabindex="1002" onclick="require(\'ext/searchreplace/searchreplace\').replaceAll()" >Replace All</a:button>\n            </a:hbox>\n        </a:vbox>\n    </a:bar>\n</a:application>'}),define("ext/searchreplace/searchreplace",["require","exports","module","core/ide","core/ext","core/settings","core/util","ext/menus/menus","ext/editors/editors","text!ext/searchreplace/searchreplace.css","text!ext/searchreplace/skin.xml","text!ext/searchreplace/searchreplace.xml","ext/commands/commands","ext/tooltip/tooltip","ext/searchreplace/libsearch","ext/anims/anims"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/settings"),o=e("core/util"),u=e("ext/menus/menus"),a=e("ext/editors/editors"),f=e("text!ext/searchreplace/searchreplace.css"),l=e("text!ext/searchreplace/skin.xml"),c=e("text!ext/searchreplace/searchreplace.xml"),h=e("ext/commands/commands"),p=e("ext/tooltip/tooltip"),d=e("ext/searchreplace/libsearch"),v=e("ext/anims/anims"),m,g,y;n.exports=i.register("ext/searchreplace/searchreplace",apf.extend({name:"Searchreplace",dev:"Ajax.org",type:i.GENERAL,alone:!0,css:o.replaceStaticPrefix(f),markup:c,skin:{id:"searchreplace",data:l,"media-path":r.staticPrefix+"/ext/searchreplace/images/","icon-path":r.staticPrefix+"/ext/searchreplace/icons/"},currentRange:null,nodes:[],hook:function(){var e=this;this.markupInsertionPoint=searchRow,h.addCommand({name:"replace",bindKey:{mac:"Option-Command-F",win:"Alt-Shift-F"},hint:"search for a string inside the active document and replace it",isAvailable:function(e){return e&&e.path=="ext/code/code"},exec:function(t,n,r){e.toggleDialog(1,!0)}}),h.addCommand({name:"replaceall",bindKey:{mac:"",win:""},hint:"search for a string inside the active document and replace all",isAvailable:function(e){return e&&e.path=="ext/code/code"},exec:function(t,n,r){e.replaceAll()}}),h.addCommand({name:"replacenext",isAvailable:function(e){return e&&e.path=="ext/code/code"},exec:function(e,t,n){h.exec("findnext"),h.exec("replace")}}),h.addCommand({name:"replaceprevious",isAvailable:function(e){return e&&e.path=="ext/code/code"},exec:function(e,t,n){h.exec("findprevious"),h.exec("replace")}}),r.addEventListener("init.ext/code/code",function(){h.commands.findnext.hint="search for the next occurrence of the search query your entered last",h.commands.findnext.msg="Navigating to next match.",h.commands.findprevious.hint="search for the previous occurrence of the search query your entered last",h.commands.findprevious.msg="Navigating to previous match."}),h.addCommand({name:"find",hint:"open the quicksearch dialog to quickly search for a phrase",bindKey:{mac:"Command-F",win:"Ctrl-F"},isAvailable:function(e){return e&&e.path=="ext/code/code"},exec:function(t,n,r){e.toggleDialog(1,!1)}}),this.nodes.push(u.addItemByPath("Find/Find...",new apf.item({command:"find"}),100),u.addItemByPath("Find/Find Next",new apf.item({command:"findnext"}),200),u.addItemByPath("Find/Find Previous",new apf.item({command:"findprevious"}),300),u.addItemByPath("Find/~",new apf.divider,400),u.addItemByPath("Find/Replace...",new apf.item({command:"replace"}),500),u.addItemByPath("Find/Replace Next",new apf.item({command:"replacenext"}),600),u.addItemByPath("Find/Replace Previous",new apf.item({command:"replaceprevious"}),700),u.addItemByPath("Find/Replace All",new apf.item({command:"replaceall"}),800)),r.addEventListener("init.ext/searchinfiles/searchinfiles",function(e){m=e.ext})},init:function(e){var t=this;r.addEventListener("settings.load",function(e){e.ext.setDefaults("editors/code/search",[["regex","false"],["matchcase","false"],["wholeword","false"],["backwards","false"],["wraparound","true"],["highlightmatches","true"],["preservecase","false"]])});var n=h.commands.findnext.isAvailable;h.commands.findnext.isAvailable=h.commands.findprevious.isAvailable=function(e){return apf.activeElement==txtFind?!0:n.apply(this,arguments)},h.addCommand({name:"hidesearchreplace",bindKey:{mac:"ESC",win:"ESC"},isAvailable:function(e){return winSearchReplace.visible},exec:function(e,n,r){t.toggleDialog(-1)}}),apf.importCssString(t.css),hboxReplace.addEventListener("afterrender",function(){var e=t.addSearchKeyboardHandler(txtReplace,"replace");e.bindKeys({Return:function(e){t.replace()},"Shift-Return":function(e){t.replace(!0)}}),t.decorateCheckboxes(this)});var i=function(e){hboxReplace&&!apf.isChildOf(winSearchReplace,e.toElement)&&t.toggleDialog(-1)};winSearchReplace.addEventListener("blur",i),txtFind.addEventListener("blur",i),document.body.appendChild(tooltipSearchReplace.$ext),chkRegEx.addEventListener("prop.value",function(e){t.$setRegexpMode(txtFind,apf.isTrue(e.value))}),this.decorateCheckboxes(hboxFind),this.addSearchKeyboardHandler(txtFind,"search"),txtFind.ace.session.on("change",function(e){clearTimeout(t.$timer),clearTimeout(t.$matchCountTimer),t.$timer=setTimeout(t.keyStroke?function(){t.updateCounter(0,0,0,!0),apf.layout.forceResize()}:function(){t.execFind(),apf.layout.forceResize()},20)})},decorateCheckboxes:function(e){var t=this,n=e.getElementsByTagNameNS(apf.ns.aml,"checkbox");n.forEach(function(e){e.addEventListener("click",function(){t.updateCounter(null,!0),t.execFind()}),p.add(e.$ext,{message:e.label,width:"auto",timeout:0,tooltip:tooltipSearchReplace.$ext,animate:!1,getPosition:function(){var t=apf.getAbsolutePosition(winSearchReplace.$ext),n=t[0]+e.getLeft(),r=t[1];return[n,r-16]}})})},updateCounter:function(e,t,n,r){var i=this.$getAce(),s;g||(g=document.getElementById("spanSearchIter"),y=document.getElementById("spanSearchTotal"));if(g.parentNode){if(!i||!winSearchReplace.visible||r){g.parentNode.style.width="0px";return}g.parentNode.style.width="auto"}if(n&&!this.$matchCountTimer){var o=parseInt(g.innerHTML,10),u=parseInt(y.innerHTML.substr(3),10);!isNaN(o)&&!isNaN(u)&&u&&(o+=n,g.innerHTML=o>u?1:o<0?u:o);return}setTimeout(function(){g.parentNode&&txtFind&&txtFind.$button&&(s=g.parentNode.offsetWidth||0,txtFind.$button.style.right=s+45+"px")});if(t){var a=this.getOptions();a.needle=txtFind.getValue(),i.$search.$assembleRegExp(a)}var f=i.$search.$options.re;if(!f){g.innerHTML="0",y.innerHTML="of 0";return}var l=i.selection.getCursor(),c=0;this.$countMatches(f,i.session.doc.getAllLines(),l,function(t,n){g.innerHTML=e?t-n+1:n,y.innerHTML="of "+t},function(e,t,n){c++;if(c<3)return g.innerHTML=y.innerHTML="";g.innerHTML=t+"...",y.innerHTML=(""+100*n).substring(0,5)+"%"})},$countMatches:function(e,t,n,r,i){var s=n.row,o=t.length,u=0,a="",f=0,l=this;this.$matchCountTimer&&clearTimeout(this.$matchCountTimer);var c=function(e,t){var n=0;return e.replace(t,function(e){n++}),n};if(Array.isArray(e)){f+=e.offset||0,o-=e.length;var c=function(e,n,r){if(e.search(n[0])==-1)return 0;for(var i=1;i<n.length;i++)if(t[r+i].search(n[i])==-1)return 0;return 1}}var h=function(){var p=Math.min(o,f+500);for(var d=f;d<p;d++)d==s&&(a=u+c(t[d].substring(0,n.column),e,d)),u+=c(t[d],e,d);d==o?(r&&r(u,a),l.$matchCountTimer=null):(f=p,l.$matchCountTimer=setTimeout(h,100),i&&i(u,a,f/o))};h()},toggleDialog:function(e,t,n,r){var o=this;i.initExtension(this);var u=a.currentEditor;if(!u||u.path!=="ext/code/code")return;var f=winSearchReplace.visible,l=t!==undefined&&this.$lastState!=t;tooltipSearchReplace.$ext.style.display="none";var c=apf.isTrue(s.model.queryValue("general/@animateui"));if(!e&&!winSearchReplace.visible||e>0||l){if(winSearchReplace.visible&&!l){txtFind.focus(),txtFind.select();return}if(m&&m.inited&&winSearchInFiles.visible){i.initExtension(this),winSearchInFiles.$ext.style.height="0px",txtFind.focus(),txtFind.select(),m.toggleDialog(-1,null,null,function(){o.toggleDialog(e,t,n)});return}winSearchReplace.$ext.style.overflow="hidden",winSearchReplace.$ext.style.height=winSearchReplace.$ext.offsetHeight+"px",(!c||l&&t||!f)&&this.setupDialog(t),chkSearchSelection.uncheck(),this.position=-1;if(!f){var h=this.$getAce();!h.selection.isEmpty()&&!h.selection.isMultiLine()&&txtFind.setValue(h.getCopyText()),this.startPos={range:h.getSelectionRange(),scrollTop:h.session.getScrollTop(),scrollLeft:h.session.getScrollLeft()}}searchRow.appendChild(winSearchReplace),winSearchReplace.show(),txtFind.focus(),txtFind.select();var p=38;l&&!t&&f&&(p-=hboxReplace.$ext.scrollHeight+4),c?v.animateSplitBoxNode(winSearchReplace,{height:p+"px",timingFunction:"cubic-bezier(.10, .10, .25, .90)",duration:.2},function(){l&&!t&&f&&o.setupDialog(t),winSearchReplace.$ext.style.height="",divSearchCount.$ext.style.visibility="",o.updateCounter(),setTimeout(function(){apf.layout.forceResize()},50)}):(winSearchReplace.$ext.style.height="",divSearchCount.$ext.style.visibility="",o.updateCounter(),apf.layout.forceResize())}else winSearchReplace.visible?(divSearchCount.$ext.style.visibility="hidden",txtFind.getValue()&&o.saveHistory(txtFind.getValue(),"search"),winSearchReplace.visible=!1,winSearchReplace.$ext.style.height=winSearchReplace.$ext.offsetHeight+"px",c?v.animateSplitBoxNode(winSearchReplace,{height:"0px",timingFunction:"ease-in-out",duration:.2},function(){winSearchReplace.visible=!0,winSearchReplace.hide(),winSearchReplace.parentNode.removeChild(winSearchReplace),n||u.amlEditor.focus(),setTimeout(function(){r?r():apf.layout.forceResize()},50)}):(winSearchReplace.visible=!0,winSearchReplace.hide(),winSearchReplace.parentNode.removeChild(winSearchReplace),n||u.amlEditor.focus(),r?r():apf.layout.forceResize())):r&&r();return!1},restore:function(){if(!this.startPos)return!1;var e=this.$getAce();e.selection.setSelectionRange(this.startPos.range),e.session.setScrollTop(this.startPos.scrollTop),e.session.setScrollLeft(this.startPos.scrollLeft)},onHide:function(){var e=a.currentEditor;e&&e.amlEditor&&e.amlEditor.focus()},search:function(){return this.setEditor().toggleDialog(1,!1)},searchreplace:function(){return this.setEditor().toggleDialog(1,!0)},setupDialog:function(e){if(this.$lastState==e)return;this.$lastState=e;var t=hboxFind.childNodes[2];if(e){hboxReplace.show();var n=hboxReplace.childNodes[1];n.appendChild(chkHighlightMatches),t.hide()}else hboxReplace.hide(),t.appendChild(chkHighlightMatches),t.show();return this},setEditor:function(e,t){if(typeof a.currentEditor.amlEditor=="undefined")return;return this.$editor=e||a.currentEditor.amlEditor.$editor,this.$selection=t||this.$editor.getSelection(),this},getOptions:function(){var e={backwards:chkSearchBackwards.checked,wrap:chkWrapAround.checked,caseSensitive:chkMatchCase.checked,wholeWord:chkWholeWords.checked,regExp:chkRegEx.checked};return chkSearchSelection.checked&&(e.range=this.startPos&&(this.startPos.searchRange||this.startPos.range)),e},findNext:function(e){this.$editor||this.setEditor();if(!this.$editor)return;var t=txtFind.getValue();if(!t)return;var n=this.getOptions();e&&(n.backwards=!0),this.$crtSearch!=t?(this.$crtSearch=t,this.$editor.find(t,n),this.currentRange=this.$editor.selection.getRange()):(this.$editor.find(t,n),this.currentRange=this.$editor.selection.getRange()),this.updateCounter()},execFind:function(e,t,n,r){var i=this.$getAce();if(!i)return;this.$timer&&(this.$timer=clearTimeout(this.$timer));var s=txtFind.getValue(),o=this.getOptions();t&&(o.backwards=!o.backwards);if(o.regExp&&this.checkRegExp(txtFind,tooltipSearchReplace,winSearchReplace)===!1)return;var u=i.selection.getRange();o.start=u,o.skipCurrent=!!n,u=i.find(s,o),this.currentRange=i.selection.getRange(),r&&(this.saveHistory(s,"search"),this.position=0);if(e){winSearchReplace.hide(),i.focus();return}this.$crtSearch!=s?(this.updateCounter(!t!=!o.backwards),this.$crtSearch=s):this.updateCounter(!t!=!o.backwards,null,t?-1:1),chkHighlightMatches.checked&&i.session.highlight(i.$search.$options.re)},find:function(){return this.toggleDialog(1),!1},findnext:function(e){if(e!==1)return;var t=this.$getAce();if(!t)return;return t.findNext(),this.currentRange=t.selection.getRange(),this.updateCounter(),!1},findprevious:function(e){if(e!==1)return;var t=this.$getAce();if(!t)return;return t.findPrevious(),this.currentRange=t.selection.getRange(),this.updateCounter(!0),!1},replace:function(e){this.$editor||this.setEditor();if(!this.$editor)return;var t={n:"\n",t:"	",r:"\r"},n=(txtReplace.getValue()||"").replace(/(\\\\)+|\\([ntr])/g,function(e,n,r){return n||t[r]}),i=this.$editor.getCopyText();this.$editor.$search.set({preserveCase:chkPreserveCase.checked}),n=this.$editor.$search.replace(i,n);if(typeof n!="string")return this.findNext(e);this.$editor.insert(n),this.findNext(e),r.dispatchEvent("track_action",{type:"replace"})},replaceAll:function(){this.$editor||this.setEditor();if(!this.$editor)return;this.$crtSearch=null;var e=this.getOptions();e.needle=txtFind.getValue();var t={n:"\n",t:"	",r:"\r"},n=(txtReplace.getValue()||"").replace(/(\\\\)+|\\([ntr])/g,function(e,n,r){return n||t[r]});this.$editor.replaceAll(n,e),this.updateCounter(),r.dispatchEvent("track_action",{type:"replace"})},$getAce:function(){var e=a.currentEditor;if(!e||e.path!="ext/code/code"||!e.amlEditor)return;return e.amlEditor.$editor},destroy:function(){u.remove("Find/Find..."),u.remove("Find/~",200),u.remove("Find/Replace..."),h.removeCommandsByName(["replace","replacenext","replaceprevious"]),this.$destroy()}},d))}),define("ext/console/logger",["require","exports","module","ext/editors/editors"],function(e,t,n){var r=e("ext/editors/editors");t.test={};var i=512,s=/(?:\s|^|\.\/)([\w\_\$-]+(?:\/[\w\_\$-]+)+(?:\.[\w\_\$]+))?(\:\d+)(\:\d+)*/g,o=/\b((?:(?:https?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()[\]{};:'".,<>?«»“”‘’]))/i,u=/\u001b\[([\d;]+)?m/g,a=100,f=2003,l=function(e,t,n){t=parseInt(t.slice(1),10),n=n?parseInt(n.slice(1),10):0,r.gotoDocument({path:e,row:t,column:n})},c=function(e,t){return(new Array(t+1)).join(e)},h=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},p=n.exports.test.createItem=function(e,t){if(!e)return"";var n=t.workspaceDir,r=t.davPrefix,i=new RegExp(h(n)+"\\/([^:]*)(:\\d+)(:\\d+)*","g");if(e.search(s)!==-1||e.search(i)!==-1){var a="<a href='#' data-wsp='"+r+"/$1,$2,$3'>___$1$2$3</a>";e=e.replace(s,a.replace("___","")).replace(i,a.replace("___",n+"/"))}else e.search(o)!==-1&&(e=e.replace(o,"<a onclick='require(\"ext/preview/preview\").preview(\"$1\"); return false;' href='$1' target='_blank'>$1</a>"));var f=[],l="###$#$#$##0";e=e.replace(/(<a.*?a>)/gi,function(e){return f.push(e),l}),e=apf.escapeXML(e),e=e.replace(l,function(){return f.shift()});var p=0;return e=e.replace(/\s{2,}/g,function(e){return c("&nbsp;",e.length)}).replace(u,function(e,t){if(!t)return"";var n=t.split(";"),r="";if(p>0&&(t===39||t<30&&t>20))return--p,"</span>";n[0]==="1"&&(n.splice(0,1),++p,r+='<span class="term_boldColor" style="font-weight:bold">'),t=parseInt(n[0],10);if(!t)return r;if(t>=30&&t<=37){++p;var i=t%30;i>=10&&(i-=2),r+='<span class="term_ansi'+i+'Color">'}t=parseInt(n[1],10);if(!t)return r;if(t>=40&&t<=47){++p;var s=t%30;s>=10&&(s-=2),r+="<span style='background-color: rgb(0, 0, 0);'>"}return r}).replace(/(\u0007|\u001b)\[(K|2J)/g,""),p>0?e+(new Array(p+1)).join("</span>"):e},d={},v={},m,g=document.createElement("div"),y=document.createElement("div");document.body.appendChild(g),document.body.appendChild(y);var b=function(e){var t=typeof txtConsole!="undefined"&&txtConsole&&txtConsole.$ext?txtConsole.$ext:y;return typeof e=="object"&&e&&e.$ext&&e.id?{element:e.$ext,id:e.id}:typeof txtOutput=="undefined"?e?{element:y,id:"output"}:{element:g,id:"console"}:typeof e=="boolean"&&e?{element:txtOutput.$ext,id:"output"}:e==="undefined"||!e?{element:t,id:"console"}:(e.$ext||(e.$ext=t),{element:e.$ext,id:e.id})};n.exports.appendConsoleFragmentsAfterInit=function(){while(g.childNodes.length)txtConsole.$ext.appendChild(g.childNodes[0]);while(y.childNodes.length)txtOutput.$ext.appendChild(y.childNodes[0])},n.exports.logNodeStream=function(e,t,n,r){var s=b(n),o=s.element,u=s.id;o.eventsAttached!==!0&&(o.addEventListener("click",function(e){var t=e.target;if(t.hasAttribute("data-wsp"))return l.apply(null,e.target.getAttribute("data-wsp").split(",")),apf.preventDefault(e),!1}),o.eventsAttached=!0);if(!d[u]){d[u]=document.createDocumentFragment();function c(){if(o){o.appendChild(d[u]),d[u]=document.createDocumentFragment();var e=o.childNodes.length-f;for(var t=0;t<e;t++)o.removeChild(o.childNodes[3])}else typeof txtOutput!="undefined"&&(txtOutput.$ext.appendChild(d[u]),d[u]=document.createDocumentFragment())}v[u]=setInterval(function(){c()},a)}var h=e.toString().split("\n",i),m=document.createDocumentFragment();for(var g=0,y=h.length;g<y;g++){var w=document.createElement("div"),E=p(h[g],r);E&&E.length&&(w.innerHTML=E,m.appendChild(w))}d[u].appendChild(m),window.tabConsole&&setTimeout(function(){tabConsole.getPage().getElementsByTagNameNS(apf.ns.aml,"scrollbar")[0].$update()},1e3)},n.exports.killBufferInterval=function(e){var t="section"+e;v[t]&&setTimeout(function(){clearInterval(v[t])},a+a/2)};var w={prompt:"<span style='color:#86c2f6'>__MSG__</span>",command:"<span style='color:#86c2f6'><span>&gt;&gt;&gt;</span><div>__MSG__</div></span>"};n.exports.log=function(e,t,n,r,i,s){e=apf.escapeXML(e.toString()),t||(t="log"),w[t]&&(e=w[t].replace("__MSG__",e));var o=["<div"];s&&o.push(' id="',s,'"'),o.push(" class='item output_section console_",t,"'>",n||"",e,r||"","</div>");var u=b(i),a=u.element;a.innerHTML?a.innerHTML+=o.join(""):a.innerHTML=o.join(""),window.tabConsole&&setTimeout(function(){tabConsole.getPage().getElementsByTagNameNS(apf.ns.aml,"scrollbar")[0].$update()},1e3)}}),define("text!ext/console/console.css",[],function(){return".console_text {\n    font-family : menlo,courier new,fixed,swiss,sans-serif;\n    background: none;\n    font-size : 12px;\n    margin : 3px 0 0 0;\n    padding : 0px 0 3px 0;\n    color : #eee;\n    overflow : hidden;\n}\n\n.consoleInputBox {\n    background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #1d1d1d),color-stop(1, #292929));\n    background: -moz-linear-gradient(center bottom,#1d1d1d 0%,#292929 100%);\n    padding : 1px;\n    margin: 0;\n    overflow: hidden;\n    border-top: 1px solid #1f1f1f;\n    -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.06) inset;\n    -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.06) inset;\n    position: relative;\n    z-index: 999;\n}\n\n.txt_console_prompt {\n    background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #1d1d1d),color-stop(1, #292929));\n    background: -moz-linear-gradient(center bottom,#1d1d1d 0%,#292929 100%);\n    color: #acc49e;\n    font-family : menlo,courier new,fixed,swiss,sans-serif;\n    font-size : 11px;\n    padding: 7px 3px 0 7px;\n}\n.console_text .item{\n    padding : 2px 10px;\n}\n\n.console_text .red {\n    color: #c93a40;\n}\n.console_text .blue,\n.console_text .item a:link,\n.console_text .item a:hover,\n.console_text .item a:active {\n    color: #86c2f6;\n}\n.console_text .gray,\n.console_text .item a:visited {\n    color: #909090;\n}\n.console_text .white {\n    color: #eeeeee;\n}\n\n.console_date {\n    display:inline\n}\n.console_text div {\n    padding: 2px 10px;\n}\n.console_text div {\n    padding-left: 31px;\n}\n.console_text .output_section {\n    padding: 10px 0 10px 2px;\n    border-bottom: 1px solid #444;\n    overflow: hidden;\n    -webkit-transition-property: background, height;\n    -webkit-transition-duration: 0.2s;\n    -webkit-transition-delay: 0ms;\n    -webkit-transition-timing-function: ease;\n    -moz-transition-property: background, height;\n    -moz-transition-duration: 0.2s;\n    -moz-transition-delay: 0ms;\n    -moz-transition-timing-function: ease;\n}\n\n.console_text .output_section.collapsed:hover,\n.console_text .output_section.collapsed.quit_proc:hover {\n    background: #38393a;\n    cursor: default;\n}\n\n.console_text .output_section.collapsed span:hover {\n    cursor: default;\n}\n\n/** Deprecated **/\n.cli_divider {\n    display: block;\n    border-top: 1px solid #444;\n    margin: 6px 5px 6px 30px;\n}\n.console_text div.prompt_spacer {\n    padding-top: 5px;\n}\n.console_text a:link, .console_text a:hover, .console_text a:active {\n    color: #86C2F6;\n}\n.console_text a:visited {\n    color: #909090;\n}\n.console_text .prompt_spinner {\n    background: url({ide.staticPrefix}/ext/main/style/images/console_spinner_proc.gif) no-repeat 0 0;\n    display: inline;\n    width: 21px;\n    height: 14px;\n    padding: 4px 22px 4px 4px;\n    margin-left: 3px;\n    -webkit-transition-property: opacity;\n    -webkit-transition-duration: 0.3s;\n    -webkit-transition-delay: 0ms;\n    -webkit-transition-timing-function: ease;\n    -moz-transition-property: opacity;\n    -moz-transition-duration: 0.3s;\n    -moz-transition-delay: 0ms;\n    -moz-transition-timing-function: ease;\n}\n.console_text .output_section.quit_proc {\n    background-color: #372a2a;\n    box-shadow: inset 0px 0px 0px 1px #372a2a, inset 6px 0px 0px 0px #b0423f;\n}\n.console_text .output_section.loading.has_pid:hover .prompt_spinner {\n    background: url({ide.staticPrefix}/ext/main/style/images/console-action-cancel.png) no-repeat 0 0;\n}\n.console_text .output_section.loading.has_pid:hover .prompt_spinner:active {\n    background: url({ide.staticPrefix}/ext/main/style/images/console-action-cancel.png) no-repeat 0 -22px;\n}\n.console_text div.loaded .prompt_spinner {\n    background: url({ide.staticPrefix}/ext/main/style/images/cli-block-expand.png) no-repeat 1px 1px;\n}\n\n.console_text div.loaded .prompt_spinner:hover {\n    background: url({ide.staticPrefix}/ext/main/style/images/cli-block-expand.png) no-repeat -23px 1px;\n}\n\n.console_text div.loaded.collapsed .prompt_spinner {\n    background: url({ide.staticPrefix}/ext/main/style/images/cli-block-expand.png) no-repeat -48px 1px\n}\n\n.console_text div.loaded.collapsed .prompt_spinner:hover {\n    background: url({ide.staticPrefix}/ext/main/style/images/cli-block-expand.png) no-repeat -73px 1px\n}\n\n.cmd_msg > span { float: left; }\n.cmd_msg > span > span { margin:0 0 0 25px; }"}),define("text!ext/console/console.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="winDbgConsole" height="0" zindex="1000">\n        <a:vsplitbox anchors="0 0 0 0">\n            <a:tab id="tabConsole" skin="tab_console" visible="false" render2="runtime" buttons="scale,order"\n              onclose="return require(\'ext/console/console\').checkIfPageCanClose(event)">\n                <a:hbox pack="end" top="2" right="3" height="24" align="center" padding="0">\n                    <a:button id="btnConsoleClear" skin="btn_icon_only" icon="console_clear.png" margin="2 2 0 0"\n                      onclick  = "require(\'ext/console/console\').clear()" />\n                    <a:button id="btnConsoleSettings" skin="btn_icon_only"\n                      icon    = "console_settings.png"\n                      margin  = "2 4 0 0"\n                      submenu = "mnuConsoleSettings" />\n                    <a:button id="btnConsoleMax" skin="btn_icon_only" icon="console_max.png" state="true" margin="2 2 0 0"\n                      onclick = "\n                        var console = require(\'ext/console/console\');\n                        if (this.value)\n                            console.maximizeConsoleHeight();\n                        else\n                            console.restoreConsoleHeight();\n                      "/>\n                    <a:divider skin="divider_console"></a:divider>\n                    <a:button\n                      skin="btn_icon_only"\n                      icon="console_close_btn.png"\n                      class="dim22-22"\n                      margin="1 0 0 1"\n                      onclick="require(\'ext/console/console\').hide();this.blur();"/>\n                </a:hbox>\n                <a:page id="pgConsole" caption="Console" name="console">\n                    <a:text id="txtConsole"\n                      margin     = "3 0 0 0"\n                      anchors    = "0 17 0 0"\n                      flex       = "1"\n                      scrolldown = "true"\n                      focussable = "true"\n                      textselect = "true"\n                      class      = "console_text" />\n                    <a:scrollbar\n                      for       = "txtConsole"\n                      right     = "0"\n                      top       = "0"\n                      bottom    = "0"\n                      skin      = "console_scrollbar"\n                      width     = "17" />\n                </a:page>\n                <a:page id="pgOutput" caption="Output" name="output">\n                    <a:text id="txtOutput"\n                      margin     = "3 0 0 0"\n                      anchors    = "0 17 0 0"\n                      flex       = "1"\n                      scrolldown = "true"\n                      focussable = "true"\n                      textselect = "true"\n                      class      = "console_text" />\n                    <a:scrollbar\n                      for    = "txtOutput"\n                      right  = "0"\n                      top    = "0"\n                      bottom = "0"\n                      skin   = "console_scrollbar"\n                      width  = "17" />\n                </a:page>\n            </a:tab>\n\n            <a:hbox id="cliBox" class="consoleInputBox" edge="1 1 2 1" padding="0" pack="end" visible="false" height="31">\n                <a:text id="txtConsolePrompt"\n                    class="txt_console_prompt"\n                    visible="false"\n                    value="" />\n                <a:codebox id="txtConsoleInput"\n                  initial-message = \'Type "help" to get a list of commands\'\n                  margin          = "2 1 1 5"\n                  skin            = "tb_console"\n                  flex            = "1" />\n                <a:button id="btnCollapseConsole" skin="btn_console_open" icon="switch.png" state="true" height="27"\n                    value = "{!!tabConsole.visible}"\n                    onprop.value="try { require(\'ext/console/console\')[event.value ? \'show\' : \'hide\'](); } catch(e) {} " />\n            </a:hbox>\n        </a:vsplitbox>\n        \n        <a:menu id="mnuConsoleSettings">\n            <a:item type="check"\n              checked = "[{require(\'core/settings\').model}::auto/console/@autoshow]"\n              caption = "Auto-show console when running" />\n            <a:item type="check"\n              checked = "[{require(\'core/settings\').model}::auto/console/@clearonrun]"\n              caption = "Clear output on run" />\n            <a:item type="check"\n              checked = "[{require(\'core/settings\').model}::editors/code/filesearch/@consolelaunch]"\n              caption = "Open files when navigating search results with ↓ ↑" />\n        </a:menu>\n    </a:bar>\n</a:application>\n'}),define("text!ext/console/themes/arthur.css",[],function(){return"/**\n * This stylesheet is generated automatically, please don't edit manually.\n * Generated by iterm2css - http://github.com/mikedeboer/iterm2css\n */\n\n.term_ansi0Color {\n    color: rgb(61, 53, 42);\n}\n\n.term_ansi1Color {\n    color: rgb(205, 92, 92);\n}\n\n.term_ansi10Color {\n    color: rgb(136, 170, 34);\n}\n\n.term_ansi11Color {\n    color: rgb(255, 167, 93);\n}\n\n.term_ansi12Color {\n    color: rgb(135, 206, 235);\n}\n\n.term_ansi13Color {\n    color: rgb(153, 102, 0);\n}\n\n.term_ansi14Color {\n    color: rgb(176, 196, 222);\n}\n\n.term_ansi15Color {\n    color: rgb(221, 204, 187);\n}\n\n.term_ansi2Color {\n    color: rgb(134, 175, 128);\n}\n\n.term_ansi3Color {\n    color: rgb(232, 174, 91);\n}\n\n.term_ansi4Color {\n    color: rgb(100, 149, 237);\n}\n\n.term_ansi5Color {\n    color: rgb(222, 184, 135);\n}\n\n.term_ansi6Color {\n    color: rgb(176, 196, 222);\n}\n\n.term_ansi7Color {\n    color: rgb(187, 170, 153);\n}\n\n.term_ansi8Color {\n    color: rgb(85, 68, 68);\n}\n\n.term_ansi9Color {\n    color: rgb(204, 85, 51);\n}\n\n.term_backgroundColor {\n    background-color: rgb(28, 28, 28);\n}\n\n.term_boldColor {\n    color: rgb(255, 255, 255);\n}\n\n.term_cursorColor {\n    background-color: rgb(226, 187, 239);\n}\n\n.term_cursorTextColor {\n    background-color: rgb(0, 0, 0);\n}\n\n.term_foregroundColor {\n    color: rgb(221, 238, 221);\n}\n\n.term_selectedTextColor {\n    color: rgb(255, 255, 255);\n}\n\n.term_selectionColor {\n    color: rgb(77, 77, 77);\n}\n\n"}),define("ext/console/input_history",["require","exports","module"],function(e,t,n){n.exports=function(){function e(){this._history=[""],this._index=0}return e.prototype={push:function(e){this._history.push(e),this._index=this.length()},length:function(){return this._history.length},getNext:function(){this._index+=1;var e=this._history[this._index]||"";return this._index=Math.min(this.length(),this._index),e},getPrev:function(){return this._index=Math.max(0,this._index-1),this._history[this._index]}},e}()}),define("text!ext/preview/preview.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:tab skin="docktab" visible="false">\n        <a:page id="pgPreview" caption="Preview">\n            <a:bar border="0 0 0 0">\n                <a:hbox class="previewbar" height="36" align="center" edge="4 5 4" padding="5">\n                    <a:textbox id="txtPreview" style="width:100%" class="ace_searchbox tb_textbox searchbox searchTxt tb_console"\n                        flex="1" value=""\n                        onkeydown="if (event.keyCode == 13) require(\'ext/preview/preview\').refresh()" />\n                    <a:button onclick="require(\'ext/preview/preview\').refresh()" skin="btn-preview-nav" skinset="previewskin" class="refresh"></a:button>\n                    <a:divider skin="c9-divider" />\n                    <a:button onclick="require(\'ext/preview/preview\').popup()" skin="btn-preview-nav" skinset="previewskin" class="popup"></a:button>\n                    <a:divider skin="c9-divider" />\n                    <a:button onclick="require(\'ext/preview/preview\').close()" skin="btn-preview-nav" skinset="previewskin" class="close"></a:button>\n                </a:hbox>\n            </a:bar>\n            <iframe\n                class="preview_iframe"\n                onload="require(\'ext/preview/preview\').onLoad()"\n                src="" />\n            </a:page>\n    </a:tab>\n</a:application>\n'}),define("text!ext/preview/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n<a:button name="btn-preview-nav">\n    <a:style><![CDATA[\n        .btn-preview-nav {\n            height             : 24px;\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            background-repeat:no-repeat;\n            background-position: 0 0;\n            -moz-user-select: -moz-none;\n            -khtml-user-select : none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n            user-select        : none;\n            \n            background: url(images/c9-preview-repeat.png) repeat-x 0 100px;\n            border-radius: 3px;\n            \n            border: 1px solid transparent;\n        }\n\n        .btn-preview-navOver {\n            background-position : 0 0;\n            border-color: #010910;\n        }\n\n        .btn-preview-navDown {\n            background-position : 0 -33px;\n            border-color: #010910;\n        }\n\n        .btn-preview-nav .icon {\n            width                 : 24px;\n            height                : 23px;\n            -webkit-border-radius : 3px;\n            -moz-border-radius    : 3px;\n            border-radius         : 3px;\n            margin-left: 1px;\n        }\n        \n        .btn-preview-nav.close .icon {\n            background: url(images/c9-preview-repeat.png) no-repeat 0 -66px;\n        }\n        \n        .btn-preview-nav.refresh .icon {\n            background: url(images/c9-preview-repeat.png) no-repeat 0 -89px;\n        }\n        \n        .btn-preview-nav.popup .icon {\n            background: url(images/c9-preview-repeat.png) no-repeat 0 -114px;\n        }\n        \n        .btn-preview-nav.goforward .icon {\n            background: url(images/c9-preview-repeat.png) no-repeat 0 -186px;\n        }\n        \n        .btn-preview-navDisabled.goforward .icon {\n            background: url(images/c9-preview-repeat.png) no-repeat 0 -210px;\n        }\n        \n        .btn-preview-nav.goback .icon {\n            background: url(images/c9-preview-repeat.png) no-repeat 0 -138px;\n        }\n        \n        .btn-preview-navDisabled.goback .icon {\n            background: url(images/c9-preview-repeat.png) no-repeat 0 -162px;\n        }\n    ]]></a:style>\n\n     <a:presentation>\n        <a:main caption="div" label="div" background="." icon="div">\n            <div class="btn-preview-nav">\n                <div class="icon"/>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n</a:skin>\n'}),define("text!ext/preview/style/style.css",[],function(){return'.previewbar {\n    position : relative;\n    background: url("{ide.staticPrefix}/ext/preview/style/images/c9-preview-repeat.png") repeat-x 0 -244px;\n    border-bottom: 1px solid #000000;\n}\n.preview_iframe {\n    border: none;\n    width:100%;\n    height:100%;\n}\n'}),define("text!ext/preview/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox class="underlined" label="Preview Running Apps"\n      value="[preview/@running_app]" skin="checkbox_grey" position="1000"/>\n</a:application>\n'}),define("ext/preview/preview",["require","exports","module","core/ide","core/ext","core/util","ext/settings/settings","ext/menus/menus","ext/dockpanel/dockpanel","ext/editors/editors","text!ext/preview/preview.xml","text!ext/preview/skin.xml","text!ext/preview/style/style.css","text!ext/preview/settings.xml"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("ext/settings/settings"),u=e("ext/menus/menus"),a=e("ext/dockpanel/dockpanel"),f=e("ext/editors/editors"),l=e("text!ext/preview/preview.xml"),c=e("text!ext/preview/skin.xml"),h=e("text!ext/preview/style/style.css"),p=e("text!ext/preview/settings.xml"),d="ext/preview/preview";n.exports=i.register(d,{name:"Preview",dev:"Ajax.org",type:i.GENERAL,alone:!0,markup:l,$name:d,$button:"pgPreview",skin:{id:"previewskin",data:c,"media-path":r.staticPrefix+"/ext/preview/style/images/","icon-path":r.staticPrefix+"/ext/preview/style/icons/"},css:s.replaceStaticPrefix(h),deps:[f],autodisable:i.ONLINE|i.LOCAL,disableLut:{terminal:!0},nodes:[],live:null,_getDockBar:function(){return a.getBars(this.$name,this.$button)[0]},_getDockButton:function(){return a.getButtons(this.$name,this.$button)[0]},onLoad:function(){},hook:function(){var e=this;o.addSettings("General",p),this.nodes.push(u.$insertByIndex(barTools,new apf.button({skin:"c9-toolbarbutton-glossy","class":"preview",tooltip:"Preview in browser",caption:"Preview",disabled:!0,onclick:function(){var t=r.getActivePage();if(t.$editor===e)return;var n=t.$doc,i=n.getNode().getAttribute("path"),s=location.protocol+"//"+location.host+i;e.preview(s,{path:i,value:n.getValue()})}}),10)),a.addDockable({expanded:-1,width:400,"min-width":400,barNum:2,headerVisibility:"false",sections:[{width:360,height:300,buttons:[{caption:"Preview Apps",ext:[this.$name,this.$button],hidden:!1}]}]}),a.register(this.$name,this.$button,{menu:"Preview Apps",primary:{backgroundImage:r.staticPrefix+"/ext/main/style/images/sidebar_preview_icon.png",defaultState:{x:-11,y:-10},activeState:{x:-11,y:-46}}},function(){return i.initExtension(e),pgPreview}),r.addEventListener("tab.afterswitch",function(t){e.enable()}),r.addEventListener("afterfilesave",e.onFileSave.bind(e)),r.addEventListener("closefile",function(t){tabEditors.getPages().length==1&&e.disable()}),r.addEventListener("settings.save",function(t){if(e.inited){var n=txtPreview.getValue();if(n){var r={visible:e.isVisible(),url:n,live:e.live&&{path:e.live.path}};t.model.setQueryValue("auto/preview/text()",JSON.stringify(r))}}}),r.addEventListener("extload",function(t){r.addEventListener("settings.load",function(t){o.setDefaults("preview",[["running_app","false"]]);var n=t.model.queryValue("auto/preview/text()");if(n){var r=JSON.parse(n);r.visible&&e.refresh(r.url,r.live)}})}),r.addEventListener("dockpanel.loaded",function(t){e.hidePageHeader()}),i.initExtension(this)},isVisible:function(){var e=this._getDockButton();return e&&e.hidden&&e.hidden===-1},hidePageHeader:function(){var e=this._getDockButton();if(!e||!e.cache)return;var t=e.cache.$dockpage.$pHtmlNode;t.children.length===4&&(t.removeChild(t.children[2]),t.children[2].style.top=0)},onFileSave:function(){if(!this.live)return;var e=this,t=tabEditors.getPages().filter(function(t){return e.live.path===t.$doc.getNode().getAttribute("path")})[0];t&&(this.live.value=t.$doc.getValue());var n=this.getIframe().$ext;if(!n||!n.contentWindow)return;var r=n.contentWindow.document.getElementsByTagName("html")[0];r.innerHTML=this.live.value},preview:function(e,t){var n=this._getDockBar();a.showBar(n),a.expandBar(n),a.showSection(this.$name,this.$button),this.hidePageHeader();var r=this.getIframe();r.$ext.src!==e&&this.refresh(e),this.live=t},popup:function(e){e=e||txtPreview.getValue(),window.open(e,"_blank")},refresh:function(e){var t=this.getIframe();e=e||txtPreview.getValue(),t.$ext.src=e,txtPreview.setValue(e),o.save()},close:function(){a.hideSection(this.$name,this.$button),this.live=null,o.save()},init:function(){apf.importCssString(this.css||"")},getIframe:function(){return pgPreview.selectSingleNode("iframe")},enable:function(){var e=r.getActivePage(),t=e&&e.getModel().data.getAttribute("contenttype")||"";if(this.disableLut[t])return this.disable();this.$enable()},disable:function(){this.live=null,this.$disable()}})}),define("ext/console/parser",["require","exports","module"],function(e,t,n){n.exports=function(e){var t=[],n=0,r="",i=!1,s=e.length;for(var o=0;o<s;o++){var u=e.charAt(o);t[n]||(t[n]=""),/["'`]/.test(u)?(r.length?r===u?r="":t[n]+=u:r=u,i=!1):/\s/.test(u)?r.length?(i=!1,t[n]+=u):i||(i=!0,n+=1):(i=!1,t[n]+=u)}return t[t.length-1]===""&&t.pop(),t}}),define("ext/console/output",["require","exports","module"],function(e,t,n){n.exports={general:{"i read the source code":"<3",lpr:"PC LOAD LETTER","hello joshua":"How about a nice game of Global Thermonuclear War?",xyzzy:"Nothing happens.",hello:"Why hello there!",fuck:"I have a headache.",moo:"moo",hi:"Hi.",ssh:"ssh, this is a library.","use the force luke":"I believe you mean source.","use the source luke":"I'm not luke, you're luke!",serenity:"You can't take the sky from me.","enable time travel":"TARDIS error: Time Lord missing.",ed:"You are not a diety."},getPredefinedOutput:function(e){var t,n=this[e[0]];return n?(t=e.slice(1).join(" ").trim(),n[t]||n.__default__.replace("%s",e[0])):(t=e.join(" ").trim(),this.general[t]||"")}}}),define("ext/console/console",["require","exports","module","core/ide","core/util","ext/menus/menus","ext/commands/commands","core/ext","core/settings","ext/console/logger","text!ext/console/console.css","text!ext/console/console.xml","text!ext/console/themes/arthur.css","ext/console/input_history","ext/anims/anims","ext/preview/preview","ext/searchinfiles/searchinfiles","ext/console/parser","ext/console/output","ext/editors/editors"],function(e,t,n){var r,i,s,o=e("core/ide"),u=e("core/util"),a=e("ext/menus/menus"),f=e("ext/commands/commands"),l=e("core/ext"),c=e("core/settings"),h=e("ext/console/logger"),p=e("text!ext/console/console.css"),d=e("text!ext/console/console.xml"),v=e("text!ext/console/themes/arthur.css"),m=e("ext/console/input_history"),g=e("ext/anims/anims"),y=e("ext/preview/preview"),b=9,w=13,E=38,S=27,x=40,T=[b,w,E,S,x];n.exports=l.register("ext/console/console",{name:"Console",dev:"Cloud9 IDE, Inc.",type:l.GENERAL,alone:!0,markup:d,css:u.replaceStaticPrefix(p)+v,height:200,hidden:!0,cliInputHistory:new m,command_id_tracer:1,tracerToPidMap:{},pidToTracerMap:{},hiddenInput:!0,nodes:[],minHeight:150,maxHeight:window.innerHeight-70,collapsedHeight:31,$collapsedHeight:0,autoOpen:!0,excludeParent:!0,pageIdToPidMap:{},onMessageMethods:{cd:function(e,t){var n=e.body;n.cwd&&(this.$cwd=n.cwd.replace(o.workspaceDir,"/workspace"),h.logNodeStream("Working directory changed",null,t,o))},error:function(e,t){h.logNodeStream(e.body.errmsg,null,t,o)},info:function(e,t){h.logNodeStream(e.body,null,t,o)},ps:function(e,t){e.body.extra.sentatinit&&this.recreateLogStreamBlocks(e.body.out)},kill:function(e,t){h.logNodeStream(e.body,null,t,o)},__default__:function(e,t){var n=e.body;n&&(n.out&&h.logNodeStream(n.out,null,t,o),n.err&&h.logNodeStream(n.err,null,t,o))}},recreateLogStreamBlocks:function(e){var t=window.cloud9config.runners;for(var n in e){if(this.pidToTracerMap[n])continue;var r=e[n];if(t.indexOf(r.type)===-1)continue;var i,s;if(r.extra){s=r.extra.command_id,i=r.extra.original_line;if(!i)continue;this.createOutputBlock(this.getPrompt(i),!1,s),r.type==="run-npm"&&(txtConsolePrompt.setValue("$ "+i.split(" ")[0]),txtConsolePrompt.show())}else s=this.createProcessLog(n,r.type);this.tracerToPidMap[s]=n,this.pidToTracerMap[n]=s;var o=document.getElementById("console_section"+s);o&&(o.setAttribute("rel",s),apf.setStyleClass(o,"has_pid")),r.extra?this.command_id_tracer=Math.max(this.command_id_tracer,s):this.command_id_tracer++}},getLogStreamOutObject:function(e,t,n){if(typeof e=="undefined")return null;t&&(e=this.pidToTracerMap[e]);var r="section"+e,i=document.getElementById("console_"+r);return!i&&typeof n!="undefined"&&(this.createOutputBlock(this.getPrompt(n),null,e),i=document.getElementById("console_"+r)),{$ext:i,id:r}},help:function(e){var t=Object.keys(f.commands),n="				";h.logNodeStream(t.sort().map(function(e){return e?e+n+(f.commands[e].hint||""):""}).join("\n"),null,this.getLogStreamOutObject(e.tracer_id),o)},clear:function(){var t=tabConsole.getPage();if(t.childNodes[0].tagName.indexOf("codeeditor")>=0){var n=e("ext/searchinfiles/searchinfiles").searchConsole;n.$editor.session.getDocument().setValue("")}else if(t.childNodes[0].tagName.indexOf("text")===-1)return;var r=t.childNodes[0].$ext,i=r.getElementsByClassName("output_section");for(var s=0;s<i.length;){if(i[0].className.indexOf("loaded")===-1){s++;continue}i[0].parentNode.removeChild(i[0])}return!1},switchconsole:function(){if(apf.activeElement===self.txtConsoleInput){var e=tabEditors.getPage();e&&e.$editor.focus&&e.$editor.focus()}else this.hiddenInput?this.showInput(!0):txtConsoleInput.focus()},showOutput:function(){tabConsole.set("output")},getCwd:function(){return this.$cwd&&this.$cwd.replace("/workspace",o.workspaceDir)},write:function(e,t){typeof e=="string"&&(e=e.split("\n"));var n=this.getLogStreamOutObject(t.tracer_id);e.forEach(function(e){h.logNodeStream(e,null,n,o)})},createOutputBlock:function(e,t,n){var r=n||this.command_id_tracer,i=['<div class="prompt_spinner"',' id="spinner',r,'" onclick="return require(\'ext/console/console\').handleOutputBlockClick(event)"></div>'].join(""),s="console_section"+r;this.inited&&(typeof t=="undefined"||typeof t=="boolean"&&!t)&&(t={$ext:tabConsole.getPage().childNodes[0].$ext,id:s}),h.log(e,"prompt",i,'<div class="prompt_spacer"></div>',t,s);var o=document.getElementById(s);return apf.setStyleClass(o,"loading"),r},evalInputCommand:function(t){if(txtConsolePrompt.visible){var n=tabConsole.getPage().$ext,r=n.getElementsByClassName("loading"),u=r[r.length-1];u&&(u.lastChild.innerHTML+=t);var a=tabConsole.getPage().$uniqueId,l={command:"npm-module-stdin",line:t,pid:this.pageIdToPidMap[a].pid};o.send(l);return}(tabConsole.activepage==="output"||tabConsole.activepage==="pgSFResults")&&tabConsole.set("console"),i||(i=e("ext/console/parser"));var p=i(t);if(!p||p.length===0)return;p[0]=p[0].replace(/["'`]/g,""),this.cliInputHistory.push(t),t!=="clear"&&t!=="newtab"&&this.createOutputBlock(this.getPrompt(t));var d=!0,v=p[0];s||(s=e("ext/console/output"));var m=s.getPredefinedOutput(p);if(m!=="")this.markProcessAsCompleted(this.command_id_tracer),h.logNodeStream(m,null,this.getLogStreamOutObject(this.command_id_tracer),o),this.command_id_tracer++;else{var l={command:v,argv:p,line:t,cwd:this.getCwd(),requireshandling:!f.commands[v],tracer_id:this.command_id_tracer,extra:{command_id:this.command_id_tracer}};v.trim()==="npm"&&(l.version=c.model.queryValue("auto/node-version/@version")||"auto"),d=this.sendCommandToExtensions(v,l)}d===!0&&this.show()},sendCommandToExtensions:function(e,t){o.dispatchEvent("track_action",{type:"console",cmd:e,argv:t.argv});if(l.execCommand(e,t)!==!0){var n="consolecommand."+e,r="consolecommand",i=o.dispatchEvent(n,{data:t}),s=o.dispatchEvent(r,{data:t});if(i===!1||s===!1)return!1;if(!!o.onLine)return t.extra={command_id:this.command_id_tracer,original_line:t.line,page_id:tabConsole.getPage().$uniqueId},tabConsole.getPage().setCaption(e),o.send(t),this.command_id_tracer++,!0;this.write("Cannot send command to server. You are currently offline.",{tracer_id:this.command_id_tracer})}return this.markProcessAsCompleted(t.tracer_id),this.command_id_tracer++,!0},markProcessAsCompleted:function(e,t){t&&(e=this.pidToTracerMap[e]);var n=document.getElementById("spinner"+e);window.txtConsolePrompt&&txtConsolePrompt.hide();if(n){h.killBufferInterval(e);var r=n.parentNode,i=apf.findHost(r.parentNode.parentNode);i&&i.id!=="pgOutput"&&i.setCaption("Console"),r.className.indexOf("quitting")!==-1&&apf.setStyleClass(r,"quit_proc",["quitting_proc"]),setTimeout(function(){n=document.getElementById("spinner"+e),n.style.opacity=0,setTimeout(function(){n=document.getElementById("spinner"+e),r=n.parentNode,apf.setStyleClass(r,"loaded",["loading"]),n.setAttribute("style",""),n.style.opacity="1"},300)},200)}},createProcessLog:function(e,t){t=t?t.replace(/-debug$/,""):"generic",t=t[0].toUpperCase()+t.substring(1);var n=this.createOutputBlock("Running "+t+" Process",!0);this.tracerToPidMap[n]=e,this.pidToTracerMap[e]=n;var r=this.getLogStreamOutObject(n).$ext;return r.setAttribute("rel",n),apf.setStyleClass(r,"has_pid"),this.command_id_tracer++,n},onMessage:function(e){if(!e.message.type)return;var t=e.message,n=t.extra;!n&&t.body&&(n=t.body.extra);if(n){if(n.linereport_id)return;n.command_id>=this.command_id_tracer&&(this.command_id_tracer=n.command_id+1)}var r=window.cloud9config.runners,i;if((i=/^(\w+)-start$/.exec(t.type))&&r.indexOf(i[1])>=0){var s=c.model.queryValue("auto/console/@clearonrun");apf.isTrue(s)&&window.txtOutput&&txtOutput.clear(),this.createProcessLog(t.pid,i[1]);return}if((i=/^([\w-]+)-web-start$/.exec(t.type))&&r.indexOf(i[1])>=0)(apf.isTrue(c.model.queryValue("preview/@running_app"))||y.isVisible())&&y.preview(t.url);else{if((i=/^(\w+)-data$/.exec(t.type))&&r.indexOf(i[1])>=0){t.extra&&t.extra.tip&&(t.data="[1;32;40m"+t.data,function(){var e=t.data.match(/http\:\/\/([\w_-]+)\.([\w_-]+)\./);if(!e||o.env=="local")return;var n=e[2],r=e[1],i=window.location.pathname.split("/").filter(function(e){return!!e});r!==o.projectName?apf.ajax("/api/debug",{method:"POST",contentType:"application/json",data:JSON.stringify({agent:navigator.userAgent,type:"Concurrency bug, project does not match",e:[n,r,i],workspaceId:o.workspaceId})}):i.length&&n!==i[0]&&apf.ajax("/api/debug",{method:"POST",contentType:"application/json",data:JSON.stringify({agent:navigator.userAgent,type:"Concurrency bug, user does not match",e:[n,r,i],workspaceId:o.workspaceId})})}()),h.logNodeStream(t.data,t.stream,this.getLogStreamOutObject(t.pid,!0),o);return}if((i=/^(\w+)-exit$/.exec(t.type))&&r.indexOf(i[1])>=0){this.markProcessAsCompleted(t.pid,!0);return}}switch(t.type){case"npm-module-start":if(!n.original_line||!this.inited)return;var u=n.original_line.split(" ")[0];this.pageIdToPidMap[n.page_id]={pid:t.pid,prompt:u},txtConsolePrompt.setValue("$ "+u),txtConsolePrompt.show();break;case"npm-module-data":if(!n.original_line||!this.inited)return;break;case"npm-module-exit":if(!n.original_line||!this.inited)return;this.pageIdToPidMap[n.page_id]=null,tabConsole.getPage().$uniqueId===n.page_id&&txtConsolePrompt.hide();break;case"kill":t.err&&h.logNodeStream(t.err,null,this.getLogStreamOutObject(n.command_id),o);break;default:}if(t.type.match(/-start$/)){var a=n&&n.command_id;if(!a)return;this.tracerToPidMap[a]=t.pid,this.pidToTracerMap[t.pid]=a;var f=this.getLogStreamOutObject(a,null,n.original_line).$ext;f.setAttribute("rel",a),apf.setStyleClass(f,"has_pid");return}if(t.type.match(/-data$/)){var l="tracer",p=n&&n.command_id;if(!p){if(n)return;l="pid",p=t.pid}h.logNodeStream(t.data,t.stream,this.getLogStreamOutObject(p,l==="pid"),o);return}if(t.type.match(/-exit$/)){n&&n.command_id?this.markProcessAsCompleted(n.command_id):this.markProcessAsCompleted(t.pid,!0);return}if(t.type!=="result")return;var d;n&&(d=this.getLogStreamOutObject(n.command_id,null,n.original_line)),this.onMessageMethods[t.subtype]?this.onMessageMethods[t.subtype].call(this,t,d):this.onMessageMethods.__default__.call(this,t,d);if(n){if(t.subtype==="internal-isfile"){var v=t.body.isfile?"File opened":"File not found";h.logNodeStream(v,null,this.getLogStreamOutObject(n.command_id),o)}this.markProcessAsCompleted(n.command_id)}o.dispatchEvent("consoleresult."+t.subtype,{data:t.body})},getPrompt:function(e){var t=this.username;return t||(t=(o.workspaceId.match(/user\/(\w+)\//)||[,"guest"])[1]),"["+t+"@cloud9]:"+this.$cwd+"$"+(" "+e||"")},hook:function(){var e=this;this.markupInsertionPoint=consoleRow,o.addEventListener("socketMessage",this.onMessage.bind(this)),f.addCommand({name:"help",hint:"show general help information and a list of available commands",exec:function(){e.help({tracer_id:e.command_id_tracer})}}),f.addCommand({name:"newtab",hint:"add a new tab to the CLI",exec:function(){e.newtab()}}),f.addCommand({name:"clear",hint:"clear all the messages from the console",exec:function(){e.clear()}}),f.addCommand({name:"switchconsole",bindKey:{mac:"Shift-Esc",win:"Shift-Esc"},hint:"toggle focus between the editor and the command line",exec:function(){e.switchconsole()}}),f.addCommand({name:"toggleconsole",bindKey:{mac:"Ctrl-Esc",win:"F6"},exec:function(){e.hidden?e.show():e.hide()}}),f.addCommand({name:"toggleinputbar",exec:function(){e.hiddenInput?e.showInput():e.hideInput()}}),this.nodes.push(a.addItemByPath("Goto/Switch to Command Line",new apf.item({command:"switchconsole"}),350),this.mnuItemConsoleExpanded=a.addItemByPath("View/Console",new apf.item({type:"check",command:"toggleconsole",checked:"[{require('ext/settings/settings').model}::auto/console/@expanded]"}),700),this.mnuItemInput=a.addItemByPath("View/Command Line",new apf.item({type:"check",command:"toggleinputbar",checked:"[{require('ext/settings/settings').model}::auto/console/@showinput]"}),800)),a.addItemByPath("Tools/~",new apf.divider,3e4);var t={Git:[["Status","git status"],["Push","git push"],["Pull","git pull"],["Stash","git stash"],["Commit","git commit -m ",null,null,!0],["Checkout","git checkout ",null,null,!0]],Hg:[["Sum","hg sum"],["Push","hg push"],["Pull","hg pull"],["Status","hg status"],["Commit","hg commit -m ",null,null,!0],["Parents","hg parents ",null,null,!0]],Npm:[["Install","npm install"],["Uninstall","npm uninstall",null,null,!0]]},n=4e4;Object.keys(t).forEach(function(r){a.addItemByPath("Tools/"+r+"/",null,n+=1e3);var i=t[r],s=0;i.forEach(function(t){a.addItemByPath("Tools/"+r+"/"+t[0],new apf.item({onclick:function(){e.showInput(),txtConsoleInput.setValue(t[1]),t[4]||(txtConsoleInput.execCommand("Return"),txtConsole.$container.scrollTop=txtConsole.$container.scrollHeight),txtConsoleInput.focus()}}),s+=100)})}),o.addEventListener("settings.load",function(t){c.setDefaults("auto/console",[["autoshow","true"],["clearonrun","false"]]),e.height=t.model.queryValue("auto/console/@height")||e.height,apf.isTrue(t.model.queryValue("auto/console/@maximized"))?(e.show(!0),e.maximizeConsoleHeight()):apf.isTrue(t.model.queryValue("auto/console/@expanded"))&&e.show(!0);var n=t.model.queryValue("auto/console/@showinput");n===""?e.showInput(!1,!0):apf.isTrue(n)&&e.showInput(null,!0)}),stProcessRunning.addEventListener("activate",function(){var t=c.model.queryValue("auto/console/@autoshow");e.autoOpen&&apf.isTrue(t)?setTimeout(function(){e.show(),e.showOutput()},200):self.tabConsole&&tabConsole.visible&&e.showOutput()})},init:function(){function n(e){!e.ctrlKey&&!e.metaKey&&!e.altKey&&!e.shiftKey&&apf.isCharacter(e.keyCode)&&txtConsoleInput.focus()}var t=this;this.$cwd="/workspace",apf.importCssString(this.css),o.addEventListener("consoleresult.internal-isfile",function(t){var n=t.data,i=n.cwd.replace(o.workspaceDir,o.davPrefix);r||(r=e("ext/editors/editors")),n.isfile&&r.gotoDocument({path:i})}),tabConsole.addEventListener("afterrender",function(){txtOutput.addEventListener("keydown",n),txtConsole.addEventListener("keydown",n);var e=c.model.queryValue("auto/console/@active");e&&!this.getPage(e)&&(e=null),e||(e=this.getPages()[0].name),this.set(e)}),tabConsole.addEventListener("afterswitch",function(e){var n=t.pageIdToPidMap[e.nextPage.$uniqueId];n?(txtConsolePrompt.setValue(n.prompt),txtConsolePrompt.show()):txtConsolePrompt.hide(),c.model.setQueryValue("auto/console/@active",e.nextPage.name),setTimeout(function(){txtConsoleInput.focus()})}),this.splitter=winDbgConsole.parentNode.$handle,this.splitter.addEventListener("dragdrop",function(e){c.model.setQueryValue("auto/console/@height",t.height=winDbgConsole.height)}),this.nodes.push(winDbgConsole),txtConsoleInput.ace.commands.bindKeys({up:function(e){e.setValue(t.cliInputHistory.getPrev(),1)},down:function(e){e.setValue(t.cliInputHistory.getNext(),1)},Return:function(e){var n=e.getValue().trim();if(n==="/?")return!1;t.evalInputCommand(n),e.setValue(""),txtConsole.$container.scrollTop=txtConsole.$container.scrollHeight}}),this.logged.length&&this.logged.forEach(function(e){txtConsole.addValue(e)}),f.addCommand({name:"escapeconsole",bindKey:{mac:"Esc",win:"Esc"},isAvailable:function(){return apf.activeElement==txtConsoleInput},exec:function(){t.switchconsole()}}),f.addCommand({name:"abortclicommand",bindKey:{mac:"Ctrl-C",win:"Ctrl-C"},isAvailable:function(){if(apf.activeElement===txtConsoleInput){var e=window.getSelection(),t=e.getRangeAt(0);if(t.endOffset-t.startOffset===0)return!0}return!1},exec:function(){t.killProcess()}}),h.appendConsoleFragmentsAfterInit(),t.getRunningServerProcesses()},newtab:function(){var e=tabConsole.add("Console");e.setAttribute("closebtn",!0);var t=e.appendChild(new apf.text({margin:"3 0 0 0",anchors:"0 17 0 0",flex:"1",scrolldown:"true",focussable:"true",textselect:"true","class":"console_text"}));e.appendChild(new apf.scrollbar({"for":t,right:"0",top:"0",bottom:"0",skin:"console_scrollbar",width:"17"})),tabConsole.set(e)},getRunningServerProcesses:function(){var e={command:"ps",argv:null,line:"ps",cwd:this.getCwd(),requireshandling:!0,tracer_id:this.command_id_tracer,extra:{sentatinit:!0}};o.send(e)},handleOutputBlockClick:function(e){var t=e.target.parentNode;t.className.indexOf("loaded")!==-1?t.className.indexOf("collapsed")!==-1?this.expandOutputBlock(t):this.collapseOutputBlock(t):this.killProcess(t)},killProcess:function(e){var t;typeof e=="undefined"?(t=this.command_id_tracer-1,e=document.getElementById("console_section"+t)):t=parseInt(e.getAttribute("rel"),10);var n=this.tracerToPidMap[t];if(!n)return;apf.setStyleClass(e,"quitting_proc"),h.logNodeStream("Process terminated",null,this.getLogStreamOutObject(t),o),this.markProcessAsCompleted(n,!0),o.send({command:"kill",pid:n})},checkIfPageCanClose:function(e){return e.page.childNodes[0].$ext.getElementsByClassName("loading").length?!1:!0},expandOutputBlock:function(e,t){if(typeof t!="undefined"&&t.target.className.indexOf("prompt_spinner")!==-1)return;var n=apf.findHost(e);n.$scrolldown=!1,apf.setStyleClass(e,null,["collapsed"]),e.style.height=e.scrollHeight-20+"px",setTimeout(function(){apf.layout.forceResize(tabConsole.$ext)},200)},collapseOutputBlock:function(e){apf.setStyleClass(e,"collapsed"),e.style.height="14px",setTimeout(function(){apf.layout.forceResize(tabConsole.$ext);var t=apf.findHost(e),n=t.$scrollArea;t.$scrolldown=n.scrollTop>=n.scrollHeight-n.offsetHeight+apf.getVerBorders(n)},200),e.setAttribute("onclick",'require("ext/console/console").expandOutputBlock(this, event)')},logged:[],log:function(e){this.inited?txtConsole.addValue(e):this.logged.push(e)},maximizeConsoleHeight:function(){if(this.maximized)return;this.maximized=!0,apf.document.documentElement.appendChild(winDbgConsole),winDbgConsole.setAttribute("anchors","0 0 0 0"),this.lastZIndex=winDbgConsole.$ext.style.zIndex,winDbgConsole.removeAttribute("height"),winDbgConsole.$ext.style.maxHeight="10000px",winDbgConsole.$ext.style.zIndex=9e5,c.model.setQueryValue("auto/console/@maximized",!0),btnConsoleMax.setValue(!0)},restoreConsoleHeight:function(){if(!this.maximized)return;this.maximized=!1,consoleRow.appendChild(winDbgConsole),winDbgConsole.removeAttribute("anchors"),this.maxHeight=window.innerHeight-70,winDbgConsole.$ext.style.maxHeight=this.maxHeight+"px",winDbgConsole.setAttribute("height",this.maxHeight&&this.height>this.maxHeight?this.maxHeight:this.height),winDbgConsole.$ext.style.zIndex=this.lastZIndex,c.model.setQueryValue("auto/console/@maximized",!1),btnConsoleMax.setValue(!1)},showInput:function(e,t){var n=this;if(!this.hiddenInput)return;l.initExtension(this),this.$collapsedHeight=this.collapsedHeight,cliBox.show();if(e){var n=this;txtConsoleInput.addEventListener("blur",function(){n.hiddenInput&&n.hideInput(!0),txtConsoleInput.removeEventListener("blur",arguments.callee)}),txtConsoleInput.focus()}else c.model.setQueryValue("auto/console/@showinput",!0),this.hiddenInput=!1;var r="cubic-bezier(.10, .10, .25, .90)",i=cliBox.$ext;n.hidden?(i.style.minHeight=n.collapsedHeight-apf.getHeightDiff(i)+"px",i.style.bottom="",document.body.scrollTop=0,g.animateSplitBoxNode(winDbgConsole,{height:n.collapsedHeight+"px",timingFunction:r,duration:.2,immediate:t},function(){i.style.minHeight="",i.style.bottom=0,apf.layout.forceResize()})):(i.scrollTop=0,document.body.scrollTop=0,i.style.bottom="-"+n.collapsedHeight+"px",tabConsole.$ext.style.bottom=0,g.animate(tabConsole,{bottom:n.collapsedHeight+"px",timingFunction:r,duration:.2,immediate:t}),g.animate(cliBox,{bottom:"0px",timingFunction:r,duration:.2,immediate:t},function(){cliBox.parentNode.$ext.style.overflow="",cliBox.setHeight(n.collapsedHeight),apf.layout.forceResize()}))},hideInput:function(e,t){var n=this;if(!e&&(!this.inited||this.hiddenInput))return;this.$collapsedHeight=0;var r="cubic-bezier(.10, .10, .25, .90)",i=cliBox.$ext;n.hidden?(i.style.minHeight=n.collapsedHeight-apf.getHeightDiff(i)+"px",i.style.bottom="",document.body.scrollTop=0,g.animateSplitBoxNode(winDbgConsole,{height:"0px",timingFunction:r,duration:.2,immediate:t},function(){i.style.minHeight="",i.style.bottom=0,cliBox.hide(),apf.layout.forceResize()})):(i.scrollTop=0,document.body.scrollTop=0,g.animate(tabConsole,{bottom:"0px",timingFunction:r,duration:.2,immediate:t}),g.animate(cliBox,{bottom:"-"+n.collapsedHeight+"px",timingFunction:r,duration:.2,immediate:t},function(){cliBox.parentNode.$ext.style.overflow="",cliBox.setHeight(0),cliBox.hide(),apf.layout.forceResize()})),c.model.setQueryValue("auto/console/@showinput",!1),this.hiddenInput=!0},show:function(e){l.initExtension(this),this._show(!0,e)},hide:function(e){this._show(!1,e)},_show:function(e,t){var n=this,r=tabConsole.getPage("pgSFResults");if(this.hidden!=e)return;this.hidden=!e;if(this.animating)return;this.animating=!0;var i=function(){n.onFinishTimer&&clearTimeout(n.onFinishTimer),n.onFinishTimer=setTimeout(function(){e?(winDbgConsole.$ext.style.minHeight=n.minHeight+"px",winDbgConsole.minheight=n.minHeight,n.maxHeight=window.innerHeight-70,winDbgConsole.$ext.style.maxHeight=n.maxHeight+"px"):tabConsole.hide(),winDbgConsole.height=s+1,winDbgConsole.setAttribute("height",s),winDbgConsole.$ext.style[apf.CSSPREFIX+"TransitionDuration"]="",n.animating=!1,c.model.setQueryValue("auto/console/@expanded",e),apf.layout.forceResize()},100)},s,o=apf.isTrue(c.model.queryValue("general/@animateui"));if(e){s=Math.max(this.minHeight,Math.min(this.maxHeight,this.height)),tabConsole.show(),winDbgConsole.$ext.style.minHeight=0,winDbgConsole.$ext.style.height=this.$collapsedHeight+"px",cliBox.$ext.style.height="28px";if(!t&&o){if(r){var u=r.childNodes[0].$editor.renderer;u.onResize(!0,null,null,s)}g.animateSplitBoxNode(winDbgConsole,{height:s+"px",timingFunction:"cubic-bezier(.30, .08, 0, 1)",duration:.3},i)}else i()}else s=this.$collapsedHeight,winDbgConsole.parentNode!=consoleRow&&this.restoreConsoleHeight(),winDbgConsole.$ext.style.minHeight=0,winDbgConsole.$ext.style.maxHeight="10000px",!t&&o?g.animateSplitBoxNode(winDbgConsole,{height:s+"px",timingFunction:"ease-in-out",duration:.3},i):i()},destroy:function(){f.removeCommandsByName(["help","clear","switchconsole","toggleconsole","escapeconsole","toggleinputbar"]),this.$destroy()}})}),define("ext/searchinfiles/searchinfiles",["require","exports","module","core/ide","core/ext","core/util","core/settings","ext/editors/editors","ext/filesystem/filesystem","ext/menus/menus","text!ext/searchinfiles/skin.xml","text!ext/searchinfiles/searchinfiles.xml","ext/commands/commands","ext/tooltip/tooltip","ext/searchreplace/libsearch","ext/searchreplace/searchreplace","ext/anims/anims","ace/edit_session","ace/document","ext/console/console"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("core/settings"),u=e("ext/editors/editors"),a=e("ext/filesystem/filesystem"),f=e("ext/menus/menus"),l=e("text!ext/searchinfiles/skin.xml"),c=e("text!ext/searchinfiles/searchinfiles.xml"),h=e("ext/commands/commands"),p=e("ext/tooltip/tooltip"),d=e("ext/searchreplace/libsearch"),v=e("ext/searchreplace/searchreplace"),m=e("ext/anims/anims"),g=e("ace/edit_session").EditSession,y=e("ace/document").Document;n.exports=i.register("ext/searchinfiles/searchinfiles",apf.extend({name:"Search in files",dev:"Ajax.org",type:i.GENERAL,alone:!0,offline:!1,autodisable:i.ONLINE|i.LOCAL,replaceAll:!1,markup:c,skin:{id:"searchinfiles",data:l,"media-path":r.staticPrefix+"/ext/searchinfiles/images/"},pageTitle:"Search Results",pageID:"pgSFResults",nodes:[],searchPage:null,searchFilePath:r.davPrefix+"/search_results.c9search",searchContentType:"c9search",hook:function(){var e=this;this.markupInsertionPoint=searchRow,h.addCommand({name:"searchinfiles",hint:"search for a string through all files in the current workspace",bindKey:{mac:"Shift-Command-F",win:"Ctrl-Shift-F"},exec:function(){e.toggleDialog(1)}}),this.nodes.push(f.addItemByPath("Find/~",new apf.divider,1e4),f.addItemByPath("Find/Find in Files...",new apf.item({command:"searchinfiles"}),2e4))},init:function(e){var t=this;r.addEventListener("settings.load",function(e){e.ext.setDefaults("editors/code/filesearch",[["regex","false"],["matchcase","false"],["wholeword","false"],["console","true"],["consolelaunch","false"]])}),r.addEventListener("c9searchclose",function(e){t.searchPage=null}),h.addCommand({name:"hidesearchinfiles",bindKey:{mac:"ESC",win:"ESC"},isAvailable:function(e){return winSearchInFiles.visible},exec:function(e,n,r){t.toggleDialog(-1)}}),winSearchInFiles.addEventListener("prop.visible",function(e){if(e.value)trFiles&&trFiles.addEventListener("afterselect",t.setSearchSelection),t.setSearchSelection();else{var n=u.currentEditor;n&&n.focus(),trFiles&&trFiles.removeEventListener("afterselect",t.setSearchSelection)}}),r.addEventListener("init.ext/tree/tree",function(){trFiles.addEventListener("afterselect",t.setSearchSelection)}),txtSFFind.ace.session.on("change",function(){chkSFRegEx.checked&&t.checkRegExp(txtSFFind,tooltipSearchInFiles,winSearchInFiles)}),this.addSearchKeyboardHandler(txtSFFind,"searchfiles");var n=this.addSearchKeyboardHandler(txtSFReplace,"replacefiles");n.bindKeys({"Return|Shift-Return":function(){t.replace()}}),n=this.addSearchKeyboardHandler(txtSFPatterns,"searchwhere"),n.bindKeys({"Return|Shift-Return":function(){t.execFind()}});var i=document.body.appendChild(tooltipSearchInFiles.$ext);chkSFRegEx.addEventListener("prop.value",function(e){t.$setRegexpMode(txtSFFind,apf.isTrue(e.value))});var s=winSearchInFiles.getElementsByTagNameNS(apf.ns.aml,"checkbox");s.forEach(function(e){p.add(e.$ext,{message:e.label,width:"auto",timeout:0,tooltip:i,animate:!1,getPosition:function(){var t=apf.getAbsolutePosition(winSearchInFiles.$ext),n=t[0]+e.getLeft(),r=t[1];return[n,r-16]}})}),r.addEventListener("aftereditorfocus",function(e){t.searchConsole&&t.returnFocus&&t.searchConsole.focus()})},setSearchSelection:function(e){var t,n;if(trFiles){e&&e.selected?t=e.selected:t=this.getSelectedTreeNode();var r=t.getAttribute("path").split("/");n="",t.getAttribute("type")=="folder"?n=r[r.length-1]:t.getAttribute("type")=="file"&&(n=r[r.length-2]),n.length>25&&(n=n.substr(0,22)+"...")}else{var i=o.model.queryValue("auto/tree_selection/@path");if(!i)return;var s;(n=(s=i.split("/")).pop()).indexOf(".")>-1&&(n=s.pop())}rbSFSelection.setAttribute("label",apf.escapeXML("Selection ( "+n+" )"))},getSelectedTreeNode:function(){var e=trFiles?trFiles.selected:a.model.queryNode("folder[1]");e||(e=trFiles.xmlRoot.selectSingleNode("folder[1]"));while(e.tagName!="folder")e=e.parentNode;return e},toggleDialog:function(e,t,n,r){var s=this;i.initExtension(this),tooltipSearchInFiles.$ext.style.display="none";var a=apf.isTrue(o.model.queryValue("general/@animateui"));if(!e&&!winSearchInFiles.visible||e>0){if(winSearchInFiles.visible){txtSFFind.focus(),txtSFFind.select();return}if(v.inited&&winSearchReplace.visible){i.initExtension(this),winSearchReplace.$ext.style.height="0px",txtSFFind.focus(),v.toggleDialog(-1,null,null,function(){s.toggleDialog(e,t,n)});return}winSearchInFiles.$ext.style.overflow="hidden",winSearchInFiles.$ext.style.height=winSearchInFiles.$ext.offsetHeight+"px",this.position=-1;var f=u.currentEditor;if(f&&f.getSelection){var l=f.getSelection(),c=f.getDocument(),h=l.getRange(),p=c.getTextRange(h);p&&(txtSFFind.setValue(p),this.$setRegexpMode(txtSFFind,chkSFRegEx.checked))}searchRow.appendChild(winSearchInFiles),winSearchInFiles.show(),txtSFFind.focus(),txtSFFind.select(),winSearchInFiles.$ext.scrollTop=0,document.body.scrollTop=0,a?m.animateSplitBoxNode(winSearchInFiles,{height:"102px",timingFunction:"cubic-bezier(.10, .10, .25, .90)",duration:.2},function(){winSearchInFiles.$ext.style[apf.CSSPREFIX+"TransitionDuration"]="",winSearchInFiles.$ext.style.height="",setTimeout(function(){apf.layout.forceResize()},50)}):(winSearchInFiles.$ext.style.height="",apf.layout.forceResize())}else winSearchInFiles.visible&&(txtSFFind.getValue()&&s.saveHistory(txtSFFind.getValue()),a&&!apf.isGecko?(winSearchInFiles.visible=!1,winSearchInFiles.$ext.style.height=winSearchInFiles.$ext.offsetHeight+"px",m.animateSplitBoxNode(winSearchInFiles,{height:"0px",timingFunction:"ease-in-out",duration:.2},function(){winSearchInFiles.visible=!0,winSearchInFiles.hide(),winSearchInFiles.parentNode.removeChild(winSearchInFiles),winSearchInFiles.$ext.style[apf.CSSPREFIX+"TransitionDuration"]="",!n&&u.currentEditor&&u.currentEditor.amlEditor.focus(),setTimeout(function(){r?r():apf.layout.forceResize()},50)})):(winSearchInFiles.hide(),winSearchInFiles.parentNode.removeChild(winSearchInFiles),r?r():apf.layout.forceResize()));return!1},searchinfiles:function(){this.toggleDialog(1)},getOptions:function(){var e=this;return{query:txtSFFind.getValue(),needle:txtSFFind.getValue(),pattern:txtSFPatterns.getValue(),casesensitive:chkSFMatchCase.checked,regexp:chkSFRegEx.checked,replaceAll:e.replaceAll,replacement:txtSFReplace.getValue(),wholeword:chkSFWholeWords.checked}},replace:function(){this.replaceAll=!0,this.execFind(),this.replaceAll=!1},execFind:function(){var t=this,n;if(grpSFScope.value=="projects")n=r.davPrefix;else if(!trFiles){n=o.model.queryValue("auto/tree_selection/@path");if(!n)return;var i;(name=(i=n.split("/")).pop()).indexOf(".")>-1&&(name=i.pop())}if(!n){var a=this.getSelectedTreeNode();n=a.getAttribute("path")}var f=this.getOptions(),l=txtSFFind.getValue();f.query=l.replace(/\n/g,"\\n"),this.replaceAll||(f.replacement="");var a=apf.n("<file/>").attr("name","Search Results").attr("path",this.searchFilePath).attr("customtype",s.getContentType(this.searchContentType)).attr("tooltip","Search Results").attr("newfile","0").attr("ignore","1").attr("saving","1").node(),c=r.createDocument(a),p=this.messageHeader(n,f);chkSFConsole.checked?(e("ext/console/console").show(),this.makeSearchResultsPanel(),t.consoleacedoc?t.appendLines(t.consoleacedoc,p):(t.searchConsole.$editor.setSession(new g(new y(p),"ace/mode/c9search")),t.consoleacedoc=t.searchConsole.$editor.session.doc,t.consoleacedoc.ace=t.searchConsole.$editor,t.searchConsole.$editor.commands._defaultHandlers=h._defaultHandlers,t.searchConsole.$editor.commands.commands=h.commands,t.searchConsole.$editor.commands.commmandKeyBinding=h.commmandKeyBinding,t.searchConsole.$editor.getSession().setUndoManager(new apf.actiontracker)),t.setHighlight(t.searchConsole.$editor.getSession(),f.query)):(t.searchPage===null?(c.cachedValue=p,u.gotoDocument({doc:c,node:a,forceOpen:!0}),t.searchPage=r.getActivePage(),t.searcheditor=t.searchPage.$editor.amlEditor.$editor,t.apfeditor=t.searchPage.$editor.amlEditor,t.tabacedoc=t.searchPage.$doc.acedoc,t.tabacedoc.node=a,apf.setStyleClass(t.apfeditor.$ext,"aceSearchResults"),t.apfeditor.$editor.renderer.scroller.addEventListener("dblclick",function(){t.launchFileFromSearch(t.apfeditor.$editor)})):(t.appendLines(t.tabacedoc,p),tabEditors.set(tabEditors.getPages().indexOf(t.searchPage)+1)),t.setHighlight(t.searcheditor.getSession(),f.query));if(f.query.length==0)return;t.toggleDialog(-1,null,!0),this.firstRun=!0,this.$onMessage||(this.$onMessage=this.onMessage.bind(this),r.addEventListener("socketMessage",this.$onMessage)),n.indexOf(r.davPrefix)==0&&(n=n.slice(r.davPrefix.length).replace(/^\//,"")),f.command="codesearch",f.path=n,r.send(f),this.saveHistory(f.query,"searchfiles"),this.position=0,r.dispatchEvent("track_action",{type:"searchinfiles"})},onMessage:function(e){var t=e.message;if(t.extra!="codesearch")return!1;var n=chkSFConsole.checked?this.consoleacedoc:this.tabacedoc,r=chkSFConsole.checked?this.searchConsole.$editor:this.searcheditor;if(this.firstRun){var i=n.getLength()-2;r.scrollToLine(i,!1,!0),this.firstRun=!1}if(t.type!=="exit")return this.appendLines(n,t.data),!0;var s=[""];if(t.code&&t.stderr)s.push("Search in files failed with code "+t.code+" ("+t.stderr+")");else{var o={count:t.count,filecount:t.filecount};s.push(this.messageFooter(o))}s.push("","",""),n.insertLines(n.getLength(),s);if(!chkSFConsole.checked){var u=n.node;u.setAttribute("saving","0"),u.setAttribute("changed","0")}return btnSFFind.$ext.innerText="Find",!0},launchFileFromSearch:function(e){var t=e.getSession(),n=e.getCursorPosition().row,i=t.getLine(n).split(": ");if(i.length<2)return;while(n-->0){var s=t.getTokenAt(n,0);if(s&&s.type.indexOf("string")!=-1)break}var o=e.getSession().getLine(n);o.charAt(o.length-1)==":"&&(o=o.substring(0,o.length-1)),o[0]==="/"&&(o=o.substring(1));if(!o)return;var a=parseInt(i[0],10),f=e.getSelectionRange(),l=i[0].length+2;u.gotoDocument({path:r.davPrefix+"/"+o,row:a,column:f.start.column-l,endColumn:f.end.column-l})},appendLines:function(e,t){if(!t||!t.length&&!t.count)return;typeof t!="string"&&(t=t.join("\n")),t.length>0&&(e.ace.$blockScrolling++,e.insert({row:e.getLength(),column:0},t),e.ace.$blockScrolling--)},messageHeader:function(e,t){var n=[];t.regexp===!0&&n.push("regexp"),t.casesensitive===!0&&n.push("case sensitive"),t.wholeword===!0&&n.push("whole word"),n.length>0?n="("+n.join(", ")+")":n="";var r="";return this.replaceAll&&(r="', replaced as '"+t.replacement),"Searching for '"+t.query+r+"' in "+e+n+"\n\n"},messageFooter:function(e){var t="Found "+e.count;return t+=e.count>1||e.count==0?" matches":" match",t+=" in "+e.filecount,t+=e.filecount>1||e.filecount==0?" files":" file",t},makeSearchResultsPanel:function(){var e=this;this.$panel==null?(this.$panel=tabConsole.add(this.pageTitle,this.pageID),this.$panel.setAttribute("closebtn",!0),tabConsole.set(this.pageID),this.searchConsole=this.$panel.appendChild(new apf.codeeditor({syntax:"c9search","class":"nocorner aceSearchConsole aceSearchResults",theme:"ace/theme/monokai",overwrite:"[{require('core/settings').model}::editors/code/@overwrite]",folding:"true",style:"position:absolute;left:0;right:0;top:0;bottom:0",behaviors:"[{require('core/settings').model}::editors/code/@behaviors]",selectstyle:"false",activeline:"[{require('core/settings').model}::editors/code/@activeline]",gutterline:"[{require('core/settings').model}::editors/code/@gutterline]",showinvisibles:"false",showprintmargin:"false",softtabs:"[{require('core/settings').model}::editors/code/@softtabs]",tabsize:"[{require('core/settings').model}::editors/code/@tabsize]",scrollspeed:"[{require('core/settings').model}::editors/code/@scrollspeed]",newlinemode:"[{require('core/settings').model}::editors/code/@newlinemode]",animatedscroll:"[{require('core/settings').model}::editors/code/@animatedscroll]",fontsize:"[{require('core/settings').model}::editors/code/@fontsize]",gutter:"[{require('core/settings').model}::editors/code/@gutter]",highlightselectedword:"[{require('core/settings').model}::editors/code/@highlightselectedword]",autohidehorscrollbar:"[{require('core/settings').model}::editors/code/@autohidehorscrollbar]",fadefoldwidgets:"false",wrapmodeViewport:"true"})),e.searchConsole.$editor.session.setWrapLimitRange(null,null),this.$panel.addEventListener("afterclose",function(){return this.removeNode(),e.$panel=null,e.consoleacedoc=null,!1}),e.searchConsole.addEventListener("keydown",function(t){if(t.keyCode==13)return t.altKey===!1?(e.launchFileFromSearch(e.searchConsole.$editor),e.returnFocus=!1):e.searchConsole.$editor.insert("\n"),!1}),e.searchConsole.addEventListener("keyup",function(t){if(t.keyCode>=37&&t.keyCode<=40&&apf.isTrue(o.model.queryValue("editors/code/filesearch/@consolelaunch")))return e.launchFileFromSearch(e.searchConsole.$editor),e.returnFocus=!0,!1}),e.searchConsole.$editor.renderer.scroller.addEventListener("dblclick",function(){e.launchFileFromSearch(e.searchConsole.$editor)}),tabConsole.addEventListener("afterswitch",function(t){t.currentTarget.activepage=="pgSFResults"&&apf.layout.forceResize(e.searchConsole.$ext)})):(apf.isTrue(o.model.queryValue("auto/console/@clearonrun"))&&this.consoleacedoc.removeLines(0,this.consoleacedoc.getLength()),tabConsole.appendChild(this.$panel),tabConsole.set(this.pageID))},setHighlight:function(e,t){e.highlight(t),e.c9SearchHighlight=e.$searchHighlight,e.$searchHighlight=null},destroy:function(){f.remove("Find/~",1e4),f.remove("Find in Files..."),h.removeCommandByName("searchinfiles"),this.$destroy()}},d))}),define("text!ext/noderunner/noderunner.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n\n    <!--a:window id="winTab" \n      title     = "Choose a Tab"\n      icon      = "chromium_16.png"\n      zindex    = "10" \n      center    = "true" \n      modal     = "true" \n      width     = "450" \n      height    = "200" \n      buttons   = "close"\n      kbclose   = "true"\n      skin      = "bk-window"\n      visible   = "false">\n        <a:list id="lstTabs" \n          model="mdlTabs" \n          anchors="10 10 56 10" \n          multiselect="false" \n          autoselect="false" \n          each="[tab]" \n          caption="[@url]" \n          empty-message="Loading tabs..."\n          onafterchoose = "btnTabsOk.dispatchEvent(\'click\');"/>\n        <a:button id="btnTabsOk"\n          right="10"\n          bottom="10"\n          width="60"\n          disabled="{!lstTabs.selected}" \n          default="true"\n          skin="btn-default-css3"\n          onclick="winTab.close();dbg.attach(dbgChrome, {lstTabs.selected})">\n            OK\n        </a:button>\n    </a:window-->\n\n</a:application>'}),define("text!ext/debugger/debugger.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:tab id="tabDebugButtons" skin="dockbar" visible="false">\n        <a:page id="pgDebugNav" render="runtime">\n            <a:hbox padding="3" edge="4 3 5">\n                <div class="expand-panel-bg"></div>\n                <a:button id="btnResume" tooltip="Resume"\n                  icon     = "play.png"\n                  command  = "resume"\n                  skin     = "c9-sidepanelsbutton"\n                  disabled = "{dbg.state != \'stopped\'}" />\n                <a:button  tooltip="Suspend"\n                  skin     = "c9-sidepanelsbutton"\n                  icon     = "pause.png"\n                  onclick  = "require(\'ext/debugger/debugger\').suspend();"\n                  disabled = "{dbg.state == \'stopped\' or !dbg.state}"/>\n                <a:divider skin="c9-divider" />\n                <a:button id="btnStepOver" tooltip="Step Over"\n                  icon     = "step.png"\n                  skin     = "c9-sidepanelsbutton"\n                  command  = "stepover"\n                  disabled = "{dbg.state != \'stopped\'}" />\n                <a:button id="btnStepInto" tooltip="Step Into"\n                  icon     = "stepinto.png" \n                  skin     = "c9-sidepanelsbutton"\n                  command  = "stepinto" \n                  disabled = "{dbg.state != \'stopped\'}" />\n                <a:button id="btnStepOut" tooltip="Step Out"\n                  icon     = "stepback.png" \n                  skin     = "c9-sidepanelsbutton"\n                  command  = "stepout"\n                  disabled = "{dbg.state != \'stopped\'}" />\n                <a:divider skin="c9-divider" />\n                <!--<a:button id="btnStepThrough" tooltip="Step Through"\n                  icon     = "stepthrough.png" \n                  skin     = "c9-sidepanelsbutton"\n                  command  = "stepout"\n                  disabled = "{dbg.state != \'stopped\'}" />-->\n            </a:hbox>\n        </a:page>\n    </a:tab>\n    <a:tab id="tabDebug" skin="docktab" visible="false" activepage="0" buttons="close">\n        <a:page id="dbgCallStack" caption="Call Stack" render="runtime" prerender="true">\n            <a:datagrid\n              id         = "dgStack"\n              anchors    = "0 0 0 0"\n              border     = "0"\n              options    = "size|move"\n              caching    = "false"\n              model      = "mdlDbgStack"\n              class      = "noscrollbar"\n              scrollbar  = "sbShared 20 2 2"\n              disabled   = "{dbg.state != \'stopped\'}"\n              selected   = "{dbg.activeframe}">\n                <a:actions />\n                <a:each match="[frame]">\n                    <a:column caption="Function" value="[@name]" width="60%" icon2="debugger/stckframe_obj.gif" />\n                    <a:column caption="Script" value="[@script]" width="40%" />\n                    <a:column caption="Ln" value="{parseInt([@line])+1}" width="30"/>\n                    <a:column caption="Col" value="[@column]" width="30"/>\n                </a:each>\n            </a:datagrid>\n        </a:page>\n        <a:page id="dbInteractive" caption="Interactive" render="runtime">\n            <a:toolbar>\n                <a:bar border="0 0 1 0">\n                    <a:button\n                      disabled = "{!dbg.state}"\n                      caption  = "Execute" \n                      tooltip  = "Ctrl+Enter"\n                      onclick  = "\n                        require(\'ext/debugger/inspector\').consoleTextHandler({keyCode:13,ctrlKey:true})\n                      " />\n                    <a:button\n                      disabled2 = "{!txtCode.value.trim()}"\n                      caption  = "Clear" \n                      onclick  = "\n                        txtCode.clear();\n                        txtInteractiveOutput.clear();\n                      " />\n                    <a:divider skin2="c9-divider"/>\n                    <a:dropdown id="lstScripts"\n                      skin2       = "black_dropdown"\n                      margin     = "3 0 0 4"\n                      width      = "120"\n                      maxitems   = "10"\n                      model      = "mdlDbgSources"\n                      disabled   = "{dbg.state == null}" \n                      each       = "[file]"\n                      caption    = "[@text]"\n                      autoselect = "false"\n                      icon       = "debugger/file_obj.gif" />\n                </a:bar>\n            </a:toolbar>\n            <a:vsplitbox anchors="29 0 0 0" splitter="true" class="topsplitter">\n                <a:codeeditor id="txtCode" \n                  disabled          = "{!dbg.state}"\n                  onkeydown         = "return require(\'ext/debugger/inspector\').consoleTextHandler(event)" \n                  realtime          = "true"\n                  syntax            = "javascript"\n                  border            = "0"\n                  minheight         = "30"\n                  value             = "[auto/console/input]"\n                  softtabs          = "[editors/code/@softtabs]"\n                  tabsize           = "[editors/code/@tabsize]"\n                  scrollspeed       = "[editors/code/@scrollspeed]"\n                  theme             = "[editors/code/@theme]"\n                  selectstyle       = "[editors/code/@selectstyle]"\n                  activeline        = "[editors/code/@activeline]"\n                  showinvisibles    = "[editors/code/@showinvisibles]"\n                  animatedscroll    = "[editors/code/@animatedscroll]"\n                  fontsize          = "[editors/code/@fontsize]"\n                  showprintmargin   = "false"\n                  caching           = "false"\n                  highlightselectedword = "[editors/code/@highlightselectedword]"\n                  printmargincolumn = "0" />\n                <a:text id="txtInteractiveOutput"\n                  class      = "interactive_output"\n                  scrolldown = "true"\n                  focussable = "true"\n                  textselect = "true" \n                  height     = "60"\n                  scrollbar  = "sbShared 20 2 2" />\n            </a:vsplitbox>\n        </a:page>\n        <a:page id="dbgVariable" caption="Variables" render="runtime">\n            <a:datagrid id="dgVars"\n              anchors    = "0 0 0 0" \n              border     = "0"\n              class      = "noscrollbar"\n              scrollbar  = "sbShared 20 2 2"\n              options    = "size|move"\n              prerender  = "false"\n              caching    = "false"\n              model      = "[{dbg.activeframe}::vars]"\n              disabled   = "{dbg.state != \'stopped\'}"\n              loading-message = "Calculating...">\n                <a:actions />\n                <a:each match="[item|globals]" sort="[@name]">\n                    <a:insert match="[globals]" get="{adbg.loadFrame(dbg, {dbg.activeframe})}"/>\n                    <a:insert match="[item[@children=\'true\']]" get="{adbg.loadObject(dbg, %[.])}" />\n                    <a:column caption="Property" value="{[@name] || \'Globals\'}" width="40%" icon="debugger/genericvariable_obj.gif" tree="true" />\n                    <a:column caption="Value" value="[@value]" width="60%" />\n                    <a:column caption="Type" value="[@type]" width="50"/>\n                </a:each>\n            </a:datagrid>\n        </a:page>\n        <a:page id="dbgBreakpoints" caption="Breakpoints" render="runtime" prerender="true">\n            <a:list id="lstBreakpoints"\n              autoselect = "false"\n              reselectable = "true"\n              anchors    = "0 0 0 0"\n              skin       = "breakpoints"\n              scrollbar  = "sbShared 2 2 2"\n              border     = "0"\n              model      = "mdlDbgBreakpoints"\n              mode       = "check"\n              each       = "[breakpoint]"\n              checked    = "[@enabled]">\n                <a:caption>\n                    [@text]\n                    <a:remove match="[file|folder]" />\n                    <div>[@content]</div>\n                </a:caption>\n            </a:list>\n        </a:page>\n    </a:tab>\n</a:application>'}),define("ext/debugger/sources",["require","exports","module","core/ide","core/ext","core/util","ext/editors/editors","ext/dockpanel/dockpanel","ext/filesystem/filesystem","ace/range"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("ext/editors/editors"),u=e("ext/dockpanel/dockpanel"),a=e("ext/filesystem/filesystem"),f=e("ace/range").Range;n.exports={hook:function(){var e="ext/debugger/debugger";u.register(e,"dbgCallStack",{menu:"Debugger/Call Stack",primary:{backgroundImage:r.staticPrefix+"/ext/main/style/images/debugicons.png",defaultState:{x:-8,y:-47},activeState:{x:-8,y:-47}}},function(e){return i.initExtension(dbg.main),dbgCallStack})},init:function(){function i(e,t,n){var r=e.addMarker(new f(n,0,n+1,0),"ace_"+t,"line");e.addGutterDecoration(n,t),e["$"+t+"Marker"]={lineMarker:r,row:n}}function u(e,t){var n="$"+t+"Marker";e.removeMarker(e[n].lineMarker),e.removeGutterDecoration(e[n].row,t),e[n]=null}function a(e){var t=o.currentEditor&&o.currentEditor.amlEditor,n=t&&t.$editor.session;if(!n)return;n.$stackMarker&&u(n,"stack"),n.$stepMarker&&u(n,"step");if(e){var r=t.xmlRoot.getAttribute("path"),s=e.getAttribute("scriptPath"),a=parseInt(e.getAttribute("line"),10);e.hasAttribute("istop")?r==s&&i(n,"step",a):(r==s&&i(n,"stack",a),dbg.topframe&&(s=dbg.topframe.getAttribute("scriptPath"),a=parseInt(dbg.topframe.getAttribute("line"),10),r==s&&i(n,"step",a)))}}var e=this,t="mdlDbgSources",n=apf.nameserver.register("model",t,new apf.model);apf.setReference(t,n),mdlDbgSources.load("<sources/>"),r.addEventListener("afterfilesave",function(e){if(!dbg.state)return;var t=e.node.getAttribute("path"),n=mdlDbgSources.queryNode("//file[@path="+s.escapeXpathString(t)+"]");if(!n)return;var r=n.getAttribute("scriptid"),i=e.value||e.doc.getValue();dbg.main.changeLive(r,i,!1,function(e){})}),r.addEventListener("dbg.changeFrame",function(e){a(e.data)}),r.addEventListener("dbg.break",function(t){e.showDebugFrame(t.frame)}),r.addEventListener("dbg.exception",function(t){e.showDebugFrame(t.frame)}),t="mdlDbgStack",n=apf.nameserver.register("model",t,new apf.model),apf.setReference(t,n),dbgCallStack.addEventListener("afterrender",function(){dgStack.addEventListener("afterselect",function(t){if(!dgStack.hasFocus())return;t.selected&&e.showDebugFrame(t.selected),a(t.selected)})}),r.addEventListener("dbg.changeState",function(e){e.state!="stopped"&&mdlDbgStack.load("<frames></frames>")}),r.addEventListener("tab.afterswitch",function(e){a(dbg.activeframe)})},showDebugFrame:function(e){this.show({row:parseInt(e.getAttribute("line"),10),column:parseInt(e.getAttribute("column"),10),text:e.getAttribute("name"),path:e.getAttribute("scriptPath")})},showDebugFile:function(e,t,n,r){this.show({scriptId:e,row:t,column:n,text:r})},show:function(e){var t=e.row+1,n=e.column,i=e.text||"",u=e.path,f=e.scriptId;if(!u){var l=mdlDbgSources.queryNode("//file[@scriptid='"+f+"']");u=l&&l.getAttribute("path")}else{var l=mdlDbgSources.queryNode("//file[@path="+s.escapeXpathString(u)+"]");f=l&&l.getAttribute("scriptid")}if(u&&u.substring(0,r.davPrefix.length)==r.davPrefix){var c=a.model.queryNode("//file[@path="+s.escapeXpathString(u)+"]")||a.createFileNodeFromPath(u);o.jump({node:c,row:t,column:n,text:i,animate:!1})}else if(f){var h=tabEditors.getPage(u);if(h)o.jump({node:h.xmlRoot,page:h,row:t,column:n,text:i,animate:!1});else{var p=apf.n("<file />").attr("name",u.split("/").pop()).attr("path",u).attr("contenttype","application/javascript").attr("scriptid",f).attr("debug","1").attr("lineoffset","0").node();dbg.main.loadSource(l,function(e){var s=r.createDocument(p,e);o.jump({node:p,row:t,column:n,text:i,doc:s})})}}}}}),define("ext/debugger/breakpoints",["require","exports","module","core/ide","core/ext","ext/dockpanel/dockpanel","ext/debugger/sources","core/util"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ext/dockpanel/dockpanel"),o=e("ext/debugger/sources"),u=e("core/util"),a=100;n.exports={hook:function(){function u(e){var t=e.queryNodes("//breakpoint[not(@path)]");t.forEach(function(e){var t=e.getAttribute("script");if(!t)return apf.xmldb.removeNode(e);t.slice(0,r.workspaceDir.length)==r.workspaceDir&&(t=r.davPrefix+t.slice(r.workspaceDir.length)),e.removeAttribute("script"),e.setAttribute("path",t)})}var e=this,t="mdlDbgBreakpoints";this.model=apf.nameserver.register("model",t,new apf.model),apf.setReference(t,this.model),mdlDbgBreakpoints.load("<breakpoints/>");var n,o;mdlDbgBreakpoints.addEventListener("update",function(t){dbg.state&&!o&&(o=setTimeout(function(){o=null,dbg.main.updateBreakpoints()},a));if(e.$updating)return;n&&clearTimeout(n),n=setTimeout(function(){n=null,e.$syncOpenFiles()},a)}),r.addEventListener("settings.load",function(t){var n=t.model.data.selectSingleNode("//breakpoints");n||(n=t.model.data.ownerDocument.createElement("breakpoints"),t.model.data.appendChild(n)),mdlDbgBreakpoints.load(n),u(mdlDbgBreakpoints),e.$syncOpenFiles()});var f="ext/debugger/debugger";s.register(f,"dbgBreakpoints",{menu:"Debugger/Breakpoints",primary:{backgroundImage:r.staticPrefix+"/ext/main/style/images/debugicons.png",defaultState:{x:-8,y:-88},activeState:{x:-8,y:-88}}},function(e){return i.initExtension(dbg.main),dbgBreakpoints}),r.addEventListener("afterfilesave",function(t){var n=t.doc;if(!n||!n.acesession)return;n.acesession.$breakpoints.length&&e.updateBreakpointModel(n.acesession)}),r.addEventListener("tab.afterswitch",function(t){var n=t.nextPage;if(!n||!n.$editor||n.$editor.path!="ext/code/code")return;var r=n.$editor.amlEditor.$editor;r.$breakpointListener||e.initEditor(r),r.session.$breakpointListener||e.initSession(r.session),e.updateSession(r.session)})},init:function(){var e=this;dbgBreakpoints.addEventListener("afterrender",function(){lstBreakpoints.$ext.addEventListener("click",function(t){var n=lstBreakpoints.selected;if(!n||t.target==t.currentTarget)return;var r=t.target.className;r.indexOf("btnclose")!=-1?apf.xmldb.removeNode(n):r.indexOf("checkbox")==-1&&e.gotoBreakpoint(n)}),lstBreakpoints.addEventListener("aftercheck",function(t){e.setBreakPointEnabled(t.xmlNode,apf.isTrue(t.xmlNode.getAttribute("enabled")))})}),dbgBreakpoints.addEventListener("dbInteractive",function(){lstScripts.addEventListener("afterselect",function(t){t.selected&&e.gotoBreakpoint(t.selected)})})},initEditor:function(e){var t=this,n=document.createElement("div");e.renderer.$gutter.appendChild(n),n.style.cssText="position:absolute;top:0;bottom:0;left:0;width:18px;cursor:pointer",e.on("guttermousedown",e.$breakpointListener=function(n){if(n.getButton())return;var r=e.renderer.$gutterLayer.getRegion(n);if(e.session.syntax!=="javascript"||r!="markers")return;n.stop();var i=n.getDocumentPosition().row,s=e.session,o=s.getBreakpoints()[i];if(n.getShiftKey()){var u=o&&o.indexOf("disabled")!=-1;o=u?" ace_breakpoint ":" ace_breakpoint disabled"}else o=o?"":" ace_breakpoint ";s.setBreakpoint(i,o),t.addBreakpointToModel(s,i)})},initSession:function(e){e.$breakpointListener=function(e){if(!this.c9doc||!this.c9doc.isInited||!this.$breakpoints.length)return;var t=e.data,n=t.range;if(n.end.row==n.start.row)return;var r,i;r=n.end.row-n.start.row,t.action=="insertText"?i=n.start.column?n.start.row+1:n.start.row:i=n.start.row;if(t.action[0]=="i"){var s=Array(r);s.unshift(i,0),this.$breakpoints.splice.apply(this.$breakpoints,s)}else{var o=this.$breakpoints.splice(i+1,r);if(!this.$breakpoints[i])for(var u=o.length;u--;)if(o[u]){this.$breakpoints[i]=o[u];break}}}.bind(e),e.on("change",e.$breakpointListener)},updateSession:function(e){if(!e.c9doc)return;var t=[],n=e.c9doc.getNode().getAttribute("path"),r=mdlDbgBreakpoints.queryNodes("//breakpoint[@path="+u.escapeXpathString(n)+"]");for(var i=0;i<r.length;i++){var s=r[i],o=parseInt(s.getAttribute("line"),10),a=parseInt(s.getAttribute("lineoffset"),10),f=apf.isTrue(s.getAttribute("enabled"));t[o+a]=" ace_breakpoint "+(f?"":"disabled ")}e.$breakpoints=t,e._emit("changeBreakpoint",{})},gotoBreakpoint:function(e){var t=parseInt(e.getAttribute("line"),10),n=parseInt(e.getAttribute("column"),10);isNaN(t)&&(t=null),isNaN(n)&&(n=null);var r=e.getAttribute("path");o.show({path:r,row:t,column:n})},removeBreakpoint:function(e,t){this.$updating=!0;var n=mdlDbgBreakpoints.queryNode("breakpoint[@path="+u.escapeXpathString(e)+" and @line='"+t+"']");n&&apf.xmldb.removeNode(n),this.$updating=!1},addBreakpointToModel:function(e,t){this.$updating=!0;var n=e.c9doc.getNode().getAttribute("path"),i=n,s=r.davPrefix;n.indexOf(s)>-1&&(i=n.substring(n.indexOf(s)+s.length)),this.removeBreakpoint(n,t);var o=e.$breakpoints[t];if(!o)return;var u=e.getLine(t),a=apf.n("<breakpoint/>").attr("path",n).attr("line",t).attr("text",i+":"+(t+1)).attr("lineoffset",0).attr("content",u).attr("enabled",o.indexOf("disabled")==-1).node();mdlDbgBreakpoints.appendXml(a),this.$updating=!1},updateBreakpointModel:function(e){this.$updating=!0;var t=e.c9doc.getNode().getAttribute("path"),n=e.$breakpoints,i=t,s=r.davPrefix;t.indexOf(s)==0&&(i=t.substring(s.length+1));var o=mdlDbgBreakpoints.queryNodes("breakpoint[@path="+u.escapeXpathString(t)+"]");for(var a=o.length;a--;)apf.xmldb.removeNode(o[a]);n.forEach(function(n,r){if(!n)return;var s=apf.n("<breakpoint/>").attr("path",t).attr("line",r).attr("text",i+":"+(+r+1)).attr("lineoffset",0).attr("content",e.getLine(r)).attr("enabled",n.indexOf("disabled")==-1).node();mdlDbgBreakpoints.appendXml(s)}),this.$updating=!1},setBreakPointEnabled:function(e,t){e.setAttribute("enabled",t?!0:!1)},$syncOpenFiles:function(){var e=tabEditors.$activepage;if(e&&e.$editor&&e.$editor.path=="ext/code/code"){var t=e.$editor.amlEditor.$editor.session;this.updateSession(t)}}}}),define("ext/debugger/apfhook",["require","exports","module","core/ide"],function(e,t,n){var r=e("core/ide");window.adbg={exec:function(e,t,n,r){if(e=="loadSource"){var i=t[0].main,s=t[1];i.loadSource(s,function(e){r&&r.callback?r.callback(apf.escapeXML(e),apf.SUCCESS):n("<file><![CDATA["+e.replace("]]>","]] >")+"]]></file>",apf.SUCCESS)})}else if(e=="loadObject"){var i=t[0].main,o=t[1];i.loadObject(o,function(e){r&&r.callback?r.callback(e,apf.SUCCESS):n(e,apf.SUCCESS)})}else if(e=="loadFrame"){var i=t[0].main,u=t[1];i.loadFrame(u,function(e){r&&r.callback?r.callback(e,apf.SUCCESS):n(e,apf.SUCCESS)})}}},(apf.$asyncObjects||(apf.$asyncObjects={})).adbg=1,n.exports={registerDebugger:function(e){if(window.dbg)return;new apf.state({id:"dbg"}),dbg.main=e,dbg.breakpoints=e.breakpoints,dbg.sources=e.sources,r.addEventListener("dbg.changeState",function(e){apf.xmldb.setAttribute(dbg,"state",e.state||!1)}),r.addEventListener("dbg.changeFrame",function(e){apf.xmldb.setAttribute(dbg,"activeframe",e.data||!1),dbg.topframe=e.data||null})}}}),define("ext/debugger/inspector",["require","exports","module","ext/settings/settings"],function(e,t,n){function s(e,t,n,s,o){var u=r[t];u=u.replace("__MSG__",apf.escapeXML(e)),o||(i++,n='<div class="output_section" id="output_section'+i+'">'+(n||"")),n=n||"",s=s||"",o||(s+="</div>"),u=n+u+s;if(o){var a=document.getElementById(o);a&&(a.innerHTML=a.innerHTML+"<br />"+u)}else txtInteractiveOutput.addValue(u);if(!o)return"output_section"+i}t.evaluate=function(e,n){var r=self.dgStack&&dgStack.selected&&dgStack.selected.getAttribute("ref")||null;dbg.main.evaluate(e,r,null,null,n||t.showObject)},t.checkChange=function(e){if(e.tagName=="method"||"Boolean|String|undefined|null|Number".indexOf(e.getAttribute("type"))==-1)return!1};var r={prompt:'<span class="prompt">&gt; __MSG__</span>',error:'<span class="error">__MSG__</span>',log:"__MSG__"},i=0;t.applyChange=function(e){var n=e.getAttribute("value"),r=t.calcName(e);try{if(r.indexOf(".")>-1){var i,s=self.parent.eval(r.replace(/\.([^\.\s]+)$/,""));if(s&&s.$supportedProperties&&s.$supportedProperties.contains(i=RegExp.$1)){s.setProperty(i,self.parent.eval(n));return}}self.parent.eval(r+" = "+n)}catch(o){trObject.getActionTracker().undo(),alert("Invalid Action: "+o.message)}},t.consoleTextHandler=function(t){if(t.keyCode!=13||!t.ctrlKey)return;var n=txtCode.getValue().trim();if(!n)return;var r=s(n,"prompt");return this.evaluate(n,function(e,t,i,o){if(o)s(o.message,"error",null,null,r);else{var u=t.type,a=t.value||t.text,f=t.handle,l=t.className;if(l=="Function"){var c="<a class='xmlhl' href='javascript:void(0)' onclick='require(\"ext/debugger/inspector\").showObject(null, ["+t.scriptId+", "+t.line+", "+t.position+", "+t.handle+',"'+(t.name||t.inferredName)+'"], "'+(n||"").split(";").pop().replace(/"/g,"\\&quot;")+"\")'>",h="</a>",p=t.name||t.inferredName||"function";s(p+"()","log",c,h,r)}else if(l=="Array"){var c="<a class='xmlhl' href='javascript:void(0)' style='' onclick='require(\"ext/debugger/inspector\").showObject(\""+apf.escapeXML(e.xml.replace(/"/g,'\\"'))+'", '+f+', "'+apf.escapeXML((n||"").trim().split(/;|\n/).pop().trim().replace(/"/g,'\\"'))+"\")'>",h=" }</a>";s("Array { length: "+(t.properties&&t.properties.length-1),"log",c,h,r)}else if(u=="object"){var i=[],d=t.properties;for(var v=0,m=t.properties.length;v<m;v++)i.push(d[v].ref);var c="<a class='xmlhl' href='javascript:void(0)' onclick='require(\"ext/debugger/inspector\").showObject(\""+apf.escapeXML(e.xml.replace(/"/g,'\\"').replace(/&lt;/g,"〈").replace(/&gt;/,"〉"))+'", '+f+', "'+apf.escapeXML((n||"").trim().split(/;|\n/).pop().trim().replace(/"/g,'\\"'))+"\")'>",h=" }</a>";dbg.main.lookup(i,!1,function(e){var t=[l||a,"{"];for(var n,o=0,u=0;u<m;u++){n=e[i[u]];if(n.className=="Function"||n.className=="Object")continue;if(o==5){t.push("more...");break}var f=d[u].name||(d[u].inferredName||"Unknown").split(".").pop();t.push(f+"="+n.value,", "),o++}o&&t.pop(),s(t.join(" "),"log",c,h,r)})}else s(a,"log",null,null,r)}}),e("ext/settings/settings").save(),!1},t.showObject=function(n,r,i){r&&r.dataType==apf.ARRAY?dbg.sources.showDebugFile(r[0],r[1],0,r[4]):e(["ext/quickwatch/quickwatch"],function(e){e.toggleDialog(1),n&&typeof n=="string"&&(n=apf.getXml(n));var s=n&&n.getAttribute("name")||i;txtCurObject.setValue(s),dgWatch.clear("loading"),n?setTimeout(function(){var e=dgWatch.getModel(),t=apf.getXml("<data />");apf.xmldb.appendChild(t,n),e.load(t)},10):r||t.evaluate(i)})};var o=["Object","Number","Boolean","String","Array","Date","RegExp","Function","Object"],u=[null,"Element","Attr","Text","CDataSection","EntityReference","Entity","ProcessingInstruction","Comment","Document","DocumentType","DocumentFragment","Notation"];t.calcName=function(e,t){var n=e.tagName=="method",r,i=e,s=[];do{r=t?i.getAttribute("display")||i.getAttribute("name"):i.getAttribute("name");if(!r)break;var o=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes.length===0?"":t.childNodes[0].nodeValue};r=o(r),s.unshift(r.match(/^[a-z_\$][\w_\$]*$/i)?r:parseInt(r,10)==r?"["+r+"]":'["'+r+'"]'),i=i.parentNode,n&&(i=i.parentNode,n=!1)}while(i&&i.nodeType==1);return s[0]?(s[0].charAt(0)=="["&&(s[0]=s[0].substr(2,s[0].length-4)),s.join(".").replace(/\.\[/g,"[")):""},t.isEditable=function(e){if(!e)return!1;var n=e.getAttribute("type");switch(n){case"string":case"null":case"number":case"boolean":break;default:return!1}return t.calcName(e,!0).indexOf(".")===-1?!1:!0},t.validateNewValue=function(e,t){var n=e.getAttribute("type"),r;switch(n){case"string":case"null":r=/(.*|^$)/;break;case"number":r=/^\d+(\.\d+)?$/;break;case"boolean":r=/^(true|false)$/;break;default:return!1}return r.test(t)},t.setNewValue=function(e,n,r){var i=t.calcName(e,!0),s;switch(e.getAttribute("type")){case"string":case"null":s=i+' = "'+n.replace(/"/g,'\\"')+'"';break;default:s=i+" = "+n}t.evaluate(s,r)}}),define("ext/debugger/debugger",["require","exports","module","apf/elements/codeeditor","core/ide","core/ext","ext/dockpanel/dockpanel","ext/commands/commands","ext/filesystem/filesystem","text!ext/debugger/debugger.xml","./breakpoints","./sources","./apfhook","ext/debugger/inspector"],function(e,t,n){e("apf/elements/codeeditor");var r=e("core/ide"),i=e("core/ext"),s=e("ext/dockpanel/dockpanel"),o=e("ext/commands/commands"),u=e("ext/filesystem/filesystem"),a=e("text!ext/debugger/debugger.xml"),f=e("./breakpoints"),l=e("./sources"),c=e("./apfhook");e("ext/debugger/inspector"),n.exports=i.register("ext/debugger/debugger",{name:"Debug",dev:"Ajax.org",type:i.GENERAL,alone:!0,offline:!1,autodisable:i.ONLINE|i.LOCAL,markup:a,buttonClassName:"debug1",deps:[u],nodesAll:[],nodes:[],handlers:[],hook:function(){function u(e,n,r){t.inited||i.initExtension(t),t.$dbgImpl=new e,t.$dbgImpl.attach(parseInt(n,10),r)}function a(e){return t.handlers.filter(function(t){return t.handlesRunner(e)})[0]}var t=this;this.sources=l,this.breakpoints=f,c.registerDebugger(this),o.addCommand({name:"resume",hint:"resume the current paused process",bindKey:{mac:"F8",win:"F8"},exec:function(){t.resume()}}),o.addCommand({name:"stepinto",hint:"step into the function that is next on the execution stack",bindKey:{mac:"F11",win:"F11"},exec:function(){t.resume("in")}}),o.addCommand({name:"stepover",hint:"step over the current expression on the execution stack",bindKey:{mac:"F10",win:"F10"},exec:function(){t.resume("next")}}),o.addCommand({name:"stepout",hint:"step out of the current function scope",bindKey:{mac:"Shift-F11",win:"Shift-F11"},exec:function(){t.resume("out")}}),o.addCommand({name:"evalInteractive",bindKey:{mac:"Command-Return",win:"Ctrl-Return"},hint:"execute selection in interactive window",exec:function(t){var n=s.getButtons("ext/debugger/debugger","dbInteractive")[0];s.layout.showMenu(n.uniqueId),dbInteractive.parentNode.set(dbInteractive),txtCode.focus();var r=t.getSelectionRange(),i=r.isEmpty()?t.session.getLine(r.start.row):t.session.getTextRange(r);txtCode.$editor.setValue(i.trim()),e("ext/debugger/inspector").consoleTextHandler({keyCode:13,ctrlKey:!0})},isAvailable:function(e,t){return dbg.state!="stopped"?!1:t instanceof KeyboardEvent&&(!apf.activeElement||!apf.activeElement.$editor||apf.activeElement.$editor.path!="ext/code/code")?!1:!0},findEditor:function(e){return e&&e.amlEditor?e.amlEditor.$editor:e}}),r.addEventListener("consolecommand.debug",function(e){return r.send({command:"internal-isfile",argv:e.data.argv,cwd:e.data.cwd,sender:"debugger"}),!1});var n="ext/debugger/debugger";s.addDockable({expanded:-1,width:300,sections:[{height:30,width:150,minHeight:30,noflex:!0,draggable:!1,resizable:!1,skin:"dockwin_runbtns",noTab:!0,position:1,buttons:[{id:"btnRunCommands",caption:"Run Commands","class":"btn-runcommands",ext:[n,"pgDebugNav"],draggable:!1,hidden:!0}]},{width:410,height:230,flex:3,buttons:[{caption:"Call Stack",ext:[n,"dbgCallStack"],hidden:!0}]},{width:380,height:300,flex:3,buttons:[{caption:"Interactive",ext:[n,"dbInteractive"],hidden:!0},{caption:"Variables",ext:[n,"dbgVariable"],hidden:!0}]},{width:350,height:230,flex:2,buttons:[{caption:"Breakpoints",ext:[n,"dbgBreakpoints"],hidden:!0}]}]}),s.register(n,"pgDebugNav",{menu:"Run Commands",primary:{backgroundImage:r.staticPrefix+"/ext/main/style/images/debugicons.png",defaultState:{x:-6,y:-265},activeState:{x:-6,y:-265}}},function(e){return i.initExtension(t),pgDebugNav}),f.hook(),l.hook(),s.register(n,"dbInteractive",{menu:"Debugger/Interactive",primary:{backgroundImage:r.staticPrefix+"/ext/main/style/images/debugicons.png",defaultState:{x:-8,y:-130},activeState:{x:-8,y:-130}}},function(e){return i.initExtension(t),dbInteractive}),s.register(n,"dbgVariable",{menu:"Debugger/Variables",primary:{backgroundImage:r.staticPrefix+"/ext/main/style/images/debugicons.png",defaultState:{x:-8,y:-174},activeState:{x:-8,y:-174}}},function(e){return i.initExtension(t),dbgVariable.addEventListener("prop.visible",function(e){e.value&&self.dgVars&&dgVars.reload()}),dbgVariable}),r.addEventListener("dbg.ready",function(e){if(t.$dbgImpl)return;var n=/(\w+)-debug-ready/.exec(e.type),r;n&&(r=a(n[1]))?u(r,e.pid,n[1]):console.log("Appropriate debug handler not found !!")}),r.addEventListener("dbg.exit",function(e){t.$dbgImpl&&(t.$dbgImpl.detach(),t.$dbgImpl=null)}),r.addEventListener("dbg.state",function(e){if(t.$dbgImpl)return;var n=/(\w+)-debug/,r,i;for(var s in e)(r=n.exec(s))&&(i=a(r[1]))&&u(i,e[r[0]],r[1])})},init:function(e){l.init(),f.init()},activate:function(){i.initExtension(this),this.nodes.each(function(e){e.show&&e.show()})},deactivate:function(){this.nodes.each(function(e){e.hide&&e.hide()})},enable:function(){if(!this.disabled)return;this.nodesAll.each(function(e){e.setProperty("disabled",e.$lastDisabled!==undefined?e.$lastDisabled:!0),delete e.$lastDisabled}),this.disabled=!1},disable:function(){if(this.disabled)return;this.deactivate(),this.nodesAll.each(function(e){e.$lastDisabled||(e.$lastDisabled=e.disabled),e.disable()}),this.disabled=!0},destroy:function(){o.removeCommandsByName(["resume","stepinto","stepover","stepout"]),this.nodes.each(function(e){s.unregisterPage(e)}),tabDebug.destroy(!0,!0),this.$layoutItem.destroy(!0,!0),this.$destroy()},registerDebugHandler:function(e){this.handlers.push(e)},loadSources:function(e){this.$dbgImpl&&this.$dbgImpl.loadSources(e)},loadSource:function(e,t){this.$dbgImpl&&this.$dbgImpl.loadSource(e,t)},loadObject:function(e,t){this.$dbgImpl&&this.$dbgImpl.loadObject(e,t)},loadFrame:function(e,t){this.$dbgImpl&&this.$dbgImpl.loadFrame(e,t)},resume:function(e,t,n){r.dispatchEvent("beforecontinue"),this.$dbgImpl&&this.$dbgImpl.resume(e,t||1,n)},suspend:function(){this.$dbgImpl&&this.$dbgImpl.suspend()},evaluate:function(e,t,n,r,i){this.$dbgImpl&&this.$dbgImpl.evaluate(e,t,n,r,i)},changeLive:function(e,t,n,r){this.$dbgImpl&&this.$dbgImpl.changeLive(e,t,n,r)},lookup:function(e,t,n){this.$dbgImpl&&this.$dbgImpl.lookup(e,t,n)},updateBreakpoints:function(){this.$dbgImpl&&this.$dbgImpl.updateBreakpoints()}})}),define("ext/noderunner/noderunner",["require","exports","module","core/ide","core/ext","core/settings","text!ext/noderunner/noderunner.xml","ext/console/console","ext/debugger/debugger"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/settings"),o=e("text!ext/noderunner/noderunner.xml"),u=e("ext/console/console"),a=e("ext/debugger/debugger");n.exports=i.register("ext/noderunner/noderunner",{name:"Node Runner",dev:"Ajax.org",type:i.GENERAL,alone:!0,offline:!1,autodisable:i.ONLINE|i.LOCAL,markup:o,runners:window.cloud9config.runners,NODE_VERSION:"auto",init:function(){var e=this;r.connected&&this.queryServerState(),r.addEventListener("socketDisconnect",function(){r.dispatchEvent("dbg.exit"),stProcessRunning.deactivate()}),r.addEventListener("socketConnect",function(){e.queryServerState()}),r.addEventListener("socketMessage",this.onMessage.bind(this)),r.addEventListener("consolecommand.run",function(e){return r.send({command:"internal-isfile",argv:e.data.argv,cwd:e.data.cwd,sender:"noderunner"}),!1}),this.nodePid=null,r.addEventListener("settings.load",function(t){e.NODE_VERSION=t.model.queryValue("auto/node-version/@version")||"auto"})},onMessage:function(e){var t=e.message,n=window.cloud9config.runners,i;if((i=/^(\w+)-debug-ready$/.exec(t.type))&&n.indexOf(i[1])>=0){r.dispatchEvent("dbg.ready",t);return}if((i=/^(\w+)-exit$/.exec(t.type))&&n.indexOf(i[1])>=0){r.dispatchEvent("dbg.exit",t),t.pid==this.nodePid&&(stProcessRunning.deactivate(),this.nodePid=0);return}switch(t.type){case"state":this.nodePid=t.processRunning||0,stProcessRunning.setProperty("active",!!t.processRunning),r.dispatchEvent("dbg.state",t);break;case"error":t.code==1?stProcessRunning.setProperty("active",!0):t.code==5?stProcessRunning.setProperty("active",!0):t.code===9?u.log("<div class='item console_log' style='font-weight:bold;color:yellow'>"+apf.escapeXML(t.message)+"</div>"):t.code!==6&&t.code!=401&&t.code!=455&&t.code!=456&&(u.log("<div class='item console_log' style='font-weight:bold;color:#ff0000'>[C9 Server Exception "+apf.escapeXML(t.code||"")+"] "+apf.escapeXML(t.message)+"</div>"),apf.ajax("/api/debug",{method:"POST",contentType:"application/json",data:JSON.stringify({agent:navigator.userAgent,type:"C9 SERVER EXCEPTION",code:e.code,message:e.message})})),this.queryServerState()}},queryServerState:function(){r.send({command:"state",action:"publish"})},debug:function(){},run:function(e,t,n,i){var o;if(stProcessRunning.active||typeof e!="string")return!1;stProcessRunning.activate(),e=e.trim(),i=="default"||!i?(o=this.detectRunner(e),i=o=="node"?s.model.queryValue("auto/node-version/@version")||this.NODE_VERSION:"auto"):(o=i.split(" ")[0],i=i.split(" ")[1]||"auto");var u=r.getActivePageModel(),a={command:apf.isTrue(n)?"RunDebugBrk":"Run",file:e.replace(/^\/+/,""),runner:o,args:t||[],version:i,env:{C9_SELECTED_FILE:u?u.getAttribute("path").slice(r.davPrefix.length):""}};r.send(a)},stop:function(){if(!stProcessRunning.active)return;r.send({command:"kill",runner:"node",pid:this.nodePid}),this.queryServerState()},detectRunner:function(e){return e.match(/\.(php|phtml)$/)?"apache":e.match(/\.py$/)?"python":e.match(/\.rb$/)?"ruby":"node"}})}),define("text!ext/quickwatch/quickwatch.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window id="winQuickWatch"\n      title     = "Quickwatch" \n      buttons   = "close" \n      modal     = "false" \n      center    = "true"\n      width     = "500"\n      skin      = "bk-window"\n      class     = "nofooter"\n      height    = "350"\n      resizable = "true"\n      kbclose   = "true">\n        <a:vbox anchors="0 0 0 0">\n            <a:textbox id="txtCurObject" \n                skin      = "tbempty" \n                margin    = "5" \n                realtime  = "true"\n                disabled  = "{dbg.state != \'stopped\'}"\n                initial-message = "Enter an expression"\n                focusselect     = "true" \n                onclear   = "\n                    dgWatch.clear();\n                "/>\n            \n            <a:datagrid id="dgWatch"\n              flex       = "1"\n              border     = "1 0 0 0"\n              options    = "size|move"\n              class      = "noscrollbar"\n              scrollbar  = "sbShared 20 2 2"\n              prerender  = "false"\n              caching    = "false"\n              disabled   = "{dbg.state != \'stopped\'}"\n              empty-message   = "Type a javascript expression and press enter."\n              loading-message = "Calculating..."\n              onafterselect   = "\n                if (this.selected)\n                    txtCurObject.setValue(require(\'ext/debugger/inspector\').calcName(this.selected, true));\n              "\n              onbeforechange  = "\n                return require(\'ext/debugger/inspector\').checkChange(event.args[0]);\n              ">\n                <a:model>\n                    <vars />\n                </a:model>\n                <a:actions />\n                <a:each match="[item|globals]" sort="[@name]">\n                    <a:insert match="[item[@children]]" get="{adbg.loadObject(dbg, %[.])}" />\n                    <a:expanded match="[node()[@expand]]" />\n                    <a:column caption="Property" value="{[@name] || \'Globals\'}" width="120" icon="debugger/genericvariable_obj.gif" tree="true" />\n                    <a:column caption="Value" value="{apf.escapeXML([@value])}" width="100%" />\n                    <a:column caption="Type" value="[@type]" width="80"/>\n                </a:each>\n                <a:change set="{require(\'ext/debugger/inspector\').applyChange(xmlNode);}" />\n            </a:datagrid>\n        </a:vbox>\n    </a:window>\n</a:application>'}),define("ext/quickwatch/quickwatch",["require","exports","module","core/ext","ext/editors/editors","ext/noderunner/noderunner","text!ext/quickwatch/quickwatch.xml","ext/commands/commands","ext/debugger/inspector","ext/debugger/inspector"],function(e,t,n){var r=e("core/ext"),i=e("ext/editors/editors"),s=e("ext/noderunner/noderunner"),o=e("text!ext/quickwatch/quickwatch.xml"),u=e("ext/commands/commands");n.exports=r.register("ext/quickwatch/quickwatch",{name:"quickwatch",dev:"Ajax.org",type:r.GENERAL,alone:!0,markup:o,deps:[s],hook:function(){var e=this;u.addCommand({name:"quickwatch",bindKey:{mac:"Option-Q",win:"Alt-Q"},hint:"quickly inspect the variable that is under the cursor",exec:function(){e.quickwatch()},isAvailable:function(){return!!dbg.state}})},init:function(t){txtCurObject.addEventListener("keydown",function(t){if(t.keyCode==13){if(!this.value.trim())return dgWatch.clear();e("ext/debugger/inspector").evaluate(this.value)}else if(t.keyCode==40&&dgWatch.length){var n=dgWatch.getFirstTraverseNode();n&&(dgWatch.select(n),dgWatch.focus())}});var n=[38,40,36,35];dgWatch.addEventListener("keydown",function(e){e.keyCode==38?this.selected==this.getFirstTraverseNode()&&txtCurObject.focus():n.indexOf(e.keyCode)==-1&&txtCurObject.focus()},!0)},toggleDialog:function(t,n){r.initExtension(this);if(!winQuickWatch.visible||t==1){var s=i.currentEditor,o,u=s.getSelection(),a=s.getDocument();if(u.isEmpty()){var f=u.getCursor();o=a.getWordRange(f.row,f.column)}else o=u.getRange();var l=a.getTextRange(o);l&&(txtCurObject.setValue(l),n&&(e("ext/debugger/inspector").evaluate(l),txtCurObject.focus())),winQuickWatch.show()}else winQuickWatch.hide();return!1},quickwatch:function(){this.toggleDialog(1,!0)}})}),define("text!ext/gotoline/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:list name="list">\n        <a:style><![CDATA[\n            .gotolinelist{\n                overflow: hidden;\n                position: relative;\n                background-color: #545454;\n                background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(69,69,69)),color-stop(1, rgb(84,84,84)));\n                background: -moz-linear-gradient(center bottom,rgb(69,69,69) 0%,rgb(84,84,84) 100%);\n                color: #e7e7e7;\n                border-top: 1px solid #282727;\n                border-bottom: 1px solid #575757;\n                margin: 0;\n                outline: none;\n                font-family: Tahoma;\n                font-size: 12px;\n                text-overflow: ellipsis;\n                -webkit-border-radius: 2px;\n                -moz-border-radius: 2px;\n                border-radius: 2px;\n                cursor: default;\n                text-align: right;\n            }\n            .gotolinelist>.selected{\n                background-color: #5f5f5f;\n                color: #e7e7e7;\n            }\n            .gotolinelistFocus>.selected{\n                color : #e7e7e7;\n            }\n            .gotolinelist .empty, .gotolinelist .offline, .gotolinelist .loading{\n                text-align: center;\n                padding: 8px 0 0 0;\n                color: #777;\n                font-size : 8pt;\n                font-weight : normal;\n            }\n            .gotolinelist>DIV{\n                padding: 2px 6px;\n            }\n\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main container=".">\n                <div class=\'gotolinelist\'>\n                </div>\n            </a:main>\n            <a:item\n            class     = "."\n            container = "."\n            caption   = "."\n            select    = "."\n        >\n                <div> </div>\n            </a:item>\n            <a:empty caption=".">\n                <div class="message">-</div>\n            </a:empty>\n        </a:presentation>\n    </a:list>\n    <a:bar name="bar">\n        <a:style><![CDATA[\n            .barGotoline{\n                position : absolute;\n                background-color: #353637;\n                -webkit-border-top-left-radius: 0px;\n                -webkit-border-top-right-radius: 8px;\n                -webkit-border-bottom-right-radius: 8px;\n                -webkit-border-bottom-left-radius: 0px;\n                -moz-border-radius-topleft: 0px;\n                -moz-border-radius-topright: 8px;\n                -moz-border-radius-bottomright: 8px;\n                -moz-border-radius-bottomleft: 0px;\n                border-top-left-radius: 0px;\n                border-top-right-radius: 8px;\n                border-bottom-right-radius: 8px;\n                border-bottom-left-radius: 0px;\n                -webkit-box-shadow: 1px 1px 4px #666666;\n                -moz-box-shadow: 1px 1px 4px #666666;\n                box-shadow: 1px 1px 4px #666666;\n                width : 20px;\n                left : -100px;\n            }\n            .brGtlContent {\n            }\n            .barGotoline .brGtlTop {\n                background: url(images/barGotoLineCorners.png) no-repeat 0 0;\n                height: 3px;\n                width: 4px;\n                position: absolute;\n                top: -3px;\n                left:0;\n            }\n            .barGotoline .brGtlBottom {\n                background: url(images/barGotoLineCorners.png) no-repeat 0 -3px;\n                height: 3px;\n                width: 4px;\n                position: absolute;\n                bottom: -3px;\n                left:0;\n            }\n        ]]></a:style>\n        <a:style condition="apf.isIE"><![CDATA[\n            .barGotoline .brGtlTop, .barGotoline .brGtlBottom {\n                display: none;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main container=".">\n                <div class="barGotoline">\n                    <div class="brGtlTop"></div>\n                    <div class="brGtlBottom"></div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:bar>\n    <a:textbox name="textbox">\n        <a:style><![CDATA[\n            .tbGotoline {\n                position : relative;\n                height   : 25px;\n            }\n\n            .tbGotoline .sbtb_middle {\n                height           : 15px;\n                padding          : 2px 5px 2px 5px;\n\n                background-color: #ffffff;\n                background: -webkit-gradient(linear,left bottom,left top,color-stop(0.5, rgb(255,255,255)),color-stop(1, rgb(235,235,235)));\n                background: -moz-linear-gradient(center bottom,rgb(255,255,255) 50%,rgb(235,235,235) 100%);\n                color: #0471cf;\n                border-top: 1px solid #fafafa;\n                margin: 0;\n                outline: none;\n                font-family: \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Droid Sans Mono\', \'Consolas\', monospace;\n                font-size: 12px;\n                text-overflow: ellipsis;\n                -webkit-border-radius: 2px;\n                -moz-border-radius: 2px;\n                border-radius: 2px;\n\n                -webkit-box-shadow: 0px 1px 0px #ffffff;\n                -moz-box-shadow: 0px 1px 0px #ffffff;\n                box-shadow: 0px 1px 0px #ffffff;\n            }\n\n            .tbGotoline .sbtb_middle INPUT {\n                border           : 0;\n                height           : 13px;\n                font-size        : 12px;\n                color            : #0471cf;\n                font-family      : \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Droid Sans Mono\', \'Consolas\', monospace;\n                outline          : none;\n                background-color : transparent;\n                width: 100%;\n                text-align: center;\n            }\n\n            .tbGotolineInitial .sbtb_middle INPUT {\n                color : #0471cf;\n            }\n\n            .tbGotolineDisabled .sbtb_middle INPUT {\n                color : #0471cf;\n            }\n\n            .tbGotolineDisabled .sbtb_middle{\n                background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(235,235,235)),color-stop(0.4, rgb(255,255,255)));\n                background: -moz-linear-gradient(center bottom,rgb(235,235,235) 0%,rgb(255,255,255) 40%);\n                cursor : default;\n            }\n        ]]></a:style>\n        <a:style condition="apf.isWebkit"><![CDATA[\n            .tbGotoline .sbtb_middle INPUT {\n                position : relative;\n                top : -3px;\n                padding : 0;\n                height : auto;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main input="div[1]/input">\n                <div class="tbGotoline">\n                    <div class="sbtb_middle">\n                        <input type="text" />\n                    </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:textbox>\n</a:skin>\n'}),define("text!ext/gotoline/gotoline.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="winGotoLine"\n      skinset = "gotoline"\n      visible = "false"\n      width   = "60"\n      height  = "90"\n      left    = "0"\n      top     = "-100"\n      zindex  = "100000"\n      style   = "overflow:hidden">\n        <a:vbox top="0" right="0" bottom="0" width="61" padding="0" edge="5">\n            <a:textbox id="txtLineNr"\n              focusselect="true" />\n            <a:list id="lstLineNumber"\n              model   = "{tabEditors.getPage(tabEditors.activepagenr).$model}"\n              flex    = "1"\n              caption = "[@nr]"\n              each    = "[gotoline/line]"\n              autoselect    = "false"\n              multiselect   = "false"\n              empty-message = "empty" />\n        </a:vbox>\n    </a:bar>\n</a:application>\n'}),define("ext/gotoline/gotoline",["require","exports","module","core/ide","core/ext","ext/menus/menus","ext/commands/commands","ext/editors/editors","core/settings","text!ext/gotoline/skin.xml","text!ext/gotoline/gotoline.xml","ext/anims/anims"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ext/menus/menus"),o=e("ext/commands/commands"),u=e("ext/editors/editors"),a=e("core/settings"),f=e("text!ext/gotoline/skin.xml"),l=e("text!ext/gotoline/gotoline.xml"),c=e("ext/anims/anims");n.exports=i.register("ext/gotoline/gotoline",{name:"Gotoline Window",dev:"Ajax.org",type:i.GENERAL,alone:!0,skin:{id:"gotoline",data:f,"media-path":r.staticPrefix+"/ext/gotoline/images/"},markup:l,nodes:[],hook:function(){var e=this;this.nodes.push(s.addItemByPath("Goto/Goto Line...",new apf.item({caption:"Goto Line...",hint:"enter a linenumber and jump to it in the active document",command:"gotoline"}),200)),r.addEventListener("gotoline",function(){e.gotoline()}),o.addCommand({name:"gotoline",bindKey:{mac:"Command-L",win:"Ctrl-G"},isAvailable:function(e){return e&&e.amlEditor},exec:function(){e.gotoline()}})},init:function(){var e=this,t=lstLineNumber,n=txtLineNr;t.addEventListener("afterchoose",function(){t.selected?e.execGotoLine(parseInt(t.selected.getAttribute("nr"),10)):e.execGotoLine()}),t.addEventListener("afterselect",function(){if(!this.selected)return;n.setValue(this.selected.getAttribute("nr")),e.execGotoLine(null,null,!0)});var r=[38,40,36,35];t.addEventListener("keydown",function(t){if(t.keyCode==13&&this.selected)return!1;t.keyCode==38?this.selected==this.getFirstTraverseNode()&&(n.focus(),this.clearSelection()):t.keyCode==27?(e.hide(),u.currentEditor.amlEditor.focus()):r.indexOf(t.keyCode)==-1&&n.focus()},!0),n.addEventListener("keydown",function(n){if(n.keyCode==13)return e.execGotoLine(),!1;if(n.keyCode==27)return e.hide(),u.currentEditor.amlEditor.focus(),e.$originalLine&&(e.execGotoLine(e.$originalLine,e.$originalColumn,!0),delete e.$originalLine,delete e.$originalColumn),!1;if(n.keyCode==40){var r=t.getFirstTraverseNode();r&&(t.select(r),t.$container.scrollTop=0,t.focus())}else if((n.keyCode>57||n.keyCode==32)&&(n.keyCode<96||n.keyCode>105))return!1;!n.ctrlKey&&!n.metaKey&&apf.isCharacter(n.keyCode)&&setTimeout(function(){e.execGotoLine(null,null,!0)})}),winGotoLine.addEventListener("blur",function(t){apf.isChildOf(winGotoLine,t.toElement)||e.hide()}),n.addEventListener("blur",function(t){apf.isChildOf(winGotoLine,t.toElement)||e.hide()})},show:function(){var e=u.currentEditor,t=e.amlEditor.$editor,n=e.amlEditor.$ext,i=t.getCursorPosition();this.$originalLine=i.row+1,this.$originalColumn=i.column,txtLineNr.setValue(txtLineNr.getValue()||i.row+1);var s=t.renderer.textToScreenCoordinates(i.row,i.column),o=apf.getAbsolutePosition(n),f=n.offsetHeight-100,l=Math.max(0,Math.min(f,s.pageY-o[1]-5)),h=0;e.amlEditor.parentNode.appendChild(winGotoLine);var p=r.dispatchEvent("ext.gotoline.correctpos",{anim:"out",top:l,left:h});console.log("correcting??",p,(p?p.top:l)+"px",(p?p.left:h)+"px"),winGotoLine.top=p?p.top:l,winGotoLine.$ext.style.top=winGotoLine.top+"px",winGotoLine.show(),txtLineNr.focus(),apf.isTrue(a.model.queryValue("general/@animateui"))?(winGotoLine.setWidth(0),c.animate(winGotoLine,{width:"60px",timingFunction:"cubic-bezier(.11, .93, .84, 1)",duration:.15},function(){winGotoLine.$ext.style.left=(p?p.left:h)+"px"})):winGotoLine.setWidth(60)},hide:function(){apf.isTrue(a.model.queryValue("general/@animateui"))?c.animate(winGotoLine,{width:"0px",timingFunction:"cubic-bezier(.10, .10, .25, .90)",duration:.15},function(){winGotoLine.hide()}):winGotoLine.hide()},gotoline:function(){i.initExtension(this),this.control&&this.control.stop&&this.control.stop();var e=tabEditors.getPage();if(!e)return;var t=u.currentEditor;if(!t||!t.amlEditor)return;return winGotoLine.visible?this.hide():this.show(),!1},execGotoLine:function(e,t,n){var i=u.currentEditor;if(!i||!i.amlEditor)return;var s=i.amlEditor,o=s.$editor;typeof e!="number"&&(e=parseInt(txtLineNr.getValue(),10)||0);if(!this.lastLine||this.lastLine!=e||!o.isRowFullyVisible(e))o.gotoLine(e,t),this.lastLine=e;if(typeof n!="undefined"){var f=apf.isTrue(a.model.queryValue("editors/code/@animatedscroll"));if(!f)return;var l=o.getCursorPosition(),h=i.amlEditor.$ext,p=o.renderer.textToScreenCoordinates(0,0).pageY,d=o.renderer.textToScreenCoordinates(l.row,l.column),v=h.offsetHeight/2,m=s.$editor.renderer.lineHeight,g=o.getSession().getLength(),y=o.renderer.textToScreenCoordinates(g,0).pageY+m,b=h.offsetHeight-winGotoLine.getHeight()-10,w;if(d.pageY-p<v)w=Math.max(0,d.pageY-p-5);else if(y-d.pageY<v)w=Math.min(b,v+(v-(y-d.pageY)));else if(o.isRowFullyVisible(l.row)){var E=apf.getAbsolutePosition(h);w=Math.min(b,d.pageY-E[1]-5)}else w=v-1;this.lineControl&&this.lineControl.stop();var S=0,x=r.dispatchEvent("ext.gotoline.correctpos",{anim:"out",top:w,left:S});c.animate(winGotoLine,{top:(x?x.top:w)+"px",timingFunction:"cubic-bezier(.11, .93, .84, 1)",duration:.25},function(){winGotoLine.$ext.style.left=(x?x.left:S)+"px"})}else{this.hide();var T=lstLineNumber.$model,N,C=T.queryNode("gotoline/line[@nr='"+e+"']");C?N=C.parentNode:(N=apf.createNodeFromXpath(T.data,"gotoline"),C=apf.getXml("<line nr='"+e+"' />")),C!=N.firstChild&&apf.xmldb.appendChild(N,C,N.firstChild),s.focus()}},destroy:function(){o.removeCommandByName("gotoline"),this.$destroy()}})}),define("text!ext/help/help.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml"> \n    <a:window\n      id        = "aboutDialog"\n      icon      = ""\n      kbclose   = "true"\n      center    = "true"\n      width     = "512"\n      skinset   = "help-skin"\n      buttons   = "close"\n      skin      = "win-help-about"\n      class     = "aboutDialogBox">\n        <div class="aboutImage">\n            <div id="c9Version"><?lm\n                Version {cloud9config.version}\n            ?></div>\n             <!-- <div class="c9Legal">\n            <p><a href="http://www.bettercallsaul.com/">Click here for legal notices.</p>\n            </div> -->\n            <div class="c9StaffHeader">\n                <p>Cloud9 IDE is brought to you by:</p>\n            </div>\n            <div class="c9Staff">\n                <p>\n                    Bas de Wachter, Fabian Jakobs, Harutyun Amirjanyan, \n                    Ivar Pruijn, Jos Uijterwaal, Lennart Kats, Luca Cipriani, \n                    Mostafa Eweda, Ruben Daniels\n                </p>\n            </div>\n            <div class="c9Copyright">\n                <p>&#169; 2010 — 2013 Cloud9 IDE Inc. All rights reserved</p>\n            </div>\n        </div>\n    </a:window>\n</a:application>\n'}),define("text!ext/help/style.css",[],function(){return"#c9Version {\n    position: absolute;\n    top: 80px;\n    left: 215px;\n    color: white;\n    font-size: 12px;\n    padding-left: 12px;\n}\n\n.c9Legal {\n    position: absolute;\n    top: 60px;\n    left: 225px;\n    display:none;\n}\n\n.c9Staff {\n    position: absolute;\n    top: 170px;\n    left: 92px;\n    color: #aaaaaa;\n    font-size: 11px;\n    width: 390px;\n    line-height: 16px;\n}\n\n.c9StaffHeader {\n    text-transform:uppercase;\n    color: #dddddd;\n    font-size: 10px;\n    position: absolute;\n    top: 140px;\n    left: 170px;\n}\n\n.c9Copyright {\n    position: absolute;\n    bottom: 45px;\n    left: 155px;\n    font-size: 10px;\n    color: #aaaaaa;\n}"}),define("text!ext/help/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n    <a:modalwindow name="win-help-about">\n        <a:style><![CDATA[\n            .win-help-about {\n                overflow : hidden;\n            }\n\n            .win-help-about .wh-container {\n                overflow:visible;\n                z-index: 1;\n                position: relative;\n            }\n            \n            .aboutDialogBox .aboutImage {\n                position:relative;\n                color: white;\n                background: url(images/about_cloud.png) no-repeat 0 0;\n                width: 515px;\n                height: 339px;\n            }\n            \n            .win-help-about .buttons {\n                position: absolute;\n                top: 68px;\n                right: 78px;\n                z-index: 2;\n            }\n            .win-help-about .buttons .close {\n                 height: 20px;\n                width: 19px;\n                background: url(images/close.png) no-repeat 4px 3px;\n            }\n            \n            .win-help-about .buttons .close.hover {\n                background-position: -14px 3px;\n            }\n            \n            .win-help-about .buttons .close.down {\n                background-position: -31px 3px;\n            }\n        ]]></a:style>\n    \n        <a:presentation>\n            <a:main\n              collapsed-height = "26"\n              minheight        = "50"\n              minwidth         = "50"\n              drag             = "div[2]"\n              container        = "div[2]"\n              title            = "div[2]/text()"\n              buttons          = "div[1]">\n                <div class="win-help-about">\n                    <div class="buttons"></div>\n                    <div class="wh-container"> </div>\n                </div>\n            </a:main>\n            <a:button>\n                <div> </div>\n            </a:button>\n            <a:cover>\n                <div opacity="0"> </div>\n            </a:cover>\n        </a:presentation>\n    </a:modalwindow>\n</a:skin>'}),define("ext/help/help",["require","exports","module","core/ide","core/ext","ext/menus/menus","text!ext/help/help.xml","text!ext/help/style.css","text!ext/help/skin.xml"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ext/menus/menus"),o=e("text!ext/help/help.xml"),u=e("text!ext/help/style.css"),a=e("text!ext/help/skin.xml");n.exports=i.register("ext/help/help",{name:"Help Menu",dev:"Cloud9 IDE, Inc.",alone:!0,type:i.GENERAL,nodes:[],markup:o,css:u,panels:{},skin:{id:"help-skin",data:a,"media-path":r.staticPrefix+"/ext/help/images/"},showingAll:!0,hook:function(){var e=this,t=new apf.menu;this.nodes.push(s.addItemByPath("Help/",t,1e5));var n=0;s.addItemByPath("Help/About",new apf.item({onclick:function(){e.showAbout()}}),n+=100),s.addItemByPath("Help/IDE Status",new apf.item({onclick:function(){window.open("http://status.c9.io")}}),n+=100);var i=s.addItemByPath("Help/Changelog",new apf.item({onclick:function(){window.open("http://c9.io/site/tag/changelog/")}}),n+=100);s.addItemByPath("Help/~",new apf.divider,n+=100),r.addEventListener("hook.ext/keybindings_default/keybindings_default",function(e,t){s.addItemByPath("Help/Keyboard Shortcuts",new apf.item({onclick:function(){t.ext.keybindings()}}),e)}.bind(this,n+=100)),r.addEventListener("hook.ext/quickstart/quickstart",function(e,t){s.addItemByPath("Help/Quick Start",new apf.item({onclick:function(){t.ext.launchQS()}}),e)}.bind(this,n+=100)),r.addEventListener("hook.ext/guidedtour/guidedtour",function(e,t){s.addItemByPath("Help/Take a Guided Tour",new apf.item({onclick:function(){t.ext.launchGT()}}),e)}.bind(this,n+=100)),s.addItemByPath("Help/~",new apf.divider,n+=100),s.addItemByPath("Help/Support/",null,n+=100),s.addItemByPath("Help/~",new apf.divider,n+=100),s.addItemByPath("Help/Learning/",null,n+=100),s.addItemByPath("Help/~",new apf.divider,n+=100),s.addItemByPath("Help/Get in Touch/",null,n+=100),n=0,s.addItemByPath("Help/Support/FAQ",new apf.item({onclick:function(){window.open("http://support.c9.io/forums/20346041-frequently-asked-questions")}}),n+=100),s.addItemByPath("Help/Support/Troubleshooting Tips",new apf.item({onclick:function(){window.open("http://support.c9.io/forums/20329737-troubleshooting")}}),n+=100),n=0,s.addItemByPath("Help/Learning/YouTube Channel for Cloud9 IDE",new apf.item({onclick:function(){window.open("http://www.youtube.com/user/c9ide/videos?view=pl")}}),n+=100),n=0,s.addItemByPath("Help/Get in Touch/Blog",new apf.item({onclick:function(){window.open("http://blog.c9.io/")}}),n+=100),s.addItemByPath("Help/Get in Touch/Twitter (for Cloud9 IDE support)",new apf.item({onclick:function(){window.open("https://twitter.com/#!/C9Support")}}),n+=100),s.addItemByPath("Help/Get in Touch/Twitter (for general Cloud9 tweets)",new apf.item({onclick:function(){window.open("https://twitter.com/#!/cloud9ide")}}),n+=100),s.addItemByPath("Help/Get in Touch/Facebook",new apf.item({onclick:function(){window.open("https://www.facebook.com/Cloud9IDE")}}),n+=100);if(window.cloud9config.hosted||r.local&&r.onLine){var o=window.location.protocol+"//"+window.location.host+"/site/?json=get_tag_posts&tag_slug=changelog&count=1";apf.ajax(o,{method:"GET",contentType:"application/json",callback:function(e,t){if(t==apf.SUCCESS&&e!==undefined){var n="";try{var r=JSON.parse(e.replace(/<!-- .+? -->/,""));n=" ("+r.posts[0].date.split(" ")[0].replace(/-/g,".")+")"}catch(s){console.error("Changelog JSON parse failed: "+s)}i.setAttribute("caption","Changelog"+n)}}})}},init:function(e){apf.importCssString(this.css||"")},showAbout:function(){i.initExtension(this),aboutDialog.show(),document.getElementById("c9Version").innerHTML=apf.escapeXML("Version "+window.cloud9config.version)},launchTwitter:function(){alert("Let's go to Twitter!")}})}),define("text!ext/code/code.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:codeeditor id="codeEditor_dontEverUseThisVariable"\n      flex              = "1"\n      anchors           = "6 0 0 0"\n      theme             = "[{require(\'core/settings\').model}::editors/code/@theme]"\n      overwrite         = "[{require(\'core/settings\').model}::editors/code/@overwrite]"\n      folding           = "[{require(\'core/settings\').model}::editors/code/@folding]"\n      behaviors         = "[{require(\'core/settings\').model}::editors/code/@behaviors]"\n      wrapbehaviors     = "[{require(\'core/settings\').model}::editors/code/@wrapbehaviors]"\n      selectstyle       = "[{require(\'core/settings\').model}::editors/code/@selectstyle]"\n      activeline        = "[{require(\'core/settings\').model}::editors/code/@activeline]"\n      gutterline        = "[{require(\'core/settings\').model}::editors/code/@gutterline]"\n      showinvisibles    = "[{require(\'core/settings\').model}::editors/code/@showinvisibles]"\n      showprintmargin   = "[{require(\'core/settings\').model}::editors/code/@showprintmargin]"\n      showindentguides  = "[{require(\'core/settings\').model}::editors/code/@showindentguides]"\n      printmargincolumn = "[{require(\'core/settings\').model}::editors/code/@printmargincolumn]"\n      softtabs          = "[{require(\'core/settings\').model}::editors/code/@softtabs]"\n      tabsize           = "[{require(\'core/settings\').model}::editors/code/@tabsize]"\n      scrollspeed       = "[{require(\'core/settings\').model}::editors/code/@scrollspeed]"\n      newlinemode       = "[{require(\'core/settings\').model}::editors/code/@newlinemode]"\n      animatedscroll    = "[{require(\'core/settings\').model}::editors/code/@animatedscroll]"\n      fontsize          = "[{require(\'core/settings\').model}::editors/code/@fontsize]"\n      wrapmode          = "[@wrapmode]"\n      wrapmodeViewport  = "[{require(\'core/settings\').model}::editors/code/@wrapmodeViewport]"\n      wraplimitmin      = "40"\n      wraplimitmax      = "80"\n      gutter            = "[{require(\'core/settings\').model}::editors/code/@gutter]"\n      highlightselectedword = "[{require(\'core/settings\').model}::editors/code/@highlightselectedword]"\n      autohidehorscrollbar  = "[{require(\'core/settings\').model}::editors/code/@autohidehorscrollbar]"\n      fadefoldwidgets   = "[{require(\'core/settings\').model}::editors/code/@fadefoldwidgets]"\n\n      contextmenu       = "mnuCtxEditor"\n      globalcommands    = "true"\n      readonly          = "{\n            [@loading] \n            || (location.host and window.dbg and dbg.state and [@debug])\n        }"\n    />\n\n    <a:menu id="mnuCtxEditor">\n        <a:item id="mnuCtxEditorCut" command="cut">Cut</a:item>\n        <a:item command="copy">Copy</a:item>\n        <a:item command="paste">Paste</a:item>\n        <a:divider />\n        <a:item\n          visible="{dbg.state == \'stopped\'}"\n          onclick="\n            require(\'ext/quickwatch/quickwatch\').toggleDialog(1, true);\n          ">Quick Watch</a:item>\n        <a:divider visible="{dbg.state == \'stopped\'}" />\n        <a:item command="selectall">Select All</a:item>\n    </a:menu>\n\n    <a:menu id="mnuSyntax">\n        <a:item type="radio" value="auto">Auto-Select</a:item>\n        <a:item type="radio" value="text/plain">Plain Text</a:item>\n        <a:divider />\n        <a:item type="radio" value="text/x-csharp">C#</a:item>\n        <a:item type="radio" value="text/x-c">C/C++</a:item>\n        <a:item type="radio" value="text/x-script.clojure">Clojure</a:item>\n        <a:item type="radio" value="text/x-script.coffeescript">CoffeeScript</a:item>\n        <a:item type="radio" value="text/x-coldfusion">Coldfusion</a:item>\n        <a:item type="radio" value="text/css">CSS</a:item>\n        <a:item type="radio" value="text/diff">Diff</a:item>\n        <a:item type="radio" value="text/x-go">Golang</a:item>\n        <a:item type="radio" value="text/x-groovy">Groovy</a:item>\n        <a:item type="radio" value="text/hx">haXe</a:item>\n        <a:item type="radio" value="text/x-java-source">Java</a:item>\n        <a:item type="radio" value="application/javascript">JavaScript</a:item>\n        <a:item type="radio" value="application/json">JSON</a:item>\n        <a:item type="radio" value="application/x-latex">Latex</a:item>\n        <a:item type="radio" value="text/x-less">LESS</a:item>\n        <a:item type="radio" value="text/x-lua">Lua</a:item>\n        <a:item type="radio" value="text/x-markdown">Markdown</a:item>\n        <a:item type="radio" value="text/x-script.ocaml">OCaml</a:item>\n        <a:item type="radio" value="application/x-httpd-php">PHP</a:item>\n        <a:item type="radio" value="text/x-script.perl">Perl</a:item>\n        <a:item type="radio" value="text/x-script.powershell">Powershell</a:item>\n        <a:item type="radio" value="text/x-script.python">Python</a:item>\n        <a:item type="radio" value="text/x-script.ruby">Ruby</a:item>\n        <a:item type="radio" value="text/x-scala">Scala</a:item>\n        <a:item type="radio" value="text/x-scss">SCSS</a:item>\n        <a:item type="radio" value="application/x-sh">Shell Script</a:item>\n        <a:item type="radio" value="text/x-sql">(pg)SQL</a:item>\n        <a:item type="radio" value="image/svg+xml">SVG</a:item>\n        <a:item type="radio" value="text/x-web-textile">Textile</a:item>\n        <a:item type="radio" value="text/html">(X)HTML</a:item>\n        <a:item type="radio" value="application/xml">XML</a:item>\n        <a:item type="radio" value="application/x-yaml">YAML</a:item>\n    </a:menu>\n</a:application>\n'}),define("text!ext/code/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox position="1000" class="underlined" label="Auto-pair Brackets, Quotes, etc." value="[editors/code/@behaviors]" skin="checkbox_grey" />\n    <a:checkbox position="1001" class="underlined" label="Wrap Selection with Brackets, Quotes, etc." value="[editors/code/@wrapbehaviors]" skin="checkbox_grey" />\n    <a:checkbox position="2000" class="underlined" label="Code  Folding" value="[editors/code/@folding]" skin="checkbox_grey" />\n    <a:checkbox position="3000" class="underlined" label="Full Line Selection" value="[editors/code/@selectstyle]" values="line|text" skin="checkbox_grey" />\n    <a:checkbox position="4000" class="underlined" label="Highlight Active Line" value="[editors/code/@activeline]" skin="checkbox_grey" />\n    <a:checkbox position="4000" class="underlined" label="Highlight Gutter Line" value="[editors/code/@gutterline]" skin="checkbox_grey" />\n    <a:checkbox position="5000" class="underlined" id="cbsh"  label="Show Invisible Characters" value="[editors/code/@showinvisibles]" skin="checkbox_grey" />\n    <a:checkbox position="6000" class="underlined" label="Show Gutter" value="[editors/code/@gutter]" skin="checkbox_grey" />\n    <a:checkbox position="6500" class="underlined" label="Show Indent Guides" value="[editors/code/@showindentguides]" skin="checkbox_grey" />\n    <a:checkbox position="7000" class="underlined" label="Highlight Selected Word" value="[editors/code/@highlightselectedword]" skin="checkbox_grey" />\n    <a:checkbox position="8000" class="underlined" label="Auto-hide Horizontal Scrollbar" value="[editors/code/@autohidehorscrollbar]" skin="checkbox_grey" />\n    <a:checkbox position="9000" class="underlined" label="Fade Fold Widgets" value="[editors/code/@fadefoldwidgets]" skin="checkbox_grey" />\n     <!-- Vim mode is here -->\n    <a:hbox position="10000" edge="0 5 2 7" align="center" class="underlined">\n        <a:label flex="1">Font Size</a:label>\n        <a:spinner value="[editors/code/@fontsize]" realtime="true" min="1" max="72" width="50" class="fixMargin2" margin="5 0 0" />\n    </a:hbox>\n    <a:hbox position="11000" edge="0 5 0 0" align="center" class="underlined2">\n        <a:checkbox label="Show Print Margin" value="[editors/code/@showprintmargin]" flex="1" skin="checkbox_grey"/>\n        <a:spinner value="[editors/code/@printmargincolumn]" realtime="true" min="1" max="200" width="50" class="fixMargin5" margin="5 0 0"  />\n    </a:hbox>\n    <a:hbox position="12000" edge="0 5 0 0" align="center" class="underlined2">\n        <a:checkbox label="Insert Spaces as Soft Tabs" value="[editors/code/@softtabs]" style="margin-bottom:5px" flex="1" skin="checkbox_grey"/>\n        <a:spinner value="[editors/code/@tabsize]" realtime="true" min="1" max="64" width="50" class="fixMargin5" margin="5 0 0" />\n    </a:hbox>\n    <a:hbox position="13000" edge="0 5 2 7" align="center" class="underlined">\n        <a:label flex="1">Mouse Scroll Speed</a:label>\n        <a:spinner value="[editors/code/@scrollspeed]" realtime="true" min="1" max="8" width="50" class="fixMargin5" margin="5 0 0" />\n    </a:hbox>\n    <a:hbox position="14000" edge="5 5 2 5" align="center" class="underlined">\n        <a:label flex="1">Newline Mode</a:label>\n        \n        <a:dropdown value="[{require(\'core/settings\').model}::editors/code/@newlinemode]" width="150" height="21">\n            <a:item value="auto">Auto</a:item>\n            <a:item value="windows">Windows (CRLF)</a:item>\n            <a:item value="unix">Unix (LF)</a:item>\n        </a:dropdown>\n    </a:hbox>\n</a:application>\n'}),define("ace/ext/modelist",["require","exports","module"],function(e,t,n){"use strict";function i(e){var t=a.text,n=e.split(/[\/\\]/).pop();for(var i=0;i<r.length;i++)if(r[i].supportsFile(n)){t=r[i];break}return t}var r=[],s=function(e,t,n){this.name=e,this.caption=t,this.mode="ace/mode/"+e,this.extensions=n;if(/\^/.test(n))var r=n.replace(/\|(\^)?/g,function(e,t){return"$|"+(t?"^":"^.*\\.")})+"$";else var r="^.*\\.("+n+")$";this.extRe=new RegExp(r,"gi")};s.prototype.supportsFile=function(e){return e.match(this.extRe)};var o={ABAP:["abap"],ADA:["ada|adb"],ActionScript:["as"],AsciiDoc:["asciidoc"],Assembly_x86:["asm"],AutoHotKey:["ahk"],BatchFile:["bat|cmd"],C9Search:["c9search_results"],C_Cpp:["c|cc|cpp|cxx|h|hh|hpp"],Clojure:["clj"],Cobol:["^CBL|COB"],coffee:["^Cakefile|coffee|cf|cson"],ColdFusion:["cfm"],CSharp:["cs"],CSS:["css"],Curly:["curly"],D:["d|di"],Dart:["dart"],Diff:["diff|patch"],Dot:["dot"],Erlang:["erl|hrl"],EJS:["ejs"],Forth:["frt|fs|ldr"],FTL:["ftl"],Glsl:["glsl|frag|vert"],golang:["go"],Groovy:["groovy"],HAML:["haml"],Haskell:["hs"],haXe:["hx"],HTML:["htm|html|xhtml"],HTML_Ruby:["erb|rhtml|html.erb"],Ini:["Ini|conf"],Jade:["jade"],Java:["java"],JavaScript:["js"],JSON:["json"],JSONiq:["jq"],JSP:["jsp"],JSX:["jsx"],Julia:["jl"],LaTeX:["latex|tex|ltx|bib"],LESS:["less"],Liquid:["liquid"],Lisp:["lisp"],LiveScript:["ls"],LogiQL:["logic|lql"],LSL:["lsl"],Lua:["lua"],LuaPage:["lp"],Lucene:["lucene"],Makefile:["^GNUmakefile|^makefile|^Makefile|^OCamlMakefile|make"],MATLAB:["matlab"],Markdown:["md|markdown"],MySQL:["mysql"],MUSHCode:["mc|mush"],ObjectiveC:["m|mm"],OCaml:["ml|mli"],Pascal:["pas|p"],Perl:["pl|pm"],pgSQL:["pgsql"],PHP:["php|phtml"],Powershell:["ps1"],Prolog:["plg|prolog"],Properties:["properties"],Python:["py"],R:["r"],RDoc:["Rd"],RHTML:["Rhtml"],Ruby:["ru|gemspec|rake|rb"],Rust:["rs"],SASS:["sass"],SCAD:["scad"],Scala:["scala"],Scheme:["scm|rkt"],SCSS:["scss"],SH:["sh|bash"],snippets:["snippets"],SQL:["sql"],Stylus:["styl|stylus"],SVG:["svg"],Tcl:["tcl"],Tex:["tex"],Text:["txt"],Textile:["textile"],Toml:["toml"],Twig:["twig"],Typescript:["typescript|ts|str"],VBScript:["vbs"],Velocity:["vm"],XML:["xml|rdf|rss|wsdl|xslt|atom|mathml|mml|xul|xbl"],XQuery:["xq"],YAML:["yaml"]},u={ObjectiveC:"Objective-C",CSharp:"C#",golang:"Go",C_Cpp:"C/C++",coffee:"CoffeeScript",HTML_Ruby:"HTML (Ruby)",FTL:"FreeMarker"},a={};for(var f in o){var l=o[f],c=u[f]||f,h=f.toLowerCase(),p=new s(h,c,l[0]);a[h]=p,r.push(p)}n.exports={getModeForPath:i,modes:r,modesByName:a}}),define("ext/code/modes",["require","exports","module","ace/ext/modelist"],function(e,t,n){var r=e("ace/ext/modelist").modes,i={c_cpp:"text/x-c",clojure:"text/x-script.clojure",coffee:"text/x-script.coffeescript",css:"text/css",golang:"text/x-go",haml:"text/haml",haxe:"text/haxe",html:"text/html",java:"text/x-java-source",javascript:"application/javascript",json:"application/json",latex:"application/x-latex",objectivec:"text/objective-c",ocaml:"text/x-script.ocaml",perl:"text/x-script.perl",php:"application/x-httpd-php",powershell:"text/x-script.powershell",python:"text/x-script.python",ruby:"text/x-script.ruby",sh:"application/x-sh",svg:"image/svg+xml",text:"text/plain",textile:"text/x-web-textile",xml:"application/xml"},s=["c_cpp","clojure","coffee","csharp","css","dart","golang","html","jade","java","javascript","json","less","lua","perl","php","python","ruby","scala","scss","sh","stylus","sql","text","typescript","xml","xquery","yaml"],o=["c9search","text","snippets"],u={},a={},f={},l={};r.forEach(function(e){if(!e||typeof e.extensions!="string"){console.error&&console.error(n,e);return}var t=e.caption,n=e.name;e.id=n,e.mime=i[n]||"text/x-"+n,e.hidden=o.indexOf(e.name)!=-1,e.isPrimary=s.indexOf(e.name)!=-1,e.ext=e.extensions.replace(/\^/g,"*"),e.ext.split("|").forEach(function(e){a[e]=n}),u[n]=e,f[t]=n,l[e.mime]=n}),n.exports={all:u,extensions:a,captions:f,types:l}}),define("ext/code/code",["require","exports","module","apf/elements/codeeditor","core/ide","core/ext","ext/menus/menus","ext/commands/commands","ace/edit_session","ace/document","ace/range","ace/multi_select","ace/commands/default_commands","text!ext/code/code.xml","ext/settings/settings","ext/themes/themes","text!ext/code/settings.xml","ext/editors/editors","ace/config","./modes"],function(e,t,n){e("apf/elements/codeeditor");var r=e("core/ide"),i=e("core/ext"),s=e("ext/menus/menus"),o=e("ext/commands/commands"),u=e("ace/edit_session").EditSession,a=e("ace/document").Document,f=e("ace/range").Range,l=e("ace/multi_select").commands,c=e("ace/commands/default_commands").commands,h=e("text!ext/code/code.xml"),p=e("ext/settings/settings"),d=e("ext/themes/themes"),v=e("text!ext/code/settings.xml"),m=e("ext/editors/editors");e("ace/config").setDefaultValue("renderer","vScrollBarAlwaysVisible",!0),apf.actiontracker.actions.aceupdate=function(e,t){var n=e.args;if(!e.initial){e.initial=!0;return}t?n[1].undoChanges(n[0]):n[1].redoChanges(n[0])};var g=e("./modes"),y=g.all,b=g.extensions,w=g.captions,E=g.types;n.exports=i.register("ext/code/code",{name:"Code Editor",extName:"ext/code/code",dev:"Ajax.org",type:i.EDITOR,markup:h,deps:[m],nodes:[],menus:[],fileExtensions:Object.keys(b),supportedModes:Object.keys(y),prevSelection:null,getState:function(e){e=e?e.acesession:this.getDocument();if(!e||typeof e.getSelection!="function")return;var t=e.getAllFolds().map(function(e){return{start:e.start,end:e.end,placeholder:e.placeholder}}),n=e.getSelection();return{scrolltop:e.getScrollTop(),scrollleft:e.getScrollLeft(),selection:n.getRange(),folds:t}},setState:function(e,t){var n=e?e.acesession:this.getDocument();if(!n||!t||typeof n.getSelection!="function")return;var r=n.getSelection();r.setSelectionRange(t.selection,!1),n.setScrollTop(t.scrolltop),n.setScrollLeft(t.scrollleft);if(t.folds)for(var i=0,s=t.folds.length;i<s;i++){var o=t.folds[i];n.addFold(o.placeholder,f.fromPoints(o.start,o.end))}var u=e.getNode&&e.getNode();u&&parseInt(u.getAttribute("newfile")||0,10)===1&&u.childNodes.length&&e.getNode().childNodes[0]instanceof CDATASection&&n.setValue(e.getNode().childNodes[0].nodeValue)},getSyntax:function(e){if(!e)return"";var t=e.getAttribute("customtype"),n;if(t)n=E[t.split(";")[0]],n&&(t=b[E[t]]);else{var r=e.getAttribute("name"),i=r.lastIndexOf(".")+1;n=i?r.substr(i).toLowerCase():"*"+r,t=b[n]}return y[t]?t:"text"},setSyntax:function(e){e=y[e]?e:"";var t=r.getActivePageModel();if(!t)return;var n=t.getAttribute("name"),i=n.lastIndexOf(".")+1,s=i?n.substr(i).toLowerCase():"*"+n;if(e){if(!y[e])return;apf.xmldb.setAttribute(t,"customtype",e),b[s]=e}else{apf.xmldb.removeAttribute(t,"customtype",""),delete b[s];for(var o in y)if(y[o].ext.split("|").indexOf(s)!=-1){b[s]=o;break}}var u=this.setCustomType(i?s:t,e);r.dispatchEvent("track_action",{type:"syntax highlighting",fileType:s,fileName:n,mime:u,customType:e}),this.amlEditor&&this.amlEditor.setAttribute("syntax",this.getSyntax(t))},getContentType:function(e){var t=this.getSyntax(e);return t?y[t].mime||"auto":"auto"},getSelection:function(){return typeof this.amlEditor=="undefined"?null:this.amlEditor.getSelection()},getDocument:function(){return typeof this.amlEditor=="undefined"?null:this.amlEditor.getSession()},setDocument:function(e,t,n){var r=this,i=this.amlEditor;if(e.acesession)i.setProperty("value",e.acesession);else{e.isInited=e.hasValue(),e.acedoc=e.acedoc||new a(e.getValue()||"");var s=r.getSyntax(e.getNode()),o=i.getMode(s);e.acesession=new u(e.acedoc,o),e.acesession.syntax=s,e.acedoc=e.acesession.getDocument(),e.acesession.c9doc=e,e.acesession.setUndoManager(t),e.isInited&&e.state&&r.setState(e,e.state);var f;e.addEventListener("prop.value",f=function(t){if(this.editor!=r)return;if(!e||!e.acesession)return;e.acesession.setValue(t.value||""),e.state&&r.setState(e,e.state),e.isInited=!0;if(this.$page.id!=this.$page.parentNode.activepage)return;i.setAttribute("syntax",s),i.setAttribute("value",e.acesession);var n=Math.min(50,e.acesession.getLength());e.acesession.bgTokenizer.getTokens(0,n)}),n||i.setProperty("value",e.acesession||"");var l;e.addEventListener("retrievevalue",l=function(t){if(this.editor!=r||!e)return;return e.isInited?e.acesession.getValue():t.value});var c;e.addEventListener("close",c=function(t){if(this.editor!=r)return;e.removeEventListener("close",c),e.removeEventListener("retrievevalue",l),e.removeEventListener("prop.value",f),setTimeout(function(){e.acedoc&&(e.acedoc.$lines=[],e.acedoc._eventRegistry=null,e.acedoc._defaultHandlers=null,e.acedoc=null),e.acesession.$stopWorker(),e.acesession.bgTokenizer.lines=[],e.acesession.bgTokenizer.tokenizer=null,e.acesession.bgTokenizer=null,e.acesession.$rowCache=null,e.acesession.$mode=null,e.acesession.$origMode=null,e.acesession.$breakpoints=null,e.acesession.$annotations=null,e.acesession.languageAnnos=null,e.acesession=null,e=null})}),e.dispatchEvent("init")}if(e.editor&&e.editor!=this){var h=e.getValue();e.acesession.getValue()!==h&&(e.editor=this,e.dispatchEvent("prop.value",{value:h}))}e.editor=this},clear:function(){this.amlEditor.clear()},focus:function(){this.amlEditor.focus()},hook:function(){var e=this;this.wrapAceCommands(),o.addCommand({name:"syntax",exec:function(t,n){typeof n=="object"&&(n=n.argv&&n.argv[1]||""),n=w[n]||b[n]||n,e.setSyntax(n)},commands:w}),r.addEventListener("settings.load",function(t){p.setDefaults("editors/code",[["overwrite","false"],["selectstyle","line"],["activeline","true"],["gutterline","true"],["showinvisibles","false"],["showprintmargin","true"],["showindentguides","true"],["printmargincolumn","80"],["behaviors","true"],["wrapbehaviors","false"],["softtabs","true"],["tabsize","4"],["scrollspeed","2"],["fontsize","12"],["wrapmode","false"],["wraplimitmin",""],["wraplimitmax",""],["wrapmodeViewport","true"],["gutter","true"],["folding","true"],["newlinemode","auto"],["highlightselectedword","true"],["autohidehorscrollbar","true"],["fadefoldwidgets","true"],["animatedscroll","true"]]);var n=t.model.queryValue("editors/code/@behaviorsdefaulted");n!=="true"&&(t.model.setQueryValue("editors/code/@behaviorsdefaulted","true"),t.model.setQueryValue("editors/code/@behaviors","true"),t.model.setQueryValue("editors/code/@wrapbehaviors","false")),e.getCustomTypes(t.model)}),p.addSettings("Code Editor",v),r.addEventListener("tab.afterswitch",function(t){var n=e.amlEditor;if(typeof n!="undefined"){var r=(t.nextPage.name.indexOf(t.currentTarget.davPrefix)===0?t.nextPage.name.substr(t.currentTarget.davPrefix.length):t.nextPage.name).replace(/^\/+/,"");n.afterOpenFile(n.getSession(),r)}}),this.registerMenuItems()},wrapAceCommands:function(){var e=function(e){e.readOnly=e.readOnly||!1,e.focusContext=!0;var t=e.isAvailable;e.isAvailable=function(e,n){return n instanceof KeyboardEvent&&(!apf.activeElement||apf.activeElement.localName!="codeeditor")?!1:t?t(e):!0},e.findEditor=function(e){return e&&e.amlEditor?e.amlEditor.$editor:e}};c.wrapped||(c.each(e,c),c.wrapped=!0),l.wrapped||(l.each(e,l),l.wrapped=!0),o.addCommands(c,!0),o.addCommands(l,!0),o.commands.togglerecording.bindKey={mac:"Command-Shift-R",win:"Alt-Shift-R"},o.commands.replaymacro.bindKey={mac:"Command-Ctrl-R",win:"Alt-R"},o.addCommand(o.commands.togglerecording),o.addCommand(o.commands.replaymacro)},registerMenuItems:function(){function n(e,n){return s.addItemByPath(e,new apf.item({command:n}),t+=100)}function a(t){e.prevSelection?(e.prevSelection.uncheck(),e.prevSelection.group.selectedItem.caption=="Other"&&e.prevSelection.group.selectedItem.$ext.setAttribute("class","menu_item submenu"),e.prevSelection=this):e.prevSelection=this,e.setSyntax(t.currentTarget.value)}var e=this,t=2e4;this.menus.push(s.addItemByPath("Tools/~",new apf.divider,t+=100),n("Tools/Toggle Macro Recording","togglerecording"),n("Tools/Play Macro","replaymacro")),t=600,this.menus.push(s.addItemByPath("Edit/~",new apf.divider,t+=100),s.addItemByPath("Edit/Line/",null,t+=100),s.addItemByPath("Edit/Comment/",null,t+=100),s.addItemByPath("Edit/Text/",null,t+=100),s.addItemByPath("Edit/Code Folding/",null,t+=100),s.addItemByPath("Edit/Convert Case/",null,t+=100)),t=0,this.menus.push(n("Edit/Line/Indent","indent"),n("Edit/Line/Outdent","outdent"),n("Edit/Line/Move Line Up","movelinesup"),n("Edit/Line/Move Line Down","movelinesdown"),s.addItemByPath("Edit/Line/~",new apf.divider,t+=100),n("Edit/Line/Copy Lines Up","copylinesup"),n("Edit/Line/Copy Lines Down","copylinesdown"),s.addItemByPath("Edit/Line/~",new apf.divider,t+=100),n("Edit/Line/Remove Line","removeline"),n("Edit/Line/Remove to Line End","removetolineend"),n("Edit/Line/Remove to Line Start","removetolinestart"),s.addItemByPath("Edit/Line/~",new apf.divider,t+=100),n("Edit/Line/Split Line","splitline")),t=0,this.menus.push(n("Edit/Comment/Toggle Comment","togglecomment")),t=0,this.menus.push(n("Edit/Text/Align","alignCursors"),n("Edit/Text/Sort Lines","sortlines"),s.addItemByPath("Edit/Text/~",new apf.divider,t+=100),n("Edit/Text/Increase Number at Cursor","modifyNumberUp"),n("Edit/Text/Decrease Number at Cursor","modifyNumberDown"),s.addItemByPath("Edit/Text/~",new apf.divider,t+=100),n("Edit/Text/Remove Word Right","removewordright"),n("Edit/Text/Remove Word Left","removewordleft"),s.addItemByPath("Edit/Text/~",new apf.divider,t+=100),n("Edit/Text/Transpose Letters","transposeletters")),t=0,this.menus.push(n("Edit/Code Folding/Fold","fold"),n("Edit/Code Folding/Unfold","unfold"),s.addItemByPath("Edit/Code Folding/~",new apf.divider,t+=100),n("Edit/Code Folding/Fold All","foldall"),n("Edit/Code Folding/Unfold All","unfoldall")),t=0,this.menus.push(n("Edit/Convert Case/Upper Case","touppercase"),n("Edit/Convert Case/Lower Case","tolowercase")),t=0,this.menus.push(n("Selection/Select All","selectall"),n("Selection/Split Into Lines","splitIntoLines"),n("Selection/Single Selection","singleSelection"),s.addItemByPath("Selection/~",new apf.divider,t+=100),s.addItemByPath("Selection/Multiple Selections/",null,t+=100),s.addItemByPath("Selection/~",new apf.divider,t+=100),n("Selection/Select Word Right","selectwordright"),n("Selection/Select Word Left","selectwordleft"),s.addItemByPath("Selection/~",new apf.divider,t+=100),n("Selection/Select to Line End","selecttolineend"),n("Selection/Select to Line Start","selecttolinestart"),s.addItemByPath("Selection/~",new apf.divider,t+=100),n("Selection/Select to Document End","selecttoend"),n("Selection/Select to Document Start","selecttostart")),t=0,this.menus.push(n("Selection/Multiple Selections/Add Cursor Up","addCursorAbove"),n("Selection/Multiple Selections/Add Cursor Down","addCursorBelow"),n("Selection/Multiple Selections/Move Active Cursor Up","addCursorAboveSkipCurrent"),n("Selection/Multiple Selections/Move Active Cursor Down","addCursorBelowSkipCurrent"),s.addItemByPath("Selection/Multiple Selections/~",new apf.divider,t+=100),n("Selection/Multiple Selections/Add Next Selection Match","selectMoreAfter"),n("Selection/Multiple Selections/Add Previous Selection Match","selectMoreBefore"),s.addItemByPath("Selection/Multiple Selections/~",new apf.divider,t+=100),n("Selection/Multiple Selections/Merge Selection Range","splitIntoLines"));var i,o;this.menus.push(s.addItemByPath("View/Gutter",new apf.item({type:"check",checked:"[{require('core/settings').model}::editors/code/@gutter]"}),500),s.addItemByPath("View/~",new apf.divider,29e4),s.addItemByPath("View/Syntax/",new apf.menu({"onprop.visible":function(e){if(e.value)if(!m.currentEditor||!m.currentEditor.amlEditor)this.disable();else{this.enable();var t=tabEditors.getPage(),n=t&&t.$model.data;i.setValue(n&&n.getAttribute("customtype")||"auto")}},onitemclick:function(t){e.setSyntax(t.relatedNode.value)}}),3e5),o=new apf.group,s.addItemByPath("View/Newline Mode/",new apf.menu({"onprop.visible":function(e){e.value&&o.setValue(p.model.queryValue("editors/code/@newlinemode"))},onitemclick:function(e){p.model.setQueryValue("editors/code/@newlinemode",e.relatedNode.value)}}),31e4),s.addItemByPath("View/Newline Mode/Auto",new apf.item({type:"radio",value:"auto",group:o}),100),s.addItemByPath("View/Newline Mode/~",new apf.divider,110),s.addItemByPath("View/Newline Mode/Windows (CRLF)",new apf.item({type:"radio",value:"windows",group:o}),200),s.addItemByPath("View/Newline Mode/Unix (LF)",new apf.item({type:"radio",value:"unix",group:o}),300),s.addItemByPath("View/~",new apf.divider,4e5),s.addItemByPath("View/Wrap Lines",new apf.item({type:"check",checked:"[{tabEditors.activepage && tabEditors.getPage(tabEditors.activepage).$model}::@wrapmode]"}),5e5),s.addItemByPath("View/Wrap To Viewport",new apf.item({id:"mnuWrapView",type:"check",checked:"[{require('core/settings').model}::editors/code/@wrapmodeViewport]"}),6e5)),t=0;var u;this.menus.push(i=new apf.group,s.addItemByPath("View/Syntax/Auto-Select",new apf.item({type:"radio",value:"auto",group:i}),t+=100),s.addItemByPath("View/Syntax/Plain Text",new apf.item({type:"radio",value:"text",group:i}),t+=100),u=window.otherGrpSyntax=new apf.group({type:""}),s.addItemByPath("View/Syntax/Other",new apf.item({group:u}),t+9e4),s.addItemByPath("View/Syntax/~",new apf.divider,t+=100));for(var f in y){var l=y[f];if(l.hidden)continue;this.menus.push(s.addItemByPath("View/Syntax/"+(l.isPrimary?l.caption:"Other/"+l.caption),new apf.item({type:"radio",value:l.id,group:l.isPrimary?i:u,onclick:a}),t+=100))}var c=window[s.getMenuId("View/Syntax/Other")];c.addEventListener("prop.visible",function(){c.$ext.style.maxHeight=window.innerHeight-50+"px",c.$ext.style.overflowY="auto"}),t=0,this.menus.push(s.addItemByPath("Goto/~",new apf.divider,t=399),n("Goto/Word Right","gotowordright"),n("Goto/Word Left","gotowordleft"),s.addItemByPath("Goto/~",new apf.divider,600),n("Goto/Line End","gotolineend"),n("Goto/Line Start","gotolinestart"),s.addItemByPath("Goto/~",new apf.divider,t+=100),n("Goto/Jump to Matching Brace","jumptomatching"),s.addItemByPath("Goto/~",new apf.divider,t+=100),n("Goto/Scroll to Selection","centerselection")),r.addEventListener("tab.afterswitch",function(e){var t=e.nextPage.$editor.path!="ext/code/code"?"disable":"enable";s.menus.Edit[t](),s.menus.Selection[t](),s.menus.Find[t](),s.menus["View/Syntax"][t](),s.menus["View/Font Size"][t](),s.menus["View/Syntax/Other"][t](),s.menus["View/Syntax"][t](),s.menus["View/Newline Mode"][t](),s.menus.Goto[t]()})},init:function(e){var t=this;t.amlEditor=codeEditor_dontEverUseThisVariable,t.amlEditor.show(),t.amlEditor.$editor.$nativeCommands=t.amlEditor.$editor.commands,t.amlEditor.$editor.commands=o;var n=function(){};t.amlEditor.getMode("javascript",n),t.amlEditor.getMode("html",n),t.amlEditor.getMode("css",n),r.addEventListener("reload",function(e){var t=e.doc;t.state=t.$page.$editor.getState&&t.$page.$editor.getState(t)}),r.addEventListener("afterreload",function(e){var t=e.doc,n=t.acesession;if(!n)return;if(n.doc.getValue()===e.data)return;n.doc.setValue(e.data);if(t.state){var r=t.$page.$editor;r.setState&&r.setState(t,t.state)}}),r.addEventListener("updatefile",function(e){var n=tabEditors.getPage(e.xmlNode.getAttribute("path"));if(!n||!n.$doc||!n.$doc.acesession)return;setTimeout(function(){var e=n.$doc,r=t.getSyntax(e.getNode());e.acesession&&(e.acesession.setMode(t.amlEditor.getMode(r)),e.acesession.syntax=r)})}),r.addEventListener("afteroffline",function(){s.menus["View/Syntax"].disable()}),r.addEventListener("afteronline",function(){s.menus["View/Syntax"].enable()}),r.addEventListener("animate",function(e){if(!t.amlEditor.$ext.offsetHeight)return;var n,r;if(e.type=="editor")n=t.amlEditor.$editor.renderer,n.onResize(!0,null,null,t.amlEditor.getHeight()+e.delta);else if(e.type=="splitbox")if(e.options.height!==undefined&&apf.isChildOf(e.other,t.amlEditor,!0)){r=e.which.getHeight()-Number(e.options.height);if(r<0)return;n=t.amlEditor.$editor.renderer,n.onResize(!0,null,null,t.amlEditor.getHeight()+r)}else if(e.options.width!==undefined&&apf.isChildOf(e.other,t.amlEditor,!0)){r=e.which.getWidth()-Number(e.options.width);if(r<0)return;n=t.amlEditor.$editor.renderer,n.onResize(!0,null,t.amlEditor.getWidth()+r)}});var i,u,a,f,l,c,h=function(e){function p(e){n.setAttribute("loading_progress",e),a.style.width=e*h/100+"px"}function v(){n.setAttribute("loading_progress",0),a.style.width="0px"}if(!t.amlEditor.xmlRoot)return;var n=t.amlEditor.xmlRoot,r=n.hasAttribute("loading"),s=t.amlEditor.$editor.container,o=s.offsetWidth/5,h=s.offsetWidth-2*o;if(r){var m=d.getActiveTheme();u||(u=document.createElement("div"),u.className="ace_smooth_loading",f=document.createElement("div"),f.className="loading_bg",u.appendChild(f),a=document.createElement("div"),a.className="loading_progress",u.appendChild(a),p(10)),u.parentNode||s.parentNode.appendChild(u),u.style.backgroundColor=m?m.bg:"gray",f.style.width=h+"px",f.style.left=o+"px",f.style.top=.4*s.offsetHeight+"px",a.style.left=o+"px",a.style.top=.4*s.offsetHeight+"px",s.style.transitionProperty="opacity",s.style.transitionDuration="100ms",s.style.pointerEvents="none",s.style.opacity=0,i=!0,clearInterval(l),l=setInterval(function(){var e=parseFloat(n.getAttribute("loading_progress"),10),t;e<35?t=3:e<70?t=1:e<90&&(t=.25),t&&p(e+t)},30),clearTimeout(c)}else i&&(clearInterval(l),p(100),setTimeout(function(){i=!1,v(),s.style.opacity=1,s.style.pointerEvents=""},40),c=setTimeout(function(){u.parentNode&&u.parentNode.removeChild(u)},100))};r.addEventListener("openfile",function(){setTimeout(h,0)}),r.addEventListener("afteropenfile",h),r.addEventListener("tab.afterswitch",h)},setCustomType:function(e,t){var n;if(typeof e=="string")n=p.model.queryNode('auto/customtypes/mime[@ext="'+e+'"]'),!n&&t&&(n=p.model.appendXml('<mime ext="'+e+'" />',"auto/customtypes"));else{var r=e.getAttribute("name")||"";n=p.model.queryNode('auto/customtypes/mime[@filename="'+r+'"]'),n?apf.xmldb.removeAttribute(n,"ext"):t&&(n=p.model.appendXml('<mime filename="'+r+'" />',"auto/customtypes"))}return t?apf.xmldb.setAttribute(n,"name",t):n&&apf.xmldb.removeNode(n),p.save(),t&&y[t].mime},getCustomTypes:function(e){var t=e.queryNode("auto/customtypes");t||(t=apf.createNodeFromXpath(e.data,"auto/customtypes"));var n=t.selectNodes("mime");n.forEach(function(e){var t=e.getAttribute("filename");t=t?"*"+t:e.getAttribute("ext");var n=e.getAttribute("name");E[n]&&(n=E[n]),y[n]&&(b[t]=n)})},enable:function(){this.$enable(),this.nodes.each(function(e){e.show()})},disable:function(){this.$disable(),this.nodes.each(function(e){e.hide()})},destroy:function(){this.menus.each(function(e){e.destroy(!0,!0)}),o.removeCommands(c),o.removeCommands(l),this.amlEditor&&(this.amlEditor.destroy(!0,!0),mnuSyntax.destroy(!0,!0)),this.$destroy()}})}),define("ace/worker/mirror",["require","exports","module","../document","../lib/lang"],function(e,t,n){"use strict";var r=e("../document").Document,i=e("../lib/lang"),s=t.Mirror=function(e){this.sender=e;var t=this.doc=new r(""),n=this.deferredUpdate=i.delayedCall(this.onUpdate.bind(this)),s=this;e.on("change",function(e){t.applyDeltas(e.data),n.schedule(s.$timeout)})};(function(){this.$timeout=500,this.setTimeout=function(e){this.$timeout=e},this.setValue=function(e){this.doc.setValue(e),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(e){this.sender.callback(this.doc.getValue(),e)},this.onUpdate=function(){}}).call(s.prototype)}),define("ext/language/base_handler",["require","exports","module"],function(e,t,n){n.exports={language:null,project:null,path:null,workspaceDir:null,doc:null,isFeatureEnabled:function(e){return!disabledFeatures[e]},handlesLanguage:function(e){return!1},getMaxFileSizeSupported:function(){return 8e5},isParsingSupported:function(){return!1},getIdentifierRegex:function(){return null},getCompletionRegex:function(){return null},parse:function(e,t){t()},findNode:function(e,t,n){n()},getPos:function(e,t){t()},init:function(e){e()},onUpdate:function(e,t){t()},onDocumentOpen:function(e,t,n,r){r()},onDocumentClose:function(e,t){t()},onCursorMovedNode:function(e,t,n,r,i){i()},outline:function(e,t,n){n()},hierarchy:function(e,t,n){n()},complete:function(e,t,n,r,i){i()},analyze:function(e,t,n){n()},getVariablePositions:function(e,t,n,r,i){i()},onRenameBegin:function(e,t){t()},commitRename:function(e,t,n,r){r()},onRenameCancel:function(e){e()},codeFormat:function(e,t){t()},jumpToDefinition:function(e,t,n,r,i){i()},getResolutions:function(e,t,n,r){r()},hasResolution:function(e,t,n,r){r()}}}),define("ext/linereport/linereport_base",["require","exports","module","ext/language/base_handler"],function(e,t,n){var r=e("ext/language/base_handler"),i=n.exports=Object.create(r),s=6e4,o=6e4,u=1,a={},f={},l={},c={};i.init=function(){i.$isInited=!1,i.sender.on("linereport_invoke_result",function(e){i.$onInvokeResult(e.data)})},i.initReporter=function(e,t,n){i.$invoke(e,null,function(e,r,s){e!==0?i.$invoke(t,null,n):n()})},i.invokeReporter=function(e,t,n){function a(){l[e]=setTimeout(function(){delete l[e]},s),r.$invoke(e,i.path,function(i,s,u){var a=r.doc.getValue();f[e]=f[e]||{};var h=f[e]["_"+a]=r.parseOutput(s,t).concat(r.parseOutput(u,t));setTimeout(function(){f[e]&&f[e]["_"+a]&&delete f[e]["_"+a]},o),h.length===0&&i!==0&&console.log("External tool produced an error that could not be parsed:\n",u+"\n"+s),l[e]&&(clearTimeout(l[e]),delete l[e]),n(h),c[e]&&(c[e](),delete c[e])})}var r=this;f[e]=f[e]||{};var u=this.doc.getValue();if(f[e]["_"+u])return n(f[e]["_"+u]);f[e]={};if(l[e])return c[e]=a;a()},i.onDocumentOpen=function(e,t,n,r){f={},r()},i.$invoke=function(e,t,n){var r=u++,s={command:"bash",argv:["bash","-c",e],line:e,cwd:i.workspaceDir,requireshandling:!0,tracer_id:r,extra:{linereport_id:r}};a[r]=n,this.sender.emit("linereport_invoke",{command:s,path:t,language:this.language,source:this.$source})},i.$onInvokeResult=function(e){if(!a[e.id])return;a[e.id](e.code,e.stdout,e.stderr),delete a[e.id]},i.parseOutput=function(e,t){var n=e.split("\n"),r=[];for(var i=0;i<n.length;i++){var s=n[i];t&&(s=t(s));var o=s&&s.charAt?this.$parseOutputLine(s):s;o&&r.push(o)}return r},i.$parseOutputLine=function(e){var t=e.match(/^\s*(\d+):(?:\s*(\d+):)?\s*(.*)/);if(!t)return;var n=t[3].match(/^\s.?warning.?:?\s*(.*)/i),r=t[3].match(/^\.?error.?:?\s*(.*)/i),i=t[3].match(/^\.?info.?:?\s*(.*)/i);return{pos:{sl:parseInt(t[1],10)-1,sc:parseInt(t[2],10)-1},type:"unused",level:n?"warning":i?"info":"error",skipMixed:!0,message:n?n[1]:i?i[1]:r?r[1]:t[3]}}}),define("ext/language/syntax_detector",["require","exports","module"],function(e,t,n){function i(e,t){if(!r[t])return[{syntax:t,sl:0,sc:0,el:e.getLength()-1,ec:e.getLine(e.getLength()-1).length}];var n=e.getAllLines(),i=r[t],s=i["default"]||t,o=Object.keys(i).filter(function(e){return e.indexOf("-start")===e.length-6}),u=s,a=[{syntax:u,sl:0,sc:0}],f,l,c,h,p,d,v,m=0;for(var g=0;g<n.length;g++){var y=n[g];d=null;if(l)d=l.exec(y),d?(l=null,u=s,a[a.length-1].el=g,a[a.length-1].ec=d.index+m,a.push({syntax:u,sl:g,sc:d.index+m}),v=d.index+d[0].length,n[g]=y.substring(v),m+=v,g--):m=0;else{for(p=0;p<o.length;p++)c=o[p],h=i[c].exec(y),h&&(!d||d.index>h.index)&&(d=h,f=c);d?(u=f.replace("-start",""),l=i[u+"-end"],a[a.length-1].el=g,a[a.length-1].ec=m+d.index+d[0].length,a.push({syntax:u,sl:g,sc:m+d.index+d[0].length}),v=d.index+d[0].length,n[g]=y.substring(d.index+d[0].length),g--,m+=v):m=0}}return a[a.length-1].el=n.length,a[a.length-1].ec=n[n.length-1].length,a}function s(e,t,n){if(!r[n]){var s,o={language:n,region:i(e,n)[0],index:0};return o.__defineGetter__("value",function(){return s||(s=e.getValue()),s}),o}var a=i(e,n);for(var f=0;f<a.length;f++){var l=a[f];if(t.row>l.sl&&t.row<l.el||t.row===l.sl&&t.column>=l.sc||t.row===l.el&&t.column<=l.ec)return u(e,l,f)}return null}function o(e,t,n){var r=s(e,t,n);return r&&r.language}function u(e,t,n){var r=e.getLines(t.sl,t.el),i,s={language:t.syntax,region:t,index:n};return s.__defineGetter__("value",function(){return i||(i=t.sl===t.el?r[0].substring(t.sc,t.ec):[r[0].substring(t.sc)].concat(r.slice(1,r.length-1)).concat([r[r.length-1].substring(0,t.ec)]).join(e.getNewLineCharacter())),i}),s}function a(e,t){var n=i(e,t);return n.map(function(t,n){return u(e,t,n)})}function f(e,t){return{row:t.row-e.sl,column:t.column,path:t.path}}function l(e,t){return{row:t.row+e.sl,column:t.column,path:t.path}}var r={php:{"default":"html","php-start":/<\?(?:php|\=)?/,"php-end":/\?>/,"css-start":/<style[^>]*>/,"css-end":/<\/style>/,"javascript-start":/<script(?:\"[^\"]*\"|'[^']*'|[^'">\/])*>/,"javascript-end":/<\/script>/},html:{"css-start":/<style[^>]*>/,"css-end":/<\/style>/,"javascript-start":/<script(?:\"[^\"]*\"|'[^']*'|[^'">\/])*>/,"javascript-end":/<\/script>/}};t.getContextSyntax=o,t.getContextSyntaxPart=s,t.getSyntaxRegions=i,t.getCodeParts=a,t.posToRegion=f,t.regionToPos=l}),define("ext/codecomplete/complete_util",["require","exports","module"],function(e,t,n){function i(e,t,n){n=n||r;var i=[];for(var s=t-1;s>=0;s--){if(!n.test(e[s]))break;i.push(e[s])}return i.reverse().join("")}function s(e,t,n){n=n||r;var i=[];for(var s=t;s<e.length;s++){if(!n.test(e[s]))break;i.push(e[s])}return i}function o(e,t){var n=0,r=e.length-1,i=Math.floor((r+n)/2);while(r>n&&i>=0&&e[i].indexOf(t)!==0)t<e[i]?r=i-1:t>e[i]&&(n=i+1),i=Math.floor((r+n)/2);while(i>0&&e[i-1].indexOf(t)===0)i--;return i>=0?i:0}function u(e,t){t.sort();var n=o(t,e),r=[];for(var i=n;i<t.length&&t[i].indexOf(e)===0;i++)r.push(t[i]);return r}function a(e,t){var n=new XMLHttpRequest;n.open("GET",e+"/"+t,!1);try{n.send()}catch(r){return!1}return n.status===200?n.responseText:!1}function f(e,t,n,r,s){if(n.row!==r.row)return!1;if(e===t)return!0;if(t.indexOf(e)!==0)return!1;var o=i(e,n.column,s),u=i(t,r.column,s);return t.substr(0,t.length-u.length)===e.substr(0,e.length-o.length)}var r=/[a-zA-Z_0-9\$]/;t.retrievePreceedingIdentifier=function(){return console.error("Deprecated: 'retrievePreceedingIdentifier' - use 'retrievePrecedingIdentifier' instead"),i.apply(null,arguments)},t.retrievePrecedingIdentifier=i,t.retrieveFollowingIdentifier=s,t.findCompletions=u,t.fetchText=a,t.DEFAULT_ID_REGEX=r,t.canCompleteForChangedLine=f}),define("ext/language/worker",["require","exports","module","ace/lib/oop","ace/worker/mirror","treehugger/tree","ace/lib/event_emitter","ext/linereport/linereport_base","ext/language/syntax_detector","ext/codecomplete/complete_util","ace/lib/event_emitter"],function(require,exports,module){function applyEventOnce(e){var t;return function(){var n=arguments;t&&clearTimeout(t),t=setTimeout(function(){e.apply(e,n)},0)}}function asyncForEach(e,t,n){function r(){var i=e.pop();t(i,function(t,i){e.length>0?r():n&&n(t,i)})}e=e.slice(0),e.length>0?r():n&&n()}function asyncParForEach(e,t,n){var r=0,i=e.length;i===0&&n();for(var s=0;s<i;s++)t(e[s],function(e,t){r++,r===i&&n&&n(e,t)})}var oop=require("ace/lib/oop"),Mirror=require("ace/worker/mirror").Mirror,tree=require("treehugger/tree"),EventEmitter=require("ace/lib/event_emitter").EventEmitter,linereport=require("ext/linereport/linereport_base"),SyntaxDetector=require("ext/language/syntax_detector"),completeUtil=require("ext/codecomplete/complete_util"),isInWebWorker=typeof window=="undefined"||!window.location||!window.document,WARNING_LEVELS={error:3,warning:2,info:1};disabledFeatures={},EventEmitter.once=function(e,t){var n=this,r=function(){t&&t.apply(null,arguments),n.removeEventListener(e,r)};this.addEventListener(e,r)};var ServerProxy=function(e){this.emitter=Object.create(EventEmitter),this.emitter.emit=this.emitter._dispatchEvent,this.send=function(t){e.emit("serverProxy",t)},this.once=function(e,t,n){var r=e;t&&(r+=":"+t),this.emitter.once(r,n)},this.subscribe=function(e,t,n){var r=e;t&&(r+=":"+t),this.emitter.addEventListener(r,n)},this.unsubscribe=function(e,t,n){var r=e;t&&(r+=":"+t),this.emitter.removeEventListener(r,n)},this.onMessage=function(e){var t=e.type;e.subtype&&(t+=":"+e.subtype),this.emitter.emit(t,e.body)}};exports.createUIWorkerClient=function(){var e=Object.create(require("ace/lib/event_emitter").EventEmitter),t=new LanguageWorker(e);return t.on=function(n,r){e.on.call(t,n,r)},t.once=function(n,r){e.once.call(t,n,r)},t.removeEventListener=function(n){e.removeEventListener.call(t,n)},t.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},t.send=function(e,n){setTimeout(function(){t[e].apply(t,n)},0)},t.emit=function(t,n){e._dispatchEvent.call(e,t,n)},e.emit=function(n,r){e._dispatchEvent.call(t,n,{data:r})},t.changeListener=function(e){this.emit("change",{data:[e.data]})},t};var LanguageWorker=exports.LanguageWorker=function(e){var t=this;this.handlers=[],this.currentMarkers=[],this.$lastAggregateActions={},this.$warningLevel="info",e.once=EventEmitter.once,this.serverProxy=new ServerProxy(e),Mirror.call(this,e),linereport.sender=e,this.setTimeout(500),e.on("hierarchy",function(e){t.hierarchy(e)}),e.on("code_format",function(e){t.codeFormat()}),e.on("outline",applyEventOnce(function(e){t.outline(e)})),e.on("complete",applyEventOnce(function(e){t.complete(e)})),e.on("documentClose",function(e){t.documentClose(e)}),e.on("analyze",applyEventOnce(function(e){t.analyze(function(){})})),e.on("cursormove",function(e){t.onCursorMove(e)}),e.on("inspect",applyEventOnce(function(e){t.inspect(e)})),e.on("change",applyEventOnce(function(){t.scheduledUpdate=!0})),e.on("jumpToDefinition",applyEventOnce(function(e){t.jumpToDefinition(e)})),e.on("isJumpToDefinitionAvailable",applyEventOnce(function(e){t.isJumpToDefinitionAvailable(e)})),e.on("fetchVariablePositions",function(e){t.sendVariablePositions(e)}),e.on("onRenameBegin",function(e){t.onRenameBegin(e)}),e.on("commitRename",function(e){t.commitRename(e)}),e.on("onRenameCancel",function(e){t.onRenameCancel(e)}),e.on("serverProxy",function(e){t.serverProxy.onMessage(e.data)})};oop.inherits(LanguageWorker,Mirror),function(){function filterMarkersAroundError(e,t){if(!e||!e.getAnnotation)return;var n=e.getAnnotation("error");if(!n)return;for(var r=0;r<t.length;r++){var i=t[r];i.type!=="error"&&i.pos.sl>=n.line&&i.pos.el<=n.line+2&&(t.splice(r,1),r--)}}function removeDuplicateMatches(e){e.sort(function(e,t){return e.name<t.name?1:e.name>t.name?-1:0});for(var t=0;t<e.length-1;t++){var n=e[t],r=e[t+1];n.name===r.name&&(n.priority<r.priority?e.splice(t,1):n.priority>r.priority?e.splice(t+1,1):n.score<r.score?e.splice(t,1):n.score>r.score?e.splice(t+1,1):e.splice(t,1),t--)}}this.getLastAggregateActions=function(){return this.$lastAggregateActions[this.$path]||(this.$lastAggregateActions[this.$path]={markers:[],hint:null}),this.$lastAggregateActions[this.$path]},this.setLastAggregateActions=function(e){this.$lastAggregateActions[this.$path]=e},this.enableFeature=function(e){disabledFeatures[e]=!1},this.disableFeature=function(e){disabledFeatures[e]=!0},this.setWarningLevel=function(e){this.$warningLevel=e},this.register=function(path,contents,callback){function onRegistered(e){e.$source=path,e.proxy=_self.serverProxy,e.sender=_self.sender,e.$isInited=!1,_self.handlers.push(e),_self.$initHandler(e,null,!0,function(){_self.sender.emit("registered",{path:path}),callback&&callback()})}var _self=this;if(contents)try{eval.call(null,contents)}catch(e){throw console.error("Could not load language handler "+path+": "+e),_self.sender.emit("registered",{path:path,err:e}),callback&&callback(e),e}var handler;try{handler=require(path)}catch(e){if(isInWebWorker)throw console.error("Could not load language handler "+path+": "+e),_self.sender.emit("registered",{path:path,err:e}),callback&&callback(e),e;require([path],function(e){if(!e)throw _self.sender.emit("registered",{path:path,err:"Could not load"}),callback&&callback("Could not load"),new Error("Could not load language handler "+path);onRegistered(e)});return}onRegistered(handler)},this.parse=function(e,t,n){var r=this;e=e||{language:r.$language,value:r.doc.getValue()};if(n&&this.cachedAsts){var i=this.cachedAsts[e.index];if(i&&i.ast&&i.part.language===e.language)return t(i.ast)}var s=null;asyncForEach(this.handlers,function(t,n){t.handlesLanguage(e.language)&&e.value.length<t.getMaxFileSizeSupported()?t.parse(e.value,function(t){t&&(s=t),n()}):n()},function(){t(s)})},this.findNode=function(e,t,n){if(!e)return n();var r=this,i={row:t.line,column:t.col},s=SyntaxDetector.getContextSyntaxPart(r.doc,i,r.$language),o=s.language,u=SyntaxDetector.posToRegion(s.region,i);u={line:u.row,col:u.column};var a;asyncForEach(r.handlers,function(t,n){t.handlesLanguage(o)&&s.value.length<t.getMaxFileSizeSupported()?t.findNode(e,u,function(e){e&&(a=e),n()}):n()},function(){n(a)})},this.outline=function(e){var t=this,n=!1,r=this.doc.$lines.reduce(function(e,t){return e+t.length},0);this.parse(null,function(i){asyncForEach(t.handlers,function(s,o){s.handlesLanguage(t.$language)&&r<s.getMaxFileSizeSupported()?s.outline(t.doc,i,function(r){if(r)return n=!0,r.ignoreFilter=e.data.ignoreFilter,t.sender.emit("outline",r);o()}):o()},function(){n||t.sender.emit("outline",{body:[]})})})},this.hierarchy=function(e){var t=e.data,n=this,r=this.doc.$lines.reduce(function(e,t){return e+t.length},0);asyncForEach(this.handlers,function(e,i){e.handlesLanguage(n.$language)&&r<e.getMaxFileSizeSupported()?e.hierarchy(n.doc,t.pos,function(e){if(e)return n.sender.emit("hierarchy",e);i()}):i()})},this.codeFormat=function(){var e=this,t=this.doc.$lines.reduce(function(e,t){return e+t.length},0);asyncForEach(e.handlers,function(n,r){n.handlesLanguage(e.$language)&&t<n.getMaxFileSizeSupported()?n.codeFormat(e.doc,function(t){if(t)return e.sender.emit("code_format",t)}):r()})},this.scheduleEmit=function(e,t){this.sender.emit(e,t)},this.analyze=function(e){var t=this,n=SyntaxDetector.getCodeParts(this.doc,this.$language),r=[],i={};asyncForEach(n,function(e,n){var s=[];t.parse(e,function(o){i[e.index]={part:e,ast:o},asyncForEach(t.handlers,function(t,n){t.handlesLanguage(e.language)&&e.value.length<t.getMaxFileSizeSupported()?t.analyze(e.value,o,function(r){r?t.getResolutions(e.value,o,r,function(e){e?s=s.concat(e):s=s.concat(r),n()}):n()}):n()},function(){filterMarkersAroundError(o,s);var t=e.region;s.forEach(function(e){if(e.skipMixed)return;var n=e.pos;n.sl=n.el=n.sl+t.sl,n.sl===t.sl&&(n.sc+=t.sc,n.ec+=t.sc)}),r=r.concat(s),n()})})},function(){var n=r;t.getLastAggregateActions().markers.length>0&&(n=r.concat(t.getLastAggregateActions().markers)),t.cachedAsts=i,t.scheduleEmit("markers",t.filterMarkersBasedOnLevel(n)),t.currentMarkers=r,t.postponedCursorMove&&(t.onCursorMove(t.postponedCursorMove),t.postponedCursorMove=null),e()})},this.checkForMarker=function(e){var t={line:e.row,col:e.column};for(var n=0;n<this.currentMarkers.length;n++){var r=this.currentMarkers[n];if(r.message&&tree.inRange(r.pos,t))return r.message}},this.filterMarkersBasedOnLevel=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.level&&WARNING_LEVELS[n.level]<WARNING_LEVELS[this.$warningLevel]&&(e.splice(t,1),t--)}return e},this.getPart=function(e){return SyntaxDetector.getContextSyntaxPart(this.doc,e,this.$language)},this.inspect=function(e){var t=this,n=this.getPart({row:e.data.row,column:e.data.col});this.parse(n,function(r){t.findNode(r,{line:e.data.row,col:e.data.col},function(e){var r=t.handlers.filter(function(e){return e.handlesLanguage(n.language)&&n.value.length<e.getMaxFileSizeSupported()&&e.buildExpression});if(e&&r&&r.length){var i={pos:e.getPos(),value:r[0].buildExpression(e)};t.scheduleEmit("inspect",i)}})},!0)},this.getIdentifierRegex=function(e){var t=this.getPart(e||{row:0,column:0}),n;return this.handlers.forEach(function(e){e.handlesLanguage(t.language)&&(n=e.getIdentifierRegex()||n)}),n||completeUtil.DEFAULT_ID_REGEX},this.onCursorMove=function(e){function o(e,o,u){asyncForEach(r.handlers,function(t,i){t.handlesLanguage(n.language)&&n.value.length<t.getMaxFileSizeSupported()?t.onCursorMovedNode(r.doc,e,u,o,function(e){if(!e)return i();e.markers&&e.markers.length>0&&(s.markers=s.markers.concat(e.markers.map(function(e){var t=SyntaxDetector.regionToPos(n.region,{row:e.pos.sl,column:e.pos.sc}),r=SyntaxDetector.regionToPos(n.region,{row:e.pos.el,column:e.pos.ec});return e.pos={sl:t.row,sc:t.column,el:r.row,ec:r.column},e}))),e.enableRefactorings&&e.enableRefactorings.length>0&&(s.enableRefactorings=s.enableRefactorings.concat(e.enableRefactorings)),e.hint&&(s.hint?s.hint+="\n"+e.hint:s.hint=e.hint),e.displayPos&&(s.displayPos=e.displayPos),i()}):i()},function(){s.hint&&!i&&(i=s.hint),r.scheduleEmit("markers",r.filterMarkersBasedOnLevel(r.currentMarkers.concat(s.markers))),r.scheduleEmit("enableRefactorings",s.enableRefactorings),r.lastCurrentNode=o,r.lastCurrentPos=u,r.setLastAggregateActions(s),r.scheduleEmit("hint",{pos:t,displayPos:s.displayPos,message:i})})}if(this.scheduledUpdate){this.postponedCursorMove=e;return}var t=e.data,n=this.getPart(t),r=this,i="",s={markers:[],hint:null,displayPos:null,enableRefactorings:[]},u={line:t.row,col:t.column},a=SyntaxDetector.posToRegion(n.region,t);this.parse(n,function(e){r.findNode(e,u,function(n){(u!=r.lastCurrentPos||n!==r.lastCurrentNode||t.force)&&o(e,n,a)})},!0)},this.$getDefinitionDeclarations=function(e,t,n){var r={row:e,column:t},i=[],s=this,o=this.getPart(r);this.parse(o,function(e){s.findNode(e,{line:r.row,col:r.column},function(t){if(!t)return n();asyncForEach(s.handlers,function(n,u){n.handlesLanguage(o.language)&&o.value.length<n.getMaxFileSizeSupported()?n.jumpToDefinition(s.doc,e,r,t,function(e){n.path=s.$path,e&&(i=i.concat(e)),u()}):u()},function(){n(i.map(function(e){return SyntaxDetector.regionToPos(o.region,e)}))})})},!0)},this.jumpToDefinition=function(e){var t=this,n=e.data;t.$getDefinitionDeclarations(n.row,n.column,function(e){t.sender.emit("definition",{pos:n,results:e||[]})})},this.isJumpToDefinitionAvailable=function(e){var t=this,n=e.data;t.$getDefinitionDeclarations(n.row,n.column,function(e){t.sender.emit("isJumpToDefinitionAvailableResult",{value:!!e&&!!e.length})})},this.sendVariablePositions=function(e){function i(e){return SyntaxDetector.regionToPos(r.region,e)}var t=e.data,n=this,r=this.getPart(t),s=SyntaxDetector.posToRegion(r.region,t);this.parse(r,function(e){n.findNode(e,{line:t.row,col:t.column},function(t){asyncForEach(n.handlers,function(o,u){o.handlesLanguage(r.language)&&r.value.length<o.getMaxFileSizeSupported()?o.getVariablePositions(n.doc,e,s,t,function(e){e&&(e.uses=e.uses.map(i),e.declarations=e.declarations.map(i),e.others=e.others.map(i),e.pos=i(e.pos),n.sender.emit("variableLocations",e)),u()}):u()})})},!0)},this.onRenameBegin=function(e){var t=this;this.handlers.forEach(function(e){e.handlesLanguage(t.$language)&&t.doc.length<e.getMaxFileSizeSupported()&&e.onRenameBegin(t.doc,function(){})})},this.commitRename=function(e){var t=this,n=e.data,r=n.oldId,i=n.newName,s=!1;asyncForEach(this.handlers,function(e,n){e.handlesLanguage(t.$language)?e.commitRename(t.doc,r,i,function(e){e?(s=!0,t.sender.emit("refactorResult",e)):n()}):n()},function(){s||t.sender.emit("refactorResult",{success:!0})})},this.onRenameCancel=function(e){var t=this;asyncForEach(this.handlers,function(e,n){e.handlesLanguage(t.$language)?e.onRenameCancel(function(){n()}):n()})},this.onUpdate=function(){this.scheduledUpdate=!1;var e=this;asyncForEach(this.handlers,function(t,n){t.handlesLanguage(e.$language)&&e.doc.length<t.getMaxFileSizeSupported()?t.onUpdate(e.doc,n):n()},function(){e.analyze(function(){})})},this.switchFile=function(e,t,n,r,i){var s=this,o=this.$path;n=n||"",linereport.workspaceDir=this.$workspaceDir=i===""?"/":i,linereport.path=this.$path=e,this.$language=t,this.lastCurrentNode=null,this.lastCurrentPos=null,this.cachedAsts=null,this.setValue(n),asyncForEach(this.handlers,function(e,t){s.$initHandler(e,o,!1,t)})},this.$initHandler=function(e,t,n,r){function i(){if(s.$path||!e.$isInitCompleted)return r();setTimeout(i,500)}var s=this;if(!this.$path)return i();e.path=this.$path,e.language=this.$language,e.workspaceDir=this.$workspaceDir,e.doc=this.doc,e.sender=this.sender,e.$completeUpdate=this.completeUpdate.bind(this),e.$getIdentifierRegex=this.getIdentifierRegex.bind(this),e.$isInited?n&&e.onDocumentOpen(s.$path,s.doc,t,r):(e.$isInited=!0,e.init(function(){e.onDocumentOpen(s.$path,s.doc,t,function(){}),e.handlesLanguage(s.$language)&&e.getIdentifierRegex()&&s.sender.emit("setIdentifierRegex",{language:s.$language,identifierRegex:e.getIdentifierRegex()}),e.handlesLanguage(s.$language)&&e.getCompletionRegex()&&s.sender.emit("setCompletionRegex",{language:s.$language,completionRegex:e.getCompletionRegex()}),e.$isInitCompleted=!0,r()}))},this.documentOpen=function(e,t,n){var r=this,i={getValue:function(){return n}};asyncForEach(this.handlers,function(t,n){t.onDocumentOpen(e,i,r.path,n)})},this.documentClose=function(e){var t=e.data;asyncForEach(this.handlers,function(e,n){e.onDocumentClose(t,n)})},this.complete=function(e){var t=this,n=e.data,r=t.doc.getLine(n.pos.row);if(!completeUtil.canCompleteForChangedLine(n.line,r,n.pos,n.pos,this.getIdentifierRegex()))return;var i=n.pos,s=SyntaxDetector.getContextSyntaxPart(t.doc,n.pos,t.$language),o=s.language;this.parse(s,function(u){var a={line:i.row,col:i.column};t.findNode(u,a,function(a){var f=a,l=[];asyncForEach(t.handlers,function(e,r){e.handlesLanguage(o)&&s.value.length<e.getMaxFileSizeSupported()?(e.staticPrefix=n.staticPrefix,e.language=o,e.workspaceDir=t.$workspaceDir,e.path=t.$path,e.complete(t.doc,u,n.pos,f,function(e){e&&(l=l.concat(e)),r()})):r()},function(){removeDuplicateMatches(l),l.sort(function(e,t){if(e.priority<t.priority)return 1;if(e.priority>t.priority)return-1;if(e.score<t.score)return 1;if(e.score>t.score)return-1;if(e.id&&e.id===t.id){if(e.isFunction)return-1;if(t.isFunction)return 1}return e.name<t.name?-1:e.name>t.name?1:0}),t.sender.emit("complete",{pos:i,matches:l,isUpdate:e.data.isUpdate,line:r})})})})},this.completeUpdate=function(e,t){if(!isInWebWorker){var n=this;setTimeout(function(){n.complete({data:{pos:e,line:t,staticPrefix:n.staticPrefix,isUpdate:!0}})},0)}else this.complete({data:{pos:e,line:t,staticPrefix:this.staticPrefix,isUpdate:!0}})}}.call(LanguageWorker.prototype)}),define("ext/language/tooltip",["require","exports","module","ace/lib/dom","ext/code/code"],function(e,t,n){var r=e("ace/lib/dom"),i=e("ext/code/code"),s=r.createElement("div");s.className="language_tooltip",n.exports={show:function(e,t,n){var o=i.amlEditor.$editor;this.isVisible||(this.isVisible=!0,o.renderer.scroller.appendChild(s),o.session.on("changeScrollTop",this.hide),o.session.on("changeScrollLeft",this.hide)),s.innerHTML=n,setTimeout(function(){var n=o.renderer.scroller.getBoundingClientRect(),i=o.renderer.textToScreenCoordinates(e,t),u=o.renderer.$cursorLayer.config,a=r.getInnerWidth(s),f=r.getInnerHeight(s);i.pageX-=n.left,i.pageY-=n.top;var l=!0;l&&i.pageY<f?l=!1:!l&&i.pageY>f-u.lineHeight-20&&(l=!0);var c=Math.round(a/2)-3;s.style.left=Math.max(i.pageX-c,0)+"px",l?s.style.top=i.pageY-f+3+"px":s.style.top=i.pageY+u.lineHeight+2+"px"})},hide:function(){var e=n.exports;if(e.isVisible){var t=i.amlEditor.$editor;t.renderer.scroller.removeChild(s),t.session.removeListener("changeScrollTop",this.hide),t.session.removeListener("changeScrollLeft",this.hide),e.isVisible=!1}}}}),define("ext/language/marker",["require","exports","module","ace/range","ace/anchor","ext/language/tooltip","ext/editors/editors","ext/code/code"],function(e,t,n){function a(e,t){this.row=e,this.column=t||0}var r=e("ace/range").Range,i=e("ace/anchor").Anchor,s=e("ext/language/tooltip"),o=e("ext/editors/editors"),u=e("ext/code/code");a.prototype.onChange=i.prototype.onChange,a.prototype.setPosition=function(e,t){this.row=e,this.column=t},n.exports={disabledMarkerTypes:{},hook:function(e,t){var n=this;this.ext=e,t.on("markers",function(t){if(e.disabled)return;n.addMarkers(t,e.editor)}),t.on("hint",function(e){n.onHint(e)})},onHint:function(e){var t=e.data.message,n=e.data.pos,r=u.amlEditor.$editor.getCursorPosition(),i=e.data.displayPos||r;r.column===n.column&&r.row===n.row&&t?s.show(i.row,i.column,t):s.hide()},hideToolTip:function(){s.hide()},removeMarkers:function(e){var t=e.markerAnchors;for(var n=0;n<t.length;n++)e.removeMarker(t[n].id);e.markerAnchors=[],e.setAnnotations([])},addMarkers:function(e,t){var n=this,i=e.data;if(!t)return;var s=t.session;s.markerAnchors||(s.markerAnchors=[]),this.removeMarkers(s),s.languageAnnos=[],i.forEach(function(e){if(n.disabledMarkerTypes[e.type])return;if(e.pos.el&&e.pos.sl!==e.pos.el)return;s.markerAnchors.push(e);var t=e.pos||{};e.start=new a(t.sl,t.sc),t.sc!==undefined&&t.ec!==undefined&&(e.range=new r(t.sl,t.sc||0,t.el,t.ec||0),e.id=s.addMarker(e.range,"language_highlight_"+(e.type?e.type:"default")),e.range.start=e.start,e.colDiff=t.ec-t.sc,e.rowDiff=t.el-t.sl);if(!e.message)return;var i={guttertext:e.message,type:e.level||"warning",text:e.message,pos:e.pos,resolutions:e.resolutions,row:t.sl};e.gutterAnno=i,s.languageAnnos.push(i)}),s.setAnnotations(s.languageAnnos)},disableMarkerType:function(e){this.disabledMarkerTypes[e]=!0;var t=o.currentEditor.amlEditor.$editor.session,n=t.getMarkers(!1);for(var r in n)n[r].clazz==="language_highlight_"+e&&t.removeMarker(r)},enableMarkerType:function(e){this.disabledMarkerTypes[e]=!1},onChange:function(e,t){if(this.ext.disabled)return;var n=t.data.range,r=t.data.action[0]!=="r",i=t.data.text,s=i&&i.search(/[^a-zA-Z0-9\$_]/)===-1,o=[],u=e.markerAnchors||[];if(!r){var a=!1;for(var f=0;f<u.length;f++){var l=u[f];if(!n.compareInside(l.start.row,l.start.column)){e.removeMarker(l.id),a=!0;continue}s&&l.range&&l.range.contains(n.start.row,n.start.column)&&(a=!0,l.colDiff-=i.length);var c=l.start;c.onChange(t),l.range&&(l.range.end.row=c.row+l.rowDiff,l.range.end.column=c.column+l.colDiff),l.gutterAnno&&(o.push(l.gutterAnno),l.gutterAnno.row=l.start.row)}if(!a)return}else{var a=!1;for(var f=0;f<u.length;f++){var l=u[f];s&&l.range&&l.range.contains(n.start.row,n.start.column)&&(a=!0,l.colDiff+=i.length);var c=l.start;c.onChange(t),l.range&&(l.range.end.row=c.row+l.rowDiff,l.range.end.column=c.column+l.colDiff),l.gutterAnno&&(o.push(l.gutterAnno),l.gutterAnno.row=l.start.row)}}e._dispatchEvent("changeBackMarker"),e.setAnnotations(o)},destroy:function(){}}}),define("ext/language/keyhandler",["require","exports","module","ext/editors/editors","ext/codecomplete/complete_util","ext/editors/editors","ace/token_iterator","ext/language/marker","ext/language/complete","ext/language/complete","ext/language/complete","ext/language/complete"],function(e,t,n){function a(e){u=e}function f(e,t){return function(){var r=e.apply(null,arguments);r||t.apply(null,arguments)}}function l(e,t){return u.disabled?!1:(u.isContinuousCompletionEnabled()?d(e,t):p(e,t),!1)}function c(t){return u.disabled?!1:(u.isContinuousCompletionEnabled()&&h(t),t.keyCode==27&&e("ext/language/marker").hideToolTip(),!1)}function h(t){if(t.metaKey||t.altKey||t.ctrlKey)return!1;if(!v())return!1;if(t.keyCode===8){var n=e("ext/language/complete"),i=r.currentEditor.amlEditor.$editor,s=i.getCursorPosition(),o=i.session.getDocument().getLine(s.row);if(!w(o,s.column))return!1;n.deferredInvoke()}}function p(t,n){var r=e("ext/language/complete"),i=r.getContinousCompletionRegex(),s=r.getIdentifierRegex();!n&&i&&t.match(i)&&u.isInferAvailable()&&y(t,s,i)}function d(t,n){var r=e("ext/language/complete"),i=r.getContinousCompletionRegex(),s=r.getIdentifierRegex();if(n||!i)return!1;y(t,s,i)}function v(){return r.currentEditor.amlEditor.syntax==="javascript"}function m(e,t){var n=(new s(e.getSession(),t.row,t.column)).getCurrentToken();return n&&n.type&&n.type==="text"}function g(e,t){var n=(new s(e.getSession(),t.row,t.column)).getCurrentToken();return n&&n.type&&n.type.match(/^comment/)}function y(t,n,i){if(t.match(n||/[A-Za-z0-9_\$\.\"\'\/]/)||i&&t.match(i)){var s=e("ext/language/complete"),o=r.currentEditor.amlEditor.$editor,u=o.getCursorPosition(),a=o.session.getDocument().getLine(u.row);if(!w(a,u.column,t)&&!m(o,u))return!1;s.deferredInvoke(t===".")}}function b(e,t,n){var r=null;if(e.match(/^\s*\*.+/))return!1;for(var i=0;i<t;i++)if(e[i]==='"'&&!r)r='"';else if(e[i]==='"'&&r==='"'&&e[i-1]!=="\\")r=null;else if(e[i]==="'"&&!r)r="'";else if(e[i]==="'"&&r==="'"&&e[i-1]!=="\\")r=null;else if(e[i]==="/"&&e[i+1]==="/")r="//",i++;else if(e[i]==="/"&&e[i+1]==="*"&&!r){if(e.substr(i+2,6)==="global")continue;r="/*",i++}else e[i]==="*"&&e[i+1]==="/"&&r==="/*"?(r=null,i++):e[i]==="/"&&!r?r="/":e[i]==="/"&&r==="/"&&e[i-1]!=="\\"&&(r=null);return!r}function w(e,t,n){var r=i.retrievePrecedingIdentifier(e,t);return n&&(r+=n),r!==""&&!(r[0]>="0"&&r[0]<="9")&&(b(e,t,r)||E(e,t,r))}function E(e,t,n){if(r.currentEditor.amlEditor.syntax!=="javascript"||!u.isInferAvailable())return!1;var s=n||i.retrievePrecedingIdentifier(e,t,o),a='require("'.length,f=t-s.length-a;return f>=0&&e.substr(f,a).match(/require\(["']/)||e.substr(f+1,a).match(/require\(["']/)}var r=e("ext/editors/editors"),i=e("ext/codecomplete/complete_util"),r=e("ext/editors/editors"),s=e("ace/token_iterator").TokenIterator,o=/(?!["'])./,u;t.hook=a,t.onTextInput=l,t.onCommandKey=c,t.inputTriggerComplete=p,t.typeAlongCompleteTextInput=d,t.typeAlongComplete=h,t.composeHandlers=f,t.inCompletableCodeContext=b,t.preceededByIdentifier=w,t.isRequireJSCall=E}),define("ext/language/complete",["require","exports","module","core/ide","ext/editors/editors","ext/code/code","ace/lib/dom","ext/language/keyhandler","ext/language/syntax_detector","ext/codecomplete/complete_util","ace/lib/lang","ext/menus/menus","ext/commands/commands"],function(e,t,n){function B(){return barCompleterCont.$ext.style.display!=="none"}function j(){var e=i.currentEditor.amlEditor.$editor;return a.getContextSyntax(e.getSession().getDocument(),e.getCursorPosition(),i.currentEditor.amlEditor.syntax)}function F(){return m[j()]||y}function I(){return j()==="javascript"}function q(){return j()==="html"}function R(e,t){var n=t.replaceText,r=e.getCursorPosition(),i=e.getSession(),s=i.getLine(r.row),o=i.getDocument(),u=f.retrievePrecedingIdentifier(s,r.column,t.identifierRegex||F());t.replaceText==="require(^^)"&&I()&&(n='require("^^")',O||setTimeout(A,0)),n=n.replace(/\t/g,i.getTabString()),n.indexOf("^^")===-1&&(n+="^^");for(var a=0;a<s.length&&(s[a]===" "||s[a]==="	");)a++;var l=s.substring(0,a),c=f.retrievePrecedingIdentifier(s,r.column,t.identifierRegex||F());q()&&s[r.column-c.length-1]==="<"&&n[0]==="<"&&(n=n.substring(1));var h=f.retrieveFollowingIdentifier(s,r.column,t.identifierRegex||F())||"",p=n.split("\n").join("\n"+l),d=p.split("\n"),v;for(var m=0;m<d.length;m++){v=d[m].indexOf("^^");if(v!==-1)break}p=p.replace("^^",""),o.removeInLine(r.row,r.column-u.length,r.column+h.length),o.insert({row:r.row,column:r.column-u.length},p);var g=m?v:r.column+v-u.length;s.substring(0,r.column).match(/require\("[^\"]+$/)&&I()&&((s.substr(r.column+h.length,1).match(/['"]/)||p.substr(0,1)==='"')&&g++,s.substr(r.column+h.length+1,1)===")"&&g++);var y={row:r.row+m,column:g};e.selection.setSelectionRange({start:y,end:y})}var r=e("core/ide"),i=e("ext/editors/editors"),s=e("ext/code/code"),o=e("ace/lib/dom"),u=e("ext/language/keyhandler"),a=e("ext/language/syntax_detector"),f=e("ext/codecomplete/complete_util"),l=e("ace/lib/lang"),c,h,p,d,v,m={},g={},y=/[a-zA-Z_0-9\$\/]/,b="cc_complete_option selected",w="cc_complete_option",E=1500,S=100,x=1e3,T=200,N=6e3,C=330,k=9,L=3,A=l.deferredCall(function(){var e=n.exports,t=i.currentEditor.amlEditor.$editor,r=t.getCursorPosition(),s=t.getSession().getDocument().getLine(r.row),o=F();u.preceededByIdentifier(s,r.column)||s[r.column-1]==="."&&(!s[r.column]||!s[r.column].match(o))||s[r.column-1]&&s[r.column-1].match(o)&&u.inCompletableCodeContext(s,r.column)||u.isRequireJSCall(s,r.column)?e.invoke(!0):e.closeCompletionBox(),O=!1}),O=!1,M=!1,_=l.deferredCall(function(){B()&&h.matches[h.selectedIdx].doc&&(v=!0,txtCompleterDoc.parentNode.show()),D=!1}),D=!1,P=l.deferredCall(function(){B()||(v=!1,txtCompleterDoc.parentNode.hide())}),H=l.deferredCall(function(){h.closeCompletionBox()}),U=e("ext/menus/menus"),z=e("ext/commands/commands");n.exports={hook:function(e,t){var n=h=this;c=e,t.on("complete",function(t){if(e.disabled)return;n.onComplete(t)}),t.on("setIdentifierRegex",function(e){m[e.data.language]=e.data.identifierRegex}),t.on("setCompletionRegex",function(e){g[e.data.language]=e.data.completionRegex}),this.$onChange=this.onChange.bind(this),e.nodes.push(U.addItemByPath("Edit/~",new apf.divider,2e3),U.addItemByPath("Edit/Show Autocomplete",new apf.item({command:"complete"}),2100)),z.addCommand({name:"complete",hint:"code complete",bindKey:{mac:"Ctrl-Space|Alt-Space",win:"Ctrl-Space|Alt-Space"},isAvailable:function(e){return apf.activeElement.localName=="codeeditor"},exec:function(e){n.invoke()}}),this.ext=e},showCompletionBox:function(e,t,n,r){var s=this;this.editor=i.currentEditor;var u=this.editor.amlEditor.$editor;this.selectedIdx=0,this.scrollIdx=0,this.matchEls=[],this.matches=e,this.completionElement=txtCompleter.$ext,this.docElement=txtCompleterDoc.$ext,this.cursorConfig=u.renderer.$cursorLayer.config,this.lineHeight=this.cursorConfig.lineHeight+L;var a=o.computedStyle(this.editor.amlEditor.$ext);this.completionElement.style.fontSize=a.fontSize,barCompleterCont.setAttribute("visible",!0),p||(p=u.keyBinding.onCommandKey,u.keyBinding.onCommandKey=this.onKeyPress.bind(this),d=u.keyBinding.onTextInput,u.keyBinding.onTextInput=this.onTextInput.bind(this)),this.populateCompletionBox(e),document.addEventListener("click",this.closeCompletionBox),u.container.addEventListener("DOMMouseScroll",this.closeCompletionBox),u.container.addEventListener("mousewheel",this.closeCompletionBox),apf.popup.setContent("completionBox",barCompleterCont.$ext);var f=this.matches.length||1,l=11+Math.min(10*this.lineHeight,f*this.lineHeight),c=u.renderer.$cursorLayer,h=this.matches.length||1,v=Math.min(10*this.lineHeight,h*this.lineHeight);txtCompleterHolder.$ext.style.height=v+"px",M=!B(),apf.popup.show("completionBox",{x:t.length*-s.cursorConfig.characterWidth-11,y:s.cursorConfig.lineHeight,height:l,width:C,animate:!1,ref:c.cursor,callback:function(){barCompleterCont.setHeight(l),barCompleterCont.$ext.style.height=l+"px",sbCompleter.$resize(),s.completionElement.scrollTop=1,s.completionElement.scrollTop=0}})},closeCompletionBox:function W(e){barCompleterCont.$ext.style.display="none";if(!i.currentEditor.amlEditor)return;var t=i.currentEditor.amlEditor.$editor;document.removeEventListener("click",W),t.container.removeEventListener("DOMMouseScroll",W),t.container.removeEventListener("mousewheel",W),p&&(t.keyBinding.onCommandKey=p,t.keyBinding.onTextInput=d),p=d=null,P.schedule(x)},isPopupVisible:B,populateCompletionBox:function(e){var t=this;t.completionElement.innerHTML="";var n=s.amlEditor.$editor.renderer.$cursorLayer.config,u=!1;e.forEach(function(e){e.icon&&(u=!0)});var a=i.currentEditor.amlEditor.$editor,l=a.getCursorPosition(),h=a.getSession().getLine(l.row),p=c.isInferAvailable();e.forEach(function(e,s){var a=o.createElement("div");a.className=s===t.selectedIdx?b:w;var c="";e.icon&&(c="<img src='"+r.staticPrefix+"/ext/language/img/"+e.icon+".png'/>");var d;if(e.type){var v=t.$guidToShortString(e.type);v&&(e.meta=v,d=e.name+" : "+t.$guidToLongString(e.type)+"</div>")}var m=f.retrievePrecedingIdentifier(h,l.column,e.identifierRegex||F()),g=e.meta?" maintrim":"";!p||e.icon?c+='<span class="main'+g+'"><u>'+m+"</u>"+e.name.substring(m.length)+"</span>":u?c+='<span class="main'+g+'"><span class="deferred">'+e.name+"</span></span>":c+='<span class="main'+g+'"><span class="deferred"><u>'+m+"</u>"+e.name.substring(m.length)+"</span></span>",e.meta&&(c+='<span class="meta">'+e.meta+"</span>"),e.doc&&(e.$doc="<p>"+e.doc+"</p>");if(e.icon||e.type)e.$doc='<div class="code_complete_doc_head">'+(d||e.name)+"</div>"+(e.$doc||"");a.innerHTML=c,a.addEventListener("mouseover",function(){if(M){M=!1;return}t.matchEls[t.selectedIdx].className=w,t.selectedIdx=s,t.matchEls[t.selectedIdx].className=b,t.updateDoc(),D||_.schedule(S)}),a.addEventListener("click",function(){var t=i.currentEditor.amlEditor;R(t.$editor,e),t.focus()}),a.style.height=n.lineHeight+L+"px",a.style.width=C-10+"px",t.completionElement.appendChild(a),t.matchEls.push(a)}),t.updateDoc(!0)},$guidToShortString:function(e){var t=e&&e.replace(/^[^:]+:(([^\/]+)\/)*?([^\/]*?)(\[\d+[^\]]*\])?(\/prototype)?$|.*/,"$3");return t&&t!=="Object"?t:""},$guidToLongString:function(e,t){if(e.substr(0,6)==="local:")return this.$guidToShortString(e);var n=e&&e.replace(/^[^:]+:(([^\/]+\/)*)*?([^\/]*?)$|.*/,"$1$3");return!n||n==="Object"?"":(n=n.replace(/\//g,".").replace(/\[\d+[^\]]*\]/g,""),t!=="prototype"&&(n=n.replace(/\.prototype$/,"")),n)},updateDoc:function(e){this.docElement.innerHTML='<span class="code_complete_doc_body">';var t=this.matches[this.selectedIdx];t&&t.$doc?(v?txtCompleterDoc.parentNode.show():(txtCompleterDoc.parentNode.hide(),(!D||e)&&_.schedule(E)),this.docElement.innerHTML+=t.$doc+"</span>"):txtCompleterDoc.parentNode.hide(),t&&t.docUrl&&(this.docElement.innerHTML+="<p><a onclick=\"require('ext/preview/preview').preview('"+t.docUrl+"'); return false;\""+' href="'+t.docUrl+'" target="c9doc">(more)</a></p>'),this.docElement.innerHTML+="</span>"},onTextInput:function(e,t){var n=s.amlEditor.$editor.keyBinding;d.apply(n,arguments);if(!t){var r=!1,i=this.matches;for(var o=0;o<i.length&&!r;o++)r=(i[o].identifierRegex||F()).test(e);r?this.deferredInvoke():this.closeCompletionBox()}},onKeyPress:function(e,t,n){var r=this;if(e.metaKey||e.ctrlKey||e.altKey){this.closeCompletionBox();return}var s=i.currentEditor.amlEditor.$editor.keyBinding;switch(n){case 0:break;case 32:this.closeCompletionBox();break;case 27:this.closeCompletionBox(),e.preventDefault();break;case 8:p.apply(s,arguments),A(),e.preventDefault();break;case 37:case 39:p.apply(s,arguments),this.closeCompletionBox(),e.preventDefault();break;case 13:case 9:var o=i.currentEditor.amlEditor.$editor;R(o,this.matches[this.selectedIdx]),this.closeCompletionBox(),e.preventDefault(),e.stopImmediatePropagation();break;case 40:if(this.matchEls.length===1){this.closeCompletionBox();break}e.stopPropagation(),e.preventDefault(),this.matchEls[this.selectedIdx].className=w,this.selectedIdx<this.matches.length-1&&this.selectedIdx++,this.matchEls[this.selectedIdx].className=b,this.selectedIdx-this.scrollIdx>k&&(this.scrollIdx++,this.matchEls[this.scrollIdx].scrollIntoView(!0)),this.updateDoc();break;case 38:if(this.matchEls.length===1){this.closeCompletionBox();break}e.stopPropagation(),e.preventDefault();if(this.selectedIdx<=0)return;this.matchEls[this.selectedIdx].className=w,this.selectedIdx--,this.matchEls[this.selectedIdx].className=b,this.selectedIdx<this.scrollIdx&&(this.scrollIdx--,this.matchEls[this.scrollIdx].scrollIntoView(!0)),this.updateDoc()}},setWorker:function(e){this.worker=e},deferredInvoke:function(e){if(O)return;O=!0,e=e||!B();var t=e?0:T;A.schedule(t),e||setTimeout(this.onCompleteUpdate.bind(this),0)},onChange:function(){this.deferredInvoke()},invoke:function(e){var t=i.currentEditor.amlEditor.$editor;if(t.inMultiSelectMode){s.closeCompletionBox();return}this.forceBox=e,t.addEventListener("change",this.$onChange);var n=this.worker;setTimeout(function(){var e=t.getCursorPosition(),i=t.getSession().getLine(e.row);n.emit("complete",{data:{pos:e,staticPrefix:r.staticPrefix,line:i}})});var s=this;e&&H(N)},onComplete:function(e){var t=i.currentEditor.amlEditor.$editor,n=t.getCursorPosition(),r=t.getSession().getLine(n.row);t.removeEventListener("change",this.$onChange),H.cancel();if(!f.canCompleteForChangedLine(e.data.line,r,e.data.pos,n,F()))return;if(e.data.isUpdate&&!B())return;var s=this.eventMatches=e.data.matches;e.data.line!==r&&(s=this.filterMatches(s,r,n));if(s.length===1&&!this.forceBox)R(t,s[0]);else if(s.length>0){var o=f.retrievePrecedingIdentifier(r,n.column,s[0].identifierRegex||F());s.length===1&&o===s[0].replaceText?this.closeCompletionBox():this.showCompletionBox(s,o)}else typeof barCompleterCont!="undefined"&&this.closeCompletionBox()},onCompleteUpdate:function(){if(!B())return;var e=i.currentEditor.amlEditor.$editor,t=e.getCursorPosition(),n=e.getSession().getLine(t.row),r=f.retrievePrecedingIdentifier(n,t.column,F()),s=this.filterMatches(this.eventMatches,n,t);s.length&&this.showCompletionBox(s,r)},filterMatches:function(e,t,n){return e.filter(function(e){var r=f.retrievePrecedingIdentifier(t,n.column,e.identifierRegex||F());return e.name.indexOf(r)===0})},getContinousCompletionRegex:function(e){return g[e||j()]},getIdentifierRegex:function(e){return m[e||j()]},destroy:function(){z.removeCommandByName("complete")}}}),define("ext/language/quickfix",["require","exports","module","core/ide","ace/lib/dom","ext/code/code","ext/editors/editors","ace/lib/lang","ext/menus/menus","ext/commands/commands"],function(e,t,n){function C(){return barQuickfixCont.$ext.style.display!=="none"}var r=e("core/ide"),i=e("ace/lib/dom"),s=e("ext/code/code"),o=e("ext/editors/editors"),u=e("ace/lib/lang"),a=e("ext/menus/menus"),f,l,c,h="cc_complete_option selected",p="cc_complete_option",d=1500,v=100,m=1e3,g=400,y=9,b=3,w=500,E=!1,S,x=!1,T=u.deferredCall(function(){C()&&f.quickFixes[f.selectedIdx].preview&&(S=!0,txtQuickfixDoc.parentNode.show()),x=!1}),N=u.deferredCall(function(){C()||(S=!1,txtQuickfixDoc.parentNode.hide())}),k=e("ext/commands/commands");n.exports={hook:function(e){var t=this;f=this,r.addEventListener("tab.afterswitch",function(e){var n=e.nextPage;if(!n||!n.$editor||n.$editor.path!="ext/code/code")return;var r=n.$editor.amlEditor.$editor;r.$markerListener||t.initEditor(r)}),k.addCommand({name:"quickfix",hint:"quickfix",bindKey:{mac:"Ctrl-Shift-Q|Ctrl-Alt-Q",win:"Ctrl-Shift-Q|Alt-Shift-Q"},isAvailable:function(e){return apf.activeElement.localName=="codeeditor"},exec:function(e){t.invoke()}}),r.addEventListener("init.ext/code/code",function(){e.nodes.push(a.addItemByPath("Tools/Quickfix",new apf.item({caption:"Quickfix",command:"quickfix"}),20001))})},init:function(e){},initEditor:function(e){var t=this;e.on("guttermousedown",e.$markerListener=function(n){function r(e){e.value&&(apf.removeListener(mnuCtxEditor,"prop.visible",r),mnuCtxEditor.hide())}t.editor=e;if(!n.getButton())return;apf.addListener(mnuCtxEditor,"prop.visible",r);var i=e.renderer.$gutterLayer.getRegion(n);if(i!="markers")return;var s=n.getDocumentPosition().row;t.showQuickfixBox(s,0)})},getAnnos:function(e){var t=o.currentEditor.amlEditor.$editor,n=[];return t.getSession().languageAnnos.forEach(function(r,i){r.row==e&&(n.push(r),r.select=function(){if(!(r.pos.sl&&r.pos.sc&&r.pos.el&&r.pos.ec))return;var e={row:r.pos.sl,column:r.pos.sc},n={row:r.pos.el,column:r.pos.ec};(e.row<n.row||e.column<n.column)&&t.getSelection().setSelectionRange({start:e,end:n})},r.getScreenCoordinates=function(){return t.renderer.textToScreenCoordinates(r.pos.sl,r.pos.sc)})}),n.sort(function(e,t){return e.pos.sc-t.pos.sc}),n},showQuickfixBox:function(e,t){var n=this,r=n.getAnnos(e);if(!r.length)return;for(var s=0;s<r.length-1;s++)if(r[s+1].pos.sc>t)break;var u=r[s];if(!u.resolutions.length)return;this.editor=o.currentEditor;var a=this.editor.amlEditor.$editor;this.selectedIdx=0,this.scrollIdx=0,this.quickfixEls=[],this.quickFixes=[],this.quickfixElement=txtQuickfix.$ext,this.docElement=txtQuickfixDoc.$ext,this.cursorConfig=a.renderer.$cursorLayer.config,this.lineHeight=this.cursorConfig.lineHeight+b;var h=i.computedStyle(this.editor.amlEditor.$ext);this.quickfixElement.style.fontSize=h.fontSize,barQuickfixCont.setAttribute("visible",!0),l||(l=a.keyBinding.onCommandKey,a.keyBinding.onCommandKey=this.onKeyPress.bind(this),c=a.keyBinding.onTextInput,a.keyBinding.onTextInput=this.onTextInput.bind(this)),n.quickFixes=u.resolutions,u.select(),this.populateQuickfixBox(this.quickFixes),apf.popup.setContent("quickfixBox",barQuickfixCont.$ext);var p=this.quickFixes.length||1,d=11+Math.min(10*this.lineHeight,p*this.lineHeight),v=this.quickFixes.length||1,m=Math.min(10*this.lineHeight,v*this.lineHeight);txtQuickfixHolder.$ext.style.height=m+"px",E=!C();var y=u.getScreenCoordinates();apf.popup.show("quickfixBox",{x:y.pageX,y:y.pageY+n.cursorConfig.lineHeight,height:d,width:g,animate:!1,callback:function(){barQuickfixCont.setHeight(d),barQuickfixCont.$ext.style.height=d+"px",sbQuickfix.$resize(),n.quickfixElement.scrollTop=1,n.quickfixElement.scrollTop=0}}),this.popupTime=(new Date).getTime(),document.addEventListener("click",f.closeQuickfixBox,!1),a.container.addEventListener("DOMMouseScroll",f.closeQuickfixBox,!1),a.container.addEventListener("mousewheel",f.closeQuickfixBox,!1)},closeQuickfixBox:function(e){var t=(new Date).getTime()-f.popupTime;if(!f.forceClose&&t<w)return;f.forceClose=!1,barQuickfixCont.$ext.style.display="none";if(!o.currentEditor.amlEditor)return;var n=o.currentEditor.amlEditor.$editor;document.removeEventListener("click",f.closeQuickfixBox,!1),n.container.removeEventListener("DOMMouseScroll",f.closeQuickfixBox,!1),n.container.removeEventListener("mousewheel",f.closeQuickfixBox,!1),l&&(n.keyBinding.onCommandKey=l,n.keyBinding.onTextInput=c),l=c=null,N.schedule(m)},populateQuickfixBox:function(e){var t=this;t.quickfixElement.innerHTML="";var n=s.amlEditor.$editor.renderer.$cursorLayer.config;e.forEach(function(e,s){var o=i.createElement("div");o.className=s===t.selectedIdx?h:p;var u="";e.image&&(u="<img src='"+r.staticPrefix+e.image+"'/>"),u+='<span class="main">'+e.label+"</span>",o.innerHTML=u,o.addEventListener("mouseover",function(){if(E){E=!1;return}t.quickfixEls[t.selectedIdx].className=p,t.selectedIdx=s,t.quickfixEls[t.selectedIdx].className=h,t.updateDoc(),x||T.schedule(v)}),o.addEventListener("click",function(){f.forceClose=!0,t.applyQuickfix(e)}),o.style.height=n.lineHeight+b+"px",o.style.width=g-10+"px",t.quickfixElement.appendChild(o),t.quickfixEls.push(o)}),t.updateDoc(!0)},updateDoc:function(e){this.docElement.innerHTML='<span class="code_complete_doc_body">';var t=this.quickFixes[this.selectedIdx];t&&t.preview?(S?txtQuickfixDoc.parentNode.show():(txtQuickfixDoc.parentNode.hide(),(!x||e)&&T.schedule(d)),this.docElement.innerHTML+=t.preview.replace(/\n/g,"<br/>")+"</span>"):txtQuickfixDoc.parentNode.hide(),this.docElement.innerHTML+="</span>"},enable:function(){},disable:function(){},destroy:function(){},applyQuickfix:function(e){var t=o.currentEditor.amlEditor,n=t.getSession().getDocument();n.applyDeltas(e.deltas),t.focus();if(e.cursorTarget){var r=e.cursorTarget,i=t.$editor.getSelection();i.clearSelection(),i.moveCursorTo(r.line,r.column,!1)}},onTextInput:function(e,t){this.closeQuickfixBox()},onKeyPress:function(e,t,n){if(e.metaKey||e.ctrlKey||e.altKey){this.closeQuickfixBox();return}var r=o.currentEditor.amlEditor.$editor.keyBinding;switch(n){case 0:break;case 32:this.closeQuickfixBox();break;case 27:this.closeQuickfixBox(),e.preventDefault();break;case 8:this.closeQuickfixBox(),e.preventDefault();break;case 37:case 39:l.apply(r,arguments),this.closeQuickfixBox(),e.preventDefault();break;case 13:case 9:this.applyQuickfix(this.quickFixes[this.selectedIdx]),f.forceClose=!0,this.closeQuickfixBox(),e.stopPropagation(),e.preventDefault();break;case 40:if(this.quickfixEls.length===1){this.closeQuickfixBox();break}e.stopPropagation(),e.preventDefault(),this.quickfixEls[this.selectedIdx].className=p,this.selectedIdx<this.quickFixes.length-1&&this.selectedIdx++,this.quickfixEls[this.selectedIdx].className=h,this.selectedIdx-this.scrollIdx>y&&(this.scrollIdx++,this.quickfixEls[this.scrollIdx].scrollIntoView(!0)),this.updateDoc();break;case 38:if(this.quickfixEls.length===1){this.closeQuickfixBox();break}e.stopPropagation(),e.preventDefault();if(this.selectedIdx<=0)return;this.quickfixEls[this.selectedIdx].className=p,this.selectedIdx--,this.quickfixEls[this.selectedIdx].className=h,this.selectedIdx<this.scrollIdx&&(this.scrollIdx--,this.quickfixEls[this.scrollIdx].scrollIntoView(!0)),this.updateDoc()}},invoke:function(e){var t=this,n=o.currentEditor.amlEditor.$editor;if(n.inMultiSelectMode){t.closeQuickfixBox();return}t.forceBox=e;var r=n.getCursorPosition();t.showQuickfixBox(r.row,r.column)}}}),define("ext/language/refactor",["require","exports","module","ext/editors/editors","ace/placeholder","ext/language/marker","core/ide","ext/menus/menus","ext/commands/commands"],function(e,t,n){var r=e("ext/editors/editors"),i=e("ace/placeholder").PlaceHolder,s=e("ext/language/marker"),o=e("core/ide"),u=e("ext/menus/menus"),a=e("ext/commands/commands"),f=/[a-zA-Z_0-9\$]/,l,c=function(e,t){var n=[],r=t>=e.length?e.length-1:t;while(r<e.length&&f.test(e[r]))r++;r=t==e.length?r:r-1;for(;r>=0&&f.test(e[r]);r--)n.push(e[r]);return r++,e=n.reverse().join(""),e.length===0?null:{sc:r,text:e}};n.exports={renameVariableItem:null,worker:null,hook:function(e,t){var n=this;this.ext=e,this.worker=t,t.on("enableRefactorings",function(t){if(e.disabled)return;n.enableRefactorings(t)}),t.on("variableLocations",function(r){if(e.disabled)return;n.enableVariableRefactor(r.data),t.emit("onRenameBegin",{data:{}})}),t.on("refactorResult",function(e){var t=e.data;t.success?n.placeHolder.detach():(console.log("REFACTOR ERROR & msg: ",t.body),n.onRenameCancel()),n.$cleanup()}),this.mnuItem=new apf.item({disabled:!0,command:"renameVar"}),e.nodes.push(u.addItemByPath("Tools/~",new apf.divider,1e4),u.addItemByPath("Tools/Rename Variable",this.mnuItem,2e4));var r=a.addCommand({name:"renameVar",hint:"Rename refactor",bindKey:{mac:"Option-Command-R",win:"Ctrl-Alt-R"},isAvailable:function(e){return e&&e.amlEditor&&n.enableVariableRename},exec:function(t){if(e.disabled)return;n.renameVariable()}});o.addEventListener("init.ext/code/code",function(){e.nodes.push(mnuCtxEditor.insertBefore(new apf.item({id:"mnuCtxEditorRename",caption:"Rename",command:"renameVar"}),mnuCtxEditor.firstChild))})},enableRefactorings:function(e){var t=e.data,n=!1;for(var r=0;r<t.length;r++){var i=t[r];i==="renameVariable"&&(n=!0)}this.enableVariableRename=n;if(!window.mnuCtxEditorRename)return;n?mnuCtxEditorRename.enable():mnuCtxEditorRename.disable()},enableVariableRefactor:function(e){var t=this;s.disableMarkerType("occurrence_main"),s.disableMarkerType("occurrence_other");var n=r.currentEditor.amlEditor.$editor,o=n.getCursorPosition(),u=e.pos,a=e.others.filter(function(e){return e.row!==u.row||e.column!==u.column}),f=this.placeHolder=new i(n.session,e.length,u,a,"language_rename_main","language_rename_other");(o.row!==u.row||o.column<u.column||o.column>u.column+e.length)&&n.moveCursorTo(u.row,u.column),f.showOtherMarkers(),this.ext.isContinuousCompletionEnabled()&&this.ext.setContinuousCompletionEnabled(!1),l||(l=n.keyBinding.onCommandKey,n.keyBinding.onCommandKey=this.onKeyPress.bind(this)),this.ext.isContinuousCompletionEnabled()&&this.ext.setContinuousCompletionEnabled(!1),f.on("cursorLeave",function(){t.commitRename()})},renameVariable:function(){var e=r.currentEditor.amlEditor,t=e.$editor;t.focus();var n=t.getCursorPosition(),i=e.getDocument(),s=i.getLine(n.row),o=c(s,n.column);this.oldIdentifier={column:o.sc,row:n.row,text:o.text},this.worker.emit("fetchVariablePositions",{data:n})},commitRename:function(){var e=r.currentEditor.amlEditor.getDocument(),t=this.placeHolder.pos,n=e.getLine(t.row),i=c(n,t.column);this.worker.emit("commitRename",{data:{oldId:this.oldIdentifier,newName:i.text}})},onRenameCancel:function(){this.placeHolder&&(this.placeHolder.detach(),this.placeHolder.cancel()),this.worker.emit("onRenameCancel",{data:{}})},$cleanup:function(){this.ext.isContinuousCompletionEnabled()&&this.ext.setContinuousCompletionEnabled(!0),s.enableMarkerType("occurrence_main"),s.enableMarkerType("occurrence_other"),this.placeHolder=null,this.oldIdentifier=null,l&&(r.currentEditor.amlEditor.$editor.keyBinding.onCommandKey=l,l=null)},onKeyPress:function(e,t,n){var i=r.currentEditor.amlEditor.$editor.keyBinding;switch(n){case 32:case 27:this.onRenameCancel(),e.preventDefault();break;case 13:this.commitRename(),e.preventDefault();break;default:l.apply(i,arguments)}},destroy:function(){a.removeCommandByName("renameVar")}}}),define("ext/language/outline",["require","exports","module","core/ide","core/ext","core/settings","ext/editors/editors","ace/range","ext/menus/menus","ext/commands/commands","ext/gotofile/gotofile","ext/gotofile/search"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/settings"),o=e("ext/editors/editors"),u=e("ace/range").Range,a=e("ext/menus/menus"),f=e("ext/commands/commands"),l=e("ext/gotofile/gotofile"),c=e("ext/gotofile/search"),h;n.exports={nodes:[],fullOutline:[],filteredOutline:[],ignoreSelectOnce:!1,isDirty:!1,isKeyDownAfterDirty:!1,lastGoToFileText:"",lastOutlineText:"@",hook:function(e,t){this.worker=t;var n=this;h=e,t.on("outline",function(e){n.openOutline(e)}),f.addCommand({name:"outline",hint:"search for a definition and jump to it",bindKey:{mac:"Command-Shift-E",win:"Ctrl-Shift-E"},isAvailable:function(e){return e&&e.path=="ext/code/code"},exec:function(){n.updateOutline(!0)}});var i=new apf.item({command:"outline"});this.nodes.push(a.addItemByPath("Tools/Quick Outline",i,100),a.addItemByPath("Goto/Goto Definition...",i.cloneNode(!1),110)),r.addEventListener("init.ext/gotofile/gotofile",function(){var e,t;dgGoToFile.parentNode.insertBefore(treeOutline,dgGoToFile),txtGoToFile.addEventListener("afterchange",function(e){n.onAfterChange(e)},!0),txtGoToFile.addEventListener("keydown",function(e){n.onKeyDown(e)}),txtGoToFile.addEventListener("keyup",function(e){n.onKeyUp(e)}),treeOutline.addEventListener("onafterselect",function(){n.onSelect(treeOutline.selected)}),treeOutline.addEventListener("onafterchoose",function(){n.ignoreSelectOnce=!1,n.onSelect(treeOutline.selected),l.toggleDialog(-1)}),treeOutline.addEventListener("click",function(e){n.ignoreSelectOnce=!1,n.onSelect(treeOutline.selected);var t=14;e.htmlEvent.x>=treeOutline.$container.getClientRects()[0].left+14&&l.toggleDialog(-1)}),txtGoToFile.addEventListener("blur",function(){e=txtGoToFile.$input.selectionStart,t=txtGoToFile.$input.selectionEnd}),treeOutline.addEventListener("focus",function(){txtGoToFile.focus(),e&&t&&(txtGoToFile.$input.selectionStart=e,txtGoToFile.$input.selectionEnd=t)}),winGoToFile.addEventListener("prop.visible",function(e){e.value||n.showGoToFile()});var r=o.currentEditor.amlEditor.$editor;treeOutline.bufferselect=!1})},outlineJsonToXml:function(e,t,n){var r=[];for(var i=0;i<e.length;i++){var s=e[i],o=s.displayPos||s.pos;r.push("<"),r.push(n),r.push(' name="'),r.push(s.name.replace(/"/g,"''")),r.push('" icon="'+(s.icon||"method")),r.push('" sl="'),r.push(o.sl),r.push('" el="'),r.push(o.el),r.push('" sc="'),r.push(o.sc),r.push('" ec="'),r.push(o.ec),r.push('" elx="'),r.push(s.pos.el),s.meta&&r.push('" meta="')&&r.push(s.meta),s===t&&r.push('" selected="true'),r.push('">\n'),r=r.concat(this.outlineJsonToXml(s.items,t,"entry")),r.push("</"),r.push(n),r.push(">")}return r.join("")},updateOutline:function(e,t){this.showOutline(e,t),this.worker.emit("outline",{data:{ignoreFilter:e}})},findCursorInOutline:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t.row<r.pos.sl||t.row>r.pos.el)continue;var i=this.findCursorInOutline(r.items,t);return i?i:r}return null},openOutline:function(e){var t=e.data;if(t.error){console.log("Oh noes! "+t.error);return}var n=o.currentEditor;if(!n||n.path!="ext/code/code"||!n.amlEditor)return;this.fullOutline=e.data.body;var r=n.amlEditor.$editor,i=r.getCursorPosition();this.$originalLine=i.row+1,this.$originalColumn=i.column,this.renderOutline(e.data.showNow),txtGoToFile.value.match(/^@/)&&this.showOutline()},showOutline:function(e,t){i.initExtension(h),i.initExtension(l),e&&(l.toggleDialog(1),txtGoToFile.focus(),this.showOutline(),txtGoToFile.value.length>0&&(txtGoToFile.$input.selectionStart=1),this.scrollToTop()),l.setEventsEnabled(!1);if(!dgGoToFile.getProperty("visible"))return;!txtGoToFile.value.match(/^@/)&&!t&&(this.lastGoToFileText=txtGoToFile.value,txtGoToFile.setValue(this.lastOutlineText)),this.ignoreSelectOnce=!0,dgGoToFile.hide(),treeOutline.show(),e&&(txtGoToFile.$input.selectionStart=1)},showGoToFile:function(){l.setEventsEnabled(!0);if(dgGoToFile.getProperty("visible"))return;txtGoToFile.value.match(/^@/)&&(this.lastOutlineText=txtGoToFile.value,txtGoToFile.setValue(this.lastGoToFileText)),l.filter(txtGoToFile.value,!1,!0),dgGoToFile.show(),treeOutline.hide()},renderOutline:function(e){var t=o.currentEditor;if(!t||t.path!="ext/code/code"||!t.amlEditor)return;i.initExtension(l);var n=e?"":txtGoToFile.value.substr(1);this.isDirty=e,this.isKeyDownAfterDirty=!1;var r=this.filteredOutline=c.treeSearch(this.fullOutline,n,!0),s=t.amlEditor.$editor,u=this.findCursorInOutline(r,s.getCursorPosition());return mdlOutline.load(apf.getXml("<data>"+this.outlineJsonToXml(r,u,"entries")+"</data>")),u},scrollToSelected:function(e){var t=mdlOutline.queryNode("//*[@selected]");if(t){this.ignoreSelectOnce=!0,treeOutline.select(t);var n=apf.xmldb.getHtmlNode(t,treeOutline);n.scrollIntoView()}else this.scrollToTop()},scrollToTop:function(e){e&&mdlOutline.data.childNodes[0]&&mdlOutline.data.childNodes[0].nodeType===1&&treeOutline.select(mdlOutline.data.childNodes[0]),treeOutline.$container.scrollTop=2,treeOutline.$container.scrollTop=1,treeOutline.$container.scrollTop=0},onSelect:function(e){if(l.eventsEnabled||!e)return;if(this.ignoreSelectOnce){this.ignoreSelectOnce=!1;return}var t=o.currentEditor.amlEditor.$editor,n=new u(+e.getAttribute("sl"),+e.getAttribute("sc"),+e.getAttribute("el"),+e.getAttribute("ec"));this.scrollToDefinition(t,+e.getAttribute("sl"),+e.getAttribute("elx")||+e.getAttribute("el")),t.selection.setSelectionRange(n)},scrollToDefinition:function(e,t,n){var r=e.renderer.$cursorLayer.config.lineHeight,i=e.renderer.scrollTop/r,s=e.renderer.$size.height/r;n=Math.min(n,t+s);if(i<=t&&n<=i+s)return;var o=1.5;e.scrollToLine(Math.round((t+n)/2-o),!0)},onKeyDown:function(e){if(l.eventsEnabled)return;if(e.keyCode===27){if(this.$originalLine){var t=o.currentEditor,n=t.amlEditor.$editor;n.gotoLine(this.$originalLine,this.$originalColumn,apf.isTrue(s.model.queryValue("editors/code/@animatedscroll"))),delete this.$originalLine,delete this.$originalColumn}l.toggleDialog(-1)}else if(e.keyCode===13)this.ignoreSelectOnce=!1,this.onSelect(treeOutline.selected),l.toggleDialog(-1);else{if(e.keyCode===40){e.preventDefault(),delete e.currentTarget,treeOutline.dispatchEvent("keydown",e);return}if(e.keyCode===38){e.preventDefault(),delete e.currentTarget,treeOutline.dispatchEvent("keydown",e);return}this.isDirty&&(this.isKeyDownAfterDirty=!0)}},onKeyUp:function(e){e.keyCode===50?this.updateOutline(!1,!0):this.isDirty&&this.isKeyDownAfterDirty&&(this.renderOutline(),this.scrollToTop(!0),this.isDirty=!1)},onAfterChange:function(e){txtGoToFile.value.match(/^@/)?(this.updateOutline(),l.setEventsEnabled(!1)):this.showGoToFile(),this.renderOutline(),this.scrollToTop(!0)}}}),define("text!ext/language/language.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:skin id="language_skin"\n      src       = "{require(\'ext/language/language\').skin}"/>\n\n    <a:hbox flex="1" visible="false">\n        <a:model id="mdlOutline">\n            <data>\n            </data>\n        </a:model>\n        <a:tree\n          id              = "treeOutline"\n          class           = "searchresults treeOutline"\n          opencloseaction = "onmouseup"\n          model           = "mdlOutline"\n          openadd         = "false"\n          startcollapsed  = "false"\n          nocollapse      = "true"\n          empty-message   = "No outline available"\n          loading-message = "Loading outline. One moment please..."\n          maxheight       = "350"\n          visible         = "false"\n          scrollbar       = "sbShared 32 7 7">\n            <a:each\n              match         = "[entries|entry]"\n            >   \n                <a:caption><?lm\n                    var re = new RegExp("({txtGoToFile.value.substr(1)})", \'i\');\n                    var value = [@name];\n                    \n                    value.replace(re, <strong>$1</strong>);\n                    !![@meta] ? "<code style=\'color:gray;\'> : [@meta]</code>" : "";\n                ?></a:caption>\n                \n                <a:icon value="{ide.staticPrefix}/ext/language/img/[@icon].png" />\n            </a:each>\n        </a:tree>\n      </a:hbox>\n\n    <a:bar id="barHierarchy" skinset="language_skin" skin="codecomplete" width="300" visible="false">\n        <a:vbox anchors="0 0 0 0">\n            <a:toolbar>\n                <a:bar height = "36">\n                    <a:hbox edge="5">\n                        <a:button\n                          icon     = "hier_supertype.png"\n                          tooltip  = "Supertypes Hierarchy"\n                          onclick  = "require(\'ext/language/hierarchy\').refreshHierarchy(0)" />\n                        <a:button\n                          icon     = "hier_subtype.png"\n                          tooltip = "Subtypes Hierarchy"\n                          onclick  = "require(\'ext/language/hierarchy\').refreshHierarchy(1)" />\n                        <a:textbox \n                          id              = "tbHierarchySearch"\n                          realtime        = "true"\n                          flex            = "1"\n                          skin            = "searchbox_textbox"\n                          class           = "small_font"\n                          focusselect     = "true"\n                          initial-message = "Search Hierarchy"\n                        />\n                    </a:hbox>\n                </a:bar>\n            </a:toolbar>\n            <a:hbox flex="1">\n                <a:model id="mdlHierarchy">\n                    <data>\n                    </data>\n                </a:model>\n                <a:tree\n                  id              = "treeHierarchy"\n                  skin            = "outline-tree"\n                  opencloseaction = "onmouseup"\n                  onafterchoose   = "require(\'ext/language/hierarchy\').jumpToAndClose(this.selected)"\n                  onkeyup         = "require(\'ext/language/hierarchy\').escapeHierarchy(event)"\n                  model           = "mdlHierarchy"\n                  openadd         = "false"\n                  startcollapsed  = "false"\n                  empty-message   = "No Hierarchy avaialble"\n                  flex            = "1"\n                  anchors = "0 0 0 0">\n                    <a:each\n                      match         = "[entry]"\n                      filter        = "{tbHierarchySearch.value}"\n                      filter-fields = "@name"\n                    >\n                        <a:caption>\n                          <?lm [@name]{!![@meta] ? "<code style=\'color:gray;\'> - [@meta]</code>" : ""} ?>\n                        </a:caption>\n                        <a:icon value="{ide.staticPrefix}/ext/language/img/[@icon].png" />\n                    </a:each>\n                </a:tree>\n                <a:scrollbar\n                  for      = "treeHierarchy"\n                  id       = "sbHierarchy"\n                  margin   = "2"\n                  skin     = "sbios"\n                  width    = "7"\n                  overflow2 = "auto"/>\n              </a:hbox>\n        </a:vbox>\n    </a:bar>\n    \n    <a:bar id="barCompleterCont" skinset="language_skin" skin="codecomplete" width="600" visible="false">\n        <!-- see ext.language/complete.MENU_WIDTH for widths -->\n        <a:hbox id="txtCompleterHolder" class="code_complete_text_holder" anchors="0 0 0 0" edge="5" width="290">\n            <a:text id="txtCompleter" skin="codecomplete_text" flex="1" />\n            <a:scrollbar\n              for      = "txtCompleter"\n              id       = "sbCompleter"\n              margin   = "2"\n              skin     = "sbios"\n              width    = "7"\n              overflow2 = "auto"/>\n        </a:hbox>\n        <a:hbox class="code_complete_text_holder" anchors="0 0 0 330" edge="5" minheight="100">\n            <a:text id="txtCompleterDoc" skin="codecompletedoc_text" flex="1" />\n            <a:scrollbar\n              for      = "txtCompleterDoc"\n              id       = "sbCompleterDoc"\n              margin   = "2"\n              skin     = "sbios"\n              width    = "7"\n              overflow2 = "auto"/>\n        </a:hbox>\n    </a:bar>\n    \n    <a:bar id="barQuickfixCont" skinset="language_skin" skin="codecomplete" width="600" visible="false">\n        <a:hbox id="txtQuickfixHolder" class="code_complete_text_holder" anchors="0 0 0 0" edge="5" width="290">\n            <a:text id="txtQuickfix" skin="codecomplete_text" flex="1" />\n            <a:scrollbar\n              for      = "txtQuickfix"\n              id       = "sbQuickfix"\n              margin   = "2"\n              skin     = "sbios"\n              width    = "7"\n              overflow2 = "auto"/>\n        </a:hbox>\n        <a:hbox class="code_complete_text_holder" anchors="0 0 0 330" edge="5" minheight="100">\n            <a:text id="txtQuickfixDoc" skin="codecompletedoc_text" flex="1" />\n            <a:scrollbar\n              for      = "txtQuickfixDoc"\n              id       = "sbQuickfixDoc"\n              margin   = "2"\n              skin     = "sbios"\n              width    = "7"\n              overflow2 = "auto"/>\n        </a:hbox>\n    </a:bar>\n    \n</a:application>\n'}),define("text!ext/language/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n    <a:bar name="codecomplete">\n        <a:style><![CDATA[\n            .code_complete_bar {\n                overflow: visible;\n                position : relative;\n            }\n            \n            .code_complete_bar.downward {\n            }\n\n            .code_complete_bar.upward {\n                margin-top: -2px;\n            }\n\n            .cc_complete_option {\n                background: rgba(255, 255, 255, 0.4);\n                border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n                border-top: 1px solid rgba(255, 255, 255, 0.8);\n                -moz-box-sizing: border-box;\n                box-sizing: border-box;\n                cursor: default;\n                overflow: hidden;\n                position: relative;\n                white-space: nowrap;\n            }\n            .dark .cc_complete_option {\n                background: rgba(255, 255, 255, 0.1);\n                border-top-color: rgba(255, 255, 255, 0.05);\n                border-bottom-color: rgba(0, 0, 0, 0.3);\n            }\n\n            .cc_complete_option.selected {\n                background-image: -webkit-linear-gradient(bottom,#337CBC 0%, #4091D8 100%);\n                background-image:    -moz-linear-gradient(bottom,#337CBC 0%, #4091D8 100%);\n                background-image:         linear-gradient(bottom,#337CBC 0%, #4091D8 100%);\n                color: lightblue;\n            }\n            .dark .cc_complete_option.selected {\n                background: none;\n            }\n\n            .code_complete_bar img {\n                position: absolute;\n                left: 3px;\n                width: 8px;\n                height: 8px;\n                margin-top: 0.4em;\n            }\n\n            .code_complete_bar .main {\n                left: 15px;\n                overflow: hidden;\n                position: absolute;\n                top: 0px;\n                white-space: nowrap;\n                width: inherited;\n            }\n\n            .code_complete_bar .maintrim {\n                width: 220px;\n                overflow: hidden;\n            }\n\n            .code_complete_bar .deferred {\n                opacity: .7;\n            }\n\n            .code_complete_bar .main u {\n                font-weight: bold;\n                text-decoration: none;\n            }\n            .dark .code_complete_bar .main u,\n            .cc_complete_option.selected .main u {\n                color: white !important;\n            }\n            .code_complete_bar .meta {\n                position: absolute;\n                right: 35px;\n                opacity: .5;\n                width: 45px;\n            }\n        ]]></a:style>\n        <a:style condition="{apf.isWebkit}"><![CDATA[\n            .code_complete_bar > div > div {\n                margin-right: -11px;\n            }\n        ]]></a:style>\n        <a:style condition="{apf.isGecko}"><![CDATA[\n            .code_complete_bar > div > div > div {\n                margin-right: -11px;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main container=".">\n                <div class="code_complete_bar ace_editor" />\n            </a:main>\n        </a:presentation>\n    </a:bar>\n    \n    <a:text name="codecomplete_text">\n        <a:style><![CDATA[\n                \n            .code_complete_text_holder {\n                background: #E8E8E8;\n                border: 1px solid #BBB;\n                border-width: 0 1px 1px 1px;\n                border-radius: 0;\n                box-shadow: 0 2px 7px rgba(0, 0, 0, 0.3);\n                padding: 5px;\n                overflow: hidden;\n                width: 320px;\n            }\n            .dark .code_complete_text_holder {\n                border-width: 0 2px 2px 2px;\n                box-shadow: 0 2px 7px rgba(0, 0, 0, 0.7);\n            }\n\n            .code_complete_text_holder > div {\n                padding: 0 !important;\n            }\n\n            .code_complete_bar.upward .code_complete_text_holder {\n                box-shadow: 0 -2px 7px rgba(0, 0, 0, 0.3);\n                border-width: 1px 1px 0 1px;\n                padding: 5px;\n            }\n\n            .dark .code_complete_text_holder {\n                border-color: rgba(255, 255, 255, .1);\n            }\n\n            .code_complete_text {\n                position: relative;\n                overflow: hidden;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main container=".">\n                <div class="code_complete_text"/>\n            </a:main>\n        </a:presentation>\n    </a:text>\n    \n    <a:text name="codecompletedoc_text">\n        <a:style><![CDATA[\n            .code_complete_doc_text .cc_complete_option.selected {\n                text-shadow: none;\n            }\n            \n            .code_complete_doc_body {\n            \n            }\n            \n            .code_complete_doc_head {\n                text-decoration: underline;\n            }\n            \n            .code_complete_doc_text {\n                overflow: hidden;\n                position: relative;\n            }\n            \n            .code_complete_doc_text u {\n                text-decoration: none;\n                color: blue;\n                text-shadow: none;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main container=".">\n                <div class="code_complete_doc_text"/>\n            </a:main>\n        </a:presentation>\n    </a:text>\n</a:skin>\n'}),define("text!ext/language/language.css",[],function(){return".language_highlight_default {\n    position: absolute;\n    border-bottom: solid 1px green;\n    z-index: 2000;\n}\n\n.language_highlight_error {\n    position: absolute;\n    border-bottom: solid 1px rgb(224, 4, 4);\n    z-index: 2000;\n}\n\n.language_highlight_warning {\n    position: absolute;\n    border-bottom: solid 1px #DDC50F;\n    z-index: 2000;\n}\n\n.language_highlight_info {\n    position: absolute;\n    border-bottom: dotted 1px #999;\n    z-index: 2000;\n}\n\n.language_highlight_occurrence_main {\n    position: absolute;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    border: solid 1px #999;\n    opacity: 0.5;\n    z-index: 2000;\n}\n\n.ace_dark .language_highlight_occurrence_main {\n    border: solid 1px #ccc;\n}\n\n.language_highlight_occurrence_other {\n    position: absolute;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    border: solid 1px #999;\n    opacity: 0.5;\n    z-index: 2000;\n}\n\n.ace_dark .language_highlight_occurrence_other {\n    border: solid 1px #ccc;\n}\n\n.language_rename_main {\n    background-color: #FFF4C9;\n    position: absolute;\n    border: solid 1px #777;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    z-index: 3;\n}\n\n.ace_dark .language_rename_main {\n    background-color: #555;\n    border: solid 1px #777;\n}\n\n.language_rename_other {\n    background-color: #FFF4C9;\n    border: solid 1px #666;\n    position: absolute;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    opacity: 0.7;\n    z-index: 3;\n}\n\n.ace_dark .language_rename_other {\n    background-color: #444;\n    border: solid 1px #888;\n}\n\n.language_tooltip {\n    display: inline-block;\n    position: absolute;\n    border: 1px solid gray;\n    background-color: #ffffd5;\n    color: black;\n    padding: 4px;\n    -webkit-box-shadow: 0 1px 1px rgba(0,0,0,.4);\n    box-shadow: 0 1px 1px rgba(0,0,0,.4);\n    z-index: 300;\n}\n"}),define("ext/language/jumptodef",["require","exports","module","core/ide","ext/editors/editors","ext/commands/commands","ext/codecomplete/complete_util","ext/menus/menus"],function(e,t,n){var r=e("core/ide"),i=e("ext/editors/editors"),s=e("ext/commands/commands"),o=e("ext/codecomplete/complete_util"),u=e("ext/menus/menus"),a=3e4;n.exports={nodes:[],removeSpinnerNodes:[],hook:function(e,t){var n=this;n.worker=t,s.addCommand({name:"jumptodef",bindKey:{mac:"F3",win:"F3"},hint:"jump to the definition of the variable or function that is under the cursor",isAvailable:function(e){return e&&e.path=="ext/code/code"},exec:function(){n.jumptodef()}}),r.addEventListener("init.ext/code/code",function(){n.nodes.push(mnuCtxEditor.insertBefore(new apf.item({id:"mnuCtxEditorJumpToDef",caption:"Jump to Definition",command:"jumptodef"}),mnuCtxEditor.firstChild),u.addItemByPath("Goto/Jump to Definition",new apf.item({caption:"Jump to Definition",command:"jumptodef"}),899)),apf.addListener(mnuCtxEditor,"prop.visible",function(e){e.value&&(mnuCtxEditorJumpToDef.enable(),n.checkIsJumpToDefAvailable())})}),t.on("definition",function(e){n.onDefinitions(e)}),t.on("isJumpToDefinitionAvailableResult",function(e){e.data.value?mnuCtxEditorJumpToDef.enable():mnuCtxEditorJumpToDef.disable()})},$getFirstColumn:function(e){var t=i.currentEditor;if(!t||t.path!="ext/code/code"||!t.amlEditor)return 0;var n=t.getDocument().getLine(e);return n?n.match(/^(\s*)/)[1].length:0},checkIsJumpToDefAvailable:function(){var e=i.currentEditor;if(!e||e.path!="ext/code/code"||!e.amlEditor)return;this.worker.emit("isJumpToDefinitionAvailable",{data:e.getSelection().getCursor()})},jumptodef:function(){var e=i.currentEditor;if(!e||e.path!="ext/code/code"||!e.amlEditor)return;this.activateSpinner(),this.onJumpStart(e);var t=e.getSelection(),n=t.getCursor();this.worker.emit("jumpToDefinition",{data:n})},onDefinitions:function(e){this.clearSpinners();var t=e.data.results,n=i.currentEditor;if(!n||n.path!="ext/code/code"||!n.amlEditor)return;if(!t.length)return this.onJumpFailure(e,n);var s;for(var o=t.length-1;o>=0;o--){s=t[t.length-1];if(!s.isDeferred)break}var u=this,a=s.path?r.davPrefix.replace(/[\/]+$/,"")+"/"+s.path:undefined;i.gotoDocument({getColumn:function(){return s.column!==undefined?s.column:u.$getFirstColumn(s.row)},row:s.row+1,node:a?undefined:r.getActivePage().xmlRoot,animate:!0,path:a})},onJumpFailure:function(e,t){var n=t.getSelection().getCursor(),r=e.data.pos;if(r.row!==n.row||r.column!==n.column)return;var i=t.getDocument().getLine(r.row);if(!i)return;var s=o.retrievePrecedingIdentifier(i,n.column),u=n.column-s.length;u===r.column&&(u=this.$getFirstColumn(n.row));var a={row:n.row,column:u};t.getSelection().setSelectionRange({start:a,end:a})},onJumpStart:function(e){var t=e.getSelection().getCursor(),n=e.getDocument().getLine(t.row);if(!n)return;var r=o.retrievePrecedingIdentifier(n,t.column),i=t.column-r.length,s=o.retrieveFollowingIdentifier(n,i),u={row:t.row,column:i},a={row:t.row,column:i+s.length};e.getSelection().setSelectionRange({start:u,end:a})},activateSpinner:function(){try{var e=r.getActivePage().$doc.getNode();apf.xmldb.setAttribute(e,"lookup","1"),this.removeSpinnerNodes.push(e);var t=this;setTimeout(function(){t.clearSpinners()},a)}catch(n){console.error(n)}},clearSpinners:function(){this.removeSpinnerNodes.forEach(function(e){apf.xmldb.removeAttribute(e,"lookup")}),this.removeSpinnerNodes=[]}}}),define("text!ext/language/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox class="underlined" label="Enable Hints and Warnings"\n        value="[language/@jshint]" skin="checkbox_grey" position="1000"/>\n    <a:checkbox class="underlined" label="Highlight Variable Instances"\n        value="[language/@instanceHighlight]" skin="checkbox_grey" position="2000"/>\n    <a:checkbox class="underlined" label="Mark Undeclared Variables"\n        value="[language/@undeclaredVars]" skin="checkbox_grey" position="3000"/>\n    <a:checkbox class="underlined" label="Mark Unused Function Arguments"\n        value="[language/@unusedFunctionArgs]" skin="checkbox_grey" position="4000"/>\n    <a:checkbox class="underlined" label="Complete As You Type"\n        value="[language/@continuousCompletion]" skin="checkbox_grey" position="4000"/>\n    <a:hbox edge="5 5 2 5" align="center">\n        <a:label flex="1">Warning Level</a:label>\n        <a:dropdown default="info" value="[{require(\'ext/settings/settings\').model}::language/@warnLevel]" width="80" height="21">\n            <a:item value="error">Error</a:item>\n            <a:item value="warning">Warning</a:item>\n            <a:item value="info">Info</a:item>\n        </a:dropdown>\n    </a:hbox>\n</a:application>\n'}),define("ext/language/language",["require","exports","module","core/ext","core/ide","core/util","ext/code/code","ext/editors/editors","ace/edit_session","ace/worker/worker_client","ext/language/worker","ext/language/complete","ext/language/quickfix","ext/language/marker","ext/language/refactor","ext/language/outline","text!ext/language/language.xml","text!ext/language/skin.xml","text!ext/language/language.css","ace/lib/lang","ext/language/keyhandler","ext/language/jumptodef","ext/menus/menus","text!ext/language/settings.xml","ext/settings/settings","core/ext"],function(e,t,n){var r=e("core/ext"),i=e("core/ide"),s=e("core/util"),o=e("ext/code/code"),u=e("ext/editors/editors"),a=e("ace/edit_session").EditSession,f=e("ace/worker/worker_client").WorkerClient,l=e("ext/language/worker").createUIWorkerClient,c=window.location&&/[?&]noworker=1/.test(window.location.search),h=e("ext/language/complete"),p=e("ext/language/quickfix"),d=e("ext/language/marker"),v=e("ext/language/refactor"),m=e("ext/language/outline"),g=e("text!ext/language/language.xml"),y=e("text!ext/language/skin.xml"),b=e("text!ext/language/language.css"),w=e("ace/lib/lang"),E=e("ext/language/keyhandler"),S=e("ext/language/jumptodef"),x=e("ext/menus/menus"),T=e("text!ext/language/settings.xml"),N=e("ext/settings/settings"),C;n.exports=r.register("ext/language/language",{name:"Javascript Language Services",dev:"Ajax.org",type:r.GENERAL,deps:[u,o,x],nodes:[],alone:!0,markup:g,skin:y,worker:null,enabled:!0,defaultKeyHandler:null,defaultCommandKeyHandler:null,hook:function(){var e=this;i.addEventListener("extload",function(){var t;c?t=e.worker=l(["treehugger","ext","ace","c9"],"ext/language/worker","LanguageWorker"):t=e.worker=new f(["treehugger","ext","ace","c9"],"ext/language/worker","LanguageWorker"),h.setWorker(t),i.addEventListener("closefile",function(e){var n=e.page&&e.page.id;n&&t.emit("documentClose",{data:n})}),i.addEventListener("afteropenfile",function(n){if(!n.node)return;if(!u.currentEditor||!u.currentEditor.amlEditor)return;r.initExtension(e);var o=n.node.getAttribute("path"),a=u.currentEditor.amlEditor,f=a.xmlRoot==n.node,l=[s.stripWSFromPath(o),a.syntax,n.doc.getValue(),null,i.workspaceDir];t.call("documentOpen",l),f&&t.call("switchFile",l)}),d.hook(e,t),h.hook(e,t),v.hook(e,t),m.hook(e,t),E.hook(e,t),S.hook(e,t),p.hook(e),i.dispatchEvent("language.worker",{worker:t}),i.addEventListener("$event.language.worker",function(e){e({worker:t})})},!0),i.addEventListener("settings.load",function(){N.setDefaults("language",[["jshint","true"],["instanceHighlight","true"],["undeclaredVars","true"],["unusedFunctionArgs","false"],["continuousCompletion",e.isInferAvailable()?"true":"false"]])}),N.addSettings("Language Support",T),a.prototype.$startWorker=function(){}},isWorkerEnabled:function(){return!c},isInferAvailable:function(){return cloud9config.hosted||!!e("core/ext").extLut["ext/jsinfer/jsinfer"]},init:function(){var e=this,t=this.worker;apf.importCssString(b);if(!u.currentEditor||u.currentEditor.path!="ext/code/code")return;this.editor=u.currentEditor.amlEditor.$editor,this.$onCursorChange=this.onCursorChangeDefer.bind(this),this.editor.session.selection.on("changeCursor",this.$onCursorChange);var n=this.editor.session;t.$doc=n,this.setPath(),this.updateSettings();var r=this.editor.keyBinding.onTextInput.bind(this.editor.keyBinding),s=this.editor.keyBinding.onCommandKey.bind(this.editor.keyBinding);this.editor.keyBinding.onTextInput=E.composeHandlers(E.onTextInput,r),this.editor.keyBinding.onCommandKey=E.composeHandlers(E.onCommandKey,s),this.editor.on("changeSession",function(){n.selection.removeEventListener("changeCursor",e.$onCursorChange),e.editor.selection.on("changeCursor",e.$onCursorChange),n=e.editor.session,clearTimeout(e.$timeout),e.$timeout=setTimeout(function(){e.setPath()},100),t.$doc=n}),this.editor.on("changeMode",function(){e.$timeout=setTimeout(function(){e.setPath()},100)}),this.editor.on("change",function(n){t.changeListener(n),d.onChange(e.editor.session,n)}),i.addEventListener("liveinspect",function(e){t.emit("inspect",{data:{row:e.row,col:e.col}})}),N.model.addEventListener("update",this.updateSettings.bind(this)),this.editor.addEventListener("mousedown",this.onEditorClick.bind(this))},isContinuousCompletionEnabled:function(){return C},setContinuousCompletionEnabled:function(e){C=e},updateSettings:function(e){if(e&&e.xmlNode&&e.xmlNode.tagName!="language")return;if(!u.currentEditor||!u.currentEditor.amlEditor||!i.getActivePage())return;N.model.queryValue("language/@jshint")!="false"?this.worker.call("enableFeature",["jshint"]):this.worker.call("disableFeature",["jshint"]),N.model.queryValue("language/@instanceHighlight")!="false"?this.worker.call("enableFeature",["instanceHighlight"]):this.worker.call("disableFeature",["instanceHighlight"]),N.model.queryValue("language/@unusedFunctionArgs")!="false"?this.worker.call("enableFeature",["unusedFunctionArgs"]):this.worker.call("disableFeature",["unusedFunctionArgs"]),N.model.queryValue("language/@undeclaredVars")!="false"?this.worker.call("enableFeature",["undeclaredVars"]):this.worker.call("disableFeature",["undeclaredVars"]),this.worker.call("setWarningLevel",[N.model.queryValue("language/@warnLevel")||"info"]);var t=this.editor.getCursorPosition();t.force=!0,this.worker.emit("cursormove",{data:t}),C=N.model.queryValue("language/@continuousCompletion")!="false",this.setPath()},setPath:function(){if(!u.currentEditor||u.currentEditor.path!="ext/code/code"||!tabEditors.getPage()||!this.editor)return;var e=i.getActivePage().getAttribute("id");this.worker.call("switchFile",[s.stripWSFromPath(e),u.currentEditor.amlEditor.syntax,this.editor.getValue(),this.editor.getCursorPosition(),i.workspaceDir])},onEditorClick:function(e){},complete:function(){h.invoke()},registerLanguageHandler:function(e,t,n){var r=this;i.addEventListener("extload",function(){r.worker.on("registered",function i(t){if(t.data.path!==e)return;r.worker.removeEventListener(i),n&&n(t.data.err)}),r.worker.call("register",[e,t])})},onCursorChangeDefer:function(){this.onCursorChangeDeferred||(this.onCursorChangeDeferred=w.delayedCall(this.onCursorChange.bind(this),250)),this.onCursorChangeDeferred.delay(250)},onCursorChange:function(){this.worker.emit("cursormove",{data:this.editor.getCursorPosition()})},enable:function(){this.$enable(),this.setPath()},disable:function(){this.$disable(),d.addMarkers({data:[]},this.editor)},destroy:function(){d.destroy(),h.destroy(),v.destroy(),this.$destroy()}})}),define("ext/linereport/linereport",["require","exports","module","core/ide","core/ext","core/util","ext/language/language","ext/editors/editors","ext/settings/settings","core/ext"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("ext/language/language"),u=e("ext/editors/editors"),a=e("ext/settings/settings");n.exports=i.register("ext/linereport/linereport",{name:"linereport",dev:"Ajax.org",alone:!0,type:i.GENERAL,disabled:!1,deps:[o,u],nodes:[],stdoutBuffers:{},stderrBuffers:{},saveTriggers:{},firstUsed:!1,hook:function(){var e=this;r.addEventListener("init.ext/language/language",function(){o.worker.on("linereport_invoke",e.onWorkerMessage.bind(e)),r.addEventListener("socketMessage",e.onServerMessage.bind(e),!0),r.addEventListener("afterfilesave",e.onFileSave.bind(e)),o.registerLanguageHandler("ext/linereport/linereport_base")})},onWorkerMessage:function(e){function o(){r.send(e.data.command)}if(r.readonly)return this.disabled=!0;!this.firstUsed&&e.data.path&&(this.firstUsed=!0,this.onFirstUse(e));var t=r.getActivePage()&&r.getActivePage().$doc,n=e.data.path;if(i.disabled||!t||n&&n!==s.stripWSFromPath(t.getNode().getAttribute("path")))return;!n||!t.getNode().getAttribute("changed")||t.getNode().getAttribute("changed")=="0"?o():this.saveTriggers[n]=o},isCollabSlave:function(){var t=e("core/ext").extLut["ext/collaborate/collaborate"];return t&&t.ownerUid&&t.myUserId!=t.ownerUid},onServerMessage:function(e){var t=e.message,n=t.extra&&t.extra.linereport_id;if(!n)return;switch(t.type){case"npm-module-data":case"other-data":e.message.stream==="stdout"?this.stdoutBuffers[n]=(this.stdoutBuffers[n]||"")+e.message.data:this.stderrBuffers[n]=(this.stderrBuffers[n]||"")+e.message.data;break;case"npm-module-exit":case"other-exit":o.worker.emit("linereport_invoke_result",{data:{id:n,code:e.message.code,stdout:this.stdoutBuffers[n]||"",stderr:this.stderrBuffers[n]||""}}),this.stdoutBuffers[n]&&delete this.stdoutBuffers[n],this.stderrBuffers[n]&&delete this.stderrBuffers[n]}},onFileSave:function(e){var t=s.stripWSFromPath(e.oldpath);this.saveTriggers[t]&&(this.saveTriggers[t](),delete this.saveTriggers[t])},onFirstUse:function(e){r.dispatchEvent("track_action",{type:"linereport_firstuse",language:e.data.language,source:e.data.source})}})}),define("ext/linereport_php/linereport_php",["require","exports","module","core/ext","ext/editors/editors","ext/language/language","ext/linereport/linereport"],function(e,t,n){var r=e("core/ext"),i=e("ext/editors/editors"),s=e("ext/language/language"),o=e("ext/linereport/linereport");n.exports=r.register("ext/linereport_php/linereport_php",{name:"PHP Line Reporting Support",dev:"Ajax.org",type:r.GENERAL,deps:[i,s,o],alone:!0,init:function(){s.registerLanguageHandler("ext/linereport_php/linereport_php_worker")}})}),define("ext/linereport_python/linereport_python",["require","exports","module","core/ext","ext/editors/editors","ext/language/language","ext/linereport/linereport"],function(e,t,n){var r=e("core/ext"),i=e("ext/editors/editors"),s=e("ext/language/language"),o=e("ext/linereport/linereport");n.exports=r.register("ext/linereport_python/linereport_python",{name:"Python Line Reporting Support",dev:"Ajax.org",type:r.GENERAL,deps:[i,s,o],nodes:[],alone:!0,init:function(){s.registerLanguageHandler("ext/linereport_python/linereport_python_worker")},enable:function(){},disable:function(){},destroy:function(){}})}),define("text!ext/statusbar/statusbar.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:model id="mdlStatusBar">\n        <data><state isCodeEditor="false" showStatusbar="true"/></data>\n    </a:model>\n\n    <a:bar id="barIdeStatus" \n      skin    = "bar-status" \n      skinset = "c9statusbar"\n      class   = "expanded"\n      visible = "{{\n        apf.isTrue([mdlStatusBar::state/@isCodeEditor]) \n        and\n        apf.isTrue([mdlStatusBar::state/@showStatusbar])\n      }}"\n      height  = "28"\n      bottom  = "3"\n      right   = "3">\n        <a:hbox height="23">\n            <a:label id="lblEditorStatus" \n              caption = "" \n              margin  = "2 3 0 3" \n              visible = "{this.caption != \'\'}"/>\n            <a:label id="lblSelectionLength" \n              caption = "" \n              margin  = "2 3 0 3"\n              visible = "{this.caption != \'\'}"\n              onclick = "require(\'ext/statusbar/statusbar\').toggleSelectionLength()"\n            />\n            <a:label id="lblRowCol"\n              class   = "lbl_row_col"\n              margin  = "2 6 0 3"\n              onclick = "require(\'core/ide\').dispatchEvent(\'gotoline\')"\n            />\n            <a:divider class="divider-status-bar" width="2" height="20" margin="1 0 1 0" />\n            <a:hbox id="hboxStatusBarSettings" style="overflow:hidden">\n                <a:button id="btnSbPrefs"\n                  skin    = "btn-statusbar-icon" \n                  skinset = "c9statusbar"\n                  height  = "23"\n                  icon    = "pref-ico.png" \n                  submenu = "mnuStatusBarPrefs"\n                  submenudir = "up" />\n            </a:hbox>\n        </a:hbox>\n    </a:bar>\n    \n    <a:menu id="mnuStatusBarPrefs"\n      ref   = "{btnSbPrefs}"\n      class = "mnuSbPrefs"\n      sticky = "true"\n      render = "runtime"\n      model  = "{require(\'ext/settings/settings\').model}">\n      <a:item type="check" caption="Show Invisibles" checked="[editors/code/@showinvisibles]" model  = "{require(\'ext/settings/settings\').model}"/>\n      <a:item type="check" caption="Code Folding" checked="[editors/code/@folding]" />\n      <a:item type="check" caption="Full Line Selection" value="[editors/code/@selectstyle]" values="line|text" />\n      <a:item type="check" caption="Highlight Active Line" checked="[editors/code/@activeline]" />\n      <a:item type="check" caption="Highlight Gutter Line" checked="[editors/code/@gutterline]" />\n      <a:item type="check" caption="Show Gutter" checked="[editors/code/@gutter]" />\n      <a:item type="check" caption="Show Indent Guides" checked="[editors/code/@showindentguides]" />\n      <a:item type="check" caption="Highlight Selected Word" checked="[editors/code/@highlightselectedword]" />\n      <a:item type="check" caption="Auto-pair Brackets, Quotes, etc." checked="[editors/code/@behaviors]" />\n      <a:item type="check" caption="Wrap Selection with Brackets, etc." checked="[editors/code/@wrapbehaviors]" />\n      <a:item type="check" caption="Auto-hide Horizontal Scrollbar" checked="[editors/code/@autohidehorscrollbar]" />\n      <a:item type="check" caption="Wrap Lines" checked="[{tabEditors.getPage(tabEditors.activepage).$model}::@wrapmode]" id="itmSbWrap" />\n      <a:item type="check" caption="To Viewport" checked="[editors/code/@wrapmodeViewport]" disabled="{!itmSbWrap.checked}" />\n      <a:divider />\n      <a:hbox edge="0 5 2 23" align="center">\n          <a:label flex="1" style="padding: 2px 2px 2px 0">Font Size</a:label>\n          <a:spinner value="[editors/code/@fontsize]" realtime="true" min="1" max="72" width="50" />\n      </a:hbox>\n      <a:hbox edge="0 5 2 0" align="center">\n          <a:checkbox label="Show Print Margin" value="[editors/code/@showprintmargin]" flex="1" skin="checkbox-menu" />\n          <a:spinner value="[editors/code/@printmargincolumn]" realtime="true" min="1" max="200" width="50" />\n      </a:hbox>\n      <a:hbox edge="0 5 2 0" align="center">\n          <a:checkbox label="Insert Spaces as Soft Tabs" value="[editors/code/@softtabs]" flex="1" skin="checkbox-menu"/>\n          <a:spinner value="[editors/code/@tabsize]" realtime="true" min="1" max="64" width="50" />\n      </a:hbox>\n      <a:hbox edge="0 5 2 23" align="center">\n          <a:label flex="1" style="padding: 2px 2px 2px 0">Mouse Scroll Speed</a:label>\n          <a:spinner value="[editors/code/@scrollspeed]" min="1" max="8" width="50" />\n      </a:hbox>\n    </a:menu>\n</a:application>\n'}),define("text!ext/statusbar/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:bar name="bar-status">\n        <a:style><![CDATA[\n            .bar-status {\n                position : absolute;\n                color: rgba(0, 0, 0, 0.4);\n                padding: 2px;\n                overflow: hidden;\n                border: 1px solid transparent;\n\n                border-radius: 6px;\n\n                -webkit-transition: background-color 0.2s linear, border 0.2s linear, box-shadow 0.2s linear;\n                -moz-transition: background-color 0.2s linear, border 0.2s linear, -moz-box-shadow 0.2s linear;\n\n                background: transparent url(\'images/editor_bar_bg.png\') 0px 30px repeat-x;\n            }\n\n            .bar-status:hover {\n                border: 1px solid rgba(0, 0, 0, 0.12);\n\n                -moz-box-shadow: inset 0px 1px 0px 0px #f5f5f5;\n                box-shadow: inset 0px 1px 0px 0px #f5f5f5;\n\n                background-color: transparent;\n            }\n\n            .dark .bar-status:hover {\n                -moz-box-shadow: inset 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n                box-shadow: inset 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            }\n            \n            .bar-status .lbl_row_col {\n                text-align: center;\n                color: rgba(0, 0, 0, 0.4);\n            }\n\n            .bar-status .label {\n                color: rgba(0, 0, 0, 0.4);\n                padding-left: 1px;\n                overflow: visible;\n            }\n\n            .dark .bar-status .label {\n                color: rgba(255, 255, 255, 0.8);\n            }\n            \n            .mnuSbPrefs{\n                border-radius : 6px;\n                margin-top : -8px;\n                margin-left : 1px;\n            }\n            \n            .mnuSbPrefs .label {\n                color : #f1f1f1;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main container=".">\n                <div class="bar-status">\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:bar>\n    <a:button name="btn-expand-statusbar">\n        <a:style><![CDATA[\n            .btn-expand-statusbar {\n                height              : 8px;\n                width               : 10px;\n                overflow            : hidden;\n                cursor              : pointer;\n                position            : relative;\n                cursor              : default;\n                -moz-user-select    : none;\n                -khtml-user-select  : none;\n                user-select         : none;\n                background-position : 2px 7px;\n                background-repeat   : no-repeat;\n\n                border-radius: 3px;\n            }\n\n            .btn-expand-statusbarOver {\n                background-position : 2px -19px;\n            }\n\n            .expanded .btn-expand-statusbar {\n                background-position : -11px 7px;\n            }\n\n            .expanded .btn-expand-statusbarOver {\n                background-position : -11px -19px;\n            }\n\n            .dark .btn-expand-statusbar {\n                background-position : -28px 7px;\n            }\n\n            .dark .btn-expand-statusbarOver {\n                background-position : -28px -19px;\n            }\n\n            .dark .expanded .btn-expand-statusbar {\n                background-position : -42px -18px;\n            }\n\n            .dark .expanded .btn-expand-statusbarOver {\n                background-position : -42px 7px;\n\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main\n              caption      = "text()"\n              background = "."\n              icon       = ".">\n                <div class="btn-expand-statusbar"> </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n    <a:button name="btn-statusbar-icon">\n        <a:style><![CDATA[\n            .btn-statusbar-icon {\n                height              : 23px;\n                width               : 22px;\n                overflow            : hidden;\n                cursor              : pointer;\n                position            : relative;\n                cursor              : default;\n                -moz-user-select    : none;\n                -khtml-user-select  : none;\n                user-select         : none;\n                background-position : 0 0;\n                background-repeat   : no-repeat;\n            }\n            .btn-statusbar-iconOver {\n                background-position : 0 -23px;\n            }\n\n            .btn-statusbar-iconDown {\n                background-position : 0 -46px;\n            }\n\n            .dark .btn-statusbar-icon {\n                background-position : -22px 0;\n            }\n\n            .dark .btn-statusbar-iconOver {\n                background-position : -22px -23px;\n            }\n\n            .dark .btn-statusbar-iconDown {\n                background-position : -22px -46px;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main\n              caption      = "text()"\n              background = "."\n              icon       = ".">\n                <div class="btn-statusbar-icon"> </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n</a:skin>'}),define("ext/statusbar/statusbar",["require","exports","module","core/ext","core/ide","ext/settings/settings","text!ext/statusbar/statusbar.xml","text!ext/statusbar/skin.xml","ext/menus/menus","ext/code/code","ext/editors/editors"],function(e,t,n){var r=e("core/ext"),i=e("core/ide"),s=e("ext/settings/settings"),o=e("text!ext/statusbar/statusbar.xml"),u=e("text!ext/statusbar/skin.xml"),a=e("ext/menus/menus"),f=e("ext/code/code"),l=e("ext/editors/editors");n.exports=r.register("ext/statusbar/statusbar",{name:"Status bar",dev:"Cloud9 IDE, Inc.",alone:!0,type:r.GENERAL,deps:[f],markup:o,skin:{id:"c9statusbar",data:u,"media-path":i.staticPrefix+"/ext/main/style/images/","icon-path":i.staticPrefix+"/ext/main/style/icons/"},expanded:!1,nodes:[],prefsItems:[],edgeDistance:3,offsetWidth:0,viewStatusBarMenuItem:null,hook:function(){var e=this;i.addEventListener("settings.load",function(t){t.model.queryNode("auto/statusbar/@show")||t.model.setQueryValue("auto/statusbar/@show","true"),apf.isTrue(t.model.queryValue("auto/statusbar/@show"))&&e.preinit()}),this.viewStatusBarMenuItem=new apf.item({test:"1",type:"check",checked:"[{require('ext/settings/settings').model}::auto/statusbar/@show]","onprop.checked":function(t){t.value&&e.preinit(),window.mdlStatusBar&&apf.xmldb.setAttribute(mdlStatusBar.data.selectSingleNode("//state"),"showStatusbar",t.value)}}),this.nodes.push(a.addItemByPath("View/Status Bar",this.viewStatusBarMenuItem,600))},preinit:function(){if(this.inited||this.$preinit)return;var e=this,t=function(){i.removeEventListener("init.ext/code/code",t),r.initExtension(e)};f.inited?t():i.addEventListener("init.ext/code/code",t)},init:function(){var e=this;i.addEventListener("theme.init",function(e){var t=e.theme.cssClass,n=apf.getStyleRule("."+t+" .ace_scroller","background-color");apf.importStylesheet([["."+t+" .bar-status","background-color",n+", 0.0)"],["."+t+" .bar-status:hover","background-color",n+", 0.95)"]])}),i.addEventListener("vim.changeMode",function(e){if(!window.lblInsertActive)return;e.mode==="insert"?lblInsertActive.show():lblInsertActive.hide()}),i.addEventListener("minimap.visibility",function(t){t.visibility==="shown"?e.offsetWidth=t.width:e.offsetWidth=0,e.setPosition()}),i.addEventListener("init.ext/editors/editors",function(t){i.addEventListener("tab.afterswitch",function(t){var n=t.nextPage.$editor;e.onAfterSwitch(n)})}),this.sbWidth=f.amlEditor.$editor.renderer.scrollBar.fullWidth,barIdeStatus.setAttribute("right",this.sbWidth+this.edgeDistance),barIdeStatus.setAttribute("bottom",this.edgeDistance),f.amlEditor.$ext.parentNode.appendChild(barIdeStatus.$ext);var t=mdlStatusBar.data.selectSingleNode("//state");apf.xmldb.setAttribute(t,"isCodeEditor",!!l.currentEditor&&l.currentEditor.path=="ext/code/code"),apf.xmldb.setAttribute(t,"showStatusbar",apf.isTrue(s.model.queryValue("auto/statusbar/@show"))),e.viewStatusBarMenuItem.setAttribute("disabled","{apf.isFalse([mdlStatusBar::state/@isCodeEditor])}"),l.currentEditor&&e.onAfterSwitch(l.currentEditor)},onAfterSwitch:function(e){var t=this;if(!e)return;apf.xmldb.setAttribute(mdlStatusBar.data.selectSingleNode("//state"),"isCodeEditor",e.path==="ext/code/code");if(e.path!="ext/code/code")return;e=e.amlEditor.$editor,t.updateStatus(e),e.$hasSBEvents||(t.$onChangeStatus=function(n){if(t._timerstatus)return;t._timerselection=setTimeout(function(){t.updateStatus(e),t._timerselection=null},80)},e.addEventListener("changeSelection",t.$onChangeStatus),e.addEventListener("changeStatus",t.$onChangeStatus),e.renderer.on("scrollbarVisibilityChanged",function(){t.setPosition(e)}),e.$hasSBEvents=!0)},updateStatus:function(e){if(!e.selection.isEmpty()){var t,n=e.getSelectionRange();if(this.$showRange)t="("+(n.end.row-n.start.row)+":"+(n.end.column-n.start.column)+")";else{var r=e.session.getTextRange(n);t="("+r.length+" Bytes)"}lblSelectionLength.setAttribute("caption",t)}else lblSelectionLength.setAttribute("caption","");var i=e.selection.lead;lblRowCol.setAttribute("caption",i.row+1+":"+(i.column+1));var s="";e.$vimModeHandler?s=e.$vimModeHandler.getStatusText():e.commands.recording&&(s="REC"),lblEditorStatus.setAttribute("caption",s)},toggleSelectionLength:function(){this.$showRange=!this.$showRange,this.updateStatus(f.amlEditor.$editor)},toggleStatusBar:function(){this.expanded?(this.expanded=!1,apf.setStyleClass(barIdeStatus.$ext,"",["expanded"]),apf.tween.single(hboxStatusBarSettings.$ext,{type:"width",anim:apf.tween.easeOutQuint,from:apf.isWebkit?50:52,to:1,steps:8,interval:5,onfinish:function(){hboxStatusBarSettings.hide()}})):(this.expanded=!0,apf.setStyleClass(barIdeStatus.$ext,"expanded"),hboxStatusBarSettings.show(),apf.tween.single(hboxStatusBarSettings.$ext,{type:"width",anim:apf.tween.easeOutQuint,from:1,to:apf.isWebkit?50:52,steps:8,interval:5})),s.save()},setPosition:function(e){var t=this,n=this.edgeDistance;e&&(n+=e.renderer.scrollBarH.getHeight()),this.$barMoveTimer&&clearTimeout(this.$barMoveTimer),this.$barMoveTimer=setTimeout(function(){typeof barIdeStatus!="undefined"&&(barIdeStatus.setAttribute("bottom",n),barIdeStatus.$ext.style.bottom=n+"px",barIdeStatus.setAttribute("right",t.sbWidth+t.edgeDistance+t.offsetWidth))},50)},destroy:function(){a.remove("View/Status Bar"),this.$destroy()}})}),define("text!ext/imgview/imgview.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:img id="imgEditor"\n      flex              = "1"\n      anchors           = "0 0 0 0"\n      visible           = "false"\n    />\n</a:application>'}),define("ext/imgview/imgview",["require","exports","module","core/ide","core/ext","text!ext/imgview/imgview.xml","ext/editors/editors"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("text!ext/imgview/imgview.xml"),o=e("ext/editors/editors");n.exports=i.register("ext/imgview/imgview",{name:"Image Viewer",dev:"Ajax.org",fileExtensions:["bmp","djv","djvu","gif","ico","jpg","jpeg","pbm","pgm","png","pnm","ppm","psd","tiff","xbm","xpm"],type:i.EDITOR,markup:s,deps:[o],nodes:[],setDocument:function(e,t){e.session=e.getNode().getAttribute("path"),imgEditor.setProperty("value",apf.escapeXML(e.session)),e.isInited||(e.isInited=!0,e.dispatchEvent("init"))},hook:function(){},init:function(e){var t=imgEditor;r.addEventListener("beforefilesave",function(e){var n=e.node&&e.node.getAttribute("path");if(!n)return;if(t.value==n)return!1}),t.show(),this.imgEditor=this.amlEditor=t}})}),define("text!ext/extmgr/extmgr.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "winExt"\n      title     = "Extension Manager"\n      icon      = ""\n      center    = "true"\n      resizable = "true"\n      buttons   = "close"\n      modal     = "false"\n      skin      = "bk-window"\n      width     = "750"\n      height    = "400"\n      kbclose   = "true"\n      draggable = "true"\n      onshow    = "tbModuleName.focus()">\n        <a:vbox anchors="0 0 0 0" edge="0 0 11 0">\n            <a:tab flex="1" id="tabExtMgr" skin="extensions_tab">\n                <a:page caption="User Extensions">\n                    <a:vbox anchors="10 10 10 10">\n                        <a:hbox align="center" edge="0 0 5 0" padding="5">\n                            <a:textbox id="tbModuleName" flex="1" \n                              realtime="true" />\n                            <a:button id="btnAdd" width="80"\n                              default = "1"\n                              caption = "Add"\n                              disabled = "{!tbModuleName.value.trim()}"\n                              onclick = "require(\'ext/extmgr/extmgr\').addExtension()"\n                            />\n                        </a:hbox>\n                        <a:datagrid id = "dgExtUser"\n                          flex       = "1"\n                          model      = "{require(\'core/ext\').model}"\n                          class      = "noscrollbar"\n                          scrollbar  = "sbShared 20 2 2"\n                          autoselect = "false"\n                          each       = "[plugin[@userext=\'1\']]"\n                          onafterselect = "require(\'ext/extmgr/extmgr\').updateEnableBtnState()"\n                          eachvalue  = "[@path]"\n                          empty-message = "No user extensions">\n                            <a:column width="20%" value="[@name]" caption="Name" />\n                            <a:column width="30%" value="{[@realPath] || [@path]}" caption="Path" />\n                            <a:column width="8%" value="[@type]" caption="Type" /> \n                            <a:column width="8%" value="[@dev]" caption="Developer" /> \n                            <a:column width="8%" value="[@hook]ms" caption="Hook" align="right" data-type="number" /> \n                            <a:column width="8%" value="{[@init] ? [@init] + \'ms\' : \'\'}" caption="Init" align="right" data-type="number" /> \n                            <a:column width="8%" value="[@total]ms" caption="Total" align="right" data-type="number" /> \n                            <a:column width="11%" value="{[@enabled] == 1 ? \'Enabled\' : \'Disabled\'}" caption="Enabled" />\n                        </a:datagrid>\n                        \n                    </a:vbox>\n                </a:page>\n                <a:page caption="Defaults">\n                    <a:vbox anchors="10 10 10 10">\n                        <a:datagrid id="dgExt"\n                          flex       = "1"\n                          model      = "{require(\'core/ext\').model}"\n                          class      = "noscrollbar"\n                          scrollbar  = "sbShared 20 2 2"\n                          autoselect = "false"\n                          each       = "[plugin[@userext=\'0\']]"\n                          onafterselect = "require(\'ext/extmgr/extmgr\').updateEnableBtnState()"\n                          eachvalue  = "[@path]">\n                            <a:column width="20%" value="[@name]" caption="Name" /> \n                            <a:column width="30%" value="[@path]" caption="Path" /> \n                            <a:column width="8%" value="[@type]" caption="Type" /> \n                            <a:column width="8%" value="[@dev]" caption="Developer" /> \n                            <a:column width="8%" value="[@hook]ms" caption="Hook" align="right" data-type="number" /> \n                            <a:column width="8%" value="{[@init] ? [@init] + \'ms\' : \'\'}" caption="Init" align="right" data-type="number" /> \n                            <a:column width="8%" value="[@total]ms" caption="Total" align="right" data-type="number" /> \n                            <a:column width="11%" value="{[@enabled] == 1 ? \'Enabled\' : \'Disabled\'}" caption="Enabled" /> \n                        </a:datagrid>\n                    </a:vbox>\n                </a:page>\n            </a:tab>\n            <a:hbox edge="11 10 0 0" pack="end" visible="{tabExtMgr.activepage == 0}">\n                <a:button\n                  skin     = "btn-default-css3"\n                  disabled = "{!dgExtUser.selected}"\n                  caption  = "Remove"\n                  margin   = "0 10 0 0"\n                  onclick  = "require(\'ext/extmgr/extmgr\').removeExtension()"\n                />\n                <a:button\n                  id       = "btnUserExtEnable"\n                  skin     = "btn-default-css3"\n                  disabled = "{!dgExtUser.selected}"\n                  caption  = "Disable"\n                  onclick  = "\n                    if (dgExtUser.selected.getAttribute(\'enabled\') == 1)\n                        require(\'ext/extmgr/extmgr\').disableExt(dgExtUser.value);\n                    else\n                        require(\'ext/extmgr/extmgr\').enableExt(dgExtUser.value);\n                  "\n                />\n                <a:button\n                  class   = "btn-green"\n                  caption = "Done"\n                  margin = "0 0 0 10"\n                  skin = "btn-default-css3"\n                  onclick = "winExt.close()"\n                />\n            </a:hbox>\n            <a:hbox edge="11 10 0 0" pack="end" visible="{tabExtMgr.activepage == 1}">\n                <a:label flex="1" style="padding:5px 0 0 20px;color:white"><?lm\n                    var time = 0;\n                    each([{require(\'core/ext\').model}::plugin[@userext=\'0\']]) {\n                        time += parseInt([@hook]);\n                        time += parseInt([@init]) || 0;\n                    }\n                    "Total Plugin Time: {time}ms, Total Load Time: {cloud9config.totalTime}ms";\n                ?></a:label>\n                <a:button\n                  id       = "btnDefaultExtEnable"\n                  skin     = "btn-default-css3"\n                  caption  = "Disable"\n                  disabled = "{!dgExt.selected}"\n                  onclick  = "\n                    if (dgExt.selected.getAttribute(\'enabled\') == 1)\n                        require(\'ext/extmgr/extmgr\').disableExt(dgExt.value);\n                    else\n                        require(\'ext/extmgr/extmgr\').enableExt(dgExt.value);\n                  "\n                />\n                <a:button\n                  caption = "Done"\n                  margin = "0 0 0 10"\n                  skin = "btn-default-css3"\n                  onclick = "winExt.close()"\n                />\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n</a:application>\n'}),define("ext/extmgr/extmgr",["require","exports","module","core/ide","core/ext","ext/menus/menus","core/util","text!ext/extmgr/extmgr.xml","ext/panels/panels","ext/settings/settings"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ext/menus/menus"),o=e("core/util"),u=e("text!ext/extmgr/extmgr.xml"),a=e("ext/panels/panels"),f=e("ext/settings/settings"),l=3e4,c=5e3;n.exports=i.register("ext/extmgr/extmgr",{name:"Extension Manager",dev:"Ajax.org",alone:!0,type:i.GENERAL,markup:u,desp:[a],requireFailed:!1,nodes:[],hook:function(){var e=this;s.addItemByPath("Tools/~",new apf.divider,1e6),s.addItemByPath("Tools/Extension Manager...",new apf.item({onclick:function(){e.show()}}),2e6),r.addEventListener("settings.load",function(t){e.loadedSettings=!1,r.addEventListener("extload",function(){var n=t.model.queryNodes("auto/extensions/plugin");for(var r=0;r<n.length;r++)e.loadExtension(n[r].getAttribute("realPath")||n[r].getAttribute("path"),n[r]);e.loadedSettings=!0})})},init:function(e){var t=this;r.addEventListener("settings.save",function(e){if(!t.loadedSettings)return;var n=e.model.data.selectSingleNode("auto/extensions");n&&(n.parentNode.removeChild(n),n=null),n=apf.createNodeFromXpath(e.model.data,"auto/extensions");var r=i.model.queryNodes("plugin[@userext='1']");for(var s=0;s<r.length;s++){var o=apf.xmldb.cleanNode(r[s].cloneNode(!1));n.appendChild(o)}}),setTimeout(function(){dgExt.reload()});var n=i.model.queryNodes("plugin");for(var s=0;s<n.length;s++)apf.xmldb.setAttribute(n[s],"total",parseInt(n[s].getAttribute("hook"),10)+parseInt(n[s].getAttribute("init")||0,10))},addExtension:function(){var e=this.canonicalizePath(tbModuleName.value);tbModuleName.setValue(e),this.requireFailed?o.alert("Error","Error","Please reload Cloud9 to add another extension."):tbModuleName.validate()?(this.$disableInput(),this.loadExtension(e)):this.$reportBadInput(e)},canonicalizePath:function(e){return e=e.trim(),!e.match("://")&&e.substr(-3)===".js"&&(e=e.substr(0,e.length-3)),e=e.replace(/(\.github.com)\/([^\/]+)\/?$/,"$1/$2/$2.js"),e=e.replace(/(github.com\/[^\/]+\/[^\/]+)\/blob\//,"$1/raw/"),e=e.replace(/(https?:..github.com)\/([^\/]+)\/([^\/]+)\/?$/,"https://raw.github.com/$2/$3/master/$3.js"),e},$reportBadInput:function(e,t){var n="Could not load extension '"+e+"'.";!e.match("://")&&!e.match("/")&&(n+="\nFor local extensions, specify a path like ext/extension/extensionmain."),t&&(n+="\n"+t),o.alert("Error","Validation Error",n)},loadExtension:function(t,n){var s=setTimeout(function(){if(n){t=n.getAttribute("path"),o.question("Extension Manager","Extension '"+t+"' failed to load. Check your browser's error log.","Would you like to remove it?",function(){winQuestion.hide(),i.model.removeXml(n),f.save(),u.$reportBadInput(t,"Please reload Cloud9.")},null,function(){winQuestion.hide(),u.$reportBadInput(t,"Please reload Cloud9.")});return}u.requireFailed=!0,u.$reportBadInput(t,"Check your browser's error log. Please reload Cloud9 to add another extension."),u.$enableInput()},t.match("://")?l:c),u=this;e([t],function(e){var n=i.model.queryNode("plugin[@path="+o.escapeXpathString(e.path)+"]");if(!n){u.requireFailed=!0,u.$reportBadInput(t,"Extension was loaded but not registered successfully."),clearTimeout(s),tbModuleName.enable(),btnAdd.enable();return}r.dispatchEvent("track_action",{type:"extmgr",path:t}),apf.xmldb.setAttribute(n,"userext","1"),apf.xmldb.setAttribute(n,"realPath",t),f.save(),u.$enableInput(!0),clearTimeout(s)})},$disableInput:function(){tbModuleName.disable(),btnAdd.disable()},$enableInput:function(e){if(typeof tbModuleName=="undefined")return;e&&tbModuleName.clear(),tbModuleName.enable(),btnAdd.enable()},removeExtension:function(){var t=dgExtUser.selected.getAttribute("path"),n=dgExtUser.selected.getAttribute("realPath")||t,r=e(n);if(i.unregister(r)){var s=i.model.queryNode("plugin[@path='"+t+"']");i.model.removeXml(s),f.save()}},enableExt:function(e){i.enableExt(e),tabExtMgr.activepage===0?btnUserExtEnable.setAttribute("caption","Disable"):btnDefaultExtEnable.setAttribute("caption","Disable")},disableExt:function(e){i.disableExt(e),tabExtMgr.activepage===0?btnUserExtEnable.setAttribute("caption","Enable"):btnDefaultExtEnable.setAttribute("caption","Enable")},updateEnableBtnState:function(){tabExtMgr.activepage===0?dgExtUser.selected&&dgExtUser.selected.getAttribute("enabled")==="1"?btnUserExtEnable.setAttribute("caption","Disable"):btnUserExtEnable.setAttribute("caption","Enable"):dgExt.selected.getAttribute("enabled")==="1"?btnDefaultExtEnable.setAttribute("caption","Disable"):btnDefaultExtEnable.setAttribute("caption","Enable")},show:function(){i.initExtension(this),winExt.show(),setTimeout(function(){winExt.focus(),tbModuleName.focus()},0)},destroy:function(){s.remove("Tools/~",1e6),s.remove("Tools/Extension Manager..."),this.$destroy()}})}),define("text!ext/runpanel/runpanel.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n\n    <a:window id="winRunPanel" \n      title    = "Run &amp; Debug" \n      model    = "{lstRunCfg.selected}"\n      buttons  = "close" \n      skin     = "fm-window"\n      flex     = "1" \n      optimize = "true"\n      minwidth = "200"\n      modal    = "false">\n        <a:bar skin="c9-header-bar" height="26" class="c9-header-divider">\n            <a:hbox>\n                <a:button id="btnAddRunConf"\n                  class  = "c9-header-plus c9-header-divider"\n                  onclick  = "require(\'ext/runpanel/runpanel\').addConfig()"\n                  skin     = "header-btn" />\n                <a:button \n                  class  = "c9-header-minus c9-header-divider"\n                  skin     = "header-btn"\n                  onclick  = "lstRunCfg.remove(lstRunCfg.selected)"\n                  disabled = "{!lstRunCfg.selected || !![{lstRunCfg.selected}::@curfile]}"/>\n                  \n                <!--a:divider skin="c9-divider-double" /-->\n                \n                <!--a:button\n                  id       = "btnRun"\n                  icon     = "{itmDebug.checked ? \'bug.png\' : \'run.png\'}"\n                  caption  = "{itmDebug.checked ? \'debug\' : \'run\'}"\n                  onclick  = "require(\'ext/runpanel/runpanel\').run(itmDebug.checked)"\n                  visible  = "{!stProcessRunning.active &amp;&amp; 1}"\n                  skin     = "c9-toolbarbutton"\n                  submenu  = "mnuRunCfg" />\n                <a:button\n                  icon     = "stop.png"\n                  caption  = "stop"\n                  skin     = "c9-toolbarbutton"\n                  onclick  = "require(\'ext/runpanel/runpanel\').stop()"\n                  visible  = "{stProcessRunning.active &amp;&amp; 1}" /-->\n            </a:hbox>\n        </a:bar>\n        \n        <a:button\n          skin="header-btn"\n          class="panel-settings"\n          submenu="mnuDebugSettings"\n          flex="1" />\n        \n        <a:menu id="mnuDebugSettings" style="margin-left:-63px">\n            <a:item\n              type    = "check"\n              checked = "[{require(\'ext/settings/settings\').model}::auto/configurations/@debug]"\n              caption = "Run in debug mode" />\n            <a:item\n              type    = "check"\n              onclick = "require(\'ext/runpanel/runpanel\').checkAutoHide()"\n              checked = "[{require(\'ext/settings/settings\').model}::auto/configurations/@autohide]"\n              caption = "Auto show/hide debug tools" />\n        </a:menu>\n      \n        <a:vbox anchors="0 0 0 0">\n            <a:list id="lstRunCfg" \n              model   = "{require(\'ext/runpanel/runpanel\').model}"\n              border  = "0"\n              each    = "[config]"\n              caption = "[@name]"\n              flex    = "1"\n              skin    = "tree"\n              class   = "openfile rundebug"\n              autoselect    = "false"\n              empty-message = "no run configurations"\n              onafterselect = "\n                require(\'ext/runpanel/runpanel\').saveSelection();\n              "\n              onafterchoose = "\n                require(\'ext/runpanel/runpanel\').run();\n              ">\n                <a:css match="[@curfile]" value="curfile" />\n            </a:list>\n              \n            <a:bar skin="basic" class="run-panel-info">\n                <a:vbox>\n                    <a:hbox>\n                        <a:label width="100" skin="black_label" >Name</a:label>\n                        <a:textbox id="txtRunCfgName" \n                          skin = "black_textbox"\n                          flex="1"\n                          realtime="true"\n                          value="[{lstRunCfg.selected}::@name]"\n                          disabled="{!lstRunCfg.selected || [{lstRunCfg.selected}::@curfile]}"/>\n                    </a:hbox>\n                    <a:hbox>\n                        <a:label width="100" skin="black_label">File Path</a:label>\n                        <a:textbox skin = "black_textbox" flex="1" value="[{lstRunCfg.selected}::@path]" disabled="{!lstRunCfg.selected or [{lstRunCfg.selected}::@curfile]}"/>\n                        <!--a:button icon="folder.png" disabled="true" tooltip="Browse ..."></a:button-->\n                        \n                        <!--a:divider span="2" skin="c9-divider-hor" /-->\n                        <a:model id="mdlRunnerSelector">\n                            <data>\n                                <element caption="Default" value="default" />\n                                <element caption="Node.js (Auto)" value="node auto" />\n                                <element caption="Node.js 0.10.x" value="node 0.10" />\n                                <element caption="Node.js 0.8.x" value="node 0.8" />\n                                <element caption="Node.js 0.6.x" value="node 0.6" />\n                                <element caption="Apache+PHP" value="apache" />\n                                <element caption="PHP CLI" value="php" />\n                                <element caption="Python" value="python" />\n                                <element caption="Ruby" value="ruby" />\n                            </data>\n                        </a:model>\n                    </a:hbox>\n                    <a:hbox>\n                      <a:label width="100" skin="black_label">Runtime</a:label>\n                      <a:dropdown id="ddRunnerSelector"\n                          model     = "mdlRunnerSelector"\n                          flex      = "1"\n                          disabled  = "{!lstRunCfg.selected}"\n                          value     = "[{lstRunCfg.selected}::@value]"\n                          default   = "default"\n                          each      = "[element]"\n                          caption   = "[@caption]"\n                          eachvalue = "[@value]" />\n                    </a:hbox>\n                    <a:hbox>\n                        <a:label width="100" skin="black_label">Cmd Line Args</a:label>\n                        <a:textbox id="txtCmdArgs" skin="black_textbox" flex="1" value="[{lstRunCfg.selected}::@args]" disabled="{!lstRunCfg.selected}"/>\n                    </a:hbox>\n                </a:vbox>\n            </a:bar>\n        </a:vbox>\n    </a:window>\n</a:application>'}),define("text!ext/runpanel/settings.xml",[],function(){return'\n<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:model id="mdlRunnerSelector2">\n        <data>\n            <element caption="Auto" value="auto" />\n            <element caption="Node.js 0.6.x" value="0.6.x" />\n            <element caption="Node.js 0.4.x" value="0.4.x" />\n            <!--element caption="Python" value="py" /-->\n        </data>\n    </a:model>\n    <a:hbox position="19000" edge="2 5 5 5" align="center" class="underlined">\n        <a:label flex="1">Node.js Runtime</a:label>        \n        <a:dropdown\n          model     = "mdlRunnerSelector2"\n          width     = "100"  \n          height    = "21"\n          disabled  = "{!lstRunCfg.selected}"\n          value     = "[{require(\'core/settings\').model}::auto/node-version/@version]"\n          default   = "auto"\n          each      = "[element]"\n          caption   = "[@caption]"\n          eachvalue = "[@value]" />\n    </a:hbox>\n</a:application>\n'}),define("text!ext/runpanel/style.css",[],function(){return".c9-debugInfo {\n    width: 223px;\n    height: 81px;    position: absolute;\n    top: 10px;\n    left: 345px;\n    z-index: 50000;\n    min-width: 0px;\n    min-height: 0px;\n    max-width: 9998px;\n    max-height: 9992px;\n    opacity: 0;\n    display: block;\n    line-height: 13px;\n    overflow: visible;\n}\n\n.debugInfoContainer {\n    padding: 5px 7px 1px 12px;\n}\n\n.debugInfoDesc {\n	color: #BDBDBD;\n	background: transparent;\n	line-height: 16px;\n    position: relative;\n    padding-left: 5px;\n}\n\n.debugInfoArrow {\n    left: 98px;\n}"}),define("ext/runpanel/runpanel",["require","exports","module","core/ide","core/ext","ext/noderunner/noderunner","ext/panels/panels","ext/settings/settings","ext/menus/menus","ext/tooltip/tooltip","ext/dockpanel/dockpanel","ext/save/save","text!ext/runpanel/runpanel.xml","text!ext/runpanel/settings.xml","text!ext/runpanel/style.css","ext/commands/commands"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ext/noderunner/noderunner"),o=e("ext/panels/panels"),u=e("ext/settings/settings"),a=e("ext/menus/menus"),f=e("ext/tooltip/tooltip"),l=e("ext/dockpanel/dockpanel"),c=e("ext/save/save"),h=e("text!ext/runpanel/runpanel.xml"),p=e("text!ext/runpanel/settings.xml"),d=e("text!ext/runpanel/style.css"),v=e("ext/commands/commands");n.exports=i.register("ext/runpanel/runpanel",{name:"Run Panel",dev:"Ajax.org",type:i.GENERAL,alone:!0,offline:!1,autodisable:i.ONLINE|i.LOCAL,markup:h,deps:[s],defaultWidth:270,excludedTypes:{xml:1,html:1,css:1,txt:1,png:1,jpg:1,gif:1},nodes:[],model:new apf.model,disableLut:{terminal:!0},hook:function(){function n(t){if(t&&t.$model&&t.$doc.getNode().getAttribute("ignore")!=="1"){var n=new RegExp("^"+r.davPrefix),i=t.$model.data.getAttribute("path").replace(n,"");e.model.setQueryValue("config[@curfile]/@path",i),e.model.setQueryValue("config[@curfile]/@name",i.split("/").pop()+" (active file)")}}if(r.readonly)return;var e=this;this.markupInsertionPoint=colLeft,o.register(this,{position:3e3,caption:"Run & Debug","class":"rundebug"}),v.addCommand({name:"run",hint:"run or debug an application (stops the app if running)",commands:{"[PATH]":{hint:"path pointing to an executable. Autocomplete with [TAB]"}},bindKey:{mac:"F5",win:"F5"},exec:function(){stProcessRunning.active?e.stop():e.run()}}),v.addCommand({name:"stop",hint:"stop a running node program on the server",commands:{"[PATH]":{hint:"path pointing to an executable. Autocomplete with [TAB]"}},bindKey:{mac:"Shift-F5",win:"Shift-F5"},exec:function(){e.stop()}}),this.nodes.push(this.mnuRunCfg=new apf.menu({id:"mnuRunCfg","onprop.visible":function(t){t.value&&(this.populated||(e.$populateMenu(),this.populated=!0),!self.tabEditors||tabEditors.length==0||e.excludedTypes[tabEditors.getPage().id.split(".").pop()]?e.mnuRunCfg.firstChild.disable():e.mnuRunCfg.firstChild.enable())}}),a.$insertByIndex(barTools,new apf.splitbutton({id:"btnRun",checked:"[{require('ext/settings/settings').model}::auto/configurations/@debug]",icon:"{this.checked ? 'run.png' : 'run.png'}",caption:"{apf.isTrue(this.checked) ? 'Debug' : 'Run'}",command:"run",visible:"{!stProcessRunning.active and 1}",disabled:"{!!!ide.onLine}",submenu:"mnuRunCfg"}),100),a.$insertByIndex(barTools,new apf.button({id:"btnStop",icon:"stop.png",caption:"stop",width:"52",tooltip:"Stop",skin:"c9-toolbarbutton-glossy",command:"stop",visible:"{stProcessRunning.active and 1}",disabled:"{!!!ide.onLine}"}),200),this.model=(new apf.model).load("<configurations />")),apf.setStyleClass(btnRun.$ext,"btnRun"),apf.setStyleClass(btnStop.$ext,"btnStop"),f.add(btnRun.$button1,{message:"Run &amp; Debug your <span>Node.js</span> applications, or run your <span>PHP</span>, <span>Python</span>, or <span>Ruby</span> code.            For more help, check out our guided tour in the Help menu.            Want your language supported? Tweet us             <a href='http://twitter.com/Cloud9IDE' target='_blank'>@Cloud9IDE</a>!",width:"203px",timeout:1e3,hideonclick:!0});var t=0;a.addItemToMenu(this.mnuRunCfg,new apf.item({caption:"no run history",disabled:!0}),t+=100),a.addItemToMenu(this.mnuRunCfg,new apf.divider,t+=100),a.addItemToMenu(this.mnuRunCfg,new apf.item({caption:"Configure....",onclick:function(){e.showRunConfigs(!1)}}),t+=100),a.addItemToMenu(this.mnuRunCfg,new apf.divider,t+=100),a.addItemToMenu(this.mnuRunCfg,new apf.item({caption:"Run in debug mode",type:"check",checked:"[{require('ext/settings/settings').model}::auto/configurations/@debug]"}),t+=100),a.addItemToMenu(this.mnuRunCfg,new apf.item({caption:"Auto show & hide debug tools",type:"check",onclick:function(){e.checkAutoHide()},checked:"[{require('ext/settings/settings').model}::auto/configurations/@autohide]"}),t+=100),u.addSettings("General",p),r.addEventListener("settings.load",function(t){u.setDefaults("auto/node-version",[["version","auto"]]),u.setDefaults("general",[["saveallbeforerun","false"]]),u.setDefaults("auto/configurations",[["debug","false"],["autohide","true"]]);var n=t.model.queryNode("auto/configurations");if(!n.selectSingleNode("config[@curfile]")){var r=!1;if(!t.model.queryNode("auto/configurations/config[@last='true']")){var i=t.model.queryNode("auto/configurations/config");i?apf.xmldb.setAttribute(i,"last","true"):r=!0}var s=apf.n("<config />").attr("name"," (active file)").attr("curfile","1");r&&s.attr("last","true"),n.insertBefore(s.node(),n.firstChild)}e.model.load(n)}),r.addEventListener("init.ext/editors/editors",function(t){n(tabEditors.getPage()),r.addEventListener("tab.afterswitch",function(e){n(e.nextPage)}),r.addEventListener("updatefile",function(e){n(tabEditors.getPage())}),r.addEventListener("tab.afterswitch",function(t){e.enable()}),r.addEventListener("closefile",function(t){tabEditors.getPages().length==1&&e.disable()})});var i=!1;stProcessRunning.addEventListener("deactivate",function(){if(!e.autoHidePanel())return;var t="ext/debugger/debugger";l.hideSection(t,!1),i=!1}),r.addEventListener("dbg.break",function(){if(!e.shouldRunInDebugMode()||!e.autoHidePanel()||i)return;i=!0;var t="ext/debugger/debugger";l.showSection(t,!1);var n=l.getButtons(t,"pgDebugNav")[0].uniqueId;l.layout.isExpanded(n)<0&&l.layout.showMenu(n)}),r.addEventListener("init.ext/debugger/debugger",function(){tabDebug.getPages().concat(tabDebugButtons.getPages()).each(function(t){t.addEventListener("afterclose",function(t){e.autoHidePanel()&&!stProcessRunning.active&&(this.$dockbutton.$dockData.hidden=1)})})})},saveSelection:function(){var e=this.model.data.selectSingleNode('config[@last="true"]');e&&e.removeAttribute("last"),lstRunCfg.selected?(lstRunCfg.selected.setAttribute("last","true"),u.save()):lstRunCfg.select(lstRunCfg.$model.queryNode("//config"))},checkAutoHide:function(){},init:function(e){if(r.readonly)return;var t=this;apf.importCssString(d),this.panel=winRunPanel,this.nodes.push(winRunPanel),lstRunCfg.addEventListener("click",function(e){if(e.htmlEvent.target.tagName=="SPAN"){var t=apf.xmldb.findXmlNode(e.htmlEvent.target.parentNode.parentNode);this.remove(t)}}),lstRunCfg.addEventListener("afterremove",function(e){t.mnuRunCfg.childNodes.each(function(n){t.mnuRunCfg.populated&&n.node==e.args[0].xmlNode&&n.destroy(!0,!0)})}),setTimeout(function(){lstRunCfg.$model&&lstRunCfg.select(lstRunCfg.$model.queryNode("config[@last='true']"))})},duplicate:function(){var e=lstRunCfg.selected;if(!e)return;var t=e.cloneNode(!0);apf.b(e).after(t),lstRunCfg.select(t),winRunPanel.show()},addConfig:function(){var e,t,n=r.getActivePageModel(),i="";n?(e=n.getAttribute("path").slice(r.davPrefix.length+1),t=n.getAttribute("name").replace(/\.(js|py)$/,function(e,t){return i=t,""})):i=t=e="";var s=apf.n("<config />").attr("path",e).attr("name",t).attr("extension",i).attr("args","").node(),o=this.model.appendXml(s);this.$addMenuItem(o),lstRunCfg.select(o)},showRunConfigs:function(){o.activate(this)},autoHidePanel:function(){return apf.isTrue(u.model.queryValue("auto/configurations/@autohide"))},shouldRunInDebugMode:function(){return apf.isTrue(u.model.queryValue("auto/configurations/@debug"))},run:function(e){var t;window.winRunPanel&&winRunPanel.visible?t=lstRunCfg.selected:t=this.model.queryNode("node()[@last='true']")||this.model.queryNode("config[@curfile]");if(t.getAttribute("curfile")&&this.excludedTypes[t.getAttribute("path").split(".").pop()]){this.showRunConfigs(!1);return}this.runConfig(t,this.shouldRunInDebugMode()),r.dispatchEvent("track_action",{type:e?"debug":"run"})},$populateMenu:function(){var e=this.mnuRunCfg,t=e.firstChild;while(t&&t.localName!=="divider")e.removeChild(t),t=e.firstChild;var n=t,r=this.model.queryNodes("config");if(!r.length)e.insertBefore(new apf.item({disabled:!0,caption:"No run history"}),n);else for(var i=0,s=r.length;i<s;i++)this.$addMenuItem(r[i],n)},$addMenuItem:function(e,t){var n=this;if(this.mnuRunCfg.populated)return;t||(t=this.mnuRunCfg.getElementsByTagNameNS("","divider")[0]),this.mnuRunCfg.insertBefore(new apf.item({caption:"[{this.node}::@name]",node:e,type:"radio",selected:"[{this.node}::@last]",onclick:function(){n.runConfig(this.node,n.shouldRunInDebugMode()),self.lstRunCfg&&lstRunCfg.select(this.node)}}),t)},runConfig:function(e,t){var n=u.model,i=apf.isTrue(n.queryValue("general/@saveallbeforerun"));i&&c.saveall(),t===undefined&&(t=e.parentNode.getAttribute("debug")=="1");var o=apf.queryNode(e,"../node()[@last]");o&&apf.xmldb.removeAttribute(o,"last"),apf.xmldb.setAttribute(e,"last","true"),self.txtCmdArgs&&txtCmdArgs.blur(),r.dispatchEvent("beforeRunning");var a=e.getAttribute("args");s.run(e.getAttribute("path"),a?a.split(" "):[],t,e.getAttribute("value"))},stop:function(){s.stop()},enable:function(){var e=tabEditors.getPage(),t=e&&e.$model&&e.$model.data&&e.$model.data.getAttribute("contenttype")||"";if(this.disableLut[t])return this.disable();this.$enable()},destroy:function(){v.removeCommandsByName(["run","stop"]),o.unregister(this),this.$destroy()}})}),define("ext/dbg-node/service",["require","exports","module","v8debug/util","core/ide"],function(e,t,n){"use strict";var r=e("v8debug/util"),i=r.EventEmitter,s=e("core/ide"),o=n.exports=function(e,t){this.$pid=e,this.$runner=t,this.$onMessageHandler=this.$onMessage.bind(this)};(function(){r.implement(this,i),this.connect=function(){this.state!="connected"&&s.addEventListener("socketMessage",this.$onMessageHandler),this.state="connected"},this.disconnect=function(){s.removeEventListener("message",this.$onMessageHandler),this.state=null},this.$onMessage=function(e){var t=e.message;t.type=="node-debug"&&t.pid==this.$pid&&this.emit("debugger_command_0",{data:t.body})},this.debuggerCommand=function(e,t){s.send({command:"debugNode",pid:this.$pid,runner:this.$runner,body:JSON.parse(t)})}}).call(o.prototype)}),define("ext/debugger/debug_handler",["require","exports","module"],function(e,t,n){var r=n.exports=function(){this.state=null};(function(){this.attach=function(e,t){},this.detach=function(e){},this.backtrace=function(e){},this.loadSources=function(e){},this.loadSource=function(e,t){},this.loadObject=function(e,t){},this.loadFrame=function(e,t){},this.resume=function(e,t,n){},this.suspend=function(){},this.evaluate=function(e,t,n,r,i){},this.changeLive=function(e,t,n,r){},this.lookup=function(e,t,n){},this.updateBreakpoints=function(){var e=this.$getUIBreakpoints()},this.$getUIBreakpoints=function(e){return mdlDbgBreakpoints.queryNodes("breakpoint").map(function(e){return{path:e.getAttribute("path")||"",line:parseInt(e.getAttribute("line"),10),column:parseInt(e.getAttribute("column"),10)||0,enabled:e.getAttribute("enabled")=="true",condition:e.getAttribute("condition")||"",ignoreCount:e.getAttribute("ignoreCount")||0}})}}).call(r.prototype)}),define("ext/dbg-node/dbg-node",["require","exports","module","v8debug/V8Debugger","core/ide","core/util","ace/lib/oop","ext/dbg-node/service","ext/debugger/debug_handler","ext/debugger/debugger"],function(e,t,n){var r=e("v8debug/V8Debugger"),i=e("core/ide"),s=e("core/util"),o=e("ace/lib/oop"),u=e("ext/dbg-node/service"),a=e("ext/debugger/debug_handler"),f=e("ext/debugger/debugger"),l=n.exports=function(){this.stripPrefix=i.workspaceDir||""};o.inherits(l,a),function(){function t(e){return e.func.name||e.func.inferredName||e.line+e.position}this.$startDebugging=function(){var e=this.$v8dbg=new r(0,this.$v8ds);this.$v8breakpoints={};var t=this.onChangeRunning.bind(this),n=this.onBreak.bind(this),i=this.onException.bind(this),s=this.onAfterCompile.bind(this);e.addEventListener("changeRunning",t),e.addEventListener("break",n),e.addEventListener("exception",i),e.addEventListener("afterCompile",s),this.onChangeFrame(null),this.removeListeners=function(){e.removeEventListener("changeRunning",t),e.removeEventListener("break",n),e.removeEventListener("exception",i),e.removeEventListener("afterCompile",s)}},this.$syncAfterAttach=function(){var e=this;e.loadSources(function(){e.backtrace(function(){e.updateBreakpoints(function(){e.$v8dbg.listbreakpoints(function(t){e.$handleDebugBreak(t.breakpoints,function(){e.activeFrame&&(i.dispatchEvent("dbg.break",{frame:e.activeFrame}),e.onChangeFrame(e.activeFrame)),e.onChangeRunning()})})})},!0)})},this.attach=function(e,t){this.$v8ds&&this.$v8ds.disconnect(),this.pid=e,this.$v8ds=new u(e,t),this.$v8ds.connect(),this.$startDebugging(),this.$syncAfterAttach()},this.detach=function(){this.$v8ds.disconnect(),this.$v8ds=null,this.$v8dbg=null,this.onChangeRunning(),this.removeListeners()},this.onChangeRunning=function(e){this.$v8dbg?this.state=this.$v8dbg.isRunning()?"running":"stopped":this.state=null,i.dispatchEvent("dbg.changeState",{state:this.state}),this.state!="stopped"&&this.onChangeFrame(null)},this.onBreak=function(e){var t=e.data&&e.data.breakpoints;if(t&&t.length===1&&t[0]===1)return;var n=this;this.backtrace(function(){i.dispatchEvent("dbg.break",{frame:n.activeFrame})})},this.onException=function(e){var t=this;this.backtrace(function(){i.dispatchEvent("dbg.exception",{frame:t.activeFrame,exception:e.exception})})},this.onAfterCompile=function(e){var t=apf.getXml(this.$getScriptXml(e.data.script)),n=t.getAttribute("scriptid"),r=mdlDbgSources.queryNode("//file[@scriptid='"+n+"']");r&&mdlDbgSources.removeXml(r),mdlDbgSources.appendXml(t)},this.onChangeFrame=function(e,t){this.activeFrame=e,t||i.dispatchEvent("dbg.changeFrame",{data:e})},this.$handleDebugBreak=function(e,t){var n=this.activeFrame;if(!n||!this.$v8dbg)return t();var r=e[0];if(!r)return this.resume(null,null,t);if(r.number!==1)return t();var i=mdlDbgBreakpoints.queryNode("//breakpoint[@line='"+n.getAttribute("line")+"' and @path='"+n.getAttribute("scriptPath")+"']")||mdlDbgBreakpoints.queryNode("//breakpoint[@line='"+r.line+"' and @path='"+this.getPathFromScriptId(r.script_id)+"']");if(i&&i.getAttribute("enabled")=="true")return t();this.$v8dbg.clearbreakpoint(1,function(){}),this.onChangeFrame(null),this.resume(null,null,t)};var e={object:8,"function":4};this.$strip=function(e){return e.lastIndexOf(this.stripPrefix,0)===0?e.slice(this.stripPrefix.length+1):e},this.$getScriptXml=function(e){return s.toXmlTag("file",{scriptid:e.id,scriptname:e.name||"anonymous",path:this.getLocalScriptPath(e),text:this.$strip(e.text||"anonymous"),lineoffset:e.lineOffset,debug:"true"})},this.$isSameFrameset=function(e,n){if(e.length!=n.length)return!1;var r=e[0],i=n[0];return r.getAttribute("scriptid")!=i.func.scriptId?!1:r.getAttribute("id")!=t(i)?!1:!0},this.getScriptIdFromPath=function(e){var t=mdlDbgSources.queryNode("//file[@path="+s.escapeXpathString(e)+"]");if(!t)return;return t.getAttribute("scriptid")},this.getScriptnameFromPath=function(e){if(!e)return;var t=mdlDbgSources.queryNode("//file[@path="+s.escapeXpathString(e)+"]");return t?t.getAttribute("scriptname"):e.substring(0,i.davPrefix.length)!=i.davPrefix?e:(e=e.substr(i.davPrefix.length),i.workspaceDir.slice(1,3)==":\\"&&(e=e.replace(/\//g,"\\")),i.workspaceDir+e)},this.getPathFromScriptId=function(e){var t=mdlDbgSources.queryNode("//file[@scriptid='"+e+"']");if(!t)return;return t.getAttribute("path")},this.getLocalScriptPath=function(e){var t=e.name||"-anonymous-"+e.id;return t.substring(0,i.workspaceDir.length)==i.workspaceDir&&(t=i.davPrefix+t.substr(i.workspaceDir.length)),t.replace(/\\/g,"/")},this.$valueString=function(e){switch(e.type){case"undefined":case"null":return e.type;case"boolean":case"number":case"string":return e.value+"";case"object":return"["+e.className+"]";case"function":return"function "+e.inferredName+"()";default:return e.type}},this.$frameToString=function(e){var t=[],n=e.arguments,r=[];t.push(e.func.name||e.func.inferredName||"anonymous","(");for(var i=0,s=n.length;i<s;i++){var o=n[i];if(!o.name)continue;r.push(o.name)}return t.push(r.join(", "),")"),t.join("")},this.$serializeVariable=function(t,n){return s.toXmlTag("item",{name:n||t.name,value:this.$valueString(t.value),type:t.value.type,ref:typeof t.value.ref=="number"?t.value.ref:t.value.handle,children:e[t.value.type]?"true":"false"})},this.$updateFrame=function(e,t){e.setAttribute("line",t.line),e.setAttribute("column",t.column);var n,r,i,s=e.selectNodes("vars/item"),o=t.arguments;for(n=1,r=0,i=o.length;r<i;r++)o[r].name&&this.$updateVar(s[n++],o[r]);o=t.locals;for(r=0,i=t.locals.length;r<i;r++)o[r].name!==".arguments"&&this.$updateVar(s[n++],o[r])},this.$updateVar=function(t,n){t.setAttribute("value",this.$valueString(n.value)),t.setAttribute("type",n.value.type),t.setAttribute("ref",n.value.ref),apf.xmldb.setAttribute(t,"children",e[n.value.type]?"true":"false")},this.$buildFrame=function(e,n,r){var i=n(e.script.ref);r.push(s.toXmlTag("frame",{index:e.index,name:apf.escapeXML(this.$frameToString(e)),column:e.column,id:t(e),ref:e.ref,line:e.line,script:this.$strip(i.name||"anonymous"),scriptPath:this.getLocalScriptPath(i),scriptid:e.func.scriptId},!0)),r.push("<vars>");var o={name:"this",value:e.receiver};r.push(this.$serializeVariable(o));var u,a;for(u=0,a=e.arguments.length;u<a;u++)e.arguments[u].name&&r.push(this.$serializeVariable(e.arguments[u]));for(u=0,a=e.locals.length;u<a;u++)e.locals[u].name!==".arguments"&&r.push(this.$serializeVariable(e.locals[u]));r.push("<globals />"),r.push("</vars>"),r.push("<scopes>");var f=e.scopes;for(u=0,a=f.length;u<a;u++){var l=f[u];r.push(s.toXmlTag("scope",{index:l.index,type:l.type}))}r.push("</scopes>"),r.push("</frame>")},this.loadSources=function(e){var t=mdlDbgSources,n=this;this.$v8dbg.scripts(4,null,!1,function(r){var i=[];for(var s=0,o=r.length;s<o;s++){var u=r[s];if(u.name&&u.name.indexOf("chrome-extension://")===0)continue;i.push(n.$getScriptXml(u))}t.load("<sources>"+i.join("")+"</sources>"),e()})},this.backtrace=function(e,t){var n=this,r=mdlDbgStack;this.$v8dbg.backtrace(null,null,null,!0,function(i,s){function o(e){for(var t=0;t<s.length;t++)if(s[t].handle==e)return s[t];return{}}var u,a,f=i.frames,l=r.queryNodes("frame");if(l.length&&n.$isSameFrameset(l,f))for(u=0,a=f.length;u<a;u++)n.$updateFrame(l[u],f[u]);else{var c=[];if(f)for(u=0,a=f.length;u<a;u++)n.$buildFrame(f[u],o,c);r.load("<frames>"+c.join("")+"</frames>")}var h=r.data.firstChild;h&&h.setAttribute("istop",!0),n.onChangeFrame(h,t),e()})},this.loadSource=function(e,t){var n=e.getAttribute("scriptid");this.$v8dbg.scripts(4,[n],!0,function(e){if(!e.length)return;var n=e[0];t(n.source)})},this.loadObject=function(e,t){var n=e.getAttribute("ref"),r=this;this.$v8dbg.lookup([n],!1,function(e){var i=[],s=e[n].properties||[];for(var o=0,u=s.length;o<u;o++)i.push(s[o].ref);r.$v8dbg.lookup(i,!1,function(e){var n=["<item>"];for(var i=0,o=s.length;i<o;i++)s[i].value=e[s[i].ref],n.push(r.$serializeVariable(s[i]));n.push("</item>"),t(n.join(""))})})},this.loadFrame=function(e,t){function a(e){var n=e.object.properties;for(var r=0,a=n.length;r<a;r++)u.push(i.$serializeVariable(n[r]));s+=1,s==o&&(u.push("</vars>"),t(u.join("")))}var n=e.getElementsByTagName("scope"),r=parseInt(e.getAttribute("index"),10),i=this,s=0,o=0,u=["<vars>"];for(var f=0,l=n.length;f<l;f++){var c=n[f],h=parseInt(c.getAttribute("type"),10);if(h>1){o+=1;var p=parseInt(c.getAttribute("index"),10);this.$v8dbg.scope(p,r,!0,a)}}if(o===0)return t("<vars />")},this.resume=function(e,t,n){this.$v8dbg.continueScript(e,t,n)},this.suspend=function(){this.$v8dbg.suspend()},this.lookup=function(e,t,n){this.$v8dbg.lookup(e,t,n)},this.changeLive=function(e,t,n,r){var i="(function (exports, require, module, __filename, __dirname) { ",s="\n});";t=i+t+s;var o=this;this.$v8dbg.changelive(e,t,n,function(e){r(e),o.backtrace(function(){})})},this.evaluate=function(e,t,n,r,i){this.$v8dbg.evaluate(e,t,n,r,function(t,n,r){var o=[],u=e.trim();if(r)o.push(s.toXmlTag("item",{type:".error",name:u,value:r.message}));else{var a={name:u,value:t.text,type:t.type,ref:t.handle};t.constructorFunction&&(a.contructor=t.constructorFunction.ref),t.prototypeObject&&(a.prototype=t.prototypeObject.ref),t.properties&&t.properties.length&&(a.children="true"),o.push(s.toXmlTag("item",a))}i(apf.getXml(o.join("")),t,n,r)})},this.updateBreakpoints=function(e){function o(n){var i=n.script_name+"|"+n.line+":"+(n.column||0),s=t.$v8breakpoints[i];s&&(!s.id||s.id<n.breakpoint)&&(s.id=n.breakpoint),r--,r||e&&e()}function u(e){r++,t.$v8dbg.setbreakpoint("script",e.scriptname,e.line,e.column,e.enabled,e.condition,e.ignoreCount,o)}function a(e){e.id&&t.$v8dbg.clearbreakpoint(e.id,function(){})}function f(e,t){return e.$location==t.$location&&e.condition==t.condition&&e.ignoreCount==t.ignoreCount}var t=this,n=this.$getUIBreakpoints(),r=0,i=this.$v8breakpoints;this.$v8breakpoints={},n.forEach(function(e){e.scriptname=t.getScriptnameFromPath(e.path);if(!e.scriptname)return;e.$location=e.scriptname+"|"+e.line+":"+e.column;var n=i[e.$location];if(!e.enabled)return;delete i[e.$location],n&&f(n,e)?t.$v8breakpoints[e.$location]=n:(t.$v8breakpoints[e.$location]=e,u(e))});for(var s in i)a(i[s]);r||e&&e()}}.call(l.prototype),l.handlesRunner=function(e){return e==="node"},f.registerDebugHandler(l)}),define("text!ext/consolehints/consolehints.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <div id="barConsoleHints" class="barConsoleHints">\n        <div id="consoleHintsContent" class="consoleHintsContent"/>\n    </div>\n</a:application>'}),define("text!ext/consolehints/consolehints.css",[],function(){return'.barConsoleHints {\n    z-index: 10000;\n    padding: 4px 4px 0 4px;\n    position: absolute;\n    display: none;\n\n    bottom: 30px;\n    border-bottom-left-radius: 0px;\n    border-bottom-right-radius: 0px;\n    border-top-left-radius: 8px;\n    border-top-right-radius: 8px;\n    border: 1px solid #000101;\n    border-width: 1px 1px 0 1px;\n\n    background-color: #000000;\n    background-image: url("{ide.staticPrefix}/ext/main/style/images/noise_pattern_transparent30.png"),\n        linear-gradient(bottom, rgb(31,31,31) 0%, rgb(45,47,51) 100%);\n    background-image: url("{ide.staticPrefix}/ext/main/style/images/noise_pattern_transparent30.png"),\n        -o-linear-gradient(bottom, rgb(31,31,31) 0%, rgb(45,47,51) 100%);\n    background-image: url("{ide.staticPrefix}/ext/main/style/images/noise_pattern_transparent30.png"),\n        -moz-linear-gradient(bottom, rgb(31,31,31) 0%, rgb(45,47,51) 100%);\n    background-image: url("{ide.staticPrefix}/ext/main/style/images/noise_pattern_transparent30.png"),\n        -webkit-linear-gradient(bottom, rgb(31,31,31) 0%, rgb(45,47,51) 100%);\n    background-image: url("{ide.staticPrefix}/ext/main/style/images/noise_pattern_transparent30.png"),\n        -ms-linear-gradient(bottom, rgb(31,31,31) 0%, rgb(45,47,51) 100%);\n    background-repeat: repeat;\n    max-height: 300px;\n    overflow: auto;\n    \n    -webkit-box-shadow: inset 0px 1px 0px 0px #3e4041;\n    -moz-box-shadow: inset 0px 1px 0px 0px #3e4041;\n    box-shadow: inset 0px 1px 0px 0px #3e4041; \n}\n\n.barConsoleHints a {\n    position: relative;\n    text-decoration: none;\n    font-weight: bold;\n    color: #ffffff;\n    padding: 3px 5px;\n    margin: 0 0 2px 0;\n    display: block;\n}\n\n.barConsoleHints a.selected {\n    padding: 2px 4px;\n    border-radius: 4px;\n    background-color: #f0f0f0;\n    color: #2ca701;\n    border: 1px solid #505051;\n    border-bottom: 1px solid #1d1e1f;\n}\n\n.barConsoleHints a span {\n    color: #b3b3b3;\n    font-style: italic;\n    margin-left: 4px;\n    font-size: 11px;\n    font-weight: normal;\n}\n\n.barConsoleHints a span.hints_hotkey {\n    color: #666;\n    font-weight: bold;\n    float: right;\n    margin-left : 20px;\n    margin-top : 0px;\n}\n\n.barConsoleHints a.selected span {\n    color: #90908b\n}\n'}),define("ext/consolehints/consolehints",["require","exports","module","core/ide","core/ext","core/util","text!ext/consolehints/consolehints.xml","text!ext/consolehints/consolehints.css","ext/console/console","ext/commands/commands"],function(e,t,n){"use strict";var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("text!ext/consolehints/consolehints.xml"),u=e("text!ext/consolehints/consolehints.css"),a=e("ext/console/console"),f=e("ext/commands/commands"),l,c,h,p,d,v=/(\w+)$/,m=function(e,t){function i(e){var i={name:e},s=i.name.toLowerCase(),o=0,u=0,a=0;if(i.name.indexOf(t)===0){i.priority=-2,r.push(i);return}for(var f=0,l=n.length;f<l;f++){u=s.indexOf(n[f],a);if(u===-1)break;o+=u-a,a=u+1}u!=-1&&(i.priority=o,r.push(i))}if(!t)return e.sort();var n=t.toLowerCase(),r=[],s=["priority","name"];return e.forEach(i),r.sort(function(e,t){for(var n=0;n<s.length;n++){var r=s[n];if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0}),r.map(function(e){return e.name})},g=function(e){clearTimeout(d);var t=e.target||e.srcElement;while(t&&t.nodeType===3&&t.tagName!=="A"&&t!==c)t=t.parentNode;if(t.tagName!=="A")return;var n=this;d=setTimeout(function(){n.select(t)},5)},y=function(e){var t=apf.escapeXML([e.base,e.cmdName,e.cursorPos,!!e.cmd].join(","));if(!e.cmd)return'<a href="#" data-hint="'+t+'">'+apf.escapeXML(e.cmdName)+"</a>";var n="",r=e.cmd.hotkey;!r&&e.cmd.bindKey&&(typeof e.cmd.bindKey=="string"?r=e.cmd.bindKey:r=e.cmd.bindKey[f.platform]);if(r){var i=apf.isMac?apf.hotkeys.toMacNotation(r):r;n='<span class="hints_hotkey">'+i+"</span>"}var s="";return e.showHelperText&&(s="<span>"+apf.escapeXML(e.cmd.hint||"")+"</span>"),s+=n,'<a href="#" data-hint="'+t+'">'+apf.escapeXML(e.cmdName)+s+"</a>"};n.exports=i.register("ext/consolehints/consolehints",{name:"ConsoleHints",dev:"Ajax.org",type:i.GENERAL,alone:!0,markup:o,css:s.replaceStaticPrefix(u),deps:[a],hidden:!0,nodes:[],autoOpen:!0,lastCliValue:"",hook:function(){var e=this;r.addEventListener("init.ext/console/console",function(t){i.initExtension(e);var n=t.ext.hideInput;t.ext.hideInput=function(){e.hide(),n.apply(a,arguments)}})},init:function(){var e=this,t=function(){apf.importCssString(e.css),l=document.getElementById("barConsoleHints"),c=document.getElementById("consoleHintsContent"),apf.addListener(l,"mousemove",g.bind(e)),apf.addListener(l,"click",e.click.bind(e)),a.onMessageMethods.commandhints=function(e){var t=e.body;for(var n in t)f.commands[n]=t[n]},a.onMessageMethods["internal-autocomplete"]=function(t){var n=t.body;e.show(txtConsoleInput,"",n.matches,txtConsoleInput.getValue().length-1)},setTimeout(function(){r.send({command:"commandhints",cwd:a.getCwd()})},1e3),txtConsoleInput.addEventListener("focus",function(e){txtConsoleInput.getValue()==c.text&&c.hasChildNodes()&&(l.style.display="block",l.visible=!0)}),txtConsoleInput.addEventListener("blur",function(t){e.hide()}),txtConsoleInput.ace.container.addEventListener("input",function(t){var n=function(t){c.text=txtConsoleInput.getValue(),t.length&&t[0]!=="[PATH]"?e.show(txtConsoleInput,"",t,c.text.length-1):(c.innerHTML="",e.hide())},r=txtConsoleInput.getValue();if(e.lastCliValue===r)return;e.lastCliValue=r,r?e.getCmdCompletion(r,n):e.hide()},!1);var t={up:"selectUp",tab:"onTabKey",down:"selectDown",esc:"hide","return":"onEnterKey"};txtConsoleInput.ace.keyBinding.addKeyboardHandler({handleKeyboard:function(n,r,i){if(r==-1||!t[i]||l.style.display==="none")return;if(e[t[i]].call(e)!==!1)return{command:"null"}}})};a&&a.onMessageMethods?t():r.addEventListener("init.ext/console/console",t)},show:function(e,t,n,r){if(txtConsolePrompt.visible)return;p&&p.stop&&p.stop();var i=!0;txtConsoleInput.getValue().split(" ").length>1&&(i=!1);var s=n.map(function(e){var n=t?t+e.substr(1):e;return y({base:t,cmdName:n,cursorPos:r,cmd:f.commands[n],showHelperText:i})}).join("");c.innerHTML=s,h=-1,apf.getStyle(l,"display")==="none"&&(l.style.display="block",l.visible=!0),l.style.left=parseInt(r+5,10)+"px"},hide:function(){return l.style.display="none",l.visible=!1,h=-1,!0},click:function(e){e.preventDefault();var t=e.target;this.setSelection(t)},setSelection:function(e){e.parentNode!=c&&e!=c&&(e=e.parentNode);var t=e.getAttribute("data-hint").split(","),n=t[1],r=t[3]==="true";r&&(n+=" ");var i=txtConsoleInput.getValue(),s=i.search(v);s!==-1?i=i.replace(v,n):i+=n,txtConsoleInput.setValue(i.replace("/?","")),txtConsoleInput.focus();var o=txtConsoleInput.querySelector("input");o&&(o.selectionStart=o.selectionEnd=s+n.length),this.hide()},getCmdCompletion:function(e,t,n){var r=e.match(/(\w+)\s+(.*)$/);if(r){var i=f.commands[r[1]];if(!i)return t([]);var s=i.commands,o;s&&s["[PATH]"]?o=["[PATH]"]:s?o=m(Object.keys(s),r[2]):o=[],t(o,r[1],r[2])}else(n||t)(m(Object.keys(f.commands),e))},onTabKey:function(){this.hide();var e=txtConsoleInput.getValue();if(!e)return;return this.getCmdCompletion(e,function(t,n,i){t.length&&(t[0]==="[PATH]"?r.send({command:"internal-autocomplete",argv:[n,i],cwd:a.getCwd()}):e=e.replace(v,t[0]))},function(t){t.length&&(e=t[0])}),txtConsoleInput.setValue(e),setTimeout(function(){txtConsoleInput.focus()},50),!0},onEnterKey:function(){var e=!1,t=c.childNodes;for(var n=0,r=t.length;n<r;++n)if(t[n].className==="selected"){this.setSelection(t[n]),e=!0;break}return e||this.hide(),e},selectUp:function(){var e=h-1;return e<0&&(e=c.childNodes.length-1),this.select(e),!0},selectDown:function(){var e=h+1;return e>=c.childNodes.length&&(e=-1),this.select(e),!0},select:function(e){clearTimeout(d);var t=c.childNodes;typeof e=="number"&&(e=t[e]),h=-1;for(var n=0,r=t.length;n<r;++n){if(t[n]===e){h=n;continue}t[n].className=""}if(e){e.className="selected";var i=e.offsetTop+e.offsetHeight-l.clientHeight;l.scrollTop>e.offsetTop?l.scrollTop=e.offsetTop:i>l.scrollTop&&(l.scrollTop=i)}},visible:function(){return l&&!!l.visible},selected:function(){return(h||h>=0)&&c.childNodes.length>0?c.childNodes[h]:!1}})}),define("text!ext/tabbehaviors/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox class="underlined" label="Reveal Active File in Project Tree" value="[general/@revealfile]" skin="checkbox_grey" position="4000" />\n</a:application>'}),define("ext/tabbehaviors/tabbehaviors",["require","exports","module","core/ide","core/ext","core/util","ext/panels/panels","ext/menus/menus","ext/openfiles/openfiles","ext/commands/commands","ext/editors/editors","core/settings","ext/settings/settings","text!ext/tabbehaviors/settings.xml","ext/tree/tree"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("ext/panels/panels"),u=e("ext/menus/menus"),a=e("ext/openfiles/openfiles"),f=e("ext/commands/commands"),l=e("ext/editors/editors"),c=e("core/settings"),h=e("ext/settings/settings"),p=e("text!ext/tabbehaviors/settings.xml");n.exports=i.register("ext/tabbehaviors/tabbehaviors",{name:"Tab Behaviors",dev:"Ajax.org",alone:!0,type:i.GENERAL,deps:[o],menus:[],accessList:[],accessedTab:0,sep:null,more:null,menuOffset:4,commands:[["closetab","Option-W","Alt-W","close the tab that is currently active","Closing active tab.",function(){return r.onLine&&tabEditors.activepage}],["closealltabs","Option-Shift-W","Alt-Shift-W","close all opened tabs","Closing all tabs.",function(){return r.onLine&&tabEditors.activepage}],["closeallbutme","Option-Ctrl-W","Ctrl-Alt-W","close all opened tabs, but the tab that is currently active","Closing tabs.",function(){return r.onLine&&tabEditors.length>1}],["gototabright","Command-]","Ctrl-]","navigate to the next tab, right to the tab that is currently active","Switching to right tab.",function(){return tabEditors.length>1}],["gototableft","Command-[","Ctrl-[","navigate to the next tab, left to the tab that is currently active","Switching to left tab.",function(){return tabEditors.length>1}],["movetabright","Command-Option-]","Ctrl-Alt-]","move the tab that is currently active to the right","Moving tab to the right.",function(){return tabEditors.length>1}],["movetableft","Command-Option-[","Ctrl-Alt[","move the tab that is currently active to the left","Moving tab to the left.",function(){return tabEditors.length>1}],["tab1","Command-1","Ctrl-1","navigate to the first tab","Switching to tab 1."],["tab2","Command-2","Ctrl-2","navigate to the second tab","Switching to tab 2."],["tab3","Command-3","Ctrl-3","navigate to the third tab","Switching to tab 3."],["tab4","Command-4","Ctrl-4","navigate to the fourth tab","Switching to tab 4."],["tab5","Command-5","Ctrl-5","navigate to the fifth tab","Switching to tab 5."],["tab6","Command-6","Ctrl-6","navigate to the sixth tab","Switching to tab 6."],["tab7","Command-7","Ctrl-7","navigate to the seventh tab","Switching to tab 7."],["tab8","Command-8","Ctrl-8","navigate to the eighth tab","Switching to tab 8."],["tab9","Command-9","Ctrl-9","navigate to the ninth tab","Switching to tab 9."],["tab0","Command-0","Ctrl-0","navigate to the tenth tab","Switching to tab 10."],["revealtab","Shift-Command-L","Ctrl-Shift-L","reveal current tab in the file tree",function(){return r.onLine&&tabEditors.activepage}],["nexttab","Option-Tab","Ctrl-Tab","navigate to the next tab in the stack of accessed tabs",function(){return tabEditors.length>1}],["previoustab","Option-Shift-Tab","Ctrl-Shift-Tab","navigate to the previous tab in the stack of accessed tabs",function(){return tabEditors.length>1}],["closealltotheright",null,null,"",function(){if(r.onLine&&tabEditors.length>1){var e=mnuContextTabs.$page||tabEditors.activepage;return tabEditors.getPages().pop()!=e}}],["closealltotheleft",null,null,"",function(){if(r.onLine&&tabEditors.length>1){var e=mnuContextTabs.$page||tabEditors.activepage;return tabEditors.getPages()[0]!=e}}]],nodes:[],init:function(e){var t=this;this.commands.each(function(e){var n=e[e.length-1];f.addCommand({name:e[0],bindKey:{mac:e[1],win:e[2]},hint:e[3],msg:e[4],isAvailable:typeof n=="function"&&n,exec:function(n,r){r&&!r[0]&&r.source=="click"&&(r=[mnuContextTabs.$page]),t[e[0]](r[0])}})}),this.nodes.push(this.mnuTabs=u.addItemByPath("View/Tabs/",null,175),u.addItemByPath("File/~",new apf.divider,1e5),u.addItemByPath("File/Close File",new apf.item({command:"closetab"}),11e4),u.addItemByPath("File/Close All Files",new apf.item({command:"closealltabs"}),12e4),u.addItemByPath("View/Tabs/Close Tab",new apf.item({command:"closetab"}),100),u.addItemByPath("View/Tabs/Close All Tabs",new apf.item({command:"closealltabs"}),200),u.addItemByPath("View/Tabs/Close All But Current Tab",new apf.item({command:"closeallbutme"}),300),u.addItemByPath("Goto/~",new apf.divider,300),u.addItemByPath("Goto/Switch File/",null,301),u.addItemByPath("Goto/Switch File/Next File",new apf.item({command:"gototabright"}),100),u.addItemByPath("Goto/Switch File/Previous File",new apf.item({command:"gototableft"}),200),u.addItemByPath("Goto/Switch File/~",new apf.divider,300),u.addItemByPath("Goto/Switch File/Next File in Stack",new apf.item({command:"nexttab"}),400),u.addItemByPath("Goto/Switch File/Previous File in Stack",new apf.item({command:"previoustab"}),500),mnuContext=this.menu=new apf.menu({id:"mnuContextTabs","onprop.visible":u.$checkItems})),this.mnuTabs.addEventListener("prop.visible",function(e){btnEditorTabsBehavior.value?apf.setStyleClass(t.mnuTabs.$ext,"tabsContextMenu"):apf.setStyleClass(t.mnuTabs.$ext,"",["tabsContextMenu"])}),tabEditors.addEventListener("contextmenu",function(e){e.currentTarget&&e.currentTarget.tagName=="page"&&(mnuContext.$page=e.currentTarget)}),mnuContext.addEventListener("prop.visible",function(e){e.value||setTimeout(function(){this.$page=null})},!1),u.addItemByPath("Reveal in File Tree",new apf.item({command:"revealtab"}),100,mnuContext),u.addItemByPath("~",new apf.divider,200,mnuContext),u.addItemByPath("Close Tab",new apf.item({command:"closetab"}),300,mnuContext),u.addItemByPath("Close All Tabs",new apf.item({command:"closealltabs"}),400,mnuContext),u.addItemByPath("Close Other Tabs",new apf.item({command:"closeallbutme"}),500,mnuContext),u.addItemByPath("~",new apf.divider,600,mnuContext),u.addItemByPath("Close Tabs to the Right",new apf.item({command:"closealltotheright"}),600,mnuContext),u.addItemByPath("Close Tabs to the Left",new apf.item({command:"closealltotheleft"}),700,mnuContext),tabEditors.setAttribute("contextmenu","mnuContextTabs"),tabEditors.addEventListener("close",function(e){if(!e||!e.htmlEvent)return;var n=e.page;e=e.htmlEvent;if(e.shiftKey)return t.closealltabs();if(e.altKey)return t.closeallbutme(n)}),tabEditors.addEventListener("DOMNodeInserted",function(e){var n=e.currentTarget;if(n.localName!="page"||e.relatedNode!=this||n.nodeType!=1)return;if(e.$isMoveWithinParent)n.$tabMenu&&(t.mnuTabs.insertBefore(n.$tabMenu,n.nextSibling?n.nextSibling.$tabMenu:null),t.updateState());else if(n.fake){t.addItem(n);if(t.accessList.indexOf(n)==-1){var r=t.accessList.indexOf(n.id);r==-1?t.accessList.unshift(n):t.accessList[r]=n}}}),tabEditors.addEventListener("DOMNodeRemoved",function(e){if(e.$doOnlyAdmin)return;var n=e.currentTarget;if(n.localName!="page"||e.relatedNode!=this||n.nodeType!=1)return;t.removeItem(n),t.accessList.remove(n)});var n=apf.isMac?18:17;r.addEventListener("tab.afterswitch",function(e){var n=e.nextPage;t.cycleKeyPressed||(t.accessList.remove(n),t.accessList.unshift(n),t.accessList.changed=!0,c.save()),c.model.queryValue("auto/panels/@active")=="ext/tree/tree"&&apf.isTrue(c.model.queryValue("general/@revealfile"))&&t.revealtab(n,!0)}),tabEditors.addEventListener("close",function(e){r.getActivePage()==e.page&&(this.nextTabInLine=t.accessList[1])}),apf.addEventListener("keydown",function(e){e.keyCode==n&&(t.cycleKeyPressed=!0)}),apf.addEventListener("keyup",function(e){if(e.keyCode==n&&t.cycleKeyPressed){t.cycleKeyPressed=!1;if(t.$dirtyNextTab){t.accessedTab=0;var i=r.getActivePage();t.accessList[t.accessedTab]!=i&&(t.accessList.remove(i),t.accessList.unshift(i),t.accessList.changed=!0,c.save()),t.$dirtyNextTab=!1}}}),tabEditors.addEventListener("aftersavedialogcancel",function(e){if(!t.changedPages)return;var n,r,i;for(n=0,r=t.changedPages.length;n<r;n++)i=t.changedPages[n],i.removeEventListener("aftersavedialogclosed",arguments.callee)}),r.addEventListener("settings.save",function(e){if(t.accessList.changed){var n=t.accessList.slice(0);n.forEach(function(e,t){e&&e.id&&(this[t]=e.id)},n),e.model.setQueryValue("auto/tabcycle/text()",JSON.stringify(n)),t.accessList.changed=!1}}),r.addEventListener("settings.load",function(e){var n,r=e.model.queryValue("auto/tabcycle/text()");if(r)try{n=JSON.parse(r)}catch(e){return}n&&(n.remove(null),t.accessList=n)}),r.addEventListener("settings.load",function(e){c.setDefaults("general",[["revealfile",!1]])}),h.addSettings("General",p)},closetab:function(e){if(!e){e=r.getActivePage();var t=r.dispatchEvent("beforeclosetab",{page:e});t&&(e=t)}var n=tabEditors.getPages(),i=n[n.length-1]==e;return tabEditors.remove(e),l.resizeTabs(i),!1},closealltabs:function(e){e=typeof e=="function"?e:null,this.changedPages=[],this.unchangedPages=[];var t=tabEditors.getPages();for(var n=0,r=t.length;n<r;n++)this.closepage(t[n],e);this.checkPageRender(e)},closeallbutme:function(e,t){!(e instanceof apf.page)&&(typeof e=="undefined"||typeof e.closeall=="undefined")&&(e=r.getActivePage()),this.changedPages=[],this.unchangedPages=[];var n,i=tabEditors.getPages();for(var s=0,o=i.length;s<o;s++){n=i[s];if(e&&(n==e||e.hasOwnProperty(s)))continue;this.closepage(n,t)}l.resizeTabs(),this.checkPageRender(t)},closepage:function(e,t){var n=e.$doc.getNode();n.getAttribute("changed")=="1"&&(!n.getAttribute("newfile")||e.$doc.getValue())?this.changedPages.push(e):this.unchangedPages.push(e)},checkPageRender:function(e){if(this.changedPages.length){var t=this.changedPages.slice(0),n=0,r=this;function i(e){this.removeEventListener("aftersavedialogclosed",i),s()}function s(){var s=t[n];s?(s.noAnim=!0,s.addEventListener("aftersavedialogclosed",i),tabEditors.remove(s,null,!0),n++):r.closeUnchangedPages(function(){e&&e()})}s()}else this.closeUnchangedPages(function(){e&&e()})},closeUnchangedPages:function(e){var t;for(var n=0,r=this.unchangedPages.length;n<r;n++)t=this.unchangedPages[n],tabEditors.remove(t,null,!0);e&&e()},closealltotheright:function(e){e||(e=r.getActivePage());var t=tabEditors.getPages(),n=t.indexOf(e),i={};for(var s=0;s<=n;s++)i[s]=e;i.closeall=!0,this.closeallbutme(i)},closealltotheleft:function(e){e||(e=r.getActivePage());var t=tabEditors.getPages(),n=t.indexOf(e),i={};for(var s=t.length-1;s>=n;s--)i[s]=e;i.closeall=!0,this.closeallbutme(i)},nexttab:function(){if(tabEditors.length===1)return;++this.accessedTab>=this.accessList.length&&(this.accessedTab=0);var e=this.accessList[this.accessedTab];if(typeof e!="object")return this.nexttab();tabEditors.set(e),this.$dirtyNextTab=!0},previoustab:function(){if(tabEditors.length===1)return;--this.accessedTab<0&&(this.accessedTab=this.accessList.length-1);var e=this.accessList[this.accessedTab];if(typeof e!="object")return this.nexttab();tabEditors.set(e),this.$dirtyNextTab=!0},gototabright:function(e){return this.cycleTab("right")},gototableft:function(){return this.cycleTab("left")},cycleTab:function(e){var t=tabEditors,n=t.getPages(),i=r.getActivePage(),s=n.indexOf(i);if(!i||n.length==1)return;var o=s;switch(e){case"right":o++;break;case"left":o--;break;case"first":o=0;break;case"last":o=n.length-1;break;default:o--}o<0&&(o=n.length-1),o>n.length-1&&(o=0);var u=r.dispatchEvent("beforecycletab",{index:o,dir:e,pages:n});if(u===!1)return;return typeof u=="number"&&(o=u),t.set(n[o].id),!1},movetabright:function(){this.moveTab("right")},movetableft:function(){this.moveTab("left")},moveTab:function(e){var t=e=="right",n=tabEditors,i=n.getPages(),s=r.getActivePage(),o=i.indexOf(s),u=!1;if(!s||i.length==1)return;var a=o+(t?2:-1);if(a<0||a===i.length)u=!0;a>i.length-1&&(a=0);var f=r.dispatchEvent("beforemovetab",{index:a,dir:e,pages:i});if(f===!1)return;return typeof f=="number"&&(a=f),u?n.appendChild(s):n.insertBefore(s,i[a]),n.dispatchEvent("reorder",{page:s}),!1},tab1:function(){return this.showTab(1)},tab2:function(){return this.showTab(2)},tab3:function(){return this.showTab(3)},tab4:function(){return this.showTab(4)},tab5:function(){return this.showTab(5)},tab6:function(){return this.showTab(6)},tab7:function(){return this.showTab(7)},tab8:function(){return this.showTab(8)},tab9:function(){return this.showTab(9)},tab10:function(){return this.showTab(10)},showTab:function(e){e--;var t=tabEditors.getPages();return t[e]?(tabEditors.set(t[e]),!1):!1},revealtab:function(e,t){if(!e||e.command)e=r.getActivePage();if(!e)return!1;r.dispatchEvent("exitfullscreen"),this.revealInTree(e.$doc.getNode(),t)},revealInTree:function(t,n){function v(){var e=trFiles,t=apf.xmldb.getHtmlNode(e.selected,e);if(!t)return;var n=apf.getAbsolutePosition(t,e.$container),r=e.$container.scrollTop,s=r+e.$container.offsetHeight;if(n[1]>=r&&n[1]<=s)return;var o=e.$container.offsetHeight/2|0,u=n[1]-o;apf.tween.single(trFiles,{type:"scrollTop",from:trFiles.$ext.scrollTop,to:u,control:i.control={}})}var i=this;this.control&&this.control.stop&&this.control.stop(),o.activate(e("ext/tree/tree"));var u,a,f,l,c,h=t.tagName||"file",p=t.getAttribute("path"),d=trFiles.queryNode("//"+h+"[@path="+s.escapeXpathString(p)+"]");d?(trFiles.expandAndSelect(d),n||trFiles.focus(),v()):(u=p.substr(r.davPrefix.length).replace(/^\//,"").split("/"),a=u.pop(),f=["folder[1]"],l="",u.forEach(function(e){l+='/folder[@name="'+e+'"]',f.push("folder[1]"+l)}),c=f[f.length-1],trFiles.expandList(f,function(){trFiles.select(trFiles.queryNode(c+"/"+h+'[@name="'+a+'"]')),n||trFiles.focus(),v()})),u=p.substr(r.davPrefix.length).replace(/^\//,"").split("/"),a=u.pop(),f=["folder[1]"],l="",u.forEach(function(e){l+='/folder[@name="'+e+'"]',f.push("folder[1]"+l)}),c=f[f.length-1],apf.xmldb.setAttribute(t,"lookup","1"),trFiles.expandList(f,function(){trFiles.select(trFiles.queryNode(c+"/"+h+'[@name="'+a+'"]')),n||trFiles.focus(),v(),apf.xmldb.removeAttribute(t,"lookup")})},addItem:function(e){if(this.more)return;var t=this.mnuTabs.appendChild(new apf.item({caption:e.getAttribute("caption"),model:e.$model,relPage:e.id,onclick:function(){tabEditors.set(this.getAttribute("relPage"))}}));this.nodes.push(t)-1,e.$tabMenu=t,this.updateState()},removeItem:function(e){var t,n=0,r=this.nodes.length,i=this,s=function(){i.updateState()};for(;n<r;n++)if((t=this.nodes[n]).getAttribute("relPage")==e.id){t.destroy(!0,!0),this.nodes.splice(n,1),setTimeout(s);return}},updateState:function(e){var t=this.nodes.length-this.menuOffset;this.sep&&!t?(this.sep.destroy(!0,!0),this.sep=null):!this.sep&&(t||e)&&(this.sep=this.mnuTabs.insertBefore(new apf.divider,this.mnuTabs.childNodes[this.menuOffset])),t<(e?19:20)?this.more&&(this.more.destroy(!0,!0),this.more=null):this.more||(this.more=this.mnuTabs.appendChild(new apf.item({caption:"More...",onclick:function(){o.activate(a)}})));var n,r=tabEditors.getPages();for(var i=0,s=r.length;i<s;++i)n="tab"+(i==9?0:i+1),r[i].$tabMenu&&i<10?r[i].$tabMenu.setAttribute("command",n):r[i].$tabMenu&&r[i].$tabMenu.removeAttribute("command")},destroy:function(){u.remove("View/Tabs"),u.remove(mnuContextTabs),f.removeCommandsByName(["closealltotheright","closealltotheleft"]),this.commands.each(function(e){f.removeCommandByName(e[0])}),this.$destroy()}})}),define("text!ext/tabsessions/tabsessions.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "winSaveSessionAs"\n      center    = "true"\n      height    = "300"\n      icon      = ""\n      skin      = "bk-window"\n      buttons   = "close"\n      kbclose   = "true"\n      resizable = "true"\n      title     = "Save Session As"\n      width     = "300"\n      onshow    = "txtSaveSessionAs.clear()">\n        <a:vbox\n          anchors   = "10 10 0 10"\n          padding   = "5">\n            <a:hbox\n              align     = "center"\n              padding   = "5">\n                <a:label width="83" class="lbl_saveas">Session name:</a:label>\n                <a:textbox\n                  id           = "txtSaveSessionAs"\n                  flex         = "1"\n                  focusselect  = "true"/>\n            </a:hbox>\n            <div class="dgLikeContaier" style="height: 160px;">\n                <div class="heading">Saved sessions</div>\n                <a:hbox\n                  anchors  = "20 0 0 0"\n                  overflow = "hidden">\n                    <a:list\n                      id            = "lstSaveSessionAs"\n                      class         = "noscrollbar trDgLike emptyLeft"\n                      scrollbar     = "sbShared 2 2 2"\n                      style         = "border: none; overflow: hidden"\n                      flex          = "1"\n                      model         = "{require(\'ext/settings/settings\').model}"\n                      onclick = "txtSaveSessionAs.setValue(this.selected.getAttribute(\'name\'))"\n                      onafterchoose = "require(\'ext/tabsessions/tabsessions\').saveSession(this.selected.getAttribute(\'name\'))"\n                      empty-message = "No sessions">\n                        <a:each match="[auto/sessions/session]">\n                           <a:caption match="[@name]" />\n                           <a:icon\n                             value = "page_white_text.png" />\n                        </a:each>\n                    </a:list>\n                </a:hbox>\n            </div>\n\n            <a:hbox\n              edge    = "30 0 0"\n              pack    = "end"\n              padding = "5">\n                <a:button skin = "btn-default-css3"\n                  onclick = "winSaveSessionAs.hide()">\n                    Cancel\n                </a:button>\n                <a:button\n                  class="btn-green" skin="btn-default-css3"\n                  default  = "2"\n                  onclick  = "require(\'ext/tabsessions/tabsessions\').saveSession(txtSaveSessionAs.getValue())">\n                    Save\n                </a:button>\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n</a:application>\n'}),define("ext/tabsessions/tabsessions",["require","exports","module","core/ide","core/ext","core/util","ext/settings/settings","ext/tabbehaviors/tabbehaviors","ext/menus/menus","text!ext/save/save.css","text!ext/tabsessions/tabsessions.xml","ext/tabbehaviors/tabbehaviors","ext/commands/commands","ext/editors/editors"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("ext/settings/settings"),u=e("ext/tabbehaviors/tabbehaviors"),a=e("ext/menus/menus"),f=e("text!ext/save/save.css"),l=e("text!ext/tabsessions/tabsessions.xml"),c=e("ext/tabbehaviors/tabbehaviors"),h=e("ext/commands/commands"),p=e("ext/editors/editors");c.menuOffset+=3,n.exports=i.register("ext/tabsessions/tabsessions",{name:"Tab Sessions",dev:"Ajax.org",alone:!0,type:i.GENERAL,markup:l,css:f,nodes:[],hook:function(){var e=this;h.addCommand({name:"savetabsession",hint:"save the current tab state as a new session",msg:"Save tab session.",bindKey:{mac:"Ctrl-Shift-S",win:"Alt-Shift-S"},exec:function(){i.initExtension(e),winSaveSessionAs.show()}}),r.addEventListener("settings.load",function(t){var n=t&&t.model||o.model,r=n.queryNodes("auto/sessions/session");a.addItemByPath("View/Tabs/~",new apf.divider,700),a.addItemByPath("View/Tabs/Load Tab Session",{menu:e.mnuTabLoadSessions=new apf.menu({onitemclick:function(t){e.loadSession(t.relatedNode.value)}}),item:e.mnuFileLoadSession=new apf.item({disabled:!r.length})},800),a.addItemByPath("View/Tabs/Save Tab Session",new apf.item({caption:"Save Tab Session",command:"savetabsession",disabled:"{!!!tabEditors.activepage}"}),900),a.addItemByPath("View/Tabs/Delete Tab Session",{menu:e.mnuTabDeleteSessions=new apf.menu({onitemclick:function(t){e.removeSession(t.relatedNode.value)}}),item:e.mnuFileDeleteSession=new apf.item({disabled:!r.length})},1e3);var i=[];for(var s=0,u=r.length;s<u;s++)i.push(r[s].getAttribute("name"));i.sort(),i.forEach(function(t){e.mnuTabLoadSessions.appendChild(new apf.item({caption:t,value:t})),e.mnuTabDeleteSessions.appendChild(new apf.item({caption:t,value:t}))})})},init:function(e){apf.importCssString(this.css||"")},saveSession:function(e,t){e||(!txtSaveSessionAs.getValue()&&trSaveSessionAs.selected?e=trSaveSessionAs.selected.getAttribute("name"):e=txtSaveSessionAs.getValue());var n=o.model.queryNode('auto/sessions/session[@name="'+e+'"]');if(n&&!t){var r=this;return s.confirm("Overwrite Session","Overwrite Session","You're about to overwrite the session named "+e+". Are you sure you want to do this?",function(){r.saveSession(e,!0),winSaveSessionAs.hide();return})}o.model.queryNode("auto/sessions")||o.model.appendXml("<sessions />","auto");var i=o.model.queryNode("auto/files");if(!i)return;n?o.model.removeXml(n):(this.mnuTabLoadSessions.appendChild(new apf.item({caption:e,value:e})),this.mnuTabDeleteSessions.appendChild(new apf.item({caption:e,value:e}))),n=apf.n("<session />").attr("name",e).node(),n.appendChild(i),o.model.appendXml(n,"auto/sessions"),this.mnuFileLoadSession.enable(),this.mnuFileDeleteSession.enable(),o.save(),winSaveSessionAs.hide()},loadSession:function(e){var t=this;u.closealltabs(function(){t.openSessionFiles(e)})},openSessionFiles:function(e){var t=o.model.queryValue('auto/sessions/session[@name="'+e+'"]/files/@active'),n=o.model.queryNodes('auto/sessions/session[@name="'+e+'"]/files/file'),i=o.model.queryNode('auto/sessions/session[@name="'+e+'"]/files');if(!i)return;for(var s,u=0,a=n.length;u<a;u++){var f=n[u];f.getAttribute("newfile")!="1"&&f.removeAttribute("changed"),s=r.createDocument(f),s.parentNode={};var l=f.getAttribute("state");if(l)try{s.state=JSON.parse(l)}catch(c){}p.gotoDocument({doc:s,init:!0,active:t?t==f.getAttribute("path"):u==a-1,origin:"tabsessions"})}var h=o.model.queryNode("auto/files");h&&o.model.removeXml("auto/files"),o.model.appendXml(i.cloneNode(!0),"auto"),o.save()},removeSession:function(e){if(!o.model.queryNode('auto/sessions/session[@name="'+e+'"]'))return;o.model.removeXml('auto/sessions/session[@name="'+e+'"]'),o.save();var t=this.mnuTabLoadSessions.childNodes.concat(this.mnuTabDeleteSessions.childNodes);for(var n,r=0,i=t.length;r<i;r++)n=t[r],n.value==e&&this.mnuTabLoadSessions.removeChild(n);t.length==2&&(this.mnuFileLoadSession.disable(),this.mnuFileDeleteSession.disable())},enable:function(){a.enable("View/Tabs/~",400),a.enable("View/Tabs/Load Tab Session"),a.enable("View/Tabs/Save Tab Session"),a.enable("View/Tabs/Delete Tab Session"),this.$enable()},disable:function(){a.disable("View/Tabs/~",400),a.disable("View/Tabs/Load Tab Session"),a.disable("View/Tabs/Save Tab Session"),a.disable("View/Tabs/Delete Tab Session"),this.$disable()},destroy:function(){a.remove("View/Tabs/~",400),a.remove("View/Tabs/Load Tab Session"),a.remove("View/Tabs/Save Tab Session"),a.remove("View/Tabs/Delete Tab Session"),this.$destroy()}})}),define("text!ext/keybindings_default/keybindings_default.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "winKeyBindings"\n      title     = "Default Keybindings"\n      icon      = ""\n      center    = "true"\n      visible   = "false"\n      kbclose   = "true"\n      skin      = "bk-window"\n      width     = "793"\n      height    = "500"\n      buttons   = "close"\n      class     = "relative keybindings_default">\n        <a:bar id="barKeyBindingsMac"\n          skin="basic"\n          class="keybindings_default_bar"\n          visible="{apf.isMac}"/>\n        <a:scrollbar\n          for      = "barKeyBindingsMac"\n          id       = "sbKeyBindingsMac"\n          margin   = "2"\n          skin     = "sbios"\n          width    = "7"\n          overflow2 = "auto"\n          top      = "0"\n          right    = "0"\n          visible  = "{barKeyBindingsMac.visible}"/>\n        <a:bar id="barKeyBindingsWin"\n          skin="basic"\n          class="keybindings_default_bar"\n          visible="{!apf.isMac}"/>\n        <a:scrollbar\n          for      = "barKeyBindingsWin"\n          id       = "sbKeyBindingsWin"\n          margin   = "2"\n          skin     = "sbios"\n          width    = "7"\n          overflow2 = "auto"\n          top      = "0"\n          right    = "0"\n          visible  = "{barKeyBindingsWin.visible}"/>\n\n        <a:bar class="keybindings_default_bottom" skin="basic">\n            <!--a:divider skin="hordivider" /-->\n            <a href="javascript:void(0);" bottom="16" left="28" onclick="barKeyBindingsMac.hide();barKeyBindingsWin.show()" class="{barKeyBindingsWin.visible ? \'selected\' : \'\'}">Windows</a>\n            <span class="keybindings_default_bottom_divider" bottom="16" left="82" >&#160;|&#160;</span>\n            <a href="javascript:void(0);" bottom="16" left="97" onclick="barKeyBindingsWin.hide();barKeyBindingsMac.show()" class="{barKeyBindingsMac.visible ? \'selected\' : \'\'}">Mac</a> \n            <!--a:button default="3" bottom="10" right="10" skin="btn-default-css3" onclick="winKeyBindings.hide()">Done</a:button-->\n        </a:bar>\n    </a:window>\n</a:application>'}),define("text!ext/keybindings_default/keybindings_default.css",[],function(){return".keybindings_default .bg-bk-content {\n    background: url({ide.staticPrefix}/ext/main/style/images/gitui_menu_backg.png);\n}\n\n/*.keybindings_default_vbox {\n    background: url({ide.staticPrefix}/ext/main/style/images/gitui_menu_backg.png);\n}*/\n\n.keybindings_default_bar {\n    background: url({ide.staticPrefix}/ext/keybindings_default/res/divider.png) repeat-y top left;\n    position: relative;\n    left: 0px;\n    right: 7px;\n    top: 0px;\n    bottom: 25px;\n    height: 400px;\n    padding: 20px 10px 0 24px;\n    overflow: hidden;\n}\n\n.keybindings_default .sbios {\n    height: 408px;\n}\n\n.keybindings_default_block,\n.keybindings_default_block_border {\n    float: left;\n    width: 188px;\n    margin: 0 0 18px 0;\n    padding: 0;\n}\n\n.keybindings_default_block h3,\n.keybindings_default_block_border h3 {\n    color: #fff;\n    size: 14px;\n    font-weight: bold;\n    text-shadow: rgba(0, 0, 0, 1) 0px 2px 2px;\n    margin: 0 0 18px 0;\n    padding: 0;\n}\n\n.keybindings_default_command {\n    margin: 0 0 8px 0;\n    padding: 0;\n    line-height: 25px;\n}\n\n.keybindings_default_cmdname {\n    color: #ffd354;\n    size: 12px;\n    font-weight: bold;\n    text-shadow: rgba(0, 0, 0, 1) 0px 2px 2px;\n    margin: 0 0 4px 0;\n    padding: 0;\n}\n\n.keybindings_default_cmdkey {\n    background-color: #e2e4e7;\n    color: #444444;\n    size: 12px;\n    text-shadow: rgba(255, 255, 255, 1) 0px 1px 0px;\n    border: 1px solid #424242;\n    -webkit-border-radius: 4px;\n    -moz-border-radius: 4px;\n    border-radius: 4px;\n    -webkit-box-shadow: 0px 1px 0px #000;\n    -moz-box-shadow: 0px 1px 0px #000;\n    box-shadow: 0px 1px 0px #000;\n    height: 25px;\n    line-height: 25px;\n    text-align: center;\n    vertical-align: middle;\n    margin: 0;\n    padding: 7px 5px 7px 5px;\n}\n\n.keybindings_default_cmdop {\n    color: #fff;\n    font-weight: bold;\n    size: 15px;\n    margin: 0 4px 0 4px;\n}\n\n.keybindings_default_bottom {\n    position: relative;\n    height: 47px;\n    bottom: 0px;\n    left: 0px;\n    right: 0px;\n}\n\n/*.keybindings_default_bottom .btn-default-css3 {\n    margin-top: 8px;\n    float: right;\n}*/\n\n.keybindings_default_bottom a {\n    color: #fff;\n    text-decoration: none;\n}\n\n.keybindings_default_bottom a:hover {\n    text-decoration: underline;\n}\n\n.keybindings_default_bottom a.selected {\n    color: #ffd354;\n}\n\n.keybindings_default_bottom_divider {\n    color: #fff;\n}"}),define("ext/keybindings_default/keybindings_default",["require","exports","module","core/ext","core/util","text!ext/keybindings_default/keybindings_default.xml","text!ext/keybindings_default/keybindings_default.css","ext/commands/commands"],function(e,t,n){function a(e,t){var n=[],r,i,s,o=0;return Object.keys(e).forEach(function(i){++o;var u=e[i],a=(u.bindKey&&u.bindKey[t]||"").split("|")[0];if(!a)return;t=="mac"&&(a=apf.hotkeys.toMacNotation(a)),r=o%3,n.push('<div class="keybindings_default_block',r===1||r===2?"_border":"",'">'),n.push('<div class="keybindings_default_command">','<span class="keybindings_default_cmdname">',u.short?u.short:u.name.uCaseFirst(),"</span><br/>"),s=a.split(/[\- ]/),n.push('<span class="keybindings_default_cmdkey">',s.join('</span><span class="keybindings_default_cmdop">+</span><span class="keybindings_default_cmdkey">'),"</span></div>"),n.push("</div>")}),n.join("")}var r=e("core/ext"),i=e("core/util"),s=e("text!ext/keybindings_default/keybindings_default.xml"),o=e("text!ext/keybindings_default/keybindings_default.css"),u=e("ext/commands/commands");n.exports=r.register("ext/keybindings_default/keybindings_default",{name:"Default Keybindings",dev:"Ajax.org",type:r.GENERAL,alone:!0,commands:{keybindings:{hint:"show a window that lists all available key shortcuts within the IDE"}},hotitems:{},nodes:[],hook:function(){o=i.replaceStaticPrefix(o),apf.importCssString(o||""),this.hotitems.keybindings=[this.nodes[0]]},init:function(e){apf.document.documentElement.insertMarkup(s);var t=Array.prototype.slice.call(winKeyBindings.$ext.getElementsByTagName("a")),n=this;t.forEach(function(e){var t=e.innerHTML.indexOf("Mac")>-1?"mac":"win";apf.addListener(e,"mousedown",function(e){n.togglePanels(t)})}),this.buildPanels()},togglePanels:function(e){e=="mac"?(barKeyBindingsWin.setAttribute("visible","false"),barKeyBindingsMac.setAttribute("visible","true")):(barKeyBindingsMac.setAttribute("visible","false"),barKeyBindingsWin.setAttribute("visible","true"))},buildPanels:function(){var e=barKeyBindingsWin;e.$ext.innerHTML=a(u.commands,"win");var t=barKeyBindingsMac;t.$ext.innerHTML=a(u.commands,"mac")},keybindings:function(){r.initExtension(this),winKeyBindings.show()},generatePanelJson:function(){var e={mac:{},win:{}},t=0;return Object.keys(u.commands).forEach(function(n){++t;var r=u.commands[n],i=(r.bindKey&&r.bindKey.win||"").split("|")[0],s=(r.bindKey&&r.bindKey.mac||"").split("|")[0];if(!i||!s)return;s=apf.hotkeys.toMacNotation(s);var o=r.short?r.short:r.name.uCaseFirst();e.mac[o]=s.replace(/\s+/g,"-"),e.win[o]=i.replace(/\s+/g,"-")}),e}})}),define("text!ext/watcher/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox\n        class="underlined" label="Enable Auto-Merge"\n        value="[general/@automergeenabled]"\n        tooltip="Whenever the file watcher detects a file change on disk, \'auto merge\' will fetch the contents from disc and merges it with the version in the editor."\n        skin="checkbox_grey" position="2200" />\n</a:application>'}),define("text!ext/watcher/markup.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "winWatcher"\n      title     = "File changed"\n      icon      = ""\n      center    = "true"\n      render    = "runtime"\n      kbclose   = "false"\n      width     = "512"\n      skin      = "bk-window2"\n      class     = "relative"\n      onkeydown = "\n        if(event.keyCode == 89) {\n            btnWatcherMerge.dispatchEvent(\'click\', {htmlEvent: {}});\n        }\n      ">\n        <a:vbox padding="10" edge="15 20 25 20">\n            <h3 id="winWatcherHeader"></h3>\n            <div class="alertMsg">\n                <p>\n                You or a collaborator has changed this file.\n                </p>\n                Which version do you want to use?\n            </div>\n        </a:vbox>\n\n        <a:hbox edge="6 10 10" pack="start" padding="8">\n            <a:checkbox id="cbWatcherAll" skin="checkbox_black">Apply to all open files</a:checkbox>\n            <a:filler/>\n            <a:button id="btnWatcherLocal" skin="btn-default-css3" class="btn-blue">Keep Mine</a:button>\n            <a:button id="btnWatcherRemote" skin="btn-default-css3" class="btn-blue">Use Remote</a:button>\n            <a:button id="btnWatcherMerge" default="2" skin="btn-default-css3" class="btn-green">Merge Both</a:button>\n        </a:hbox>\n    </a:window>\n</a:application>\n'}),define("ext/revisions/diff_match_patch_amd",["require","exports","module"],function(e,t,n){function r(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var i=-1,s=1,o=0;r.Diff,r.prototype.diff_main=function(e,t,n,r){typeof r=="undefined"&&(this.Diff_Timeout<=0?r=Number.MAX_VALUE:r=(new Date).getTime()+this.Diff_Timeout*1e3);var i=r;if(e==null||t==null)throw new Error("Null input. (diff_main)");if(e==t)return e?[[o,e]]:[];typeof n=="undefined"&&(n=!0);var s=n,u=this.diff_commonPrefix(e,t),a=e.substring(0,u);e=e.substring(u),t=t.substring(u),u=this.diff_commonSuffix(e,t);var f=e.substring(e.length-u);e=e.substring(0,e.length-u),t=t.substring(0,t.length-u);var l=this.diff_compute_(e,t,s,i);return a&&l.unshift([o,a]),f&&l.push([o,f]),this.diff_cleanupMerge(l),l},r.prototype.diff_compute_=function(e,t,n,r){var u;if(!e)return[[s,t]];if(!t)return[[i,e]];var a=e.length>t.length?e:t,f=e.length>t.length?t:e,l=a.indexOf(f);if(l!=-1)return u=[[s,a.substring(0,l)],[o,f],[s,a.substring(l+f.length)]],e.length>t.length&&(u[0][0]=u[2][0]=i),u;if(f.length==1)return[[i,e],[s,t]];a=f=null;var c=this.diff_halfMatch_(e,t);if(c){var h=c[0],p=c[1],d=c[2],v=c[3],m=c[4],g=this.diff_main(h,d,n,r),y=this.diff_main(p,v,n,r);return g.concat([[o,m]],y)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)},r.prototype.diff_lineMode_=function(e,t,n){var r=this.diff_linesToChars_(e,t);e=r.chars1,t=r.chars2;var u=r.lineArray,a=this.diff_main(e,t,!1,n);this.diff_charsToLines_(a,u),this.diff_cleanupSemantic(a),a.push([o,""]);var f=0,l=0,c=0,h="",p="";while(f<a.length){switch(a[f][0]){case s:c++,p+=a[f][1];break;case i:l++,h+=a[f][1];break;case o:if(l>=1&&c>=1){a.splice(f-l-c,l+c),f=f-l-c;var r=this.diff_main(h,p,!1,n);for(var d=r.length-1;d>=0;d--)a.splice(f,0,r[d]);f+=r.length}c=0,l=0,h="",p=""}f++}return a.pop(),a},r.prototype.diff_bisect_=function(e,t,n){var r=e.length,o=t.length,u=Math.ceil((r+o)/2),a=u,f=2*u,l=new Array(f),c=new Array(f);for(var h=0;h<f;h++)l[h]=-1,c[h]=-1;l[a+1]=0,c[a+1]=0;var p=r-o,d=p%2!=0,v=0,m=0,g=0,y=0;for(var b=0;b<u;b++){if((new Date).getTime()>n)break;for(var w=-b+v;w<=b-m;w+=2){var E=a+w,S;w==-b||w!=b&&l[E-1]<l[E+1]?S=l[E+1]:S=l[E-1]+1;var x=S-w;while(S<r&&x<o&&e.charAt(S)==t.charAt(x))S++,x++;l[E]=S;if(S>r)m+=2;else if(x>o)v+=2;else if(d){var T=a+p-w;if(T>=0&&T<f&&c[T]!=-1){var N=r-c[T];if(S>=N)return this.diff_bisectSplit_(e,t,S,x,n)}}}for(var C=-b+g;C<=b-y;C+=2){var T=a+C,N;C==-b||C!=b&&c[T-1]<c[T+1]?N=c[T+1]:N=c[T-1]+1;var k=N-C;while(N<r&&k<o&&e.charAt(r-N-1)==t.charAt(o-k-1))N++,k++;c[T]=N;if(N>r)y+=2;else if(k>o)g+=2;else if(!d){var E=a+p-C;if(E>=0&&E<f&&l[E]!=-1){var S=l[E],x=a+S-E;N=r-N;if(S>=N)return this.diff_bisectSplit_(e,t,S,x,n)}}}}return[[i,e],[s,t]]},r.prototype.diff_bisectSplit_=function(e,t,n,r,i){var s=e.substring(0,n),o=t.substring(0,r),u=e.substring(n),a=t.substring(r),f=this.diff_main(s,o,!1,i),l=this.diff_main(u,a,!1,i);return f.concat(l)},r.prototype.diff_linesToChars_=function(e,t){function i(e){var t="",i=0,s=-1,o=n.length;while(s<e.length-1){s=e.indexOf("\n",i),s==-1&&(s=e.length-1);var u=e.substring(i,s+1);i=s+1,(r.hasOwnProperty?r.hasOwnProperty(u):r[u]!==undefined)?t+=String.fromCharCode(r[u]):(t+=String.fromCharCode(o),r[u]=o,n[o++]=u)}return t}var n=[],r={};n[0]="";var s=i(e),o=i(t);return{chars1:s,chars2:o,lineArray:n}},r.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){var r=e[n][1],i=[];for(var s=0;s<r.length;s++)i[s]=t[r.charCodeAt(s)];e[n][1]=i.join("")}},r.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;var n=0,r=Math.min(e.length,t.length),i=r,s=0;while(n<i)e.substring(s,i)==t.substring(s,i)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return i},r.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;var n=0,r=Math.min(e.length,t.length),i=r,s=0;while(n<i)e.substring(e.length-i,e.length-s)==t.substring(t.length-i,t.length-s)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return i},r.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(n==0||r==0)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;var s=0,o=1;for(;;){var u=e.substring(i-o),a=t.indexOf(u);if(a==-1)return s;o+=a;if(a==0||e.substring(i-o)==t.substring(0,o))s=o,o++}},r.prototype.diff_halfMatch_=function(e,t){function s(e,t,n){var r=e.substring(n,n+Math.floor(e.length/4)),s=-1,o="",u,a,f,l;while((s=t.indexOf(r,s+1))!=-1){var c=i.diff_commonPrefix(e.substring(n),t.substring(s)),h=i.diff_commonSuffix(e.substring(0,n),t.substring(0,s));o.length<h+c&&(o=t.substring(s-h,s)+t.substring(s,s+c),u=e.substring(0,n-h),a=e.substring(n+c),f=t.substring(0,s-h),l=t.substring(s+c))}return o.length*2>=e.length?[u,a,f,l,o]:null}if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||r.length*2<n.length)return null;var i=this,o=s(n,r,Math.ceil(n.length/4)),u=s(n,r,Math.ceil(n.length/2)),a;if(!o&&!u)return null;u?o?a=o[4].length>u[4].length?o:u:a=u:a=o;var f,l,c,h;e.length>t.length?(f=a[0],l=a[1],c=a[2],h=a[3]):(c=a[0],h=a[1],f=a[2],l=a[3]);var p=a[4];return[f,l,c,h,p]},r.prototype.diff_cleanupSemantic=function(e){var t=!1,n=[],r=0,u=null,a=0,f=0,l=0,c=0,h=0;while(a<e.length)e[a][0]==o?(n[r++]=a,f=c,l=h,c=0,h=0,u=e[a][1]):(e[a][0]==s?c+=e[a][1].length:h+=e[a][1].length,u&&u.length<=Math.max(f,l)&&u.length<=Math.max(c,h)&&(e.splice(n[r-1],0,[i,u]),e[n[r-1]+1][0]=s,r--,r--,a=r>0?n[r-1]:-1,f=0,l=0,c=0,h=0,u=null,t=!0)),a++;t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),a=1;while(a<e.length){if(e[a-1][0]==i&&e[a][0]==s){var p=e[a-1][1],d=e[a][1],v=this.diff_commonOverlap_(p,d),m=this.diff_commonOverlap_(d,p);if(v>=m){if(v>=p.length/2||v>=d.length/2)e.splice(a,0,[o,d.substring(0,v)]),e[a-1][1]=p.substring(0,p.length-v),e[a+1][1]=d.substring(v),a++}else if(m>=p.length/2||m>=d.length/2)e.splice(a,0,[o,p.substring(0,m)]),e[a-1][0]=s,e[a-1][1]=d.substring(0,d.length-m),e[a+1][0]=i,e[a+1][1]=p.substring(m),a++;a++}a++}},r.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),i=t.charAt(0),s=n.match(r.nonAlphaNumericRegex_),o=i.match(r.nonAlphaNumericRegex_),u=s&&n.match(r.whitespaceRegex_),a=o&&i.match(r.whitespaceRegex_),f=u&&n.match(r.linebreakRegex_),l=a&&i.match(r.linebreakRegex_),c=f&&e.match(r.blanklineEndRegex_),h=l&&t.match(r.blanklineStartRegex_);return c||h?5:f||l?4:s&&!u&&a?3:u||a?2:s||o?1:0}var n=1;while(n<e.length-1){if(e[n-1][0]==o&&e[n+1][0]==o){var i=e[n-1][1],s=e[n][1],u=e[n+1][1],a=this.diff_commonSuffix(i,s);if(a){var f=s.substring(s.length-a);i=i.substring(0,i.length-a),s=f+s.substring(0,s.length-a),u=f+u}var l=i,c=s,h=u,p=t(i,s)+t(s,u);while(s.charAt(0)===u.charAt(0)){i+=s.charAt(0),s=s.substring(1)+u.charAt(0),u=u.substring(1);var d=t(i,s)+t(s,u);d>=p&&(p=d,l=i,c=s,h=u)}e[n-1][1]!=l&&(l?e[n-1][1]=l:(e.splice(n-1,1),n--),e[n][1]=c,h?e[n+1][1]=h:(e.splice(n+1,1),n--))}n++}},r.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,r.whitespaceRegex_=/\s/,r.linebreakRegex_=/[\r\n]/,r.blanklineEndRegex_=/\n\r?\n$/,r.blanklineStartRegex_=/^\r?\n\r?\n/,r.prototype.diff_cleanupEfficiency=function(e){var t=!1,n=[],r=0,u=null,a=0,f=!1,l=!1,c=!1,h=!1;while(a<e.length)e[a][0]==o?(e[a][1].length<this.Diff_EditCost&&(c||h)?(n[r++]=a,f=c,l=h,u=e[a][1]):(r=0,u=null),c=h=!1):(e[a][0]==i?h=!0:c=!0,u&&(f&&l&&c&&h||u.length<this.Diff_EditCost/2&&f+l+c+h==3)&&(e.splice(n[r-1],0,[i,u]),e[n[r-1]+1][0]=s,r--,u=null,f&&l?(c=h=!0,r=0):(r--,a=r>0?n[r-1]:-1,c=h=!1),t=!0)),a++;t&&this.diff_cleanupMerge(e)},r.prototype.diff_cleanupMerge=function(e){e.push([o,""]);var t=0,n=0,r=0,u="",a="",f;while(t<e.length)switch(e[t][0]){case s:r++,a+=e[t][1],t++;break;case i:n++,u+=e[t][1],t++;break;case o:n+r>1?(n!==0&&r!==0&&(f=this.diff_commonPrefix(a,u),f!==0&&(t-n-r>0&&e[t-n-r-1][0]==o?e[t-n-r-1][1]+=a.substring(0,f):(e.splice(0,0,[o,a.substring(0,f)]),t++),a=a.substring(f),u=u.substring(f)),f=this.diff_commonSuffix(a,u),f!==0&&(e[t][1]=a.substring(a.length-f)+e[t][1],a=a.substring(0,a.length-f),u=u.substring(0,u.length-f))),n===0?e.splice(t-r,n+r,[s,a]):r===0?e.splice(t-n,n+r,[i,u]):e.splice(t-n-r,n+r,[i,u],[s,a]),t=t-n-r+(n?1:0)+(r?1:0)+1):t!==0&&e[t-1][0]==o?(e[t-1][1]+=e[t][1],e.splice(t,1)):t++,r=0,n=0,u="",a=""}e[e.length-1][1]===""&&e.pop();var l=!1;t=1;while(t<e.length-1)e[t-1][0]==o&&e[t+1][0]==o&&(e[t][1].substring(e[t][1].length-e[t-1][1].length)==e[t-1][1]?(e[t][1]=e[t-1][1]+e[t][1].substring(0,e[t][1].length-e[t-1][1].length),e[t+1][1]=e[t-1][1]+e[t+1][1],e.splice(t-1,1),l=!0):e[t][1].substring(0,e[t+1][1].length)==e[t+1][1]&&(e[t-1][1]+=e[t+1][1],e[t][1]=e[t][1].substring(e[t+1][1].length)+e[t+1][1],e.splice(t+1,1),l=!0)),t++;l&&this.diff_cleanupMerge(e)},r.prototype.diff_xIndex=function(e,t){var n=0,r=0,o=0,u=0,a;for(a=0;a<e.length;a++){e[a][0]!==s&&(n+=e[a][1].length),e[a][0]!==i&&(r+=e[a][1].length);if(n>t)break;o=n,u=r}return e.length!=a&&e[a][0]===i?u:u+(t-o)},r.prototype.diff_prettyHtml=function(e){var t=[],n=/&/g,r=/</g,u=/>/g,a=/\n/g;for(var f=0;f<e.length;f++){var l=e[f][0],c=e[f][1],h=c.replace(n,"&amp;").replace(r,"&lt;").replace(u,"&gt;").replace(a,"&para;<br>");switch(l){case s:t[f]='<ins style="background:#e6ffe6;">'+h+"</ins>";break;case i:t[f]='<del style="background:#ffe6e6;">'+h+"</del>";break;case o:t[f]="<span>"+h+"</span>"}}return t.join("")},r.prototype.diff_text1=function(e){var t=[];for(var n=0;n<e.length;n++)e[n][0]!==s&&(t[n]=e[n][1]);return t.join("")},r.prototype.diff_text2=function(e){var t=[];for(var n=0;n<e.length;n++)e[n][0]!==i&&(t[n]=e[n][1]);return t.join("")},r.prototype.diff_levenshtein=function(e){var t=0,n=0,r=0;for(var u=0;u<e.length;u++){var a=e[u][0],f=e[u][1];switch(a){case s:n+=f.length;break;case i:r+=f.length;break;case o:t+=Math.max(n,r),n=0,r=0}}return t+=Math.max(n,r),t},r.prototype.diff_toDelta=function(e){var t=[];for(var n=0;n<e.length;n++)switch(e[n][0]){case s:t[n]="+"+encodeURI(e[n][1]);break;case i:t[n]="-"+e[n][1].length;break;case o:t[n]="="+e[n][1].length}return t.join("	").replace(/%20/g," ")},r.prototype.diff_fromDelta=function(e,t){var n=[],r=0,u=0,a=t.split(/\t/g);for(var f=0;f<a.length;f++){var l=a[f].substring(1);switch(a[f].charAt(0)){case"+":try{n[r++]=[s,decodeURI(l)]}catch(c){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var h=parseInt(l,10);if(isNaN(h)||h<0)throw new Error("Invalid number in diff_fromDelta: "+l);var p=e.substring(u,u+=h);a[f].charAt(0)=="="?n[r++]=[o,p]:n[r++]=[i,p];break;default:if(a[f])throw new Error("Invalid diff operation in diff_fromDelta: "+a[f])}}if(u!=e.length)throw new Error("Delta length ("+u+") does not equal source text length ("+e.length+").");return n},r.prototype.match_main=function(e,t,n){if(e==null||t==null||n==null)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},r.prototype.match_bitap_=function(e,t,n){function s(e,r){var s=e/t.length,o=Math.abs(n-r);return i.Match_Distance?s+o/i.Match_Distance:o?1:s}if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),i=this,o=this.Match_Threshold,u=e.indexOf(t,n);u!=-1&&(o=Math.min(s(0,u),o),u=e.lastIndexOf(t,n+t.length),u!=-1&&(o=Math.min(s(0,u),o)));var a=1<<t.length-1;u=-1;var f,l,c=t.length+e.length,h;for(var p=0;p<t.length;p++){f=0,l=c;while(f<l)s(p,n+l)<=o?f=l:c=l,l=Math.floor((c-f)/2+f);c=l;var d=Math.max(1,n-l+1),v=Math.min(n+l,e.length)+t.length,m=Array(v+2);m[v+1]=(1<<p)-1;for(var g=v;g>=d;g--){var y=r[e.charAt(g-1)];p===0?m[g]=(m[g+1]<<1|1)&y:m[g]=(m[g+1]<<1|1)&y|((h[g+1]|h[g])<<1|1)|h[g+1];if(m[g]&a){var b=s(p,g-1);if(b<=o){o=b,u=g-1;if(!(u>n))break;d=Math.max(1,2*n-u)}}}if(s(p+1,n)>o)break;h=m}return u},r.prototype.match_alphabet_=function(e){var t={};for(var n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},r.prototype.patch_addContext_=function(e,t){if(t.length==0)return;var n=t.substring(e.start2,e.start2+e.length1),r=0;while(t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin)r+=this.Patch_Margin,n=t.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin;var i=t.substring(e.start2-r,e.start2);i&&e.diffs.unshift([o,i]);var s=t.substring(e.start2+e.length1,e.start2+e.length1+r);s&&e.diffs.push([o,s]),e.start1-=i.length,e.start2-=i.length,e.length1+=i.length+s.length,e.length2+=i.length+s.length},r.prototype.patch_make=function(e,t,n){var u,a;if(typeof e=="string"&&typeof t=="string"&&typeof n=="undefined")u=e,a=this.diff_main(u,t,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&typeof e=="object"&&typeof t=="undefined"&&typeof n=="undefined")a=e,u=this.diff_text1(a);else if(typeof e=="string"&&t&&typeof t=="object"&&typeof n=="undefined")u=e,a=t;else{if(typeof e!="string"||typeof t!="string"||!n||typeof n!="object")throw new Error("Unknown call format to patch_make.");u=e,a=n}if(a.length===0)return[];var f=[],l=new r.patch_obj,c=0,h=0,p=0,d=u,v=u;for(var m=0;m<a.length;m++){var g=a[m][0],y=a[m][1];!c&&g!==o&&(l.start1=h,l.start2=p);switch(g){case s:l.diffs[c++]=a[m],l.length2+=y.length,v=v.substring(0,p)+y+v.substring(p);break;case i:l.length1+=y.length,l.diffs[c++]=a[m],v=v.substring(0,p)+v.substring(p+y.length);break;case o:y.length<=2*this.Patch_Margin&&c&&a.length!=m+1?(l.diffs[c++]=a[m],l.length1+=y.length,l.length2+=y.length):y.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,d),f.push(l),l=new r.patch_obj,c=0,d=v,h=p)}g!==s&&(h+=y.length),g!==i&&(p+=y.length)}return c&&(this.patch_addContext_(l,d),f.push(l)),f},r.prototype.patch_deepCopy=function(e){var t=[];for(var n=0;n<e.length;n++){var i=e[n],s=new r.patch_obj;s.diffs=[];for(var o=0;o<i.diffs.length;o++)s.diffs[o]=i.diffs[o].slice();s.start1=i.start1,s.start2=i.start2,s.length1=i.length1,s.length2=i.length2,t[n]=s}return t},r.prototype.patch_apply=function(e,t){if(e.length==0)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);var r=0,u=[];for(var a=0;a<e.length;a++){var f=e[a].start2+r,l=this.diff_text1(e[a].diffs),c,h=-1;if(l.length>this.Match_MaxBits){c=this.match_main(t,l.substring(0,this.Match_MaxBits),f);if(c!=-1){h=this.match_main(t,l.substring(l.length-this.Match_MaxBits),f+l.length-this.Match_MaxBits);if(h==-1||c>=h)c=-1}}else c=this.match_main(t,l,f);if(c==-1)u[a]=!1,r-=e[a].length2-e[a].length1;else{u[a]=!0,r=c-f;var p;h==-1?p=t.substring(c,c+l.length):p=t.substring(c,h+this.Match_MaxBits);if(l==p)t=t.substring(0,c)+this.diff_text2(e[a].diffs)+t.substring(c+l.length);else{var d=this.diff_main(l,p,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(d)/l.length>this.Patch_DeleteThreshold)u[a]=!1;else{this.diff_cleanupSemanticLossless(d);var v=0,m;for(var g=0;g<e[a].diffs.length;g++){var y=e[a].diffs[g];y[0]!==o&&(m=this.diff_xIndex(d,v)),y[0]===s?t=t.substring(0,c+m)+y[1]+t.substring(c+m):y[0]===i&&(t=t.substring(0,c+m)+t.substring(c+this.diff_xIndex(d,v+y[1].length))),y[0]!==i&&(v+=y[1].length)}}}}}return t=t.substring(n.length,t.length-n.length),[t,u]},r.prototype.patch_addPadding=function(e){var t=this.Patch_Margin,n="";for(var r=1;r<=t;r++)n+=String.fromCharCode(r);for(var r=0;r<e.length;r++)e[r].start1+=t,e[r].start2+=t;var i=e[0],s=i.diffs;if(s.length==0||s[0][0]!=o)s.unshift([o,n]),i.start1-=t,i.start2-=t,i.length1+=t,i.length2+=t;else if(t>s[0][1].length){var u=t-s[0][1].length;s[0][1]=n.substring(s[0][1].length)+s[0][1],i.start1-=u,i.start2-=u,i.length1+=u,i.length2+=u}i=e[e.length-1],s=i.diffs;if(s.length==0||s[s.length-1][0]!=o)s.push([o,n]),i.length1+=t,i.length2+=t;else if(t>s[s.length-1][1].length){var u=t-s[s.length-1][1].length;s[s.length-1][1]+=n.substring(0,u),i.length1+=u,i.length2+=u}return n},r.prototype.patch_splitMax=function(e){var t=this.Match_MaxBits;for(var n=0;n<e.length;n++){if(e[n].length1<=t)continue;var u=e[n];e.splice(n--,1);var a=u.start1,f=u.start2,l="";while(u.diffs.length!==0){var c=new r.patch_obj,h=!0;c.start1=a-l.length,c.start2=f-l.length,l!==""&&(c.length1=c.length2=l.length,c.diffs.push([o,l]));while(u.diffs.length!==0&&c.length1<t-this.Patch_Margin){var p=u.diffs[0][0],d=u.diffs[0][1];p===s?(c.length2+=d.length,f+=d.length,c.diffs.push(u.diffs.shift()),h=!1):p===i&&c.diffs.length==1&&c.diffs[0][0]==o&&d.length>2*t?(c.length1+=d.length,a+=d.length,h=!1,c.diffs.push([p,d]),u.diffs.shift()):(d=d.substring(0,t-c.length1-this.Patch_Margin),c.length1+=d.length,a+=d.length,p===o?(c.length2+=d.length,f+=d.length):h=!1,c.diffs.push([p,d]),d==u.diffs[0][1]?u.diffs.shift():u.diffs[0][1]=u.diffs[0][1].substring(d.length))}l=this.diff_text2(c.diffs),l=l.substring(l.length-this.Patch_Margin);var v=this.diff_text1(u.diffs).substring(0,this.Patch_Margin);v!==""&&(c.length1+=v.length,c.length2+=v.length,c.diffs.length!==0&&c.diffs[c.diffs.length-1][0]===o?c.diffs[c.diffs.length-1][1]+=v:c.diffs.push([o,v])),h||e.splice(++n,0,c)}}},r.prototype.patch_toText=function(e){var t=[];for(var n=0;n<e.length;n++)t[n]=e[n];return t.join("")},r.prototype.patch_fromText=function(e){var t=[];if(!e)return t;var n=e.split("\n"),u=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(u<n.length){var f=n[u].match(a);if(!f)throw new Error("Invalid patch string: "+n[u]);var l=new r.patch_obj;t.push(l),l.start1=parseInt(f[1],10),f[2]===""?(l.start1--,l.length1=1):f[2]=="0"?l.length1=0:(l.start1--,l.length1=parseInt(f[2],10)),l.start2=parseInt(f[3],10),f[4]===""?(l.start2--,l.length2=1):f[4]=="0"?l.length2=0:(l.start2--,l.length2=parseInt(f[4],10)),u++;while(u<n.length){var c=n[u].charAt(0);try{var h=decodeURI(n[u].substring(1))}catch(p){throw new Error("Illegal escape in patch_fromText: "+h)}if(c=="-")l.diffs.push([i,h]);else if(c=="+")l.diffs.push([s,h]);else if(c==" ")l.diffs.push([o,h]);else{if(c=="@")break;if(c!=="")throw new Error('Invalid patch mode "'+c+'" in: '+h)}u++}}return t},r.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},r.patch_obj.prototype.toString=function(){var e,t;this.length1===0?e=this.start1+",0":this.length1==1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?t=this.start2+",0":this.length2==1?t=this.start2+1:t=this.start2+1+","+this.length2;var n=["@@ -"+e+" +"+t+" @@\n"],r;for(var u=0;u<this.diffs.length;u++){switch(this.diffs[u][0]){case s:r="+";break;case i:r="-";break;case o:r=" "}n[u+1]=r+encodeURI(this.diffs[u][1])+"\n"}return n.join("").replace(/%20/g," ")},t.diff_match_patch=r,t.DIFF_DELETE=i,t.DIFF_INSERT=s,t.DIFF_EQUAL=o}),define("ext/watcher/diff",["require","exports","module","ext/revisions/diff_match_patch_amd"],function(e,t,n){"use strict";var r=e("ext/revisions/diff_match_patch_amd").diff_match_patch,i=n.exports={longest_common_subsequence:function(e,t){var n=new r,i=n.diff_main(e,t,!1),s={file1index:-1,file2index:-1,chain:null},o=0,u=0;for(var a=0;a<i.length;a++){var f=i[a],l=f[0],c=f[1];if(l===0)for(var h=0;h<c.length;h++)s={file1index:o++,file2index:u++,chain:s};else l===1?u+=c.length:l===-1&&(o+=c.length)}return s},longest_common_subsequence2:function(e,t){var n,r,i,s,o,u,a,f,l,c,h;n={};for(f=0;f<t.length;f++)o=t[f],n[o]?n[o].push(f):n[o]=[f];s=[{file1index:-1,file2index:-1,chain:null}];for(a=0;a<e.length;a++){o=e[a],r=n[o]||[],c=0,u=s[0];for(l=0;l<r.length;l++){f=r[l];for(h=c;h<s.length;h++)if(s[h].file2index<f&&(h==s.length-1||s[h+1].file2index>f))break;if(h<s.length){i={file1index:a,file2index:f,chain:s[h]},c==s.length?s.push(u):s[c]=u,c=h+1,u=i;if(c==s.length)break}}s[c]=u}return s[s.length-1]},diff_comm:function(e,t){function u(){o.common.length&&(o.common.reverse(),n.push(o),o={common:[]})}var n=[],r=e.length,s=t.length,o={common:[]};for(var a=i.longest_common_subsequence(e,t);a!==null;a=a.chain){var f={file1:[],file2:[]};while(--r>a.file1index)f.file1.push(e[r]);while(--s>a.file2index)f.file2.push(t[s]);if(f.file1.length||f.file2.length)u(),f.file1.reverse(),f.file2.reverse(),n.push(f);r>=0&&o.common.push(e[r])}return u(),n.reverse(),n},diff_patch:function(e,t){function o(e,t,n){var r=[];for(var i=0;i<n;i++)r.push(e[t+i]);return{offset:t,length:n,chunk:r}}var n=[],r=e.length,s=t.length;for(var u=i.longest_common_subsequence(e,t);u!==null;u=u.chain){var a=r-u.file1index-1,f=s-u.file2index-1;r=u.file1index,s=u.file2index,(a||f)&&n.push({file1:o(e,u.file1index+1,a),file2:o(t,u.file2index+1,f)})}return n.reverse(),n},strip_patch:function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];t.push({file1:{offset:r.file1.offset,length:r.file1.length},file2:{chunk:r.file2.chunk}})}return t},invert_patch:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.file1;n.file1=n.file2,n.file2=r}},patch:function(e,t){function i(t){while(r<t)n.push(e[r]),r++}var n=[],r=0;for(var s=0;s<t.length;s++){var o=t[s];i(o.file1.offset);for(var u=0;u<o.file2.chunk.length;u++)n.push(o.file2.chunk[u]);r+=o.file1.length}return i(e.length),n},diff_indices:function(e,t){var n=[],r=e.length,s=t.length;for(var o=i.longest_common_subsequence(e,t);o!==null;o=o.chain){var u=r-o.file1index-1,a=s-o.file2index-1;r=o.file1index,s=o.file2index,(u||a)&&n.push({file1:[r+1,u],file2:[s+1,a]})}return n.reverse(),n},diff3_merge_indices:function(e,t,n){function a(e,t){u.push([e.file1[0],t,e.file1[1],e.file2[0],e.file2[1]])}function c(e){e>l&&(f.push([1,l,e-l]),l=e)}var r,s=i.diff_indices(t,e),o=i.diff_indices(t,n),u=[];for(r=0;r<s.length;r++)a(s[r],0);for(r=0;r<o.length;r++)a(o[r],2);u.sort();var f=[],l=0;for(var h=0;h<u.length;h++){var p=h,d=u[h],v=d[0],m=v+d[2];while(h<u.length-1){var g=u[h+1],y=g[0];if(y>m)break;m=Math.max(m,y+g[2]),h++}c(v);if(p==h)d[4]>0&&f.push([d[1],d[3],d[4]]);else{var b={0:[e.length,-1,t.length,-1],2:[n.length,-1,t.length,-1]};for(r=p;r<=h;r++){d=u[r];var w=d[1],E=b[w],S=d[0],x=S+d[2],T=d[3],N=T+d[4];E[0]=Math.min(T,E[0]),E[1]=Math.max(N,E[1]),E[2]=Math.min(S,E[2]),E[3]=Math.max(x,E[3])}var C=b[0][0]+(v-b[0][2]),k=b[0][1]+(m-b[0][3]),L=b[2][0]+(v-b[2][2]),A=b[2][1]+(m-b[2][3]);f.push([-1,C,k-C,v,m-v,L,A-L])}l=m}return c(t.length),f},diff3_merge:function(e,t,n,r){function f(){a.length&&s.push({ok:a}),a=[]}function l(e){for(var t=0;t<e.length;t++)a.push(e[t])}function c(t){if(t[2]!=t[6])return!0;var r=t[1],i=t[5];for(var s=0;s<t[2];s++)if(e[s+r]!=n[s+i])return!0;return!1}var s=[],o=[e,t,n],u=i.diff3_merge_indices(e,t,n),a=[];for(var h=0;h<u.length;h++){var p=u[h],d=p[0];d==-1?r&&!c(p)?l(o[0].slice(p[1],p[1]+p[2])):(f(),s.push({conflict:{a:e.slice(p[1],p[1]+p[2]),aIndex:p[1],o:t.slice(p[3],p[3]+p[4]),oIndex:p[3],b:n.slice(p[5],p[5]+p[6]),bIndex:p[5]}})):l(o[d].slice(p[1],p[1]+p[2]))}return f(),s}}}),define("ext/watcher/three_way_merge",["require","exports","module","ace/range","./diff","ext/revisions/diff_match_patch_amd"],function(e,t,n){"use strict";function o(e,t,n){function s(e){var t="",n=0,s=-1,o=r.length;while(s<e.length-1){s=e.indexOf("\n",n),s==-1&&(s=e.length-1);var u=e.substring(n,s+1);n=s+1,(i.hasOwnProperty?i.hasOwnProperty(u):i[u]!==undefined)?t+=String.fromCharCode(i[u]):(t+=String.fromCharCode(o),i[u]=o,r[o++]=u)}return t}var r=[],i={};r[0]="";var o=s(e),u=s(t),a=s(n);return{chars1:o,chars2:u,chars3:a,lineArray:r}}var r=e("ace/range").Range,i=e("./diff"),s=e("ext/revisions/diff_match_patch_amd").diff_match_patch;t.merge=function(n,r,i){var s=i.getValue(),o=t.diff3(r,n,s);t.patchAce(s,o,i)},t.patchAce=function(e,t,n){var i=new s,o=i.diff_main(e,t,!0);if(!o.length)return;var u=0;o.forEach(function(e){var t=e[0],i=e[1];t===0?u+=i.length:t===-1?n.remove(r.fromPoints(n.indexToPosition(u),n.indexToPosition(u+i.length))):t===1&&(n.insert(n.indexToPosition(u),i),u+=i.length)})},t.diff3=function(e,t,n){function s(e){var t=[];for(var n=0;n<e.length;n++)t[n]=r.lineArray[e.charCodeAt(n)];return t.join("")}var r=o(e,t,n),u=i.diff3_merge(r.chars1,r.chars2,r.chars3,!0),a=[];for(var f=0;f<u.length;f++){var l=u[f];if(l.ok)a.push(s(l.ok.join("")));else{e=s(l.conflict.a),t=s(l.conflict.o),n=s(l.conflict.b);var c=i.diff3_merge(e,t,n,!0);c.length===1&&c[0].ok?a.push(c[0].ok.join("")):(a.push("<<<<<<<<< saved version\n",e.replace(/\n?$/,"\n"),"=========\n",n.replace(/\n?$/,"\n"),">>>>>>>>> local version"),f!==u.length-1&&a.push("\n"))}}return a.join("")}}),define("ext/watcher/watcher",["require","exports","module","core/ide","core/ext","core/util","ext/tree/tree","ext/filesystem/filesystem","ext/settings/settings","text!./settings.xml","text!./markup.xml","./three_way_merge"],function(e,t,n){function h(e){return e.$model&&e.$model.data&&e.$model.data.getAttribute("path")}function p(e,t,n,r,i,o,u,a){window.winWatcher||apf.document.documentElement.insertMarkup(l),winWatcher.show(),winWatcher.setAttribute("title",e),winWatcherHeader.$ext.innerHTML=s.escapeXml(t),btnWatcherLocal.onclick=function(e){cbWatcherAll.checked?r(e):n(e)},btnWatcherRemote.onclick=function(e){cbWatcherAll.checked?o(e):i(e)},btnWatcherMerge.onclick=function(e){cbWatcherAll.checked?a(e):u(e)}}var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("ext/tree/tree"),u=e("ext/filesystem/filesystem"),a=e("ext/settings/settings"),f=e("text!./settings.xml"),l=e("text!./markup.xml"),c=e("./three_way_merge").merge;n.exports=i.register("ext/watcher/watcher",{name:"Watcher",dev:"Ajax.org",alone:!0,offline:!1,type:i.GENERAL,markup:null,visible:!0,deps:[o],init:function(){function t(){var e=r.getActivePage(),t=e&&e.$model&&e.$model.data;if(!t||!t.getAttribute)return;var s=h(e);n(e,t,s),i(e,t,s)}function n(t,n,i){if(!e.removedPaths[i])return;var o=i.slice(r.davPrefix.length+1);s.question("File removed, keep tab open?",o+" has been deleted, or is no longer available.","Do you wish to keep the file open in the editor?",function(){delete e.removedPaths[i],t.$at.undo_ptr={},t.$at.dispatchEvent("afterchange"),winQuestion.hide()},function(){e.removedPaths={},tabEditors.getPages().forEach(function(e){e.$at.undo_ptr={},e.$at.dispatchEvent("afterchange")}),winQuestion.hide()},function(){tabEditors.remove(t),delete e.removedPaths[i],winQuestion.hide()},function(){var t=tabEditors.getPages();t.forEach(function(t){var n=h(t);if(!n)return;r.dispatchEvent("afterFileRemove"),e.removedPaths[n]&&tabEditors.remove(t)}),e.removedPaths={},winQuestion.hide()}),btnQuestionYesToAll.setAttribute("visible",Object.keys(e.removedPaths).length>1),btnQuestionNoToAll.setAttribute("visible",Object.keys(e.removedPaths).length>1)}function i(n,i,o){function f(t){delete e.changedPaths[t],delete e.mergePaths[t]}function g(){p("File Changed",m+" has been changed on disk.",function(){n.$at.undo_ptr={},n.$at.dispatchEvent("afterchange"),f(o),winWatcher.hide()},function(){e.changedPaths={},e.mergePaths={},tabEditors.getPages().forEach(function(e){e.$at.undo_ptr={},e.$at.dispatchEvent("afterchange")}),winWatcher.hide()},function(){r.dispatchEvent("reload",{doc:n.$doc}),f(o),winWatcher.hide()},function(){tabEditors.getPages().forEach(function(t){var n=h(t);n&&e.changedPaths[n]&&r.dispatchEvent("reload",{doc:t.$doc})}),e.changedPaths={},e.mergePaths={},winWatcher.hide()},function(){winWatcher.hide(),y(),e.mergePaths[o]=1,t()},function(){winWatcher.hide(),y();for(var n in e.changedPaths)e.mergePaths[n]=1;t()}),btnWatcherMerge.setAttribute("visible",typeof l.saveValue=="string")}function y(){var t=!apf.isTrue(a.model.queryValue("general/@dontaskautomerge"))&&!0;if(!t)return;e.cbAutoMerge||(e.cbAutoMerge=new apf.checkbox({skin:"checkbox_black",label:"Don't ask again",id:"cbWatcherDontAsk"})),s.question("Always merge?","Always merge on file changes?","Enabling 'auto merge' makes it very easy to collaborate on files with other people, especially when combined with 'auto save'. This setting can be controlled from the settings panel as well.",function(){e.cbAutoMerge.checked&&a.model.setQueryValue("general/@dontaskautomerge","true"),a.model.setQueryValue("general/@automergeenabled","true"),a.save(),winQuestion.hide(),e.cbAutoMerge.parentNode.removeChild(e.cbAutoMerge)},function(){},function(){e.cbAutoMerge.checked&&a.model.setQueryValue("general/@dontaskautomerge","true"),a.save(),winQuestion.hide(),e.cbAutoMerge.parentNode.removeChild(e.cbAutoMerge)}),btnQuestionYesToAll.parentNode.insertBefore(e.cbAutoMerge,btnQuestionYesToAll),btnQuestionYesToAll.setAttribute("visible",!1),btnQuestionNoToAll.setAttribute("visible",!1)}if(!e.changedPaths[o]&&!e.mergePaths[o])return;var l=n.$doc,d=l.acesession;if(!d||!n.$model||!n.$model.data||n.$model.data.getAttribute("newfile")==="1"||n.$model.data.getAttribute("debug")==="1"||n.$model.data.getAttribute("ignore")==="1")return f(o);var v;u.readFile(o,function(t,r,i){if(r!=apf.SUCCESS)return g();v=t;if(v===l.saveValue)return f(o);if(v===l.getValue()){l.saveValue=v,e.updateChanged(n),f(o);return}if(e.mergePaths[o]||e.isAutoMergeEnabled){var s=l.saveValue;if(typeof s=="string"){c(s,v,d.getDocument()),l.saveValue=v,l.getValue()===v&&n.$at.addEventListener("afterchange",function u(){n.$at.removeEventListener("afterchange",u),e.updateChanged(n)}),f(o);return}}g()});var m=o.slice(r.davPrefix.length+1)}function o(e){if(e.type=="nofile")return;e.doc.saveValue=e.doc.getValue()}this.removedPaths={},this.changedPaths={},this.mergePaths={},this.ignorePaths={};var e=this;this.isAutoMergeEnabled=!1,a.addSettings("General",f),r.addEventListener("settings.load",function(t){t.ext.setDefaults("general",[["automergeenabled","false"],["dontaskautomerge","false"]]),e.isAutoMergeEnabled=apf.isTrue(t.model.queryValue("general/@automergeenabled"))||!1}),r.addEventListener("settings.save",function(t){if(!t.model.data)return;e.isAutoMergeEnabled=apf.isTrue(t.model.queryValue("general/@automergeenabled"))||!1}),r.addEventListener("openfile",this.watchAll.bind(this)),tabEditors.getPages().forEach(function(e){var t=e.$doc;t&&!t.saveValue&&(t.saveValue=t.getValue())}),r.addEventListener("fs.beforefilesave",function(t){t.doc.nextSaveValue=t.doc.getValue(),e.ignorePaths[t.path]=1}),r.addEventListener("afterfilesave",function(t){t.doc.saveValue=t.doc.nextSaveValue,delete e.ignorePaths[t.oldpath],delete t.doc.nextSaveValue}),r.addEventListener("afteronline",function(){e.watchAll(),e.changedPaths={},tabEditors.getPages().forEach(function(t){var n=h(t);n&&(e.changedPaths[n]=1)}),t()}),r.addEventListener("afteropenfile",o),r.addEventListener("afterreload",o),r.addEventListener("closefile",this.watchAll.bind(this)),r.addEventListener("socketMessage",function(n){var i=n.message;if(e.disabled||i.type&&i.type!=="watcher"||!i.path)return;var s=r.davPrefix+i.path.slice(r.workspaceDir.length);s=s.replace(/\/$/,"");if(i.subtype==="directorychange")return r.dispatchEvent("treechange",{path:s,files:i.files});var o=function(e){return h(e)===s},u=tabEditors.getPages();if(!u.some(o))return;var a={path:s,message:i,action:i.subtype,isFolder:i.subtype==="directorychange"};if(r.dispatchEvent("beforewatcherchange",a)===!1)return;switch(i.subtype){case"remove":e.removedPaths[s]||(e.removedPaths[s]=s,t());break;case"change":if(e.ignorePaths[s])break;e.changedPaths[s]||(delete e.mergePaths[s],e.changedPaths[s]=s,t());break;default:}}),r.addEventListener("init.ext/editors/editors",function(n){r.addEventListener("tab.afterswitch",function(n){if(e.disabled)return;t()})}),r.addEventListener("init.ext/tree/tree",function(){trFiles.addEventListener("expand",function(t){if(e.disabled)return;e.watchAll()})})},updateChanged:function(e){var t=e.$at;t.undo_ptr=t.$undostack[t.$undostack.length-1],e.$at.dispatchEvent("afterchange")},watchAll:function(){if(this.disabled)return;var e=[];tabEditors.getPages().forEach(function(t){var n=h(t);n&&e.push(n)}),window.trFiles&&trFiles.$model.queryNodes("//folder/@path").forEach(function(t){e.push(t.nodeValue)}),e=e.map(function(e){return e.slice(r.davPrefix.length).replace(/^\//,"")}),r.send({command:"watcher",id:r.clientId,paths:e})},disable:function(){this.disabled=!0,clearInterval(this.watcherId)},enable:function(){this.disabled=!1,this.watcherId=setInterval(this.watchAll.bind(this),1e4),this.watchAll()}})}),define("ext/dragdrop/dragdrop",["require","exports","module","core/ide","core/ext","ext/filesystem/filesystem","ext/uploadfiles/uploadfiles"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ext/filesystem/filesystem"),o=e("ext/uploadfiles/uploadfiles");n.exports=i.register("ext/dragdrop/dragdrop",{dev:"Ajax.org",name:"Dragdrop",alone:!0,type:i.GENERAL,nodes:[],deps:[s],init:function(){function i(e,n){t=e.dropbox=t.cloneNode(!0),t.setAttribute("id",n),e.appendChild(t),e.addEventListener("dragenter",g,!1),t.addEventListener("dragleave",m,!1),t.addEventListener("drop",y,!1),["dragexit","dragover"].forEach(function(e){t.addEventListener(e,b,!1)})}function c(e){apf.stopEvent(e),apf.setStyleClass(s,null,["dragAppendUpload"]),a&&clearTimeout(a),f=null}function h(e){apf.stopEvent(e)}function p(e){apf.stopEvent(e);var t=e.target,n,r;while(!t.id&&t.tagName!="div")t=t.parentNode;n=apf.xmldb.findXmlNode(t),n||(n=trFiles.xmlRoot.selectSingleNode("folder")),r=n,n.getAttribute("type")!="folder"&&n.tagName!="folder"&&(n=n.parentNode,t=apf.xmldb.findHtmlNode(n,trFiles)),s=t,u=n,apf.setStyleClass(t,"dragAppendUpload"),f!=r&&r.getAttribute("type")=="folder"&&r.tagName=="folder"&&(f=r,a&&clearTimeout(a),a=setTimeout(function(){trFiles.slideOpen(null,r,!0)},1e3));var i,o=apf.xmldb.getHtmlNode(r,trFiles);if(o){var l=apf.getAbsolutePosition(o,trFiles.$container)[1];l+25>trFiles.$container.scrollTop+trFiles.$container.offsetHeight?(i=d(r,"next"),i&&(trFiles.scrollIntoView(i),a&&clearTimeout(a))):trFiles.$container.scrollTop!=0&&l-25<trFiles.$container.scrollTop&&(i=d(r,"previous"),i&&(trFiles.scrollIntoView(i,!0),a&&clearTimeout(a)))}}function d(e,t){var n=e[t=="next"?"nextSibling":"previousSibling"];while(!n)n=(n||e).parentNode;return e==l&&n[t=="next"?"nextSibling":"previousSibling"]&&(n=n[t=="next"?"nextSibling":"previousSibling"]),l=n[t=="next"?"nextSibling":"previousSibling"]||n}function v(e){return trFiles.select(u),c.call(this,e),o.onBeforeDrop(e)}function m(e){if(this.disableDropbox)return;apf.stopEvent(e),apf.setStyleClass(this,null,["over"])}function g(e){if(this.disableDropbox)return;apf.stopEvent(e),apf.setStyleClass(this.dropbox||this,"over")}function y(e){if(this.disableDropbox)return;return m.call(this,e),o.onBeforeDrop(e)}function b(e){if(this.disableDropbox)return;apf.stopEvent(e)}var e=this,t=document.createElement("div");apf.setStyleClass(t,"draganddrop");var n=document.createElement("span");n.textContent="Drop files here to upload",t.appendChild(n),r.addEventListener("init.ext/editors/editors",function(){e.nodes.push(tabEditors.$ext),i(tabEditors.$ext,"tabEditorsDropArea")}),r.addEventListener("init.ext/tree/tree",function(){var t=trFiles.$ext;e.nodes.push(t),t.addEventListener("dragenter",h,!1),t.addEventListener("dragleave",c,!1),t.addEventListener("drop",v,!1),t.addEventListener("dragover",p,!1),t.addEventListener("dragexit",b,!1)}),r.addEventListener("init.ext/uploadfiles/uploadfiles",function(){winUploadFiles.addEventListener("afterrender",function(){e.nodes.push(uploadDropArea),uploadDropArea.addEventListener("dragenter",g,!1),uploadDropArea.addEventListener("dragleave",m,!1),uploadDropArea.addEventListener("drop",y,!1),["dragexit","dragover"].forEach(function(e){uploadDropArea.addEventListener(e,b,!1)})})}),this.dragStateEvent={dragenter:g};var s,u,a,f,l},enable:function(){var e=this;this.nodes.each(function(t){for(var n in e.dragStateEvent)t.addEventListener(n,e.dragStateEvent[n],!1)})},disable:function(){var e=this;this.nodes.each(function(t){for(var n in e.dragStateEvent)t.removeEventListener(n,e.dragStateEvent[n],!1)})},destroy:function(){var e=this;this.nodes.each(function(t){t.removeChild(t.dropbox);for(var n in e.dragStateEvent)t.removeEventListener(n,e.dragStateEvent[n],!1)}),this.nodes=[]}})}),define("ext/sidebar/sidebar",["require","exports","module","core/ext","core/ide","core/settings","ext/panels/panels","ext/editors/editors","ext/anims/anims"],function(e,t,n){var r=e("core/ext"),i=e("core/ide"),s=e("core/settings"),o=e("ext/panels/panels"),u=e("ext/editors/editors"),a=e("ext/anims/anims"),f="0px 1px 0px rgba(255, 255, 255, 0.05) inset, -1px 0px 0px 0px black inset, 1px 0px 0px 0px rgba(255, 255, 255, 0.06)",l="0px 1px 0px rgba(255, 255, 255, 0.05) inset";n.exports=r.register("ext/sidebar/sidebar",{name:"Side Bar",dev:"Cloud9 IDE, Inc.",alone:!0,type:r.GENERAL,nodes:[],init:function(){function t(){o.currentPanel?o.deactivate(null,!0):o.lastPanel?o.activate(o.lastPanel):(navbar.childNodes[1].dispatchEvent("mousedown"),navbar.childNodes[1].setValue(!0))}var e=this;this.nodes.push(hboxTabBar.insertBefore(new apf.hbox({id:"navbar","class":"black-menu-bar",style:"background:rgba(24,24,24,.9) url("+i.staticPrefix+"/ext/main/style/images/c9-noise.png);box-shadow: "+f,minwidth:"45",childNodes:[new apf.button({skin:"mnubtn","class":"c9-logo",onclick:t}),this.btnArrow=new apf.button({skin:"mnubtn",visible:"false","class":"toggle-black-menu-bar",onclick:t})]}),hboxTabBar.firstChild));var n,r,s=function(t,i){clearTimeout(n),e.animating=!0,r=t.toWidth?!1:!0;var s=navbar.$int.lastChild.previousSibling,c=s.offsetLeft+s.offsetWidth+(e.btnArrow.visible?1:6);setTimeout(function(){t.toWidth?(apf.setStyleClass(navbar.$int,"",["closed"]),navbar.$int.style.boxShadow=f,e.btnArrow.hide()):(apf.setStyleClass(navbar.$int,"closed"),navbar.$int.style.boxShadow=l,e.btnArrow.show(),o.lastPanel&&o.lastPanel.button.$setState("Out",{}))},t.noanim?0:50),a.animateSplitBoxNode(navbar,{immediate:t.noanim,width:(t.toWidth?Math.max(parseInt(t.toWidth),c):u.showTabs?45:9)+"px",timingFunction:"cubic-bezier(.10, .10, .25, .90)",duration:.15},function(){i&&i(),e.animating=!1})};i.addEventListener("panels.animate",s),splitterPanelLeft.addEventListener("dragmove",function(t){e.setExpandedSize()}),splitterPanelLeft.addEventListener("dragdrop",function(t){e.setExpandedSize()});var c=function(e){var t=function(){navbar.setAttribute("minwidth",e.value?45:0)};r?(e.value?(apf.setStyleClass(navbar.$int,"",["minimized"]),navbar.setWidth(8)):(navbar.setAttribute("minwidth",0),apf.setStyleClass(navbar.$int,"minimized")),s(e,t)):t()};i.addEventListener("tabs.visible",c),i.addEventListener("settings.load",function(t){var n=t.model.queryValue("auto/panels/@active");n=="none"?s({noanim:!0}):i.addEventListener("init."+n,function(t){t.ext.button&&t.ext.button.setValue(!0),colLeft.visible?e.setExpandedSize():colLeft.addEventListener("prop.visible",function(){e.setExpandedSize(),colLeft.removeEventListener("prop.visible",arguments.callee)})});var r=t.model.queryValue("auto/tabs/@show");c({value:apf.isTrue(r)}),e.settingsLoaded=!0})},animateToFullWidth:function(){u.pauseTabResize();var e=navbar.$int.scrollWidth+(u.showTabs?6:9);a.animateSplitBoxNode(navbar,{width:e+"px",timingFunction:"cubic-bezier(.10, .10, .25, .90)",duration:.3},function(){apf.layout.forceResize()})},animateToDefaultWidth:function(e){var t=colLeft.getWidth();a.animateSplitBoxNode(navbar,{width:t+"px",timingFunction:"cubic-bezier(.10, .10, .25, .90)",duration:.3,immediate:e},function(){apf.setStyleClass(navbar.$int,"closed"),apf.layout.forceResize(),u.continueTabResize()})},setExpandedSize:function(){var e=navbar.$int.lastChild.previousSibling,t=e.offsetLeft+e.offsetWidth+(this.btnArrow.visible?6:1);navbar.setWidth(Math.max(t,colLeft.getWidth()))},add:function(e,t){var n,r=1e6;for(var i in o.panels){var u=o.panels[i].$panelPosition-t.position;u>0&&u<r&&o.panels[i].button&&(n=o.panels[i],r=u)}e.button=navbar.insertBefore(new apf.button({skin:"mnubtn",state:"true","class":t["class"],caption:t.caption}),n&&n.button||this.btnArrow),e.button.addEventListener("mouseover",function(e){o.currentPanel&&o.currentPanel.panel.setTitle(this.caption)}),e.button.addEventListener("mouseout",function(e){o.currentPanel&&o.currentPanel.panel.setTitle(o.currentPanel.button.caption)}),e.button.addEventListener("mousedown",function(t){var n=this.value;if(o.currentPanel&&(o.currentPanel!=e||n)&&n){o.deactivate(!1,!0);if(n){apf.isTrue(s.model.queryValue("general/@animateui"))||colLeft.hide();return}}o.activate(e,!0)}),this.settingsLoaded&&s.model.queryValue("auto/panels/@active")!="none"&&this.setExpandedSize(),e.nodes.push(e.button,e.mnuItem)}})}),define("ext/beautify/res/jsbeautify/jsbeautify-min",["require","exports","module"],function(e,t,n){function r(e,t){function n(e){e=typeof e=="undefined"?!1:e;while(E.length&&(E[E.length-1]===" "||E[E.length-1]===A||E[E.length-1]===U||e&&(E[E.length-1]==="\n"||E[E.length-1]==="\r")))E.pop()}function r(e){return e.replace(/^\s\s*|\s\s*$/,"")}function i(e){e=e.replace(/\x0d/g,"");var t=[],n=e.indexOf("\n");while(n!==-1)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function s(){var e=K;K=!1,o(),K=e}function o(e){k.eat_next_space=!1;if(K&&h(k.mode))return;e=typeof e=="undefined"?!0:e,k.if_line=!1,n();if(!E.length)return;if(E[E.length-1]!=="\n"||!e)q=!0,E.push("\n");U&&E.push(U);for(var t=0;t<k.indentation_level;t+=1)E.push(A);k.var_line&&k.var_line_reindented&&E.push(A),k.case_body&&E.push(A)}function u(){if(x==="TK_COMMENT")return o();if(k.eat_next_space){k.eat_next_space=!1;return}var e=" ";E.length&&(e=E[E.length-1]),e!==" "&&e!=="\n"&&e!==A&&E.push(" ")}function a(){q=!1,k.eat_next_space=!1,E.push(S)}function f(){k.indentation_level+=1}function l(){E.length&&E[E.length-1]===A&&E.pop()}function c(e){k&&L.push(k),k={previous_mode:k?k.mode:"BLOCK",mode:e,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,if_line:!1,in_case_statement:!1,in_case:!1,case_body:!1,eat_next_space:!1,indentation_baseline:-1,indentation_level:k?k.indentation_level+(k.case_body?1:0)+(k.var_line&&k.var_line_reindented?1:0):0,ternary_depth:0}}function h(e){return e==="[EXPRESSION]"||e==="[INDENTED-EXPRESSION]"}function p(e){return g(e,["[EXPRESSION]","(EXPRESSION)","(FOR-EXPRESSION)","(COND-EXPRESSION)"])}function d(){F=k.mode==="DO_BLOCK";if(L.length>0){var e=k.mode;k=L.pop(),k.previous_mode=e}}function v(e,t){for(var n=0;n<e.length;n++){var i=r(e[n]);if(i.charAt(0)!==t)return!1}return!0}function m(e){return g(e,["case","return","do","if","throw","else"])}function g(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function y(e){var t=D,n=w.charAt(t);while(g(n,O)&&n!==e){t++;if(t>=Z)return 0;n=w.charAt(t)}return n}function b(){var e,t;R=0;if(D>=Z)return["","TK_EOF"];I=!1;var i=w.charAt(D);D+=1;var s=K&&h(k.mode);if(s){var u=0;while(g(i,O)){i==="\n"?(n(),E.push("\n"),q=!0,u=0):i==="	"?u+=4:i!=="\r"&&(u+=1);if(D>=Z)return["","TK_EOF"];i=w.charAt(D),D+=1}k.indentation_baseline===-1&&(k.indentation_baseline=u);if(q){for(e=0;e<k.indentation_level+1;e+=1)E.push(A);if(k.indentation_baseline!==-1)for(e=0;e<u-k.indentation_baseline;e++)E.push(" ")}}else{while(g(i,O)){i==="\n"&&(R+=$?R<=$?1:0:1);if(D>=Z)return["","TK_EOF"];i=w.charAt(D),D+=1}if(V&&R>1)for(e=0;e<R;e+=1)o(e===0),q=!0;I=R>0}if(g(i,M)){if(D<Z)while(g(w.charAt(D),M)){i+=w.charAt(D),D+=1;if(D===Z)break}if(D===Z||!i.match(/^[0-9]+[Ee]$/)||w.charAt(D)!=="-"&&w.charAt(D)!=="+")return i==="in"?[i,"TK_OPERATOR"]:(I&&x!=="TK_OPERATOR"&&x!=="TK_EQUALS"&&!k.if_line&&(V||T!=="var")&&o(),[i,"TK_WORD"]);var a=w.charAt(D);D+=1;var f=b();return i+=a+f[0],[i,"TK_WORD"]}if(i==="("||i==="[")return[i,"TK_START_EXPR"];if(i===")"||i==="]")return[i,"TK_END_EXPR"];if(i==="{")return[i,"TK_START_BLOCK"];if(i==="}")return[i,"TK_END_BLOCK"];if(i===";")return[i,"TK_SEMICOLON"];if(i==="/"){var l="",c=!0;if(w.charAt(D)==="*"){D+=1;if(D<Z)while(D<Z&&(w.charAt(D)!=="*"||!w.charAt(D+1)||w.charAt(D+1)!=="/")){i=w.charAt(D),l+=i;if(i==="\n"||i==="\r")c=!1;D+=1;if(D>=Z)break}return D+=2,c&&R===0?["/*"+l+"*/","TK_INLINE_COMMENT"]:["/*"+l+"*/","TK_BLOCK_COMMENT"]}if(w.charAt(D)==="/"){l=i;while(w.charAt(D)!=="\r"&&w.charAt(D)!=="\n"){l+=w.charAt(D),D+=1;if(D>=Z)break}return I&&o(),[l,"TK_COMMENT"]}}if(i==="'"||i==='"'||i==="/"&&(x==="TK_WORD"&&m(T)||T===")"&&g(k.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])||x==="TK_COMMA"||x==="TK_COMMENT"||x==="TK_START_EXPR"||x==="TK_START_BLOCK"||x==="TK_END_BLOCK"||x==="TK_OPERATOR"||x==="TK_EQUALS"||x==="TK_EOF"||x==="TK_SEMICOLON")){var p=i,d=!1,v=0,y=0;t=i;if(D<Z)if(p==="/"){var S=!1;while(d||S||w.charAt(D)!==p){t+=w.charAt(D),d?d=!1:(d=w.charAt(D)==="\\",w.charAt(D)==="["?S=!0:w.charAt(D)==="]"&&(S=!1)),D+=1;if(D>=Z)return[t,"TK_STRING"]}}else while(d||w.charAt(D)!==p){t+=w.charAt(D),v&&v>=y&&(v=parseInt(t.substr(-y),16),v&&v>=32&&v<=126&&(v=String.fromCharCode(v),t=t.substr(0,t.length-y-2)+(v===p||v==="\\"?"\\":"")+v),v=0),v?v++:d?(d=!1,Y&&(w.charAt(D)==="x"?(v++,y=2):w.charAt(D)==="u"&&(v++,y=4))):d=w.charAt(D)==="\\",D+=1;if(D>=Z)return[t,"TK_STRING"]}D+=1,t+=p;if(p==="/")while(D<Z&&g(w.charAt(D),M))t+=w.charAt(D),D+=1;return[t,"TK_STRING"]}if(i==="#"){if(E.length===0&&w.charAt(D)==="!"){t=i;while(D<Z&&i!=="\n")i=w.charAt(D),t+=i,D+=1;return E.push(r(t)+"\n"),o(),b()}var N="#";if(D<Z&&g(w.charAt(D),H)){do i=w.charAt(D),N+=i,D+=1;while(D<Z&&i!=="#"&&i!=="=");return i!=="#"&&(w.charAt(D)==="["&&w.charAt(D+1)==="]"?(N+="[]",D+=2):w.charAt(D)==="{"&&w.charAt(D+1)==="}"&&(N+="{}",D+=2)),[N,"TK_WORD"]}}if(i==="<"&&w.substring(D-1,D+3)==="<!--"){D+=3,i="<!--";while(w.charAt(D)!=="\n"&&D<Z)i+=w.charAt(D),D++;return k.in_html_comment=!0,[i,"TK_COMMENT"]}if(i==="-"&&k.in_html_comment&&w.substring(D-1,D+2)==="-->")return k.in_html_comment=!1,D+=2,I&&o(),["-->","TK_COMMENT"];if(g(i,_)){while(D<Z&&g(i+w.charAt(D),_)){i+=w.charAt(D),D+=1;if(D>=Z)break}return i===","?[i,"TK_COMMA"]:i==="="?[i,"TK_EQUALS"]:[i,"TK_OPERATOR"]}return[i,"TK_UNKNOWN"]}var w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U="";t=t?t:{};var z;t.space_after_anon_function!==undefined&&t.jslint_happy===undefined&&(t.jslint_happy=t.space_after_anon_function),t.braces_on_own_line!==undefined&&(z=t.braces_on_own_line?"expand":"collapse"),z=t.brace_style?t.brace_style:z?z:"collapse";var W=t.indent_size?t.indent_size:4,X=t.indent_char?t.indent_char:" ",V=typeof t.preserve_newlines=="undefined"?!0:t.preserve_newlines,$=typeof t.max_preserve_newlines=="undefined"?!1:t.max_preserve_newlines,J=t.jslint_happy==="undefined"?!1:t.jslint_happy,K=typeof t.keep_array_indentation=="undefined"?!1:t.keep_array_indentation,Q=typeof t.space_before_conditional=="undefined"?!0:t.space_before_conditional,G=typeof t.indent_case=="undefined"?!1:t.indent_case,Y=typeof t.unescape_strings=="undefined"?!1:t.unescape_strings;q=!1;var Z=e.length;A="";while(W>0)A+=X,W-=1;while(e&&(e.charAt(0)===" "||e.charAt(0)==="	"))U+=e.charAt(0),e=e.substring(1);w=e,C="",x="TK_START_EXPR",T="",N="",E=[],F=!1,O="\n\r	 ".split(""),M="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),H="0123456789".split(""),_="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",_+=" <%= <% %> <?= <? ?>",_=_.split(" "),P="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),L=[],c("BLOCK"),D=0;for(;;){var et=b();S=et[0],j=et[1];if(j==="TK_EOF")break;switch(j){case"TK_START_EXPR":if(S==="["){if(x==="TK_WORD"||T===")"){g(T,P)&&u(),c("(EXPRESSION)"),a();break}k.mode==="[EXPRESSION]"||k.mode==="[INDENTED-EXPRESSION]"?N==="]"&&T===","?(k.mode==="[EXPRESSION]"&&(k.mode="[INDENTED-EXPRESSION]",K||f()),c("[EXPRESSION]"),K||o()):T==="["?(k.mode==="[EXPRESSION]"&&(k.mode="[INDENTED-EXPRESSION]",K||f()),c("[EXPRESSION]"),K||o()):c("[EXPRESSION]"):c("[EXPRESSION]")}else C==="for"?c("(FOR-EXPRESSION)"):g(C,["if","while"])?c("(COND-EXPRESSION)"):c("(EXPRESSION)");T===";"||x==="TK_START_BLOCK"?o():x==="TK_END_EXPR"||x==="TK_START_EXPR"||x==="TK_END_BLOCK"||T==="."?I&&o():x!=="TK_WORD"&&x!=="TK_OPERATOR"?u():C==="function"||C==="typeof"?J&&u():(g(T,P)||T==="catch")&&Q&&u(),a();break;case"TK_END_EXPR":if(S==="]")if(K){if(T==="}"){l(),a(),d();break}}else if(k.mode==="[INDENTED-EXPRESSION]"&&T==="]"){d(),o(),a();break}d(),a();break;case"TK_START_BLOCK":C==="do"?c("DO_BLOCK"):c("BLOCK");if(z==="expand"||z==="expand-strict"){var tt=!1;z==="expand-strict"?(tt=y()==="}",tt||o(!0)):x!=="TK_OPERATOR"&&(T==="="||m(T)&&T!=="else"?u():o(!0)),a(),tt||f()}else x!=="TK_OPERATOR"&&x!=="TK_START_EXPR"?x==="TK_START_BLOCK"?o():u():h(k.previous_mode)&&T===","&&(N==="}"?u():o()),f(),a();break;case"TK_END_BLOCK":d(),z==="expand"||z==="expand-strict"?(T!=="{"&&o(),a()):(x==="TK_START_BLOCK"?q?l():n():h(k.mode)&&K?(K=!1,o(),K=!0):o(),a());break;case"TK_WORD":if(F){u(),a(),u(),F=!1;break}B="NONE";if(S==="function"){k.var_line&&x!=="TK_EQUALS"&&(k.var_line_reindented=!0);if((q||T===";")&&T!=="{"&&x!=="TK_BLOCK_COMMENT"&&x!=="TK_COMMENT"){R=q?R:0,V||(R=1);for(var nt=0;nt<2-R;nt++)o(!1)}x==="TK_WORD"?T==="get"||T==="set"||T==="new"||T==="return"?u():o():x==="TK_OPERATOR"||T==="="?u():p(k.mode)||o(),a(),C=S;break}if(S==="case"||S==="default"&&k.in_case_statement){T===":"||k.case_body?l():(G||k.indentation_level--,o(),G||k.indentation_level++),a(),k.in_case=!0,k.in_case_statement=!0,k.case_body=!1;break}x==="TK_END_BLOCK"?g(S.toLowerCase(),["else","catch","finally"])?z==="expand"||z==="end-expand"||z==="expand-strict"?B="NEWLINE":(B="SPACE",u()):B="NEWLINE":x!=="TK_SEMICOLON"||k.mode!=="BLOCK"&&k.mode!=="DO_BLOCK"?x==="TK_SEMICOLON"&&p(k.mode)?B="SPACE":x==="TK_STRING"?B="NEWLINE":x==="TK_WORD"?(T==="else"&&n(!0),B="SPACE"):x==="TK_START_BLOCK"?B="NEWLINE":x==="TK_END_EXPR"&&(u(),B="NEWLINE"):B="NEWLINE",g(S,P)&&T!==")"&&(T==="else"?B="SPACE":B="NEWLINE"),k.if_line&&x==="TK_END_EXPR"&&(k.if_line=!1),g(S.toLowerCase(),["else","catch","finally"])?x!=="TK_END_BLOCK"||z==="expand"||z==="end-expand"||z==="expand-strict"?o():(n(!0),u()):B==="NEWLINE"?m(T)?u():x!=="TK_END_EXPR"?(x!=="TK_START_EXPR"||S!=="var")&&T!==":"&&(S==="if"&&C==="else"&&T!=="{"?u():(k.var_line=!1,k.var_line_reindented=!1,o())):g(S,P)&&T!==")"&&(k.var_line=!1,k.var_line_reindented=!1,o()):h(k.mode)&&T===","&&N==="}"?o():B==="SPACE"&&u(),a(),C=S,S==="var"&&(k.var_line=!0,k.var_line_reindented=!1,k.var_line_tainted=!1),S==="if"&&(k.if_line=!0),S==="else"&&(k.if_line=!1);break;case"TK_SEMICOLON":a(),k.var_line=!1,k.var_line_reindented=!1,k.mode==="OBJECT"&&(k.mode="BLOCK");break;case"TK_STRING":x==="TK_END_EXPR"&&g(k.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])?u():x==="TK_COMMENT"||x==="TK_STRING"||x==="TK_START_BLOCK"||x==="TK_END_BLOCK"||x==="TK_SEMICOLON"?o():x==="TK_WORD"&&u(),a();break;case"TK_EQUALS":k.var_line&&(k.var_line_tainted=!0),u(),a(),u();break;case"TK_COMMA":if(k.var_line){if(p(k.mode)||x==="TK_END_BLOCK")k.var_line_tainted=!1;if(k.var_line_tainted){a(),k.var_line_reindented=!0,k.var_line_tainted=!1,o();break}k.var_line_tainted=!1,a(),u();break}x==="TK_COMMENT"&&o(),x==="TK_END_BLOCK"&&k.mode!=="(EXPRESSION)"?(a(),k.mode==="OBJECT"&&T==="}"?o():u()):k.mode==="OBJECT"?(a(),o()):(a(),u());break;case"TK_OPERATOR":var rt=!0,it=!0;if(m(T)){u(),a();break}if(S==="*"&&x==="TK_UNKNOWN"&&!N.match(/^\d+$/)){a();break}if(S===":"&&k.in_case){G&&(k.case_body=!0),a(),o(),k.in_case=!1;break}if(S==="::"){a();break}g(S,["--","++","!"])||g(S,["-","+"])&&(g(x,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||g(T,P))?(rt=!1,it=!1,T===";"&&p(k.mode)&&(rt=!0),x==="TK_WORD"&&g(T,P)&&(rt=!0),k.mode==="BLOCK"&&(T==="{"||T===";")&&o()):S==="."?rt=!1:S===":"?k.ternary_depth===0?(k.mode==="BLOCK"&&(k.mode="OBJECT"),rt=!1):k.ternary_depth-=1:S==="?"&&(k.ternary_depth+=1),rt&&u(),a(),it&&u();break;case"TK_BLOCK_COMMENT":var st=i(S),ot;if(v(st.slice(1),"*")){o(),E.push(st[0]);for(ot=1;ot<st.length;ot++)o(),E.push(" "),E.push(r(st[ot]))}else{st.length>1?o():x==="TK_END_BLOCK"?o():u();for(ot=0;ot<st.length;ot++)E.push(st[ot]),E.push("\n")}y("\n")!=="\n"&&o();break;case"TK_INLINE_COMMENT":u(),a(),p(k.mode)?u():s();break;case"TK_COMMENT":T===","&&!I&&n(!0),x!=="TK_COMMENT"&&(I?o():u()),a(),o();break;case"TK_UNKNOWN":m(T)&&u(),a()}N=T,x=j,T=S}var ut=U+E.join("").replace(/[\r\n ]+$/,"");return ut}function i(e,t){function n(){return m=e.charAt(++v)}function r(){return e.charAt(v+1)}function i(t){var r=v;while(n())if(m=="\\")n(),n();else{if(m==t)break;if(m=="\n")break}return e.substring(r,v+1)}function s(){var e=v;while(p.test(r()))v++;return v!=e}function o(){var e=v;do;while(p.test(n()));return v!=e+1}function u(){var t=v;n();while(n())if(m=="*"&&r()=="/"){v++;break}return e.substring(t,v+1)}function a(e,t){return w.slice(-e.length+(t||0),t).join("").toLowerCase()==e}function f(){b++,g+=y}function l(){b--,g=g.slice(0,-c)}t=t||{};var c=t.indent_size||4,h=t.indent_char||" ";typeof c=="string"&&(c=parseInt(c));var p=/^\s+$/,d=/[\w$\-_]/,v=-1,m,g=e.match(/^[\r\n]*[\t ]*/)[0],y=Array(c+1).join(h),b=0;print={},print["{"]=function(e){print.singleSpace(),w.push(e),print.newLine()},print["}"]=function(e){print.newLine(),w.push(e),print.newLine()},print.newLine=function(e){if(!e)while(p.test(w[w.length-1]))w.pop();w.length&&w.push("\n"),g&&w.push(g)},print.singleSpace=function(){w.length&&!p.test(w[w.length-1])&&w.push(" ")};var w=[];g&&w.push(g);for(;;){var E=o();if(!m)break;m=="{"?(f(),print["{"](m)):m=="}"?(l(),print["}"](m)):m=='"'||m=="'"?w.push(i(m)):m==";"?w.push(m,"\n",g):m=="/"&&r()=="*"?(print.newLine(),w.push(u(),"\n",g)):m=="("?(w.push(m),s(),a("url",-1)&&n()&&(m!=")"&&m!='"'&&m!="'"?w.push(i(")")):v--)):m==")"?w.push(m):m==","?(s(),w.push(m),print.singleSpace()):m=="]"?w.push(m):m=="["||m=="="?(s(),w.push(m)):(E&&print.singleSpace(),w.push(m))}var S=w.join("").replace(/[\n ]+$/,"");return S}function s(e,t){function n(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.Utils={whitespace:"\n\r	 ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed".split(","),extra_liners:"head,body,/html".split(","),in_array:function(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1}},this.get_content=function(){var e="",t=[],n=!1;while(this.input.charAt(this.pos)!=="<"){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];e=this.input.charAt(this.pos),this.pos++,this.line_char_count++;if(this.Utils.in_array(e,this.Utils.whitespace)){t.length&&(n=!0),this.line_char_count--;continue}if(n){if(this.line_char_count>=this.max_char){t.push("\n");for(var r=0;r<this.indent_level;r++)t.push(this.indent_string);this.line_char_count=0}else t.push(" "),this.line_char_count++;n=!1}t.push(e)}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos==this.input.length)return["","TK_EOF"];var t="",n="",r=new RegExp("</"+e+"\\s*>","igm");r.lastIndex=this.pos;var i=r.exec(this.input),s=i?i.index:this.input.length;return this.pos<s&&(n=this.input.substring(this.pos,s),this.pos=s),n},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){var t=this.tags.parent;while(t){if(e+this.tags[e+"count"]===t)break;t=this.tags[t+"parent"]}t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],this.tags[e+"count"]==1?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.get_tag=function(){var e="",t=[],n=!1;do{if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];e=this.input.charAt(this.pos),this.pos++,this.line_char_count++;if(this.Utils.in_array(e,this.Utils.whitespace)){n=!0,this.line_char_count--;continue}if(e==="'"||e==='"')if(!t[1]||t[1]!=="!")e+=this.get_unformatted(e),n=!0;e==="="&&(n=!1),t.length&&t[t.length-1]!=="="&&e!==">"&&n&&(this.line_char_count>=this.max_char?(this.print_newline(!1,t),this.line_char_count=0):(t.push(" "),this.line_char_count++),n=!1),t.push(e)}while(e!==">");var r=t.join(""),i;r.indexOf(" ")!=-1?i=r.indexOf(" "):i=r.indexOf(">");var s=r.substring(1,i).toLowerCase();if(r.charAt(r.length-2)==="/"||this.Utils.in_array(s,this.Utils.single_token))this.tag_type="SINGLE";else if(s==="script")this.record_tag(s),this.tag_type="SCRIPT";else if(s==="style")this.record_tag(s),this.tag_type="STYLE";else if(this.Utils.in_array(s,unformatted)){var o=this.get_unformatted("</"+s+">",r);t.push(o),this.tag_type="SINGLE"}else if(s.charAt(0)==="!")if(s.indexOf("[if")!=-1){if(r.indexOf("!IE")!=-1){var o=this.get_unformatted("-->",r);t.push(o)}this.tag_type="START"}else if(s.indexOf("[endif")!=-1)this.tag_type="END",this.unindent();else if(s.indexOf("[cdata[")!=-1){var o=this.get_unformatted("]]>",r);t.push(o),this.tag_type="SINGLE"}else{var o=this.get_unformatted("-->",r);t.push(o),this.tag_type="SINGLE"}else s.charAt(0)==="/"?(this.retrieve_tag(s.substring(1)),this.tag_type="END"):(this.record_tag(s),this.tag_type="START"),this.Utils.in_array(s,this.Utils.extra_liners)&&this.print_newline(!0,this.output);return t.join("")},this.get_unformatted=function(e,t){if(t&&t.indexOf(e)!=-1)return"";var n="",r="",i=!0;do{if(this.pos>=this.input.length)return r;n=this.input.charAt(this.pos),this.pos++;if(this.Utils.in_array(n,this.Utils.whitespace)){if(!i){this.line_char_count--;continue}if(n==="\n"||n==="\r"){r+="\n",this.line_char_count=0;continue}}r+=n,this.line_char_count++,i=!0}while(r.indexOf(e)==-1);return r},this.get_token=function(){var e;if(this.last_token==="TK_TAG_SCRIPT"||this.last_token==="TK_TAG_STYLE"){var t=this.last_token.substr(7);return e=this.get_contents_to(t),typeof e!="string"?e:[e,"TK_"+t]}if(this.current_mode==="CONTENT")return e=this.get_content(),typeof e!="string"?e:[e,"TK_CONTENT"];if(this.current_mode==="TAG"){e=this.get_tag();if(typeof e!="string")return e;var n="TK_TAG_"+this.tag_type;return[e,n]}},this.get_full_indent=function(e){return e=this.indent_level+e||0,e<1?"":Array(e+1).join(this.indent_string)},this.printer=function(e,t,n,r,i){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=i,this.indent_level=0,this.max_char=r,this.line_char_count=0;for(var s=0;s<this.indent_size;s++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0;if(!t||!t.length)return;if(!e)while(this.Utils.in_array(t[t.length-1],this.Utils.whitespace))t.pop();t.push("\n");for(var n=0;n<this.indent_level;n++)t.push(this.indent_string)},this.print_token=function(e){this.output.push(e)},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var s,o,u,a,f;t=t||{},o=t.indent_size||4,u=t.indent_char||" ",f=t.brace_style||"collapse",a=t.max_char==0?Infinity:t.max_char||70,unformatted=t.unformatted||["a"],s=new n,s.printer(e,u,o,a,f);for(;;){var l=s.get_token();s.token_text=l[0],s.token_type=l[1];if(s.token_type==="TK_EOF")break;switch(s.token_type){case"TK_TAG_START":s.print_newline(!1,s.output),s.print_token(s.token_text),s.indent(),s.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":s.print_newline(!1,s.output),s.print_token(s.token_text),s.current_mode="CONTENT";break;case"TK_TAG_END":if(s.last_token==="TK_CONTENT"&&s.last_text===""){var c=s.token_text.match(/\w+/)[0],h=s.output[s.output.length-1].match(/<\s*(\w+)/);(h===null||h[1]!==c)&&s.print_newline(!0,s.output)}s.print_token(s.token_text),s.current_mode="CONTENT";break;case"TK_TAG_SINGLE":s.print_newline(!1,s.output),s.print_token(s.token_text),s.current_mode="CONTENT";break;case"TK_CONTENT":s.token_text!==""&&s.print_token(s.token_text),s.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(s.token_text!==""){s.output.push("\n");var p=s.token_text;if(s.token_type=="TK_SCRIPT")var d=typeof r=="function"&&r;else if(s.token_type=="TK_STYLE")var d=typeof i=="function"&&i;if(t.indent_scripts=="keep")var v=0;else if(t.indent_scripts=="separate")var v=-s.indent_level;else var v=1;var m=s.get_full_indent(v);if(d)p=d(p.replace(/^\s*/,m),t);else{var g=p.match(/^\s*/)[0],y=g.match(/[^\n\r]*$/)[0].split(s.indent_string).length-1,b=s.get_full_indent(v-y);p=p.replace(/^\s*/,m).replace(/\r\n|\r|\n/g,"\n"+b).replace(/\s*$/,"")}p&&(s.print_token(p),s.print_newline(!0,s.output))}s.current_mode="TAG"}s.last_token=s.token_type,s.last_text=s.token_text}return s.output.join("")}typeof t!="undefined"&&(t.js_beautify=r),typeof t!="undefined"&&(t.css_beautify=i),typeof t!="undefined"&&(t.html_beautify=s)}),define("text!ext/beautify/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox class="underlined" label="Preserve Empty Lines" value="[beautify/jsbeautify/@preserveempty]" skin="checkbox_grey" position="1000"/>\n    <a:checkbox class="underlined" label="Keep Array Indentation" value="[beautify/jsbeautify/@keeparrayindentation]" skin="checkbox_grey" position="2000"/>\n    <a:checkbox class="underlined" label="JSLint Strict Whitespace" value="[beautify/jsbeautify/@jslinthappy]" skin="checkbox_grey" position="3000"/>\n    <a:hbox edge="5 5 2 12" align="center" position="4000">\n        <a:label flex="1">Braces</a:label>\n        <a:dropdown value="[{require(\'core/settings\').model}::beautify/jsbeautify/@braces]" width="185" height="21">\n            <a:item value="collapse">Braces with control statement</a:item>\n            <a:item value="expand">Braces on own line</a:item>\n            <a:item value="end-expand">End braces on own line</a:item>\n        </a:dropdown>\n    </a:hbox>\n    <a:checkbox class="underlined" label="Space Before Conditionals" value="[beautify/jsbeautify/@space_before_conditional]" skin="checkbox_grey" position="5000"/>\n    <a:checkbox class="underlined" label="Unescape Strings" value="[beautify/jsbeautify/@unescape_strings]" skin="checkbox_grey" position="6000"/>\n</a:application>\n'}),define("ext/beautify/beautify",["require","exports","module","core/ext","core/ide","core/util","ext/menus/menus","ext/commands/commands","ext/editors/editors","ace/range","ext/beautify/res/jsbeautify/jsbeautify-min","text!ext/beautify/settings.xml","ext/settings/settings"],function(e,t,n){var r=e("core/ext"),i=e("core/ide"),s=e("core/util"),o=e("ext/menus/menus"),u=e("ext/commands/commands"),a=e("ext/editors/editors"),f=e("ace/range").Range,l=e("ext/beautify/res/jsbeautify/jsbeautify-min"),c=e("text!ext/beautify/settings.xml"),h=e("ext/settings/settings");n.exports=r.register("ext/beautify/beautify",{name:"JS Beautify",dev:"Ajax.org",alone:!0,type:r.GENERAL,nodes:[],beautify:function(e){if(this.disabled===!0)return;e||(e=a.currentEditor),e.amlEditor&&(e=e.amlEditor.$editor);var t=e.selection,n=e.session,r=t.getRange(),i={};i.space_before_conditional=apf.isTrue(h.model.queryValue("beautify/jsbeautify/@space_before_conditional")),i.keep_array_indentation=apf.isTrue(h.model.queryValue("beautify/jsbeautify/@keeparrayindentation")),i.preserve_newlines=apf.isTrue(h.model.queryValue("beautify/jsbeautify/@preserveempty")),i.unescape_strings=apf.isTrue(h.model.queryValue("beautify/jsbeautify/@unescape_strings")),i.jslint_happy=apf.isTrue(h.model.queryValue("beautify/jsbeautify/@jslinthappy")),i.brace_style=h.model.queryValue("beautify/jsbeautify/@braces"),n.getUseSoftTabs()?(i.indent_char=" ",i.indent_size=n.getTabSize()):(i.indent_char="	",i.indent_size=1);var o=n.getLine(r.start.row),u=o.match(/^\s*/)[0],c=!1;r.start.column<u.length?r.start.column=0:c=!0;var p=n.getTextRange(r),d=n.syntax,v=null;d=="javascript"?v="js":d=="css"&&(v="css"),/^\s*<!?\w/.test(p)?v="html":d=="xml"?v="html":d=="html"&&(/[^<]+?{[\s\-\w]+:[^}]+;/.test(p)?v="css":/<\w+[ \/>]/.test(p)?v="html":v="js");try{p=l[v+"_beautify"](p,i),c&&(p=p.replace(/^/gm,u).trim()),r.end.column==0&&(p+="\n"+u)}catch(m){s.alert("Error","This code could not be beautified",'"'+d+'" is not supported yet');return}var g=n.replace(r,p);t.setSelectionRange(f.fromPoints(r.start,g))},hook:function(){var e=this;this.nodes.push(o.addItemByPath("Tools/Beautify Selection",this.mnuItem=new apf.item({disabled:"true",command:"beautify"}),100)),u.addCommand({name:"beautify",hint:"reformat selected JavaScript code in the editor",msg:"Beautifying selection.",bindKey:{mac:"Command-Shift-B",win:"Shift-Ctrl-B"},isAvailable:function(e){if(e&&e.path=="ext/code/code"){var t=e.amlEditor.$editor.getSelectionRange();return t.start.row!=t.end.row||t.start.column!=t.end.column}return!1},exec:function(t){e.beautify(t)}}),h.addSettings("JS Beautify",c),i.addEventListener("settings.load",function(e){h.setDefaults("beautify/jsbeautify",[["preserveempty","true"],["keeparrayindentation","false"],["jslinthappy","false"],["braces","end-expand"],["space_before_conditional","true"],["unescape_strings","true"]])}),r.initExtension(this)},destroy:function(){o.remove("Tools/Beautify Selection"),u.removeCommand("beautify"),this.$destroy()}})}),define("ext/offline/lib-offline",["require","exports","module"],function(e,t,n){var r=n.exports=function(e,t){this.onLine=-1,this.detectUrl=t,this.interval=5e3,this.namespace=e;var n=window.applicationCache;n.addEventListener("offline",function(e){},!1),n.addEventListener("online",function(e){},!1),n.addEventListener("checking",function(e){},!1),n.addEventListener("downloading",function(e){},!1),n.addEventListener("progress",function(e){},!1),n.addEventListener("cached",function(e){},!1),n.addEventListener("noupdate",function(e){},!1),n.addEventListener("updateready",function(e){n.swapCache()},!1),n.addEventListener("error",function(e){},!1)};(function(){this.start=function(){this.offlineTime=parseInt(localStorage[this.namespace+".offlinetime"]||0,10),this.offlineTime&&this.goOffline()},this.startDetect=function(){},this.stopDetect=function(){},this.goOffline=function(){if(this.onLine===!1)return!1;if(this.dispatchEvent("beforeoffline")===!1)return!1;this.onLine=!1;if(!this.offlineTime){this.offlineTime=(new Date).getTime();try{localStorage[this.namespace+".offlinetime"]=this.offlineTime}catch(e){}}return this.dispatchEvent("afteroffline"),!0},this.goOnline=function(){if(this.onLine===!0)return!1;if(this.dispatchEvent("beforeonline")===!1)return!1;this.onlineTime=(new Date).getTime(),this.onLine=!0,this.offlineTime=null;try{delete localStorage[this.namespace+".offlinetime"]}catch(e){}return this.dispatchEvent("afteronline"),!0}}).call(r.prototype=(new apf.Class).$init())}),define("text!ext/offline/offline.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window id = "offlineNotifyDialog"\n      title   = "No Local Runtime"\n      center    = "true"\n      icon      = ""\n      buttons   = ""\n      skin      = "bk-window2"\n      kbclose   = "true"\n      resizable = "false"\n      height    = "180"\n      width     = "360"\n      draggable = "false"\n      model     = "true">\n        <a:vbox padding="10" edge="15" anchors="0 0 0 0">\n            <a:text id="offlineNotifyText" class="tgDesc modal_text">\n            	<h4 style="margin:0">Your local runtime has stopped.</h4>\n                <p>To restore the IDE, type <em>c9 --restart</em> on the command line.</p>\n            </a:text>\n	    </a:vbox>\n    </a:window>\n\n    <a:bar id="barOfflineCover" class="bar-offline-cover" visible="false" zindex="100">\n        <div class="offline-cover"></div>\n        <div class="offline-indicator">Connection is lost! Trying to reach c9.io...</div>\n    </a:bar>\n</a:application>'}),define("text!ext/offline/style.css",[],function(){return".offline-indicator {\n    background-image: linear-gradient(bottom, rgb(248,216,170) 0%, rgb(250,227,193) 100%);\n    background-image: -o-linear-gradient(bottom, rgb(248,216,170) 0%, rgb(250,227,193) 100%);\n    background-image: -moz-linear-gradient(bottom, rgb(248,216,170) 0%, rgb(250,227,193) 100%);\n    background-image: -webkit-linear-gradient(bottom, rgb(248,216,170) 0%, rgb(250,227,193) 100%);\n    background-image: -ms-linear-gradient(bottom, rgb(248,216,170) 0%, rgb(250,227,193) 100%);\n\n    -moz-border-radius    : 0 0 6px 6px;\n    -webkit-border-radius : 0 0 6px 6px;\n    border-radius         : 0 0 6px 6px;\n\n    color: #956726;\n    text-shadow: #fff4e4 0px 1px 0px;\n\n    border: 2px solid #fff;\n    border-top-width: 1px;\n\n    width: 235px;\n    padding: 5px 8px 6px;\n    margin: 0 auto;\n    position: relative;\n    z-index: 1;\n\n    -webkit-box-shadow:  0px 3px 2px 0px rgba(0, 0, 0, 0.15);\n    box-shadow:  0px 3px 2px 0px rgba(0, 0, 0, 0.15);\n\n    text-align: center;\n}\n.offline-cover {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #fff;\n    opacity: 0.4;\n    z-index: 0;\n}"}),define("ext/offline/offline",["require","exports","module","core/ide","core/ext","ext/offline/lib-offline","text!ext/offline/offline.xml","text!ext/offline/style.css"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ext/offline/lib-offline"),o=e("text!ext/offline/offline.xml"),u=e("text!ext/offline/style.css");n.exports=i.register("ext/offline/offline",{dev:"Ajax.org",name:"Offline",alone:!0,type:i.GENERAL,markup:o,css:u,offlineStartup:0,init:function(){apf.importCssString(this.css||"");var e=this,t=barOfflineCover;tabEditors.appendChild(t),t.removeNode();var n=this.offline=new s("cloud9",(window.location.pathname+"/$reconnect").replace(/\/\//g,"/")),i=new Image;i.src=r.staticPrefix+"/ext/main/style/images/offline.png",r.local&&(i=new Image,i.src=r.staticPrefix+"/ext/main/style/images/local_green.png"),n.dispatchEvent=function(e,t){r.dispatchEvent(e,t)},r.onLine=-1,r.addEventListener("afteroffline",function(){stServerConnected.deactivate(),r.onLine=!1,apf.setStyleClass(logobar.$ext,"offline"),r.local&&offlineNotifyDialog.show(),e.bringExtensionsOffline(),window.barOfflineCover||tabEditors.appendChild(barOfflineCover),barOfflineCover.show()}),r.addEventListener("beforeonline",function(){stServerConnected.activate(),r.onLine=!0}),r.addEventListener("afteronline",function(t){apf.setStyleClass(logobar.$ext,"",["offline"]),e.bringExtensionsOnline(),r.local&&offlineNotifyDialog.hide(),window.barOfflineCover&&barOfflineCover.hide()}),r.addEventListener("localOffline",function(e){apf.setStyleClass(logobar.$ext,"offline local")}),r.addEventListener("localOnline",function(e){apf.setStyleClass(logobar.$ext,"",["offline"])}),r.addEventListener("socketConnect",function(){n.goOnline()}),r.addEventListener("socketDisconnect",function(){n.goOffline()}),this.offlineStartup&&r.dispatchEvent("afteroffline"),r.connected&&n.goOnline()},bringExtensionsOnline:function(){var e=i.extensions;for(var t=0,n=e.length;t<n;t++){var r=e[t];r.offline===!1&&r.enable()}},bringExtensionsOffline:function(){var e=i.extensions;for(var t=0,n=e.length;t<n;t++){var r=e[t];r.offline===!1&&r.disable()}},toggleInfoDiv:function(e){e==1?offlineInfoDiv.style.display="block":offlineInfoDiv.style.display="none"}})}),define("text!ext/stripws/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox class="underlined" label="On Save, Strip Whitespace" value="[editors/code/@stripws]" skin="checkbox_grey" position="3000" />\n</a:application>\n'}),define("ext/stripws/stripws",["require","exports","module","core/ext","core/ide","ext/editors/editors","ext/menus/menus","ext/settings/settings","text!ext/stripws/settings.xml","ext/commands/commands","ext/settings/settings"],function(e,t,n){var r=e("core/ext"),i=e("core/ide"),s=e("ext/editors/editors"),o=e("ext/menus/menus"),u=e("ext/settings/settings"),a=e("text!ext/stripws/settings.xml"),f=e("ext/commands/commands"),l=e("ext/settings/settings"),c=n.exports.strip=function(){if(!s.currentEditor.amlEditor)return;var e=s.currentEditor.amlEditor.$editor,t=e.getSession(),n=t.getDocument(),r=n.getAllLines();for(var i=0,o=r.length;i<o;i++){var u=r[i],a=u.search(/\s+$/);a!==-1&&n.removeInLine(i,a,u.length)}t.$syncInformUndoManager()};n.exports=r.register("ext/stripws/stripws",{name:"Strip Whitespace",dev:"Ajax.org",alone:!0,type:r.GENERAL,nodes:[],init:function(){},hook:function(){var e=this;f.addCommand({name:"stripws",hint:"strip whitespace at the end of each line",isAvailable:function(e){return e&&e.path=="ext/code/code"},exec:function(){r.initExtension(e),e.stripws()}}),this.nodes.push(o.addItemByPath("Tools/Strip Whitespace",new apf.item({command:"stripws"}),200)),i.addEventListener("beforefilesave",function(t){var n=u.model.data.selectSingleNode("editors/code/@stripws");n&&n.firstChild&&n.firstChild.nodeValue=="true"&&e.stripws()}),i.addEventListener("settings.load",function(){l.setDefaults("editors/code",[["stripws","false"]])}),l.addSettings("General",a)},stripws:function(){c()},enable:function(){r.initExtension(this),this.$enable(),this.stripws=function(){c()}},disable:function(){this.$disable(),this.stripws=function(){}},destroy:function(){o.remove("Tools/Strip Whitespace"),f.removeCommandByName("stripws"),this.$destroy()}})}),define("text!ext/zen/zen.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:button id="btnZenFullscreen"\n      visible = "true"\n      width   = "26"\n      height  = "26"\n      top     = "13"\n      right   = "11"\n      class = "notfull"\n      skinset = "zen"\n      skin = "zenbutton"\n      onclick = "require(\'ext/zen/zen\').toggleFullscreenZen(event)"\n      onmouseover = "require(\'ext/zen/zen\').fadeZenButtonIn()"\n      onmouseout = "require(\'ext/zen/zen\').fadeZenButtonOut()"\n     />\n\n</a:application>\n'}),define("text!ext/zen/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:button name="zenbutton">\n        <a:style><![CDATA[\n            .zenbutton {\n                height             : 23px;\n                overflow           : hidden;\n                cursor             : default;\n                position           : absolute;\n                -moz-user-select   : none;\n                -khtml-user-select : none;\n                user-select        : none;\n                line-height        : 17px;\n                opacity : 0.01;\n                z-index: 2;\n                top: 10px;\n                right: 10px;\n            }\n            \n            .zenbutton.full {\n                background : url(images/zen-buttons.png) -1px -28px no-repeat;\n            }\n\n            .zenbutton.full.zenbuttonOver {\n                background : url(images/zen-buttons.png) -28px -28px no-repeat;\n            }\n\n            .zenbutton.notfull {\n                background : url(images/zen-buttons.png) -1px -1px no-repeat;\n            }\n\n            .zenbutton.notfull.zenbuttonOver {\n                background : url(images/zen-buttons.png) -28px -1px no-repeat;\n            }\n            \n            #animateZen {\n                z-index: 90014;\n                position: absolute;\n                -webkit-box-shadow: 0px 0px 25px #000;\n                -moz-box-shadow: 0px 0px 25px #000;\n                overflow: hidden;\n            }\n            \n            #animateZenPosition {\n                position: absolute;\n            }\n            \n            #zenHandleRight, #zenHandleLeft {\n                position: absolute;\n                z-index: 90014;\n                width: 5px;\n                background: transparent;\n                cursor: ew-resize;\n                opacity: 0;\n            }\n            \n            #zenHandleLeft {\n                background-image: linear-gradient(right , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -o-linear-gradient(right , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -moz-linear-gradient(right , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -webkit-linear-gradient(right , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -ms-linear-gradient(right , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n            }\n            \n            #zenHandleRight {\n                background-image: linear-gradient(left , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -o-linear-gradient(left , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -moz-linear-gradient(left , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -webkit-linear-gradient(left , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -ms-linear-gradient(left , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n            }\n            \n            .vbZen {\n                opacity: 0;\n                z-index: 90013;\n                background: url(images/zenbg.png);\n                padding: 0 80px;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main background="." minwidth="20">\n                <div class="zenbutton">\n                 </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n</a:skin>'}),define("ext/zen/zen",["require","exports","module","core/ext","core/ide","ext/editors/editors","ext/settings/settings","text!ext/zen/zen.xml","text!ext/zen/skin.xml","ext/menus/menus","ext/commands/commands"],function(e,t,n){var r=e("core/ext"),i=e("core/ide"),s=e("ext/editors/editors"),o=e("ext/settings/settings"),u=e("text!ext/zen/zen.xml"),a=e("text!ext/zen/skin.xml"),f=e("ext/menus/menus"),l=e("ext/commands/commands");n.exports=r.register("ext/zen/zen",{name:"Zen mode",dev:"Ajax.org",alone:!0,type:r.GENERAL,markup:u,skin:{id:"zen",data:a,"media-path":i.staticPrefix+"/ext/main/style/images/","icon-path":i.staticPrefix+"/ext/main/style/icons/"},isFocused:!1,neverShown:!0,defaultOffset:11,offsetWidth:11,initialWidth:.7,handleLeftMove:!1,handleRightMove:!1,entered:!1,nodes:[],hook:function(){var e=this;l.addCommand({name:"zen",hint:"toggle zen mode",bindKey:{mac:"Option-Z",win:"Alt-Z"},isAvailable:function(e){return!!e},exec:function(){e.zen()}}),l.addCommand({name:"zenslow",hint:"toggle zen mode in slow-motion",bindKey:{mac:"Shift-Option-Z",win:"Shift-Alt-Z"},isAvailable:function(e){return!!e},exec:function(){e.zenslow()}}),i.addEventListener("settings.load",function(t){var n=t.model.queryValue("auto/zen");n&&(e.initialWidth=n)}),i.addEventListener("minimap.visibility",function(t){t.visibility==="shown"?e.offsetWidth=e.defaultOffset+t.width:e.offsetWidth=e.defaultOffset,e.updateButtonPosition()}),i.addEventListener("ext.revisions.show",function(t){e.offsetWidth=e.defaultOffset+t.barWidth,e.updateButtonPosition()}),i.addEventListener("ext.revisions.hide",function(t){e.offsetWidth=e.defaultOffset,e.updateButtonPosition()}),i.addEventListener("init.ext/editors/editors",function(){i.addEventListener("tab.afterswitch",function(t){if(t.nextPage.type!="ext/code/code")return;e.inited||setTimeout(function(){r.initExtension(e)}),tabEditors.removeEventListener("afterswitch",arguments.callee)})}),this.mnuItem=f.addItemByPath("View/Zen Mode",new apf.item({caption:"Zen Mode",type:"check",command:"zen"}),2e5)},init:function(){var e=this;this.animateZen=document.createElement("div"),this.animateZen.setAttribute("id","animateZen"),this.animateZen.setAttribute("style","display: none"),document.body.appendChild(this.animateZen),this.animateZenPosition=document.createElement("div"),this.animateZenPosition.setAttribute("id","animateZenPosition"),this.animateZenPosition.setAttribute("style","display: none"),document.body.appendChild(this.animateZenPosition),this.zenHandleLeft=document.createElement("div"),this.zenHandleLeft.setAttribute("id","zenHandleLeft"),this.zenHandleLeft.setAttribute("style","opacity: 0.0"),document.body.appendChild(this.zenHandleLeft),this.zenHandleRight=document.createElement("div"),this.zenHandleRight.setAttribute("id","zenHandleRight"),this.zenHandleRight.setAttribute("style","opacity: 0.0"),document.body.appendChild(this.zenHandleRight),this.setupHandleListeners();var t=btnZenFullscreen,n=tabEditors&&i.getActivePage();n.fake&&(n=n.relPage),n.appendChild(t),i.addEventListener("tab.afterswitch",function(e){var n=e.nextPage?e.nextPage.fake?e.nextPage.relPage:e.nextPage:null;n&&t.parentNode!=n&&n.appendChild(t)}),i.addEventListener("enterzen",function(){e.entered||(e.entered=!0,vbMain.parentNode.appendChild(new apf.vbox({anchors:"0 0 0 0",id:"vbZen","class":"vbZen",visible:!1})),vbZen.addEventListener("resize",function(t){e.isFocused&&e.calculatePositions()}))}),setTimeout(function(){e.updateButtonPosition()}),this.animateZen=document.getElementById("animateZen"),this.animateZenPosition=document.getElementById("animateZenPosition"),i.addEventListener("exitfullscreen",function(){e.escapeFromZenMode(!1,!0)})},updateButtonPosition:function(){if(!window.btnZenFullscreen)return;var e=20;s.currentEditor.name==="Code Editor"&&(e=s.currentEditor.amlEditor.$editor.renderer.scrollBar.width),btnZenFullscreen.setAttribute("right",e+this.offsetWidth)},calculatePositions:function(){var e=this;e.animateZen.style.height=window.innerHeight+"px";var t=window.innerWidth*e.initialWidth,n=(window.innerWidth-t)/2;e.animateZen.style.width=e.animateZen.style.width=t+"px",e.animateZen.style.left=n+"px",e.zenHandleLeft.style.height=window.innerHeight+"px",e.zenHandleLeft.style.left=n+0+"px",e.zenHandleRight.style.height=window.innerHeight+"px",e.zenHandleRight.style.left=n+t-5+"px"},setupHandleListeners:function(){var e=this;apf.addListener(this.zenHandleLeft,"mousedown",function(t){e.browserWidth=window.innerWidth,e.handleLeftMove=!0,apf.dragMode=!0}),apf.addListener(this.zenHandleRight,"mousedown",function(t){e.browserWidth=window.innerWidth,e.handleRightMove=!0,apf.dragMode=!0}),apf.addListener(document,"mousemove",function(t){if(e.isFocused){function n(){e.initialWidth<.4?e.initialWidth=.4:e.initialWidth>.95&&(e.initialWidth=1),e.calculatePositions(),apf.layout.forceResize(tabEditors.parentNode.$ext)}if(e.handleLeftMove)e.initialWidth=1-t.clientX*2/e.browserWidth,n();else if(e.handleRightMove){var r=e.browserWidth-t.clientX;e.initialWidth=1-r*2/e.browserWidth,n()}}}),apf.addListener(document,"mouseup",function(){if(!e.isFocused)return;(e.handleLeftMove||e.handleRightMove)&&o.model.setQueryValue("auto/zen/text()",e.initialWidth),e.handleLeftMove=!1,e.handleRightMove=!1,apf.layout.forceResize(),apf.dragMode=!1})},zen:function(){this.toggleFullscreenZen()},zenslow:function(){this.toggleFullscreenZen({htmlEvent:{shiftKey:!0}})},toggleFullscreenZen:function(e){var t=!1;e&&(t=e.htmlEvent.shiftKey),this.isFocused?this.escapeFromZenMode(t,!1):this.enterIntoZenMode(t)},enterIntoZenMode:function(e){i.dispatchEvent("enterzen");var t=this,n=apf.document.activeElement;self.btnZenFullscreen&&btnZenFullscreen.setAttribute("class","full"),this.mnuItem.check();var r=window.innerWidth,s=r*this.initialWidth,o=(r-s)/2+"px",u=window.innerHeight+"px";this.matchAnimationWindowPosition(),this.setAceThemeBackground(),this.placeTabIntoAnimationWindow(),Firmin.animate(this.animateZen,{height:u,left:o,top:"0",width:s+"px",timingFunction:"ease-in-out"},e?3.7:.7,function(){t.isFocused=!0;var e="display:block;top:0;height:"+u+";left:"+o+";width:"+s+"px";t.animateZen.setAttribute("style",e),apf.layout.forceResize(),t.zenHandleLeft.style.display="block",t.zenHandleRight.style.display="block",Firmin.animate(t.zenHandleLeft,{opacity:1,timingFunction:"ease-in-out"},.7).animate({opacity:0},.5),Firmin.animate(t.zenHandleRight,{opacity:1,timingFunction:"ease-in-out"},.7).animate({opacity:0},.5),setTimeout(function(){n&&n.$focus&&n.getHeight()&&n.$focus()},100)}),vbZen.show(),Firmin.animate(vbZen.$ext,{opacity:"1"},e?3.5:.5)},escapeFromZenMode:function(e,t){if(this.isFocused===!1)return;i.dispatchEvent("escapezen");var n=this,r=apf.document.activeElement;btnZenFullscreen.setAttribute("class","notfull"),this.isFocused=!1,this.mnuItem.uncheck(),this.zenHandleLeft.style.display="none",this.zenHandleRight.style.display="none";var s=tabEditors.parentNode.parentNode.$ext,o=apf.getAbsolutePosition(s),u=o[0],a=o[1],f=s.offsetWidth,l=s.offsetHeight,c=apf.getHtmlInnerWidth(this.animateZen);this.animateZen.style.width=c+"px";var h=apf.getHtmlInnerHeight(this.animateZen);this.animateZen.style.height=h+"px",Firmin.animate(this.animateZen,{height:l+"px",width:f+"px",left:u+"px",top:a+"px",timingFunction:"ease-in-out"},e?3.7:.7,function(){n.animateZen.style.display="none",s.appendChild(tabEditors.parentNode.$ext),apf.layout.forceResize(tabEditors.parentNode.$ext),setTimeout(function(){r&&r.getHeight()&&t===!1&&r.$focus()},100)}),Firmin.animate(vbZen.$ext,{opacity:"0"},e?3.5:.5,function(){vbZen.hide()})},matchAnimationWindowPosition:function(){var e=apf.getAbsolutePosition(tabEditors.parentNode.$ext),t=tabEditors.parentNode.getWidth(),n=tabEditors.parentNode.getHeight();this.animateZen.style.left=e[0]+"px",this.animateZen.style.top=e[1]+"px",this.animateZen.style.width=t+"px",this.animateZen.style.height=n+"px",this.animateZen.style.display="block"},setAceThemeBackground:function(){var e=document.getElementsByClassName("ace_editor")[0];if(!e)return;var t=e.getAttribute("class").split(" ");for(var n=0;n<t.length;n++)if(t[n].indexOf("ace-")===0){var r="."+t[n]+" .ace_scroller",i=apf.getStyleRule(r,"background-color");i||(i=apf.getStyleRule(".ace_scroller","background-color")),e.style.backgroundColor=i;break}},placeTabIntoAnimationWindow:function(){var e=[],t=apf.getArrayFromNodelist(tabEditors.parentNode.$ext.getElementsByTagName("iframe"));for(var n=0;n<t.length;n++)e[n]=[t[n].parentNode,t[n].nextSibling,document.adoptNode(t[n])];this.animateZen.appendChild(tabEditors.parentNode.$ext);for(n=e.length-1;n>=0;n--)e[n][0].insertBefore(e[n][2],e[n][1])},fadeZenButtonIn:function(){apf.tween.single(btnZenFullscreen,{type:"opacity",anim:apf.tween.easeInOutCubic,from:0,to:1,steps:8,interval:20,control:this.control={},onfinish:function(){}})},fadeZenButtonOut:function(){window.btnZenFullscreen&&apf.tween.single(btnZenFullscreen,{type:"opacity",anim:apf.tween.easeInOutCubic,from:1,to:0,steps:8,interval:20,control:this.control={},onfinish:function(){}})},enable:function(){btnZenFullscreen.show(),this.$enable()},disable:function(){this.isFocused&&this.escapeFromZenMode(!1,!1),btnZenFullscreen.hide(),this.$disable()},destroy:function(){f.remove("View/Zen"),l.removeCommandsByName(["zen","zenslow"]),this.$destroy()}})}),define("ext/codecomplete/codecomplete",["require","exports","module","core/ext","ext/editors/editors","ext/language/language","ext/menus/menus"],function(e,t,n){var r=e("core/ext"),i=e("ext/editors/editors"),s=e("ext/language/language"),o=e("ext/menus/menus");n.exports=r.register("ext/codecomplete/codecomplete",{name:"Code Complete",dev:"Ajax.org",type:r.GENERAL,deps:[i,s],nodes:[],alone:!0,init:function(){s.registerLanguageHandler("ext/codecomplete/local_completer"),s.registerLanguageHandler("ext/codecomplete/snippet_completer"),s.registerLanguageHandler("ext/codecomplete/mode_completer"),s.registerLanguageHandler("ext/codecomplete/open_files_local_completer")}})}),define("ext/vim/cli",["require","exports","module","ext/filesystem/filesystem","ext/gotofile/gotofile","ext/editors/editors","ext/save/save","core/ide","ext/tabbehaviors/tabbehaviors","ace/editor","ace/lib/lang","ext/commands/commands"],function(e,t,n){function p(e){return/^\d+$/.test(e)&&(e=parseInt(e,10)),/^[\d.\^e]+$/.test(e)?e=parseFloat(e):/^(true|false)$/i.test(e)&&(e=e.length=4),e}function v(e){return e?e.getCompletions?e.getCompletions()||[]:e.commands?Object.keys(e.commands):[]:(d||(d=Object.keys(c.byName).concat(Object.keys(h))),d)}function m(e,t){return t&&t.commands&&t.commands[e]?t.commands[e]:t?t:h[e]||c.byName[e]}function g(){var e=s.currentEditor.amlEditor;if(s.currentEditor.path=="ext/code/code"&&e)return e.$editor}function y(e,t,n){for(var r=0;r<t.length;r++){var i=t[r],s=i.command;if(!s)continue;if(s.name!==i.value){var o=t[r+1];if(!o||o.type!=="invisible")continue}if(s.cliExec)return s.cliExec(e,n,t);if(s.exec)return s.exec(e,{argv:n.split(/\s+/),text:n,tokens:t})}}function b(e){e.addToHistory(),e.setValue(""),g().focus()}var r=e("ext/filesystem/filesystem"),i=e("ext/gotofile/gotofile"),s=e("ext/editors/editors"),o=e("ext/save/save"),u=e("core/ide"),a=e("ext/tabbehaviors/tabbehaviors"),f=e("ace/editor").Editor,l=e("ace/lib/lang"),c=e("ext/commands/commands");t.searchStore={current:"",options:{needle:"",backwards:!1,wrap:!0,caseSensitive:!1,wholeWord:!1,regExp:!1}};var h={};h.ascii={name:"ascii",description:"",exec:function(e){var t=l.delayedCall(function(t){var r=e.getCursorPosition(),i=e.session.getLine(r.row)[r.column-1]||"\n",s=i.charCodeAt(0),o=JSON.stringify(i).slice(1,-1)+"="+" ",u=s.toString(16);u=[,"\\x0","\\x","\\u0","\\u"][u.length]+u,o+=u+" ",o+="\\"+s.toString(8)+" ",o+="&#"+s+";",e.cmdLine.setMessage(o),n.delay(2e3)}),n=l.delayedCall(function(t){e.removeListener(e.asciiMessageListener),e.asciiMessageListener=null,e.cmdLine.setMessage("")});if(e.asciiMessageListener)return n.call();e.on("changeSelection",e.asciiMessageListener=function(){t.schedule(200)}),t.call()}},h.set={name:"set",description:"set editor option",exec:function(e,t){var n=t.text.split(" "),r=n[1],i=p(n[2]);e.setOption(r,i)},getCompletions:function(){return Object.keys(f.prototype.$options)}},h["/"]={name:"/",history:[],cliExec:function(e,n){var r=t.searchStore.options;n=n||this.name,r.backwards=n[0]==="?",n=n.substr(1),n?t.searchStore.current=n:n=t.searchStore.current,e.find(n,r)}},h["?"]={name:"?",history:h["/"].history,cliExec:h["/"].cliExec},h[":"]={name:":",history:[],getCompletions:function(){return Object.keys(this.commands).concat(Object.keys(c.byName))}},h[":"].commands={w:function(e,t){var n=u.getActivePage();if(!n)return;var r=e.session.getLength();if(t.argv.length===2){var i=(u.davPrefix+"/"+t.argv[1]).replace(/\/+/,"/");n.$model.data.setAttribute("path",i),o.saveas(n,function(){console.log(i+" [New] "+r+"L, ##C written")})}else o.quicksave(null,function(){console.log(n.name+" "+r+"L, ##C written")})},e:function(e,t){var n=t.argv[1];if(!n)return i.toggleDialog(1),!1;n=(u.davPrefix+"/"+n).replace(/\/+/,"/"),r.exists(n,function(e){if(e)s.gotoDocument({path:n});else{var t=r.createFileNodeFromPath(n);t.setAttribute("newfile","1"),t.setAttribute("changed","1"),t.setAttribute("cli","1");var i=u.createDocument(t);i.cachedValue="",s.gotoDocument({doc:i,type:"newfile",origin:"newfile"})}})},x:function(e,t){var n=u.getActivePage();if(!n)return;n.$doc.getNode().getAttribute("changed")&&h.w(e,t),h.q()},wq:function(e,t){h.w(e,t),h.q()},q:function(e,t){var n=u.getActivePage(),r=u.dispatchEvent("beforeclosetab",{page:n});r&&(n=r);if(t&&t.force){var i=n.$at;i.undo_ptr=i.$undostack[i.$undostack.length-1],n.$doc.getNode().removeAttribute("changed")}s.close(n)},"q!":function(){h.q(null,{force:!0})},tabn:"gototabright",tabp:"gototableft",tabfirst:function(){a.cycleTab("first")},tablast:function(){a.cycleTab("last")},tabnew:function(e,t){path=t.argv[1],path?h[":"].commands.e(e,t):c.exec("newfile")},tabclose:"closetab",tabmove:function(e,t){},ascii:h.ascii},h[":"].commands.write=h[":"].commands.w,h[":"].commands.tabNext=h[":"].commands.tabn,h[":"].commands.tabPrevious=h[":"].commands.tabp,h[":"].commands.tabc=h[":"].commands.tabclose,h[":"].commands.set={vimOpts:["cursorline","cul","nocursorline","nocul","expandtab","et","noexpandtab","noet","number","nu","nonumber","nonu"],exec:function(e,t){var n=t.argv[1],r=n.slice(0,2)!="no";if(n[n.length-1]=="!"){var i=!0;n=n.slice(0,-1)}var s=this.vimOpts.indexOf(n);if(s==-1){e.cmdLine.setTimedMessage("Unrecognised option '"+n+"'.",1500);return}s<4?n="highlightActiveLine":s<8?n="useSoftTabs":s<12&&(n="showGutter"),i&&(r=!e.getOption(n)),e.setOption(n,r)},getCompletions:function(e){return this.vimOpts}},h[":"].commands.syntax=c.byName.syntax,h[":"].cliExec=function(e,t,n){var r=n[n.length-1];r&&r.type=="invisible"&&(t+=r.value),t=t.substr(1).trim();var i=t.split(/\s+/);t=i[0];if(this.commands[t]){t=this.commands[t];if(typeof t=="string")return c.exec(t,null,{argv:i});if(typeof t=="function")return t(e,{argv:i});if(t.exec)return t.exec(e,{argv:i})}else c.byName[t]?c.exec(t,null,{argv:i}):/^\d+$/.test(t)?e.gotoLine(t,0,!0):e.cmdLine.setTimedMessage("Vim command '"+t+"' not implemented.",1500)};var d;t.initCmdLine=function(e){function t(e,t){var n=e.session,r=e.getSelectionRange(),i=n.getLine(0),s=i.length;if(r.end.column!=s||!r.isEmpty()){e.navigateLineEnd();return}if(!e.$tabCycle){var o=n.getTokenAt(0,s)||{value:"",type:""},u=n.getState(0);u=="start"&&(u=v());if(!u)return;if(u.length==1&&o.value==u[0]){o.command&&(u=v(o.command),o={value:"",type:""});if(!u)return}e.$tabCycle={matches:u,index:o.value==u[0]?0:-1,start:s-o.value.length},e.commands.on("exec",function h(t){var n=t.command&&t.command.name;n!=="tabNext"&&n!=="tabPrevious"&&(e.$tabCycle=null,e.commands.removeListener("exec",h))})}var u=e.$tabCycle.matches,a=e.$tabCycle.index,f=e.$tabCycle.start;a+=t,a%=u.length,a<0&&(a=u.length+a),e.$tabCycle.index=a;var l=u[a];if(!l)return;var c=0;while(l[c]&&l[c]==i[f+c])c++;f+=c,l=l.substr(c),c==0&&/\w/.test(l[0])&&/\w/.test(i[f-1])&&(l=" "+l),/\w$/.test(l)&&(l+=" "),r.start.column=f,r.end.column=s,n.replace(r,l),e.$tabCycle.matches.length==1&&(e.$tabCycle=null)}function n(e,t){var n=[];return t.forEach(function(t){if(t.length<e.length){var r=e.lastIndexOf(t,0)===0;r&&/\w/.test(t[t.length-1])&&(r=!/\w/.test(e[t.length]))}else var r=t.lastIndexOf(e,0)===0;r&&n.push(t)}),n}e.commands.bindKeys({"Shift-Return|Ctrl-Return|Alt-Return":function(e){e.insert("\n")},"Esc|Shift-Esc|Ctrl-[":function(e){b(e)},Return:function(t){var n=t.editor||g(),r=t.session.getTokens(0);n.cmdLine=t,y(n,r,t.getValue()),b(t)},Tab:function(n){t(n,1)},"Shift-Tab":function(n){t(n,-1)},Right:function(t){var n=t.session,r=t.selection.isEmpty()?t.selection.lead.column:-1;t.navigateRight();var i=n.getTokenAt(0,r+1);r==t.selection.lead.column&&i.type=="invisible"&&n.doc.insertInLine({row:0,column:r},i.value)},Up:function(e){e.navigateHistory(-1)},Down:function(e){e.navigateHistory(1)},"Ctrl-Home|PageUp":function(e){e.navigateHistory(0)},"Ctrl-End|PageDown":function(e){e.navigateHistory()}}),e.history=[],e.navigateHistory=function(e){var t=this.getCurrentCommandWithHistory()||{},n=t.history||this.history,r=n.index,i=n[r]||"";e==0?r=0:e==null?r=n.length:typeof e=="number"&&(r+=e,r<0&&(r=0),r>n.length&&(r=n.length)),i=n[r]||"",t.history&&t.name&&(i=t.name+i),this.setValue(i,1),n.index=r},e.addToHistory=function(e){var t=this.getCurrentCommandWithHistory()||{},n=t.history||this.history;e=e||this.getValue(),t.name&&t.history&&(e=e.substr(t.name.length)),e&&e!=n[n.index]&&(n.push(e),n.index=n.length)},e.getCurrentCommand=function(){var e=this.session.getTokens(0),t=e[e.length-1];return t&&t.command},e.getCurrentCommandWithHistory=function(){var e=this.session.getTokens(0);for(var t=e.length;t--;){var n=e[t];if(n&&n.command&&n.command.history)return n.command}},e.on("blur",function(){e.renderer.$cursorLayer.element.style.opacity=0,e.getValue()||(e.renderer.content.style.visibility="hidden",e.$messageNode.style.display="",e.$inMessageMode=!0,e.$messageNode.textContent=e.$message||"")}),e.on("focus",function(){e.renderer.$cursorLayer.element.style.opacity="",e.renderer.content.style.visibility="",e.$messageNode.style.display="none",e.$inMessageMode=!1}),e.commands.on("exec",function(t){if(!t.command)return;t.command.name=="insertstring",e.commands.lastCommandName=t.command.name}),e.session.bgTokenizer.$tokenizeRow=function(e){function s(e,t){i.push({type:e,value:t,command:r})}var t=this.doc.getLine(e),r=null,i=[];while(t.length){var o=v(r),u=n(t,o);if(!u.length){s("text",t);break}var a=u[0];r=m(a,r),a.length>=t.length?(s("keyword",t),s("invisible",a.substring(t.length))):s("keyword",a),t=t.substr(a.length);var f=t.search(/\S|$/);f>0&&(s("text",t.substring(0,f)),t=t.substr(f),t.length||(u=v(r)))}return this.lines[e]=i,this.states[e]=u,i},e.$messageNode=document.createElement("div"),e.$messageNode.style.cssText="position:absolute;color:darkslateblue;padding:0 5px;top:0;font-size:11px",e.container.appendChild(e.$messageNode),e.$clearMessageDelayed=l.delayedCall(function(){e.setMessage("")}),e.setTimedMessage=function(t,n){this.setMessage(t),this.once("setMessage",function(){e.$clearMessageDelayed.cancel()}),e.$clearMessageDelayed.schedule(n||2e3)},e.setMessage=function(e,t){this._signal("setMessage",e),this.$message=e,this.$inMessageMode&&(this.$messageNode.textContent=e)},e.isFocused()||e._emit("blur"),e.commands.removeCommands(["find","gotoline","findall","replace","replaceall"])}}),define("text!ext/vim/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox position="9000" class="underlined" label="Vim Mode" value="[editors/code/@vimmode]" skin="checkbox_grey" onclick="require(\'ext/vim/vim\').toggle()" />\n</a:application>\n'}),define("ext/vim/vim",["require","exports","module","core/ide","core/ext","ext/editors/editors","ext/code/code","ext/vim/cli","ext/menus/menus","ext/settings/settings","text!ext/vim/settings.xml","ext/themes/themes"],function(e,t,n){"use strict";var r=e("core/ide"),i=e("core/ext"),s=e("ext/editors/editors"),o=e("ext/code/code"),u=e("ext/vim/cli"),a=e("ext/menus/menus"),f=e("ext/settings/settings"),l=e("text!ext/vim/settings.xml"),c=e("ext/themes/themes");n.exports=i.register("ext/vim/vim",{name:"Vim mode",dev:"Ajax.org",type:i.GENERAL,deps:[s,o,f],nodes:[],alone:!0,hook:function(){function i(r){a.addItemByPath("View/Keyboard Mode/"+r,new apf.item({type:"radio",value:r.toLowerCase(),onclick:function(n){e.setMode(t.getValue())}}),n+=100)}var e=this,t=a.addItemByPath("View/Keyboard Mode/",new apf.menu({"onprop.visible":function(e){e.value&&t.select(null,f.model.queryValue("editors/code/@keyboardmode"))}}),15e4),n=1e3;window.mnuKbModes=t,i("Default"),i("Vim"),i("Emacs"),r.addEventListener("settings.load",function(){var e=f.model.queryNode("editors/code");e.hasAttribute("vimmode")&&e.removeAttribute("vimmode"),f.setDefaults("editors/code",[["keyboardmode","default"]])});var s=function(){e.setMode()};r.addEventListener("init.ext/code/code",s),r.addEventListener("code.ext:defaultbindingsrestored",s),r.addEventListener("theme.change",this.updateTheme.bind(this))},setMode:function(e){if(!f.model)return;var t=f.model.queryNode("editors/code");e==undefined?e=t.getAttribute("keyboardmode"):(t.setAttribute("keyboardmode",e),f.save()),i.initExtension(this);var r=o.amlEditor.$editor;e=="emacs"||e=="vim"?e="ace/keyboard/"+e:e=null,r.setKeyboardHandler(e),e?(this.getCommandLine().show(),r.cmdLine=this.cmdLine.ace,r.showCommandLine=function(e){r.cmdLine.editor=r,n.exports.cmdLine.show(),r.cmdLine.focus(),typeof e=="string"&&r.cmdLine.setValue(e,1)}):this.cmdLine&&this.cmdLine.hide()},init:function(){},enable:function(){},getCommandLine:function(){return this.cmdLine||(this.cmdLine=new apf.codebox,this.cmdLine.setHeight(19),colMiddle.appendChild(this.cmdLine),this.cmdLine.$ext.className="searchbox tb_console",this.updateTheme(),u.initCmdLine(this.cmdLine.ace)),this.cmdLine},updateTheme:function(){if(!this.cmdLine)return;var e=this.cmdLine.ace.container.parentNode.style;e.padding="2px 1px 1px 3px",e.border="none",e.borderTop="1px solid rgba(0, 0, 0, .3)",e.boxShadow="inset 0 3px 10px 0 rgba(0, 0, 0, .1)";var t=c.getActiveTheme();if(!t)return;this.cmdLine.ace.setTheme(t),e.background=t.textBg},disable:function(){var e=o.amlEditor.$editor;e&&(e.keyBinding.removeKeyboardHandler(e.$vimModeHandler),e.keyBinding.removeKeyboardHandler(e.$emacsModeHandler)),this.cmdLine&&this.cmdLine.hide()},destroy:function(){a.remove("Tools/Keyboard Mode"),this.cmdLine&&(this.cmdLine.hide(),this.cmdLine.removeNode(),this.cmdLine=null),this.$destroy()}})}),define("text!ext/guidedtour/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n    <a:window name="guidetool">\n        <a:style><![CDATA[\n            .guidetool {\n                position : relative;\n                overflow : visible;\n                z-index  : 10000;\n                box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.25);\n                -moz-border-radius    : 8px;\n                -webkit-border-radius : 8px;\n                border-radius         : 8px;\n                -webkit-box-shadow: 0 1px 5px 1px #000000;\n                -moz-box-shadow: 0 1px 5px 1px #000000;\n                box-shadow: 0 1px 5px 1px #000000;\n            }\n            .guidetool .gt-header {\n                display : none;\n            }\n            .guidetool .gt-content {\n                background : url(images/tour-info-bg.png) repeat 0 0;\n                border : 1px solid #000101;\n                -webkit-box-shadow: inset 0px 1px 0px 0px #343434;\n                -moz-box-shadow: inset 0px 1px 0px 0px #343434;\n                box-shadow: inset 0px 1px 0px 0px #343434;\n                -moz-border-radius    : 8px;\n                -webkit-border-radius : 8px;\n                border-radius         : 8px;\n                padding: 15px 15px;\n                min-height: 25px;\n            }\n            .guidetool .gt-content .text {\n                color: #cee57f;\n                background : url(images/tour-info-bg.png) repeat 0 0;\n            }\n            .guidetool .gt-arrow {\n                position: absolute;\n                width: 25px;\n                height: 25px;\n                background : url(images/arrow.png) no-repeat 0 0;\n            }\n            .guidetool.top .gt-arrow {\n                left: 50%;\n                height: 17px;\n                bottom: -16px;\n                background-position : 0 -42px;\n            }\n            .guidetool.bottom .gt-arrow {\n                left: 50%;\n                top: -15px;\n                height: 17px;\n                background-position : 0 -25px;\n            }\n            .guidetool.left .gt-arrow {\n                right: -24px;    \n                top: 37%;\n                background-position : 0 -59px;\n            }\n            \n            .guidetool.right .gt-arrow {\n                left: -24px;	\n                top: 43%;\n                background-position : 0 0;\n            }\n            \n            .wn_cp_content .btnIcon .lbl span {\n                width: 40px;\n            }\n            \n            .tgDialog {\n                z-index: 99999;\n            }\n            .tgDialog, .guidetool {\n                z-index: 999999;\n            }\n             \n            .tgDialog > .bk-header {\n                padding-bottom: 10px;\n            }\n                \n            .tgDesc {\n            }\n             \n            .tgDesc a {\n                color: #20800a;\n                text-decoration: none;\n            }\n\n            .tgControlButton {\n                width: 85px;\n            }\n            \n            .tgPlayButton {\n                width: 40px;\n            }\n            \n            .tgPlayButton .caption {\n                height: 15px;\n                background: url(images/tg_button_play.png) no-repeat 14px 4px;\n            }\n            \n            .tgBackButton .caption {\n                height: 15px;\n                background: url(images/tg_button_back.png) no-repeat 20px -21px;\n            }\n            \n            .tgForwardButton .caption {\n                height: 15px;\n                background: url(images/tg_button_forward.png) no-repeat 27px 5px;\n            }\n        ]]></a:style>\n        <a:style condition="apf.isGecko"><![CDATA[\n            .tgDesc {\n                height: 130px;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main\n              collapsed-height = "30"\n              minheight        = "30"\n              minwidth         = "60"\n              container        = "div[2]"\n              drag             = "div[2]"\n              title            = "div[1]/div[1]/text()"\n              icon             = "div[1]/div[1]/div[1]"\n              buttons          = "div[1]/div[1]/div[2]">\n                <div class="guidetool">\n                    <div class="gt-header">\n                        <div class="hcontent">-<div class="icon"></div><div class="buttons"></div></div>\n                        <div class="right"></div>\n                    </div>\n                    <div class="gt-content"> </div>\n                    <div class="gt-arrow"></div>\n                </div>\n            </a:main>\n            <a:button>\n                <div> </div>\n            </a:button>\n        </a:presentation>\n    </a:window>\n    <a:modalwindow name="win-controls">\n        <a:style><![CDATA[\n            .win-controls {\n                position : relative;\n                overflow : hidden;\n                z-index  : 10000;\n                \n                -moz-border-radius    : 6px 6px 6px 6px;\n                -webkit-border-radius : 6px 6px 6px 6px;\n                border-radius         : 6px 6px 6px 6px;\n                \n                -webkit-box-shadow: 0 2px 10px 1px #000000;\n                -moz-box-shadow: 0 2px 10px 1px #000000;\n                box-shadow: 0 2px 10px 1px #000000;\n                border: 1px solid #000101;\n                background: url(images/controls-bg.png) repeat-x 0 0;\n            }\n\n            .win-controls .wc-container {\n                position:absolute;\n                overflow:visible;\n                left : 0;\n                top  : 0;\n                right : 0;\n                bottom : 0;\n                z-index: 1;\n            }\n        ]]></a:style>\n    \n        <a:presentation>\n            <a:main\n              collapsed-height = "26"\n              minheight        = "50"\n              minwidth         = "50"\n              container        = "div[1]"\n              title            = "div[1]/text()">\n                <div class="win-controls">\n                    <div class="wc-container"> </div>\n                </div>\n            </a:main>\n            <a:button>\n                <div/>\n            </a:button>\n        </a:presentation>\n    </a:modalwindow>\n</a:skin>'}),define("text!ext/guidedtour/guidedtour.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">      \n    <a:window id = "winTourGuide"\n      title   = "Guided Tour"\n      center  = "true"\n      modal   = "true"\n      buttons = "close"\n      kbclose = "true"\n      width   = "360"\n      skin    = "bk-window"\n      class   = "relative">\n        <a:vbox padding="10" edge="15">\n            <a:text id="winTourDesc" class="tgDesc modal_text"/>\n        </a:vbox>\n        <a:hbox padding="10" pack="end" edge="10 10 10 20" align="center">\n            <a:button id="winTourButtonDone" \n              default = "2"  \n              class   = "btn-green" \n              skin    = "btn-default-css3"\n              visible = "false"\n              onclick = "winTourGuide.hide();" >Done</a:button>\n            <a:button id="winTourButtonClose" \n              default = "2"  \n              skin    = "btn-default-simple" \n              onclick = "winTourGuide.hide();" >Return to the IDE</a:button>\n            <a:button id="winTourButtonStart" \n              default = "2" \n              class   = "btn-green" \n              skin    = "btn-default-css3" \n              onclick = "require(\'ext/guidedtour/guidedtour\').startTour();">Let\'s start!</a:button>\n        </a:hbox>\n    </a:window>\n    <a:window id = "tourControlsDialog"\n      title   = ""\n      center  = "true"\n      modal   = "false"\n      kbclose = "false"\n      width   = "295"\n      zindex  = "99999"\n      height  = "58"\n      skinset = "guidedtour"\n      skin    = "win-controls"\n      class   = "tgDialog">\n        <a:vbox>\n            <a:hbox padding="10" pack="center" edge="16 15 10" align="center">\n                <!-- Play pause etc -->\n                <a:button id = "btnTourStepBack"\n                  class    = "tgControlButton tgBackButton"\n                  skin     = "btn-default-css3"\n                  width    = "75"\n                  height   = "25"\n                  disabled = "true"\n                  tooltip  = "Go Back"\n                  onclick  = "require(\'ext/guidedtour/guidedtour\').stepBack();"/>\n                <a:button id = "btnTourPlay"\n                  class   = "btn-green tgPlayButton"\n                  tooltip = "Play"\n                  width   = "40"\n                  height  = "25"\n                  skin    = "btn-default-css3"\n                  onclick = "require(\'ext/guidedtour/guidedtour\').togglePlay();" />\n                <a:button id = "btnTourStepForward"\n                  class   = "tgControlButton tgForwardButton"\n                  skin    = "btn-default-css3"\n                  tooltip = "Go Forward"\n                  width   = "75"\n                  height  = "25" \n                  onclick = "require(\'ext/guidedtour/guidedtour\').stepForward();" />\n                <a:divider skin="c9-divider" />\n                <a:button onclick="tourControlsDialog.hide();require(\'ext/guidedtour/guidedtour\').closeTG()" skin="btn-default-simple">Quit</a:button>\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n        \n    <a:window id = "winTourText"\n      title     = ""\n      center    = "false"\n      modal     = "false"\n      buttons   = ""\n      kbclose   = "false"\n      width     = "160"\n      skinset   = "guidedtour"\n      skin      = "guidetool"\n      zindex    = "999999"\n      draggable = "false">\n        <a:text id="textTourDesc" flex="1" />     \n    </a:window>\n</a:application>'}),define("text!ext/guidedtour/tour.js",[],function(){return'this.tour = {\n    initialText: "Welcome to the guided tour! We\'ll introduce you to some of the ways Cloud9 IDE makes it easy for you to program faster and smarter.\\n\\nDuring the tour, you can click the play button to be taken on the tour automatically. Or, you can click the forward and backward buttons to navigate on your own.\\n\\nDuring the tour, the IDE is mostly disabled to provide a smoother experience.",\n    finalText: "Well, that\'s everything! Still have questions? Head on over to <a href=\\"http://support.c9.io/forums\\" target=\\"_blank\\">our documentation site</a>.",\n    steps: [\n    {\n        before: function() {\n\n        },\n        el: undefined,\n        div: "navbar",\n        desc: "This is the project bar, where your workflow begins and ends. Your project tree, preferences, debugging and deploy options are all located here.",\n        pos: "bottom",\n        time: 4\n    }, {\n        before: function() {\n           panels.activate(require("ext/tree/tree"));\n        },\n        el: undefined,\n        div: "navbar.childNodes[1]",\n        desc: "This button shows and hides your project files.",\n        pos: "right",\n        time: 4\n    }, {\n        before: function() {\n            panels.activate(require("ext/openfiles/openfiles"));\n        },\n        el: undefined,\n        div: "navbar.childNodes[2]",\n        desc: "This button shows and hides your open files in a list view.",\n        pos: "right",\n        time: 4\n    }, {\n        before: function() {\n            require("ext/settings/settings").show();\n        },\n        el: undefined,\n        div: "navbar.childNodes[navbar.childNodes.length - 2]",\n        desc: "This is the preferences hub for all Cloud9 IDE features.",\n        pos: "right",\n        time: 4\n    }, {\n        before: function() {\n            panels.activate(require("ext/tree/tree"));\n        },\n        el: "winFilesViewer",\n        desc: "The Project Tree lets you drag and drop new files into your project. Your project files can also be quickly searched by pressing Ctrl/Cmd-E. You can also right-click to see context options.",\n        pos: "right",\n        time: 4\n    }, {\n        before: function() {\n            if (madeNewFile) {\n                madeNewFile = false;\n                require("ext/tabbehaviors/tabbehaviors").closetab(tabEditors.getPage());\n            }\n        },\n        el: plus_tab_button,\n        desc: "Use this button to quickly add new files to the editor. We\'ll push it right now.",\n        extraTop: -37,\n        pos: "left",\n        time: 4\n    }, {\n        before: function(){\n            if (madeNewFile == false) {\n                madeNewFile = true;\n                require("ext/newresource/newresource").newfile();\n            }\n            settings.model.setQueryValue("editors/code/@gutter", true); // has to be here to force show when new editor opens\n            settings.model.setQueryValue("auto/statusbar/@show", true);\n            require("ext/statusbar/statusbar").preinit();\n        },\n        el: tabEditors.$buttons,\n        desc: "Rearrange these tabs any way you like, and cycle through them with keyboard shortcuts.",\n        extra: 160,\n        pos: "bottom",\n        time: 4\n    }, {\n        before: function() {\n            tabEditors.getPage().$doc.setValue(helloWorldScript);\n            if (!save)\n                save = require("ext/save/save");\n            var page = tabEditors.getPage();\n            var file = page.$model.data;\n            file.setAttribute("guidedtour", "1");\n            file.setAttribute("contenttype", "javascript");\n            save._saveAsNoUI(page, file.getAttribute("path"), ide.davPrefix + "/helloWorld-guidedTour.js");\n            require("ext/tree/tree").refresh();\n        },\n        el: undefined,\n        div: "editor",\n        desc: "Here\'s a quick Node.js example, saved as \\"helloWorld-guidedTour.js.\\"",\n        extra: -40,\n        pos: "left",\n        time: 4\n    }, {\n        before: function(){\n            if (wentToZen){\n                zen.fadeZenButtonOut();\n                wentToZen = false;\n            }\n        },\n        el: undefined,\n        div: "editorGutter",\n        desc: "The gutter does more than show line numbers. It also detects and displays warnings and errors in your code. If you\'re debugging a Node.js application, you can also set breakpoints here.",\n        extraTop: -40,\n        pos: "right",\n        time: 5\n    }, {\n        before: function() {\n\n        },\n        el: undefined,\n        div: "barIdeStatus",\n        desc: "The status bar shows your cursor position, and provides quick access to some editor settings.",\n        extraTop: -40,\n        pos: "left",\n        time: 4\n    }, {\n        before: function(){\n            wentToZen = true;\n            zen.fadeZenButtonIn();\n        },\n        el: undefined,\n        div: undefined,\n        desc: "If you hover over this corner, you can activate Zen Mode, which is a distraction-free environment. We\'ll press that button now.",\n        extraTop: -40,\n        pos: "left",\n        time: 5\n    }, {\n        before: function() {\n            var hlElement = require("ext/guidedtour/guidedtour").hlElement;\n            hlElement.style.visibility = "hidden";\n            winTourText.hide();\n            document.getElementsByClassName("tgDialog")[0].style.display = "none";\n            zen.fadeZenButtonOut();\n            zen.enterIntoZenMode();\n\n            setTimeout(function(){\n                zen.escapeFromZenMode();\n                zen.fadeZenButtonOut();\n\n                setTimeout(function() {\n                    document.getElementsByClassName("tgDialog")[0].style.display = "";\n                    hlElement.style.visibility = "visible";\n                    winTourText.show();\n\n                    require("ext/guidedtour/guidedtour").stepForward();\n                }, 250);\n            }, 2300);\n        },\n        time: 4,\n        desc: "",\n        skip: true\n    }, {\n        before: function(){\n            require("ext/console/console").showInput();\n        },\n        el: cliBox,\n        desc: "This command line is similar to what you expect from your local terminal. You can always type \'help\' to get a list of available commands.",\n        pos: "top",\n        time: 5\n    }, {\n        before: function() {\n            //ideConsole.enable();\n            ideConsole.show();\n        },\n        el: (apf.XPath || apf.runXpath() || apf.XPath).selectNodes(\'DIV[1]\', tabConsole.$ext),\n        desc: "After clicking the expand arrows, you\'ll be able to get to the full console view. Any output from your program&mdash;like console.log() messages or compilation errors&mdash;appears in the Output tab.",\n        pos: "top",\n        time: 4\n    }, {\n        before: function() {\n            //winRunCfgNew.hide();\n            //ideConsole.disable();\n            var doc = require("ext/code/code").amlEditor.getSession();\n            doc.setBreakpoints([1]);\n        },\n        el: undefined,\n        div: "editorGutter",\n        extraTop: -40,\n        desc: "We\'re ready to test our code, so we\'ve inserted a breakpoint on this line by clicking in the gutter. Before debugging, though, we\'ll need to set up a debugging scenario.",\n        pos: "right",\n        time: 5\n    }, {\n        before: function(){\n            panels.activate(require("ext/runpanel/runpanel"));\n            if (!madeDebug) {\n                settings.model.setQueryValue(\'auto/configurations/@debug\', true);\n            }\n            setTimeout(function(){\n                lstRunCfg.select(lstRunCfg.$model.queryNode("//config"), null, null, null, true)\n            });\n        },\n        el: "winRunPanel",\n        desc: "Here\'s where the fun begins! After clicking Run & Debug in the project bar, you\'ll be able to create or modify a debug configuration. Every configuration needs a name and a file to run, but you can also pass command-line arguments.",\n        pos: "right",\n        time: 5\n    }, {\n        before: function() {\n            require(\'ext/runpanel/runpanel\').run(true);\n            var bar = dockpanel.layout.$getLastBar();\n            if(!bar) {\n                dockpanel.showBar(dockpanel.getBars("ext/debugger/debugger", "pgDebugNav")[0]);\n            }\n        },\n        el: (apf.XPath || apf.runXpath() || apf.XPath).selectNodes(\'DIV[1]\', tabConsole.$ext),\n        desc: "Whoa! A lot of things just happened. First off, the Output tab opened up to show us that our code is running, and currently being debugged.",\n        pos: "top",\n        time: 4\n    }, {\n        before: function() {\n        },\n        el: function(){\n            return dockpanel.layout.$getLastBar();;\n        },\n        desc: "Next, whenever you\'re debugging code, you get a new debugging toolbar.",\n        pos: "left",\n        time: 4\n    }, {\n        before: function() {\n            var menuId = dockpanel.getButtons("ext/debugger/debugger", "pgDebugNav")[0];\n            if(menuId) {\n                dockpanel.layout.showMenu(menuId.uniqueId);\n                if(!pgDebugNav.parentNode.parentNode.visible)\n                    btnRunCommands.dispatchEvent("mousedown",  {});\n            }\n        },\n        el: function(){\n            return pgDebugNav;\n        },\n        desc: "In this toolbar, the usual start, stop, and step buttons are at the top, to help control the flow of the debugging.",\n        extraTop: -40,\n        pos: "left",\n        time: 4\n    }, {\n        before: function() {\n            var menuId = dockpanel.getButtons("ext/debugger/debugger", "dbgVariable")[0];\n            if(menuId) {\n                dockpanel.layout.showMenu(menuId.uniqueId);\n                dbgVariable.parentNode.set(dbgVariable)\n            }\n        },\n        el: function(){\n            return dbgVariable;\n        },\n        desc: "In this section you can view variables in the debug state.",\n        pos: "left",\n        time: 4\n    }, {\n        before: function() {\n            var menuId = dockpanel.getButtons("ext/debugger/debugger", "dbgCallStack")[0];\n            if(menuId)\n                dockpanel.layout.showMenu(menuId.uniqueId);\n            dbgCallStack.parentNode.set(dbgCallStack);\n\n            txtConsoleInput.setValue("");\n        },\n        el: function(){\n            return dbgCallStack;\n        },\n        desc: "Here you can see the call stack of the program you are debugging.",\n        pos: "left",\n        time: 4\n    }, {\n        before: function() {\n            dbgCallStack && dbgCallStack.parentNode && dbgCallStack.parentNode.parentNode.hide();\n            dbg.main.step();\n            txtConsoleInput.setValue("git status");\n        },\n        el: (apf.XPath || apf.runXpath() || apf.XPath).selectNodes(\'DIV[1]\', tabConsole.$ext),\n        desc: "We indicated to the debugger that we want to continue. At last, the console.log() message about the server running printed out. Now, we\'re going to simulate typing \'git status\' in the command line.",\n        pos: "top",\n        time: 4\n    }, {\n        before: function() {\n            require(\'ext/runpanel/runpanel\').stop();\n\n            if(trFiles.$model.queryNode("//file[@path=\'" + ide.davPrefix + "/helloWorld-guidedTour.js\']")) {\n                require("ext/console/console").evalInputCommand(txtConsoleInput.getValue());\n                txtConsoleInput.setValue("rm helloWorld-guidedTour.js");\n            }\n        },\n        el: (apf.XPath || apf.runXpath() || apf.XPath).selectNodes(\'DIV[1]\', tabConsole.$ext),\n        desc: "As expected, there\'s our new file being tracked by git. We\'re done testing it, and don\'t want to keep it around, so let\'s remove it with \'rm helloWorld-guidedTour.js\'.",\n        pos: "top",\n        time: 4\n    }, {\n        before: function() {\n            panels.activate(require("ext/tree/tree"));\n            var demoFile = trFiles.$model.queryNode("//file[@path=\'" + ide.davPrefix + "/helloWorld-guidedTour.js\']");\n            if(demoFile && !deletedFile) {\n                deletedFile = true;\n                tabEditors.remove(tabEditors.getPage());\n                require("ext/console/console").evalInputCommand(txtConsoleInput.getValue());\n                txtConsoleInput.setValue("");\n                trFiles.confirmed = true;\n                trFiles.remove(demoFile);\n                trFiles.confirmed = false;\n                require("ext/tree/tree").refresh();\n            }\n        },\n        el: "winFilesViewer",\n        desc: "Voila! Notice that the file is gone from your project.",\n        extraTop: -20,\n        pos: "right",\n        time: 4\n    }]\n}\n'}),define("text!ext/guidedtour/hello-world-script.txt",[],function(){return"var http = require('http');\nhttp.createServer(function (req, res) {\n   res.writeHead(200, {'Content-Type': 'text/plain'});\n   res.end('Hello World\\n');\n}).listen(process.env.PORT);\nconsole.log('Server running');"}),define("ext/guidedtour/guidedtour",["require","exports","module","core/ext","core/ide","core/settings","text!ext/guidedtour/skin.xml","text!ext/guidedtour/guidedtour.xml","ext/console/console","ext/zen/zen","ext/dockpanel/dockpanel","text!ext/guidedtour/tour.js","text!ext/guidedtour/hello-world-script.txt","ext/panels/panels","ext/tree/tree","ext/tree/tree","ext/code/code","ext/guidedtour/guidedtour","ext/tree/tree","ext/sidebar/sidebar"],function(require,exports,module){var ext=require("core/ext"),ide=require("core/ide"),settings=require("core/settings"),skin=require("text!ext/guidedtour/skin.xml"),markup=require("text!ext/guidedtour/guidedtour.xml"),ideConsole=require("ext/console/console"),zen=require("ext/zen/zen"),dockpanel=require("ext/dockpanel/dockpanel"),strTour=require("text!ext/guidedtour/tour.js"),helloWorldScript=require("text!ext/guidedtour/hello-world-script.txt"),save,hasDeploy=!1,panels=require("ext/panels/panels"),madeNewFile=!1,wentToZen=!1,madeDebug=!1,deletedFile=!1;module.exports=ext.register("ext/guidedtour/guidedtour",{name:"Guided Tour",dev:"Cloud9 IDE, Inc.",alone:!0,type:ext.GENERAL,markup:markup,skin:{id:"guidedtour",data:skin,"media-path":ide.staticPrefix+"/ext/guidedtour/images/"},currentStep:-1,currentEl:null,nodes:[],autodisable:ext.ONLINE|ext.LOCAL,hook:function(){},init:function(amlNode){this.initTour(),eval(strTour),this.overlay=document.createElement("div"),this.hlElement=document.createElement("div"),this.overlay.setAttribute("style","display:none;position:fixed;left: 0px;top: 0px;width:100%;height:100%;opacity:0.3;background:#000;opacity:0"),document.body.appendChild(this.overlay),this.hlElement.setAttribute("style","z-index:9998;display:none;position:absolute;box-shadow:0px 0px 15px #000;"),document.body.appendChild(this.hlElement),winTourGuide.addEventListener("hide",this.shutdown(this.hlElement)),tourControlsDialog.addEventListener("hide",this.shutdown(this.hlElement))},launchGT:function(){ext.initExtension(this),this.hideMenus(),madeNewFile=wentToZen=madeDebug=deletedFile=!1,this.currentStep=-1,winTourDesc.setValue(this.tour.initialText),winTourGuide.show(),winTourButtonStart.show(),winTourButtonClose.show(),winTourButtonDone.hide();var e=document.getElementsByClassName("bk-window-cover");e[e.length-2].style.opacity="0"},hideMenus:function(){var e=dockpanel.getButtons("ext/debugger/debugger");if(!e)return;for(var t=0,n;t<e.length;t++){n=e[t];if(!n.showMenu||!n.cache)continue;self[n.cache.submenu].hide()}},initTour:function(){this.cliBoxState=settings.model.queryValue("auto/console/@showinput"),ideConsole.showInput(),this.gutterState=settings.model.queryValue("editors/code/@gutter"),this.statusBarState=settings.model.queryValue("auto/statusbar/@show"),this.projectFilesState=settings.model.queryValue("auto/panels/@active"),panels.activate(require("ext/tree/tree"));var e=trFiles.$model.queryNode("//file[@path='"+ide.davPrefix+"/helloWorld-quideTour.js']");e&&!deletedFile&&!1&&(txtConsoleInput.setValue("rm helloWorld-quideTour.js"),deletedFile=!0,ideConsole.commandTextHandler({keyCode:13,currentTarget:txtConsoleInput}),trFiles.confirmed=!0,trFiles.remove(e),trFiles.confirmed=!1,require("ext/tree/tree").refresh())},togglePlay:function(){this.playing?this.pause():this.play()},play:function(){btnTourPlay.$ext.childNodes[1].style.backgroundPosition="-28px 3px",btnTourPlay.tooltip="Play",this.playing=!0,this.stepForwardAuto()},pause:function(){btnTourPlay.$ext.childNodes[1].style.backgroundPosition="14px 4px",btnTourPlay.tooltip="Pause",this.playing=!1,clearTimeout(this.$timerForward)},end:function(){this.pause(),this.hlElement.style.opacity="0"},startTour:function(){var e=this;this.currentStep=-1,winTourGuide.hide(),tourControlsDialog.show(),this.stepForward(),this.overlay.style="block",apf.removeEventListener("keyup",e.keyUpEvent),apf.addEventListener("keyup",e.keyUpEvent=function(t){t.keyCode==39?e.stepForward():t.keyCode==37&&e.stepBack()});var t=document.getElementsByClassName("bk-window-cover");t[t.length-1].style.opacity="0"},stepBack:function(){this.currentStep--;var e=this.tour.steps[this.currentStep];if(!e)return;e.skip!==undefined&&(this.currentStep--,e=this.tour.steps[this.currentStep]),this.currentStep===0&&(btnTourStepBack.disable(),btnTourStepBack.$ext.childNodes[1].style.backgroundPosition="20px -21px"),btnTourStepForward.enable(),this.commonStepOps(e)},stepForwardAuto:function(){var e=this,t=this.currentStep>-1?this.tour.steps[this.currentStep].time:0;this.$timerForward=setTimeout(function(){e.stepForward(),e.tour.steps[e.currentStep+1]?e.stepForwardAuto():(e.end(),e.finalStep())},t*1e3)},stepForward:function(){this.currentStep++;if(!this.tour.steps[this.currentStep])this.finalStep();else{this.currentStep>0&&(btnTourStepBack.enable(),btnTourStepBack.$ext.childNodes[1].style.backgroundPosition="20px 5px"),this.currentStep>25&&(btnTourStepBack.disable(),btnTourStepBack.$ext.childNodes[1].style.backgroundPosition="20px -21px");var e=this.tour.steps[this.currentStep];this.commonStepOps(e)}},finalStep:function(){winTourText.close(),tourControlsDialog.hide(),this.closeTG(),this.hlElement.style.display="none",winTourGuide.show(),winTourDesc.setValue(this.tour.finalText),this.currentStep=-1,winTourButtonStart.hide(),winTourButtonClose.hide(),winTourButtonDone.show()},commonStepOps:function(step){function getCurrentEl(){var amlEditor=require("ext/code/code").amlEditor;step.el!==undefined?(typeof step.el=="string"?step.el=self[step.el]:typeof step.el=="function"&&(step.el=step.el()),_self.currentEl=step.el):step.div=="editor"?_self.currentEl=amlEditor:step.div=="barIdeStatus"?_self.currentEl=barIdeStatus:step.div!==undefined?step.div.indexOf("navbar")>=0?_self.currentEl=eval(step.div):step.div=="expandedDbg"?_self.currentEl=expandedDbg:step.div=="editorGutter"?_self.currentEl=(apf.XPath||apf.runXpath()||apf.XPath).selectNodes("DIV[2]/DIV[1]/DIV[2]",amlEditor.$ext):step.node!==undefined?_self.currentEl=(apf.XPath||apf.runXpath()||apf.XPath).selectNodes(step.div,apf.document.selectSingleNode(step.node).$ext):_self.currentEl=(apf.XPath||apf.runXpath()||apf.XPath).selectNodes(step.div,amlEditor.$ext):_self.currentEl=btnZenFullscreen}this.currentStep>0&&(winTourText.hide(),this.hlElement.style.display="none");var _self=this;if(step.notAvailable){this.stepForward();return}step.before&&step.before(),setTimeout(function(){getCurrentEl();if(!_self.currentEl)return;_self.highlightElement(),winTourText.setAttribute("bottom",""),winTourText.setAttribute("top",""),winTourText.setAttribute("left",""),winTourText.setAttribute("right",""),textTourDesc.setValue(apf.escapeXML(step.desc));var e=_self.getElementPosition(_self.currentEl);if(!e)return;winTourText.setAttribute("class",step.pos),_self.setPositions(step.pos,e,winTourText,step.extra,step.extraTop),step.pos&&winTourText.show()},400)},setPositions:function(e,t,n,r,i){return e=="top"?(n.setAttribute("bottom",window.innerHeight-t[1]+25),n.setAttribute("left",t[0]+t[2]/2-n.getWidth()/2)):e=="right"?(r===undefined&&(r=0),i===undefined&&(i=0),n.setAttribute("left",t[0]+t[2]+25+r)):e=="bottom"?(r===undefined&&(r=0),i===undefined&&(i=0),n.setAttribute("top",t[3]+50+i),n.setAttribute("left",t[3]+r)):e=="left"&&(r===undefined&&(r=0),i===undefined&&(i=0),n.setAttribute("right",window.innerWidth-t[0]+15+r),n.setAttribute("top",t[1]+t[3]/2-n.getHeight()/2+i)),n},highlightElement:function(){this.resizeHighlightedEl();var e=this.hlElement.style.zIndex;winTourText.$ext.style.zIndex=e+1,tourControlsDialog.$ext.style.zIndex=e+2,this.hlElement.style.display="block"},resizeHighlightedEl:function(){var e=this.getElementPosition(this.currentEl);this.hlElement.style.left=e[0]+"px",this.hlElement.style.top=e[1]+"px",this.hlElement.style.width=e[2]-4+"px",this.hlElement.style.height=e[3]-4+"px",this.hlElement.style.display="block",this.hlElement.style.border="solid 2px #bee82c";if(this.currentEl.$ext){var t,n=this.currentEl;if(n)while(n&&n.tagName!="body"&&(!t||t<=9998))t=n.$ext&&n.$ext.style&&parseInt(n.$ext.style.zIndex||9997,10)+1,n=n.parentNode;else t=9998}else t=this.currentEl.style&&parseInt(this.currentEl.style.zIndex||9997)+1;this.hlElement.style.zIndex=t},getElementPosition:function(e){if(!e)return[0,0,0,0];var t=e.$ext;if(t===undefined){e.parentNode!==undefined?t=e.parentNode:t=e[0];var n=apf.getAbsolutePosition(t);return[n[0],n[1],t.offsetWidth,t.offsetHeight]}var n=apf.getAbsolutePosition(t),r=e.getWidth(),i=e.getHeight();return[n[0],n[1],r,i]},closeTG:function(){var e=this;winTourGuide.hide(),apf.removeEventListener("keyup",e.keyUpEvent)},shutdown:function(e){var t=this;return apf.removeEventListener("keyup",t.keyUpEvent),function(){require("ext/guidedtour/guidedtour").pause(),winTourText.hide(),tourControlsDialog.hide(),zen.fadeZenButtonOut(),(e||t.hlElement).style.display="none",t.currentStep=-1,t.overlay.style="none",settings.model.setQueryValue("auto/console/@showinput",t.cliBoxState),settings.model.setQueryValue("editors/code/@gutter",t.gutterState),settings.model.setQueryValue("auto/statusbar/@show",t.statusBarState),t.projectFilesState===!1&&require("ext/tree/tree").hide(),require("ext/sidebar/sidebar").animateToDefaultWidth()}}})}),define("text!ext/quickstart/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n<a:window name="qsImage">\n        <a:style><![CDATA[\n            .qsProjectBar {\n                position:absolute;\n                width: 167px;\n                height: 117px;\n                background: url(images/your_project_bar.png) no-repeat 0 0;\n                z-index  : 999999;\n            }\n            \n            .qsMenuBar {\n                position:absolute;\n                width: 167px;\n                height: 117px;\n                background: url(images/your_top_menu.png) no-repeat 0 0;\n                z-index  : 999999;\n            }\n            \n            .qsToolbar {\n                position:absolute;\n                width: 167px;\n                height: 117px;\n                background: url(images/your_toolbar.png) no-repeat 0 0;\n                z-index  : 999999;\n            }\n            \n             .qsCLI {\n                position:absolute;\n                width: 167px;\n                height: 200px;\n                background: url(images/your_command_line.png) no-repeat 0 0;\n                z-index  : 999999;\n            }\n        ]]></a:style>\n    \n        <a:presentation>\n        <a:main\n              collapsed-height = "30"\n              minheight        = "30"\n              minwidth         = "60"\n              container        = "div[2]"\n              drag             = "div[2]"\n              title            = "div[1]/div[1]/text()">\n                <div>\n                    <div>\n                    </div>\n                    <div class="image"> </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:window>\n    \n    <a:window name="win-quickstart">\n        <a:style><![CDATA[\n            .win-quickstart {\n                position : relative;\n                overflow : visible;\n                z-index  : 999999;\n                border-radius: 4px;\n            }\n            \n            .win-quickstart .header {\n                background: #000;\n                position: relative;\n                border-bottom: 1px solid #7d7d7d;\n                font-size: 24px;\n                font-weight: normal;\n                padding: 15px 20px 10px;\n                color: #ffffff;\n            }\n            \n            .win-quickstart .buttons {\n                position: absolute;\n                right: 0;\n                top: -23px;\n                padding: 4px;\n                background-color: #000000;\n                \n            }\n            \n            .win-quickstart .buttons .close {\n                width: 13px;\n                height: 13px;\n                background: url(images/close.png) no-repeat 0 0;\n            }\n            \n            .win-quickstart .buttons .close.hover {\n                background-position: -18px 0;\n            }\n            \n            .win-quickstart .buttons .close.down {\n                background-position: -35px 0;\n            }\n            \n            .win-quickstart .content {\n                \n            }\n            \n            .win-quickstart p {\n                padding: 0;\n                margin: 0;\n            }\n            .tgLink {\n                background : #000;\n                color: #fff;\n                padding: 0 5px 0 5px;\n                font-family: Tahoma, Arial;\n                margin-bottom: -16px;\n                text-decoration: none;\n            }\n            \n            .tgLink:hover {\n                text-decoration: underline;\n            }\n            \n            .win-quickstart .container {\n                padding: 10px 20px;\n                background : #000;\n                margin-top: 2px;\n                border-bottom: 1px solid #7d7d7d;\n            }\n            \n            .tgtext, .tgtext a {\n                color: #ffc02a;\n                font-size: 16px;\n                text-decoration: none;\n            }\n            \n            .win-quickstart .qsSupportText {\n                font-size: 12px;\n                color: #eeeeee;\n                padding: 18px 20px;\n            }\n            \n            .supportLink {\n                color: #b1dfff;\n                text-decoration: none;\n            }\n            \n            .supportLink:hover {\n                text-decoration: underline;\n            }\n            \n            .cbcontainer {\n                color: white;\n                margin-left: 12px;\n            }\n            \n            .qsCBContainer { \n            }\n            .checkboxDiv    {\n                width: 243px;\n                padding: 17px 20px 15px 5px;\n                border-bottom: 1px solid #7d7d7d;\n                background: black;\n            }\n\n            .buttonDiv {\n                width: 255px;\n                padding: 15px 0;\n                border-bottom: 1px solid #7d7d7d;\n                background: black;\n            }\n            \n            .btnclosetour {\n                margin: 0 auto;\n            }\n        ]]></a:style>\n\n    \n        <a:presentation>\n        <a:main\n              collapsed-height = "30"\n              minheight        = "30"\n              minwidth         = "60"\n              container        = "div[2]"\n              drag             = "div[2]"\n              title            = "div[1]/text()"\n              buttons          = "div[1]/div">\n                <div class="win-quickstart">\n                    <div class="header">\n                        <div class="buttons"> </div>\n                    </div>\n                    <div class="content"> </div>\n                </div>      \n            </a:main>\n            <a:button>\n                <div> </div>\n            </a:button>\n        </a:presentation>\n    </a:window>\n</a:skin>'}),define("text!ext/quickstart/quickstart.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">    \n    <a:window\n        id = "quickStartDialog"\n        title     = "Here are a few pointers to get you started!"\n        center    = "true"\n        modal     = "false"\n        buttons   = "close"\n        kbclose   = ""\n        width     = "500"\n        height    = "210"\n        skinset   = "quickstart"\n        skin      = "win-quickstart"\n        onhide    = "require(\'ext/quickstart/quickstart\').closeStart();"\n        draggable = "false">    \n        <div class="tgtext container">\n            <a href="javascript:void(0)" onclick="require(\'ext/quickstart/quickstart\').shutdownQSStartGT();">For a detailed guided tour, <span class="tgLink">click here!</span></a>\n        </div>\n        \n         <div class="qsSupportText container">\n            <p>If you ever run into trouble, be sure to check out our support page on \n            <a href="http://support.c9.io/home" class="supportLink" target="_blank">support.c9.io</a>,\n            or talk to us on <a href="https://twitter.com/#!/C9Support" class="supportLink" target="_blank">Twitter</a>.</p>\n        </div>\n        \n        <a:hbox class="qsCBContainer" edge="2 0 0 0" padding="2">\n            <div class="checkboxDiv">\n                 <a:checkbox id="quickStartCheckbox" \n                   skin     = "checkbox_black"\n                   checked  = "[{require(\'ext/settings/settings\').model}::auto/help/@show]"\n                   value    = "[{require(\'ext/settings/settings\').model}::auto/help/@show]"\n                   onafterchange = "require(\'ext/quickstart/quickstart\').setState(this.value);"\n                 >Show this quick start on startup</a:checkbox>\n            </div>\n            <div class="buttonDiv">\n                <a:button \n                  default = "2" \n                  width   = "200"\n                  skin    = "btn-default-css3" \n                  class   = "btn-green btnclosetour" \n                  onclick = "require(\'ext/quickstart/quickstart\').closeStart();">\n                    Got it, thanks!\n                </a:button>              \n            </div>\n        </a:hbox>\n    </a:window>\n    \n    <a:window\n        id = "qsProjectBar"\n        title = ""\n        center = "false"\n        modal = "false"\n        buttons = ""\n        kbclose   = "false"\n        width     = "200"\n        skinset   = "quickstart"\n        skin ="qsImage"\n        draggable = "false">\n        <a:vbox class="qsProjectBar">\n        </a:vbox>\n    </a:window>\n    \n    <a:window\n        id = "qsMenuBar"\n        title = ""\n        center = "false"\n        modal = "false"\n        buttons = ""\n        kbclose   = "false"\n        width     = "200"\n        skinset   = "quickstart"\n        skin ="qsImage"\n        draggable = "false">\n        <a:vbox class="qsMenuBar">\n        </a:vbox>\n    </a:window>\n    \n    <a:window\n        id = "qsToolbar"\n        title = ""\n        center = "false"\n        modal = "false"\n        buttons = ""\n        kbclose   = "false"\n        width     = "200"\n        skinset   = "quickstart"\n        skin ="qsImage"\n        draggable = "false">\n        <a:vbox class="qsToolbar">\n        </a:vbox>\n    </a:window>\n    \n    <a:window\n        id = "qsCLI"\n        title = ""\n        center = "false"\n        modal = "false"\n        buttons = ""\n        kbclose   = "false"\n        width     = "200"\n        skinset   = "quickstart"\n        skin ="qsImage"\n        draggable = "false">\n        <a:vbox class="qsCLI">\n        </a:vbox>\n    </a:window>\n</a:application>'}),define("ext/quickstart/quickstart",["require","exports","module","core/ext","core/ide","core/settings","ext/editors/editors","ext/sidebar/sidebar","text!ext/quickstart/skin.xml","text!ext/quickstart/quickstart.xml","ext/panels/panels","ext/console/console","ext/settings/settings","ext/settings/settings","ext/settings/settings","ext/settings/settings","ext/dockpanel/dockpanel","ext/guidedtour/guidedtour","ext/guidedtour/guidedtour"],function(e,t,n){var r=e("core/ext"),i=e("core/ide"),s=e("core/settings"),o=e("ext/editors/editors"),u=e("ext/sidebar/sidebar"),a=e("text!ext/quickstart/skin.xml"),f=e("text!ext/quickstart/quickstart.xml"),l;n.exports=r.register("ext/quickstart/quickstart",{name:"Quick Start",dev:"Cloud9 IDE, Inc.",alone:!0,type:r.GENERAL,markup:f,skin:{id:"quickstart",data:a,"media-path":i.staticPrefix+"/ext/quickstart/images/"},nodes:[],lastMinZindex:9016,init:function(t){l={identifiers:[{el:navbar,name:"qsProjectBar",pos:"right",before:function(){return e("ext/panels/panels").currentPanel||navbar.childNodes[1].dispatchEvent("mousedown"),!1}},{el:logobar,name:"qsMenuBar",pos:"bottom"},{el:tabEditors,name:"qsToolbar",pos:"left",visible:function(){return hboxDockPanel.childNodes[0]}},{el:self.txtConsoleInput,name:"qsCLI",pos:"top",before:function(){return e("ext/console/console").showInput(),self.txtConsoleInput}}]},this.animateui=s.model.queryValue("general/@animateui"),s.model.setQueryValue("general/@animateui",!1);for(var n=0;n<l.identifiers.length;n++){var r=l.identifiers[n];r.before&&(r.el=r.before()||r.el)}this.overlay=document.createElement("div"),this.overlay.setAttribute("style","z-index:9016;display:none;position:fixed;left: 0px;top: 0px;width:100%;height:100%;opacity:0.6;background:#000;"),document.body.appendChild(this.overlay)},hook:function(){i.addEventListener("settings.load",function(t){var n=e("ext/settings/settings").model.queryValue("auto/help/@show");if(n===""||n=="true")apf.getcookie("show-quick-start")=="false"?e("ext/settings/settings").model.setQueryValue("auto/help/@show","false"):(e("ext/settings/settings").model.setQueryValue("auto/help/@show","true"),apf.xmldb.setAttribute(e("ext/settings/settings").model.queryNode("auto/help"),"show","true"))})},launchQS:function(){var e=this;r.initExtension(this),this.hideMenus(),setTimeout(function(){e.overlay.style.display="block",e.arrangeQSImages(),quickStartDialog.show(),e.lastMinZindex>quickStartDialog.zindex&&(e.lastMinZindex=quickStartDialog.zindex),e.overlay.style.zIndex=e.lastMinZindex-1})},setState:function(e){apf.setcookie("show-quick-start",e,(new Date).getTime()+63072e6)},hideMenus:function(){var t=e("ext/dockpanel/dockpanel").getButtons("ext/debugger/debugger");if(!t)return;for(var n=0,r;n<t.length;n++){r=t[n];if(!r.showMenu||!r.cache)continue;self[r.cache.submenu].hide()}},arrangeQSImages:function(){var t,n,r;for(var i=0;i<l.identifiers.length;i++){if(l.identifiers[i].visible&&!l.identifiers[i].visible()||!l.identifiers[i].el)continue;t=e("ext/guidedtour/guidedtour").getElementPosition(l.identifiers[i].el),n=l.identifiers[i].pos,r=apf.document.getElementById(l.identifiers[i].name),r.setAttribute("bottom",""),r.setAttribute("top",""),r.setAttribute("left",""),r.setAttribute("right",""),this.setPositions(n,t,r),r.show(),this.lastMinZindex>r.zindex&&(this.lastMinZindex=r.zindex)}},setPositions:function(e,t,n){return e=="top"?(n.setAttribute("bottom",window.innerHeight-t[1]+140),n.setAttribute("left",t[0]+t[2]/2-n.getWidth()/2)):e=="right"?(n.setAttribute("left",t[0]+10),n.setAttribute("top",t[1]+t[3]/2-n.getHeight()/2)):e=="bottom"?(n.setAttribute("top",t[3]),n.setAttribute("right",t[0]+t[2]/2-n.getWidth()/2)):e=="left"&&(n.setAttribute("top",125),n.setAttribute("right",0)),n},closeStart:function(){quickStartDialog.hide(),this.overlay.style.display="none";var e;for(var t=0;t<l.identifiers.length;t++)e=apf.document.getElementById(l.identifiers[t].name),e.hide();s.model.setQueryValue("general/@animateui",this.animateui)},shutdownQSStartGT:function(){this.closeStart(),e("ext/guidedtour/guidedtour").launchGT()}})}),define("ext/jslanguage/jslanguage",["require","exports","module","core/ext","ext/editors/editors","ext/language/language"],function(e,t,n){var r=e("core/ext"),i=e("ext/editors/editors"),s=e("ext/language/language");n.exports=r.register("ext/jslanguage/jslanguage",{name:"Javascript Language Support",dev:"Ajax.org",type:r.GENERAL,deps:[i,s],alone:!0,init:function(){s.registerLanguageHandler("ext/jslanguage/parse"),s.registerLanguageHandler("ext/jslanguage/scope_analyzer"),s.registerLanguageHandler("ext/jslanguage/debugger"),s.registerLanguageHandler("ext/jslanguage/outline"),s.registerLanguageHandler("ext/jslanguage/jumptodef")}})}),define("ext/csslanguage/csslanguage",["require","exports","module","core/ext","ext/editors/editors","ext/language/language"],function(e,t,n){var r=e("core/ext"),i=e("ext/editors/editors"),s=e("ext/language/language");n.exports=r.register("ext/csslanguage/csslanguage",{name:"CSS Language Support",dev:"Ajax.org",type:r.GENERAL,deps:[i,s],alone:!0,init:function(){s.registerLanguageHandler("ext/csslanguage/css_handler")}})}),define("ext/htmllanguage/htmllanguage",["require","exports","module","core/ext","ext/editors/editors","ext/language/language"],function(e,t,n){var r=e("core/ext"),i=e("ext/editors/editors"),s=e("ext/language/language");n.exports=r.register("ext/htmllanguage/htmllanguage",{name:"HTML Language Support",dev:"Ajax.org",type:r.GENERAL,deps:[i,s],alone:!0,init:function(){s.registerLanguageHandler("ext/htmllanguage/html_completer")}})}),define("ext/autotest/autotest",["require","exports","module","core/ide","core/ext","ext/noderunner/noderunner","ext/filesystem/filesystem"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ext/noderunner/noderunner"),o=e("ext/filesystem/filesystem");n.exports=i.register("ext/autotest/autotest",{name:"autotest",dev:"Ajax.org",type:i.GENERAL,alone:!0,autodisable:i.ONLINE|i.LOCAL,hook:function(){r.addEventListener("afterfilesave",function(e){function a(e){e=e.slice(r.davPrefix.length+1).replace("//","/"),s.run(e,[],!1)}if(e.silentsave===!0)return;var t=e.node,n=t.getAttribute("path"),i=n.match(/^.*(_test|Test)\.js$/);if(i)a(n);else{var u=n.replace(/\.js$/,"_test.js");if(n==u)return;o.exists(u,function(e){e&&a(u),u=n.replace(/\.js$/,"Test.js");if(n==u)return;o.exists(u,function(e){e&&a(u)})})}})}})}),define("text!ext/closeconfirmation/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox class="underlined" label="Warn Before Exiting" value="[general/@confirmexit]" skin="checkbox_grey" position="18000" />\n</a:application>\n'}),define("ext/closeconfirmation/closeconfirmation",["require","exports","module","core/ide","core/ext","ext/settings/settings","text!ext/closeconfirmation/settings.xml"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("ext/settings/settings"),o=e("text!ext/closeconfirmation/settings.xml");n.exports=i.register("ext/closeconfirmation/closeconfirmation",{name:"Confirm closing",dev:"Ajax.org",alone:!0,type:i.GENERAL,markup:null,deps:[s],nodes:[],init:function(){window.onbeforeunload=this.onBeforeUnloadHandler,r.addEventListener("settings.load",function(){s.setDefaults("general",[["confirmexit","false"]])}),s.addSettings("General",o),i.initExtension(this)},onBeforeUnloadHandler:function(){var e=!1;tabEditors.getPages().forEach(function(t){var n=t.$doc.getNode();n&&n.getAttribute("changed")==1&&t.$doc.getValue()&&!n.getAttribute("deleted")&&(e=!0)}),r.dispatchEvent("exit",{changed:e});if(e)return"You have unsaved changes. Your changes will be lost if you don't save them";var t=s.model.queryNode("general/@confirmexit");if(t&&apf.isTrue(t.value))return"You're about to leave Cloud9 IDE."},destroy:function(){this.$destroy(),window.onbeforeunload===this.onBeforeUnloadHandler&&(window.onbeforeunload=null)}})}),define("ext/codetools/codetools",["require","exports","module","core/ide","core/ext","ext/code/code"],function(e,t,n){var r=e("core/ide"),i=e("core/ext");n.exports=i.register("ext/codetools/codetools",{dev:"Ajax.org",name:"Code Tools",alone:!0,type:i.GENERAL,nodes:[],init:function(){},register:function(t){var n=this;r.addEventListener("init.ext/code/code",function(){var r=e("ext/code/code");r.amlEditor.$codeToolsAttached||n.attachEditorEvents(r.amlEditor)})},attachEditorEvents:function(e){function u(n){clearTimeout(o),o=setTimeout(function(){var i=t.session.selection.getSelectionLead(),s=t.session.selection.getSelectionAnchor(),o={amlEditor:e,editor:t,pos:{start:i,end:s},doc:t.session.doc};r.dispatchEvent("codetools.cursorchange",o),n.type=="changeSelection"&&r.dispatchEvent("codetools.selectionchange",o)})}function a(e){e.oldsession||(e.oldsession=e.session),e.oldsession.removeEventListener("changeCursor",u),e.oldsession.removeEventListener("changeSelection",u),e.session.selection.addEventListener("changeCursor",u),e.session.selection.addEventListener("changeSelection",u)}if(e.$codeToolsAttached)return;e.$codeToolsAttached=!0;var t=e.$editor,n,i,s,o;t.addEventListener("mousemove",function(s){var o=s.getDocumentPosition(),u=o.row,a=o.column,f=t.session.doc,l={amlEditor:e,editor:t,target:s.domEvent.target||s.domEvent.srcElement,pos:o,doc:f};n!==u?(n=u,i=a,r.dispatchEvent("codetools.rowchange",l),r.dispatchEvent("codetools.columnchange",l)):i!==a&&(i=a,r.dispatchEvent("codetools.columnchange",l))}),t.addEventListener("click",function(n){clearTimeout(s);var i=n.getDocumentPosition(),o=t.session.doc;s=setTimeout(function(){s=null,r.dispatchEvent("codetools.codeclick",{amlEditor:e,editor:t,pos:i,doc:o})},100)}),t.addEventListener("dblclick",function(n){clearTimeout(s),s=null;var i=n.getDocumentPosition(),o=t.session.doc;r.dispatchEvent("codetools.codedblclick",{amlEditor:e,editor:t,pos:i,doc:o})}),t.addEventListener("changeSession",a),a({session:t.session})}})}),define("ext/colorpicker/colorpicker_regex",["require","exports","module"],function(e,t,n){var r=typeof apf!="undefined"?apf.color.colorshex:{black:0,white:16777215},i=Object.keys(r).join("|"),s={rgb:"rgba?\\(\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*(:?\\s*,\\s*(?:1|0|0?\\.[0-9]{1,2})\\s*)?\\)",rgb_alt:"rgba?\\(\\s*\\b(\\d{1,2}|100)%\\s*,\\s*\\b(\\d{1,2}|100)%\\s*,\\s*\\b(\\d{1,2}|100)%\\s*(:?\\s*,\\s*(?:1|0|0?\\.[0-9]{1,2})\\s*)?\\)",hsl:"hsla?\\(\\s*\\b([1-2][0-9][0-9]|360|3[0-5][0-9]|[1-9][0-9]|[0-9])\\b\\s*,\\s*\\b(\\d{1,2}|100)%\\s*,\\s*\\b(\\d{1,2}|100)%\\s*(:?\\s*,\\s*(?:1|0|0?\\.[0-9]{1,2})\\s*)?\\)"},o=new RegExp("(#([0-9A-Fa-f]{3,6})\\b)|\\b("+i+")\\b"+"|("+s.rgb+")"+"|("+s.rgb_alt+")"+"|("+s.hsl+")","gi"),u=new RegExp("(?:"+s.rgb+")"+"|(?:"+s.rgb_alt+")"),a=new RegExp(s.hsl);t=n.exports={isColor:o,isRgb:u,isHsl:a}}),define("text!ext/colorpicker/colorpicker.css",[],function(){return".codetools_colorpicker {\n    position: absolute;\n    opacity: 0.5;\n    border: 1px solid #d9cb89;\n    background-color: #fff8c8;\n    -webkit-border-radius: 6px;\n    -moz-border-radius: 6px;\n    border-radius: 6px;\n    z-index: 2000;\n    padding: 0 2px 0 2px;\n}\n\n.codetools_colorpicker_tools {\n    position: absolute;\n    top: 182px;\n    left: 8px;\n    line-height: 16px;\n    font-size: 12px;\n    vertical-align: middle;\n    color: #fff;\n}\n\n.codetools_colorpicker_tools span {\n    float: left;\n    display: inline;\n    margin: 0 4px 0 0;\n}\n\n.codetools_colorpicker_tools span.color {\n    width: 15px;\n    height: 15px;\n    margin: 0 2px 0 2px;\n    border: 1px solid #fff;\n    -webkit-border-radius: 2px;\n    -moz-border-radius: 2px;\n    border-radius: 2px;\n    float: left;\n    cursor: pointer;\n    cursor: hand;\n}\n\n.codetools_colorpicker_tools span.color_hover {\n    -webkit-box-shadow: 0px 0px 6px #ffffff;\n    -moz-box-shadow: 0px 0px 6px #ffffff;\n    box-shadow: 0px 0px 6px #ffffff;\n}\n"}),define("text!ext/colorpicker/colorpicker.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:menu id="mnuColorPicker" skin="dockwindowblack" class="left" width="366" height="205" animate="false" pinned="true" resizable="false" visible="false">\n        <a:colorpicker id="clrCodeTools" skinset="colorpicker" />\n        <div class="codetools_colorpicker_tools"/>\n    </a:menu>\n</a:application>'}),define("text!ext/colorpicker/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:colorpicker name="colorpicker">\n        <a:style><![CDATA[\n            .colorpicker {\n                width       : 356px;\n                height      : 176px;\n                overflow    : hidden;\n                position    : absolute;\n                background  : url(images/colorpicker_background.png);\n                font-family : Arial, Helvetica, sans-serif;\n                z-index     : 2002;\n            }\n            \n            .colorpicker_color {\n                width      : 150px;\n                height     : 150px;\n                left       : 14px;\n                top        : 13px;\n                position   : absolute;\n                background : #f00;\n                overflow   : hidden;\n                cursor     : crosshair;\n            }\n            \n            .colorpicker_color div {\n                position   : absolute;\n                top        : 0;\n                left       : 0;\n                width      : 150px;\n                height     : 150px;\n                background : url(images/colorpicker_overlay.png);\n            }\n            \n            .colorpicker_color div div {\n                position   : absolute;\n                top        : 0;\n                left       : 0;\n                width      : 11px;\n                height     : 11px;\n                overflow   : hidden;\n                background : url(images/colorpicker_select.gif);\n                margin     : -5px 0 0 -5px;\n            }\n            \n            .colorpicker_hue {\n                position : absolute;\n                top      : 13px;\n                left     : 171px;\n                width    : 35px;\n                height   : 150px;\n                cursor   : ns-resize;\n            }\n            \n            .colorpicker_hue div {\n                position   : absolute;\n                width      : 35px;\n                height     : 9px;\n                overflow   : hidden;\n                background : url(images/colorpicker_indic.gif) left top;\n                margin     : -4px 0 0 0;\n                left       : 0px;\n            }\n            \n            .colorpicker_new_color {\n                position   : absolute;\n                width      : 60px;\n                height     : 30px;\n                left       : 213px;\n                top        : 13px;\n                background : #f00;\n            }\n            \n            .colorpicker_current_color {\n                position   : absolute;\n                width      : 60px;\n                height     : 30px;\n                left       : 283px;\n                top        : 13px;\n                background : #f00;\n            }\n        ]]></a:style>\n        \n        <a:presentation>\n            <a:main \n              selector       = "div[1]" \n              selector_indic = "div[1]/div/div" \n              hue            = "div[2]/div"\n              newcolor       = "div[3]" \n              customcolor    = "div[4]" \n              inputs         = "div[5]">\n                <div class="colorpicker">\n                    <div class="colorpicker_color">\n                        <div>\n                            <div></div>\n                        </div>\n                    </div>\n                    <div class="colorpicker_hue">\n                        <div></div>\n                    </div>\n                    <div class="colorpicker_new_color"> </div>\n                    <div class="colorpicker_current_color"> </div>\n                    <div class="colorpicker_inputs"> </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:colorpicker>\n</a:skin>'}),define("text!ext/colorpicker/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox class="underlined" label="Enable Color Picker" \n      value="[editors/codewidget/@colorpicker]" skin="checkbox_grey" position="1000"\n      onclick="require(\'ext/colorpicker/colorpicker\').updateSetting(); require(\'ext/codetools/codetools\').register(require(\'ext/colorpicker/colorpicker\'));"/>\n</a:application>\n'}),define("ext/colorpicker/colorpicker",["require","exports","module","core/ide","core/ext","ext/settings/settings","ext/editors/editors","ext/codetools/codetools","ext/language/syntax_detector","ace/range","ext/colorpicker/colorpicker_regex","text!ext/colorpicker/colorpicker.css","text!ext/colorpicker/colorpicker.xml","text!ext/colorpicker/skin.xml","text!ext/colorpicker/settings.xml"],function(e,t,n){function y(e,t,n,r){if(t){var i=n,s=r.length,o,u=!1;while((o=i.indexOf(r))!=-1)i=i.substr(o+s),o<=t&&o+s>=t&&(u=!0,t=o);if(!u)return null}return t=n.indexOf(r),f.fromPoints({row:e,column:t},{row:e,column:t+r.length})}var r=e("core/ide"),i=e("core/ext"),s=e("ext/settings/settings"),o=e("ext/editors/editors"),u=e("ext/codetools/codetools"),a=e("ext/language/syntax_detector"),f=e("ace/range").Range,l,c={},h=e("ext/colorpicker/colorpicker_regex"),p=apf.color.colorshex,d=e("text!ext/colorpicker/colorpicker.css"),v=e("text!ext/colorpicker/colorpicker.xml"),m=e("text!ext/colorpicker/skin.xml"),g=e("text!ext/colorpicker/settings.xml");n.exports=i.register("ext/colorpicker/colorpicker",{dev:"Ajax.org",name:"Colorpicker Code Tool",alone:!0,type:i.GENERAL,skin:{id:"colorpicker",data:m,"media-path":r.staticPrefix+"/ext/colorpicker/images/"},nodes:[],hook:function(){var e=this;s.addSettings("Code Tools",g),r.addEventListener("settings.load",function(t){s.setDefaults("editors/codewidget",[["colorpicker","false"]]),e.updateSetting(),apf.isTrue(s.model.queryValue("editors/codewidget/@colorpicker"))&&e.setEvents()})},updateSetting:function(){this.enabled=apf.isTrue(s.model.queryValue("editors/codewidget/@colorpicker")),this.enabled&&this.setEvents()},init:function(){apf.document.documentElement.insertMarkup(v),this.menu=mnuColorPicker,this.colorpicker=clrCodeTools;var e=this.menu.$ext.getElementsByTagName("div"),t=this;for(var n=0,i=e.length;n<i;++n)e[n].className.indexOf("arrow")>-1?this.arrow=e[n]:e[n].className.indexOf("codetools_colorpicker_tools")>-1&&(this.colortools=e[n]);apf.addListener(this.colortools,"mousemove",function(e){var n=e.srcElement||e.target||e.element;if(!n||n.nodeType!=1||n.className.indexOf("color")==-1)return;var r,i=t.colortools.getElementsByTagName("span");for(var s=0,o=i.length;s<o;++s)r=i[s].className,i[s]!==n?apf.setStyleClass(i[s],null,["color_hover"]):r.indexOf("color_hover")===-1&&i[s]===n&&apf.setStyleClass(i[s],"color_hover",[])}),apf.addListener(this.colortools,"mousedown",function(e){var n=e.srcElement||e.target||e.element;if(n.nodeType!=1||n.className.indexOf("color")==-1)return;var r=apf.color,i=t.colorpicker,s=r.hexToHSB(r.fixHex(n.getAttribute("data-color"),!0));i.setAttribute("hue",s.h),i.setAttribute("saturation",s.s),i.setAttribute("brightness",s.b)}),this.colorpicker.addEventListener("prop.hex",function(e){t.onColorPicked(e.oldvalue,e.value)}),this.menu.addEventListener("prop.visible",function(e){if(!e.value){var n=t.$activeColor;n&&(apf.removeEventListener("keydown",n.listeners.onKeyDown),n.editor.removeEventListener("mousewheel",n.listeners.onScroll),n.editor.removeEventListener("mousedown",n.listeners.onScroll),r.removeEventListener("codetools.cursorchange",n.listeners.onCursorChange),delete t.$activeColor,t.hideColorTooltips(n.editor),t.colorpicker.$input.blur(),n.editor.focus())}})},setEvents:function(){function e(e,t){var n=t.match(h.isColor);if(!n||!n.length)return[];var r,i,s=e.column;for(var o=0,u=n.length;o<u;++o){r=t.indexOf(n[o]),i=r+n[o].length;if(s>=r&&s<=i)return[n,n[o]]}return[n]}function i(){t.menu&&t.menu.visible?t.menu.hide():t.hideColorTooltips()}if(this.hooked)return;this.hooked=!0,apf.importCssString(d||"");var t=this,n;r.addEventListener("codetools.columnchange",function(r){clearTimeout(n);if(!t.enabled)return;var i=r.doc,s=r.pos,o=r.editor,u=i.getLine(1);if(["css","svg","less","stylus"].indexOf(r.amlEditor.syntax)===-1&&a.getContextSyntax(i,s,r.amlEditor.syntax)!=="css"&&(!u||u.indexOf("<a:skin")===-1))return;u=i.getLine(s.row);var f=e(s,u);f[0]&&f[0].length?t.showColorTooltip(s,o,u,f[0]):n=setTimeout(function(){t.hideColorTooltips(o)},100)}),r.addEventListener("codetools.codeclick",function(n){if(!t.enabled)return;var r=n.doc,i=n.pos,s=n.editor,o=r.getLine(1);if(["css","svg","less","stylus"].indexOf(n.amlEditor.syntax)===-1&&a.getContextSyntax(r,i,n.amlEditor.syntax)!=="css"&&(!o||o.indexOf("<a:skin")===-1))return;var u=s.selection.getRange();if(u.start.row!==u.end.row||u.start.column!==u.end.column)return;o=r.getLine(i.row);var f=e(i,o);f[1]?t.toggleColorPicker(i,s,o,f[1]):t.menu&&t.menu.visible&&t.menu.hide()}),r.addEventListener("codetools.codedblclick",function(e){if(!t.enabled)return;t.hideColorTooltips(e.editor)}),r.addEventListener("tab.beforeswitch",function(){i()}),r.addEventListener("closefile",function(e){var t=tabEditors.getPage();t?e.page.name===t.name&&i():i()}),r.addEventListener("afteropenfile",function(){u.register(this)})},removeEvents:function(){},showColorTooltip:function(e,t,n,r,i){if(this.menu&&this.menu.visible&&!i)return;var s=[];r.forEach(function(r){var o=i||r+(e.row+"")+e.column,u=c[o];if(!u){var a=y(e.row,e.column,n,r);if(!a)return;u=t.session.addMarker(a,"codetools_colorpicker",function(e,t,n,s,o){e.push("<span class='codetools_colorpicker' style='","left:",n-3,"px;","top:",s-1,"px;","height:",o.lineHeight,"px;'",i?" id='"+i+"'":"",">",r,"</span>")},!0),c[o]=[a,u,t.session]}s.push(u)}),this.hideColorTooltips(t,s)},hideColorTooltips:function(e,t){if(this.$activeColor)return;!t&&this.menu&&this.menu.visible&&this.menu.hide(),t&&!apf.isArray(t)&&(t=[t]);var n,r;for(var i in c){n=c[i][1],r=e?e.session:c[i][2];if(t&&t.indexOf(n)>-1)continue;r.removeMarker(n),delete c[i]}},parseColorString:function(e){var t={orig:e};typeof p[e]!="undefined"&&(e=apf.color.fixHex(p[e].toString(16)));var n=e.match(h.isRgb),r=e.match(h.isHsl);return n&&n.length>=3?(t.rgb=apf.color.fixRGB({r:n[1],g:n[2],b:n[3]}),t.hex=apf.color.RGBToHex(n),t.type="rgb"):r&&r.length>=3?(t.hsb=apf.color.fixHSB({h:r[1],s:r[2],b:r[3]}),t.hex=apf.color.HSBToHex(r),t.type="hsb"):(t.hex=apf.color.fixHex(e.replace("#",""),!0),t.type="hex"),t},toggleColorPicker:function(e,t,n,s){i.initExtension(this);var o=this.menu,u=this.colorpicker,a=this.parseColorString(s);if(o.visible&&a.hex==this.$activeColor.color.orig&&e.row==this.$activeColor.row)return o.hide();var f,l,h,p=this;apf.addEventListener("keydown",f=function(e){var n=p.$activeColor;if(!u||!n||!u.visible)return;if(e.keyCode===27){o.hide(),clearTimeout(p.$colorPickTimer);var r=t.session.$undoManager;r.undolength>n.start&&r.undo(r.undolength-n.start)}}),r.addEventListener("codetools.cursorchange",h=function(e){var t=p.$activeColor;if(!u||!t||!u.visible)return;var n=e.pos.start,r=t.marker[0];r.contains(n)||o.hide()}),t.addEventListener("mousewheel",l=function(e){var t=p.$activeColor;if(!u||!t||!u.visible)return;o.hide()}),t.addEventListener("mousedown",l);var d="colorpicker"+a.hex+e.row;delete this.$activeColor,this.hideColorTooltips(t),this.showColorTooltip(e,t,n,[a.orig],d),o.show(),u.$input.focus(),this.$activeColor={color:a,hex:a.hex,markerNode:d,line:n,current:a.orig,pos:e,marker:c[d],editor:t,ignore:u.value!=s?2:1,start:t.session.$undoManager.undolength,listeners:{onKeyDown:f,onScroll:l,onCursorChange:h}},a.type=="rgb"?(u.setProperty("red",a.rgb.r),u.setProperty("green",a.rgb.g),u.setProperty("blue",a.rgb.b)):a.type=="hsb"?(u.setProperty("hue",a.hsb.h),u.setProperty("saturation",a.hsb.s),u.setProperty("brightness",a.hsb.b)):u.setProperty("value",a.hex),this.updateColorTools(t),this.resize()},updateColorTools:function(e){var t=e.session.getLines(0,2e3),n,r=[];for(var i=0,s=t.length;i<s;++i){if(!(n=t[i].match(h.isColor)))continue;r=r.concat(n)}r.makeUnique();var o=[],u;for(i=0,s=Math.min(r.length,11);i<s;++i)u=this.parseColorString(r[i]),o.push('<span class="color" style="background-color: #',u.hex,'" data-color="',u.hex,'" title="',u.orig,'">&nbsp;</span>');this.colortools.innerHTML="<span>Existing file colors:</span>"+o.join("")},onColorPicked:function(e,t){var n=this.$activeColor;if(!n)return;if(n.ignore){--n.ignore;return}clearTimeout(this.$colorPickTimer);var r=n.editor.session.doc,i=r.getLine(n.pos.row);if(typeof n.markerNode=="string"){var s=document.getElementById(n.markerNode);if(!s)return;n.markerNode=s}var o,u;if(n.color.type=="hex")u="#"+t;else if(n.color.type=="rgb"){var a=n.current.match(h.isRgb),f=new RegExp("(rgba?)\\(\\s*"+a[1]+"\\s*,\\s*"+a[2]+"\\s*,\\s*"+a[3]+"(\\s*,\\s*(?:1|0|0?\\.[0-9]{1,2})\\s*)?\\)","i");if(!i.match(f))return;var l=apf.color.hexToRGB(t);o=i.replace(f,function(e,t,n){return u=t+"("+l.r+", "+l.g+", "+l.b+(n||"")+")"})}else if(n.color.type=="hsb"){var a=n.current.match(h.isHsl),f=new RegExp("hsl\\(\\s*"+a[1]+"\\s*,\\s*"+a[2]+"\\s*,\\s*"+a[3]+"\\s*\\)","i");if(!i.match(f))return;var c=apf.color.hexToHSB(t);o=i.replace(f,function(){return u="hsl("+parseInt(c.h,10)+", "+parseInt(c.s,10)+"%, "+parseInt(c.b,10)+"%)"})}n.hex=t,n.markerNode.innerHTML=u,this.$colorPickTimer=setTimeout(function(){var e=y(n.pos.row,n.pos.column,i,n.current);if(!e)return;n.marker[0]=e,e.end=r.replace(e,u),n.current=u},200)},resize:function(e){if(!this.menu.visible)return;var t=e||this.$activeColor,n=t.pos,r=t.color.orig,i=t.line,s=o.currentEditor.amlEditor.$editor.renderer,u=this.colorpicker,a=this.menu;a.setProperty("class","left");var f=s.textToScreenCoordinates(n.row,i.indexOf(r)-1),c=s.textToScreenCoordinates(n.row,i.indexOf(r)+r.length),h,p,d=p=c.pageY-24,v=h=c.pageX+30,m=apf.getOverflowParent(u.$ext),g=a.$ext.offsetHeight+10,y=a.$ext.offsetWidth+10,b=m==document.documentElement?(apf.isIE?m.offsetHeight:window.innerHeight+window.pageYOffset)+m.scrollTop:m.offsetHeight+m.scrollTop,w=m==document.documentElement?(apf.isIE?m.offsetWidth:window.innerWidth+window.pageXOffset)+m.scrollLeft:m.offsetWidth+m.scrollLeft;d+g>b&&(d=b-g,d<0&&(d=10)),v+y>w&&(v=w-y,c.pageX>v&&c.pageX<v+y&&(v=f.pageX-y-20,a.setProperty("class","right")),v<10&&(a.setProperty("class","noarrow"),f.pageY>g?d=f.pageY-g+10:d=f.pageY+40,v=10)),l||(l=parseInt(apf.getStyle(this.arrow,"top"),10)),d!=p?this.arrow.style.top=l+(p-d)+"px":this.arrow.style.top=l+"px",a.$ext.style.zIndex=10002,a.$ext.style.top=d+"px",a.$ext.style.left=v+"px"},destroy:function(){this.menu.visible&&this.menu.hide(),this.$destroy()}})}),define("ext/gitblame/blamejs",["require","exports","module"],function(e,t,n){n.exports=function(){function e(){this.commit_data={},this.line_data={},this.settingCommitData=!1,this.currentCommitHash="",this.currentLineNumber=1}return e.prototype={getCommitData:function(){return this.commit_data},getLineData:function(){return this.line_data},parseBlame:function(e){this.lines=e.split("\n");if(!this.lines.length)return!1;for(var t=0;t<this.lines.length;t++)if(this.lines[t][0]=="	")this.line_data[this.currentLineNumber].code=this.lines[t].substr(1),this.settingCommitData=!1,this.currentCommitHash="";else{var n=this.lines[t].split(" ");this.settingCommitData?this.parseCommitLine(n):n[0].length==40&&(this.currentCommitHash=n[0],this.currentLineNumber=n[2],this.line_data[n[2]]={code:"",hash:this.currentCommitHash,originalLine:n[1],finalLine:n[2],numLines:n[3]||-1},this.commit_data[n[0]]||(this.settingCommitData=!0,this.commit_data[n[0]]={author:"",authorMail:"",authorTime:"",authorTz:"",committer:"",committerMail:"",committerTime:"",committerTz:"",summary:"",previousHash:"",filename:""}))}return!0},parseCommitLine:function(e){switch(e[0]){case"author":this.commit_data[this.currentCommitHash].author=e.slice(1).join(" ");break;case"author-mail":this.commit_data[this.currentCommitHash].authorMail=e[1];break;case"author-time":this.commit_data[this.currentCommitHash].authorTime=e[1];break;case"author-tz":this.commit_data[this.currentCommitHash].authorTz=e[1];break;case"committer":this.commit_data[this.currentCommitHash].committer=e.slice(1).join(" ");break;case"committer-mail":this.commit_data[this.currentCommitHash].committerMail=e[1];break;case"committer-time":this.commit_data[this.currentCommitHash].committerTime=e[1];break;case"committer-tz":this.commit_data[this.currentCommitHash].committerTz=e[1];break;case"summary":this.commit_data[this.currentCommitHash].summary=e.slice(1).join(" ");break;case"filename":this.commit_data[this.currentCommitHash].filename=e[1];break;case"previous":this.commit_data[this.currentCommitHash].previous=e.slice(1).join(" ");break;default:}}},e}()}),define("ext/gitblame/blame_gutter",["require","exports","module","ace/lib/dom","ace/lib/event"],function(e,t,n){"use strict";var r=e("ace/lib/dom"),i=e("ace/lib/event");r.importCssString(".ace_resizer_v {    top: 0px;    width: 2px;    z-index: 10;    height: 100%;    cursor: w-resize;    position: absolute;    border-right: 1px solid black;}.ace_resizer_v:hover {    border-right-color: darkblue;}.ace_closeButton {    top: -5px;    left: -3px;    width: 11px;    height: 11px;    cursor: pointer;    position: absolute;    border-radius: 11px;    background: rgba(255, 0, 194, 0.33);}.ace_closeButton:hover {    background: rgba(255, 0, 194, 0.5);}.ace_blame-gutter-layer {    position: absolute !important;    text-align: left !important;    top: 0;    z-index: 5;    pointer-events: auto;}.ace_blame-cell{    border-top: solid 1px;    word-wrap: break-word;    white-space: pre-wrap;    box-sizing: border-box;    -moz-box-sizing: border-box;    overflow: hidden !important;    padding: 0 8px;}.ace_blame-cell.selected{    background: rgba(255, 237, 0, 0.31);}.ace_tooltip{    position:fixed;    background: #F8F7AC;    border: solid 1px rgba(205, 237, 0, 0.81);    border-radius:5px;    z-index: 1000000;    max-width: 500px;    white-space: pre-wrap;}","blameGutter");var s=function(e,t){if(e.blameGutter)return;var n=e.renderer.$gutterLayer;e.blameGutter=this,n.blameColumn=this,this.element=r.createElement("div"),this.element.className="ace_layer ace_blame-gutter-layer";var i=e.renderer.$gutter;i.appendChild(this.element),this.resizer=r.createElement("div"),this.resizer.className="ace_resizer_v",i.appendChild(this.resizer),this.closeButton=r.createElement("div"),this.closeButton.className="ace_closeButton",this.resizer.appendChild(this.closeButton),e.tooltip=r.createElement("div"),e.tooltip.className="ace_tooltip",e.tooltip.style.display="none",e.container.appendChild(e.tooltip),this.onMousedown=this.onMousedown.bind(this),this.onChangeSession=this.onChangeSession.bind(this),this.onMousemove=this.onMousemove.bind(this),this.onMouseout=this.onMouseout.bind(this),this.editor=e,t?this.setData(t):this.removeData(t)};(function(){this.update=function(e){function b(e,t){h.push("<div class='ace_blame-cell ",e==c?"selected":"","' index='",d-1,"'","style='height:",f,"px'>",e,"  ",t,"</div>"),p=h.length-6}function w(e){do v=l[e];while(!v&&e-->d);d=e+1}this.$config=e;var t=this.blameColumn.element;t.style.marginTop=-e.offset+"px";var n=[],i=e.firstRow,s=e.lastRow,o=this.session.getNextFoldLine(i),u=o?o.start.row:Infinity,a=this.$showFoldWidgets&&this.session.foldWidgets,f=e.lineHeight,l=this.blameData,c=this.selectedText,h=[],p,d=0,v;w(i),v?b(v.text,v.title):b("",""),l[i+1]||(h[p]-=e.offset-1,h.splice(p+1,0,"px;margin-top:",e.offset-1));for(;;){i>u&&(i=o.end.row+1,o=this.session.getNextFoldLine(i,o),o?(u=o.start.row,d=o.end.row):u=Infinity);if(i>s)break;n.push("<div class='ace_gutter-cell","' style='height:",f,"px;'>",i+1);if(a){var m=a[i];m==null&&(m=a[i]=this.session.getFoldWidget(i)),m&&n.push("<span class='ace_fold-widget ace_",m,m=="start"&&i==u&&i<o.end.row?" ace_closed":" ace_open","' style='height:",f,"px","'></span>")}var g=this.session.getRowLength(i)-1;while(g--)n.push("</div><div class='ace_gutter-cell' style='height:",f,"px'>¦");n.push("</div>"),i++,w(i),v?b(v.text,v.title):h[p]+=this.session.getRowLength(i-1)*f}this.element=r.setInnerHtml(this.element,n.join("")),this.blameColumn.element=r.setInnerHtml(t,h.join("")),this.element.style.height=e.minHeight+"px";var y=this.element.parentNode.offsetWidth;y!==this.gutterWidth&&(this.gutterWidth=y,this._emit("changeGutterWidth",y))},this.setData=function(e){var t=this.editor.renderer.$gutterLayer;t.blameData=e||[],t.update=this.update,this.element.style.display="",this.closeButton.style.display="",this.resizer.style.display="",this.editor.on("guttermousedown",this.onMousedown),this.editor.on("changeSession",this.onChangeSession);var n=this.editor.renderer.$gutter;i.addListener(n,"mousemove",this.onMousemove),i.addListener(n,"mouseout",this.onMouseout),t.element.style.width="",this.resizer.style.right="40px",this.element.style.width="260px",this.element.parentNode.style.width="300px",t.update(this.editor.renderer.layerConfig)},this.removeData=function(){var e=this.editor.renderer.$gutterLayer;delete e.update,this.editor.removeListener("guttermousedown",this.onMousedown),this.editor.removeListener("changeSession",this.onChangeSession);var t=this.editor.renderer.$gutter;i.removeListener(t,"mousemove",this.onMousemove),i.removeListener(t,"mouseout",this.onMouseout),this.element.style.display="none",this.closeButton.style.display="none",this.resizer.style.display="none",this.element.parentNode.style.width="",e.update(this.editor.renderer.layerConfig)},this.onMousedown=function(e){var t=e.domEvent.target;if(t==this.closeButton)return this.removeData(),e.stop();if(t==this.resizer){var n=this.editor.blameGutter.element.getBoundingClientRect(),i=this.editor.$mouseHandler;return i.resizeBlameGutter=function(){var e=this.x+40-n.left;this.editor.renderer.$gutter.style.width=e+"px",this.editor.blameGutter.element.style.width=e-40+"px",this.editor.renderer.$gutterLayer._emit("changeGutterWidth",e)},i.captureMouse(e,"resizeBlameGutter"),e.stop()}if(r.hasCssClass(t,"ace_blame-cell")){var s=this.editor.renderer.$gutterLayer,o=parseInt(t.getAttribute("index")),u=s.blameData[o];if(!u)return e.stop();s.selectedText=u.text;var a=t.parentNode.children;for(var f=a.length;f--;){var l=a[f].innerHTML.indexOf(s.selectedText)==0;a[f].className="ace_blame-cell"+(l?" selected":"")}return e.stop()}},this.onChangeSession=function(){this.removeData()},this.onMousemove=function(e){var t=e.target,n=e.currentTarget,i=this.editor.tooltip;this.$highlightedCell!=t&&r.hasCssClass(t,"ace_blame-cell")&&(i.style.display="block",this.$highlightedCell=t,i.textContent=t.textContent);if(!this.$highlightedCell){this.onMouseout();return}i.style.top=e.clientY+10+"px",i.style.left=e.clientX+10+"px"},this.onMouseout=function(e){this.editor.tooltip.style.display="none",this.$highlightedCell=null}}).call(s.prototype),t.BlameGutter=s}),define("ext/gitblame/gitblame",["require","exports","module","core/ext","core/ide","ext/menus/menus","ext/editors/editors","ext/gitblame/blamejs","core/util","ext/commands/commands"],function(e,t,n){var r=e("core/ext"),i=e("core/ide"),s=e("ext/menus/menus"),o=e("ext/editors/editors"),u=e("ext/gitblame/blamejs"),a=e("core/util"),f=e("ext/commands/commands");n.exports=r.register("ext/gitblame/gitblame",{name:"Git Blame",dev:"Ajax.org",alone:!0,type:r.GENERAL,nodes:[],autodisable:r.ONLINE|r.LOCAL,hook:function(){var e=this;s.addItemByPath("Tools/Git/Blame",new apf.item({onclick:function(){e.startBlame()},isAvailable:function(e){return e&&e.path==="ext/code/code"}}),500),s.addItemByPath("File/Git Blame",new apf.item({onclick:function(){e.startBlame()},isAvailable:function(e){return e&&e.path==="ext/code/code"}}),909)},startBlame:function(){r.initExtension(this),this.requestBlame()},requestBlame:function(){var e="gittools",t=tabEditors.getPage();if(!t)return;var n=t.$model.data.getAttribute("path"),s=n.lastIndexOf("/"),o=n.substr(s+1),a=n.substring(i.davPrefix.length+1,s);a=="/"?a=i.workspaceDir:a=i.workspaceDir+"/"+a;var l={command:"git",argv:["git","blame","-p",o],extra:{type:"gitblame",path:n,original_line:""},requireshandling:!f.commands.git,cwd:a};l.line=l.argv.join(" "),this.$onMessage||(this.$onMessage=this.onMessage.bind(this),i.addEventListener("socketMessage",this.$onMessage),this.blamejs={}),this.blamejs[n]=new u;var c="Loading...";i.dispatchEvent("track_action",{type:"blame",cmd:e}),r.execCommand(e,l)!==!1&&i.dispatchEvent("consolecommand."+e,{data:l})!==!1&&(i.onLine?i.send(l):c="This operation could not be completed because you are offline."),this.displayGutter([{text:c,title:""}],n)},onMessage:function(e){var t=e.message;if(!t.extra||t.extra.type!="gitblame")return!1;if(!this.blamejs[t.extra.path])return;var n=t.type.substr(-5);if(n=="-exit"){t.code&&a.alert("Error","There was an error returned from the server:",t.data),delete this.blamejs[r];return}if(n!="-data"||!t.data)return;var r=t.extra.path,i=this.blamejs[r];if(!i.parseBlame(t.data))return a.alert("Problem Parsing","Problem Parsing","There was a problem parsing the blame output. Blame us, blame the file, but don't blame blame.\nBlame."),!1;this.formulateOutput(i,r)},formulateOutput:function(e,t){var n=e.getCommitData(),r=e.getLineData(),i={},s="";for(var o in r)if(r[o].numLines!=-1&&r[o].hash!=s){s=r[o].hash;var u=new Date(parseInt(n[r[o].hash].authorTime,10)*1e3);i[o-1]={text:n[r[o].hash].author+" » "+r[o].hash.substr(0,10),title:n[r[o].hash].summary+"\n"+u.toUTCString()}}this.displayGutter(i,t)},displayGutter:function(t,n){function i(){r.waiting&&(t=r.waiting.textHash,n=r.waiting.path,r.waiting=null);var e=tabEditors.getPage();if(!e)return;var i=e.$model.data.getAttribute("path");if(n!=i)return;var s=o.currentEditor.amlEditor.$editor;s.blameGutter||new r.BlameGutter(s),s.blameGutter.setData(t)}if(this.waiting){this.waiting={textHash:t,path:n};return}var r=this;if(!this.BlameGutter){var s="ext/gitblame/blame_gutter";try{this.BlameGutter=e("ext/gitblame/blame_gutter").BlameGutter}catch(u){}}this.BlameGutter?i():(this.waiting={textHash:t,path:n},e(["ext/gitblame/blame_gutter"],function(e){r.BlameGutter=e.BlameGutter,i()}))},destroy:function(){s.remove("Tools/Git/Blame"),this.$destroy()}})}),define("text!ext/autosave/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox \n        class="underlined" label="Enable Auto-Save" \n        value="[general/@autosaveenabled]" \n        skin="checkbox_grey" position="2100" />\n</a:application>'}),define("ext/autosave/autosave",["require","exports","module","core/ide","core/ext","core/util","ext/save/save","ext/settings/settings","text!ext/autosave/settings.xml","ext/stripws/stripws","ext/tooltip/tooltip"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("ext/save/save"),u=e("ext/settings/settings"),a=e("text!ext/autosave/settings.xml"),f=e("ext/stripws/stripws"),l=e("ext/tooltip/tooltip"),c=6e4,h=500;n.exports=i.register("ext/autosave/autosave",{name:"Autosave",dev:"Cloud9",alone:!0,type:i.GENERAL,offline:!0,nodes:[],docChangeTimeout:null,docChangeListeners:{},hook:function(){var e=this;u.addSettings("General",a),r.addEventListener("settings.load",function(t){t.ext.setDefaults("general",[["autosaveenabled","false"]]),e.isAutoSaveEnabled=apf.isTrue(t.model.queryValue("general/@autosaveenabled"))}),r.addEventListener("settings.save",function(t){if(!t.model.data)return;e.isAutoSaveEnabled=apf.isTrue(t.model.queryValue("general/@autosaveenabled"))}),r.addEventListener("afteronline",function(){e.doAutoSave()}),btnSave.setAttribute("caption",""),btnSave.setAttribute("margin","0 20"),btnSave.removeAttribute("tooltip"),btnSave.removeAttribute("command"),apf.setStyleClass(btnSave.$ext,"btnSave"),l.add(btnSave,{message:"Changes to your file are automatically saved.<br />                View all your changes through <a href='javascript:void(0)'                 onclick='require(\"ext/revisions/revisions\").toggle();'                 class='revisionsInfoLink'>the Revision History pane</a>.                 Rollback to a previous state, or make comparisons.",width:"250px",hideonclick:!0}),this.$onOpenFileFn=this.onOpenFile.bind(this),this.$onCloseFileFn=this.onCloseFile.bind(this),this.$onBeforeSaveWarning=this.onBeforeSaveWarning.bind(this),r.addEventListener("afteropenfile",this.$onOpenFileFn),r.addEventListener("closefile",this.$onCloseFileFn),r.addEventListener("beforesavewarn",this.$onBeforeSaveWarning)},onBeforeSaveWarning:function(e){var t=apf.isTrue(e.doc.getNode().getAttribute("newfile"));if(!t&&this.isAutoSaveEnabled)return this.save(e.doc.$page),!1},onOpenFile:function(e){if(!e||!e.doc)return;var t=this,n=e.doc,r=n.$page;if(!r||!s.pageIsCode(r))return;var i=s.getDocPath(r);i&&!this.docChangeListeners[i]&&(this.docChangeListeners[i]=function(e){t.onDocChange.call(t,e,n)}),(n.acedoc||n).addEventListener("change",this.docChangeListeners[i])},onCloseFile:function(e){tabEditors.getPages().length==1&&btnSave.hide();var t=e.page,n=s.getDocPath(t);n&&delete this.docChangeListeners[n],this.save(t)},onDocChange:function(e,t){var n=t.$page;n&&this.isAutoSaveEnabled&&!s.isNewPage(n)&&(clearTimeout(this.docChangeTimeout),this.docChangeTimeout=setTimeout(function(e){f.disable(),e.save(n)},h,this))},doAutoSave:function(){localStorage.offlineQueue=JSON.stringify(this.offlineQueue);if(typeof tabEditors=="undefined"||!this.isAutoSaveEnabled)return;this.save(r.getActivePage())},save:function(e,t){var n=this;if(!e||!e.$at)e=r.getActivePage();if(!e)return;if(t!==!0&&(!s.pageHasChanged(e)||!s.pageIsCode(e)))return;if(r.onLine===!1){o.setUiStateOffline();return}var i=e.$doc.getNode();if(i.getAttribute("newfile")||i.getAttribute("debug"))return;o.quicksave(e,function(){f.enable()},!0)},disableEventListeners:function(){this.$onOpenFileFn&&r.removeEventListener("afteropenfile",this.$onOpenFileFn),this.$onCloseFileFn&&r.removeEventListener("closefile",this.$onCloseFileFn),this.$onBeforeSaveWarning&&r.removeEventListener("beforesavewarn",this.$onBeforeSaveWarning)},enableEventListeners:function(){this.$onOpenFileFn&&r.addEventListener("afteropenfile",this.$onOpenFileFn),this.$onCloseFileFn&&r.addEventListener("closefile",this.$onCloseFileFn),this.$onBeforeSaveWarning&&r.addEventListener("beforesavewarn",this.$onBeforeSaveWarning)},enable:function(){this.$enable(),tabEditors.getPages().forEach(function(e){var t=this.docChangeListeners[e.name];t&&(e.$doc.removeEventListener("change",t),e.$doc.acedoc&&e.$doc.acedoc.removeEventListener("change",t),(e.$doc.acedoc||e.$doc).addEventListener("change",t))},this),this.enableEventListeners()},disable:function(){this.$disable(),tabEditors.getPages().forEach(function(e){var t=this.docChangeListeners[e.name];t&&(e.$doc.removeEventListener("change",t),e.$doc.acedoc&&e.$doc.acedoc.removeEventListener("change",t)),e.$mdlRevisions&&delete e.$mdlRevisions},this),this.disableEventListeners()},destroy:function(){this.saveInterval&&clearInterval(this.saveInterval),this.disableEventListeners(),tabEditors.getPages().forEach(function(e){var t=this.docChangeListeners[e.name];t&&(e.$doc.removeEventListener("change",t),e.$doc.acedoc&&e.$doc.acedoc.removeEventListener("change",t)),e.$mdlRevisions&&delete e.$mdlRevisions},this),this.$destroy()}})}),define("text!ext/revisions/revisions.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:skin id="revisions"\n        src = "{require(\'ext/revisions/revisions\').skin}"\n        media-path = "{ide.staticPrefix}/ext/revisions/images/" />\n\n    <a:window\n      id        = "winQuestionRev"\n      title     = "Question"\n      icon      = ""\n      center    = "true"\n      kbclose   = "true"\n      buttons   = "close"\n      width     = "600"\n      skin      = "bk-window2"\n      render    = "runtime"\n      onkeydown = "\n        if(event.keyCode == 89) {\n            btnQuestionYes.dispatchEvent(\'click\', {htmlEvent: {}});\n        }\n        if(event.keyCode == 78) {\n            btnQuestionNo.dispatchEvent(\'click\', {htmlEvent: {}});\n        }\n      "\n      class     = "relative">\n        <a:vbox padding="10" edge="15 20 25 20">\n            <h3 id="winQuestionRevHeader"></h3>\n            <div id="winQuestionRevMsg" class="alertMsg">An unexpected error occurred. Please refresh your browser.</div>\n        </a:vbox>\n\n        <a:hbox edge="6 10 10" pack="end" padding="8">\n            <a:button id="btnQuestionRevYesAll" default="3" skin="btn-default-css3" class="btn-green">Yes</a:button>\n            <a:button id="btnQuestionRevNoAll" skin="btn-default-css3" class="btn-red">No</a:button>\n        </a:hbox>\n    </a:window>\n\n    <a:vbox id = "pgRevisions"\n      skinset = "revisions"\n      class   = "revisionsHolder"\n      anchors = "0 0 0 0">\n        <a:hbox height = "20" class="topbar" margin="0 0 -1 0">\n            <span>File Revisions</span>\n            <a:button\n              height  = "20"\n              onclick = "require(\'ext/revisions/revisions\').hide() " />\n        </a:hbox>\n        <a:list\n          id           = "lstRevisions"\n          flex         = "1"\n          model        = "{require(\'ext/revisions/revisions\').model}"\n          multiselect  = "false"\n          autoselect   = "false"\n          drag         = "false"\n          drop         = "false"\n          scrollbar    = "sbShared 2 2 2"\n          viewport2    = "virtual"\n          skin         = "revisions-list"\n          each         = "[revision]">\n            <a:caption><?lm\n                {\n                    if ([@restoring] != \'\') {\n                        <div class="revision-icon">\n                            <div class="rev-restoration" title="Restored"></div>\n                        </div>\n                    }\n                }\n                <div class="revision-info">{\n                    <div class="revision-title">[@name]</div>\n                    <ul class="contributors">{\n                        each ([contributors/contributor]) {\n                            <li>\n                                <span class="coloredSquare" \n                                  style=\'background-color: {require("ext/revisions/revisions").getUserColorByEmail([@email])}\'>&#9632;</span>\n                                <span>[@email]</span>\n                            </li>\n                        }\n                    }</ul>\n\n                    if ([@loading_preview] == \'true\' or [@loading] == \'true\') {\n                        <button class="btnRecover" disabled="disabled"></button>\n                    }\n                    else {\n                        <button class="btnRecover" onclick="require(\'ext/revisions/revisions\').loadRevision([@id], \'apply\')"></button>\n                    }\n                }</div>\n            ?></a:caption>\n            <a:remove match="[revision]" />\n        </a:list>\n        <a:hbox edge="3 2 3 4" class="show-details">\n            <a:checkbox\n                skin    = "checkbox_grey"\n                top     = "-25"\n                right   = "10"\n                checked = "{require(\'ext/revisions/revisions\').useCompactList == false ? \'true\' : \'false\'}"\n                label   = "Show all file changes"\n                onafterchange = "\n                    require(\'ext/revisions/revisions\').toggleListView();\n            " />\n        </a:hbox>\n    </a:vbox>\n</a:application>\n'}),define("text!ext/revisions/skin.xml",[],function(){return'<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:list name="revisions-list">\n        <a:style><![CDATA[\n            /* ------------------------------------------------------------------------------------------\n             * Revision Bar\n             * --------------------------------------------------------------------------------------- */\n                .revisionsBar {\n                    border-left: 1px solid #CFD5DD;\n                }\n                .ace-solarized-light .revisionsBar {\n                    border-left-color: #E8DFC3;\n                }\n                .dark .revisionsBar {\n                    border-left-color: rgba(43,43,43,0.4);\n                }\n                #editorDiv:not(.dark) .revisionsHolder {\n                    background-color: #f8f8f8;\n                    background-image: -webkit-linear-gradient(0, rgba(242,242,242,.9) 1px, rgba(242,242,242,0) 10px);\n                    background-image:    -moz-linear-gradient(0, rgba(242,242,242,.9) 1px, rgba(242,242,242,0) 10px);\n                    background-image:         linear-gradient(0, rgba(242,242,242,.9) 1px, rgba(242,242,242,0) 10px);\n                    border-left: 1px solid #fff;\n                }\n                #editorDiv.ace-solarized-light .revisionsHolder {\n                    background-image: -webkit-linear-gradient(0, rgba(251,241,211,1) 1px, rgba(251,241,211,0) 10px);\n                    background-image:    -moz-linear-gradient(0, rgba(251,241,211,1) 1px, rgba(251,241,211,0) 10px);\n                    background-image:         linear-gradient(0, rgba(251,241,211,1) 1px, rgba(251,241,211,0) 10px);\n                    border-left-color: rgba(255,255,255,.4);\n                }\n                .dark .revisionsHolder {\n                    border-left: 1px solid rgba(255,255,255,.1);\n                }\n                .revisions-list{\n                    overflow: hidden;\n                    position: relative;\n                }\n            /* ------------------------------------------------------------------------------------------\n             * Header\n             * --------------------------------------------------------------------------------------- */\n                .revisionsBar .topbar {\n                    background: #e8e8e8;\n                    border-left: 1px solid transparent;\n                    box-shadow: 0 -1px 0 0 rgba(255,255,255,0.5) inset, 3px 1px 11px -3px rgba(0,0,0,0.3);\n                    border-bottom : 1px solid rgba(0,0,0,0.1);\n                    margin-bottom : -1px;\n                    z-index : 1000;\n                    position : relative;\n                }\n                .dark .revisionsBar .topbar {\n                    box-shadow: 0 -1px 0 0 rgba(255,255,255,0.1) inset, 3px 1px 11px -3px rgba(0,0,0,0.8);\n\n                }\n                .revisionsBar .topbar span {\n                    color: #8B8B8B;\n                    cursor: default;\n                    font-family: "Helvetica Neue", Arial;\n                    font-size: 12px;\n                    line-height: 15px;\n                    overflow: hidden;\n                    text-indent: 11px;\n                    text-transform: uppercase;\n                    text-shadow: 0 1px 0 white;\n                }\n                .dark .revisionsBar .topbar span {\n                    color: rgba(255,255,255,.8);\n                    text-shadow: 0 1px 0 rgba(0,0,0,.8);\n                }\n                .revisionsBar .topbar .btn {\n                    cursor: pointer;\n                    position: absolute;\n                    right: -5px;\n                    top: 0;\n                }\n                .revisionsBar .topbar .btn .left,\n                .revisionsBar .topbar .btn .right {\n                    display: none\n                }\n                .revisionsBar .topbar .btn .lbl {\n                    background: url(images/close-btn.png) no-repeat 0 0;\n                    height: 17px;\n                    padding: 0;\n                    width: 14px;\n                }\n                .revisionsBar .topbar .btn:hover .lbl {\n                    background-position: -14px 0;\n                }\n                .revisionsBar .topbar .btn:active .lbl {\n                    background-position: -28px 0;\n                }\n\n                .dark .revisionsBar .topbar .btn .lbl {\n                    background-position: 0 -16px;\n                }\n                .dark .revisionsBar .topbar .btn:hover .lbl {\n                    background-position: -14px -16px;\n                }\n                .dark .revisionsBar .topbar .btn:active .lbl {\n                    background-position: -28px -16px;\n                }\n            /* ------------------------------------------------------------------------------------------\n             * Revision\n             * --------------------------------------------------------------------------------------- */\n                .revisions-list .revision {\n                    border-bottom: 1px solid #ced5dd;\n                    color: #404040;\n                    cursor: pointer;\n                    display: block;\n                    font-family: Helvetica, "Helvetica-neue", Arial, Tahoma;\n                    font-size: 12px;\n                    padding: 14px 0;\n                    position: relative;\n                }\n                .revisions-list .revision:first-child {\n                    border-top: 1px solid #ced5dd;\n                }\n                .revisions-list .revision.hover {\n                    box-shadow: 0 0 0 1000em rgba(255, 255, 255, 0.1) inset,0 1px 0 0 #F8F8F8 inset,\n                                0 -1px 0 0 #F8F8F8 inset;\n                }\n                .revisions-list .revision.selected {\n                    background: #107BC9;\n                    background: -webkit-linear-gradient(top, #1f88d4, #006ebd) !important;\n                    background:    -moz-linear-gradient(top, #1f88d4, #006ebd) !important;\n                    background:         linear-gradient(top, #1f88d4, #006ebd) !important;\n                    border-top-color: #1875B8;\n                    box-shadow: 0 1px 0 #41A7F1 inset,\n                                0 -1px 0 0 #1875B8 !important;\n                    color: #fff;\n                    text-shadow: 0 1px 0 #0067b0;\n                }\n\n                .revision .revision-icon {\n                    float: left;\n                    text-align: right;\n                    width: 21px;\n                }\n                .revision.selected .revision-icon .rev-usersave,\n                .revision.selected .revision-icon .rev-autosave {\n                    color: white;\n                    opacity: 0.85;\n                }\n                .revision .revision-icon .rev-usersave {\n                    font-family: Helvetica, Arial, sans-serif;\n                    font-size: 12px;\n                    font-weight: bold;\n                    color: #37a0e3;\n                }\n\n                .revision .revision-icon .rev-autosave {\n                    font-family: Helvetica, Arial, sans-serif;\n                    font-size: 12px;\n                    font-weight: bold;\n                    color: #AEAEAE;\n                }\n\n                .revision .revision-icon .rev-restoration {\n                    display: inline-block;\n                    width: 15px;\n                    height: 15px;\n                    background: url(images/rev-green-arrow-small.png) no-repeat 0 0%;\n                    overflow: hidden;\n                    text-align: left;\n                    text-indent: -999px;\n                }\n                .revision.selected .revision-icon .rev-restoration {\n                    background-position: 0 100%;\n                }\n                .compactView .revision .rev-usersave,\n                .compactView .revision .rev-autosave {\n                    display: none;\n                }\n                .revision .revision-info {\n                    overflow: hidden;\n                    padding-left: 11px;\n                }\n                .revision .revision-title {\n                }\n                .revision .contributors {\n                    font-size: 8pt;\n                    font-style: normal;\n                    font-weight: normal;\n                    line-height: 130%;\n                    list-style: none;\n                    margin: 6px 0 0;\n                    padding: 0;\n                    color: #8d8d8d;\n                }\n                .revision.selected .contributors {\n                    color: #fff;\n                }\n                .revision .contributors span {\n                    display: inline-block;\n                    height: 11px;\n                    line-height: 11px;\n                }\n                .revision .contributors .coloredSquare {\n                    background-image: url(images/contributor.png);\n                    box-shadow: 0 1px 0 0 rgba(255,255,255,.24);\n                    overflow: hidden;\n                    text-indent: -9999px;\n                    width: 11px;\n                }\n                .revision .btnRecover {\n                    height: 26px;\n                    position: absolute;\n                    right: 10px;\n                    top: 5px;\n                    width: 29px;\n                }\n                .revision .revision-info button {\n                    background-color: #ededee;\n                    display: none;\n                    position: absolute;\n                    top: 50%;\n                    margin-top: -13px;\n                    right: 11px;\n                    width: 28px;\n                    height: 27px;\n                    background: url(images/rev-green-arrow.png) no-repeat 50% 0;\n                    border: 0;\n                    cursor: pointer;\n                }\n\n                @-webkit-keyframes loadingDots { 0%, 19.99%, 100% { background-position: 0 0 } 20%, 39.99% { background-position: -30px 0 } 40%, 59.99% { background-position: -60px 0 } 60%,79.99% { background-position: -90px 0 } 80%, 99.99% { background-position: -120px 0 } }\n                @-moz-keyframes loadingDots { 0%, 19.99%, 100% { background-position: 0 0 } 20%, 39.99% { background-position: -30px 0 } 40%, 59.99% { background-position: -60px 0 } 60%,79.99% { background-position: -90px 0 } 80%, 99.99% { background-position: -120px 0 } }\n                @keyframes loadingDots { 0%, 19.99%, 100% { background-position: 0 0 } 20%, 39.99% { background-position: -30px 0 } 40%, 59.99% { background-position: -60px 0 } 60%,79.99% { background-position: -90px 0 } 80%, 99.99% { background-position: -120px 0 } }\n\n                .revision .revision-info button[disabled] {\n                    background: url(images/loading.png) no-repeat;\n                    -webkit-animation: loadingDots .7s linear 0s infinite normal;\n                       -moz-animation: loadingDots .7s linear 0s infinite normal;\n                            animation: loadingDots .7s linear 0s infinite normal;\n                }\n\n                .revision.selected .revision-info button,\n                .revision.hover .revision-info button {\n                    display: block;\n                }\n                .revision.selected .revision-info button {\n                    background-position: 50% -30px;\n                }\n\n                .revision:only-child .revision-info button {\n                    display: none;\n                }\n\n            /* ------------------------------------------------------------------------------------------\n             * Revision DARK\n             * --------------------------------------------------------------------------------------- */\n\n            .dark .revision {\n                background: rgba(255, 255, 255, 0.1);\n                border-bottom: 1px solid rgba(0, 0, 0, 0.3);\n                border-top: 1px solid rgba(255, 255, 255, 0.05);;\n                color: rgba(255,255,255,.8);\n                cursor: default;\n            }\n            .dark .revisions-list .revision.selected {\n                background: none !important;\n                box-shadow: none !important;\n                border-top-color: transparent;\n                color: rgba(255,255,255,.8) !important;\n                text-shadow: 0 1px 0 RGBA(0,0,0,.8);\n            }\n            .dark .revisions-list .revision.hover {\n                box-shadow: 0 0 0 1000em rgba(255, 255, 255, 0.1) inset;\n            }\n            /* ------------------------------------------------------------------------------------------\n             * Show Details\n             * --------------------------------------------------------------------------------------- */\n                 .show-details {\n                    border-top: 1px solid rgba(0,0,0,0.1);\n                    box-shadow: 0 1px 0 0 #fff inset, 0px -2px 13px -6px rgba(0,0,0,0.3);\n                    padding-bottom: 3px;\n                    margin-top : -1px;\n                    z-index : 1000;\n                    position : relative;\n                 }\n                 .ace-solarized-light .show-details {\n                    box-shadow: 0 1px 0 0 rgba(255,255,255,.4) inset, 0px -2px 13px -6px rgba(0,0,0,0.3);\n                 }\n                 .dark .show-details {\n                    box-shadow: 0 1px 0 0 rgba(255,255,255,.1) inset, 0px -2px 13px -6px rgba(0,0,0,0.8);\n                 }\n                 .show-details .subbar {\n                    background: none;\n                 }\n                 .show-details .checkbox {\n                    left: 1px;\n                 }\n            /* ------------------------------------------------------------------------------------------\n             * Other\n             * --------------------------------------------------------------------------------------- */\n                 .revisions-listFocus>.indicate>SPAN>U{\n                    border: 1px dotted #BBB;/*#25a8e7;*/\n                    color : black;\n                    padding: 1px 3px 1px 1px;\n                }\n\n                .revisions-list>.selected>SPAN>U{\n                    background-color: #f0f0f0;\n                    color: black;\n                }\n                .revisions-listFocus>.selected>SPAN>U {\n                    color: white;\n                    background-color: #25a8e7;\n                }\n\n                .revisions-list .empty, .revisions-list .offline, .revisions-list .loading{\n                    text-align: center;\n                    padding: 8px 0 0 5px;\n                    color: #aaa;\n                    font-weight : normal;\n                }\n\n                .revisions-list.emptyLeft .empty {\n                    text-align: left;\n                }\n\n                .spiRevisionPreview, spiRevisionLoading {\n                    position: absolute;\n                    top: 5px;\n                    right: 0;\n                    background-image: url(images/revisions-spinner-active.gif);\n                }\n\n                .ace_dark .revision_hl_delete {\n                    position: absolute;\n                    background: rgb(118, 54, 54);\n                }\n\n                .revision_hl_delete {\n                    position: absolute;\n                    background: rgb(243, 207, 207);\n                }\n\n                /*\n                 * Uncomment the following for strikethrough on deleted text\n                 * .revision_hl_delete_strike {\n                 *     position: absolute;\n                 *     border-bottom: solid 1px black;\n                 *     padding: 0;\n                 *     margin: 0;\n                 *     margin: -.6em 0 0 0;\n                 * }\n                 */\n\n                .ace_dark .revision_hl_insert {\n                    position: absolute;\n                    background: rgb(73, 102, 73);\n                }\n\n                .revision_hl_insert {\n                    position: absolute;\n                    background: rgb(168, 232, 166);\n                }\n                \n	        .c9-revisionsInfo {\n				width: 428px;\n				height: 230px;\n	            position: absolute;\n	            top: 39px;\n	            left: 354px;\n	            z-index: 50000;\n	            min-width: 0px;\n	            min-height: 0px;\n	            max-width: 9998px;\n	            max-height: 9992px;\n	            display: none;\n	            opacity: 1;\n	            padding: 7px;\n	            color: white;\n	            line-height: 13px;\n	        }\n	        \n	        .revisionsInfoDesc {\n	        	color: white;\n	        	background: transparent;\n	        	line-height: 16px;\n	        }\n\n\n            .dark .cbgrey.cbcontainer span {\n                color: rgba(255,255,255,.8);\n            }\n            .dark .cbgrey.cbcontainer .checkbox {\n                border-radius: 5px;\n                box-shadow: 0 -1px 0 0 rgba(0,0,0,.9) inset;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main container=".">\n                <div class="revisions-list">\n                </div>\n            </a:main>\n            <a:item class="." caption="." icon="." select=".">\n                <div class="revision"></div>\n            </a:item>\n            <a:dragindicator>\n                <div class="revision draglist"></div>\n            </a:dragindicator>\n            <a:loading>\n                <div class="loading">Loading...</div>\n            </a:loading>\n            <a:empty caption=".">\n                <div class="message">-</div>\n            </a:empty>\n        </a:presentation>\n    </a:list>\n</a:skin>'}),define("ext/revisions/revisions_util",["require","exports","module","ace/range","ace/anchor"],function(e,t,n){var r=e("ace/range").Range,i=e("ace/anchor").Anchor,s=6e5;t.compactRevisions=function(e){return e.length?e.length===1?[e]:e.reduce(function(e,t){var n=[e],r=[t];if(e.length){var i=e[e.length-1];return t<i[0]+s?i.push(t):e.push(r),e}return t<e+s?(n.push(t),[[e,t]]):[n,r]}):[]},t.generateCompactRevisions=function(e){if(!e||!e.allRevisions)return;var n=e.allRevisions,r={},i=[],s=function(e){return n[e]&&n[e].restoring},o=function(e,t){var n=e[e.length-1];return n.length===0||!s(t)&&!s(n[0])?n.push(t):e.push([t]),e},u=t.keysToSortedArray(e.allRevisions);return t.compactRevisions(u).forEach(function(e){i.push.apply(i,e.__reduce(o,[[]]))}),e.groupedRevisionIds=i,i.forEach(function(e){var t=e[e.length-1],s=i[t]={first:e[0],patch:[]};Object.keys(n[t]).forEach(function(e){e!=="patch"&&(s[e]=n[t][e])});var o=[];e.forEach(function(e){n[e]&&(s.patch.push(n[e].patch),n[e].contributors&&n[e].contributors.forEach(function(e){o.indexOf(e)===-1&&o.push(e)}))}),s.contributors=o,r[t]=s}),r},Array.prototype.__reduce=function(e,t){var n,r;if(t!==null)n=t,r=0;else{if(!this)return null;n=this[0],r=1}var i=this.length;for(;r<i;r++)n=e(n,this[r]);return n};var o={0:"equal",1:"insert","-1":"delete"};t.addCodeMarker=function(e,t,n,s){e.revAnchors||(e.revAnchors=[]);var u,a=new i(t,s.fromRow,s.fromCol);e.revAnchors.push(a);var f=s.toCol-s.fromCol,l=s.toRow-s.fromRow,c=function(){u&&e.removeMarker(u);var t=a.getPosition(),i={row:a.row+l,column:a.column+f},s=r.fromPoints(t,i);if(s.isEmpty())return;u=e.addMarker(s,"revision_hl_"+o[n.toString()],"background")};c(),a.on("change",c)},t.question=function(e,t,n,r,i){winQuestionRev.show(),winQuestionRev.setAttribute("title",e),winQuestionRevHeader.$ext.innerHTML=t,winQuestionRevMsg.$ext.innerHTML=n,btnQuestionRevYesAll.onclick=r,btnQuestionRevNoAll.onclick=i},t.keysToSortedArray=function(e){return Object.keys(e).map(function(e){return parseInt(e,10)}).sort(function(e,t){return e-t})}}),define("text!ext/revisions/style.css",[],function(){return".c9-revisionsInfo {\n	width: 240px;\n	height:63px;\n    position: absolute;\n    top: 10px;\n    left: 450px;\n    z-index: 50000;\n    min-width: 0px;\n    min-height: 0px;\n    max-width: 9998px;\n    max-height: 9992px;\n    opacity: 0;\n    display: block;\n    padding: 7px;\n    line-height: 13px;\n    overflow: visible;\n}\n\n.revisionsInfoDesc {\n    color: #BDBDBD;\n	background: transparent;\n	line-height: 16px;\n    position: relative;\n}\n\n.revisionsInfoArrow {\n    left: 115px;\n}\n\n.revisionsInfoLink {\n    color :#BDBDBD;\n}"}),define("ext/revisions/revisions",["require","exports","module","core/ide","core/ext","core/util","ext/editors/editors","ext/menus/menus","ext/commands/commands","ext/settings/settings","ace/edit_session","ace/document","text!ext/revisions/revisions.xml","text!ext/revisions/skin.xml","ext/revisions/revisions_util","text!ext/revisions/style.css","ext/code/code","ext/beautify/beautify","ext/statusbar/statusbar","ext/stripws/stripws","ext/language/language","ext/save/save","core/ext","core/ext"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("core/util"),o=e("ext/editors/editors"),u=e("ext/menus/menus"),a=e("ext/commands/commands"),f=e("ext/settings/settings"),l=e("ace/edit_session").EditSession,c=e("ace/document").Document,h=e("text!ext/revisions/revisions.xml");h=h.replace("{ide.staticPrefix}",r.staticPrefix);var p=e("text!ext/revisions/skin.xml"),d=e("ext/revisions/revisions_util"),v=e("text!ext/revisions/style.css"),m=e("ext/code/code"),g=e("ext/beautify/beautify"),y=e("ext/statusbar/statusbar"),b=e("ext/stripws/stripws"),w=e("ext/language/language"),E=e("ext/save/save"),S=200,x=6e4,T=!1;n.exports=i.register("ext/revisions/revisions",{name:"Revisions",dev:"Cloud9",alone:!0,type:i.GENERAL,markup:h,offline:!0,nodes:[],skin:p,rawRevisions:{},revisionQueue:{},changedPaths:[],toggle:function(){if(o.currentEditor.path!=="ext/code/code")return;i.initExtension(this),this.panel.visible?this.hide():this.show()},hook:function(){if(r.readonly)return;var e=this;a.addCommand({name:"revisionpanel",hint:"File Revision History...",bindKey:{mac:"Command-B",win:"Ctrl-B"},isAvailable:function(e){return e&&e.path=="ext/code/code"},exec:function(){e.toggle()}}),this.nodes.push(this.mnuSave=new apf.menu({id:"mnuSave"}),u.addItemByPath("File/~",new apf.divider,800),u.addItemByPath("File/File Revision History...",new apf.item({type:"check",checked:"[{require('ext/settings/settings').model}::general/@revisionsvisible]",disabled:"{!tabEditors.length}",command:"revisionpanel"}),900),u.addItemByPath("File/~",new apf.divider,910)),r.addEventListener("init.ext/tabbehaviors/tabbehaviors",function(){u.addItemByPath("~",new apf.divider,2e3,mnuContextTabs),u.addItemByPath("File Revision History...",new apf.item({command:"revisionpanel"}),2100,mnuContextTabs)}),r.addEventListener("init.ext/code/code",function(){e.nodes.push(mnuCtxEditor.insertBefore(new apf.item({id:"mnuCtxEditorRevisions",caption:"File Revision History...",command:"revisionpanel"}),mnuCtxEditorCut),mnuCtxEditor.insertBefore(new apf.divider({visible:"{mnuCtxEditorRevisions.visible}"}),mnuCtxEditorCut))}),this.$onMessageFn=this.onMessage.bind(this),this.$onOpenFileFn=this.onOpenFile.bind(this),this.$onCloseFileFn=this.onCloseFile.bind(this),this.$onFileSaveFn=this.onFileSave.bind(this),this.$onAfterOnline=this.onAfterOnline.bind(this),this.$onRevisionSaved=this.onRevisionSaved.bind(this),r.addEventListener("socketMessage",this.$onMessageFn),r.addEventListener("afteropenfile",this.$onOpenFileFn),r.addEventListener("afterfilesave",this.$onFileSaveFn),r.addEventListener("closefile",this.$onCloseFileFn),r.addEventListener("afteronline",this.$onAfterOnline),r.addEventListener("revisionSaved",this.$onRevisionSaved),r.addEventListener("removefile",this.onFileRemove.bind(this)),r.addEventListener("updatefile",this.onFileUpdate.bind(this)),(window.cloud9config.hosted||!this.isCollab())&&r.loggedIn&&apf.ajax("/api/context/getemail",{method:"get",callback:function(t,n,r){n===200&&t&&(e.defaultUser={email:t})}}),this.defaultUser={email:null},this.offlineQueue=[];if(localStorage.offlineQueue)try{this.offlineQueue=JSON.parse(localStorage.offlineQueue)}catch(t){this.offlineQueue=[]}this.$initWorker()},$initWorker:function(){this.worker=new Worker(r.workerPrefix+"/ext/revisions/revisions_worker.js"),this.worker.onmessage=this.onWorkerMessage.bind(this),this.worker.onerror=function(e){throw new Error("Error from worker:\n"+e.message)},this.worker.postMessage({type:"preloadlibs",prefix:r.workerPrefix})},init:function(){var e=this,t=r.getActivePage();t&&this.$switchToPageModel(t),apf.importCssString(v),this.nodes.push(this.panel=new apf.bar({id:"revisionsPanel",visible:!1,top:6,bottom:0,right:0,width:S,height:"100%","class":"revisionsBar"})),r.addEventListener("init.ext/code/code",function(t){e.panel=t.ext.amlEditor.parentNode.appendChild(e.panel),revisionsPanel.appendChild(pgRevisions)}),apf.addEventListener("exit",function(){localStorage.offlineQueue=JSON.stringify(e.offlineQueue)}),this.$afterSelectFn=this.afterSelect.bind(this),this.$afterModelUpdate=this.afterModelUpdate.bind(this),this.$onSwitchFileFn=this.onSwitchFile.bind(this),lstRevisions.addEventListener("afterselect",this.$afterSelectFn),r.addEventListener("tab.afterswitch",this.$onSwitchFileFn),this.$setRevisionListClass()},$switchToPageModel:function(e){if(!s.pageIsCode(e))return;e.$mdlRevisions||(e.$mdlRevisions=new apf.model),this.model=e.$mdlRevisions,this.model.addEventListener("afterload",this.$afterModelUpdate)},$restoreSelection:function(e,t){if(e.$showRevisions!==!0||!window.lstRevisions||s.isNewPage(e)||!t.data)return;var n=lstRevisions.selection,r=t.data.firstChild;n&&n.length===0&&e.$selectedRevision&&(r=t.queryNode("revision[@id='"+e.$selectedRevision+"']")),lstRevisions.select(r)},$getRevisionObject:function(e){var t=this.rawRevisions[e];return t||(t=this.rawRevisions[e]={},t.useCompactList=!0,t.groupedRevisionIds=[],t.previewCache={},t.usersChanged=[]),t},hideRevisionsInfo:function(){if(T||!window.revisionsInfo)return;setTimeout(function(e){T||apf.tween.single(revisionsInfo,{from:1,to:0,steps:10,type:"opacity",anim:apf.tween.easeInOutCubic,interval:30})},200)},onOpenFile:function(e){if(!e||!e.doc)return;var t=e.doc;if(!t.acedoc)return;var n=t.$page||r.getActivePage();this.$switchToPageModel(n),s.isNewPage(n)||r.send({command:"revisions",subCommand:"getRevisionHistory",path:s.getDocPath(n)});var i=this;(t.acedoc||t).addEventListener("change",function(e){i.onDocChange(e,t)})},onDocChange:function(e,t){if(!e.data||!e.data.delta||!e.data.delta[0])return;var n=this;setTimeout(function(){var r=e.data.delta[0].suffix;if(!r)return;var i=n.getUser(r,t);if(!i)return;n.addUserToDocChangeList(i,t)},50)},onFileUpdate:function(e){if(!e||!e.path||!e.newPath)return;var t=s.stripWSFromPath(e.path),n=s.stripWSFromPath(e.newPath);this.rawRevisions[t]&&(this.rawRevisions[n]=this.rawRevisions[t],delete this.rawRevisions[t]),r.send({command:"revisions",subCommand:"moveRevision",path:t,newPath:n})},onFileRemove:function(e){r.send({command:"revisions",subCommand:"removeRevision",isFolder:e.isFolder,path:s.stripWSFromPath(e.path)})},onSwitchFile:function(e){var t=r.getActivePage();this.$switchToPageModel(t);if(!s.pageIsCode(t)||!this.panel)return;t.$showRevisions===!0?this.show():this.hide()},onFileSave:function(e){this.saveRevision(e.doc,e.silentsave)},onCloseFile:function(e){var t=this;setTimeout(function(){var n=s.getDocPath(e.page);t.rawRevisions[n]&&delete t.rawRevisions[n],t.worker.postMessage({type:"closefile",path:n});for(var r in t.revisionQueue){var i=t.revisionQueue[r].path;i&&i===n&&delete t.revisionQueue[r]}},100)},$makeNewRevision:function(e){var t=this.$getRevisionObject(e.path);e.revisions=t.allRevisions,this.worker.postMessage(e)},onRevisionSaved:function(e){if(typeof e.ts!="number")throw new Error("Expected number, but got "+typeof e.ts);var t=this.offlineQueue;for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i&&i.applyOn===e.ts){this.$makeNewRevision(i);break}}},onAfterOnline:function(e){if(!this.offlineQueue.length)return;this.offlineQueue.forEach(function(e,t,n){var r=n[t-1];r&&(e.applyOn=r.ts)}),this.$makeNewRevision(this.offlineQueue.shift()),localStorage.offlineQueue="[]",this.offlineQueue=[]},afterSelect:function(e){var t=e.currentTarget.selected;if(!t||e.currentTarget.selection.length>1)return;var n=this.$getRevisionObject(s.getDocPath()),i=parseInt(t.getAttribute("id"),10),o=n.previewCache;o[i]?this.previewRevision(i,null,o[i][1],o[i][0]):this.loadRevision(i,"preview"),r.getActivePage().$selectedRevision=i},afterModelUpdate:function(e){var t=e.currentTarget;if(!t||!t.data||t.data.childNodes.length===0)return;typeof lstRevisions!="undefined"&&(lstRevisions.setModel(t),this.$restoreSelection(r.getActivePage(),t))},onWorkerMessage:function(e){if(!e.data.type)return;switch(e.data.type){case"apply":this.applyRevision(e.data.content.id,e.data.content.value);break;case"preview":var t=e.data.content;this.previewRevision(t.id,t.value,t.ranges);break;case"newRevision":var n=e.data.revision;if(n.patch[0].length===0)return;this.revisionQueue[n.ts]={path:e.data.path,revision:n},this.$saveExistingRevision(e.data.path,n);break;case"newRevision.error":var i=this.$getRevisionObject(e.data.path);i&&(i.hasBeenSentToWorker=!1);break;case"recovery":e.data.revision.nextAction==="storeAsRevision"&&(delete e.data.revision.finalContent,delete e.data.revision.realContent,r.send({command:"revisions",subCommand:"saveRevision",path:e.data.path,revision:e.data.revision,forceRevisionListResponse:!0}));break;case"debug":console.log("WORKER DEBUG\n",e.data.content)}},$saveExistingRevision:function(e,t){r.send({command:"revisions",subCommand:"saveRevision",path:e,revision:t})},onMessage:function(e){var t=this,n=e.message;if(n.type!=="revision")return;var i=r.getActivePage(),o=this.$getRevisionObject(n.path);if(i&&apf.isTrue(i.$model.data.getAttribute("guidedtour")))return;switch(n.subtype){case"confirmSave":var u=n.ts;if(!this.revisionQueue[u])return this.getRevisionHistory({path:n.path,id:u});var a=this.revisionQueue[u].revision;if(a){a.saved=!0,o.allRevisions||(o.allRevisions={}),o.allRevisions[u]=a,delete this.revisionQueue[u],o.compactRevisions=d.generateCompactRevisions(o),r.dispatchEvent("revisionSaved",{ts:u,path:n.path,revision:a});var f=this.getXmlStringFromRevision(a),i=tabEditors.getPage(r.davPrefix+"/"+n.path);if(i){var l=i.$mdlRevisions;if(l&&l.data&&l.data.childNodes.length){var c=apf.getXml(f);apf.xmldb.appendChild(l.data,c,l.data.firstChild)}}}break;case"getRevisionHistory":n.body&&n.body.revisions&&(o.allRevisions=n.body.revisions),o.compactRevisions=d.generateCompactRevisions(o);if(!n.nextAction||!n.id){i&&s.getDocPath(i)===n.path&&i.$showRevisions===!0&&this.populateModel(o,this.model);break}var h={id:n.id,group:{},type:n.nextAction},p=o.groupedRevisionIds.length;if(o.useCompactList&&p>0){for(var v=0;v<p;v++){var m=o.groupedRevisionIds[v];if(m.indexOf(parseInt(n.id,10))!==-1){m.forEach(function(e){h.group[e]=this.getRevision(e)},this);break}}if(Object.keys(h.group).length>1){this.worker.postMessage(h);break}}h.group[n.id]=this.getRevision(n.id),this.worker.postMessage(h),this.waitingForRevisionHistory=!1;break;case"getRealFileContents":var g=tabEditors.getPages();g.forEach(function(e){var r=s.stripWSFromPath(e.$model.data.getAttribute("path"));if(n.path===r){var i={inDialog:!0,type:"recovery",lastContent:e.$doc.getValue(),realContent:n.contents,path:n.path};n.nextAction==="storeAsRevision"&&(i.nextAction="storeAsRevision"),t.worker.postMessage(i)}});break;case"serverError":console&&console.error&&console.error("Server error in "+n.body.fromMethod+": "+n.body.msg)}},toggleListView:function(e){var t=this.$getRevisionObject(s.getDocPath());t.useCompactList=!t.useCompactList,t.previewCache={},this.$setRevisionListClass(),e=e||r.getActivePage().$mdlRevisions,setTimeout(function(){var t=e.data.firstChild;t&&lstRevisions.select(t)})},populateModel:function(e,t){var n=r.getActivePage();if(s.isNewPage(n)||!s.pageIsCode(n))return;if(!e||!t){console.error("Expected a parameter and a model");return}var i;e.useCompactList&&e.compactRevisions?i=e.compactRevisions:i=e.allRevisions;var o=d.keysToSortedArray(i),u="";for(var a=o.length-1;a>=0;a--)u+=this.getXmlStringFromRevision(i[o[a]]);this.model.load("<revisions>"+u+"</revisions>")},getXmlStringFromRevision:function(e){if(!e)return;var t=function(e){return apf.n("<contributor />").attr("email",e).node().xml},n=(new Date(e.ts)).toString("MMM d, h:mm tt"),r=e.restoring||"",i=s.toXmlTag("revision",{id:e.ts,name:n,silentsave:e.silentsave,restoring:r},!0),o="";return e.contributors&&e.contributors.length&&(o=e.contributors.map(t).join("")),i+="<contributors>"+o+"</contributors></revision>",i},isCollab:function(e){if(!e&&!r.getActivePage())return!1;var e=e||r.getActivePage().$doc;return e.acesession&&!!e.acesession.collabDoc},isMaster:function(e){return this.getConcorde().isMaster(e)},getRevision:function(e,t){e=parseInt(e,10);var n=this.$getRevisionObject(s.getDocPath()),r=d.keysToSortedArray(n.allRevisions),i=r.indexOf(e);if(i===-1)return;var o={content:t,id:e,revision:i,patchesByTS:{}};for(var u=0,a=r.length;u<a;u++)o.patchesByTS[r[u]]=n.allRevisions[r[u]].patch[0];return o},loadRevision:function(e,t){t==="preview"?this.$setRevisionNodeAttribute(e,"loading_preview","true"):this.$setRevisionNodeAttribute(e,"loading","true");var n=s.getDocPath(),r=this.rawRevisions[n];if(r)return this.onMessage({message:{id:e,type:"revision",subtype:"getRevisionHistory",path:n,nextAction:t}});this.getRevisionHistory({nextAction:t,path:n,id:e})},getRevisionHistory:function(e){this.waitingForRevisionHistory=!0,e.command="revisions",e.subCommand="getRevisionHistory",r.send(e)},applyRevision:function(e,t){var n=r.getActivePage().$doc;n.setValue(t),this.$setRevisionNodeAttribute(e,"loading","false"),this.saveRevision(n,!0,e),this.hide()},previewRevision:function(e,t,n,r){var i=m.amlEditor.$editor,o=i.getSession(),u=this.$getRevisionObject(s.getDocPath());o.previewRevision!==!0&&!u.realSession&&(u.realSession=o);var a;if(!r){a=new c(t||""),r=new l(a,u.realSession.getMode()),r.previewRevision=!0,n.forEach(function(e){d.addCodeMarker(r,a,e[4],{fromRow:e[0]-1,fromCol:e[1],toRow:e[2]-1,toCol:e[3]})}),i.setSession(r);var f=0;n.length>0&&(f=n[0][0]),i.renderer.scrollToRow(f-i.$getVisibleRowCount()/2)}else i.setSession(r),a=r.doc;i.setReadOnly(!0),i.selection.clearSelection(),this.$setRevisionNodeAttribute(e,"loading_preview","false"),u.previewCache||(u.previewCache={}),u.previewCache[e]=[r,n]},goToEditView:function(){if(!m.amlEditor)return;var e=this.$getRevisionObject(s.getDocPath());e.realSession&&m.amlEditor.$editor.setSession(e.realSession),m.amlEditor.$editor.setReadOnly(!1),m.amlEditor.show()},saveRevision:function(e,t,n){var i=e.$page;if(!s.pageIsCode(i))return;var o=s.getDocPath(i),u=this.$getEditingUsers(o);u.length===0&&this.defaultUser.email&&u.push(this.defaultUser.email);var a={path:o,silentsave:!!t,restoring:n,contributors:u,type:"newRevision",lastContent:e.getValue()};if(r.onLine===!1)a.ts=Date.now(),this.offlineQueue.push(a);else{if(this.isCollab()&&!this.isMaster(i.name))return;var f=this.$getRevisionObject(o);f.hasBeenSentToWorker===!0?this.worker.postMessage({type:"newRevision",path:o,lastContent:a.lastContent,hasBeenSentToWorker:!0}):(a.revisions=f.allRevisions,this.worker.postMessage(a),f.hasBeenSentToWorker=!0)}this.$resetEditingUsers(o)},addUserToDocChangeList:function(e,t){if(e&&t){var n=s.getDocPath(t.$page),r=this.rawRevisions[n];r&&r.usersChanged.indexOf(e.email)===-1&&r.usersChanged.push(e.email)}},getCollab:function(){return e("core/ext").extLut["ext/collaborate/collaborate"]},getConcorde:function(){return e("core/ext").extLut["ext/concorde/concorde"]},getUser:function(e,t){if(t&&t.users&&t.users[e]){var n=t.users[e].split("-")[0],r=this.getCollab();if(r&&r.users[n])return r.users[n]}},getUserColorByEmail:function(e){var t=this.getCollab();if(!t)return;var n,r=t.model.queryNode("group[@name='members']/user[@email='"+e+"']");return r&&(n=r.getAttribute("color")),n},$setRevisionNodeAttribute:function(e,t,n){var r=this.model.queryNode("revision[@id='"+e+"']");r&&apf.xmldb.setAttribute(r,t,n)},$getEditingUsers:function(e){var t=[];return this.rawRevisions[e]&&this.rawRevisions[e].usersChanged&&(t=this.rawRevisions[e].usersChanged),t},$resetEditingUsers:function(e){return this.rawRevisions[e]&&(this.rawRevisions[e].usersChanged=[]),this.rawRevisions[e].usersChanged},$setRevisionListClass:function(){var e=this.rawRevisions[s.getDocPath()];if(!e)return;e.useCompactList===!0?apf.setStyleClass(lstRevisions.$ext,"compactView"):apf.setStyleClass(lstRevisions.$ext,null,["compactView"]),this.populateModel(e,this.model)},show:function(){var e=r.getActivePage();if(!s.pageIsCode(e))return;i.initExtension(this),f.model.setQueryValue("general/@revisionsvisible",!0),this.panel.visible||(r.dispatchEvent("ext.revisions.show",{barWidth:S})!==!1&&(m.amlEditor.$ext.style.right=S+"px"),e.$showRevisions=!0,this.panel.show(),r.dispatchEvent("revisions.visibility",{visibility:"shown",width:S}),g.disable(),y.offsetWidth=S,y.setPosition(),b.disable(),w.disable());var t=e.$mdlRevisions;if(t){lstRevisions&&lstRevisions.getModel()!==t&&lstRevisions.setModel(t);var n=s.getDocPath(),o=this.rawRevisions[n];!o&&!this.waitingForRevisionHistory?(this.model=t,this.getRevisionHistory({path:n})):(this.populateModel(o,t),this.$restoreSelection(e,t))}},hide:function(){f.model.setQueryValue("general/@revisionsvisible",!1),r.dispatchEvent("ext.revisions.hide",{barWidth:S})!==!1&&(m.amlEditor.$ext.style.right="0");var e=r.getActivePage();if(!e)return;e.$showRevisions=!1,this.panel.hide(),g.enable(),y.offsetWidth=0,y.setPosition(),b.enable(),w.enable(),lstRevisions&&lstRevisions.selectList([]),this.goToEditView()},disableEventListeners:function(){this.$onMessageFn&&r.removeEventListener("socketMessage",this.$onMessageFn),this.$onOpenFileFn&&r.removeEventListener("afteropenfile",this.$onOpenFileFn),this.$onCloseFileFn&&r.removeEventListener("closefile",this.$onCloseFileFn),this.$onFileSaveFn&&r.removeEventListener("afterfilesave",this.$onFileSaveFn),this.$onSwitchFileFn&&r.removeEventListener("tab.afterswitch",this.$onSwitchFileFn),this.$afterSelectFn&&lstRevisions.removeEventListener("afterselect",this.$afterSelectFn),this.$onAfterOnline&&r.removeEventListener("onafteronline",this.$onAfterOnline),this.$onRevisionSaved&&r.removeEventListener("revisionSaved",this.$onRevisionSaved)},enableEventListeners:function(){this.$onMessageFn&&r.addEventListener("socketMessage",this.$onMessageFn),this.$onOpenFileFn&&r.addEventListener("afteropenfile",this.$onOpenFileFn),this.$onCloseFileFn&&r.addEventListener("closefile",this.$onCloseFileFn),this.$onFileSaveFn&&r.addEventListener("afterfilesave",this.$onFileSaveFn),this.$onSwitchFileFn&&r.addEventListener("tab.afterswitch",this.$onSwitchFileFn),this.$afterSelectFn&&lstRevisions.addEventListener("afterselect",this.$afterSelectFn),this.$onAfterOnline&&r.addEventListener("onafteronline",this.$onAfterOnline),this.$onRevisionSaved&&r.addEventListener("revisionSaved",this.$onRevisionSaved)},enable:function(){this.enableEventListeners(),this.$enable()},disable:function(){this.hide(),tabEditors.getPages().forEach(function(e){e.$mdlRevisions&&delete e.$mdlRevisions},this),this.disableEventListeners(),this.$disable()},destroy:function(){u.remove("File/File revisions"),u.remove("File/~",1e3),a.removeCommandByName("revisionpanel"),this.saveInterval&&clearInterval(this.saveInterval),this.disableEventListeners(),tabEditors.getPages().forEach(function(e){e.$mdlRevisions&&delete e.$mdlRevisions},this),this.worker&&(this.worker.terminate(),this.worker=null),this.$destroy()}})}),define("text!ext/splitview/splitview.css",[],function(){return".editor_tab .btnsesssioncontainer div.curbtn.splitview_active .tab_middle {\n    color: #036A07;\n    text-shadow: rgba(255, 255, 255, .71) 0px 1px 0px !important;\n}\n\n.editor_tab .btnsesssioncontainer div.curbtn.splitview_inactive .tab_middle {\n}\n\n.editor_tab .btnsesssioncontainer div.curbtn.splitview_nplus1 .tab_middle:before {\n    background-image: url(/static/ext/main/style/images/c9-repeat-x.png);\n    background-position: 0 -1126px;\n}"}),define("ext/splitview/grids",["require","exports","module"],function(e,t,n){function u(e,t,n){if(e.node)return;n=n||apf.document.documentElement,(apf.isArray(e)?e:Object.keys(e)).forEach(function(r){var i={};"vbox|hbox".indexOf(r)>-1?n===apf.document.documentElement?(i.visible=!1,i.anchors="2 0 0 0"):(i.flex=1,i.padding="0"):r=="splitter"&&(i.visible=!1,i.skin="darksplitter",i.zindex=8);var s=n.appendChild(new apf[r](i));r=="splitter"&&t.push(s),n===apf.document.documentElement&&(e.node=s),e[r]&&e[r]!==1&&u(e[r],t,s)})}function a(e){e=e||o;var t=r[e];if(!t)throw new Error("Grid layout with name '"+e+"' not found!");if(t.node)return;t.insertPoints=t.insertPoints.map(function(e){return typeof e=="string"?e.splitSafe("\\/",null,!0):e});var n=[];u(t.struct,n),t.node||(t.node=t.struct.node),t.splitters||(t.splitters=n);if(!t.node.$resizeListener){var s,a;t.node.addEventListener("resize",t.node.$resizeListener=function(e){a=e;if(s)return;i.dispatchEvent("resize",a,this),setTimeout(function(){var e,n;for(var r=0,i=t.splitters.length;r<i;++r)e=t.splitters[r],n=e.$ext.getElementsByTagName("span")[0],e.$ext.className.indexOf("vertical")>-1?n.style.marginTop=e.$ext.offsetHeight/2-20+"px":n.style.marginLeft=e.$ext.offsetWidth/2-20+"px"}),s=setTimeout(function(){s=null},100)})}}function f(e,t,n){var r,i=!1;while(!i){r=n.shift();if(e.tagName.indexOf(r)==-1)throw new Error("No valid insertion point found for editor");if(n.length>1)for(var s=0,o=e.childNodes.length;s<o;++s){if(e.childNodes[s].tagName.indexOf(n[0])==-1)continue;e=e.childNodes[s];break}else if(!n.length)e.appendChild(t),i=!0;else if(n[0].indexOf("splitter")>-1){var u=n[0].match(/\[(\d)\]/),a=u&&u[1]?parseInt(u[1],10)-1:0,f=-1;for(var s=0,o=e.childNodes.length;s<o&&!i;++s){if(e.childNodes[s].tagName.indexOf("splitter")==-1||a!==++f)continue;e.insertBefore(t,e.childNodes[s]),i=!0}if(!i)throw new Error("Could not find the splitter to insert before!")}else{for(var s=0,o=e.childNodes.length;s<o&&!i;++s){if(e.childNodes[s].tagName.indexOf(n[0])==-1)continue;e.childNodes[s].appendChild(t),i=!0}if(!i)throw new Error("Could not find the vbox or hbox to insert before!")}}t.show(),t.previousSibling&&t.previousSibling.tagName=="splitter"&&t.previousSibling.show()}var r={"3cols":{ascii:"+--+--+--+\n|  |  |  |\n+--+--+--+",struct:{hbox:["splitter","splitter"]},insertPoints:["hbox/splitter[1]","hbox/splitter[2]","hbox"]},"3rows":{ascii:"+-----+\n|     |\n+-----+\n|     |\n+-----+\n|     |\n+-----+",struct:{vbox:["splitter","splitter"]},insertPoints:["vbox/splitter[1]","vbox/splitter[2]","vbox"]},"2cols2rows":{ascii:"+--+--+\n|  |  |\n|  +--+\n|  |  |\n+--+--+",struct:{hbox:{splitter:1,vbox:{splitter:1}}},insertPoints:["hbox/splitter","hbox/vbox/splitter","hbox/vbox"]},col2rowscol:{ascii:"+--+--+\n|  |  |\n+--+  |\n|  |  |\n+--+--+",struct:{hbox:{vbox:{splitter:1},splitter:1}},insertPoints:["hbox/vbox/splitter","hbox/vbox","hbox"]},row2colsrow:{ascii:"+--+--+\n|  |  |\n+--+--+\n|     |\n+-----+",struct:{vbox:{hbox:{splitter:1},splitter:1}},insertPoints:["vbox/hbox/splitter","vbox/hbox","vbox"]},"2rows2cols":{ascii:"+-----+\n|     |\n+--+--+\n|  |  |\n+--+--+",struct:{vbox:{splitter:1,hbox:{splitter:1}}},insertPoints:["vbox/splitter","vbox/hbox/splitter","vbox/hbox"]}},i=n.exports=(new apf.Class).$init(),s=Object.keys(r),o=i.DEFAULT_GRID="3cols";i.init=function(e){return e=e||o,a(e),e},i.get=function(e){return r[e]},i.update=function(e,t){var n=r[e],i=t.pairs[0].page,s=i.fake?i.relPage:i;s.appendChild(n.node);var o=0,u=t.pairs.length;for(;o<u;++o)f(n.node,t.pairs[o].editor,[].concat(n.insertPoints[o]));var a=n.splitters||n.node.selectNodes("splitter");for(o=a.length-1;o>=u-1;--o)a[o].hide()},i.show=function(e){s.forEach(function(t){var n=r[t];if(!n.node)return;t==e?n.node.show():n.node.hide()})},i.hide=function(e){e=e||o;var t=r[e];if(!t||!t.node)return;t.node.hide()}}),define("ext/splitview/zmanager",["require","exports","module"],function(e,t,n){n.exports=function(e,t){var n=e||1,r=t||2;this.set=function(e){e.$storedZ=apf.getStyle(e,"zIndex"),n+=r,e.style.zIndex=n},this.clear=function(e){if(typeof e.$storedZ=="undefined")return;e.style.zIndex=e.$storedZ,delete e.$storedZ},this.resetAll=function(t){if(!apf.isArray(t)||!t.length)return;n=e||1;var r=0,i=t.length;for(;r<i;++r)this.clear(t[r]);for(r=0;r<i;++r)this.set(t[r])}}}),define("ext/splitview/splits",["require","exports","module","core/ide","ext/splitview/grids","ext/splitview/zmanager","ext/editors/editors","ext/searchreplace/searchreplace","ace/keyboard/hash_handler"],function(e,t,n){function y(e){var t=tabEditors.getPages();e.pairs.sort(function(e,n){var r=t.indexOf(e.page),i=t.indexOf(n.page);return r>i?1:r<i?-1:0})}function b(e){var t=e.localName,n=t.indexOf("codeeditor")>-1;if(!l.cloneEditor&&n){S||(S=e),l.cloneEditor=e.cloneNode(!0),l.cloneEditor.removeAttribute("id"),l.cloneEditor.setAttribute("visible","false"),apf.document.documentElement.appendChild(l.cloneEditor),w.call(this,l.cloneEditor),l.cloneEditor.$editor.commands=S.$editor.commands,S.$editor.getKeyboardHandler()&&l.cloneEditor.$editor.setKeyboardHandler(S.$editor.getKeyboardHandler());function r(e,n){l[t]&&l[t].length&&l[t].forEach(function(t){t.setAttribute(e,n)}),l.cloneEditor&&l.cloneEditor.setAttribute(e,n)}e.addEventListener("prop.wrapmode",function(e){r("wrapmode",e.value)})}if(l[t]&&l[t].length){for(var i,s=0,o=l[t].length;s<o;++s)i=l[t][s],i.hide(),apf.document.documentElement.appendChild(i);return l[t]}w.call(this,e),l[t]=[],l[t].original=e;for(var s=0;s<2;++s)e=e.cloneNode(!0),e.removeAttribute("id"),e.setAttribute("visible",!1),l[t].push(e),apf.document.documentElement.appendChild(e),w.call(this,e),n&&(e.$editor.commands=S.$editor.commands,S.$editor.getKeyboardHandler()&&e.$editor.setKeyboardHandler(S.$editor.getKeyboardHandler()));return l[t]}function w(e){if(e.$splitListener)return;e.addEventListener("focus",e.$splitListener=function(t){x(e)})}function E(e){if(!e.$splitListener)return;e.removeEventListener("focus",e.$splitListener),delete e.$splitListener}function x(e){var n=t.get(e);o.currentEditor&&o.currentEditor.path=="ext/code/code"&&(S||(S=o.currentEditor.amlEditor),o.currentEditor.amlEditor=e,delete u.$editor),n.forEach(function(n){var i=n.pairs[t.indexOf(n,e)].page;for(var s,o,u,a=0,f=n.pairs.length;a<f;++a){s=n.pairs[a].page,u=t.getEditorSession(s);var l=u&&t.isClone(n,s);l&&(l=t.getEditorSession(l)),s===i?(l&&e.getUndoManager()!==s.$at&&u.setUndoManager(s.$at),n===v&&n.activePage!==a&&(o=n.pairs[n.activePage]?n.pairs[n.activePage].page:n.pairs[0].page,n.activePage=a,r.dispatchEvent("tab.afterswitch",{previousPage:o,nextPage:s})),apf.setStyleClass(s.$button,c,[h])):(l&&e.getUndoManager()!==g&&u.setUndoManager(g),apf.setStyleClass(s.$button,h,[c]))}})}function T(e){var t=typeof e.localName!="undefined"?[e]:e.pairs.map(function(e){return e.page});t.forEach(function(e){apf.setStyleClass(e.$button,null,[c,h,p])})}function N(e){var t=typeof e.localName!="undefined"?[null,e]:e.pairs.map(function(e){return e.page});for(var n=0,r=t.length;n<r;++n){if(!t[n])continue;n===0?apf.setStyleClass(t[n].$button,null,[p]):apf.setStyleClass(t[n].$button,p,[])}}function A(e){var n=o.currentEditor.amlEditor,r=v?t.indexOf(v,n):-1;if(r==-1)return;var i=n.parentNode,s=apf.getAbsolutePosition(n.$ext,i.$ext),u={width:n.$ext.offsetWidth,height:n.$ext.offsetHeight},a={width:i.$ext.offsetWidth,height:i.$ext.offsetHeight},f=30;!C&&self.winQuickSearch&&(C=self.winQuickSearch,L=apf.getStyle(C.$ext,"right"),L=="auto"&&(L=f+"px"));if(C){var l=a.width-380,c=a.width-s[0]-u.width+30,h=s[1],p=Math.max(h,0);return{right:Math.max(Math.min(c,l),f),zIndex:parseInt(n.$ext.style.zIndex,10)+1,from:!e||e.anim=="out"?p-27:0,to:!e||e.anim=="out"?p:p-30,onfinish:function(){C.$ext.style.zIndex=C.zindex}}}}function O(e){!k&&self.winGotoLine&&(k=self.winGotoLine);if(!k)return;var n=o.currentEditor.amlEditor,r=v?t.indexOf(v,n):-1;if(r==-1)return;var i=n.$editor,s=n.$ext,u=i.getCursorPosition(),a=n.parentNode,f=i.renderer.textToScreenCoordinates(u.row,u.column),l=apf.getAbsolutePosition(n.$ext,a.$ext),c={width:s.offsetWidth,height:s.offsetHeight},h=Math.max(l[0],0),p=l[1]+c.height-100,d=Math.max(0,Math.min(p,f.pageY-l[1]-5));return{top:d,zIndex:parseInt(n.$ext.style.zIndex,10)+1,left:Math.ceil(e.anim=="out"?h+(h===0?0:-1):h-60)}}function M(e){e.editors.push.apply(e.editors,l[e.editors[0].localName]),l.cloneEditor&&e.editors.push(l.cloneEditor)}function _(e){if(!v)return;var t=i.get(v.gridLayout);if(!t||!t.node)return;return!1}var r=e("core/ide"),i=e("ext/splitview/grids"),s=e("ext/splitview/zmanager"),o=e("ext/editors/editors"),u=e("ext/searchreplace/searchreplace"),a=e("ace/keyboard/hash_handler").HashHandler,f=[],l={},c="splitview_active",h="splitview_inactive",p="splitview_nplus1",d,v,m=apf.K,g=t.CloneUndoManager={};["execute","undo","redo","reset","hasUndo","hasRedo"].forEach(function(e){g[e]=m}),t.init=function(e){return d=e,r.addEventListener("keybindingschange",function(e){var t=e.keybindings;setTimeout(function(){for(var e in l){if(!l.hasOwnProperty(e)||!l[e].length)continue;l[e].forEach(function(n){if(!n.$editor||e.indexOf("codeeditor")==-1)return;var r=S?S.$editor.getKeyboardHandler():new a(t.code);n.$editor.setKeyboardHandler(r)})}})}),r.addEventListener("ext.quicksearch.correctpos",function(e){e.returnValue=A(e)}),r.addEventListener("ext.gotoline.correctpos",function(e){e.returnValue=O(e)}),r.addEventListener("ext.vim.toggle",function(e){e.returnValue=M(e)}),r.addEventListener("ext.revisions.show",function(e){e.show=!0,e.returnValue=_(e)}),r.addEventListener("ext.revisions.hide",function(e){e.show=!1,e.returnValue=_(e)}),i.addEventListener("resize",function(e,t){var n;if(C&&C.visible){n=A();if(!n)return;typeof n.top!="undefined"&&(C.$ext.style.top=n.top+"px"),typeof n.right!="undefined"&&(C.$ext.style.right=n.right+"px")}if(k&&k.visible){var r=o.currentEditor.amlEditor.$editor,i=r.getCursorPosition(),s=r.renderer.textToScreenCoordinates(i.row,i.column);n=O({pos:s});if(!n)return;typeof n.top!="undefined"&&(k.$ext.style.top=n.top+"px"),typeof n.left!="undefined"&&(k.$ext.style.left=n.left+"px")}}),i.init(),this},t.create=function(e,n){n=i.init(n);var r=e.$editor.amlEditor;t.consolidateEditorSession(e,r);var o={pairs:[{page:e,editor:r}],activePage:0,gridLayout:n,zManager:new s};return f.push(o),o},t.set=function(e){if(!apf.isArray(e))return this;f=[].concat(e);for(var t,n=0,r=f.length;n<r;++n)t=f[n],t.gridLayout=i.init(t.gridLayout),t.activePage=t.activePage||0,t.zManager||(t.zManager=new s);return this},t.show=function(e){if(!e||e===v)return this;v&&this.hide(v,v.gridLayout==e.gridLayout),i.show(e.gridLayout);var n,r;f.forEach(function(t){if(t===e)return;for(n=0,r=t.pairs.length;n<r;++n)t.pairs[n].page.$deactivateButton()});for(n=0,r=e.pairs.length;n<r;++n)e.pairs[n].page.$activateButton(),e.pairs[n].editor.show(),e.pairs[n].editor.$editor.onScrollLeftChange&&e.pairs[n].editor.$editor.onScrollLeftChange(),t.consolidateEditorSession(e.pairs[n].page,e.pairs[n].editor);return v=e,this.update(e),this},t.hide=function(e,t){t||i.hide(e.gridLayout);var n,r,s=e===v;for(n=0,r=e.pairs.length;n<r;++n)e.pairs[n].page.$deactivateButton(),(s||e.pairs[n].editor!==o.currentEditor.amlEditor)&&e.pairs[n].editor.hide();return s&&(v=null),S&&(o.currentEditor.amlEditor=S,delete u.$editor),this},t.update=function(e,n){if(!e)return;n=i.init(n||e.gridLayout);var r=e.pairs[0].page,s=r.fake?r.relPage:r,o=e===v,u=tabEditors.getPage();e.gridLayout=n;if(e.pairs.length===1){var a=r.$editor.amlEditor;if(o&&l[a.localName]){var c=[].concat(l[a.localName]);u!==r&&c.unshift(l[a.localName].original);for(var h,p=0,d=c.length;p<d;++p)h=c[p],h.hide(),apf.document.documentElement.appendChild(h)}return a.removeAttribute("model"),a.removeAttribute("actiontracker"),s.appendChild(a),e.zManager.clear(a.$ext),T(r),i.hide(e.gridLayout),o&&(a.show(),v=null),f.remove(e),this}o&&i.show(n),y(e),o&&i.update(n,e),N(e),e.zManager.resetAll(e.pairs.map(function(e){return e.editor.$ext}).reverse()),t.setActivePage(e);if(o)for(var p=0,d=e.pairs.length;p<d;++p)e.pairs[p].page.$activateButton(),t.consolidateEditorSession(e.pairs[p].page,e.pairs[p].editor);return this},t.mutate=function(e,n,r){e=e||(e===null?v:null),r=r||"default";var i=tabEditors,s=i.getPage(),u=e?t.indexOf(e,n):-1;if(u>-1){t.isClone(e,n)&&d.endCloneView(n);var a=e.pairs[u].editor;e.pairs.splice(u,1);if(e===v||a!==o.currentEditor.amlEditor)a.removeAttribute("model"),a.removeAttribute("actiontracker"),a.hide(),apf.document.documentElement.appendChild(a),e.zManager.clear(a.$ext);n.$deactivateButton(),T(n),e===v&&i.getPage()!==e.pairs[0].page&&i.set(e.pairs[0].page),this.update(e)}else if(!e||e.pairs.length<3){var f=b.call(this,n.$editor.amlEditor);if(!e){if(n===s)return!0;r&&r=="clone"&&(s.$editor.amlEditor=f.original),e=this.create(s)}!e.clone&&r=="clone"&&(e.clone=!0);var l=this.getEditor(e,n);if(!l)throw new Error("Splitview fatal error: no editor available to use.");e.pairs.push({page:n,editor:l}),t.consolidateEditorSession(n,l),e.zManager.set(l.$ext),this.show(e)}return!0},t.getEditor=function(e,n){var r,i=b.call(this,n.$editor.amlEditor);if(e.clone&&t.isClone(n))r=l.cloneEditor;else for(var s=0,o=i.length;s<o;++s)if(t.indexOf(e,i[s])==-1){r=i[s];break}return!r&&t.indexOf(e,i.original)==-1&&(r=i.original),r},t.get=function(e){if(!e)return[].concat(f);var n,r=0,i=f.length,s=[];for(;r<i;++r){n=f[r];if(!n||t.indexOf(n,e)===-1)continue;s.push(n)}return s},t.is=function(e){return!!this.get(e)},t.isActive=function(e){return e?e===v:!1},t.getActive=function(){return v||null},t.setActivePage=function(e,n){if(!e)return;var i=e.activePage,s=e.activePage=typeof n=="number"&&!isNaN(n)?n:n?t.indexOf(e,n):e.activePage;if(s==-1){e.activePage=s=0;return}if(e===v){var o=e.pairs[s]?e.pairs[s]:e.pairs[0];o.editor.focus(),s!==i&&r.dispatchEvent("tab.afterswitch",{previousPage:e.pairs[i].page,nextPage:o.page})}},t.indexOf=function(e,t){var n=t.localName.indexOf("page")>-1?"page":"editor";for(var r=0,i=e.pairs.length;r<i;++r)if(e.pairs[r][n]===t)return r;return-1},t.isClone=function(e,t){if(!e.clone)return!1;var n=t.id;for(var r=0,i=e.pairs.length;r<i;++r)if(e.pairs[r].page!==t&&e.pairs[r].page.id==n)return e.pairs[r];return!1},t.getCloneEditor=function(e){return e&&e.$editor.amlEditor&&b.call(this,e.$editor.amlEditor),l.cloneEditor||null},t.getEditorSession=function(e){var t=e.$doc;return t?e.acesession||t.acesession||t.session||null:null},t.consolidateEditorSession=function(e,n){var r=t.getEditorSession(e);if(!r&&e.$editor.setDocument){var i=e.$editor.amlEditor;e.$editor.setDocument(e.$doc,e.$at);var s=i.value;r=t.getEditorSession(e),i.setProperty("value",s)}n||console.trace(),n.model!==e.$model&&n.setAttribute("model",e.$model),n.actiontracker!==e.$at&&n.setAttribute("actiontracker",e.$at),n.value!==r&&n.setProperty("value",r)};var S,C,k,L}),define("ext/splitview/splitview",["require","exports","module","core/ide","core/ext","text!ext/splitview/splitview.css","ext/editors/editors","ext/commands/commands","ext/tabbehaviors/tabbehaviors","ext/settings/settings","ext/code/code","ext/splitview/splits","ace/edit_session"],function(e,t,n){var r=e("core/ide"),i=e("core/ext"),s=e("text!ext/splitview/splitview.css"),o=e("ext/editors/editors"),u=e("ext/commands/commands"),a=e("ext/tabbehaviors/tabbehaviors"),f=e("ext/settings/settings"),l=e("ext/code/code"),c=e("ext/splitview/splits"),h=e("ace/edit_session").EditSession,p,d,v=!1,m=[],g=["ext/code/code","ext/preview/preview","ext/terminal/terminal"];n.exports=i.register("ext/splitview/splitview",{name:"Split View",dev:"Ajax.org",alone:!0,type:i.GENERAL,nodes:[],splits:[],init:function(){function i(e){var t=c.get(e.page)[0];return!c.isActive(t)}apf.importCssString(s||""),r.addEventListener("theme.init",function(e){var t=e.theme.cssClass,n=e.theme.isDark,r=apf.getStyleRule("."+t+" .ace_string","color");apf.importStylesheet([["."+t+" .editor_tab .btnsesssioncontainer div.curbtn.splitview_active .tab_middle","color: "+r+" !important"],["."+t+" .editor_tab .btnsesssioncontainer div.curbtn.splitview_active .tab_middle","text-shadow: "+(n?"rgba(0, 0, 0, .71) !important":"rgba(255, 255, 255, .71) 0px 1px 0px !important")]])});var e=this,t=tabEditors;u.addCommand({name:"mergetableft",bindKey:{mac:"Command-Option-Ctrl-[",win:"Ctrl-Alt-Meta-["},hint:"Add the page on the left of the currently active page to a split view",isAvailable:function(){return r.onLine&&t.length>1&&mnuContextTabs.$page&&mnuContextTabs.$page!=t.getPage(0)},exec:function(){e.mergetableft()}}),u.addCommand({name:"mergetabright",bindKey:{mac:"Command-Option-Ctrl-]",win:"Ctrl-Alt-Meta-]"},hint:"Add the page on the right of the currently active page to a split view",isAvailable:function(){return r.onLine&&t.length>1&&mnuContextTabs.$page&&mnuContextTabs.$page.nextSibling&&mnuContextTabs.$page.nextSibling.localName=="page"},exec:function(){e.mergetableft()}}),u.addCommand({name:"nexteditor",bindKey:{mac:"Ctrl-]",win:"Ctrl-]"},hint:"Navigate to the next editor right or below the editor that is currently active in the current split view",isAvailable:function(){return!0},exec:function(){e.mergetableft()}}),u.addCommand({name:"preveditor",bindKey:{mac:"Ctrl-[",win:"Ctrl-["},hint:"Navigate to the previous editor left or above the editor that is currently active in the current split view",isAvailable:function(){return!0},exec:function(){e.mergetableft()}});var n=a.menu;this.nodes.push(n.appendChild(new apf.divider),n.appendChild(p=new apf.item({caption:"Clone Editor",type:"check",checked:!1,isAvailable:function(){return t.contextPage.$editor.path=="ext/code/code"},onclick:function(){this.checked?e.startCloneView(t.contextPage):t.contextPage.removeNode()}})),n.appendChild(d=new apf.item({caption:"Align splits Vertically",type:"check",checked:!0,isAvailable:function(){return!0},onclick:function(){e.changeLayout(t.contextPage,this.checked?"3rows":"3cols")}}))),r.addEventListener("tab.beforeswitch",function(n){var r=e.updateSplitView(n.previousPage,n.nextPage),i=c.get(n.nextPage)[0];i&&c.update(i);if(r){var s=n.nextPage,o=t.getPage(s.type);o.model!=s.$model&&o.setAttribute("model",s.$model),o.actiontracker!=s.$at&&o.setAttribute("actiontracker",s.$at)}return r}),r.addEventListener("tab.afterswitch",function(t){var n=t.nextPage;if(!c.getActive())return;e.save();if(typeof mnuSyntax=="undefined")return;var r,i=mnuSyntax,s=l.getContentType(n.$model.data);for(var o=0,u=i.childNodes.length;o<u;++o){r=i.childNodes[o];if(!r||!r.localName||r.localName!="item")continue;if(r.value==s){r.select();break}}}),r.addEventListener("tab.close",function(e){if(!e.page.$clone)return;delete e.page.$at,delete e.page.$editor}),r.addEventListener("closefile",function(t){e.onFileClose(t)}),r.addEventListener("beforecycletab",function(t){e.onCycleTab(t)}),r.addEventListener("beforenexttab",function(e){return i(e)}),r.addEventListener("beforeprevioustab",function(e){return i(e)}),r.addEventListener("beforeclosetab",function(e){var t=c.get(e.page)[0];if(!c.isActive(t))return;e.returnValue=t.pairs[t.activePage].page}),r.addEventListener("correctactivepage",function(e){var t=c.getActive(),n=o.currentEditor&&o.currentEditor.amlEditor;if(!t||!n)return;var r=c.indexOf(t,n);if(r==-1)return;e.returnValue=t.pairs[r].page}),t.addEventListener("tabselectclick",function(t){return e.onTabClick(t.page,t.htmlEvent.shiftKey)}),t.addEventListener("tabselectmouseup",function(e){var t=this.$activepage,n=c.get(t)[0];n&&c.update(n)}),t.addEventListener("reorder",function(t){c.get(t.page).forEach(function(e){c.isActive(e)&&c.update(e)}),e.save()}),r.addEventListener("settings.load",function(t){if(!t.model||!t.model.data)return;var n=t.model.data;r.addEventListener("extload",function(){setTimeout(function(){e.restore(n)})})}),r.addEventListener("tab.create",function(n){function w(){function f(e){n.setAttribute("syntax",e.value)}var n=c.getCloneEditor(r);r.acesession=new h(r.$doc.acedoc),r.acesession.setUndoManager(c.CloneUndoManager),r.$doc.addEventListener("prop.value",function(e){r.acesession.setValue(e.value||""),n.$editor.moveCursorTo(0,0)}),n.setProperty("value",r.acesession);var i=c.create(u);i.clone=!0,i.pairs.push({page:r,editor:n}),r.$clone=!0;if(v){var s;for(a=0,l=o.length;a<l;++a){if(o[a]==u.id)continue;s=t.getPage(o[a]);if(!s||c.indexOf(i,s)>-1)continue;i.pairs.splice(a,0,{page:s,editor:c.getEditor(i,s)})}i.activePage=parseInt(v.getAttribute("activepage"),10)||0,i.gridLayout=v.getAttribute("layout")}d.addEventListener("prop.syntax",f),n.setAttribute("syntax",d.syntax),c.consolidateEditorSession(r,n),r.addEventListener("DOMNodeRemovedFromDocument",function(){n.removeEventListener("prop.syntax",f),e.endCloneView(r)}),u.addEventListener("DOMNodeRemovedFromDocument",function(){t.remove(r,null,!0),e.endCloneView(u)}),m.length?e.restore(m):(c.show(i),p.setAttribute("checked",!0),e.save())}var r=n.page,i=n.doc.getNode();if(!apf.isTrue(i.getAttribute("clone")))return;var s=r.id,o=t.getPages(),u;for(var a=0,l=o.length;a<l;++a)if(o[a]!==r&&o[a].id==s){u=o[a];break}if(!u)return;var d=u.$editor.amlEditor;c.consolidateEditorSession(u,d),r.$doc=u.$doc,r.setAttribute("actiontracker",u.$at),r.$at=u.$at;var v,g,y;if(f.model.data){var b=f.model.data.selectNodes("splits/split");for(a=0,l=b.length;a<l;++a){o=b[a]&&b[a].getAttribute("pages");if(!o)continue;o=o.split(","),g=[],y=o.indexOf(u.id);while(y!=-1)g.push(y),y=o.indexOf(u.id,y+1);if(g.length<2)continue;v=b[a];break}}v&&apf.isTrue(v.getAttribute("active"))&&t.set(u),r.$doc.acedoc?w():r.$doc.addEventListener("init",w)}),c.init(this)},mergetableft:function(){return this.mergeTab("left")},mergetabright:function(){return this.mergeTab("right")},mergeTab:function(e){var t=e=="right",n=tabEditors,r=n.getPages(),i=n.getPage(),s=c.getActive(),o=s?s.pairs.length:0;s&&c.indexOf(s,i)>-1&&(i=s.pairs[t?o-1:0].page);if(!i||r.length==1)return;var u;if(o==3)u=r.indexOf(s.pairs[t?o-1:0].page);else{var a=r.indexOf(i);u=a+(t?1:-1)}if(u<0||u>r.length-1)return;if(!this.isSupportedEditor(i.$editor,r[u].$editor))return;return c.mutate(null,r[u]),c.update(c.getActive()),this.save(),!1},nexteditor:function(){this.cycleEditors("next")},preveditor:function(){this.cycleEditors("prev")},cycleEditors:function(e){var t=c.getActive();if(!t)return;var n=e=="next",r=t.activePage,i=r+(n?1:-1);return i<0&&(i=t.pairs.length-1),i>t.pairs.length-1&&(i=0),c.setActivePage(t,t.pairs[i].page),!1},onFileClose:function(e){var t=e.page,n=c.get(t);for(var r=0,i=n.length;r<i;++r)c.mutate(n[r],t);this.save()},onTabClick:function(e,t){var n=tabEditors,r=n.getPage(),i,s,o=null,u=c.get(r)[0];if(u&&!t){for(i=0,s=u.pairs.length;i<s;++i){if(u.pairs[i].page!==r)continue;o=!1;break}return c.setActivePage(u,e),o!==!1&&e!==u.pairs[0].page?(n.set(u.pairs[0].page),!1):!0}if(t){if(!this.isSupportedEditor(r.$editor,e.$editor))return;if(u&&apf.isTrue(e.$doc.getNode().getAttribute("clone"))){var a=c.getCloneEditor(e);for(i=0,s=u.pairs.length;i<s;++i){if(u.pairs[i].editor!==a)continue;return n.remove(u.pairs[i].page,null,!0),!1}}else o=!c.mutate(u,e),this.save();return o}},onCycleTab:function(e){var t=e.pages,n=c.getActive();if(!n)return;if(n.pairs.length==t.length)return e.returnValue=!1;var r=t.length-1,i=e.dir=="right",s=t.indexOf(n.pairs[i?n.pairs.length-1:0].page)+(i?1:-1);s=s<0?r:s>r?0:s;if(c.indexOf(n,t[s])>-1)return e.returnValue=!1;n=c.get(t[s])[0],n?e.returnValue=t.indexOf(n.pairs[0].page):e.returnValue=s},updateSplitView:function(e,t){var n,r=t.$doc,i=t.$at,s=c.get(t)[0];if(e&&e.$model){var o=c.get(e)[0];o&&(!s||o.gridLayout!=s.gridLayout)&&c.hide(o)}this.isSupportedEditor(t.$editor)?(p.enable(),d.enable()):(p.disable(),d.disable()),p.setAttribute("checked",!1),d.setAttribute("checked",!1);if(!r||!i||!s){n=t.$editor.amlEditor;if(!n)return;c.consolidateEditorSession(t,n);var u=t.fake?t.relPage:t;n.parentNode!=u&&u.appendChild(n),n.show();return}return c.show(s),d.setAttribute("checked",s.gridLayout=="3rows"),s.clone?p.setAttribute("checked",!0):p.disable(),apf.layout.forceResize(),this.save(),!1},changeLayout:function(e,t){var n=c.get(e)[0];if(!n||n.gridLayout==t)return;c.update(n,t),d.setAttribute("checked",t=="3rows"),this.save()},startCloneView:function(e){var t=this.getCloneView(e),n=e.$doc;if(t||!n||!c.getEditorSession(e))return;apf.xmldb.setAttribute(n.getNode(),"clone",!0),o.openEditor(n,!1,!1,!0)},endCloneView:function(e){p.setAttribute("checked",!1);var t=this.getCloneView(e);if(!t)return;delete t.clone,apf.xmldb.setAttribute(e.$doc.getNode(),"clone",!1)},getCloneView:function(e){var t=c.get(e);if(!t.length)return null;for(var n=0,r=t.length;n<r;++n)if(t[n]&&t[n].clone)return t[n];return null},save:function(){if(!f.model||v)return;var e=apf.createNodeFromXpath(f.model.data,"splits"),t,n;for(t=e.childNodes.length-1;t>=0;--t)e.removeChild(e.childNodes[t]);var r=c.get(),i;for(t=0,n=r.length;t<n;++t)i=apf.getXml("<split />"),i.setAttribute("pages",r[t].pairs.map(function(e){return e.page.id}).join(",")),i.setAttribute("active",c.isActive(r[t])?"true":"false"),i.setAttribute("activepage",r[t].activePage+""),i.setAttribute("layout",r[t].gridLayout),e.appendChild(i);apf.xmldb.applyChanges("synchronize",e)},restore:function(e){var t=tabEditors;if(t.getPages().length<=1)return;var n,i=c.get();apf.isArray(e)?n=e:n=e.selectNodes("splits/split");if(!n||!n.length)return;v=!0;var s=r.getActivePage(),o,u,a,f,l,h,g,y,b,w,E;for(var S=n.length-1;S>=0;--S){o=n.pop(),u=o.getAttribute("pages").split(","),g=!1,h={};for(a=0,f=u.length;a<f;++a)l=u[a],h[l]?(h[l]++,g=l):h[l]=1;u=Object.keys(h),f=u.length;if(f<2)continue;if(g){b=t.getPage(g);if(!b)continue;if(!b.$doc.acesession){m.indexOf(o)==-1&&m.push(o);continue}y=this.getCloneView(b);if(!y){m.indexOf(o)==-1&&m.push(o);continue}}else y={pairs:[],gridLayout:o.getAttribute("layout")||null};y.activePage=parseInt(o.getAttribute("activepage"),10),y.activePage<0&&(y.activePage=0);for(a=0;a<f;++a){l=u[a];if(l==g)continue;b=t.getPage(l);if(!b||i.indexOf(y,b)>-1)continue;w=c.getEditor(y,b),y.pairs.push({page:b,editor:w})}y.pairs.length>1&&(apf.isTrue(o.getAttribute("active"))&&(E=y),i.indexOf(y)==-1&&i.push(y))}c.set(i),!E||i.indexOf(E,s)==-1?t.set(s):E&&(t.set(E.pairs[0].page),c.update(E),c.show(E),d.setAttribute("checked",E.gridLayout=="3rows"),E.clone&&p.setAttribute("checked",!0)),m.length||(v=!1)},isSupportedEditor:function(){var e;for(var t=0,n=arguments.length;t<n;++t){e=arguments[t];if(!e||g.indexOf(e.path)===-1)return!1}return!0},destroy:function(){u.removeCommandsByName(["mergetableft","mergetabright"]),this.$destroy()}})})})()